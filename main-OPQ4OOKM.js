var kk=Object.defineProperty,Fk=Object.defineProperties;var Lk=Object.getOwnPropertyDescriptors;var md=Object.getOwnPropertySymbols;var MI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable;var AI=(n,e,t)=>e in n?kk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})MI.call(e,t)&&AI(n,t,e[t]);if(md)for(var t of md(e))RI.call(e,t)&&AI(n,t,e[t]);return n},te=(n,e)=>Fk(n,Lk(e));var PI=(n,e)=>{var t={};for(var r in n)MI.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&md)for(var r of md(n))e.indexOf(r)<0&&RI.call(n,r)&&(t[r]=n[r]);return t};var Wm;function _d(){return Wm}function yr(n){let e=Wm;return Wm=n,e}var xI=Symbol("NotFound");function Ns(n){return n===xI||n?.name==="\u0275NotFound"}var Yt=null,vd=!1,Gm=1,Vk=null,Qt=Symbol("SIGNAL");function pe(n){let e=Yt;return Yt=n,e}function wd(){return Yt}var ks={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fs(n){if(vd)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let e=Yt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Yt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Yt.producers,t!==void 0&&t.producer===n)){Yt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Yt&&(!r||jk(i,Yt)))return;let o=Vs(Yt),s={producer:n,consumer:Yt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Yt.producersTail=s,e!==void 0?e.nextProducer=s:Yt.producers=s,o&&FI(n,s)}function OI(){Gm++}function bd(n){if(!(Vs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Gm)){if(!n.producerMustRecompute(n)&&!Uc(n)){Cd(n);return}n.producerRecomputeValue(n),Cd(n)}}function Km(n){if(n.consumers===void 0)return;let e=vd;vd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Uk(r)}}finally{vd=e}}function Ym(){return Yt?.consumerAllowSignalWrites!==!1}function Uk(n){n.dirty=!0,Km(n),n.consumerMarkedDirty?.(n)}function Cd(n){n.dirty=!1,n.lastCleanEpoch=Gm}function Ls(n){return n&&NI(n),pe(n)}function NI(n){n.producersTail=void 0,n.recomputing=!0}function Vc(n,e){pe(e),n&&kI(n)}function kI(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Vs(n))do t=Qm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Uc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(bd(t),r!==t.version))return!0}return!1}function jc(n){if(Vs(n)){let e=n.producers;for(;e!==void 0;)e=Qm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function FI(n,e){let t=n.consumersTail,r=Vs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)FI(i.producer,i)}function Qm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Vs(e)){let o=e.producers;for(;o!==void 0;)o=Qm(o)}return t}function Vs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Id(n){Vk?.(n)}function jk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Td(n,e){return Object.is(n,e)}function Dd(n,e){let t=Object.create(zk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(bd(t),Fs(t),t.value===Lc)throw t.error;return t.value};return r[Qt]=t,Id(t),r}var yd=Symbol("UNSET"),Ed=Symbol("COMPUTING"),Lc=Symbol("ERRORED"),zk=te(L({},ks),{value:yd,dirty:!0,error:null,equal:Td,kind:"computed",producerMustRecompute(n){return n.value===yd||n.value===Ed},producerRecomputeValue(n){if(n.value===Ed)throw new Error("");let e=n.value;n.value=Ed;let t=Ls(n),r,i=!1;try{r=n.computation(),pe(null),i=e!==yd&&e!==Lc&&r!==Lc&&n.equal(e,r)}catch(o){r=Lc,n.error=o}finally{Vc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Bk(){throw new Error}var LI=Bk;function VI(n){LI(n)}function Zm(n){LI=n}var $k=null;function Jm(n,e){let t=Object.create(Sd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>UI(t);return r[Qt]=t,Id(t),[r,s=>Us(t,s),s=>Xm(t,s)]}function UI(n){return Fs(n),n.value}function Us(n,e){Ym()||VI(n),n.equal(n.value,e)||(n.value=e,Hk(n))}function Xm(n,e){Ym()||VI(n),Us(n,e(n.value))}var Sd=te(L({},ks),{equal:Td,value:void 0,kind:"signal"});function Hk(n){n.version++,OI(),Km(n),$k?.(n)}function ye(n){return typeof n=="function"}function js(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ad=js(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(o){e=o instanceof Ad?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{jI(o)}catch(s){e=e??[],s instanceof Ad?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ad(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vo(t,e)}remove(e){let{_finalizers:t}=this;t&&vo(t,e),e instanceof n&&e._removeParent(this)}};ot.EMPTY=(()=>{let n=new ot;return n.closed=!0,n})();var e_=ot.EMPTY;function Md(n){return n instanceof ot||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function jI(n){ye(n)?n():n.unsubscribe()}var ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zs={setTimeout(n,e,...t){let{delegate:r}=zs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Rd(n){zs.setTimeout(()=>{let{onUnhandledError:e}=ir;if(e)e(n);else throw n})}function yo(){}var zI=t_("C",void 0,void 0);function BI(n){return t_("E",void 0,n)}function $I(n){return t_("N",n,void 0)}function t_(n,e,t){return{kind:n,value:e,error:t}}var Eo=null;function Bs(n){if(ir.useDeprecatedSynchronousErrorHandling){let e=!Eo;if(e&&(Eo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Eo;if(Eo=null,t)throw r}}else n()}function HI(n){ir.useDeprecatedSynchronousErrorHandling&&Eo&&(Eo.errorThrown=!0,Eo.error=n)}var Co=class extends ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Md(e)&&e.add(this)):this.destination=Gk}static create(e,t,r){return new $s(e,t,r)}next(e){this.isStopped?r_($I(e),this):this._next(e)}error(e){this.isStopped?r_(BI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?r_(zI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qk=Function.prototype.bind;function n_(n,e){return qk.call(n,e)}var i_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Pd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Pd(r)}else Pd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Pd(t)}}},$s=class extends Co{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ir.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&n_(e.next,o),error:e.error&&n_(e.error,o),complete:e.complete&&n_(e.complete,o)}):i=e}this.destination=new i_(i)}};function Pd(n){ir.useDeprecatedSynchronousErrorHandling?HI(n):Rd(n)}function Wk(n){throw n}function r_(n,e){let{onStoppedNotification:t}=ir;t&&zs.setTimeout(()=>t(n,e))}var Gk={closed:!0,next:yo,error:Wk,complete:yo};var Hs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wn(n){return n}function xd(...n){return o_(n)}function o_(n){return n.length===0?wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Yk(t)?t:new $s(t,r,i);return Bs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=qI(r),new r((i,o)=>{let s=new $s({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hs](){return this}pipe(...t){return o_(t)(this)}toPromise(t){return t=qI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function qI(n){var e;return(e=n??ir.Promise)!==null&&e!==void 0?e:Promise}function Kk(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function Yk(n){return n&&n instanceof Co||Kk(n)&&Md(n)}function s_(n){return ye(n?.lift)}function Pe(n){return e=>{if(s_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(n,e,t,r,i){return new a_(n,e,t,r,i)}var a_=class extends Co{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qs(){return Pe((n,e)=>{let t=null;n._refCount++;let r=Ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ws=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,s_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ot;let t=this.getSubject();e.add(this.source.subscribe(Ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ot.EMPTY)}return e}refCount(){return qs()(this)}};var WI=js(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new WI}next(t){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?e_:(this.currentObservers=null,o.push(t),new ot(()=>{this.currentObservers=null,vo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Od(e,t),n})(),Od=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:e_}};var Ut=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var c_={now(){return(c_.delegate||Date).now()},delegate:void 0};var Nd=class extends ot{constructor(e,t){super()}schedule(e,t=0){return this}};var zc={setInterval(n,e,...t){let{delegate:r}=zc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=zc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Gs=class extends Nd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&zc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ks=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ks.now=c_.now;var Ys=class extends Ks{constructor(e,t=Ks.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var l_=new Ys(Gs);var kd=class extends Gs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Fd=class extends Ys{};var u_=new Fd(kd);var pn=new he(n=>n.complete());function GI(n){return n&&ye(n.schedule)}function KI(n){return n[n.length-1]}function Ld(n){return ye(KI(n))?n.pop():void 0}function Pi(n){return GI(KI(n))?n.pop():void 0}function d_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function QI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function l(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function YI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wo(n){return this instanceof wo?(this.v=n,this):new wo(n)}function ZI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(k){return new Promise(function(F,B){o.push([y,k,F,B])>1||l(y,k)})},T&&(i[y]=T(i[y])))}function l(y,T){try{u(r[y](T))}catch(k){_(o[0][3],k)}}function u(y){y.value instanceof wo?Promise.resolve(y.value.v).then(h,p):_(o[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function _(y,T){y(T),o.shift(),o.length&&l(o[0][0],o[0][1])}}function JI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YI=="function"?YI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Vd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ud(n){return ye(n?.then)}function jd(n){return ye(n[Hs])}function zd(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Bd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Qk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $d=Qk();function Hd(n){return ye(n?.[$d])}function qd(n){return ZI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wo(t.read());if(i)return yield wo(void 0);yield yield wo(r)}}finally{t.releaseLock()}})}function Wd(n){return ye(n?.getReader)}function pt(n){if(n instanceof he)return n;if(n!=null){if(jd(n))return Zk(n);if(Vd(n))return Jk(n);if(Ud(n))return Xk(n);if(zd(n))return XI(n);if(Hd(n))return eF(n);if(Wd(n))return tF(n)}throw Bd(n)}function Zk(n){return new he(e=>{let t=n[Hs]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Jk(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Xk(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Rd)})}function eF(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function XI(n){return new he(e=>{nF(n,e).catch(t=>e.error(t))})}function tF(n){return XI(qd(n))}function nF(n,e){var t,r,i,o;return QI(this,void 0,void 0,function*(){try{for(t=JI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function gn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function xi(n,e=0){return Pe((t,r)=>{t.subscribe(Ae(r,i=>gn(r,n,()=>r.next(i),e),()=>gn(r,n,()=>r.complete(),e),i=>gn(r,n,()=>r.error(i),e)))})}function Oi(n,e=0){return Pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function eT(n,e){return pt(n).pipe(Oi(e),xi(e))}function tT(n,e){return pt(n).pipe(Oi(e),xi(e))}function nT(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function rT(n,e){return new he(t=>{let r;return gn(t,e,()=>{r=n[$d](),gn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Gd(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{gn(t,e,()=>{let r=n[Symbol.asyncIterator]();gn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function iT(n,e){return Gd(qd(n),e)}function oT(n,e){if(n!=null){if(jd(n))return eT(n,e);if(Vd(n))return nT(n,e);if(Ud(n))return tT(n,e);if(zd(n))return Gd(n,e);if(Hd(n))return rT(n,e);if(Wd(n))return iT(n,e)}throw Bd(n)}function Re(n,e){return e?oT(n,e):pt(n)}function se(...n){let e=Pi(n);return Re(n,e)}function Qs(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function h_(n){return!!n&&(n instanceof he||ye(n.lift)&&ye(n.subscribe))}var Xr=js(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Ae(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:rF}=Array;function iF(n,e){return rF(e)?n(...e):n(e)}function Kd(n){return ne(e=>iF(n,e))}var{isArray:oF}=Array,{getPrototypeOf:sF,prototype:aF,keys:cF}=Object;function Yd(n){if(n.length===1){let e=n[0];if(oF(e))return{args:e,keys:null};if(lF(e)){let t=cF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function lF(n){return n&&typeof n=="object"&&sF(n)===aF}function Qd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zd(...n){let e=Pi(n),t=Ld(n),{args:r,keys:i}=Yd(n);if(r.length===0)return Re([],e);let o=new he(uF(r,e,i?s=>Qd(i,s):wn));return t?o.pipe(Kd(t)):o}function uF(n,e,t=wn){return r=>{sT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)sT(e,()=>{let u=Re(n[l],e),h=!1;u.subscribe(Ae(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function sT(n,e,t){n?gn(t,n,e):e()}function aT(n,e,t,r,i,o,s,a){let l=[],u=0,h=0,p=!1,_=()=>{p&&!l.length&&!u&&e.complete()},y=k=>u<r?T(k):l.push(k),T=k=>{o&&e.next(k),u++;let F=!1;pt(t(k,h++)).subscribe(Ae(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;l.length&&u<r;){let B=l.shift();s?gn(e,s,()=>T(B)):T(B)}_()}catch(B){e.error(B)}}))};return n.subscribe(Ae(e,y,()=>{p=!0,_()})),()=>{a?.()}}function gt(n,e,t=1/0){return ye(e)?gt((r,i)=>ne((o,s)=>e(r,o,i,s))(pt(n(r,i))),t):(typeof e=="number"&&(t=e),Pe((r,i)=>aT(r,i,n,t)))}function Zs(n=1/0){return gt(wn,n)}function cT(){return Zs(1)}function Js(...n){return cT()(Re(n,Pi(n)))}function Bc(n){return new he(e=>{pt(n()).subscribe(e)})}function f_(...n){let e=Ld(n),{args:t,keys:r}=Yd(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let h=0;h<s;h++){let p=!1;pt(t[h]).subscribe(Ae(o,_=>{p||(p=!0,u--),a[h]=_},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?Qd(r,a):a),o.complete())}))}});return e?i.pipe(Kd(e)):i}var ei=new he(yo);function mt(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Ae(r,o=>n.call(e,o,i++)&&r.next(o)))})}function mn(n){return Pe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ae(t,void 0,void 0,s=>{o=pt(n(s,mn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function lT(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Ae(s,h=>{let p=u++;l=a?n(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function bo(n,e){return ye(e)?gt(n,e,1):gt(n,1)}function Ni(n){return Pe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sn(n){return n<=0?()=>pn:Pe((e,t)=>{let r=0;e.subscribe(Ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Jd(n=dF){return Pe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dF(){return new Xr}function $c(n){return Pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ti(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):wn,sn(1),t?Ni(e):Jd(()=>new Xr))}function Xs(n){return n<=0?()=>pn:Pe((e,t)=>{let r=[];e.subscribe(Ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function p_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):wn,Xs(1),t?Ni(e):Jd(()=>new Xr))}function Xd(n,e){return Pe(lT(n,e,arguments.length>=2,!0))}function eh(...n){let e=Pi(n);return Pe((t,r)=>{(e?Js(n,t,e):Js(n,t)).subscribe(r)})}function Tt(n,e){return Pe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ae(r,l=>{i?.unsubscribe();let u=0,h=o++;pt(n(l,h)).subscribe(i=Ae(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function th(n){return Pe((e,t)=>{pt(n).subscribe(Ae(t,()=>t.complete(),yo)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ae(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):wn}function uT(n){let e=pe(null);try{return n()}finally{pe(e)}}var ki=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},S_=new ki("20.3.15");var oh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(sr(e,t)),this.code=e}};function hF(n){return`NG0${Math.abs(n)}`}function sr(n,e){return`${hF(n)}${e?": "+e:""}`}var Cr=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("")}function fT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ri(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ri).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function A_(n,e){return n?e?`${n} ${e}`:n:e||""}var fF=ze({__forward_ref__:ze});function cn(n){return n.__forward_ref__=cn,n.toString=function(){return ri(this())},n}function jt(n){return M_(n)?n():n}function M_(n){return typeof n=="function"&&n.hasOwnProperty(fF)&&n.__forward_ref__===cn}function ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ar(n){return{providers:n.providers||[],imports:n.imports||[]}}function Gc(n){return pF(n,sh)}function R_(n){return Gc(n)!==null}function pF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function gF(n){let e=n?.[sh]??null;return e||null}function m_(n){return n&&n.hasOwnProperty(rh)?n[rh]:null}var sh=ze({\u0275prov:ze}),rh=ze({\u0275inj:ze}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function P_(n){return n&&!!n.\u0275providers}var x_=ze({\u0275cmp:ze}),O_=ze({\u0275dir:ze}),N_=ze({\u0275pipe:ze}),k_=ze({\u0275mod:ze}),qc=ze({\u0275fac:ze}),Ao=ze({__NG_ELEMENT_ID__:ze}),dT=ze({__NG_ENV_ID__:ze});function Mo(n){return typeof n=="string"?n:n==null?"":String(n)}function pT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Mo(n)}var gT=ze({ngErrorCode:ze}),mF=ze({ngErrorMessage:ze}),_F=ze({ngTokenPath:ze});function F_(n,e){return mT("",-200,e)}function ah(n,e){throw new H(-201,!1)}function mT(n,e,t){let r=new H(e,n);return r[gT]=e,r[mF]=n,t&&(r[_F]=t),r}function vF(n){return n[gT]}var __;function _T(){return __}function an(n){let e=__;return __=n,e}function L_(n,e,t){let r=Gc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;ah(n,"Injector")}var yF={},Io=yF,v_="__NG_DI_FLAG__",y_=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=To(t)||0;try{return this.injector.get(e,r&8?null:Io,r)}catch(i){if(Ns(i))return i;throw i}}};function EF(n,e=0){let t=_d();if(t===void 0)throw new H(-203,!1);if(t===null)return L_(n,void 0,e);{let r=CF(e),i=t.retrieve(n,r);if(Ns(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(_T()||EF)(jt(n),e)}function P(n,e){return me(n,To(e))}function To(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function CF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function E_(n){let e=[];for(let t=0;t<n.length;t++){let r=jt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=wF(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function vT(n,e){return n[v_]=e,n.prototype[v_]=e,n}function wF(n){return n[v_]}function Fi(n,e){let t=n.hasOwnProperty(qc);return t?n[qc]:null}function yT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function ET(n){return n.flat(Number.POSITIVE_INFINITY)}function ch(n,e){n.forEach(t=>Array.isArray(t)?ch(t,e):e(t))}function V_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function wT(n,e,t){let r=ta(n,e);return r>=0?n[r|1]=t:(r=~r,CT(n,r,e,t)),r}function lh(n,e){let t=ta(n,e);if(t>=0)return n[t|1]}function ta(n,e){return bF(n,e,1)}function bF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Vi={},bn=[],Hn=new W(""),U_=new W("",-1),j_=new W(""),Wc=class{get(e,t=Io){if(t===Io){let i=mT("",-201);throw i.name="\u0275NotFound",i}return t}};function z_(n){return n[k_]||null}function ii(n){return n[x_]||null}function uh(n){return n[O_]||null}function B_(n){return n[N_]||null}function At(n){return{\u0275providers:n}}function bT(n){return At([{provide:Hn,multi:!0,useValue:n}])}function IT(...n){return{\u0275providers:dh(!0,n),\u0275fromNgModule:!0}}function dh(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ch(e,s=>{let a=s;ih(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&TT(i,o),t}function TT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$_(i,o=>{e(o,r)})}}function ih(n,e,t,r){if(n=jt(n),!n)return!1;let i=null,o=m_(n),s=!o&&ii(n);if(!o&&!s){let l=n.ngModule;if(o=m_(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)ih(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ch(o.imports,h=>{ih(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&TT(u,e)}if(!a){let u=Fi(i)||(()=>new i);e({provide:i,useFactory:u,deps:bn},i),e({provide:j_,useValue:i,multi:!0},i),e({provide:Hn,useValue:()=>me(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;$_(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function $_(n,e){for(let t of n)P_(t)&&(t=t.\u0275providers),Array.isArray(t)?$_(t,e):e(t)}var IF=ze({provide:String,useValue:ze});function DT(n){return n!==null&&typeof n=="object"&&IF in n}function TF(n){return!!(n&&n.useExisting)}function DF(n){return!!(n&&n.useFactory)}function Do(n){return typeof n=="function"}function ST(n){return!!n.useClass}var Yc=new W(""),nh={},hT={},g_;function Qc(){return g_===void 0&&(g_=new Wc),g_}var lt=class{},So=class extends lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,w_(e,s=>this.processProvider(s)),this.records.set(U_,ea(void 0,this)),i.has("environment")&&this.records.set(lt,ea(void 0,this));let o=this.records.get(Yc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(j_,bn,{self:!0}))}retrieve(e,t){let r=To(t)||0;try{return this.get(e,Io,r)}catch(i){if(Ns(i))return i;throw i}}destroy(){Hc(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return Hc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Hc(this);let t=yr(this),r=an(void 0),i;try{return e()}finally{yr(t),an(r)}}get(e,t=Io,r){if(Hc(this),e.hasOwnProperty(dT))return e[dT](this);let i=To(r),o,s=yr(this),a=an(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=PF(e)&&Gc(e);h&&this.injectableDefInScope(h)?u=ea(C_(e),nh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let l=i&2?Qc():this.parent;return t=i&8&&t===Io?null:t,l.get(e,t)}catch(l){let u=vF(l);throw u===-200||u===-201?new H(u,null):l}finally{an(a),yr(s)}}resolveInjectorInitializers(){let e=pe(null),t=yr(this),r=an(void 0),i;try{let o=this.get(Hn,bn,{self:!0});for(let s of o)s()}finally{yr(t),an(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ri(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=jt(e);let t=Do(e)?e:jt(e&&e.provide),r=AF(e);if(!Do(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ea(void 0,nh,!0),i.factory=()=>E_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pe(null);try{if(t.value===hT)throw F_(ri(e));return t.value===nh&&(t.value=hT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&RF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function C_(n){let e=Gc(n),t=e!==null?e.factory:Fi(n);if(t!==null)return t;if(n instanceof W)throw new H(204,!1);if(n instanceof Function)return SF(n);throw new H(204,!1)}function SF(n){if(n.length>0)throw new H(204,!1);let t=gF(n);return t!==null?()=>t.factory(n):()=>new n}function AF(n){if(DT(n))return ea(void 0,n.useValue);{let e=H_(n);return ea(e,nh)}}function H_(n,e,t){let r;if(Do(n)){let i=jt(n);return Fi(i)||C_(i)}else if(DT(n))r=()=>jt(n.useValue);else if(DF(n))r=()=>n.useFactory(...E_(n.deps||[]));else if(TF(n))r=(i,o)=>me(jt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=jt(n&&(n.useClass||n.provide));if(MF(n))r=()=>new i(...E_(n.deps));else return Fi(i)||C_(i)}return r}function Hc(n){if(n.destroyed)throw new H(205,!1)}function ea(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MF(n){return!!n.deps}function RF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function w_(n,e){for(let t of n)Array.isArray(t)?w_(t,e):t&&P_(t)?w_(t.\u0275providers,e):e(t)}function _t(n,e){let t;n instanceof So?(Hc(n),t=n):t=new y_(n);let r,i=yr(t),o=an(void 0);try{return e()}finally{yr(i),an(o)}}function AT(){return _T()!==void 0||_d()!=null}var ln=0,ie=1,ge=2,ut=3,qn=4,Wn=5,_n=6,na=7,dt=8,In=9,wr=10,He=11,ra=12,q_=13,Ro=14,un=15,Ui=16,Po=17,br=18,Zc=19,W_=20,ni=21,hh=22,Jc=23,Tn=24,xo=25,Oo=26,Ye=27,MT=1,cr=6,Ir=7,Xc=8,No=9,rt=10;function Dn(n){return Array.isArray(n)&&typeof n[MT]=="object"}function Sn(n){return Array.isArray(n)&&n[MT]===!0}function G_(n){return(n.flags&4)!==0}function oi(n){return n.componentOffset>-1}function fh(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function ko(n){return(n[ge]&512)!==0}function ji(n){return(n[ge]&256)===256}var RT="svg",PT="math";function An(n){for(;Array.isArray(n);)n=n[ln];return n}function K_(n,e){return An(e[n])}function Gn(n,e){return An(e[n.index])}function Fo(n,e){return n.data[e]}function xT(n,e){return n[e]}function Y_(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Kn(n,e){let t=e[n];return Dn(t)?t:t[ln]}function OT(n){return(n[ge]&4)===4}function ph(n){return(n[ge]&128)===128}function NT(n){return Sn(n[ut])}function zi(n,e){return e==null?null:n[e]}function Q_(n){n[Po]=0}function Z_(n){n[ge]&1024||(n[ge]|=1024,ph(n)&&ia(n))}function kT(n,e){for(;n>0;)e=e[Ro],n--;return e}function el(n){return!!(n[ge]&9216||n[Tn]?.dirty)}function gh(n){n[wr].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),el(n)&&ia(n)}function ia(n){n[wr].changeDetectionScheduler?.notify(0);let e=Li(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!ph(e)));)e=Li(e)}function J_(n,e){if(ji(n))throw new H(911,!1);n[ni]===null&&(n[ni]=[]),n[ni].push(e)}function FT(n,e){if(n[ni]===null)return;let t=n[ni].indexOf(e);t!==-1&&n[ni].splice(t,1)}function Li(n){let e=n[ut];return Sn(e)?e[ut]:e}function X_(n){return n[na]??=[]}function ev(n){return n.cleanup??=[]}function LT(n,e,t,r){let i=X_(e);i.push(t),n.firstCreatePass&&ev(n).push(r,i.length-1)}var be={lFrame:eD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var b_=!1;function VT(){return be.lFrame.elementDepthCount}function UT(){be.lFrame.elementDepthCount++}function jT(){be.lFrame.elementDepthCount--}function zT(){return be.bindingsEnabled}function tv(){return be.skipHydrationRootTNode!==null}function BT(n){return be.skipHydrationRootTNode===n}function $T(n){be.skipHydrationRootTNode=n}function HT(){be.skipHydrationRootTNode=null}function Ie(){return be.lFrame.lView}function Mt(){return be.lFrame.tView}function U(n){return be.lFrame.contextLView=n,n[dt]}function j(n){return be.lFrame.contextLView=null,n}function zt(){let n=nv();for(;n!==null&&n.type===64;)n=n.parent;return n}function nv(){return be.lFrame.currentTNode}function qT(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function oa(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function rv(){return be.lFrame.isParent}function WT(){be.lFrame.isParent=!1}function iv(){return b_}function ov(n){let e=b_;return b_=n,e}function mh(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function GT(){return be.lFrame.bindingIndex}function KT(n){return be.lFrame.bindingIndex=n}function Lo(){return be.lFrame.bindingIndex++}function sv(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function YT(){return be.lFrame.inI18n}function QT(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,_h(e)}function ZT(){return be.lFrame.currentDirectiveIndex}function _h(n){be.lFrame.currentDirectiveIndex=n}function JT(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function av(){return be.lFrame.currentQueryIndex}function vh(n){be.lFrame.currentQueryIndex=n}function xF(n){let e=n[ie];return e.type===2?e.declTNode:e.type===1?n[Wn]:null}function cv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=xF(o),i===null||(o=o[Ro],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=be.lFrame=XT();return r.currentTNode=e,r.lView=n,!0}function yh(n){let e=XT(),t=n[ie];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function XT(){let n=be.lFrame,e=n===null?null:n.child;return e===null?eD(n):e}function eD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function tD(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lv=tD;function Eh(){let n=tD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nD(n){return(be.lFrame.contextLView=kT(n,be.lFrame.contextLView))[dt]}function si(){return be.lFrame.selectedIndex}function Bi(n){be.lFrame.selectedIndex=n}function Ch(){let n=be.lFrame;return Fo(n.tView,n.selectedIndex)}function uv(){return be.lFrame.currentNamespace}var rD=!0;function wh(){return rD}function ai(n){rD=n}function I_(n,e=null,t=null,r){let i=dv(n,e,t,r);return i.resolveInjectorInitializers(),i}function dv(n,e=null,t=null,r,i=new Set){let o=[t||bn,IT(n)];return r=r||(typeof n=="object"?void 0:ri(n)),new So(o,e||Qc(),r||null,i)}var st=class n{static THROW_IF_NOT_FOUND=Io;static NULL=new Wc;static create(e,t){if(Array.isArray(e))return I_({name:""},t,e,"");{let r=e.name??"";return I_({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:n,providedIn:"any",factory:()=>me(U_)});static __NG_ELEMENT_ID__=-1},Dt=new W(""),Yn=(()=>{class n{static __NG_ELEMENT_ID__=OF;static __NG_ENV_ID__=t=>t}return n})(),T_=class extends Yn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ji(this._lView)}onDestroy(e){let t=this._lView;return J_(t,e),()=>FT(t,e)}};function OF(){return new T_(Ie())}var or=class{_console=console;handleError(e){this._console.error("ERROR",e)}},dn=new W("",{providedIn:"root",factory:()=>{let n=P(lt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(or),e.handleError(t))}}}),iD={provide:Hn,useValue:()=>void P(or),multi:!0},NF=new W("",{providedIn:"root",factory:()=>{let n=P(Dt).defaultView;if(!n)return;let e=P(dn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(Yn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function hv(){return At([bT(()=>void P(NF))])}function fv(n){return typeof n=="function"&&n[Qt]!==void 0}function re(n,e){let[t,r,i]=Jm(n,e?.equal),o=t,s=o[Qt];return o.set=r,o.update=i,o.asReadonly=oD.bind(o),o}function oD(){let n=this[Qt];if(n.readonlyFn===void 0){let e=()=>this();e[Qt]=n,n.readonlyFn=e}return n.readonlyFn}function pv(n){return fv(n)&&typeof n.set=="function"}var bh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=kF}return n})();function kF(){return new bh(Ie(),zt())}var Er=class{},sa=new W("",{providedIn:"root",factory:()=>!1});var gv=new W(""),Ih=new W(""),lr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new he(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),$i=(()=>{class n{internalPendingTasks=P(lr);scheduler=P(Er);errorHandler=P(dn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})();function tl(...n){}var mv=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new D_})}return n})(),D_=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};var Th={JSACTION:"jsaction"};function ma(n){return{toString:n}.toString()}var Dh="__parameters__";function $F(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function HF(n,e,t){return ma(()=>{let r=$F(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,h){let p=l.hasOwnProperty(Dh)?l[Dh]:Object.defineProperty(l,Dh,{value:[]})[Dh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Mr=vT(HF("Optional"),8);function qF(n){return typeof n=="function"}var Fh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function KD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Rr=(()=>{let n=()=>YD;return n.ngInherit=!0,n})();function YD(n){return n.type.prototype.ngOnChanges&&(n.setInput=GF),WF}function WF(){let n=ZD(this),e=n?.current;if(e){let t=n.previous;if(t===Vi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function GF(n,e,t,r,i){let o=this.declaredInputs[r],s=ZD(n)||KF(n,{previous:Vi,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Fh(u&&u.currentValue,t,l===Vi),KD(n,e,i,t)}var QD="__ngSimpleChanges__";function ZD(n){return n[QD]||null}function KF(n,e){return n[QD]=e}var sD=[];var Le=function(n,e=null,t){for(let r=0;r<sD.length;r++){let i=sD[r];i(n,e,t)}};function YF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=YD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function QF(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Rh(n,e,t){JD(n,e,3,t)}function Ph(n,e,t,r){(n[ge]&3)===t&&JD(n,e,t,r)}function _v(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function JD(n,e,t,r){let i=r!==void 0?n[Po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Po]+=65536),(a<o||o==-1)&&(ZF(n,t,e,l),n[Po]=(n[Po]&4294901760)+l+2),l++}function aD(n,e){Le(4,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),Le(5,n,e)}}function ZF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ge]>>14<n[Po]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,aD(a,o)):aD(a,o)}var ca=-1,jo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function JF(n){return(n.flags&8)!==0}function XF(n){return(n.flags&16)!==0}function eL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];tL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function XD(n){return n===3||n===4||n===6}function tL(n){return n.charCodeAt(0)===64}function il(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cD(n,t,i,null,e[++r]):cD(n,t,i,null,null))}}return n}function cD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function eS(n){return n!==ca}function Lh(n){return n&32767}function nL(n){return n>>16}function Vh(n,e){let t=nL(n),r=e;for(;t>0;)r=r[Ro],t--;return r}var xv=!0;function Uh(n){let e=xv;return xv=n,e}var rL=256,tS=rL-1,nS=5,iL=0,Dr={};function oL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ao)&&(r=t[Ao]),r==null&&(r=t[Ao]=iL++);let i=r&tS,o=1<<i;e.data[n+(i>>nS)]|=o}function jh(n,e){let t=rS(n,e);if(t!==-1)return t;let r=e[ie];r.firstCreatePass&&(n.injectorIndex=e.length,vv(r.data,n),vv(e,null),vv(r.blueprint,null));let i=ly(n,e),o=n.injectorIndex;if(eS(i)){let s=Lh(i),a=Vh(i,e),l=a[ie].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function vv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ly(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=cS(i),r===null)return ca;if(t++,i=i[Ro],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ca}function Ov(n,e,t){oL(n,e,t)}function sL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(XD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function iS(n,e,t){if(t&8||n!==void 0)return n;ah(e,"NodeInjector")}function oS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[In],o=an(void 0);try{return i?i.get(e,r,t&8):L_(e,r,t&8)}finally{an(o)}}return iS(r,e,t)}function sS(n,e,t,r=0,i){if(n!==null){if(e[ge]&2048&&!(r&2)){let s=uL(n,e,t,r,Dr);if(s!==Dr)return s}let o=aS(n,e,t,r,Dr);if(o!==Dr)return o}return oS(e,t,r,i)}function aS(n,e,t,r,i){let o=cL(t);if(typeof o=="function"){if(!cv(e,n,r))return r&1?iS(i,t,r):oS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ah(t);else return s}finally{lv()}}else if(typeof o=="number"){let s=null,a=rS(n,e),l=ca,u=r&1?e[un][Wn]:null;for((a===-1||r&4)&&(l=a===-1?ly(n,e):e[a+8],l===ca||!uD(r,!1)?a=-1:(s=e[ie],a=Lh(l),e=Vh(l,e)));a!==-1;){let h=e[ie];if(lD(o,a,h.data)){let p=aL(a,e,t,s,r,u);if(p!==Dr)return p}l=e[a+8],l!==ca&&uD(r,e[ie].data[a+8]===u)&&lD(o,a,e)?(s=h,a=Lh(l),e=Vh(l,e)):a=-1}}return i}function aL(n,e,t,r,i,o){let s=e[ie],a=s.data[n+8],l=r==null?oi(a)&&xv:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=xh(a,s,t,l,u);return h!==null?ol(e,s,h,a,i):Dr}function xh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,h=o>>20,p=r?a:a+h,_=i?a+h:u;for(let y=p;y<_;y++){let T=s[y];if(y<l&&t===T||y>=l&&T.type===t)return y}if(i){let y=s[l];if(y&&Tr(y)&&y.type===t)return l}return null}function ol(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof jo){let a=o;if(a.resolving){let y=pT(s[t]);throw F_(y)}let l=Uh(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],h,p=a.injectImpl?an(a.injectImpl):null,_=cv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&YF(t,s[t],e)}finally{p!==null&&an(p),Uh(l),a.resolving=!1,lv()}}return o}function cL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ao)?n[Ao]:void 0;return typeof e=="number"?e>=0?e&tS:lL:e}function lD(n,e,t){let r=1<<n;return!!(t[e+(n>>nS)]&r)}function uD(n,e){return!(n&2)&&!(n&1&&e)}var Uo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sS(this._tNode,this._lView,e,To(r),t)}};function lL(){return new Uo(zt(),Ie())}function Rn(n){return ma(()=>{let e=n.prototype.constructor,t=e[qc]||Nv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qc]||Nv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Nv(n){return M_(n)?()=>{let e=Nv(jt(n));return e&&e()}:Fi(n)}function uL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!ko(s);){let a=aS(o,s,t,r|2,Dr);if(a!==Dr)return a;let l=o.parent;if(!l){let u=s[W_];if(u){let h=u.get(t,Dr,r);if(h!==Dr)return h}l=cS(s),s=s[Ro]}o=l}return i}function cS(n){let e=n[ie],t=e.type;return t===2?e.declTNode:t===1?n[Wn]:null}function hl(n){return sL(zt(),n)}function dL(){return _a(zt(),Ie())}function _a(n,e){return new vn(Gn(n,e))}var vn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=dL}return n})();function hL(n){return n instanceof vn?n.nativeElement:n}function fL(){return this._results[Symbol.iterator]()}var zh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=ET(e);(this._changesDetected=!yT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fL},lS="ngSkipHydration",pL="ngskiphydration";function uS(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===pL)return!0}return!1}function dS(n){return n.hasAttribute(lS)}function Bh(n){return(n.flags&128)===128}function hS(n){if(Bh(n))return!0;let e=n.parent;for(;e;){if(Bh(n)||uS(e))return!0;e=e.parent}return!1}var uy=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(uy||{}),fS=new Map,gL=0;function mL(){return gL++}function _L(n){fS.set(n[Zc],n)}function kv(n){fS.delete(n[Zc])}var dD="__ngContext__";function da(n,e){Dn(e)?(n[dD]=e[Zc],_L(e)):n[dD]=e}function pS(n){return mS(n[ra])}function gS(n){return mS(n[qn])}function mS(n){for(;n!==null&&!Sn(n);)n=n[qn];return n}var Fv;function dy(n){Fv=n}function fl(){if(Fv!==void 0)return Fv;if(typeof document<"u")return document;throw new H(210,!1)}var Pr=new W("",{providedIn:"root",factory:()=>vL}),vL="ng",of=new W(""),li=new W("",{providedIn:"platform",factory:()=>"unknown"});var sf=new W("",{providedIn:"root",factory:()=>fl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function yL(){let n=new qo;return n.store=EL(fl(),P(Pr)),n}var qo=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:yL});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function EL(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var _S="h",vS="b",CL="f",wL="n",yS="e",ES="t",af="c",hy="x",sl="r",CS="i",wS="n",fy="d";var bS="di",IS="s",TS="p";var pl=new W(""),DS=!1,py=new W("",{providedIn:"root",factory:()=>DS});var gy=new W(""),SS=!1,AS=new W(""),my=new W("",{providedIn:"root",factory:()=>new Map});var gl="ngb";var MS=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},RS=(n,e)=>{let t=n,r=t.getAttribute(gl)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var PS=n=>{n.removeAttribute(Th.JSACTION),n.removeAttribute(gl),n.__jsaction_fns=void 0},xS=new W("",{providedIn:"root",factory:()=>({})});function _y(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var Lv=new Map;function OS(n,e){return Lv.set(n,e),()=>Lv.delete(n)}var hD=!1,NS=(n,e,t,r)=>{};function bL(n,e,t,r){NS(n,e,t,r)}function kS(){hD||(NS=(n,e,t,r)=>{let i=n[In].get(Pr);Lv.get(i)?.(e,t,r)},hD=!0)}var cf=new W("");function lf(n){return(n.flags&32)===32}var IL="__nghData__",vy=IL,TL="__nghDeferData__",FS=TL;var Oh="ngh",LS="nghm",VS=()=>null;function DL(n,e,t=!1){let r=n.getAttribute(Oh);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,l={};if(r!==""){let h=e.get(qo,null,{optional:!0});h!==null&&(l=h.get(vy,[])[Number(r)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,uf(u,0,n.nextSibling)),a?n.setAttribute(Oh,a):n.removeAttribute(Oh),u}function US(){VS=DL}function jS(n,e,t=!1){return VS(n,e,t)}function zS(n){let e=n._lView;return e[ie].type===2?null:(ko(e)&&(e=e[Ye]),e)}function SL(n){return n.textContent?.replace(/\s/gm,"")}function AL(n){let e=fl(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=SL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function uf(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Vv(n,e){return n.segmentHeads?.[e]??null}function BS(n){return n.get(AS,!1,{optional:!0})}function ML(n,e){let t=n.data,r=t[yS]?.[e]??null;return r===null&&t[af]?.[e]&&(r=yy(n,e)),r}function $S(n,e){return n.data[af]?.[e]??null}function yy(n,e){let t=$S(n,e)??[],r=0;for(let i of t)r+=i[sl]*(i[hy]??1);return r}function RL(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[fy];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function HS(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[fy];n.disconnectedNodes=t?new Set(t):null}return!!RL(n)?.has(e)}function df(n,e){let t=n[_n];return t!==null&&!tv()&&!lf(e)&&!HS(t,e.index-Ye)}function PL(n,e){let t=e.get(cf),i=e.get(qo).get(FS,{}),o=!1,s=n,a=null,l=[];for(;!o&&s;){o=t.has(s);let u=t.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}l.unshift(s),s=i[s][TS]}return{parentBlockPromise:a,hydrationQueue:l}}function yv(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===LS}function fD(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function qS(n){for(let r of n.body.childNodes)if(yv(r))return;let e=fD(n.body.previousSibling);if(yv(e))return;let t=fD(n.head.lastChild);if(!yv(t))throw new H(-507,!1)}function WS(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];vh(o),a.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function Uv(n,e,t){vh(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function GS(n,e,t){if(G_(e)){let r=pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{pe(r)}}}var ci=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ci||{});var Sh;function xL(){if(Sh===void 0&&(Sh=null,Cr.trustedTypes))try{Sh=Cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sh}function pD(n){return xL()?.createScriptURL(n)||n}var $h=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oh})`}};function ml(n){return n instanceof $h?n.changingThisBreaksApplicationSecurity:n}function hf(n,e){let t=KS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${oh})`)}return t===e}function KS(n){return n instanceof $h&&n.getTypeName()||null}var OL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ey(n){return n=String(n),n.match(OL)?n:"unsafe:"+n}var NL=/^>|^->|<!--|-->|--!>|<!-$/g,kL=/(<|>)/g,FL="\u200B$1\u200B";function LL(n){return n.replace(NL,e=>e.replace(kL,FL))}function YS(n,e){return n.createText(e)}function VL(n,e,t){n.setValue(e,t)}function QS(n,e){return n.createComment(LL(e))}function Cy(n,e,t){return n.createElement(e,t)}function Hh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ZS(n,e,t){n.appendChild(e,t)}function gD(n,e,t,r,i){r!==null?Hh(n,e,t,r,i):ZS(n,e,t)}function wy(n,e,t,r){n.removeChild(null,e,t,r)}function JS(n){n.textContent=""}function UL(n,e,t){n.setAttribute(e,"style",t)}function jL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&eL(n,e,r),i!==null&&jL(n,e,i),o!==null&&UL(n,e,o)}var _l=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(_l||{});function eA(n){let e=nA();return e?e.sanitize(_l.URL,n)||"":hf(n,"URL")?ml(n):Ey(Mo(n))}function tA(n){let e=nA();if(e)return pD(e.sanitize(_l.RESOURCE_URL,n)||"");if(hf(n,"ResourceURL"))return pD(ml(n));throw new H(904,!1)}function zL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?tA:eA}function by(n,e,t){return zL(e,t)(n)}function nA(){let n=Ie();return n&&n[wr].sanitizer}function rA(n){return n.ownerDocument.body}function iA(n){return n instanceof Function?n():n}function BL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var oA="ng-template";function $L(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Iy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Iy(n){return n.type===4&&n.value!==oA}function HL(n,e,t){let r=n.type===4&&!t?oA:n.value;return e===r}function qL(n,e,t){let r=4,i=n.attrs,o=i!==null?KL(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ur(r)&&!ur(l))return!1;if(s&&ur(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!HL(n,l,t)||l===""&&e.length===1){if(ur(r))return!1;s=!0}}else if(r&8){if(i===null||!$L(n,i,l,t)){if(ur(r))return!1;s=!0}}else{let u=e[++a],h=WL(l,i,Iy(n),t);if(h===-1){if(ur(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(ur(r))return!1;s=!0}}}}return ur(r)||s}function ur(n){return(n&1)===0}function WL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return YL(e,n)}function GL(n,e,t=!1){for(let r=0;r<e.length;r++)if(qL(n,e[r],t))return!0;return!1}function KL(n){for(let e=0;e<n.length;e++){let t=n[e];if(XD(t))return e}return n.length}function YL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function mD(n,e){return n?":not("+e.trim()+")":e}function QL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ur(s)&&(e+=mD(o,i),i=""),r=s,o=o||!ur(r);t++}return i!==""&&(e+=mD(o,i)),e}function ZL(n){return n.map(QL).join(",")}function JL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ur(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Pn={};function Ty(n,e,t,r,i,o,s,a,l,u,h){let p=Ye+r,_=p+i,y=XL(p,_),T=typeof u=="function"?u():u;return y[ie]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:T,incompleteFirstPass:!1,ssrId:h}}function XL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pn);return t}function e2(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ty(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Dy(n,e,t,r,i,o,s,a,l,u,h){let p=e.blueprint.slice();return p[ln]=i,p[ge]=r|4|128|8|64|1024,(u!==null||n&&n[ge]&2048)&&(p[ge]|=2048),Q_(p),p[ut]=p[Ro]=n,p[dt]=t,p[wr]=s||n&&n[wr],p[He]=a||n&&n[He],p[In]=l||n&&n[In]||null,p[Wn]=o,p[Zc]=mL(),p[_n]=h,p[W_]=u,p[un]=e.type==2?n[un]:p,p}function t2(n,e,t){let r=Gn(e,n),i=e2(t),o=n[wr].rendererFactory,s=Sy(n,Dy(n,i,null,sA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function sA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function aA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Sy(n,e){return n[ra]?n[q_][qn]=e:n[ra]=e,n[q_]=e,e}function C(n=1){cA(Mt(),Ie(),si()+n,!1)}function cA(n,e,t,r){if(!r)if((e[ge]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Rh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ph(e,o,0,t)}Bi(t)}var ff=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ff||{});function jv(n,e,t,r){let i=pe(null);try{let[o,s,a]=n.inputs[t],l=null;(s&ff.SignalBased)!==0&&(l=e[o][Qt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):KD(e,l,o,r)}finally{pe(i)}}var Sr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Sr||{}),n2;function Ay(n,e){return n2(n,e)}var zo=new Set,pf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(pf||{}),Wo=new W(""),_D=new Set;function xn(n){_D.has(n)||(_D.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lA=!1,zv=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,AT()&&(this.destroyRef=P(Yn,{optional:!0})??void 0,this.pendingTasks=P(lr,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ot&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ve=zv;function uA(n){let e,t;function r(){n=tl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function vD(n){return queueMicrotask(()=>n()),()=>{n=tl}}var My="isAngularZone",qh=My+"_ID",r2=0,Ne=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ve(!1);onMicrotaskEmpty=new Ve(!1);onStable=new Ve(!1);onError=new Ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lA}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,s2(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(My)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,i2,tl,tl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},i2={};function Ry(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function o2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uA(()=>{n.callbackScheduled=!1,Bv(n),n.isCheckStableRunning=!0,Ry(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bv(n)}function s2(n){let e=()=>{o2(n)},t=r2++;n._inner=n._inner.fork({name:"angular",properties:{[My]:!0,[qh]:t,[qh+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(a2(l))return r.invokeTask(o,s,a,l);try{return yD(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ED(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return yD(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!c2(l)&&e(),ED(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Bv(n),Ry(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Bv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function yD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ED(n){n._nesting--,Ry(n)}var al=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ve;onMicrotaskEmpty=new Ve;onStable=new Ve;onError=new Ve;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function a2(n){return dA(n,"__ignore_ng_zone__")}function c2(n){return dA(n,"__scheduler_tick__")}function dA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Py=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),hA=[0,1,2,3],fA=(()=>{class n{ngZone=P(Ne);scheduler=P(Er);errorHandler=P(or,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Wo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Le(16),this.executing=!0;for(let r of hA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Le(17)}register(t){let{view:r}=t;r!==void 0?((r[xo]??=[]).push(t),ia(r),r[ge]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(pf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[xo];e&&(this.view[xo]=e.filter(t=>t!==this))}};function vl(n,e){let t=e?.injector??P(st);return xn("NgAfterNextRender"),u2(n,t,e,!0)}function l2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function u2(n,e,t,r){let i=e.get(Py);i.impl??=e.get(fA);let o=e.get(Wo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Yn):null,a=e.get(bh,null,{optional:!0}),l=new Wh(i.impl,l2(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var pA=new W("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function gA(n,e,t){let r=n.get(pA);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function d2(n,e){let t=n.get(pA);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function h2(n,e){for(let[t,r]of e)gA(n,r.animateFns)}function CD(n,e,t,r){let i=n?.[Oo]?.enter;e!==null&&i&&i.has(t.index)&&h2(r,i)}function aa(n,e,t,r,i,o,s,a){if(i!=null){let l,u=!1;Sn(i)?l=i:Dn(i)&&(u=!0,i=i[ln]);let h=An(i);n===0&&r!==null?(CD(a,r,o,t),s==null?ZS(e,r,h):Hh(e,r,h,s||null,!0)):n===1&&r!==null?(CD(a,r,o,t),Hh(e,r,h,s||null,!0)):n===2?wD(a,o,t,p=>{wy(e,h,u,p)}):n===3&&wD(a,o,t,()=>{e.destroyNode(h)}),l!=null&&T2(e,n,t,l,o,r,s)}}function f2(n,e){mA(n,e),e[ln]=null,e[Wn]=null}function p2(n,e,t,r,i,o){r[ln]=i,r[Wn]=e,mf(n,r,t,1,i,o)}function mA(n,e){e[wr].changeDetectionScheduler?.notify(9),mf(n,e,e[He],2,null,null)}function g2(n){let e=n[ra];if(!e)return Ev(n[ie],n);for(;e;){let t=null;if(Dn(e))t=e[ra];else{let r=e[rt];r&&(t=r)}if(!t){for(;e&&!e[qn]&&e!==n;)Dn(e)&&Ev(e[ie],e),e=e[ut];e===null&&(e=n),Dn(e)&&Ev(e[ie],e),t=e&&e[qn]}e=t}}function xy(n,e){let t=n[No],r=t.indexOf(e);t.splice(r,1)}function gf(n,e){if(ji(e))return;let t=e[He];t.destroyNode&&mf(n,e,t,3,null,null),g2(e)}function Ev(n,e){if(ji(e))return;let t=pe(null);try{e[ge]&=-129,e[ge]|=256,e[Tn]&&jc(e[Tn]),v2(n,e),_2(n,e),e[ie].type===1&&e[He].destroy();let r=e[Ui];if(r!==null&&Sn(e[ut])){r!==e[ut]&&xy(r,e);let i=e[br];i!==null&&i.detachView(n)}kv(e)}finally{pe(t)}}function wD(n,e,t,r){let i=n?.[Oo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&zo.add(n),gA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let u=s.animateFns[l],{promise:h}=u();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),m2(n,r)}else n&&zo.delete(n),r(!1)},i)}function m2(n,e){let t=n[Oo]?.running;if(t){t.then(()=>{n[Oo].running=void 0,zo.delete(n),e(!0)});return}e(!1)}function _2(n,e){let t=n.cleanup,r=e[na];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[na]=null);let i=e[ni];if(i!==null){e[ni]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Jc];if(o!==null){e[Jc]=null;for(let s of o)s.destroy()}}function v2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof jo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Le(4,a,l);try{l.call(a)}finally{Le(5,a,l)}}else{Le(4,i,o);try{o.call(i)}finally{Le(5,i,o)}}}}}function y2(n,e,t){return E2(n,e.parent,t)}function E2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ln];if(oi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ci.None||i===ci.Emulated)return null}return Gn(r,t)}function C2(n,e,t){return b2(n,e,t)}function w2(n,e,t){return n.type&40?Gn(n,t):null}var b2=w2,bD;function Oy(n,e,t,r){let i=y2(n,r,e),o=e[He],s=r.parent||e[Wn],a=C2(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)gD(o,i,t[l],a,!1);else gD(o,i,t,a,!1);bD!==void 0&&bD(o,r,e,t,i)}function nl(n,e){if(e!==null){let t=e.type;if(t&3)return Gn(e,n);if(t&4)return $v(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nl(n,r);{let i=n[e.index];return Sn(i)?$v(-1,i):An(i)}}else{if(t&128)return nl(n,e.next);if(t&32)return Ay(e,n)()||An(n[e.index]);{let r=_A(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(n[un]);return nl(i,r)}else return nl(n,e.next)}}}return null}function _A(n,e){if(e!==null){let r=n[un][Wn],i=e.projection;return r.projection[i]}return null}function $v(n,e){let t=rt+n+1;if(t<e.length){let r=e[t],i=r[ie].firstChild;if(i!==null)return nl(r,i)}return e[Ir]}function Ny(n,e,t,r,i,o,s){for(;t!=null;){let a=r[In];if(t.type===128){t=t.next;continue}let l=r[t.index],u=t.type;if(s&&e===0&&(l&&da(An(l),r),t.flags|=2),!lf(t))if(u&8)Ny(n,e,t.child,r,i,o,!1),aa(e,n,a,i,l,t,o,r);else if(u&32){let h=Ay(t,r),p;for(;p=h();)aa(e,n,a,i,p,t,o,r);aa(e,n,a,i,l,t,o,r)}else u&16?I2(n,e,r,t,i,o):aa(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function mf(n,e,t,r,i,o){Ny(t,r,n.firstChild,e,i,o,!1)}function I2(n,e,t,r,i,o){let s=t[un],l=s[Wn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];aa(e,n,t[In],i,h,r,o,t)}else{let u=l,h=s[ut];Bh(r)&&(u.flags|=128),Ny(n,e,u,h,i,o,!0)}}function T2(n,e,t,r,i,o,s){let a=r[Ir],l=An(r);a!==l&&aa(e,n,t,o,a,i,s);for(let u=rt;u<r.length;u++){let h=r[u];mf(h[ie],h,n,e,o,a)}}function D2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Sr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Sr.Important),n.setStyle(t,r,i,o))}}function vA(n,e,t,r,i){let o=si(),s=r&2;try{Bi(-1),s&&e.length>Ye&&cA(n,e,Ye,!1),Le(s?2:0,i,t),t(r,i)}finally{Bi(o),Le(s?3:1,i,t)}}function yA(n,e,t){O2(n,e,t),(t.flags&64)===64&&N2(n,e,t)}function EA(n,e,t=Gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function S2(n,e,t,r){let o=r.get(py,DS)||t===ci.ShadowDom,s=n.selectRootElement(e,o);return A2(s),s}function A2(n){CA(n)}var CA=()=>null;function M2(n){dS(n)?JS(n):AL(n)}function wA(){CA=M2}function R2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function bA(n,e,t,r,i,o){let s=e[ie];if(Fy(n,s,e,t,r)){oi(n)&&x2(e,n.index);return}n.type&3&&(t=R2(t)),P2(n,e,t,r,i,o)}function P2(n,e,t,r,i,o){if(n.type&3){let s=Gn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function x2(n,e){let t=Kn(e,n);t[ge]&16||(t[ge]|=64)}function O2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;oi(t)&&t2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||jh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ol(e,n,s,t);if(da(l,e),o!==null&&U2(e,s-r,l,a,t,o),Tr(a)){let u=Kn(t.index,e);u[dt]=ol(e,n,s,t)}}}function N2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=ZT();try{Bi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];_h(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&k2(l,u)}}finally{Bi(-1),_h(s)}}function k2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function F2(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];GL(e,o.selectors,!1)&&(r??=[],Tr(o)?r.unshift(o):r.push(o))}return r}function L2(n,e,t,r,i,o){let s=Gn(n,e);V2(e[He],s,o,n.value,t,r,i)}function V2(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Mo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function U2(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];jv(r,t,l,u)}}function j2(n,e,t,r,i){let o=Ye+t,s=e[ie],a=i(s,e,n,r,t);e[o]=a,oa(n,!0);let l=n.type===2;return l?(XS(e[He],a,n),(VT()===0||fh(n))&&da(a,e),UT()):da(a,e),wh()&&(!l||!lf(n))&&Oy(s,e,a,n),n}function z2(n){let e=n;return rv()?WT():(e=e.parent,oa(e,!1)),e}function ky(n,e){let t=n[In];if(!t)return;let r;try{r=t.get(dn,null)}catch{r=null}r?.(e)}function Fy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],h=s[l+1],p=e.data[u];jv(p,t[u],h,i),a=!0}if(o)for(let l of o){let u=t[l],h=e.data[l];jv(h,u,r,i),a=!0}return a}function B2(n,e){let t=Kn(e,n),r=t[ie];$2(r,t);let i=t[ln];i!==null&&t[_n]===null&&(t[_n]=jS(i,t[In])),Le(18),Ly(r,t,t[dt]),Le(19,t[dt])}function $2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ly(n,e,t){yh(e);try{let r=n.viewQuery;r!==null&&Uv(1,r,t);let i=n.template;i!==null&&vA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[br]?.finishViewCreation(n),n.staticContentQueries&&WS(n,e),n.staticViewQueries&&Uv(2,n.viewQuery,t);let o=n.components;o!==null&&H2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ge]&=-5,Eh()}}function H2(n,e){for(let t=0;t<e.length;t++)B2(n,e[t])}function yl(n,e,t,r){let i=pe(null);try{let o=e.tView,a=n[ge]&4096?4096:16,l=Dy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Ui]=u;let h=n[br];return h!==null&&(l[br]=h.createEmbeddedView(o)),Ly(o,l,t),l}finally{pe(i)}}function ha(n,e){return!e||e.firstChild===null||Bh(n)}function cl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(An(o)),Sn(o)&&IA(o,r);let s=t.type;if(s&8)cl(n,e,t.child,r);else if(s&32){let a=Ay(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=_A(e,t);if(Array.isArray(a))r.push(...a);else{let l=Li(e[un]);cl(l[ie],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IA(n,e){for(let t=rt;t<n.length;t++){let r=n[t],i=r[ie].firstChild;i!==null&&cl(r[ie],r,i,e)}n[Ir]!==n[ln]&&e.push(n[Ir])}function TA(n){if(n[xo]!==null){for(let e of n[xo])e.impl.addSequence(e);n[xo].length=0}}var DA=[];function q2(n){return n[Tn]??W2(n)}function W2(n){let e=DA.pop()??Object.create(K2);return e.lView=n,e}function G2(n){n.lView[Tn]!==n&&(n.lView=null,DA.push(n))}var K2=te(L({},ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ia(n.lView)},consumerOnSignalRead(){this.lView[Tn]=this}});function Y2(n){let e=n[Tn]??Object.create(Q2);return e.lView=n,e}var Q2=te(L({},ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Li(n.lView);for(;e&&!SA(e[ie]);)e=Li(e);e&&Z_(e)},consumerOnSignalRead(){this.lView[Tn]=this}});function SA(n){return n.type!==2}function AA(n){if(n[Jc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Jc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ge]&8192)}}var Z2=100;function MA(n,e=0){let r=n[wr].rendererFactory,i=!1;i||r.begin?.();try{J2(n,e)}finally{i||r.end?.()}}function J2(n,e){let t=iv();try{ov(!0),Hv(n,e);let r=0;for(;el(n);){if(r===Z2)throw new H(103,!1);r++,Hv(n,1)}}finally{ov(t)}}function X2(n,e,t,r){if(ji(e))return;let i=e[ge],o=!1,s=!1;yh(e);let a=!0,l=null,u=null;o||(SA(n)?(u=q2(e),l=Ls(u)):wd()===null?(a=!1,u=Y2(e),l=Ls(u)):e[Tn]&&(jc(e[Tn]),e[Tn]=null));try{Q_(e),KT(n.bindingStartIndex),t!==null&&vA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Rh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Ph(e,y,0,null),_v(e,0)}if(s||eV(e),AA(e),RA(e,0),n.contentQueries!==null&&WS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Rh(e,y)}else{let y=n.contentHooks;y!==null&&Ph(e,y,1),_v(e,1)}nV(n,e);let p=n.components;p!==null&&xA(e,p,0);let _=n.viewQuery;if(_!==null&&Uv(2,_,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Rh(e,y)}else{let y=n.viewHooks;y!==null&&Ph(e,y,2),_v(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[hh]){for(let y of e[hh])y();e[hh]=null}o||(TA(e),e[ge]&=-73)}catch(h){throw o||ia(e),h}finally{u!==null&&(Vc(u,l),a&&G2(u)),Eh()}}function RA(n,e){for(let t=pS(n);t!==null;t=gS(t))for(let r=rt;r<t.length;r++){let i=t[r];PA(i,e)}}function eV(n){for(let e=pS(n);e!==null;e=gS(e)){if(!(e[ge]&2))continue;let t=e[No];for(let r=0;r<t.length;r++){let i=t[r];Z_(i)}}}function tV(n,e,t){Le(18);let r=Kn(e,n);PA(r,t),Le(19,r[dt])}function PA(n,e){ph(n)&&Hv(n,e)}function Hv(n,e){let r=n[ie],i=n[ge],o=n[Tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Uc(o)),s||=!1,o&&(o.dirty=!1),n[ge]&=-9217,s)X2(r,n,r.template,n[dt]);else if(i&8192){let a=pe(null);try{AA(n),RA(n,1);let l=r.components;l!==null&&xA(n,l,1),TA(n)}finally{pe(a)}}}function xA(n,e,t){for(let r=0;r<e.length;r++)tV(n,e[r],t)}function nV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bi(~i);else{let o=i,s=t[++r],a=t[++r];QT(s,o);let l=e[o];Le(24,l),a(2,l),Le(25,l)}}}finally{Bi(-1)}}function _f(n,e){let t=iv()?64:1088;for(n[wr].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let r=Li(n);if(ko(n)&&!r)return n;n=r}return null}function OA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function NA(n,e){let t=rt+e;if(t<n.length)return n[t]}function El(n,e,t,r=!0){let i=e[ie];if(rV(i,e,n,t),r){let s=$v(t,n),a=e[He],l=a.parentNode(n[Ir]);l!==null&&p2(i,n[Wn],a,e,l,s)}let o=e[_n];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vy(n,e){let t=ll(n,e);return t!==void 0&&gf(t[ie],t),t}function ll(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t];if(r){let i=r[Ui];i!==null&&i!==n&&xy(i,r),e>0&&(n[t-1][qn]=r[qn]);let o=Kc(n,rt+e);f2(r[ie],r);let s=o[br];s!==null&&s.detachView(o[ie]),r[ut]=null,r[qn]=null,r[ge]&=-129}return r}function rV(n,e,t,r){let i=rt+r,o=t.length;r>0&&(t[i-1][qn]=e),r<o-rt?(e[qn]=t[i],V_(t,rt+r,e)):(t.push(e),e[qn]=null),e[ut]=t;let s=e[Ui];s!==null&&t!==s&&kA(s,e);let a=e[br];a!==null&&a.insertView(n),gh(e),e[ge]|=128}function kA(n,e){let t=n[No],r=e[ut];if(Dn(r))n[ge]|=2;else{let i=r[ut][un];e[un]!==i&&(n[ge]|=2)}t===null?n[No]=[e]:t.push(e)}var Hi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ie];return cl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return ji(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Sn(e)){let t=e[Xc],r=t?t.indexOf(this):-1;r>-1&&(ll(e,r),Kc(t,r))}this._attachedToViewContainer=!1}gf(this._lView[ie],this._lView)}onDestroy(e){J_(this._lView,e)}markForCheck(){_f(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){gh(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,MA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ko(this._lView),t=this._lView[Ui];t!==null&&!e&&xy(t,this._lView),mA(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=ko(this._lView),r=this._lView[Ui];r!==null&&!t&&kA(r,this._lView),gh(this._lView)}};var fa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=iV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=yl(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Hi(o)}}return n})();function iV(){return Uy(zt(),Ie())}function Uy(n,e){return n.type&4?new fa(e,n,_a(n,e)):null}function jy(n,e,t,r,i){let o=n.data[e];if(o===null)o=oV(n,e,t,r,i),YT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=qT();o.injectorIndex=s===null?-1:s.injectorIndex}return oa(o,!0),o}function oV(n,e,t,r,i){let o=nv(),s=rv(),a=s?o:o&&o.parent,l=n.data[e]=aV(n,a,t,e,r,i);return sV(n,l,o,s),l}function sV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function aV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return tv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var cV=new RegExp(`^(\\d+)*(${vS}|${_S})*(.*)`);function lV(n){let e=n.match(cV),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[l,u,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(u,p)}return[s,...a]}function uV(n){return!n.prev&&n.parent?.type===8}function Cv(n){return n.index-Ye}function dV(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function vf(n,e,t,r){let i=Cv(r),o=dV(n,i);if(o===void 0){let s=n.data[wS];if(s?.[i])o=fV(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,l=r.prev??r.parent;if(uV(r)){let u=Cv(r.parent);o=Vv(n,u)}else{let u=Gn(l,t);if(a)o=u.firstChild;else{let h=Cv(l),p=Vv(n,h);if(l.type===2&&p){let y=yy(n,h)+1;o=yf(y,p)}else o=u.nextSibling}}}}return o}function yf(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function hV(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case CL:t=t.firstChild;break;case wL:t=t.nextSibling;break}}return t}function fV(n,e){let[t,...r]=lV(n),i;if(t===_S)i=e[un][ln];else if(t===vS)i=rA(e[un][ln]);else{let o=Number(t);i=An(e[o+Ye])}return hV(i,r)}var pV=!1;function FA(n){pV=n}function gV(n){let e=n[_n];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[He];for(let o of r.values())mV(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function mV(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ye);i&&wy(n,i,!1)}}function Ef(n){let e=n[cr]??[],r=n[ut][He],i=[];for(let o of e)o.data[bS]!==void 0?i.push(o):LA(o,r);n[cr]=i}function _V(n){let{lContainer:e}=n,t=e[cr];if(t===null)return;let i=e[ut][He];for(let o of t)LA(o,i)}function LA(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[sl];for(;t<i;){let o=r.nextSibling;wy(e,r,!1),r=o,t++}}}function Cf(n){Ef(n);let e=n[ln];Dn(e)&&Gh(e);for(let t=rt;t<n.length;t++)Gh(n[t])}function Gh(n){gV(n);let e=n[ie];for(let t=Ye;t<e.bindingStartIndex;t++)if(Sn(n[t])){let r=n[t];Cf(r)}else Dn(n[t])&&Gh(n[t])}function zy(n){let e=n._views;for(let t of e){let r=zS(t);r!==null&&r[ln]!==null&&(Dn(r)?Gh(r):Cf(r))}}function vV(n,e,t,r){n!==null&&(t.cleanup(e),Cf(n.lContainer),zy(r))}function yV(n,e){let t=[];for(let r of e)for(let i=0;i<(r[hy]??1);i++){let o={data:r,firstChild:null};r[sl]>0&&(o.firstChild=n,n=yf(r[sl],n)),t.push(o)}return[n,t]}var VA=()=>null,UA=()=>null;function jA(){VA=EV,UA=CV}function EV(n,e){return BA(n,e)?n[cr].shift():(Ef(n),null)}function Kh(n,e){return VA(n,e)}function CV(n,e,t){if(e.tView.ssrId===null)return null;let r=Kh(n,e.tView.ssrId);return t[ie].firstUpdatePass&&r===null&&wV(t,e),r}function zA(n,e,t){return UA(n,e,t)}function wV(n,e){let t=e;for(;t;){if(ID(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(ID(n,t))return;t=t.next}}function BA(n,e){let t=n[cr];return!e||t===null||t.length===0?!1:t[0].data[CS]===e}function ID(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return Sn(r)&&BA(r,t)?(Ef(r),!0):!1}var $A=class{},wf=class{},qv=class{resolveComponentFactory(e){throw new H(917,!1)}},Cl=class{static NULL=new qv},Bo=class{},xr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>bV()}return n})();function bV(){let n=Ie(),e=zt(),t=Kn(e.index,n);return(Dn(t)?t:n)[He]}var HA=(()=>{class n{static \u0275prov=ee({token:n,providedIn:"root",factory:()=>null})}return n})();var Nh={},la=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Nh,r);return i!==Nh||t===Nh?i:this.parentInjector.get(e,t,r)}};function TD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=A_(i,a);else if(o==2){let l=a,u=e[++s];r=A_(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ee(n,e=0){let t=Ie();if(t===null)return me(n,e);let r=zt();return sS(r,t,jt(n),e)}function IV(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,l,u]=h.resolveHostDirectives(s);break}SV(n,e,t,a,o,l,u)}o!==null&&r!==null&&TV(t,r,o)}function TV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function DV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SV(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let _=0;_<a;_++){let y=r[_];!l&&Tr(y)&&(l=!0,DV(n,t,_)),Ov(jh(t,e),n,y.type)}OV(t,n.data.length,a);for(let _=0;_<a;_++){let y=r[_];y.providersResolver&&y.providersResolver(y)}let u=!1,h=!1,p=aA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){let y=r[_];if(t.mergedAttrs=il(t.mergedAttrs,y.hostAttrs),MV(n,t,e,p,y),xV(p,y,i),s!==null&&s.has(y)){let[k,F]=s.get(y);t.directiveToIndex.set(y.type,[p,k+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!u&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}AV(n,t,o)}function AV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))DD(0,e,i,r),DD(1,e,i,r),AD(e,r,!1);else{let o=t.get(i);SD(0,e,o,r),SD(1,e,o,r),AD(e,r,!0)}}}function DD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),qA(e,o)}}function SD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),qA(e,s)}}function qA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function AD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Iy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function MV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Fi(i.type,!0)),s=new jo(o,Tr(i),Ee,null);n.blueprint[r]=s,t[r]=s,RV(n,e,r,aA(n,t,i.hostVars,Pn),i)}function RV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;PV(s)!=a&&s.push(a),s.push(t,r,o)}}function PV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function OV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function WA(n,e,t,r,i,o,s,a){let l=e[ie],u=l.consts,h=zi(u,s),p=jy(l,n,t,r,h);return o&&IV(l,e,p,zi(u,a),i),p.mergedAttrs=il(p.mergedAttrs,p.attrs),p.attrs!==null&&TD(p,p.attrs,!1),p.mergedAttrs!==null&&TD(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function GA(n,e){QF(n,e),G_(e)&&n.queries.elementEnd(e)}function By(n,e,t){return n[e]=t}function NV(n,e){return n[e]}function Ar(n,e,t){if(t===Pn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function KA(n,e,t,r){let i=Ar(n,e,t);return Ar(n,e+1,r)||i}function wv(n,e,t){return function r(i){let o=oi(n)?Kn(n.index,e):e;_f(o,5);let s=e[dt],a=MD(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=MD(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function MD(n,e,t,r){let i=pe(null);try{return Le(6,e,t),t(r)!==!1}catch(o){return ky(n,o),!1}finally{Le(7,e,t),pe(i)}}function kV(n,e,t,r,i,o,s,a){let l=fh(n),u=!1,h=null;if(!r&&l&&(h=LV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=Gn(n,t),_=r?r(p):p;bL(t,_,o,a);let y=i.listen(_,o,a);if(!FV(o)){let T=r?k=>r(An(k[n.index])):n.index;YA(T,e,t,o,a,y,!1)}}return u}function FV(n){return n.startsWith("animation")||n.startsWith("transition")}function LV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[na],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function YA(n,e,t,r,i,o,s){let a=e.firstCreatePass?ev(e):null,l=X_(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function RD(n,e,t,r,i,o){let s=e[t],a=e[ie],u=a.data[t].outputs[r],p=s[u].subscribe(o);YA(n.index,a,e,i,o,p,!0)}var Wv=Symbol("BINDING");var Yh=class extends Cl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ii(e);return new pa(t,this.ngModule)}};function VV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&ff.SignalBased)!==0};return i&&(o.transform=i),o})}function UV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function jV(n,e,t){let r=e instanceof lt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new la(t,r):t}function zV(n){let e=n.get(Bo,null);if(e===null)throw new H(407,!1);let t=n.get(HA,null),r=n.get(Er,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function BV(n,e){let t=QA(n);return Cy(e,t,t==="svg"?RT:t==="math"?PT:null)}function QA(n){return(n.selectors[0][0]||"div").toLowerCase()}var pa=class extends wf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=VV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=UV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Le(22);let a=pe(null);try{let l=this.componentDef,u=$V(r,l,s,o),h=jV(l,i||this.ngModule,e),p=zV(h),_=p.rendererFactory.createRenderer(null,l),y=r?S2(_,r,l.encapsulation,h):BV(l,_),T=s?.some(PD)||o?.some(B=>typeof B!="function"&&B.bindings.some(PD)),k=Dy(null,u,null,512|sA(l),null,null,p,_,h,null,jS(y,h,!0));k[Ye]=y,yh(k);let F=null;try{let B=WA(Ye,k,2,"#host",()=>u.directiveRegistry,!0,0);XS(_,y,B),da(y,k),yA(u,k,B),GS(u,B,k),GA(u,B),t!==void 0&&qV(B,this.ngContentSelectors,t),F=Kn(B.index,k),k[dt]=F[dt],Ly(u,k,null)}catch(B){throw F!==null&&kv(F),kv(k),B}finally{Le(23),Eh()}return new Qh(this.componentType,k,!!T)}finally{pe(a)}}};function $V(n,e,t,r){let i=n?["ng-version","20.3.15"]:JL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Wv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let _ of p.bindings){a+=_[Wv].requiredVars;let y=h+1;_.create&&(_.targetIdx=y,(o??=[]).push(_)),_.update&&(_.targetIdx=y,(s??=[]).push(_))}}let l=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,_=uh(p);l.push(_)}return Ty(0,null,HV(o,s),1,a,l,null,null,null,[i],null)}function HV(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function PD(n){let e=n[Wv].kind;return e==="input"||e==="twoWay"}var Qh=class extends $A{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Fo(t[ie],Ye),this.location=_a(this._tNode,t),this.instance=Kn(this._tNode.index,t)[dt],this.hostView=this.changeDetectorRef=new Hi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Fy(r,i[ie],i,e,t);this.previousInputValues.set(e,t);let s=Kn(r.index,i);_f(s,1)}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Go=(()=>{class n{static __NG_ELEMENT_ID__=WV}return n})();function WV(){let n=zt();return JA(n,Ie())}var GV=Go,ZA=class extends GV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){let e=ly(this._hostTNode,this._hostLView);if(eS(e)){let t=Vh(e,this._hostLView),r=Lh(e),i=t[ie].data[r+8];return new Uo(i,t)}else return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=xD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Kh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,ha(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!qF(e),u;if(l)u=t;else{let F=t||{};u=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef,s=F.directives,a=F.bindings}let h=l?e:new pa(ii(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let B=(l?p:this.parentInjector).get(lt,null);B&&(o=B)}let _=ii(h.componentType??{}),y=Kh(this._lContainer,_?.id??null),T=y?.firstChild??null,k=h.create(p,i,T,o,s,a);return this.insertImpl(k.hostView,u,ha(this._hostTNode,y)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(NT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ut],u=new ZA(l,l[Wn],l[ut]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return El(s,i,o,r),e.attachToViewContainerRef(),V_(bv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=xD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ll(this._lContainer,t);r&&(Kc(bv(this._lContainer),t),gf(r[ie],r))}detach(e){let t=this._adjustIndex(e,-1),r=ll(this._lContainer,t);return r&&Kc(bv(this._lContainer),t)!=null?new Hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xD(n){return n[Xc]}function bv(n){return n[Xc]||(n[Xc]=[])}function JA(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=OA(r,e,null,n),e[n.index]=t,Sy(e,t)),XA(t,e,n,r),new ZA(t,n,e)}function KV(n,e){let t=n[He],r=t.createComment(""),i=Gn(e,n),o=t.parentNode(i);return Hh(t,o,r,t.nextSibling(i),!1),r}var XA=eM,$y=()=>!1;function YV(n,e,t){return $y(n,e,t)}function eM(n,e,t,r){if(n[Ir])return;let i;t.type&8?i=An(r):i=KV(e,t),n[Ir]=i}function QV(n,e,t){if(n[Ir]&&n[cr])return!0;let r=t[_n],i=e.index-Ye;if(!r||hS(e)||HS(r,i))return!1;let s=Vv(r,i),a=r.data[af]?.[i],[l,u]=yV(s,a);return n[Ir]=l,n[cr]=u,!0}function ZV(n,e,t,r){$y(n,t,e)||eM(n,e,t,r)}function tM(){XA=ZV,$y=QV}var Gv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Kv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Hy(e,t).matches!==null&&this.queries[t].setDirty()}},Yv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oU(e):this.predicate=e}},Qv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Zv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,JV(t,o)),this.matchTNodeWithReadOption(e,t,xh(t,e,o,!1,!1))}else r===fa?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===vn||i===Go||i===fa&&t.type&4)this.addMatch(t.index,-2);else{let o=xh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function JV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function XV(n,e){return n.type&11?_a(n,e):n.type&4?Uy(n,e):null}function eU(n,e,t,r){return t===-1?XV(e,n):t===-2?tU(n,e,r):ol(n,n[ie],t,e)}function tU(n,e,t){if(t===vn)return _a(e,n);if(t===fa)return Uy(e,n);if(t===Go)return JA(e,n)}function nM(n,e,t,r){let i=e[br].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let h=o[u];a.push(eU(e,h,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Jv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=nM(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-l];for(let p=rt;p<h.length;p++){let _=h[p];_[Ui]===_[ut]&&Jv(_[ie],_,u,r)}if(h[No]!==null){let p=h[No];for(let _=0;_<p.length;_++){let y=p[_];Jv(y[ie],y,u,r)}}}}}return r}function nU(n,e){return n[br].queries[e].queryList}function rU(n,e,t){let r=new zh((t&4)===4);return LT(n,e,r,r.destroy),(e[br]??=new Kv).queries.push(new Gv(r))-1}function iU(n,e,t,r){let i=Mt();if(i.firstCreatePass){let o=zt();sU(i,new Yv(e,t,r),o.index),aU(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return rU(i,Ie(),t)}function oU(n){return n.split(",").map(e=>e.trim())}function sU(n,e,t){n.queries===null&&(n.queries=new Qv),n.queries.track(new Zv(e,t))}function aU(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Hy(n,e){return n.queries.getByIndex(e)}function cU(n,e){let t=n[ie],r=Hy(t,e);return r.crossesNgTemplate?Jv(t,n,e,[]):nM(t,n,r,e)}var $o=class{},bf=class{};var Zh=class extends $o{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=z_(e);this._bootstrapComponents=iA(o.bootstrap),this._r3Injector=dv(e,t,[{provide:$o,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver},...r],ri(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jh=class extends bf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zh(this.moduleType,e,[])}};var ul=class extends $o{injector;componentFactoryResolver=new Yh(this);instance=null;constructor(e){super();let t=new So([...e.providers,{provide:$o,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver}],e.parent||Qc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function va(n,e,t=null){return new ul({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var lU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dh(!1,t.type),i=r.length>0?va([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n(me(lt))})}return n})();function qe(n){return ma(()=>{let e=rM(n),t=te(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===uy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(lU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ci.Emulated,styles:n.styles||bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&xn("NgStandalone"),iM(t);let r=n.dependencies;return t.directiveDefs=OD(r,uU),t.pipeDefs=OD(r,B_),t.id=fU(t),t})}function uU(n){return ii(n)||uh(n)}function Or(n){return ma(()=>({type:n.type,bootstrap:n.bootstrap||bn,declarations:n.declarations||bn,imports:n.imports||bn,exports:n.exports||bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dU(n,e){if(n==null)return Vi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=ff.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function hU(n){if(n==null)return Vi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qe(n){return ma(()=>{let e=rM(n);return iM(e),e})}function qy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function rM(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Vi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:dU(n.inputs,e),outputs:hU(n.outputs),debugInfo:null}}function iM(n){n.features?.forEach(e=>e(n))}function OD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function fU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pU(n){return Object.getPrototypeOf(n.prototype).constructor}function Zt(n){let e=pU(n.type),t=!0,r=[n];for(;e;){let i;if(Tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Iv(n.inputs),s.declaredInputs=Iv(n.declaredInputs),s.outputs=Iv(n.outputs);let a=i.hostBindings;a&&yU(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&_U(n,l),u&&vU(n,u),gU(n,i),fT(n.outputs,i.outputs),Tr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Zt&&(t=!1)}}e=Object.getPrototypeOf(e)}mU(r)}function gU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function mU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=il(i.hostAttrs,t=il(t,i.hostAttrs))}}function Iv(n){return n===Vi?{}:n===bn?[]:n}function _U(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function yU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function EU(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=il(n.mergedAttrs,n.attrs);let h=n.tView=Ty(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),oa(n,!1);let l=oM(t,e,n,r);wh()&&Oy(t,e,l,n),da(l,e);let u=OA(l,e,l,n);e[r+Ye]=u,Sy(e,u),YV(u,n,e)}function Xh(n,e,t,r,i,o,s,a,l,u,h){let p=t+Ye,_;if(e.firstCreatePass){if(_=jy(e,p,4,s||null,a||null),u!=null){let y=zi(e.consts,u);_.localNames=[];for(let T=0;T<y.length;T+=2)_.localNames.push(y[T],-1)}}else _=e.data[p];return EU(_,n,e,t,r,i,o,l),u!=null&&EA(n,_,h),_}var oM=sM;function sM(n,e,t,r){return ai(!0),e[He].createComment("")}function CU(n,e,t,r){let i=!df(e,t);ai(i);let o=e[_n]?.data[ES]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return sM(n,e);let s=e[_n],a=vf(s,n,e,t);uf(s,r,a);let l=yy(s,r);return yf(l,a)}function aM(){oM=CU}var Mn=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(Mn||{}),ND=0,wU=1,vt=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(vt||{});var bU=0,wl=1;var IU=4,TU=5;var DU=7,ua=8,SU=9,Wy=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(Wy||{});function kh(n,e){let t=MU(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function AU(n){kh(1,n),kh(0,n),kh(2,n)}function MU(n){let e=IU;return n===1?e=TU:n===2&&(e=SU),e}function cM(n){return n+1}function ya(n,e){let t=n[ie],r=cM(e.index);return n[r]}function bl(n,e){let t=cM(e.index);return n.data[t]}function RU(n,e,t){let r=e[ie],i=bl(r,t);switch(n){case vt.Complete:return i.primaryTmplIndex;case vt.Loading:return i.loadingTmplIndex;case vt.Error:return i.errorTmplIndex;case vt.Placeholder:return i.placeholderTmplIndex;default:return null}}function kD(n,e){return e===vt.Placeholder?n.placeholderBlockConfig?.[ND]??null:e===vt.Loading?n.loadingBlockConfig?.[ND]??null:null}function PU(n){return n.loadingBlockConfig?.[wU]??null}function FD(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function xU(n,e){let t=e.primaryTmplIndex+Ye;return Fo(n,t)}var OU=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?va(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:n,providedIn:"environment",factory:()=>new n})}return n})();var lM=new W("");function Tv(n,e,t){return n.get(OU).getOrCreateInjector(e,n,t,"")}function NU(n,e,t){if(n instanceof la){let i=n.injector,o=n.parentInjector,s=Tv(o,e,t);return new la(i,s)}let r=n.get(lt);if(r!==n){let i=Tv(r,e,t);return new la(n,i)}return Tv(n,e,t)}function Vo(n,e,t,r=!1){let i=t[ut],o=i[ie];if(ji(i))return;let s=ya(i,e),a=s[wl],l=s[DU];if(!(l!==null&&n<l)&&LD(a,n)&&LD(s[bU]??-1,n)){let u=bl(o,e),p=!r&&!0&&(PU(u)!==null||kD(u,vt.Loading)!==null||kD(u,vt.Placeholder))?LU:FU;try{p(n,s,t,e,i)}catch(_){ky(i,_)}}}function kU(n,e){let t=n[cr]?.findIndex(i=>i.data[IS]===e[wl])??-1;return{dehydratedView:t>-1?n[cr][t]:null,dehydratedViewIx:t}}function FU(n,e,t,r,i){Le(20);let o=RU(n,i,r);if(o!==null){e[wl]=n;let s=i[ie],a=o+Ye,l=Fo(s,a),u=0;Vy(t,u);let h;if(n===vt.Complete){let T=bl(s,r),k=T.providers;k&&k.length>0&&(h=NU(i[In],T,k))}let{dehydratedView:p,dehydratedViewIx:_}=kU(t,e),y=yl(i,l,null,{injector:h,dehydratedView:p});if(El(t,y,u,ha(l,p)),_f(y,2),_>-1&&t[cr]?.splice(_,1),(n===vt.Complete||n===vt.Error)&&Array.isArray(e[ua])){for(let T of e[ua])T();e[ua]=null}}Le(21)}function LD(n,e){return n<e}function VD(n,e,t){n.loadingPromise.then(()=>{n.loadingState===Mn.COMPLETE?Vo(vt.Complete,e,t):n.loadingState===Mn.FAILED&&Vo(vt.Error,e,t)})}var LU=null;var If=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Gy=new W("");function qi(n){return!!n&&typeof n.then=="function"}function Ky(n){return!!n&&typeof n.subscribe=="function"}var Yy=new W("");function Tf(n){return At([{provide:Yy,multi:!0,useValue:n}])}var Qy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(Yy,{optional:!0})??[];injector=P(st);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=_t(this.injector,i);if(qi(o))t.push(o);else if(Ky(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wi=new W("");function uM(){Zm(()=>{let n="";throw new H(600,n)})}function dM(n){return n.isBoundToModule}var VU=10;var St=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(dn);afterRenderManager=P(Py);zonelessEnabled=P(sa);rootEffectScheduler=P(mv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(lr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ne(t=>!t))}constructor(){P(Wo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=st.NULL){return this._injector.get(Ne).run(()=>{Le(10);let s=t instanceof wf;if(!this._injector.get(Qy).done){let T="";throw new H(405,T)}let l;s?l=t:l=this._injector.get(Cl).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=dM(l)?void 0:this._injector.get($o),h=r||l.selector,p=l.create(i,[],h,u),_=p.location.nativeElement,y=p.injector.get(Gy,null);return y?.registerApplication(_),p.onDestroy(()=>{this.detachView(p.hostView),rl(this.components,p),y?.unregisterApplication(_)}),this._loadComponent(p),Le(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Le(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(pf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let t=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(t),this.afterTick.next(),Le(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Bo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<VU;)Le(14),this.synchronizeOnce(),Le(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!el(i))continue;let o=r&&!this.zonelessEnabled?0:1;MA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>el(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;rl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Wi,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function UU(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function hM(n,e,t){let r=e[In],i=e[ie];if(n.loadingState!==Mn.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=ya(e,t),s=xU(i,n);n.loadingState=Mn.IN_PROGRESS,kh(1,o);let a=n.dependencyResolverFn,l=r.get($i).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let h=!1,p=[],_=[];for(let y of u)if(y.status==="fulfilled"){let T=y.value,k=ii(T)||uh(T);if(k)p.push(k);else{let F=B_(T);F&&_.push(F)}}else{h=!0;break}if(h){if(n.loadingState=Mn.FAILED,n.errorTmplIndex===null){let T=new H(-750,!1);ky(e,T)}}else{n.loadingState=Mn.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=FD(y.directiveRegistry,p);let T=p.map(F=>F.type),k=dh(!1,...T);n.providers=k}_.length>0&&(y.pipeRegistry=FD(y.pipeRegistry,_))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,l()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=Mn.COMPLETE,l()}),n.loadingPromise)}function jU(n,e){return e[In].get(lM,null,{optional:!0})?.behavior!==Wy.Manual}function zU(n,e,t){let r=e[ie],i=e[t.index];if(!jU(n,e))return;let o=ya(e,t),s=bl(r,t);switch(AU(o),s.loadingState){case Mn.NOT_STARTED:Vo(vt.Loading,t,i),hM(s,e,t),s.loadingState===Mn.IN_PROGRESS&&VD(s,t,i);break;case Mn.IN_PROGRESS:Vo(vt.Loading,t,i),VD(s,t,i);break;case Mn.COMPLETE:Vo(vt.Complete,t,i);break;case Mn.FAILED:Vo(vt.Error,t,i);break;default:}}async function fM(n,e,t){let r=n.get(cf);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=PL(e,n);if(s.length===0)return;o!==null&&s.shift(),HU(r,s),o!==null&&await o;let a=s[0];r.has(a)?await UD(n,s,t):r.awaitParentBlock(a,async()=>await UD(n,s,t))}async function UD(n,e,t){let r=n.get(cf),i=r.hydrating,o=n.get(lr),s=o.add();for(let l=0;l<e.length;l++){let u=e[l],h=r.get(u);if(h!=null){if(await WU(h),await qU(n),BU(h)){_V(h),jD(e.slice(l),r);break}i.get(u).resolve()}else{$U(l,e,r),jD(e.slice(l),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),t&&t(e),vV(r.get(a),e,r,n.get(St))}function BU(n){return ya(n.lView,n.tNode)[wl]===vt.Error}function $U(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&Cf(i.lContainer)}function jD(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function HU(n,e){for(let t of e)n.hydrating.set(t,UU())}function qU(n){return new Promise(e=>vl(e,{injector:n}))}async function WU(n){let{tNode:e,lView:t}=n,r=ya(t,e);return new Promise(i=>{GU(r,i),zU(2,t,e)})}function GU(n,e){Array.isArray(n[ua])||(n[ua]=[]),n[ua].push(e)}function ui(n,e,t,r){let i=Ie(),o=Lo();if(Ar(i,o,e)){let s=Mt(),a=Ch();L2(a,i,n,e,t,r)}return ui}var XX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Xv=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Dv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function KU(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),h=e[o],p=Dv(o,u,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let _=n.at(s),y=e[l],T=Dv(s,_,l,y,t);if(T!==0){T<0&&n.updateValue(s,y),s--,l--;continue}let k=t(o,u),F=t(s,_),B=t(o,h);if(Object.is(B,F)){let oe=t(l,y);Object.is(oe,k)?(n.swap(o,s),n.updateValue(s,y),l--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new ef,i??=BD(n,o,s,t),ey(n,r,o,B))n.updateValue(o,h),o++,s++;else if(i.has(B))r.set(k,n.detach(o)),s--;else{let oe=n.create(o,e[o]);n.attach(o,oe),o++,s++}}for(;o<=l;)zD(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let h=n.at(o),p=u.value,_=Dv(o,h,o,p,t);if(_!==0)_<0&&n.updateValue(o,p),o++,u=l.next();else{r??=new ef,i??=BD(n,o,s,t);let y=t(o,p);if(ey(n,r,o,y))n.updateValue(o,p),o++,s++,u=l.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,u=l.next();else{let T=t(o,h);r.set(T,n.detach(o)),s--}}}for(;!u.done;)zD(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function ey(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function zD(n,e,t,r,i){if(ey(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function BD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var ef=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function G(n,e,t,r,i,o,s,a){xn("NgControlFlow");let l=Ie(),u=Mt(),h=zi(u.consts,o);return Xh(l,u,n,e,t,r,i,h,256,s,a),Zy}function Zy(n,e,t,r,i,o,s,a){xn("NgControlFlow");let l=Ie(),u=Mt(),h=zi(u.consts,o);return Xh(l,u,n,e,t,r,i,h,512,s,a),Zy}function K(n,e){xn("NgControlFlow");let t=Ie(),r=Lo(),i=t[r]!==Pn?t[r]:-1,o=i!==-1?tf(t,Ye+i):void 0,s=0;if(Ar(t,r,n)){let a=pe(null);try{if(o!==void 0&&Vy(o,s),n!==-1){let l=Ye+n,u=tf(t,l),h=iy(t[ie],l),p=zA(u,h,t),_=yl(t,h,e,{dehydratedView:p});El(u,_,s,ha(h,p))}}finally{pe(a)}}else if(o!==void 0){let a=NA(o,s);a!==void 0&&(a[dt]=e)}}var ty=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-rt}};function Df(n,e){return e}var ny=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function On(n,e,t,r,i,o,s,a,l,u,h,p,_){xn("NgControlFlow");let y=Ie(),T=Mt(),k=l!==void 0,F=Ie(),B=a?s.bind(F[un][dt]):s,oe=new ny(k,B);F[Ye+n]=oe,Xh(y,T,n+1,e,t,r,i,zi(T.consts,o),256),k&&Xh(y,T,n+2,l,u,h,p,zi(T.consts,_),512)}var ry=class extends Xv{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[dt].$implicit}attach(e,t){let r=t[_n];this.needsIndexUpdate||=e!==this.length,El(this.lContainer,t,e,ha(this.templateTNode,r)),YU(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,QU(this.lContainer,e),ZU(this.lContainer,e)}create(e,t){let r=Kh(this.lContainer,this.templateTNode.tView.ssrId),i=yl(this.hostLView,this.templateTNode,new ty(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){gf(e[ie],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[dt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[dt].$index=e}getLView(e){return JU(this.lContainer,e)}};function Nn(n){let e=pe(null),t=si();try{let r=Ie(),i=r[ie],o=r[t],s=t+1,a=tf(r,s);if(o.liveCollection===void 0){let u=iy(i,s);o.liveCollection=new ry(a,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(KU(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Lo(),h=l.length===0;if(Ar(r,u,h)){let p=t+2,_=tf(r,p);if(h){let y=iy(i,p),T=zA(_,y,r),k=yl(r,y,void 0,{dehydratedView:T});El(_,k,0,ha(y,T))}else i.firstUpdatePass&&Ef(_),Vy(_,0)}}}finally{pe(e)}}function tf(n,e){return n[e]}function YU(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[Oo]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[In];d2(o,i),zo.delete(r),i.detachedLeaveAnimationFns=void 0}}function QU(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[Oo]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function ZU(n,e){return ll(n,e)}function JU(n,e){return NA(n,e)}function iy(n,e){return Fo(n,e)}function we(n,e,t){let r=Ie(),i=Lo();if(Ar(r,i,e)){let o=Mt(),s=Ch();bA(s,r,n,e,r[He],t)}return we}function $D(n,e,t,r,i){Fy(e,n,t,i?"class":"style",r)}function g(n,e,t,r){let i=Ie(),o=i[ie],s=n+Ye,a=o.firstCreatePass?WA(s,i,2,e,F2,zT(),t,r):o.data[s];if(j2(a,i,n,e,pM),fh(a)){let l=i[ie];yA(l,i,a),GS(l,a,i)}return r!=null&&EA(i,a),g}function m(){let n=Mt(),e=zt(),t=z2(e);return n.firstCreatePass&&GA(n,t),BT(t)&&HT(),jT(),t.classesWithoutHost!=null&&JF(t)&&$D(n,t,Ie(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&XF(t)&&$D(n,t,Ie(),t.stylesWithoutHost,!1),m}function N(n,e,t,r){return g(n,e,t,r),m(),N}var pM=(n,e,t,r,i)=>(ai(!0),Cy(e[He],r,uv()));function XU(n,e,t,r,i){let o=!df(e,t);if(ai(o),o)return Cy(e[He],r,uv());let s=e[_n],a=vf(s,n,e,t);return $S(s,i)&&uf(s,i,a.nextSibling),s&&(uS(t)||dS(a))&&oi(t)&&($T(t),JS(a)),a}function gM(){pM=XU}var ej=(n,e,t,r,i)=>(ai(!0),QS(e[He],""));function tj(n,e,t,r,i){let o,s=!df(e,t);if(ai(s),s)return QS(e[He],"");let a=e[_n],l=vf(a,n,e,t),u=ML(a,i);return uf(a,i,l),o=yf(u,l),o}function mM(){ej=tj}function le(){return Ie()}var Ah=void 0;function nj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var rj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ah,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ah,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ah,"{1} 'at' {0}",Ah],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",nj],Sv={};function kn(n){let e=ij(n),t=HD(e);if(t)return t;let r=e.split("-")[0];if(t=HD(r),t)return t;if(r==="en")return rj;throw new H(701,!1)}function HD(n){return n in Sv||(Sv[n]=Cr.ng&&Cr.ng.common&&Cr.ng.common.locales&&Cr.ng.common.locales[n]),Sv[n]}var ht=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(ht||{});function ij(n){return n.toLowerCase().replace(/_/g,"-")}var Il="en-US";var oj=Il;function _M(n){typeof n=="string"&&(oj=n.toLowerCase().replace(/_/g,"-"))}function q(n,e,t){let r=Ie(),i=Mt(),o=zt();return vM(i,r,r[He],o,n,e,t),q}function vM(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=wv(r,e,o),kV(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let _=h[p],y=h[p+1];l??=wv(r,e,o),RD(r,e,_,y,i,l)}if(u&&u.length)for(let p of u)l??=wv(r,e,o),RD(r,e,p,i,i,l)}}function D(n=1){return nD(n)}function Jy(n,e,t,r){iU(n,e,t,r)}function Xy(n){let e=Ie(),t=Mt(),r=av();vh(r+1);let i=Hy(t,r);if(n.dirty&&OT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=cU(e,r);n.reset(o,hL),n.notifyOnChanges()}return!0}return!1}function e0(){return nU(Ie(),av())}function Mh(n,e){return n<<17|e<<2}function Ho(n){return n>>17&32767}function sj(n){return(n&2)==2}function aj(n,e){return n&131071|e<<17}function oy(n){return n|2}function ga(n){return(n&131068)>>2}function Av(n,e){return n&-131069|e<<2}function cj(n){return(n&1)===1}function sy(n){return n|1}function lj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ho(s),l=ga(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ta(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let _=Ho(n[a+1]);n[r+1]=Mh(_,a),_!==0&&(n[_+1]=Av(n[_+1],r)),n[a+1]=aj(n[a+1],r)}else n[r+1]=Mh(a,0),a!==0&&(n[a+1]=Av(n[a+1],r)),a=r;else n[r+1]=Mh(l,0),a===0?a=r:n[l+1]=Av(n[l+1],r),l=r;u&&(n[r+1]=oy(n[r+1])),qD(n,h,r,!0),qD(n,h,r,!1),uj(e,h,n,r,o),s=Mh(a,l),o?e.classBindings=s:e.styleBindings=s}function uj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ta(o,e)>=0&&(t[r+1]=sy(t[r+1]))}function qD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ho(i):ga(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];dj(l,e)&&(a=!0,n[s+1]=r?sy(u):oy(u)),s=r?Ho(u):ga(u)}a&&(n[t+1]=r?oy(i):sy(i))}function dj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ta(n,e)>=0:!1}function Te(n,e){return hj(n,e,null,!0),Te}function hj(n,e,t,r){let i=Ie(),o=Mt(),s=sv(2);if(o.firstUpdatePass&&pj(o,n,s,r),e!==Pn&&Ar(i,s,e)){let a=o.data[si()];yj(o,a,i,i[He],n,i[s+1]=Ej(e,t),r,s)}}function fj(n,e){return e>=n.expandoStartIndex}function pj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[si()],s=fj(n,t);Cj(o,r)&&e===null&&!s&&(e=!1),e=gj(i,o,e,r),lj(i,o,e,t,s,r)}}function gj(n,e,t,r){let i=JT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Mv(null,n,e,t,r),t=dl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Mv(i,n,e,t,r),o===null){let l=mj(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Mv(null,n,e,l[1],r),l=dl(l,e.attrs,r),_j(n,e,r,l))}else o=vj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function mj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ga(r)!==0)return n[Ho(r)]}function _j(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ho(i)]=r}function vj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=dl(r,s,t)}return dl(r,e.attrs,t)}function Mv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=dl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function dl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),wT(n,s,t?!0:e[++o]))}return n===void 0?null:n}function yj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=cj(u)?WD(l,e,t,i,ga(u),s):void 0;if(!nf(h)){nf(o)||sj(u)&&(o=WD(l,null,t,i,a,s));let p=K_(si(),t);D2(r,s,p,i,o)}}function WD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,_=t[i+1];_===Pn&&(_=p?bn:void 0);let y=p?lh(_,r):h===r?_:void 0;if(u&&!nf(y)&&(y=lh(l,r)),nf(y)&&(a=y,s))return a;let T=n[i+1];i=s?Ho(T):ga(T)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=lh(l,r))}return a}function nf(n){return n!==void 0}function Ej(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ri(ml(n)))),n}function Cj(n,e){return(n.flags&(e?8:16))!==0}function E(n,e=""){let t=Ie(),r=Mt(),i=n+Ye,o=r.firstCreatePass?jy(r,i,1,e,null):r.data[i],s=yM(r,t,o,e,n);t[i]=s,wh()&&Oy(r,t,s,o),oa(o,!1)}var yM=(n,e,t,r,i)=>(ai(!0),YS(e[He],r));function wj(n,e,t,r,i){let o=!df(e,t);if(ai(o),o)return YS(e[He],r);let s=e[_n];return vf(s,n,e,t)}function EM(){yM=wj}function bj(n,e,t,r=""){return Ar(n,Lo(),t)?e+Mo(t)+r:Pn}function Ij(n,e,t,r,i,o=""){let s=GT(),a=KA(n,s,t,i);return sv(2),a?e+Mo(t)+r+Mo(i)+o:Pn}function ke(n){return ue("",n),ke}function ue(n,e,t){let r=Ie(),i=bj(r,n,e,t);return i!==Pn&&CM(r,si(),i),ue}function Nr(n,e,t,r,i){let o=Ie(),s=Ij(o,n,e,t,r,i);return s!==Pn&&CM(o,si(),s),Nr}function CM(n,e,t){let r=K_(e,n);VL(n[He],r,t)}function Q(n,e,t){pv(e)&&(e=e());let r=Ie(),i=Lo();if(Ar(r,i,e)){let o=Mt(),s=Ch();bA(s,r,n,e,r[He],t)}return Q}function X(n,e){let t=pv(n);return t&&n.set(e),t}function Z(n,e){let t=Ie(),r=Mt(),i=zt();return vM(r,t,t[He],i,n,e),Z}function Tj(n,e,t){let r=Mt();if(r.firstCreatePass){let i=Tr(n);ay(t,r.data,r.blueprint,i,!0),ay(e,r.data,r.blueprint,i,!1)}}function ay(n,e,t,r,i){if(n=jt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ay(n[o],e,t,r,i);else{let o=Mt(),s=Ie(),a=zt(),l=Do(n)?n:jt(n.provide),u=H_(n),h=a.providerIndexes&1048575,p=a.directiveStart,_=a.providerIndexes>>20;if(Do(n)||!n.multi){let y=new jo(u,i,Ee,null),T=Pv(l,e,i?h:h+_,p);T===-1?(Ov(jh(a,s),o,l),Rv(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Pv(l,e,h+_,p),T=Pv(l,e,h,h+_),k=y>=0&&t[y],F=T>=0&&t[T];if(i&&!F||!i&&!k){Ov(jh(a,s),o,l);let B=Aj(i?Sj:Dj,t.length,i,r,u,n);!i&&F&&(t[T].providerFactory=B),Rv(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=wM(t[i?T:y],u,!i&&r);Rv(o,n,y>-1?y:T,B)}!i&&r&&F&&t[T].componentProviders++}}}function Rv(n,e,t,r){let i=Do(e),o=ST(e);if(i||o){let l=(o?jt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function wM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Pv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Dj(n,e,t,r,i){return cy(this.multi,[])}function Sj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ol(r,r[ie],this.providerFactory.index,i);s=l.slice(0,a),cy(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],cy(o,s);return s}function cy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Aj(n,e,t,r,i,o){let s=new jo(n,t,Ee,null);return s.multi=[],s.index=e,s.componentProviders=0,wM(s,i,r&&!t),s}function Qn(n,e=[]){return t=>{t.providersResolver=(r,i)=>Tj(r,i?i(n):n,e)}}function Tl(n,e,t){let r=mh()+n,i=Ie();return i[r]===Pn?By(i,r,t?e.call(t):e()):NV(i,r)}function t0(n,e,t,r){return Mj(Ie(),mh(),n,e,t,r)}function bM(n,e){let t=n[e];return t===Pn?void 0:t}function Mj(n,e,t,r,i,o){let s=e+t;return Ar(n,s,i)?By(n,s+1,o?r.call(o,i):r(i)):bM(n,s+1)}function Rj(n,e,t,r,i,o,s){let a=e+t;return KA(n,a,i,o)?By(n,a+2,s?r.call(s,i,o):r(i,o)):bM(n,a+2)}function Sf(n,e){let t=Mt(),r,i=n+Ye;t.firstCreatePass?(r=Pj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Fi(r.type,!0)),s,a=an(Ee);try{let l=Uh(!1),u=o();return Uh(l),Y_(t,Ie(),i,u),u}finally{an(a)}}function Pj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Af(n,e,t,r){let i=n+Ye,o=Ie(),s=xT(o,i);return xj(o,i)?Rj(o,mh(),e,s.transform,t,r,s):s.transform(t,r)}function xj(n,e){return n[ie].data[e].pure}var rf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},n0=(()=>{class n{compileModuleSync(t){return new Jh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=z_(t),o=iA(i.declarations).reduce((s,a)=>{let l=ii(a);return l&&s.push(new pa(l)),s},[]);return new rf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oj=(()=>{class n{zone=P(Ne);changeDetectionScheduler=P(Er);applicationRef=P(St);applicationErrorHandler=P(dn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IM({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ne(te(L({},TM()),{scheduleInRootZone:t})),[{provide:Ne,useFactory:n},{provide:Hn,multi:!0,useFactory:()=>{let r=P(Oj,{optional:!0});return()=>r.initialize()}},{provide:Hn,multi:!0,useFactory:()=>{let r=P(Nj);return()=>{r.initialize()}}},e===!0?{provide:gv,useValue:!0}:[],{provide:Ih,useValue:t??lA},{provide:dn,useFactory:()=>{let r=P(Ne),i=P(lt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(or),o.handleError(s))})}}}]}function TM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Nj=(()=>{class n{subscription=new ot;initialized=!1;zone=P(Ne);pendingTasks=P(lr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var r0=(()=>{class n{applicationErrorHandler=P(dn);appRef=P(St);taskService=P(lr);ngZone=P(Ne);zonelessEnabled=P(sa);tracing=P(Wo,{optional:!0});disableScheduling=P(gv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(qh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Ih,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof al||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?vD:uA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(qh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i0(){return xn("NgZoneless"),At([{provide:Er,useExisting:r0},{provide:Ne,useClass:al},{provide:sa,useValue:!0},{provide:Ih,useValue:!1},[]])}function kj(){return typeof $localize<"u"&&$localize.locale||Il}var Dl=new W("",{providedIn:"root",factory:()=>P(Dl,{optional:!0,skipSelf:!0})||kj()});function Rt(n){return uT(n)}function Ko(n,e){return Dd(n,e?.equal)}var DM=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};var l0={JSACTION:"__jsaction",OWNER:"__owner"},RM={};function Fj(n){return n[l0.JSACTION]}function SM(n,e){n[l0.JSACTION]=e}function Lj(n){return RM[n]}function Vj(n,e){RM[n]=e}var ce={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Uj=[ce.MOUSEENTER,ce.MOUSELEAVE,"pointerenter","pointerleave"],fee=[ce.CLICK,ce.DBLCLICK,ce.FOCUSIN,ce.FOCUSOUT,ce.KEYDOWN,ce.KEYUP,ce.KEYPRESS,ce.MOUSEOVER,ce.MOUSEOUT,ce.SUBMIT,ce.TOUCHSTART,ce.TOUCHEND,ce.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],jj=[ce.FOCUS,ce.BLUR,ce.ERROR,ce.LOAD,ce.TOGGLE],u0=n=>jj.indexOf(n)>=0;function zj(n){return n===ce.MOUSEENTER?ce.MOUSEOVER:n===ce.MOUSELEAVE?ce.MOUSEOUT:n===ce.POINTERENTER?ce.POINTEROVER:n===ce.POINTERLEAVE?ce.POINTEROUT:n}function Bj(n,e,t,r){let i=!1;u0(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function $j(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Hj(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var AM=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function qj(n){return n.which===2||n.which==null&&n.button===4}function Wj(n){return AM&&n.metaKey||!AM&&n.ctrlKey||qj(n)||n.shiftKey}function Gj(n,e,t){let r=n.relatedTarget;return(n.type===ce.MOUSEOVER&&e===ce.MOUSEENTER||n.type===ce.MOUSEOUT&&e===ce.MOUSELEAVE||n.type===ce.POINTEROVER&&e===ce.POINTERENTER||n.type===ce.POINTEROUT&&e===ce.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function Kj(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===ce.MOUSEOVER?t.type=ce.MOUSEENTER:n.type===ce.MOUSEOUT?t.type=ce.MOUSELEAVE:n.type===ce.POINTEROVER?t.type=ce.POINTERENTER:t.type=ce.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Yj=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),xf=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Yj&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Bj(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)$j(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Qj={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Gi(n){return n.eventType}function d0(n,e){n.eventType=e}function Rf(n){return n.event}function PM(n,e){n.event=e}function xM(n){return n.targetElement}function OM(n,e){n.targetElement=e}function NM(n){return n.eic}function Zj(n,e){n.eic=e}function Jj(n){return n.timeStamp}function Xj(n,e){n.timeStamp=e}function Pf(n){return n.eia}function kM(n,e,t){n.eia=[e,t]}function o0(n){n.eia=void 0}function Mf(n){return n[1]}function ez(n){return n.eirp}function FM(n,e){n.eirp=e}function LM(n){return n.eir}function VM(n,e){n.eir=e}function UM(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function tz(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var s0=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Gi(this.eventInfo)}setEventType(e){d0(this.eventInfo,e)}getEvent(){return Rf(this.eventInfo)}setEvent(e){PM(this.eventInfo,e)}getTargetElement(){return xM(this.eventInfo)}setTargetElement(e){OM(this.eventInfo,e)}getContainer(){return NM(this.eventInfo)}setContainer(e){Zj(this.eventInfo,e)}getTimestamp(){return Jj(this.eventInfo)}setTimestamp(e){Xj(this.eventInfo,e)}getAction(){let e=Pf(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){o0(this.eventInfo);return}kM(this.eventInfo,e.name,e.element)}getIsReplay(){return ez(this.eventInfo)}setIsReplay(e){FM(this.eventInfo,e)}getResolved(){return LM(this.eventInfo)}setResolved(e){VM(this.eventInfo,e)}clone(){return new n(UM(this.eventInfo))}},nz={},rz=/\s*;\s*/,iz=ce.CLICK,a0=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Gi(e)===ce.CLICK&&Wj(Rf(e))?d0(e,ce.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){LM(e)||(this.populateAction(e,xM(e)),VM(e,!0))}resolveParentAction(e){let t=Pf(e),r=t&&Mf(t);o0(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==NM(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Pf(e));)r=this.getParentNode(r);let i=Pf(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Gi(e)===ce.MOUSEENTER||Gi(e)===ce.MOUSELEAVE||Gi(e)===ce.POINTERENTER||Gi(e)===ce.POINTERLEAVE)))if(Gj(Rf(e),Gi(e),Mf(i))){let o=Kj(Rf(e),Mf(i));PM(e,o),OM(e,Mf(i))}else o0(e)}getParentNode(e){let t=e[l0.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Gi(t)];i!==void 0&&kM(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Fj(e);if(!t){let r=e.getAttribute(Th.JSACTION);if(!r)t=nz,SM(e,t);else{if(t=Lj(r),!t){t={};let i=r.split(rz);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(Qj.EVENT_ACTION_SEPARATOR),l=a!==-1,u=l?s.substr(0,a).trim():iz,h=l?s.substr(a+1).trim():s;t[u]=h}Vj(r,t)}SM(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},jM=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(jM||{}),c0=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new s0(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&oz(r.element,t)&&Hj(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function oz(n,e){return n.tagName==="A"&&(e.getEventType()===ce.CLICK||e.getEventType()===ce.CLICKMOD)}var zM=Symbol.for("propagationStopped"),h0={REPLAY:101};var sz="`preventDefault` called during event replay.";var az="`composedPath` called during event replay.",Of=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new a0({clickModSupport:t}),this.dispatcher=new c0(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&uz(e),cz(e);e.getAction();){if(dz(e),u0(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),lz(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function cz(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[zM]=!0,t()};Yo(e,"stopPropagation",r),Yo(e,"stopImmediatePropagation",r)}function lz(n){return!!n.getEvent()[zM]}function uz(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);Yo(e,"target",t),Yo(e,"eventPhase",h0.REPLAY),Yo(e,"preventDefault",()=>{throw r(),new Error(sz+"")}),Yo(e,"composedPath",()=>{throw new Error(az+"")})}function dz(n){let e=n.getEvent(),t=n.getAction()?.element;t&&Yo(e,"currentTarget",t,{configurable:!0})}function Yo(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function BM(n,e){n.ecrd(t=>{e.dispatch(t)},jM.I_AM_THE_JSACTION_FRAMEWORK)}function hz(n){return n?.q??[]}function fz(n){n&&(MM(n.c,n.et,n.h),MM(n.c,n.etc,n.h,!0))}function MM(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var pz=!1,$M=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=pz;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=tz(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){FM(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Uj.indexOf(t)>=0)return;let o=(a,l,u)=>{this.handleEvent(a,l,u)};this.eventHandlers[t]=o;let s=zj(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>l=>{o(t,l,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),fz(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=UM(i);d0(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function HM(n,e=window){return hz(e._ejsas?.[n])}function f0(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var QM=Symbol("InputSignalNode#UNSET"),Lz=te(L({},Sd),{transformFn:void 0,applyValueToInputSignal(n,e){Us(n,e)}});function ZM(n,e){let t=Object.create(Lz);t.value=n,t.transformFn=e?.transform;function r(){if(Fs(t),t.value===QM){let i=null;throw new H(-950,i)}return t.value}return r[Qt]=t,r}var Lf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>hl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Vz=new W("");Vz.__NG_ELEMENT_ID__=n=>{let e=zt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new H(204,!1)};function qM(n,e){return ZM(n,e)}function Uz(n){return ZM(QM,n)}var JM=(qM.required=Uz,qM);var p0=new W(""),jz=new W("");function Sl(n){return!n.moduleRef}function zz(n){let e=Sl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ne);return t.run(()=>{Sl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(dn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Sl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(p0);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(p0);s.add(o),n.moduleRef.onDestroy(()=>{rl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return $z(r,t,()=>{let o=e.get(lr),s=o.add(),a=e.get(Qy);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Dl,Il);if(_M(l||Il),!e.get(jz,!0))return Sl(n)?e.get(St):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Sl(n)){let h=e.get(St);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Bz?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Bz;function $z(n,e,t){try{let r=t();return qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kf=null;function Hz(n=[],e){return st.create({name:e,providers:[{provide:Yc,useValue:"platform"},{provide:p0,useValue:new Set([()=>kf=null])},...n]})}function qz(n=[]){if(kf)return kf;let e=Hz(n);return kf=e,uM(),Wz(e),e}function Wz(n){let e=n.get(of,null);_t(n,()=>{e?.forEach(t=>t())})}function Al(){return!1}var Ki=(()=>{class n{static __NG_ELEMENT_ID__=Gz}return n})();function Gz(n){return Kz(zt(),Ie(),(n&16)===16)}function Kz(n,e,t){if(oi(n)&&!t){let r=Kn(n.index,e);return new Hi(r,r)}else if(n.type&175){let r=e[un];return new Hi(r,e)}return null}function XM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Le(8);try{let o=i?.injector??qz(r),s=[IM({}),{provide:Er,useExisting:r0},iD,...t||[]],a=new ul({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return zz({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Le(9)}}var Nf=new WeakSet,WM="",Ff=[];function GM(n){return n.get(gy,SS)}function e1(){let n=[{provide:gy,useFactory:()=>{let e=!0;{let t=P(Pr);e=!!window._ejsas?.[t]}return e&&xn("NgEventReplay"),e}}];return n.push({provide:Hn,useValue:()=>{let e=P(St),{injector:t}=e;if(!Nf.has(e)){let r=P(my);if(GM(t)){kS();let i=t.get(Pr),o=OS(i,(s,a,l)=>{s.nodeType===Node.ELEMENT_NODE&&(MS(s,a,l),RS(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Wi,useFactory:()=>{let e=P(St),{injector:t}=e;return()=>{if(!GM(t)||Nf.has(e))return;Nf.add(e);let r=t.get(Pr);e.onDestroy(()=>{Nf.delete(e),f0(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(xS);Yz(i,t);let o=t.get(my);o.get(WM)?.forEach(PS),o.delete(WM);let s=i.instance;BS(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var Yz=(n,e)=>{let t=e.get(Pr),r=window._ejsas[t],i=n.instance=new $M(new xf(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=HM(t);i.replayEarlyEventInfos(o),f0(t);let s=new Of(a=>{Qz(e,a,a.currentTarget)});BM(i,s)};function Qz(n,e,t){let r=(t&&t.getAttribute(gl))??"";/d\d+/.test(r)?Zz(r,n,e,t):e.eventPhase===h0.REPLAY&&_y(e,t)}function Zz(n,e,t,r){Ff.push({event:t,currentTarget:r}),fM(e,n,Jz)}function Jz(n){let e=[...Ff],t=new Set(n);Ff=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(gl);t.has(o)?_y(r,i):Ff.push({event:r,currentTarget:i})}}var KM=!1;function Xz(){KM||(KM=!0,US(),gM(),EM(),mM(),aM(),tM(),jA(),wA())}function eB(n){return n.whenStable()}function t1(){let n=[{provide:pl,useFactory:()=>{let e=!0;return e=!!P(qo,{optional:!0})?.get(vy,null),e&&xn("NgHydration"),e}},{provide:Hn,useValue:()=>{FA(!1),P(pl)&&(qS(fl()),Xz())},multi:!0}];return n.push({provide:py,useFactory:()=>P(pl)},{provide:Wi,useFactory:()=>{if(P(pl)){let e=P(St);return()=>{eB(e).then(()=>{e.destroyed||zy(e)})}}return()=>{}},multi:!0}),At(n)}function Qo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var i1=null;function Zn(){return i1}function g0(n){i1??=n}var Ml=class{},m0=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(o1),providedIn:"platform"})}return n})();var o1=(()=>{class n extends m0{_location;_history;_doc=P(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(t){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function s1(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function n1(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yi(n){return n&&n[0]!=="?"?`?${n}`:n}var Ea=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(c1),providedIn:"root"})}return n})(),a1=new W(""),c1=(()=>{class n extends Ea{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return s1(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Yi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Yi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(m0),me(a1,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ca=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=rB(n1(r1(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yi(r))}normalize(t){return n.stripTrailingSlash(nB(this._basePath,r1(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yi;static joinWithSlash=s1;static stripTrailingSlash=n1;static \u0275fac=function(r){return new(r||n)(me(Ea))};static \u0275prov=ee({token:n,factory:()=>tB(),providedIn:"root"})}return n})();function tB(){return new Ca(me(Ea))}function nB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function r1(n){return n.replace(/\/index.html$/,"")}function rB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Jt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Jt||{}),We=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(We||{}),yn=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(yn||{}),hi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function u1(n){return kn(n)[ht.LocaleId]}function d1(n,e,t){let r=kn(n),i=[r[ht.DayPeriodsFormat],r[ht.DayPeriodsStandalone]],o=Jn(i,e);return Jn(o,t)}function h1(n,e,t){let r=kn(n),i=[r[ht.DaysFormat],r[ht.DaysStandalone]],o=Jn(i,e);return Jn(o,t)}function f1(n,e,t){let r=kn(n),i=[r[ht.MonthsFormat],r[ht.MonthsStandalone]],o=Jn(i,e);return Jn(o,t)}function p1(n,e){let r=kn(n)[ht.Eras];return Jn(r,e)}function Rl(n,e){let t=kn(n);return Jn(t[ht.DateFormat],e)}function Pl(n,e){let t=kn(n);return Jn(t[ht.TimeFormat],e)}function xl(n,e){let r=kn(n)[ht.DateTimeFormat];return Jn(r,e)}function Ol(n,e){let t=kn(n),r=t[ht.NumberSymbols][e];if(typeof r>"u"){if(e===hi.CurrencyDecimal)return t[ht.NumberSymbols][hi.Decimal];if(e===hi.CurrencyGroup)return t[ht.NumberSymbols][hi.Group]}return r}function g1(n){if(!n[ht.ExtraData])throw new H(2303,!1)}function m1(n){let e=kn(n);return g1(e),(e[ht.ExtraData][2]||[]).map(r=>typeof r=="string"?_0(r):[_0(r[0]),_0(r[1])])}function _1(n,e,t){let r=kn(n);g1(r);let i=[r[ht.ExtraData][0],r[ht.ExtraData][1]],o=Jn(i,e)||[];return Jn(o,t)||[]}function Jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new H(2304,!1)}function _0(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var iB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vf={},oB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function v1(n,e,t,r){let i=pB(n);e=di(t,e)||e;let s=[],a;for(;e;)if(a=oB.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=E1(r,l),i=fB(i,r));let u="";return s.forEach(h=>{let p=dB(h);u+=p?p(i,t,l):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function $f(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function di(n,e){let t=u1(n);if(Vf[t]??={},Vf[t][e])return Vf[t][e];let r="";switch(e){case"shortDate":r=Rl(n,yn.Short);break;case"mediumDate":r=Rl(n,yn.Medium);break;case"longDate":r=Rl(n,yn.Long);break;case"fullDate":r=Rl(n,yn.Full);break;case"shortTime":r=Pl(n,yn.Short);break;case"mediumTime":r=Pl(n,yn.Medium);break;case"longTime":r=Pl(n,yn.Long);break;case"fullTime":r=Pl(n,yn.Full);break;case"short":let i=di(n,"shortTime"),o=di(n,"shortDate");r=Uf(xl(n,yn.Short),[i,o]);break;case"medium":let s=di(n,"mediumTime"),a=di(n,"mediumDate");r=Uf(xl(n,yn.Medium),[s,a]);break;case"long":let l=di(n,"longTime"),u=di(n,"longDate");r=Uf(xl(n,yn.Long),[l,u]);break;case"full":let h=di(n,"fullTime"),p=di(n,"fullDate");r=Uf(xl(n,yn.Full),[h,p]);break}return r&&(Vf[t][e]=r),r}function Uf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function dr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function sB(n,e){return dr(n,3).substring(0,e)}function yt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=aB(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return sB(a,e);let l=Ol(s,hi.MinusSign);return dr(a,e,l,r,i)}}function aB(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new H(2301,!1)}}function Je(n,e,t=Jt.Format,r=!1){return function(i,o){return cB(i,o,n,e,t,r)}}function cB(n,e,t,r,i,o){switch(t){case 2:return f1(e,i,r)[n.getMonth()];case 1:return h1(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=m1(e),h=_1(e,i,r),p=u.findIndex(_=>{if(Array.isArray(_)){let[y,T]=_,k=s>=y.hours&&a>=y.minutes,F=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(k&&F)return!0}else if(k||F)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return d1(e,i,r)[s<12?0:1];case 3:return p1(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new H(2302,!1)}}function jf(n){return function(e,t,r){let i=-1*r,o=Ol(t,hi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+dr(s,2,o)+dr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+dr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+dr(s,2,o)+":"+dr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+dr(s,2,o)+":"+dr(Math.abs(i%60),2,o);default:throw new H(2310,!1)}}}var lB=0,Bf=4;function uB(n){let e=$f(n,lB,1).getDay();return $f(n,0,1+(e<=Bf?Bf:Bf+7)-e)}function y1(n){let e=n.getDay(),t=e===0?-3:Bf-e;return $f(n.getFullYear(),n.getMonth(),n.getDate()+t)}function v0(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=y1(t),s=uB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return dr(i,n,Ol(r,hi.MinusSign))}}function zf(n,e=!1){return function(t,r){let o=y1(t).getFullYear();return dr(o,n,Ol(r,hi.MinusSign),e)}}var y0={};function dB(n){if(y0[n])return y0[n];let e;switch(n){case"G":case"GG":case"GGG":e=Je(3,We.Abbreviated);break;case"GGGG":e=Je(3,We.Wide);break;case"GGGGG":e=Je(3,We.Narrow);break;case"y":e=yt(0,1,0,!1,!0);break;case"yy":e=yt(0,2,0,!0,!0);break;case"yyy":e=yt(0,3,0,!1,!0);break;case"yyyy":e=yt(0,4,0,!1,!0);break;case"Y":e=zf(1);break;case"YY":e=zf(2,!0);break;case"YYY":e=zf(3);break;case"YYYY":e=zf(4);break;case"M":case"L":e=yt(1,1,1);break;case"MM":case"LL":e=yt(1,2,1);break;case"MMM":e=Je(2,We.Abbreviated);break;case"MMMM":e=Je(2,We.Wide);break;case"MMMMM":e=Je(2,We.Narrow);break;case"LLL":e=Je(2,We.Abbreviated,Jt.Standalone);break;case"LLLL":e=Je(2,We.Wide,Jt.Standalone);break;case"LLLLL":e=Je(2,We.Narrow,Jt.Standalone);break;case"w":e=v0(1);break;case"ww":e=v0(2);break;case"W":e=v0(1,!0);break;case"d":e=yt(2,1);break;case"dd":e=yt(2,2);break;case"c":case"cc":e=yt(7,1);break;case"ccc":e=Je(1,We.Abbreviated,Jt.Standalone);break;case"cccc":e=Je(1,We.Wide,Jt.Standalone);break;case"ccccc":e=Je(1,We.Narrow,Jt.Standalone);break;case"cccccc":e=Je(1,We.Short,Jt.Standalone);break;case"E":case"EE":case"EEE":e=Je(1,We.Abbreviated);break;case"EEEE":e=Je(1,We.Wide);break;case"EEEEE":e=Je(1,We.Narrow);break;case"EEEEEE":e=Je(1,We.Short);break;case"a":case"aa":case"aaa":e=Je(0,We.Abbreviated);break;case"aaaa":e=Je(0,We.Wide);break;case"aaaaa":e=Je(0,We.Narrow);break;case"b":case"bb":case"bbb":e=Je(0,We.Abbreviated,Jt.Standalone,!0);break;case"bbbb":e=Je(0,We.Wide,Jt.Standalone,!0);break;case"bbbbb":e=Je(0,We.Narrow,Jt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Je(0,We.Abbreviated,Jt.Format,!0);break;case"BBBB":e=Je(0,We.Wide,Jt.Format,!0);break;case"BBBBB":e=Je(0,We.Narrow,Jt.Format,!0);break;case"h":e=yt(3,1,-12);break;case"hh":e=yt(3,2,-12);break;case"H":e=yt(3,1);break;case"HH":e=yt(3,2);break;case"m":e=yt(4,1);break;case"mm":e=yt(4,2);break;case"s":e=yt(5,1);break;case"ss":e=yt(5,2);break;case"S":e=yt(6,1);break;case"SS":e=yt(6,2);break;case"SSS":e=yt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=jf(0);break;case"ZZZZZ":e=jf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=jf(2);break;default:return null}return y0[n]=e,e}function E1(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function hB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function fB(n,e,t){let i=n.getTimezoneOffset(),o=E1(e,i);return hB(n,-1*(o-i))}function pB(n){if(l1(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return $f(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(iB))return gB(r)}let e=new Date(n);if(!l1(e))throw new H(2311,!1);return e}function gB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,u),e}function l1(n){return n instanceof Date&&!isNaN(n.valueOf())}function mB(n,e){return new H(2100,!1)}var _B="mediumDate",C1=new W(""),w1=new W(""),E0=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??_B,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return v1(t,s,o||this.locale,a)}catch(s){throw mB(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ee(Dl,16),Ee(C1,24),Ee(w1,24))};static \u0275pipe=qy({name:"date",type:n,pure:!0})}return n})();var Ge=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Or({type:n});static \u0275inj=ar({})}return n})();function C0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Nl=class{};var w0="browser";function b1(n){return n===w0}var kl=class{_doc;constructor(e){this._doc=e}manager},Hf=(()=>{class n extends kl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Wf=new W(""),S0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Hf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Hf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(Wf),me(Ne))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),b0="ng-app-id";function T1(n){for(let e of n)e.remove()}function D1(n,e){let t=e.createElement("style");return t.textContent=n,t}function yB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${b0}="${e}"],link[${b0}="${e}"]`);if(i)for(let o of i)o.removeAttribute(b0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function T0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var A0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,yB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,D1);r?.forEach(i=>this.addUsage(i,this.external,T0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(T1(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])T1(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,D1(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,T0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(Dt),me(Pr),me(sf,8),me(li))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),I0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},M0=/%COMP%/g;var A1="%COMP%",EB=`_nghost-${A1}`,CB=`_ngcontent-${A1}`,wB=!0,bB=new W("",{providedIn:"root",factory:()=>wB});function IB(n){return CB.replace(M0,n)}function TB(n){return EB.replace(M0,n)}function M1(n,e){return e.map(t=>t.replace(M0,n))}var R0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Fl(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof qf?i.applyToHost(t):i instanceof Ll&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case ci.Emulated:o=new qf(l,u,r,this.appId,h,s,a,p,_);break;case ci.ShadowDom:return new D0(l,u,t,r,s,a,this.nonce,p,_);default:o=new Ll(l,u,r,h,s,a,p,_);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(S0),me(A0),me(Pr),me(bB),me(Dt),me(Ne),me(sf),me(Wo,8))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),Fl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(I0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(S1(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(S1(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=I0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=I0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Sr.DashCase|Sr.Important)?e.style.setProperty(t,r,i&Sr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Sr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function S1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var D0=class extends Fl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=M1(i.id,h);for(let _ of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=_,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let _ of p){let y=T0(_,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ll=class extends Fl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?M1(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&zo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},qf=class extends Ll{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,l,u,h),this.contentAttr=IB(h),this.hostAttr=TB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Gf=class n extends Ml{supportsDOMEvents=!0;static makeCurrent(){g0(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DB();return t==null?null:SB(t)}resetBaseElement(){Vl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return C0(document.cookie,e)}},Vl=null;function DB(){return Vl=Vl||document.head.querySelector("base"),Vl?Vl.getAttribute("href"):null}function SB(n){return new URL(n,document.baseURI).pathname}var AB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),R1=["alt","control","meta","shift"],MB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},P1=(()=>{class n extends kl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),R1.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=MB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),R1.forEach(s=>{if(s!==i){let a=RB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();function P0(n,e,t){let r=L({rootComponent:n,platformRef:t?.platformRef},PB(e));return XM(r)}function PB(n){return{appProviders:[...FB,...n?.providers??[]],platformProviders:kB}}function xB(){Gf.makeCurrent()}function OB(){return new or}function NB(){return dy(document),document}var kB=[{provide:li,useValue:w0},{provide:of,useValue:xB,multi:!0},{provide:Dt,useFactory:NB}];var FB=[{provide:Yc,useValue:"root"},{provide:or,useFactory:OB},{provide:Wf,useClass:Hf,multi:!0,deps:[Dt]},{provide:Wf,useClass:P1,multi:!0,deps:[Dt]},R0,A0,S0,{provide:Bo,useExisting:R0},{provide:Nl,useClass:AB},[]];var Ul=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var LB="X-Request-URL",VB="text/plain",UB="application/json",sae=`${UB}, ${VB}, */*`;var O0=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(O0||{}),x0=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ul,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var Kf=class n extends x0{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=O0.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var x1=new W("");var aae=RegExp(`^${LB}:`,"m");var jB=new W(""),zB="b",BB="h",$B="s",HB="st",qB="u",WB="rt",N0=new W(""),GB=["GET","HEAD"];function KB(n,e){let y=P(N0),{isCacheActive:t}=y,r=PI(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!GB.includes(o)||!r.includeRequestsWithAuthHeaders&&YB(n)||r.filter?.(n)===!1)return e(n);let s=P(qo);if(P(jB,{optional:!0}))throw new H(2803,!1);let l=n.url,u=QB(n,l),h=s.get(u,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[zB]:T,[WB]:k,[BB]:F,[$B]:B,[HB]:oe,[qB]:fe}=h,Fe=T;switch(k){case"arraybuffer":Fe=new TextEncoder().encode(T).buffer;break;case"blob":Fe=new Blob([T]);break}let Lt=new Ul(F);return se(new Kf({body:Fe,headers:Lt,status:B,statusText:oe,url:fe}))}return e(n)}function YB(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function O1(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function QB(n,e){let{params:t,method:r,responseType:i}=n,o=O1(t),s=n.serializeBody();s instanceof URLSearchParams?s=O1(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),l=ZB(a);return l}function ZB(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function N1(n){return[{provide:N0,useFactory:()=>(xn("NgHttpTransferCache"),L({isCacheActive:!0},n))},{provide:x1,useValue:KB,multi:!0},{provide:Wi,multi:!0,useFactory:()=>{let e=P(St),t=P(N0);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var k1=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yf=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(Yf||{});function JB(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function F1(){return JB(Yf.EventReplay,e1())}function L1(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(Yf.HttpTransferCacheOptions);return At([[],[],t1(),t.has(Yf.NoHttpTransferCache)||r?[]:N1({}),e])}var _e="primary",eu=Symbol("RouteTitle"),U0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xo(n){return new U0(n)}function q1(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function e3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kr(n[t],e[t]))return!1;return!0}function kr(n,e){let t=n?j0(n):void 0,r=e?j0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!W1(n[i],e[i]))return!1;return!0}function j0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function W1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function G1(n){return n.length>0?n[n.length-1]:null}function pi(n){return h_(n)?n:qi(n)?Re(Promise.resolve(n)):se(n)}var t3={exact:Y1,subset:Q1},K1={exact:n3,subset:r3,ignored:()=>!0};function V1(n,e,t){return t3[t.paths](n.root,e.root,t.matrixParams)&&K1[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function n3(n,e){return kr(n,e)}function Y1(n,e,t){if(!Zo(n.segments,e.segments)||!Jf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Y1(n.children[r],e.children[r],t))return!1;return!0}function r3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>W1(n[t],e[t]))}function Q1(n,e,t){return Z1(n,e,e.segments,t)}function Z1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zo(i,t)||e.hasChildren()||!Jf(i,t,r))}else if(n.segments.length===t.length){if(!Zo(n.segments,t)||!Jf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Q1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Zo(n.segments,i)||!Jf(n.segments,i,r)||!n.children[_e]?!1:Z1(n.children[_e],e,o,r)}}function Jf(n,e,t){return e.every((r,i)=>K1[t](n[i].parameters,r.parameters))}var Lr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return s3.serialize(this)}},Ue=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xf(this)}},Qi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return X1(this)}};function i3(n,e){return Zo(n,e)&&n.every((t,r)=>kr(t.parameters,e[r].parameters))}function Zo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function o3(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===_e&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==_e&&(t=t.concat(e(i,r)))}),t}var tu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>new es,providedIn:"root"})}return n})(),es=class{parse(e){let t=new B0(e);return new Lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${jl(e.root,!0)}`,r=l3(e.queryParams),i=typeof e.fragment=="string"?`#${a3(e.fragment)}`:"";return`${t}${r}${i}`}},s3=new es;function Xf(n){return n.segments.map(e=>X1(e)).join("/")}function jl(n,e){if(!n.hasChildren())return Xf(n);if(e){let t=n.children[_e]?jl(n.children[_e],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${jl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=o3(n,(r,i)=>i===_e?[jl(n.children[_e],!1)]:[`${i}:${jl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${Xf(n)}/${t[0]}`:`${Xf(n)}/(${t.join("//")})`}}function J1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qf(n){return J1(n).replace(/%3B/gi,";")}function a3(n){return encodeURI(n)}function z0(n){return J1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ep(n){return decodeURIComponent(n)}function U1(n){return ep(n.replace(/\+/g,"%20"))}function X1(n){return`${z0(n.path)}${c3(n.parameters)}`}function c3(n){return Object.entries(n).map(([e,t])=>`;${z0(e)}=${z0(t)}`).join("")}function l3(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Qf(t)}=${Qf(i)}`).join("&"):`${Qf(t)}=${Qf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var u3=/^[^\/()?;#]+/;function k0(n){let e=n.match(u3);return e?e[0]:""}var d3=/^[^\/()?;=#]+/;function h3(n){let e=n.match(d3);return e?e[0]:""}var f3=/^[^=?&#]+/;function p3(n){let e=n.match(f3);return e?e[0]:""}var g3=/^[^&#]+/;function m3(n){let e=n.match(g3);return e?e[0]:""}var B0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_e]=new Ue(e,t)),r}parseSegment(){let e=k0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Qi(ep(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=h3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=k0(this.remaining);i&&(r=i,this.capture(r))}e[ep(t)]=ep(r)}parseQueryParam(e){let t=p3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=m3(this.remaining);s&&(r=s,this.capture(r))}let i=U1(t),o=U1(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=k0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);let s=this.parseChildren();t[o??_e]=Object.keys(s).length===1&&s[_e]?s[_e]:new Ue([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function eR(n){return n.segments.length>0?new Ue([],{[_e]:n}):n}function tR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=tR(i);if(r===_e&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ue(n.segments,e);return _3(t)}function _3(n){if(n.numberOfChildren===1&&n.children[_e]){let e=n.children[_e];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Zi(n){return n instanceof Lr}function nR(n,e,t=null,r=null){let i=rR(n);return iR(i,e,t,r)}function rR(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Ue(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=eR(r);return e??i}function iR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return F0(i,i,i,t,r);let o=v3(e);if(o.toRoot())return F0(i,i,new Ue([],{}),t,r);let s=y3(o,i,n),a=s.processChildren?Bl(s.segmentGroup,s.index,o.commands):sR(s.segmentGroup,s.index,o.commands);return F0(i,s.segmentGroup,a,t,r)}function tp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ql(n){return typeof n=="object"&&n!=null&&n.outlets}function F0(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=oR(n,e,t);let a=eR(tR(s));return new Lr(a,o,i)}function oR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oR(o,e,t)}),new Ue(n.segments,r)}var np=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tp(r[0]))throw new H(4003,!1);let i=r.find(ql);if(i&&i!==G1(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function v3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new np(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new np(t,e,r)}var Ia=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function y3(n,e,t){if(n.isAbsolute)return new Ia(e,!0,0);if(!t)return new Ia(e,!1,NaN);if(t.parent===null)return new Ia(t,!0,0);let r=tp(n.commands[0])?0:1,i=t.segments.length-1+r;return E3(t,i,n.numberOfDoubleDots)}function E3(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ia(r,!1,i-o)}function C3(n){return ql(n[0])?n[0].outlets:{[_e]:n}}function sR(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Bl(n,e,t);let r=w3(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ue(n.segments.slice(0,r.pathIndex),{});return o.children[_e]=new Ue(n.segments.slice(r.pathIndex),n.children),Bl(o,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?$0(n,e,t):r.match?Bl(n,0,i):$0(n,e,t)}function Bl(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=C3(t),i={};if(Object.keys(r).some(o=>o!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let o=Bl(n.children[_e],e,t);return new Ue(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ue(n.segments,i)}}function w3(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ql(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!z1(l,u,s))return o;r+=2}else{if(!z1(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function $0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ql(o)){let l=b3(o.outlets);return new Ue(r,l)}if(i===0&&tp(t[0])){let l=n.segments[e];r.push(new Qi(l.path,j1(t[0]))),i++;continue}let s=ql(o)?o.outlets[_e]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&tp(a)?(r.push(new Qi(s,j1(a))),i+=2):(r.push(new Qi(s,{})),i++)}return new Ue(r,{})}function b3(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=$0(new Ue([],{}),0,r))}),e}function j1(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function z1(n,e,t){return n==t.path&&kr(e,t.parameters)}var $l="imperative",Pt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Pt||{}),Vn=class{id;url;constructor(e,t){this.id=e,this.url=t}},ts=class extends Vn{type=Pt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Un=class extends Vn{urlAfterRedirects;type=Pt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(hn||{}),Wl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Wl||{}),Fr=class extends Vn{reason;code;type=Pt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fi=class extends Vn{reason;code;type=Pt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Da=class extends Vn{error;target;type=Pt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends Vn{urlAfterRedirects;state;type=Pt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rp=class extends Vn{urlAfterRedirects;state;type=Pt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ip=class extends Vn{urlAfterRedirects;state;shouldActivate;type=Pt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},op=class extends Vn{urlAfterRedirects;state;type=Pt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sp=class extends Vn{urlAfterRedirects;state;type=Pt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ap=class{route;type=Pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cp=class{route;type=Pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lp=class{snapshot;type=Pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},up=class{snapshot;type=Pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dp=class{snapshot;type=Pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hp=class{snapshot;type=Pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Kl=class{},Sa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function I3(n){return!(n instanceof Kl)&&!(n instanceof Sa)}function T3(n,e){return n.providers&&!n._injector&&(n._injector=va(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hr(n){return n.outlet||_e}function D3(n,e){let t=n.filter(r=>hr(r)===e);return t.push(...n.filter(r=>hr(r)!==e)),t}function Ra(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var fp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ra(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Pa(this.rootInjector)}},Pa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new fp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(lt))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=H0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=H0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=q0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return q0(e,this._root).map(t=>t.value)}};function H0(n,e){if(n===e.value)return e;for(let t of e.children){let r=H0(n,t);if(r)return r}return null}function q0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=q0(n,t);if(r.length)return r.unshift(e),r}return[]}var Ln=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ba(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yl=class extends pp{snapshot;constructor(e,t){super(e),this.snapshot=t,X0(this,e)}toString(){return this.snapshot.toString()}};function aR(n){let e=S3(n),t=new Ut([new Qi("",{})]),r=new Ut({}),i=new Ut({}),o=new Ut({}),s=new Ut(""),a=new fr(t,r,o,s,i,_e,n,e.root);return a.snapshot=e.root,new Yl(new Ln(a,[]),e)}function S3(n){let e={},t={},r={},o=new Jo([],e,r,"",t,_e,n,null,{});return new Ql("",new Ln(o,[]))}var fr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ne(u=>u[eu]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&lR(i)&&(r.resolve[eu]=i.title),r}var Jo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[eu]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ql=class extends pp{url;constructor(e,t){super(t),this.url=e,X0(this,t)}toString(){return cR(this._root)}};function X0(n,e){e.value._routerState=n,e.children.forEach(t=>X0(n,t))}function cR(n){let e=n.children.length>0?` { ${n.children.map(cR).join(", ")} } `:"";return`${n.value}${e}`}function L0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kr(e.params,t.params)||n.paramsSubject.next(t.params),e3(e.url,t.url)||n.urlSubject.next(t.url),kr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function W0(n,e){let t=kr(n.params,e.params)&&i3(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||W0(n.parent,e.parent))}function lR(n){return typeof n.title=="string"||n.title===null}var uR=new W(""),nu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_e;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=JM();parentContexts=P(Pa);location=P(Go);changeDetector=P(Ki);inputBinder=P(yp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new G0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Rr]})}return n})(),G0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===fr?this.route:e===Pa?this.childContexts:e===uR?this.outletData:this.parent.get(e,t)}},yp=new W("");var eE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&N(0,"router-outlet")},dependencies:[nu],encapsulation:2})}return n})();function tE(n){let e=n.children&&n.children.map(tE),t=e?te(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_e&&(t.component=eE),t}function A3(n,e,t){let r=Zl(n,e._root,t?t._root:void 0);return new Yl(r,e)}function Zl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=M3(n,e,t);return new Ln(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zl(n,a)),s}}let r=R3(e.value),i=e.children.map(o=>Zl(n,o));return new Ln(r,i)}}function M3(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zl(n,r,i);return Zl(n,r)})}function R3(n){return new fr(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var Aa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dR="ngNavigationCancelingError";function mp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Zi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hR(!1,hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function hR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dR]=!0,t.cancellationCode=e,t}function P3(n){return fR(n)&&Zi(n.url)}function fR(n){return!!n&&n[dR]}var x3=(n,e,t,r)=>ne(i=>(new K0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),K0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),L0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new hp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new up(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(L0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),L0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_p=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ta=class{component;route;constructor(e,t){this.component=e,this.route=t}};function O3(n,e,t){let r=n._root,i=e?e._root:null;return zl(r,i,t,[r.value])}function N3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function xa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!R_(n)?n:e.get(n):r}function zl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ba(e);return n.children.forEach(s=>{k3(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hl(a,t.getContext(s),i)),i}function k3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=F3(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new _p(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?zl(n,e,a?a.children:null,r,i):zl(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ta(a.outlet.component,s))}else s&&Hl(e,a,i),i.canActivateChecks.push(new _p(r)),o.component?zl(n,null,a?a.children:null,r,i):zl(n,null,t,r,i);return i}function F3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zo(n.url,e.url)||!kr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W0(n,e)||!kr(n.queryParams,e.queryParams);case"paramsChange":default:return!W0(n,e)}}function Hl(n,e,t){let r=ba(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Hl(s,e.children.getContext(o),t):Hl(s,null,t):Hl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ta(e.outlet.component,i)):t.canDeactivateChecks.push(new Ta(null,i)):t.canDeactivateChecks.push(new Ta(null,i))}function ru(n){return typeof n=="function"}function L3(n){return typeof n=="boolean"}function V3(n){return n&&ru(n.canLoad)}function U3(n){return n&&ru(n.canActivate)}function j3(n){return n&&ru(n.canActivateChild)}function z3(n){return n&&ru(n.canDeactivate)}function B3(n){return n&&ru(n.canMatch)}function pR(n){return n instanceof Xr||n?.name==="EmptyError"}var Zf=Symbol("INITIAL_VALUE");function Ma(){return Tt(n=>Zd(n.map(e=>e.pipe(sn(1),eh(Zf)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Zf)return Zf;if(t===!1||$3(t))return t}return!0}),mt(e=>e!==Zf),sn(1)))}function $3(n){return Zi(n)||n instanceof Aa}function H3(n,e){return gt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(te(L({},t),{guardsResult:!0})):q3(s,r,i,n).pipe(gt(a=>a&&L3(a)?W3(r,o,n,e):se(a)),ne(a=>te(L({},t),{guardsResult:a})))})}function q3(n,e,t,r){return Re(n).pipe(gt(i=>Z3(i.component,i.route,t,e,r)),ti(i=>i!==!0,!0))}function W3(n,e,t,r){return Re(e).pipe(bo(i=>Js(K3(i.route.parent,r),G3(i.route,r),Q3(n,i.path,t),Y3(n,i.route,t))),ti(i=>i!==!0,!0))}function G3(n,e){return n!==null&&e&&e(new dp(n)),se(!0)}function K3(n,e){return n!==null&&e&&e(new lp(n)),se(!0)}function Y3(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Bc(()=>{let s=Ra(e)??t,a=xa(o,s),l=U3(a)?a.canActivate(e,n):_t(s,()=>a(e,n));return pi(l).pipe(ti())}));return se(i).pipe(Ma())}function Q3(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>N3(s)).filter(s=>s!==null).map(s=>Bc(()=>{let a=s.guards.map(l=>{let u=Ra(s.node)??t,h=xa(l,u),p=j3(h)?h.canActivateChild(r,n):_t(u,()=>h(r,n));return pi(p).pipe(ti())});return se(a).pipe(Ma())}));return se(o).pipe(Ma())}function Z3(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let l=Ra(e)??i,u=xa(a,l),h=z3(u)?u.canDeactivate(n,e,t,r):_t(l,()=>u(n,e,t,r));return pi(h).pipe(ti())});return se(s).pipe(Ma())}function J3(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=xa(s,n),l=V3(a)?a.canLoad(e,t):_t(n,()=>a(e,t));return pi(l)});return se(o).pipe(Ma(),gR(r))}function gR(n){return xd(ct(e=>{if(typeof e!="boolean")throw mp(n,e)}),ne(e=>e===!0))}function X3(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=xa(s,n),l=B3(a)?a.canMatch(e,t):_t(n,()=>a(e,t));return pi(l)});return se(o).pipe(Ma(),gR(r))}var Jl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Xl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function wa(n){return Qs(new Jl(n))}function e4(n){return Qs(new H(4e3,!1))}function t4(n){return Qs(hR(!1,hn.GuardRejected))}var Y0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[_e])return e4(`${e.redirectTo}`);i=i.children[_e]}}applyRedirectCommands(e,t,r,i,o){return n4(t,i,o).pipe(ne(s=>{if(s instanceof Lr)throw new Xl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Xl(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Lr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Ue(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function n4(n,e,t){if(typeof n=="string")return se(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:u,data:h,title:p}=e;return pi(_t(t,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:p})))}var Q0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function r4(n,e,t,r,i){let o=mR(n,e,t);return o.matched?(r=T3(e,r),X3(r,e,t,i).pipe(ne(s=>s===!0?o:L({},Q0)))):se(o)}function mR(n,e,t){if(e.path==="**")return i4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},Q0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||q1)(t,n,e);if(!i)return L({},Q0);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function i4(n){return{matched:!0,parameters:n.length>0?G1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function B1(n,e,t,r){return t.length>0&&a4(n,t,r)?{segmentGroup:new Ue(e,s4(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&c4(n,t,r)?{segmentGroup:new Ue(n.segments,o4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function o4(n,e,t,r){let i={};for(let o of t)if(Ep(n,e,o)&&!r[hr(o)]){let s=new Ue([],{});i[hr(o)]=s}return L(L({},r),i)}function s4(n,e){let t={};t[_e]=e;for(let r of n)if(r.path===""&&hr(r)!==_e){let i=new Ue([],{});t[hr(r)]=i}return t}function a4(n,e,t){return t.some(r=>Ep(n,e,r)&&hr(r)!==_e)}function c4(n,e,t){return t.some(r=>Ep(n,e,r))}function Ep(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function l4(n,e,t){return e.length===0&&!n.children[t]}var Z0=class{};function u4(n,e,t,r,i,o,s="emptyOnly"){return new J0(n,e,t,r,i,s,o).recognize()}var d4=31,J0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Y0(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=B1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new Ln(r,t),o=new Ql("",i),s=nR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Jo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,t).pipe(ne(r=>({children:r,rootSnapshot:t})),mn(r=>{if(r instanceof Xl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Jl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof Ln?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(bo(s=>{let a=r.children[s],l=D3(t,s);return this.processSegmentGroup(e,l,a,s,i)}),Xd((s,a)=>(s.push(...a),s)),Ni(null),p_(),gt(s=>{if(s===null)return wa(r);let a=_R(s);return h4(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return Re(t).pipe(bo(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(mn(u=>{if(u instanceof Jl)return se(null);throw u}))),ti(l=>!!l),mn(l=>{if(pR(l))return l4(r,i,o)?se(new Z0):wa(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return hr(r)!==s&&(s===_e||!Ep(i,o,r))?wa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):wa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=mR(t,i,o);if(!l)return wa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>d4&&(this.allowRedirects=!1));let y=new Jo(o,u,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,$1(i),hr(i),i.component??i._loadedComponent??null,i,H1(i)),T=gp(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Tt(F=>this.applyRedirects.lineralizeSegments(i,F)),gt(F=>this.processSegment(e,r,t,F.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=r4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Tt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:y}=l,T=new Jo(_,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,$1(r),hr(r),r.component??r._loadedComponent??null,r,H1(r)),k=gp(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let{segmentGroup:F,slicedSegments:B}=B1(t,_,y,u);if(B.length===0&&F.hasChildren())return this.processChildren(h,u,F,T).pipe(ne(fe=>new Ln(T,fe)));if(u.length===0&&B.length===0)return se(new Ln(T,[]));let oe=hr(r)===o;return this.processSegment(h,u,F,B,oe?_e:o,!0,T).pipe(ne(fe=>new Ln(T,fe instanceof Ln?[fe]:[])))}))):wa(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):J3(e,t,r,this.urlSerializer).pipe(gt(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):t4(t))):se({routes:[],injector:e})}};function h4(n){n.sort((e,t)=>e.value.outlet===_e?-1:t.value.outlet===_e?1:e.value.outlet.localeCompare(t.value.outlet))}function f4(n){let e=n.value.routeConfig;return e&&e.path===""}function _R(n){let e=[],t=new Set;for(let r of n){if(!f4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=_R(r.children);e.push(new Ln(r.value,i))}return e.filter(r=>!t.has(r))}function $1(n){return n.data||{}}function H1(n){return n.resolve||{}}function p4(n,e,t,r,i,o){return gt(s=>u4(n,e,t,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:l})=>te(L({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function g4(n,e){return gt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of vR(l))s.add(u);let a=0;return Re(s).pipe(bo(l=>o.has(l)?m4(l,r,n,e):(l.data=gp(l,l.parent,n).resolve,se(void 0))),ct(()=>a++),Xs(1),gt(l=>a===s.size?se(t):pn))})}function vR(n){let e=n.children.map(t=>vR(t)).flat();return[n,...e]}function m4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!lR(i)&&(o[eu]=i.title),Bc(()=>(n.data=gp(n,n.parent,t).resolve,_4(o,n,e,r).pipe(ne(s=>(n._resolvedData=s,n.data=L(L({},n.data),s),null)))))}function _4(n,e,t,r){let i=j0(n);if(i.length===0)return se({});let o={};return Re(i).pipe(gt(s=>v4(n[s],e,t,r).pipe(ti(),ct(a=>{if(a instanceof Aa)throw mp(new es,a);o[s]=a}))),Xs(1),ne(()=>o),mn(s=>pR(s)?pn:Qs(s)))}function v4(n,e,t,r){let i=Ra(e)??r,o=xa(n,i),s=o.resolve?o.resolve(e,t):_t(i,()=>o(e,t));return pi(s)}function V0(n){return Tt(e=>{let t=n(e);return t?Re(t).pipe(ne(()=>e)):se(e)})}var nE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===_e);return r}getResolvedTitleForRoute(t){return t.data[eu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(yR),providedIn:"root"})}return n})(),yR=(()=>{class n extends nE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(k1))};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oa=new W("",{providedIn:"root",factory:()=>({})}),iu=new W(""),ER=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(n0);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pi(_t(t,()=>r.loadComponent())).pipe(ne(wR),Tt(bR),ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),$c(()=>{this.componentLoaders.delete(r)})),o=new Ws(i,()=>new et).pipe(qs());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=CR(r,this.compiler,t,this.onLoadEndListener).pipe($c(()=>{this.childrenLoaders.delete(r)})),s=new Ws(o,()=>new et).pipe(qs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CR(n,e,t,r){return pi(_t(t,()=>n.loadChildren())).pipe(ne(wR),Tt(bR),gt(i=>i instanceof bf||Array.isArray(i)?se(i):Re(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(iu,[],{optional:!0,self:!0}).flat()),{routes:s.map(tE),injector:o}}))}function y4(n){return n&&typeof n=="object"&&"default"in n}function wR(n){return y4(n)?n.default:n}function bR(n){return se(n)}var Cp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(E4),providedIn:"root"})}return n})(),E4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IR=new W("");var TR=new W(""),DR=(()=>{class n{currentNavigation=re(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortWithErrorSubject=new et;configLoader=P(ER);environmentInjector=P(lt);destroyRef=P(Yn);urlSerializer=P(tu);rootContexts=P(Pa);location=P(Ca);inputBindingEnabled=P(yp,{optional:!0})!==null;titleStrategy=P(nE);options=P(Oa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Cp);createViewTransition=P(IR,{optional:!0});navigationErrorHandler=P(TR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new ap(i)),r=i=>this.events.next(new cp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Rt(()=>{this.transitions?.next(te(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Ut(null),this.transitions.pipe(mt(r=>r!==null),Tt(r=>{let i=!1;return se(r).pipe(Tt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",hn.SupersededByNewNavigation),pn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?te(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new fi(o.id,this.urlSerializer.serialize(o.rawUrl),"",Wl.IgnoredSameUrlNavigation)),o.resolve(!1),pn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return se(o).pipe(Tt(l=>(this.events.next(new ts(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?pn:Promise.resolve(l))),p4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let u=new Gl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:h,restoredState:p,extras:_}=o,y=new ts(l,this.urlSerializer.serialize(u),h,p);this.events.next(y);let T=aR(this.rootComponentType).snapshot;return this.currentTransition=r=te(L({},o),{targetSnapshot:T,urlAfterRedirects:u,extras:te(L({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=u,k)),se(r)}else return this.events.next(new fi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Wl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),pn}),ct(o=>{let s=new rp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ne(o=>(this.currentTransition=r=te(L({},o),{guards:O3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),H3(this.environmentInjector,o=>this.events.next(o)),ct(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw mp(this.urlSerializer,o.guardsResult);let s=new ip(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),mt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",hn.GuardRejected),!1)),V0(o=>{if(o.guards.canActivateChecks.length!==0)return se(o).pipe(ct(s=>{let a=new op(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Tt(s=>{let a=!1;return se(s).pipe(g4(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",hn.NoDataFromResolver)}}))}),ct(s=>{let a=new sp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),V0(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let u=Ra(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(ct(h=>{a.component=h}),ne(()=>{})))}for(let u of a.children)l.push(...s(u));return l};return Zd(s(o.targetSnapshot.root)).pipe(Ni(null),sn(1))}),V0(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Re(a).pipe(ne(()=>r)):se(r)}),ne(o=>{let s=A3(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=te(L({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ct(()=>{this.events.next(new Kl)}),x3(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),sn(1),th(new he(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(mt(()=>!i&&!r.targetRouterState),ct(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",hn.Aborted)}))),ct({next:o=>{i=!0,this.lastSuccessfulNavigation=Rt(this.currentNavigation),this.events.next(new Un(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),th(this.transitionAbortWithErrorSubject.pipe(ct(o=>{throw o}))),$c(()=>{i||this.cancelNavigationTransition(r,"",hn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),mn(o=>{if(this.destroyed)return r.resolve(!1),pn;if(i=!0,fR(o))this.events.next(new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),P3(o)?this.events.next(new Sa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Da(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=_t(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Aa){let{message:l,cancellationCode:u}=mp(this.urlSerializer,a);this.events.next(new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Sa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return pn}))}))}cancelNavigationTransition(t,r,i){let o=new Fr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Rt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C4(n){return n!==$l}var SR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(w4),providedIn:"root"})}return n})(),vp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},w4=(()=>{class n extends vp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AR=(()=>{class n{urlSerializer=P(tu);options=P(Oa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Ca);urlHandlingStrategy=P(Cp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Lr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Lr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=aR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:()=>P(b4),providedIn:"root"})}return n})(),b4=(()=>{class n extends AR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ts?this.updateStateMemento():t instanceof fi?this.commitTransition(r):t instanceof Gl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Kl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fr&&t.code!==hn.SupersededByNewNavigation&&t.code!==hn.Redirect?this.restoreHistory(r):t instanceof Da?this.restoreHistory(r,!0):t instanceof Un&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rE(n,e){n.events.pipe(mt(t=>t instanceof Un||t instanceof Fr||t instanceof Da||t instanceof fi),ne(t=>t instanceof Un||t instanceof fi?0:(t instanceof Fr?t.code===hn.Redirect||t.code===hn.SupersededByNewNavigation:!1)?2:1),mt(t=>t!==2),sn(1)).subscribe(()=>{e()})}var I4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(If);stateManager=P(AR);options=P(Oa,{optional:!0})||{};pendingTasks=P(lr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(DR);urlSerializer=P(tu);location=P(Ca);urlHandlingStrategy=P(Cp);injector=P(lt);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(SR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(iu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(yp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ot;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Rt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Fr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Un)this.navigated=!0;else if(r instanceof Sa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||C4(i.source)},s);this.scheduleNavigation(a,$l,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}I3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$l,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=L({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(dn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Rt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let _=i?i.snapshot:this.routerState.snapshot.root;p=rR(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return iR(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Zi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$l,null,r)}navigate(t,r={skipLocationChange:!1}){return D4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(sr(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},I4):r===!1?i=L({},T4):i=r,Zi(t))return V1(this.currentUrlTree,t,i);let o=this.parseUrl(t);return V1(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,_)=>{a=p,l=_});let h=this.pendingTasks.add();return rE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function D4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var Vr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=re(null);get href(){return Rt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;applicationErrorHandler=P(dn);options=P(Oa,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new Lf("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Un&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Zi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Zi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ee(xt),Ee(fr),hl("tabindex"),Ee(xr),Ee(vn),Ee(Ea))};static \u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&q("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ui("href",i.reactiveHref(),by)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qo],replaceUrl:[2,"replaceUrl","replaceUrl",Qo],routerLink:"routerLink"},features:[Rr]})}return n})(),ou=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ve;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Un&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(Zs()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Re(t).pipe(Zs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=A4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ee(xt),Ee(vn),Ee(xr),Ee(Ki),Ee(Vr,8))};static \u0275dir=Qe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Jy(o,Vr,5),r&2){let s;Xy(s=e0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Rr]})}return n})();function A4(n){return!!n.paths}var M4=new W("");function iE(n,...e){return At([{provide:iu,multi:!0,useValue:n},[],{provide:fr,useFactory:R4,deps:[xt]},{provide:Wi,multi:!0,useFactory:P4},e.map(t=>t.\u0275providers)])}function R4(n){return n.routerState.root}function P4(){let n=P(st);return e=>{let t=n.get(St);if(e!==t.components[0])return;let r=n.get(xt),i=n.get(x4);n.get(O4)===1&&r.initialNavigation(),n.get(N4,null,{optional:!0})?.setUpPreloading(),n.get(M4,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var x4=new W("",{factory:()=>new et}),O4=new W("",{providedIn:"root",factory:()=>1});var N4=new W("");var VR=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ee(xr),Ee(vn))};static \u0275dir=Qe({type:n})}return n})(),Rp=(()=>{class n extends VR{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[Zt]})}return n})(),hu=new W("");var k4={provide:hu,useExisting:cn(()=>Ot),multi:!0};function F4(){let n=Zn()?Zn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var L4=new W(""),Ot=(()=>{class n extends VR{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!F4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ee(xr),Ee(vn),Ee(L4,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&q("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Qn([k4]),Zt]})}return n})();function V4(n){return n==null||UR(n)===0}function UR(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var La=new W(""),jR=new W("");function U4(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function j4(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function z4(n){return V4(n.value)?{required:!0}:null}function B4(n){return e=>{let t=e.value?.length??UR(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function MR(n){return null}function zR(n){return n!=null}function BR(n){return qi(n)?Re(n):n}function $R(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function HR(n,e){return e.map(t=>t(n))}function $4(n){return!n.validate}function qR(n){return n.map(e=>$4(e)?e:t=>e.validate(t))}function H4(n){if(!n)return null;let e=n.filter(zR);return e.length==0?null:function(t){return $R(HR(t,e))}}function aE(n){return n!=null?H4(qR(n)):null}function q4(n){if(!n)return null;let e=n.filter(zR);return e.length==0?null:function(t){let r=HR(t,e).map(BR);return f_(r).pipe(ne($R))}}function cE(n){return n!=null?q4(qR(n)):null}function RR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function W4(n){return n._rawValidators}function G4(n){return n._rawAsyncValidators}function oE(n){return n?Array.isArray(n)?n:[n]:[]}function bp(n,e){return Array.isArray(n)?n.includes(e):n===e}function PR(n,e){let t=oE(e);return oE(n).forEach(i=>{bp(t,i)||t.push(i)}),t}function xR(n,e){return oE(e).filter(t=>!bp(n,t))}var Ip=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fa=class extends Ip{name;get formDirective(){return null}get path(){return null}},du=class extends Ip{_parent=null;name=null;valueAccessor=null},Tp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},K4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Xce=te(L({},K4),{"[class.ng-submitted]":"isSubmitted"}),Xt=(()=>{class n extends Tp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(du,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Te("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Zt]})}return n})(),Va=(()=>{class n extends Tp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(Fa,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Te("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Zt]})}return n})();var su="VALID",wp="INVALID",Na="PENDING",au="DISABLED",Ji=class{},Dp=class extends Ji{value;source;constructor(e,t){super(),this.value=e,this.source=t}},lu=class extends Ji{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},uu=class extends Ji{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ka=class extends Ji{status;source;constructor(e,t){super(),this.status=e,this.source=t}},sE=class extends Ji{source;constructor(e){super(),this.source=e}},Sp=class extends Ji{source;constructor(e){super(),this.source=e}};function WR(n){return(Pp(n)?n.validators:n)||null}function Y4(n){return Array.isArray(n)?aE(n):n||null}function GR(n,e){return(Pp(e)?e.asyncValidators:n)||null}function Q4(n){return Array.isArray(n)?cE(n):n||null}function Pp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Z4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[t])throw new H(1001,"")}function J4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new H(1002,"")})}var Ap=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rt(this.statusReactive)}set status(e){Rt(()=>this.statusReactive.set(e))}_status=Ko(()=>this.statusReactive());statusReactive=re(void 0);get valid(){return this.status===su}get invalid(){return this.status===wp}get pending(){return this.status==Na}get disabled(){return this.status===au}get enabled(){return this.status!==au}errors;get pristine(){return Rt(this.pristineReactive)}set pristine(e){Rt(()=>this.pristineReactive.set(e))}_pristine=Ko(()=>this.pristineReactive());pristineReactive=re(!0);get dirty(){return!this.pristine}get touched(){return Rt(this.touchedReactive)}set touched(e){Rt(()=>this.touchedReactive.set(e))}_touched=Ko(()=>this.touchedReactive());touchedReactive=re(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xR(e,this._rawAsyncValidators))}hasValidator(e){return bp(this._rawValidators,e)}hasAsyncValidator(e){return bp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new uu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new uu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new lu(!0,r))}markAsPending(e={}){this.status=Na;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ka(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=au,this.errors=null,this._forEachChild(i=>{i.disable(te(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,r)),this._events.next(new ka(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=su,this._forEachChild(r=>{r.enable(te(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===su||this.status===Na)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,t)),this._events.next(new ka(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?au:su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Na,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=BR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ka(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?au:this.errors?wp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Na)?Na:this._anyControlsHaveStatus(wp)?wp:su}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new lu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new uu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Y4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Q4(this._rawAsyncValidators)}},Mp=class extends Ap{constructor(e,t,r){super(WR(t),GR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){J4(this,!0,e),Object.keys(e).forEach(r=>{Z4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Sp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var lE=new W("",{providedIn:"root",factory:()=>uE}),uE="always";function X4(n,e){return[...e.path,n]}function KR(n,e,t=uE){YR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),t$(n,e),r$(n,e),n$(n,e),e$(n,e)}function OR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function e$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function YR(n,e){let t=W4(n);e.validator!==null?n.setValidators(RR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=G4(n);e.asyncValidator!==null?n.setAsyncValidators(RR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();OR(e._rawValidators,i),OR(e._rawAsyncValidators,i)}function t$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&QR(n,e)})}function n$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&QR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function QR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function r$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function i$(n,e){n==null,YR(n,e)}function o$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function s$(n){return Object.getPrototypeOf(n.constructor)===Rp}function a$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function c$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ot?t=o:s$(o)?r=o:i=o}),i||r||t||null}var l$={provide:Fa,useExisting:cn(()=>ns)},cu=Promise.resolve(),ns=(()=>{class n extends Fa{callSetDisabledState;get submitted(){return Rt(this.submittedReactive)}_submitted=Ko(()=>this.submittedReactive());submittedReactive=re(!1);_directives=new Set;form;ngSubmit=new Ve;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Mp({},aE(t),cE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){cu.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),KR(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){cu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){cu.then(()=>{let r=this._findContainer(t.path),i=new Mp({});i$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){cu.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){cu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),a$(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new sE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ee(La,10),Ee(jR,10),Ee(lE,8))};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Qn([l$]),Zt]})}return n})();function NR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var u$=class extends Ap{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(WR(t),GR(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Sp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var d$={provide:du,useExisting:cn(()=>Bt)},FR=Promise.resolve(),Bt=(()=>{class n extends du{_changeDetectorRef;callSetDisabledState;control=new u$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=c$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),o$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){KR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){FR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Qo(r);FR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?X4(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ee(Fa,9),Ee(La,10),Ee(jR,10),Ee(hu,10),Ee(Ki,8),Ee(lE,8))};static \u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Qn([d$]),Zt,Rr]})}return n})();var Ua=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),h$={provide:hu,useExisting:cn(()=>jn),multi:!0},jn=(()=>{class n extends Rp{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&q("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Qn([h$]),Zt]})}return n})();var f$={provide:hu,useExisting:cn(()=>ja),multi:!0};function ZR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function p$(n){return n.split(":")[0]}var ja=(()=>{class n extends Rp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=P(St).injector;destroyRef=P(Yn);cdr=P(Ki);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,vl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=ZR(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=p$(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&q("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qn([f$]),Zt]})}return n})(),xp=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ZR(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Ee(vn),Ee(xr),Ee(ja,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),g$={provide:hu,useExisting:cn(()=>JR),multi:!0};function LR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function m$(n){return n.split(":")[0]}var JR=(()=>{class n extends Rp{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=m$(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&q("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Qn([g$]),Zt]})}return n})(),Op=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(LR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(LR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ee(vn),Ee(xr),Ee(JR,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function _$(n){return typeof n=="number"?n:parseInt(n,10)}function XR(n){return typeof n=="number"?n:parseFloat(n)}var Np=(()=>{class n{_validator=MR;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):MR,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,features:[Rr]})}return n})(),v$={provide:La,useExisting:cn(()=>fu),multi:!0},fu=(()=>{class n extends Np{max;inputName="max";normalizeInput=t=>XR(t);createValidator=t=>j4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Qn([v$]),Zt]})}return n})(),y$={provide:La,useExisting:cn(()=>gi),multi:!0},gi=(()=>{class n extends Np{min;inputName="min";normalizeInput=t=>XR(t);createValidator=t=>U4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Qn([y$]),Zt]})}return n})(),E$={provide:La,useExisting:cn(()=>rs),multi:!0};var rs=(()=>{class n extends Np{required;inputName="required";normalizeInput=Qo;createValidator=t=>z4;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ui("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Qn([E$]),Zt]})}return n})();var C$={provide:La,useExisting:cn(()=>is),multi:!0},is=(()=>{class n extends Np{maxlength;inputName="maxlength";normalizeInput=t=>_$(t);createValidator=t=>B4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Qn([C$]),Zt]})}return n})();var w$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Or({type:n});static \u0275inj=ar({})}return n})();var en=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lE,useValue:t.callSetDisabledState??uE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Or({type:n});static \u0275inj=ar({imports:[w$]})}return n})();var eP=()=>{};var rP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},b$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},kp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,y=u&63;l||(y=64,s||(_=64)),r.push(t[h],t[p],t[_],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new hE;let _=o<<2|a>>4;if(r.push(_),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let T=u<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},I$=function(n){let e=rP(n);return kp.encodeByteArray(e,!0)},gu=function(n){return I$(n).replace(/\./g,"")},Fp=function(n){try{return kp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var T$=()=>pE().__FIREBASE_DEFAULTS__,D$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Fp(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return eP()||T$()||D$()||S$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iP=n=>{var e,t;return(t=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},oP=n=>{let e=iP(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>{var n;return(n=Lp())===null||n===void 0?void 0:n.config},sP=n=>{var e;return(e=Lp())===null||e===void 0?void 0:e[`_${n}`]};var os=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ss(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mE(n){return(await fetch(n,{credentials:"include"})).ok}function aP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[gu(JSON.stringify(t)),gu(JSON.stringify(s)),""].join(".")}var pu={};function A$(){let n={prod:[],emulator:[]};for(let e of Object.keys(pu))pu[e]?n.emulator.push(e):n.prod.push(e);return n}function M$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var tP=!1;function _E(n,e){if(typeof window>"u"||typeof document>"u"||!ss(window.location.host)||pu[n]===e||pu[n]||tP)return;pu[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=A$().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,y){_.setAttribute("width","24"),_.setAttribute("id",y),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{tP=!0,s()},_}function h(_,y){_.setAttribute("id",y),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){let _=M$(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),k=t("learnmore"),F=document.getElementById(k)||document.createElement("a"),B=t("preprendIcon"),oe=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let fe=_.element;a(fe),h(F,k);let Fe=u();l(oe,B),fe.append(oe,T,F,Fe),document.body.appendChild(fe)}o?(T.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function R$(){var n;let e=(n=Lp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hP(){return!R$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mu(){try{return typeof indexedDB=="object"}catch{return!1}}function fP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var P$="FirebaseError",Xn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=P$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pr.prototype.create)}},pr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?x$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Xn(i,a,r)}};function x$(n,e){return n.replace(O$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var O$=/\{\$([^}]+)}/g;function as(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(nP(o)&&nP(s)){if(!as(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function nP(n){return n!==null&&typeof n=="object"}function vE(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pP(n,e){let t=new fE(n,e);return t.subscribe.bind(t)}var fE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");N$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dE),i.error===void 0&&(i.error=dE),i.complete===void 0&&(i.complete=dE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function N$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dE(){}var ile=14400*1e3;function $t(n){return n&&n._delegate?n._delegate:n}var fn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cs="[DEFAULT]";var yE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new os;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F$(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:k$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function k$(n){return n===cs?void 0:n}function F$(n){return n.instantiationMode==="EAGER"}var Vp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var L$=[],Se=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Se||{}),V$={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},U$=Se.INFO,j$={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},z$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=j$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ur=class{constructor(e){this.name=e,this._logLevel=U$,this._logHandler=z$,this._userLogHandler=null,L$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var B$=(n,e)=>e.some(t=>n instanceof t),gP,mP;function $$(){return gP||(gP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H$(){return mP||(mP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _P=new WeakMap,CE=new WeakMap,vP=new WeakMap,EE=new WeakMap,bE=new WeakMap;function q$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(jr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&_P.set(t,n)}).catch(()=>{}),bE.set(e,n),e}function W$(n){if(CE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});CE.set(n,e)}var wE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return CE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function yP(n){wE=n(wE)}function G$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Up(this),e,...t);return vP.set(r,e.sort?e.sort():[e]),jr(r)}:H$().includes(n)?function(...e){return n.apply(Up(this),e),jr(_P.get(this))}:function(...e){return jr(n.apply(Up(this),e))}}function K$(n){return typeof n=="function"?G$(n):(n instanceof IDBTransaction&&W$(n),B$(n,$$())?new Proxy(n,wE):n)}function jr(n){if(n instanceof IDBRequest)return q$(n);if(EE.has(n))return EE.get(n);let e=K$(n);return e!==n&&(EE.set(n,e),bE.set(e,n)),e}var Up=n=>bE.get(n);function CP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=jr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(jr(s.result),l.oldVersion,l.newVersion,jr(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Y$=["get","getKey","getAll","getAllKeys","count"],Q$=["put","add","delete","clear"],IE=new Map;function EP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(IE.get(e))return IE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Q$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Y$.includes(t)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return IE.set(e,o),o}yP(n=>te(L({},n),{get:(e,t,r)=>EP(e,t)||n.get(e,t,r),has:(e,t)=>!!EP(e,t)||n.has(e,t)}));var DE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Z$(n){let e=n.getComponent();return e?.type==="VERSION"}var SE="@firebase/app",wP="0.13.2";var mi=new Ur("@firebase/app"),J$="@firebase/app-compat",X$="@firebase/analytics-compat",eH="@firebase/analytics",tH="@firebase/app-check-compat",nH="@firebase/app-check",rH="@firebase/auth",iH="@firebase/auth-compat",oH="@firebase/database",sH="@firebase/data-connect",aH="@firebase/database-compat",cH="@firebase/functions",lH="@firebase/functions-compat",uH="@firebase/installations",dH="@firebase/installations-compat",hH="@firebase/messaging",fH="@firebase/messaging-compat",pH="@firebase/performance",gH="@firebase/performance-compat",mH="@firebase/remote-config",_H="@firebase/remote-config-compat",vH="@firebase/storage",yH="@firebase/storage-compat",EH="@firebase/firestore",CH="@firebase/ai",wH="@firebase/firestore-compat",bH="firebase",IH="11.10.0";var AE="[DEFAULT]",TH={[SE]:"fire-core",[J$]:"fire-core-compat",[eH]:"fire-analytics",[X$]:"fire-analytics-compat",[nH]:"fire-app-check",[tH]:"fire-app-check-compat",[rH]:"fire-auth",[iH]:"fire-auth-compat",[oH]:"fire-rtdb",[sH]:"fire-data-connect",[aH]:"fire-rtdb-compat",[cH]:"fire-fn",[lH]:"fire-fn-compat",[uH]:"fire-iid",[dH]:"fire-iid-compat",[hH]:"fire-fcm",[fH]:"fire-fcm-compat",[pH]:"fire-perf",[gH]:"fire-perf-compat",[mH]:"fire-rc",[_H]:"fire-rc-compat",[vH]:"fire-gcs",[yH]:"fire-gcs-compat",[EH]:"fire-fst",[wH]:"fire-fst-compat",[CH]:"fire-vertex","fire-js":"fire-js",[bH]:"fire-js-all"};var _u=new Map,DH=new Map,ME=new Map;function bP(n,e){try{n.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gr(n){let e=n.name;if(ME.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;ME.set(e,n);for(let t of _u.values())bP(t,n);for(let t of DH.values())bP(t,n);return!0}function jp(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _i(n){return n==null?!1:n.settings!==void 0}var SH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new pr("app","Firebase",SH);var RE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}};var za=IH;function OE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:AE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(t||(t=gE()),!t)throw eo.create("no-options");let o=_u.get(i);if(o){if(as(t,o.options)&&as(r,o.config))return o;throw eo.create("duplicate-app",{appName:i})}let s=new Vp(i);for(let l of ME.values())s.addComponent(l);let a=new RE(t,r,s);return _u.set(i,a),a}function Ba(n=AE){let e=_u.get(n);if(!e&&n===AE&&gE())return OE();if(!e)throw eo.create("no-app",{appName:n});return e}function zp(){return Array.from(_u.values())}function ft(n,e,t){var r;let i=(r=TH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(a.join(" "));return}gr(new fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var AH="firebase-heartbeat-database",MH=1,vu="firebase-heartbeat-store",TE=null;function SP(){return TE||(TE=CP(AH,MH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw eo.create("idb-open",{originalErrorMessage:n.message})})),TE}async function RH(n){try{let t=(await SP()).transaction(vu),r=await t.objectStore(vu).get(AP(n));return await t.done,r}catch(e){if(e instanceof Xn)mi.warn(e.message);else{let t=eo.create("idb-get",{originalErrorMessage:e?.message});mi.warn(t.message)}}}async function IP(n,e){try{let r=(await SP()).transaction(vu,"readwrite");await r.objectStore(vu).put(e,AP(n)),await r.done}catch(t){if(t instanceof Xn)mi.warn(t.message);else{let r=eo.create("idb-set",{originalErrorMessage:t?.message});mi.warn(r.message)}}}function AP(n){return`${n.name}!${n.options.appId}`}var PH=1024,xH=30,PE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=TP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xH){let s=NH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=TP(),{heartbeatsToSend:r,unsentEntries:i}=OH(this._heartbeatsCache.heartbeats),o=gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mi.warn(t),""}}};function TP(){return new Date().toISOString().substring(0,10)}function OH(n,e=PH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),DP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),DP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var xE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mu()?fP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await RH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return IP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return IP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function DP(n){return gu(JSON.stringify({version:2,heartbeats:n})).length}function NH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function kH(n){gr(new fn("platform-logger",e=>new DE(e),"PRIVATE")),gr(new fn("heartbeat",e=>new PE(e),"PRIVATE")),ft(SE,wP,n),ft(SE,wP,"esm2017"),ft("fire-js","")}kH("");var FH="firebase",LH="11.10.0";ft(FH,LH,"app");function MP(n){n===void 0&&(n=P(st));let e=n.get($i);return t=>new he(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var us=new ki("ANGULARFIRE2_VERSION");function $p(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ha=(n,e)=>{let t=e?[e]:zp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},$a=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})($a||{}),RP=Al()&&typeof Zone<"u"?$a.WARN:$a.SILENT;var Bp=class{zone;delegate;constructor(e,t=u_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ds=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(Ne);this.outsideAngular=t.runOutsideAngular(()=>new Bp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Bp(typeof Zone>"u"?void 0:Zone.current,l_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PP=!1;function VH(n,e){!PP&&(RP>$a.SILENT||Al())&&(PP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function UH(n){let e=P(Ne,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ls(n){let e=P(Ne,{optional:!0});return e?e.run(()=>n()):n()}var jH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),_t(t,()=>ls(()=>n.apply(void 0,r)))),Ht=(n,e,t)=>(t||=e?$a.WARN:$a.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(ds),s=P($i),a=P(lt)}catch{return VH(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ls(()=>s.add())),i[u]=jH(i[u],r,a));let l=UH(()=>n.apply(this,i));return e?l instanceof he?l.pipe(Oi(o.outsideAngular),xi(o.insideAngular),MP(a)):l instanceof Promise?ls(()=>{let u=s.add();return new Promise((h,p)=>{l.then(_=>_t(a,()=>ls(()=>h(_))),_=>_t(a,()=>ls(()=>p(_)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ls(()=>l):l instanceof he?l.pipe(Oi(o.outsideAngular),xi(o.insideAngular)):ls(()=>l)});var hs=class{constructor(e){return e}},yu=class{constructor(){return zp()}};function zH(n){return n&&n.length===1?n[0]:new hs(Ba())}var NE=new W("angularfire2._apps"),BH={provide:hs,useFactory:zH,deps:[[new Mr,NE]]},$H={provide:yu,deps:[[new Mr,NE]]};function HH(n){return(e,t)=>{let r=t.get(li);ft("angularfire",us.full,"core"),ft("angularfire",us.full,"app"),ft("angular",S_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new hs(i)}}function xP(n,...e){return At([BH,$H,{provide:NE,useFactory:HH(n),multi:!0,deps:[Ne,st,ds,...e]}])}var OP=Ht(OE,!0);var qH=new Map,WH={activated:!1,tokenObservers:[]},GH={initialized:!1,enabled:!1};function mr(n){return qH.get(n)||Object.assign({},WH)}function LP(){return GH}var KH="https://content-firebaseappcheck.googleapis.com/v1";var YH="exchangeDebugToken",NP={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},iue=1440*60*1e3;var LE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new os,this.pending.promise.catch(t=>{}),await QH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new os,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function QH(n){return new Promise(e=>{setTimeout(e,n)})}var ZH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},to=new pr("appCheck","AppCheck",ZH);function VP(n){if(!mr(n).activated)throw to.create("use-before-activation",{appName:n.name})}async function UP({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw to.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw to.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw to.create("fetch-parse-error",{originalErrorMessage:p?.message})}let l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(l[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}}function jP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${KH}/projects/${t}/apps/${r}:${YH}?key=${i}`,body:{debug_token:e}}}var JH="firebase-app-check-database",XH=1,VE="firebase-app-check-store";var Hp=null;function e6(){return Hp||(Hp=new Promise((n,e)=>{try{let t=indexedDB.open(JH,XH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(VE,{keyPath:"compositeKey"})}}}catch(t){e(to.create("storage-open",{originalErrorMessage:t?.message}))}}),Hp)}function t6(n,e){return n6(r6(n),e)}async function n6(n,e){let r=(await e6()).transaction(VE,"readwrite"),o=r.objectStore(VE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(to.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function r6(n){return`${n.options.appId}-${n.name}`}var Eu=new Ur("@firebase/app-check");function kE(n,e){return mu()?t6(n,e).catch(t=>{Eu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zP(){return LP().enabled}async function BP(){let n=LP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var i6={error:"UNKNOWN_ERROR"};function o6(n){return kp.encodeString(JSON.stringify(n),!1)}async function UE(n,e=!1,t=!1){let r=n.app;VP(r);let i=mr(r),o=i.token,s;if(o&&!Cu(o)&&(i.token=void 0,o=void 0),!o){let u=await i.cachedTokenPromise;u&&(Cu(u)?o=u:await kE(r,void 0))}if(!e&&o&&Cu(o))return{token:o.token};let a=!1;if(zP())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=UP(jP(r,await BP()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await kE(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Eu.warn(u.message):t&&Eu.error(u),FE(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await mr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Eu.warn(u.message):t&&Eu.error(u),s=u}let l;return o?s?Cu(o)?l={token:o.token,internalError:s}:l=FE(s):(l={token:o.token},i.token=o,await kE(r,o)):l=FE(s),a&&l6(r,l),l}async function s6(n){let e=n.app;VP(e);let{provider:t}=mr(e);if(zP()){let r=await BP(),{token:i}=await UP(jP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function a6(n,e,t,r){let{app:i}=n,o=mr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Cu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),kP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>kP(n))}function $P(n,e){let t=mr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kP(n){let{app:e}=n,t=mr(e),r=t.tokenRefresher;r||(r=c6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function c6(n){let{app:e}=n;return new LE(async()=>{let t=mr(e),r;if(t.token?r=await UE(n,!0):r=await UE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},NP.RETRIAL_MIN_WAIT,NP.RETRIAL_MAX_WAIT)}function l6(n,e){let t=mr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Cu(n){return n.expireTimeMillis-Date.now()>0}function FE(n){return{token:o6(i6),error:n}}var jE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=mr(this.app);for(let t of e)$P(this.app,t.next);return Promise.resolve()}};function u6(n,e){return new jE(n,e)}function d6(n){return{getToken:e=>UE(n,e),getLimitedUseToken:()=>s6(n),addTokenListener:e=>a6(n,"INTERNAL",e),removeTokenListener:e=>$P(n.app,e)}}var h6="@firebase/app-check",f6="0.10.1";var p6="app-check",FP="app-check-internal";function g6(){gr(new fn(p6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return u6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FP).initialize()})),gr(new fn(FP,n=>{let e=n.getProvider("app-check").getImmediate();return d6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ft(h6,f6)}g6();var m6="app-check";var qp=class{constructor(){return Ha(m6)}};var _6=["localhost","0.0.0.0","127.0.0.1"],mue=typeof window<"u"&&_6.includes(window.location.hostname);function ZP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JP=ZP,XP=new pr("auth","Firebase",ZP());var Yp=new Ur("@firebase/auth");function v6(n,...e){Yp.logLevel<=Se.WARN&&Yp.warn(`Auth (${za}): ${n}`,...e)}function Gp(n,...e){Yp.logLevel<=Se.ERROR&&Yp.error(`Auth (${za}): ${n}`,...e)}function HP(n,...e){throw JE(n,...e)}function ZE(n,...e){return JE(n,...e)}function ex(n,e,t){let r=Object.assign(Object.assign({},JP()),{[e]:t});return new pr("auth","Firebase",r).create(e,{appName:n.name})}function Kp(n){return ex(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XP.create(n,...e)}function je(n,e,...t){if(!n)throw JE(e,...t)}function wu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gp(e),new Error(e)}function Qp(n,e){n||wu(e)}function y6(){return qP()==="http:"||qP()==="https:"}function qP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function E6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y6()||uP()||"connection"in navigator)?navigator.onLine:!0}function C6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Qp(t>e,"Short delay should be less than long delay!"),this.isMobile=cP()||dP()}get(){return E6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function w6(n,e){Qp(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Zp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var b6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var I6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T6=new gs(3e4,6e4);function tx(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ng(n,e,t,r,i={}){return nx(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=vE(Object.assign({key:n.config.apiKey},s)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:l},o);return lP()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&ss(n.emulatorConfig.host)&&(u.credentials="include"),Zp.fetch()(await rx(n,n.config.apiHost,t,a),u)})}async function nx(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},b6),e);try{let i=new $E(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Wp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wp(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Wp(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Wp(n,"user-disabled",s);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ex(n,h,u);HP(n,h)}}catch(i){if(i instanceof Xn)throw i;HP(n,"network-request-failed",{message:String(i)})}}async function rx(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?w6(n.config,i):`${n.config.apiScheme}://${i}`;return I6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var $E=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ZE(this.auth,"network-request-failed")),T6.get())})}};function Wp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ZE(n,e,r);return i.customData._tokenResponse=t,i}async function D6(n,e){return ng(n,"POST","/v1/accounts:delete",e)}async function Jp(n,e){return ng(n,"POST","/v1/accounts:lookup",e)}function bu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XE(n,e=!1){let t=$t(n),r=await t.getIdToken(e),i=ix(r);je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:bu(zE(i.auth_time)),issuedAtTime:bu(zE(i.iat)),expirationTime:bu(zE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function zE(n){return Number(n)*1e3}function ix(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Fp(t);return i?JSON.parse(i):(Gp("Failed to decode base64 JWT payload"),null)}catch(i){return Gp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function WP(n){let e=ix(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function HE(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xn&&S6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function S6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var qE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Tu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Xp(n){var e;let t=n.auth,r=await n.getIdToken(),i=await HE(n,Jp(t,{idToken:r}));je(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ox(o.providerUserInfo):[],a=A6(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,h=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Tu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function eC(n){let e=$t(n);await Xp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ox(n){return n.map(e=>{var{providerId:t}=e,r=d_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function M6(n,e){let t=await nx(n,{},async()=>{let r=vE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await rx(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&ss(n.emulatorConfig.host)&&(l.credentials="include"),Zp.fetch()(s,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function R6(n,e){return ng(n,"POST","/v2/accounts:revokeToken",tx(n,e))}var Iu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");let t=WP(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await M6(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(je(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return wu("not implemented")}};function no(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var fs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=d_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await HE(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XE(this,e)}reload(){return eC(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_i(this.auth.app))return Promise.reject(Kp(this.auth));let e=await this.getIdToken();return await HE(this,D6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,F=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,B=(u=t.createdAt)!==null&&u!==void 0?u:void 0,oe=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:fe,emailVerified:Fe,isAnonymous:Lt,providerData:$e,stsTokenManager:A}=t;je(fe&&A,e,"internal-error");let w=Iu.fromJSON(this.name,A);je(typeof fe=="string",e,"internal-error"),no(p,e.name),no(_,e.name),je(typeof Fe=="boolean",e,"internal-error"),je(typeof Lt=="boolean",e,"internal-error"),no(y,e.name),no(T,e.name),no(k,e.name),no(F,e.name),no(B,e.name),no(oe,e.name);let I=new n({uid:fe,auth:e,email:_,emailVerified:Fe,displayName:p,isAnonymous:Lt,photoURL:T,phoneNumber:y,tenantId:k,stsTokenManager:w,createdAt:B,lastLoginAt:oe});return $e&&Array.isArray($e)&&(I.providerData=$e.map(S=>Object.assign({},S))),F&&(I._redirectEventId=F),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Iu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xp(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];je(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?ox(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Iu;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l}};var GP=new Map;function ps(n){Qp(n instanceof Function,"Expected a class definition");let e=GP.get(n);return e?(Qp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GP.set(n,e),e)}var P6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),WE=P6;function BE(n,e,t){return`firebase:${n}:${e}:${t}`}var eg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=BE(this.userKey,i.apiKey,o),this.fullPersistenceKey=BE("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Jp(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ps(WE),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||ps(WE),s=BE(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=await u._get(s);if(h){let p;if(typeof h=="string"){let _=await Jp(e,{idToken:h}).catch(()=>{});if(!_)break;p=await fs._fromGetAccountInfoResponse(e,_,h)}else p=fs._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new n(o,e,r))}};function KP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(k6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L6(e))return"Blackberry";if(V6(e))return"Webos";if(O6(e))return"Safari";if((e.includes("chrome/")||N6(e))&&!e.includes("edge/"))return"Chrome";if(F6(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function x6(n=zn()){return/firefox\//i.test(n)}function O6(n=zn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N6(n=zn()){return/crios\//i.test(n)}function k6(n=zn()){return/iemobile/i.test(n)}function F6(n=zn()){return/android/i.test(n)}function L6(n=zn()){return/blackberry/i.test(n)}function V6(n=zn()){return/webos/i.test(n)}function sx(n,e=[]){let t;switch(n){case"Browser":t=KP(zn());break;case"Worker":t=`${KP(zn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${r}`}var GE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function U6(n,e={}){return ng(n,"GET","/v2/passwordPolicy",tx(n,e))}var j6=6,KE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:j6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var YE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tg(this),this.idTokenSubscription=new tg(this),this.beforeStateQueue=new GE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await eg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Jp(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_i(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_i(this.app))return Promise.reject(Kp(this));let t=e?$t(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _i(this.app)?Promise.reject(Kp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _i(this.app)?Promise.reject(Kp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await U6(this),t=new KE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await R6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ps(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await eg.create(this,[ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(_i(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&v6(`Error while retrieving App Check token: ${t.error}`),t?.token}};function z6(n){return $t(n)}var tg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pP(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var B6={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $6(n){B6=n}function H6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function q6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ps);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var Aue=H6("rcb"),Mue=new gs(3e4,6e4);var Rue=new gs(2e3,1e4);var Pue=600*1e3;var xue=new gs(3e4,6e4);var Oue=new gs(5e3,15e3);var Nue=encodeURIComponent("fac");var YP="@firebase/auth",QP="1.10.8";var QE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function W6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G6(n){gr(new fn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sx(n)},u=new YE(r,i,o,l);return q6(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),gr(new fn("auth-internal",e=>{let t=z6(e.getProvider("auth").getImmediate());return(r=>new QE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ft(YP,QP,W6(n)),ft(YP,QP,"esm2017")}var K6=300,kue=sP("authIdTokenMaxAge")||K6;function Y6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ZE("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Y6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G6("Browser");var G5="auth";var rg=class{constructor(){return Ha(G5)}};var ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cx={};var vi,tC;(function(){var n;function e(A,w){function I(){}I.prototype=w.prototype,A.D=w.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(S,M,x){for(var b=Array(arguments.length-2),Qr=2;Qr<arguments.length;Qr++)b[Qr-2]=arguments[Qr];return w.prototype[M].apply(S,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)S[M]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(M=0;16>M;++M)S[M]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=A.g[0],I=A.g[1],M=A.g[2];var x=A.g[3],b=w+(x^I&(M^x))+S[0]+3614090360&4294967295;w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[1]+3905402710&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[2]+606105819&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[3]+3250441966&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[4]+4118548399&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[5]+1200080426&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[6]+2821735955&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[7]+4249261313&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[8]+1770035416&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[9]+2336552879&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[10]+4294925233&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[11]+2304563134&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[12]+1804603682&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[13]+4254626195&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[14]+2792965006&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[15]+1236535329&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(M^x&(I^M))+S[1]+4129170786&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[6]+3225465664&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[11]+643717713&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[0]+3921069994&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[5]+3593408605&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[10]+38016083&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[15]+3634488961&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[4]+3889429448&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[9]+568446438&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[14]+3275163606&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[3]+4107603335&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[8]+1163531501&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[13]+2850285829&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[2]+4243563512&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[7]+1735328473&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[12]+2368359562&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(I^M^x)+S[5]+4294588738&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[8]+2272392833&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[11]+1839030562&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[14]+4259657740&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[1]+2763975236&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[4]+1272893353&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[7]+4139469664&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[10]+3200236656&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[13]+681279174&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[0]+3936430074&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[3]+3572445317&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[6]+76029189&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[9]+3654602809&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[12]+3873151461&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[15]+530742520&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[2]+3299628645&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(M^(I|~x))+S[0]+4096336452&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[7]+1126891415&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[14]+2878612391&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[5]+4237533241&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[12]+1700485571&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[3]+2399980690&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[10]+4293915773&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[1]+2240044497&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[8]+1873313359&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[15]+4264355552&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[6]+2734768916&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[13]+1309151649&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[4]+4149444226&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[11]+3174756917&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[2]+718787259&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(M+(b<<21&4294967295|b>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+x&4294967295}r.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var I=w-this.blockSize,S=this.B,M=this.h,x=0;x<w;){if(M==0)for(;x<=I;)i(this,A,x),x+=this.blockSize;if(typeof A=="string"){for(;x<w;)if(S[M++]=A.charCodeAt(x++),M==this.blockSize){i(this,S),M=0;break}}else for(;x<w;)if(S[M++]=A[x++],M==this.blockSize){i(this,S),M=0;break}}this.h=M,this.o+=w},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var I=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=I&255,I/=256;for(this.u(A),A=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)A[I++]=this.g[w]>>>S&255;return A};function o(A,w){var I=a;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=w(A)}function s(A,w){this.h=w;for(var I=[],S=!0,M=A.length-1;0<=M;M--){var x=A[M]|0;S&&x==w||(I[M]=x,S=!1)}this.g=I}var a={};function l(A){return-128<=A&&128>A?o(A,function(w){return new s([w|0],0>w?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return F(u(-A));for(var w=[],I=1,S=0;A>=I;S++)w[S]=A/I|0,I*=4294967296;return new s(w,0)}function h(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return F(h(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(w,8)),S=p,M=0;M<A.length;M+=8){var x=Math.min(8,A.length-M),b=parseInt(A.substring(M,M+x),w);8>x?(x=u(Math.pow(w,x)),S=S.j(x).add(u(b))):(S=S.j(I),S=S.add(u(b)))}return S}var p=l(0),_=l(1),y=l(16777216);n=s.prototype,n.m=function(){if(k(this))return-F(this).m();for(var A=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);A+=(0<=S?S:4294967296+S)*w,w*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(k(this))return"-"+F(this).toString(A);for(var w=u(Math.pow(A,6)),I=this,S="";;){var M=Fe(I,w).g;I=B(I,M.j(w));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=M,T(I))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function k(A){return A.h==-1}n.l=function(A){return A=B(this,A),k(A)?-1:T(A)?0:1};function F(A){for(var w=A.g.length,I=[],S=0;S<w;S++)I[S]=~A.g[S];return new s(I,~A.h).add(_)}n.abs=function(){return k(this)?F(this):this},n.add=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0,M=0;M<=w;M++){var x=S+(this.i(M)&65535)+(A.i(M)&65535),b=(x>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);S=b>>>16,x&=65535,b&=65535,I[M]=b<<16|x}return new s(I,I[I.length-1]&-2147483648?-1:0)};function B(A,w){return A.add(F(w))}n.j=function(A){if(T(this)||T(A))return p;if(k(this))return k(A)?F(this).j(F(A)):F(F(this).j(A));if(k(A))return F(this.j(F(A)));if(0>this.l(y)&&0>A.l(y))return u(this.m()*A.m());for(var w=this.g.length+A.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var M=0;M<A.g.length;M++){var x=this.i(S)>>>16,b=this.i(S)&65535,Qr=A.i(M)>>>16,vc=A.i(M)&65535;I[2*S+2*M]+=b*vc,oe(I,2*S+2*M),I[2*S+2*M+1]+=x*vc,oe(I,2*S+2*M+1),I[2*S+2*M+1]+=b*Qr,oe(I,2*S+2*M+1),I[2*S+2*M+2]+=x*Qr,oe(I,2*S+2*M+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new s(I,0)};function oe(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function fe(A,w){this.g=A,this.h=w}function Fe(A,w){if(T(w))throw Error("division by zero");if(T(A))return new fe(p,p);if(k(A))return w=Fe(F(A),w),new fe(F(w.g),F(w.h));if(k(w))return w=Fe(A,F(w)),new fe(F(w.g),w.h);if(30<A.g.length){if(k(A)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var I=_,S=w;0>=S.l(A);)I=Lt(I),S=Lt(S);var M=$e(I,1),x=$e(S,1);for(S=$e(S,2),I=$e(I,2);!T(S);){var b=x.add(S);0>=b.l(A)&&(M=M.add(I),x=b),S=$e(S,1),I=$e(I,1)}return w=B(A,M.j(w)),new fe(M,w)}for(M=p;0<=A.l(w);){for(I=Math.max(1,Math.floor(A.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),x=u(I),b=x.j(w);k(b)||0<b.l(A);)I-=S,x=u(I),b=x.j(w);T(x)&&(x=_),M=M.add(x),A=B(A,b)}return new fe(M,A)}n.A=function(A){return Fe(this,A).h},n.and=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&A.i(S);return new s(I,this.h&A.h)},n.or=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|A.i(S);return new s(I,this.h|A.h)},n.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^A.i(S);return new s(I,this.h^A.h)};function Lt(A){for(var w=A.g.length+1,I=[],S=0;S<w;S++)I[S]=A.i(S)<<1|A.i(S-1)>>>31;return new s(I,A.h)}function $e(A,w){var I=w>>5;w%=32;for(var S=A.g.length-I,M=[],x=0;x<S;x++)M[x]=0<w?A.i(x+I)>>>w|A.i(x+I+1)<<32-w:A.i(x+I);return new s(M,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tC=cx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,vi=cx.Integer=s}).apply(typeof ax<"u"?ax:typeof self<"u"?self:typeof window<"u"?window:{});var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yi={};var nC,K5,qa,rC,Du,og,iC,oC,sC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ig=="object"&&ig];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var v=0;v<c.length-1;v++){var R=c[v];if(!(R in f))break e;f=f[R]}c=c[c.length-1],v=f[c],d=d(v),d!=v&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,v=!1,R={next:function(){if(!v&&f<c.length){var O=f++;return{value:d(O,c[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,v),c.apply(d,R)}}return function(){return c.apply(d,arguments)}}function _(c,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),c.apply(this,v)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(v,R,O){for(var $=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)$[Ke-2]=arguments[Ke];return d.prototype[R].apply(v,$)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let v=0;v<d;v++)f[v]=c[v];return f}return[]}function F(c,d){for(let f=1;f<arguments.length;f++){let v=arguments[f];if(l(v)){let R=c.length||0,O=v.length||0;c.length=R+O;for(let $=0;$<O;$++)c[R+$]=v[$]}else c.push(v)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function oe(c){return/^[\s\xa0]*$/.test(c)}function fe(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Fe(c){return Fe[" "](c),c}Fe[" "]=function(){};var Lt=fe().indexOf("Gecko")!=-1&&!(fe().toLowerCase().indexOf("webkit")!=-1&&fe().indexOf("Edge")==-1)&&!(fe().indexOf("Trident")!=-1||fe().indexOf("MSIE")!=-1)&&fe().indexOf("Edge")==-1;function $e(c,d,f){for(let v in c)d.call(f,c[v],v,c)}function A(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function w(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)c[f]=v[f];for(let O=0;O<I.length;O++)f=I[O],Object.prototype.hasOwnProperty.call(v,f)&&(c[f]=v[f])}}function M(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function x(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Cm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qr{constructor(){this.h=this.g=null}add(d,f){let v=vc.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var vc=new B(()=>new tk,c=>c.reset());class tk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let yc,Ec=!1,Cm=new Qr,Sb=()=>{let c=a.Promise.resolve(void 0);yc=()=>{c.then(nk)}};var nk=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(f){x(f)}var d=vc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ec=!1};function Si(){this.s=this.s,this.C=this.C}Si.prototype.s=!1,Si.prototype.ma=function(){this.s||(this.s=!0,this.N())},Si.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var rk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Cc(c,d){if(qt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,v=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Lt){e:{try{Fe(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ik[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Cc.aa.h.call(this)}}T(Cc,qt);var ik={2:"touch",3:"pen",4:"mouse"};Cc.prototype.h=function(){Cc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),ok=0;function sk(c,d,f,v,R){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++ok,this.da=this.fa=!1}function Xu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ed(c){this.src=c,this.g={},this.h=0}ed.prototype.add=function(c,d,f,v,R){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var $=bm(c,d,v,R);return-1<$?(d=c[$],f||(d.fa=!1)):(d=new sk(d,this.src,O,!!v,R),d.fa=f,c.push(d)),d};function wm(c,d){var f=d.type;if(f in c.g){var v=c.g[f],R=Array.prototype.indexOf.call(v,d,void 0),O;(O=0<=R)&&Array.prototype.splice.call(v,R,1),O&&(Xu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function bm(c,d,f,v){for(var R=0;R<c.length;++R){var O=c[R];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==v)return R}return-1}var Im="closure_lm_"+(1e6*Math.random()|0),Tm={};function Ab(c,d,f,v,R){if(v&&v.once)return Rb(c,d,f,v,R);if(Array.isArray(d)){for(var O=0;O<d.length;O++)Ab(c,d[O],f,v,R);return null}return f=Mm(f),c&&c[wc]?c.K(d,f,u(v)?!!v.capture:!!v,R):Mb(c,d,f,!1,v,R)}function Mb(c,d,f,v,R,O){if(!d)throw Error("Invalid event type");var $=u(R)?!!R.capture:!!R,Ke=Sm(c);if(Ke||(c[Im]=Ke=new ed(c)),f=Ke.add(d,f,v,$,O),f.proxy)return f;if(v=ak(),f.proxy=v,v.src=c,v.listener=f,c.addEventListener)rk||(R=$),R===void 0&&(R=!1),c.addEventListener(d.toString(),v,R);else if(c.attachEvent)c.attachEvent(xb(d.toString()),v);else if(c.addListener&&c.removeListener)c.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ak(){function c(f){return d.call(c.src,c.listener,f)}let d=ck;return c}function Rb(c,d,f,v,R){if(Array.isArray(d)){for(var O=0;O<d.length;O++)Rb(c,d[O],f,v,R);return null}return f=Mm(f),c&&c[wc]?c.L(d,f,u(v)?!!v.capture:!!v,R):Mb(c,d,f,!0,v,R)}function Pb(c,d,f,v,R){if(Array.isArray(d))for(var O=0;O<d.length;O++)Pb(c,d[O],f,v,R);else v=u(v)?!!v.capture:!!v,f=Mm(f),c&&c[wc]?(c=c.i,d=String(d).toString(),d in c.g&&(O=c.g[d],f=bm(O,f,v,R),-1<f&&(Xu(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete c.g[d],c.h--)))):c&&(c=Sm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=bm(d,f,v,R)),(f=-1<c?d[c]:null)&&Dm(f))}function Dm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[wc])wm(d.i,c);else{var f=c.type,v=c.proxy;d.removeEventListener?d.removeEventListener(f,v,c.capture):d.detachEvent?d.detachEvent(xb(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Sm(d))?(wm(f,c),f.h==0&&(f.src=null,d[Im]=null)):Xu(c)}}}function xb(c){return c in Tm?Tm[c]:Tm[c]="on"+c}function ck(c,d){if(c.da)c=!0;else{d=new Cc(d,this);var f=c.listener,v=c.ha||c.src;c.fa&&Dm(c),c=f.call(v,d)}return c}function Sm(c){return c=c[Im],c instanceof ed?c:null}var Am="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mm(c){return typeof c=="function"?c:(c[Am]||(c[Am]=function(d){return c.handleEvent(d)}),c[Am])}function Wt(){Si.call(this),this.i=new ed(this),this.M=this,this.F=null}T(Wt,Si),Wt.prototype[wc]=!0,Wt.prototype.removeEventListener=function(c,d,f,v){Pb(this,c,d,f,v)};function rn(c,d){var f,v=c.F;if(v)for(f=[];v;v=v.F)f.push(v);if(c=c.M,v=d.type||d,typeof d=="string")d=new qt(d,c);else if(d instanceof qt)d.target=d.target||c;else{var R=d;d=new qt(v,c),S(d,R)}if(R=!0,f)for(var O=f.length-1;0<=O;O--){var $=d.g=f[O];R=td($,v,!0,d)&&R}if($=d.g=c,R=td($,v,!0,d)&&R,R=td($,v,!1,d)&&R,f)for(O=0;O<f.length;O++)$=d.g=f[O],R=td($,v,!1,d)&&R}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],v=0;v<f.length;v++)Xu(f[v]);delete c.g[d],c.h--}}this.F=null},Wt.prototype.K=function(c,d,f,v){return this.i.add(String(c),d,!1,f,v)},Wt.prototype.L=function(c,d,f,v){return this.i.add(String(c),d,!0,f,v)};function td(c,d,f,v){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,O=0;O<d.length;++O){var $=d[O];if($&&!$.da&&$.capture==f){var Ke=$.listener,Vt=$.ha||$.src;$.fa&&wm(c.i,$),R=Ke.call(Vt,v)!==!1&&R}}return R&&!v.defaultPrevented}function Ob(c,d,f){if(typeof c=="function")f&&(c=_(c,f));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Nb(c){c.g=Ob(()=>{c.g=null,c.i&&(c.i=!1,Nb(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class lk extends Si{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Nb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bc(c){Si.call(this),this.h=c,this.g={}}T(bc,Si);var kb=[];function Fb(c){$e(c.g,function(d,f){this.g.hasOwnProperty(f)&&Dm(d)},c),c.g={}}bc.prototype.N=function(){bc.aa.N.call(this),Fb(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rm=a.JSON.stringify,uk=a.JSON.parse,dk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Pm(){}Pm.prototype.h=null;function Lb(c){return c.h||(c.h=c.i())}function Vb(){}var Ic={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xm(){qt.call(this,"d")}T(xm,qt);function Om(){qt.call(this,"c")}T(Om,qt);var po={},Ub=null;function nd(){return Ub=Ub||new Wt}po.La="serverreachability";function jb(c){qt.call(this,po.La,c)}T(jb,qt);function Tc(c){let d=nd();rn(d,new jb(d))}po.STAT_EVENT="statevent";function zb(c,d){qt.call(this,po.STAT_EVENT,c),this.stat=d}T(zb,qt);function on(c){let d=nd();rn(d,new zb(d,c))}po.Ma="timingevent";function Bb(c,d){qt.call(this,po.Ma,c),this.size=d}T(Bb,qt);function Dc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Sc(){this.g=!0}Sc.prototype.xa=function(){this.g=!1};function hk(c,d,f,v,R,O){c.info(function(){if(c.g)if(O)for(var $="",Ke=O.split("&"),Vt=0;Vt<Ke.length;Vt++){var Oe=Ke[Vt].split("=");if(1<Oe.length){var Gt=Oe[0];Oe=Oe[1];var Kt=Gt.split("_");$=2<=Kt.length&&Kt[1]=="type"?$+(Gt+"="+Oe+"&"):$+(Gt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+$})}function fk(c,d,f,v,R,O,$){c.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+O+" "+$})}function Rs(c,d,f,v){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+gk(c,f)+(v?" "+v:"")})}function pk(c,d){c.info(function(){return"TIMEOUT: "+d})}Sc.prototype.info=function(){};function gk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var v=f[c];if(!(2>v.length)){var R=v[1];if(Array.isArray(R)&&!(1>R.length)){var O=R[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<R.length;$++)R[$]=""}}}}return Rm(f)}catch{return d}}var rd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$b={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nm;function id(){}T(id,Pm),id.prototype.g=function(){return new XMLHttpRequest},id.prototype.i=function(){return{}},Nm=new id;function Ai(c,d,f,v){this.j=c,this.i=d,this.l=f,this.R=v||1,this.U=new bc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hb}function Hb(){this.i=null,this.g="",this.h=!1}var qb={},km={};function Fm(c,d,f){c.L=1,c.v=cd(Zr(d)),c.m=f,c.P=!0,Wb(c,null)}function Wb(c,d){c.F=Date.now(),od(c),c.A=Zr(c.v);var f=c.A,v=c.R;Array.isArray(v)||(v=[String(v)]),sI(f.i,"t",v),c.C=0,f=c.j.J,c.h=new Hb,c.g=II(c.j,f?d:null,!c.m),0<c.O&&(c.M=new lk(_(c.Y,c,c.g),c.O)),d=c.U,f=c.g,v=c.ca;var R="readystatechange";Array.isArray(R)||(R&&(kb[0]=R.toString()),R=kb);for(var O=0;O<R.length;O++){var $=Ab(f,R[O],v||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Tc(),hk(c.i,c.u,c.A,c.l,c.R,c.m)}Ai.prototype.ca=function(c){c=c.target;let d=this.M;d&&Jr(c)==3?d.j():this.Y(c)},Ai.prototype.Y=function(c){try{if(c==this.g)e:{let Kt=Jr(this.g);var d=this.g.Ba();let Os=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||fI(this.g)))){this.J||Kt!=4||d==7||(d==8||0>=Os?Tc(3):Tc(2)),Lm(this);var f=this.g.Z();this.X=f;t:if(Gb(this)){var v=fI(this.g);c="";var R=v.length,O=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){go(this),Ac(this);var $="";break t}this.h.i=new a.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,c+=this.h.i.decode(v[d],{stream:!(O&&d==R-1)});v.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,fk(this.i,this.u,this.A,this.l,this.R,Kt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(Ke)){var Oe=Ke;break t}}Oe=null}if(f=Oe)Rs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vm(this,f);else{this.o=!1,this.s=3,on(12),go(this),Ac(this);break e}}if(this.P){f=!0;let rr;for(;!this.J&&this.C<$.length;)if(rr=mk(this,$),rr==km){Kt==4&&(this.s=4,on(14),f=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(rr==qb){this.s=4,on(15),Rs(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Rs(this.i,this.l,rr,null),Vm(this,rr);if(Gb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||$.length!=0||this.h.h||(this.s=1,on(16),f=!1),this.o=this.o&&f,!f)Rs(this.i,this.l,$,"[Invalid Chunked Response]"),go(this),Ac(this);else if(0<$.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Hm(Gt),Gt.M=!0,on(11))}}else Rs(this.i,this.l,$,null),Vm(this,$);Kt==4&&go(this),this.o&&!this.J&&(Kt==4?EI(this.j,this):(this.o=!1,od(this)))}else Ok(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),go(this),Ac(this)}}}catch{}finally{}};function Gb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function mk(c,d){var f=c.C,v=d.indexOf(`
`,f);return v==-1?km:(f=Number(d.substring(f,v)),isNaN(f)?qb:(v+=1,v+f>d.length?km:(d=d.slice(v,v+f),c.C=v+f,d)))}Ai.prototype.cancel=function(){this.J=!0,go(this)};function od(c){c.S=Date.now()+c.I,Kb(c,c.I)}function Kb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dc(_(c.ba,c),d)}function Lm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ai.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(pk(this.i,this.A),this.L!=2&&(Tc(),on(17)),go(this),this.s=2,Ac(this)):Kb(this,this.S-c)};function Ac(c){c.j.G==0||c.J||EI(c.j,c)}function go(c){Lm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Fb(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Vm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Um(f.h,c))){if(!c.K&&Um(f.h,c)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)fd(f),dd(f);else break e;$m(f),on(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Dc(_(f.Za,f),6e3));if(1>=Zb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else _o(f,11)}else if((c.K||f.g==c)&&fd(f),!oe(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let Oe=R[d];if(f.T=Oe[0],Oe=Oe[1],f.G==2)if(Oe[0]=="c"){f.K=Oe[1],f.ia=Oe[2];let Gt=Oe[3];Gt!=null&&(f.la=Gt,f.j.info("VER="+f.la));let Kt=Oe[4];Kt!=null&&(f.Aa=Kt,f.j.info("SVER="+f.Aa));let Os=Oe[5];Os!=null&&typeof Os=="number"&&0<Os&&(v=1.5*Os,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;let rr=c.g;if(rr){let gd=rr.g?rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gd){var O=v.h;O.g||gd.indexOf("spdy")==-1&&gd.indexOf("quic")==-1&&gd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(jm(O,O.h),O.h=null))}if(v.D){let qm=rr.g?rr.g.getResponseHeader("X-HTTP-Session-Id"):null;qm&&(v.ya=qm,Xe(v.I,v.D,qm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var $=c;if(v.qa=bI(v,v.J?v.ia:null,v.W),$.K){Jb(v.h,$);var Ke=$,Vt=v.L;Vt&&(Ke.I=Vt),Ke.B&&(Lm(Ke),od(Ke)),v.g=$}else vI(v);0<f.i.length&&hd(f)}else Oe[0]!="stop"&&Oe[0]!="close"||_o(f,7);else f.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?_o(f,7):Bm(f):Oe[0]!="noop"&&f.l&&f.l.ta(Oe),f.v=0)}}Tc(4)}catch{}}var _k=class{constructor(c,d){this.g=c,this.map=d}};function Yb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zb(c){return c.h?1:c.g?c.g.size:0}function Um(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function jm(c,d){c.g?c.g.add(d):c.h=d}function Jb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Yb.prototype.cancel=function(){if(this.i=Xb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Xb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function vk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,v=0;v<f;v++)d.push(c[v]);return d}d=[],f=0;for(v in c)d[f++]=c[v];return d}function yk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let v in c)d[f++]=v;return d}}}function eI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=yk(c),v=vk(c),R=v.length,O=0;O<R;O++)d.call(void 0,v[O],f&&f[O],c)}var tI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ek(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var v=c[f].indexOf("="),R=null;if(0<=v){var O=c[f].substring(0,v);R=c[f].substring(v+1)}else O=c[f];d(O,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function mo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof mo){this.h=c.h,sd(this,c.j),this.o=c.o,this.g=c.g,ad(this,c.s),this.l=c.l;var d=c.i,f=new Pc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),nI(this,f),this.m=c.m}else c&&(d=String(c).match(tI))?(this.h=!1,sd(this,d[1]||"",!0),this.o=Mc(d[2]||""),this.g=Mc(d[3]||"",!0),ad(this,d[4]),this.l=Mc(d[5]||"",!0),nI(this,d[6]||"",!0),this.m=Mc(d[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}mo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Rc(d,rI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Rc(d,rI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Rc(f,f.charAt(0)=="/"?bk:wk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Rc(f,Tk)),c.join("")};function Zr(c){return new mo(c)}function sd(c,d,f){c.j=f?Mc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ad(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function nI(c,d,f){d instanceof Pc?(c.i=d,Dk(c.i,c.h)):(f||(d=Rc(d,Ik)),c.i=new Pc(d,c.h))}function Xe(c,d,f){c.i.set(d,f)}function cd(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Ck),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ck(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var rI=/[#\/\?@]/g,wk=/[#\?:]/g,bk=/[#\?]/g,Ik=/[#\?@]/g,Tk=/#/g;function Pc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Mi(c){c.g||(c.g=new Map,c.h=0,c.i&&Ek(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Pc.prototype,n.add=function(c,d){Mi(this),this.i=null,c=Ps(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function iI(c,d){Mi(c),d=Ps(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function oI(c,d){return Mi(c),d=Ps(c,d),c.g.has(d)}n.forEach=function(c,d){Mi(this),this.g.forEach(function(f,v){f.forEach(function(R){c.call(d,R,v,this)},this)},this)},n.na=function(){Mi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){let R=c[v];for(let O=0;O<R.length;O++)f.push(d[v])}return f},n.V=function(c){Mi(this);let d=[];if(typeof c=="string")oI(this,c)&&(d=d.concat(this.g.get(Ps(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Mi(this),this.i=null,c=Ps(this,c),oI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function sI(c,d,f){iI(c,d),0<f.length&&(c.i=null,c.g.set(Ps(c,d),k(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];let O=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var R=O;$[v]!==""&&(R+="="+encodeURIComponent(String($[v]))),c.push(R)}}return this.i=c.join("&")};function Ps(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Dk(c,d){d&&!c.j&&(Mi(c),c.i=null,c.g.forEach(function(f,v){var R=v.toLowerCase();v!=R&&(iI(this,v),sI(this,R,f))},c)),c.j=d}function Sk(c,d){let f=new Sc;if(a.Image){let v=new Image;v.onload=y(Ri,f,"TestLoadImage: loaded",!0,d,v),v.onerror=y(Ri,f,"TestLoadImage: error",!1,d,v),v.onabort=y(Ri,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=y(Ri,f,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=c}else d(!1)}function Ak(c,d){let f=new Sc,v=new AbortController,R=setTimeout(()=>{v.abort(),Ri(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:v.signal}).then(O=>{clearTimeout(R),O.ok?Ri(f,"TestPingServer: ok",!0,d):Ri(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Ri(f,"TestPingServer: error",!1,d)})}function Ri(c,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function Mk(){this.g=new dk}function Rk(c,d,f){let v=f||"";try{eI(c,function(R,O){let $=R;u(R)&&($=Rm(R)),d.push(v+O+"="+encodeURIComponent($))})}catch(R){throw d.push(v+"type="+encodeURIComponent("_badmap")),R}}function xc(c){this.l=c.Ub||null,this.j=c.eb||!1}T(xc,Pm),xc.prototype.g=function(){return new ld(this.l,this.j)},xc.prototype.i=(function(c){return function(){return c}})({});function ld(c,d){Wt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ld,Wt),n=ld.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Nc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Nc(this)),this.g&&(this.readyState=3,Nc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;aI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function aI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Oc(this):Nc(this),this.readyState==3&&aI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Oc(this))},n.Qa=function(c){this.g&&(this.response=c,Oc(this))},n.ga=function(){this.g&&Oc(this)};function Oc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Nc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Nc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ld.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function cI(c){let d="";return $e(c,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function zm(c,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=cI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Xe(c,d,f))}function it(c){Wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(it,Wt);var Pk=/^https?$/i,xk=["POST","PUT"];n=it.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nm.g(),this.v=this.o?Lb(this.o):Lb(Nm),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(O){lI(this,O);return}if(c=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let O of v.keys())f.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),R=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xk,d,void 0))||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,$]of f)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hI(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){lI(this,O)}};function lI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,uI(c),ud(c)}function uI(c){c.A||(c.A=!0,rn(c,"complete"),rn(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,rn(this,"complete"),rn(this,"abort"),ud(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ud(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?dI(this):this.bb())},n.bb=function(){dI(this)};function dI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Jr(c)!=4||c.Z()!=2)){if(c.u&&Jr(c)==4)Ob(c.Ea,0,c);else if(rn(c,"readystatechange"),Jr(c)==4){c.h=!1;try{let $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=$===0){var R=String(c.D).match(tI)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),v=!Pk.test(R?R.toLowerCase():"")}f=v}if(f)rn(c,"complete"),rn(c,"success");else{c.m=6;try{var O=2<Jr(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",uI(c)}}finally{ud(c)}}}}function ud(c,d){if(c.g){hI(c);let f=c.g,v=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||rn(c,"ready");try{f.onreadystatechange=v}catch{}}}function hI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Jr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),uk(d)}};function fI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ok(c){let d={};c=(c.g&&2<=Jr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<c.length;v++){if(oe(c[v]))continue;var f=M(c[v]);let R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let O=d[R]||[];d[R]=O,O.push(f)}A(d,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function pI(c){this.Aa=0,this.i=[],this.j=new Sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,c),this.cb=kc("retryDelaySeedMs",1e4,c),this.Wa=kc("forwardChannelMaxRetries",2,c),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yb(c&&c.concurrentRequestLimit),this.Da=new Mk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=pI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,v){on(0),this.W=c,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=bI(this,null,this.W),hd(this)};function Bm(c){if(gI(c),c.G==3){var d=c.U++,f=Zr(c.I);if(Xe(f,"SID",c.K),Xe(f,"RID",d),Xe(f,"TYPE","terminate"),Fc(c,f),d=new Ai(c,c.j,d),d.L=2,d.v=cd(Zr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=II(d.j,null),d.g.ea(d.v)),d.F=Date.now(),od(d)}wI(c)}function dd(c){c.g&&(Hm(c),c.g.cancel(),c.g=null)}function gI(c){dd(c),c.u&&(a.clearTimeout(c.u),c.u=null),fd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function hd(c){if(!Qb(c.h)&&!c.s){c.s=!0;var d=c.Ga;yc||Sb(),Ec||(yc(),Ec=!0),Cm.add(d,c),c.B=0}}function Nk(c,d){return Zb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dc(_(c.Ga,c,d),CI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let R=new Ai(this,this.j,c),O=this.o;if(this.S&&(O?(O=w(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(R.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=_I(this,R,d),f=Zr(this.I),Xe(f,"RID",c),Xe(f,"CVER",22),this.D&&Xe(f,"X-HTTP-Session-Id",this.D),Fc(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(cI(O)))+"&"+d:this.m&&zm(f,this.m,O)),jm(this.h,R),this.Ua&&Xe(f,"TYPE","init"),this.P?(Xe(f,"$req",d),Xe(f,"SID","null"),R.T=!0,Fm(R,f,null)):Fm(R,f,d),this.G=2}}else this.G==3&&(c?mI(this,c):this.i.length==0||Qb(this.h)||mI(this))};function mI(c,d){var f;d?f=d.l:f=c.U++;let v=Zr(c.I);Xe(v,"SID",c.K),Xe(v,"RID",f),Xe(v,"AID",c.T),Fc(c,v),c.m&&c.o&&zm(v,c.m,c.o),f=new Ai(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=_I(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),jm(c.h,f),Fm(f,v,d)}function Fc(c,d){c.H&&$e(c.H,function(f,v){Xe(d,v,f)}),c.l&&eI({},function(f,v){Xe(d,v,f)})}function _I(c,d,f){f=Math.min(c.i.length,f);var v=c.l?_(c.l.Na,c.l,c):null;e:{var R=c.i;let O=-1;for(;;){let $=["count="+f];O==-1?0<f?(O=R[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Ke=!0;for(let Vt=0;Vt<f;Vt++){let Oe=R[Vt].g,Gt=R[Vt].map;if(Oe-=O,0>Oe)O=Math.max(0,R[Vt].g-100),Ke=!1;else try{Rk(Gt,$,"req"+Oe+"_")}catch{v&&v(Gt)}}if(Ke){v=$.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,v}function vI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;yc||Sb(),Ec||(yc(),Ec=!0),Cm.add(d,c),c.v=0}}function $m(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dc(_(c.Fa,c),CI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,yI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dc(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),dd(this),yI(this))};function Hm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function yI(c){c.g=new Ai(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Zr(c.qa);Xe(d,"RID","rpc"),Xe(d,"SID",c.K),Xe(d,"AID",c.T),Xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(d,"TO",c.ja),Xe(d,"TYPE","xmlhttp"),Fc(c,d),c.m&&c.o&&zm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=cd(Zr(d)),f.m=null,f.P=!0,Wb(f,c)}n.Za=function(){this.C!=null&&(this.C=null,dd(this),$m(this),on(19))};function fd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function EI(c,d){var f=null;if(c.g==d){fd(c),Hm(c),c.g=null;var v=2}else if(Um(c.h,d))f=d.D,Jb(c.h,d),v=1;else return;if(c.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=c.B;v=nd(),rn(v,new Bb(v,f)),hd(c)}else vI(c);else if(R=d.s,R==3||R==0&&0<d.X||!(v==1&&Nk(c,d)||v==2&&$m(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),R){case 1:_o(c,5);break;case 4:_o(c,10);break;case 3:_o(c,6);break;default:_o(c,2)}}}function CI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function _o(c,d){if(c.j.info("Error code "+d),d==2){var f=_(c.fb,c),v=c.Xa;let R=!v;v=new mo(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sd(v,"https"),cd(v),R?Sk(v.toString(),f):Ak(v.toString(),f)}else on(2);c.G=0,c.l&&c.l.sa(d),wI(c),gI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function wI(c){if(c.G=0,c.ka=[],c.l){let d=Xb(c.h);(d.length!=0||c.i.length!=0)&&(F(c.ka,d),F(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function bI(c,d,f){var v=f instanceof mo?Zr(f):new mo(f);if(v.g!="")d&&(v.g=d+"."+v.g),ad(v,v.s);else{var R=a.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var O=new mo(null);v&&sd(O,v),d&&(O.g=d),R&&ad(O,R),f&&(O.l=f),v=O}return f=c.D,d=c.ya,f&&d&&Xe(v,f,d),Xe(v,"VER",c.la),Fc(c,v),v}function II(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new it(new xc({eb:f})):new it(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function TI(){}n=TI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pd(){}pd.prototype.g=function(c,d){return new Cn(c,d)};function Cn(c,d){Wt.call(this),this.g=new pI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!oe(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!oe(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new xs(this)}T(Cn,Wt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Bm(this.g)},Cn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Rm(c),c=f);d.i.push(new _k(d.Ya++,c)),d.G==3&&hd(d)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Bm(this.g),delete this.g,Cn.aa.N.call(this)};function DI(c){xm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(DI,xm);function SI(){Om.call(this),this.status=1}T(SI,Om);function xs(c){this.g=c}T(xs,TI),xs.prototype.ua=function(){rn(this.g,"a")},xs.prototype.ta=function(c){rn(this.g,new DI(c))},xs.prototype.sa=function(c){rn(this.g,new SI)},xs.prototype.ra=function(){rn(this.g,"b")},pd.prototype.createWebChannel=pd.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,sC=yi.createWebChannelTransport=function(){return new pd},oC=yi.getStatEventTarget=function(){return nd()},iC=yi.Event=po,og=yi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rd.NO_ERROR=0,rd.TIMEOUT=8,rd.HTTP_ERROR=6,Du=yi.ErrorCode=rd,$b.COMPLETE="complete",rC=yi.EventType=$b,Vb.EventType=Ic,Ic.OPEN="a",Ic.CLOSE="b",Ic.ERROR="c",Ic.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,qa=yi.WebChannel=Vb,K5=yi.FetchXmlHttpFactory=xc,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,nC=yi.XhrIo=it}).apply(typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{});var lx="@firebase/firestore",ux="4.8.0";var Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var hc="11.10.0";var Cs=new Ur("@firebase/firestore");function Wa(){return Cs.logLevel}function J(n,...e){if(Cs.logLevel<=Se.DEBUG){let t=e.map(Yw);Cs.debug(`Firestore (${hc}): ${n}`,...t)}}function Ei(n,...e){if(Cs.logLevel<=Se.ERROR){let t=e.map(Yw);Cs.error(`Firestore (${hc}): ${n}`,...t)}}function ao(n,...e){if(Cs.logLevel<=Se.WARN){let t=e.map(Yw);Cs.warn(`Firestore (${hc}): ${n}`,...t)}}function Yw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function de(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,nO(n,r,t)}function nO(n,e,t){let r=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ei(r),new Error(r)}function Be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||nO(e,i,r)}function ve(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var hg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nt.UNAUTHENTICATED))}shutdown(){}},hC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fC=class{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new hg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}},pC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},gC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_i(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Y5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function rO(){return new TextEncoder}var xu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Y5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function _C(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return De(r,i);{let o=rO(),s=Q5(o.encode(dx(n,t)),o.encode(dx(e,t)));return s!==0?s:De(r,i)}}t+=r>65535?2:1}return De(n.length,e.length)}function dx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Q5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function Xa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var hx="__name__",pg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&de(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return De(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):_C(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}},nt=class n extends pg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Z5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$n=class n extends pg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Z5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hx}static keyField(){return new n([hx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Y(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(nt.fromString(e))}static fromName(e){return new n(nt.fromString(e).popFirst(5))}static empty(){return new n(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new nt(e.slice()))}};function iO(n,e,t){if(!t)throw new Y(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function J5(n,e,t,r){if(e===!0&&r===!0)throw new Y(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fx(n){if(!ae.isDocumentKey(n))throw new Y(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(ae.isDocumentKey(n))throw new Y(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de(12329,{type:typeof n})}function nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wg(n);throw new Y(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bt(n,e){let t={typeString:n};return e&&(t.value=e),t}function qu(n,e){if(!oO(n))throw new Y(V.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Y(V.INVALID_ARGUMENT,t);return!0}var gx=-62135596800,mx=1e6,It=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gx)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mx}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-gx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:bt("string",It._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};var Ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new It(0,0))}static max(){return new n(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ou=-1,vC=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};vC.UNKNOWN_ID=-1;function X5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new It(t+1,0):new It(t,r));return new ws(i,ae.empty(),e)}function e8(n){return new ws(n.readTime,n.key,Ou)}var ws=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ce.min(),ae.empty(),Ou)}static max(){return new n(Ce.max(),ae.empty(),Ou)}};function t8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var n8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fc(n){if(n.code!==V.FAILED_PRECONDITION||n.message!==n8)throw n;J("LocalStore","Unexpectedly lost primary lease")}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function r8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}var Qw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Zw=-1;function Gg(n){return n==null}function Nu(n){return n===0&&1/n==-1/0}function i8(n){return typeof n=="number"&&Number.isInteger(n)&&!Nu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var sO="";function o8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_x(e)),e=s8(n.get(t),e);return _x(e)}function s8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case sO:t+="";break;default:t+=o}}return t}function _x(n){return n+sO+""}var a8="remoteDocuments",aO="owner";var cO="mutationQueues";var lO="mutations";var uO="documentMutations",c8="remoteDocumentsV14";var dO="remoteDocumentGlobal";var hO="targets";var fO="targetDocuments";var pO="targetGlobal",gO="collectionParents";var mO="clientMetadata";var _O="bundles";var vO="namedQueries";var l8="indexConfiguration";var u8="indexState";var d8="indexEntries";var yO="documentOverlays";var h8="globals";var f8=[cO,lO,uO,a8,hO,aO,pO,fO,mO,dO,gO,_O,vO],Vde=[...f8,yO],p8=[cO,lO,uO,c8,hO,aO,pO,fO,mO,dO,gO,_O,vO,yO],g8=p8,m8=[...g8,l8,u8,d8];var Ude=[...m8,h8];function vx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var at=class n{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}},Qa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Br=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}};Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1;Br.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class n{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gg(this.data.getIterator())}getIteratorFrom(e){return new gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},gg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var tr=class n{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new n([])}unionWith(e){let t=new kt($n.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var mg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nn.EMPTY_BYTE_STRING=new nn("");var _8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Be(!!n,39018),typeof n=="string"){let e=0,t=_8.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}var CO="server_timestamp",wO="__type__",bO="__previous_value__",IO="__local_write_time__";function Jw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[wO])===null||t===void 0?void 0:t.stringValue)===CO}function Kg(n){let e=n.mapValue.fields[bO];return Jw(e)?Kg(e):e}function ku(n){let e=Ci(n.mapValue.fields[IO].timestampValue);return new It(e.seconds,e.nanos)}var EC=class{constructor(e,t,r,i,o,s,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}},_g="(default)",vg=class n{constructor(e,t){this.projectId=e,this.database=t||_g}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_g}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xw="__type__",TO="__max__",sg={mapValue:{fields:{__type__:{stringValue:TO}}}},eb="__vector__",ec="value";function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jw(n)?4:SO(n)?9007199254740991:DO(n)?10:11:de(28295,{value:n})}function Wr(n,e){if(n===e)return!0;let t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ku(n).isEqual(ku(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ci(i.timestampValue),a=Ci(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?Nu(s)===Nu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Xa(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vx(s)!==vx(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Wr(s[l],a[l])))return!1;return!0})(n,e);default:return de(52216,{left:n})}}function Fu(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function tc(n,e){if(n===e)return 0;let t=co(n),r=co(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=tt(o.integerValue||o.doubleValue),l=tt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return yx(n.timestampValue,e.timestampValue);case 4:return yx(ku(n),ku(e));case 5:return _C(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=wi(o),l=wi(s);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=De(a[u],l[u]);if(h!==0)return h}return De(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=De(tt(o.latitude),tt(s.latitude));return a!==0?a:De(tt(o.longitude),tt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ex(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,l,u,h;let p=o.fields||{},_=s.fields||{},y=(a=p[ec])===null||a===void 0?void 0:a.arrayValue,T=(l=_[ec])===null||l===void 0?void 0:l.arrayValue,k=De(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:Ex(y,T)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===sg.mapValue&&s===sg.mapValue)return 0;if(o===sg.mapValue)return 1;if(s===sg.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let _=_C(l[p],h[p]);if(_!==0)return _;let y=tc(a[l[p]],u[h[p]]);if(y!==0)return y}return De(l.length,h.length)})(n.mapValue,e.mapValue);default:throw de(23264,{le:t})}}function yx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=Ci(n),r=Ci(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function Ex(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=tc(t[i],r[i]);if(o)return o}return De(t.length,r.length)}function nc(n){return CC(n)}function CC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ci(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=CC(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${CC(t.fields[s])}`;return i+"}"})(n.mapValue):de(61005,{value:n})}function lg(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Kg(n);return e?16+lg(e):16;case 5:return 2*n.stringValue.length;case 6:return wi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+lg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ho(r.fields,(o,s)=>{i+=o.length+lg(s)}),i})(n.mapValue);default:throw de(13486,{value:n})}}function Cx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wC(n){return!!n&&"integerValue"in n}function tb(n){return!!n&&"arrayValue"in n}function wx(n){return!!n&&"nullValue"in n}function bx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ug(n){return!!n&&"mapValue"in n}function DO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Xw])===null||t===void 0?void 0:t.stringValue)===eb}function Au(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ho(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Au(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TO}var zde={mapValue:{fields:{[Xw]:{stringValue:eb},[ec]:{arrayValue:{}}}}};var Bn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ug(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=$n.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Au(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ug(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ho(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Au(this.value))}};function AO(n){let e=[];return ho(n.fields,(t,r)=>{let i=new $n([t]);if(ug(r)){let o=AO(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new tr(e)}var _r=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ce.min(),Ce.min(),Ce.min(),Bn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ce.min(),Ce.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ce.min(),Ce.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rc=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ix(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),t.key):r=tc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var ic=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function v8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var yg=class{},wt=class n extends yg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new IC(e,t,r):t==="array-contains"?new SC(e,r):t==="in"?new AC(e,r):t==="not-in"?new MC(e,r):t==="array-contains-any"?new RC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new TC(e,r):new DC(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tc(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vr=class n extends yg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return MO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function MO(n){return n.op==="and"}function RO(n){return y8(n)&&MO(n)}function y8(n){for(let e of n.filters)if(e instanceof vr)return!1;return!0}function bC(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(RO(n))return n.filters.map(e=>bC(e)).join(",");{let e=n.filters.map(t=>bC(t)).join(",");return`${n.op}(${e})`}}function PO(n,e){return n instanceof wt?(function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)})(n,e):n instanceof vr?(function(r,i){return i instanceof vr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&PO(s,i.filters[a]),!0):!1})(n,e):void de(19439)}function xO(n){return n instanceof wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`})(n):n instanceof vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(xO).join(" ,")+"}"})(n):"Filter"}var IC=class extends wt{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){let t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}},TC=class extends wt{constructor(e,t){super(e,"in",t),this.keys=OO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},DC=class extends wt{constructor(e,t){super(e,"not-in",t),this.keys=OO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function OO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ae.fromName(r.referenceValue))}var SC=class extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return tb(t)&&Fu(t.arrayValue,this.value)}},AC=class extends wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fu(this.value.arrayValue,t)}},MC=class extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fu(this.value.arrayValue,t)}},RC=class extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!tb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fu(this.value.arrayValue,r))}};var PC=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Dx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new PC(n,e,t,r,i,o,s)}function nb(n){let e=ve(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Gg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nc(r)).join(",")),e.Pe=t}return e.Pe}function rb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!v8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tx(n.startAt,e.startAt)&&Tx(n.endAt,e.endAt)}function xC(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var bs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function E8(n,e,t,r,i,o,s,a){return new bs(n,e,t,r,i,o,s,a)}function ib(n){return new bs(n)}function Sx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NO(n){return n.collectionGroup!==null}function Mu(n){let e=ve(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new kt($n.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ic(o,r))}),t.has($n.keyField().canonicalString())||e.Te.push(new ic($n.keyField(),r))}return e.Te}function $r(n){let e=ve(n);return e.Ie||(e.Ie=C8(e,Mu(n))),e.Ie}function C8(n,e){if(n.limitType==="F")return Dx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ic(i.field,o)});let t=n.endAt?new rc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rc(n.startAt.position,n.startAt.inclusive):null;return Dx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function OC(n,e){let t=n.filters.concat([e]);return new bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function NC(n,e,t){return new bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Yg(n,e){return rb($r(n),$r(e))&&n.limitType===e.limitType}function kO(n){return`${nb($r(n))}|lt:${n.limitType}`}function Ga(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xO(i)).join(", ")}]`),Gg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>nc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`})($r(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Mu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,l){let u=Ix(s,a,l);return s.inclusive?u<=0:u<0})(r.startAt,Mu(r),i)||r.endAt&&!(function(s,a,l){let u=Ix(s,a,l);return s.inclusive?u>=0:u>0})(r.endAt,Mu(r),i))})(n,e)}function w8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FO(n){return(e,t)=>{let r=!1;for(let i of Mu(n)){let o=b8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function b8(n,e,t){let r=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?tc(l,u):de(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:n.dir})}}var bi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return EO(this.inner)}size(){return this.innerSize}};var I8=new at(ae.comparator);function Ii(){return I8}var LO=new at(ae.comparator);function Su(...n){let e=LO;for(let t of n)e=e.insert(t.key,t);return e}function VO(n){let e=LO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return Ru()}function UO(){return Ru()}function Ru(){return new bi(n=>n.toString(),(n,e)=>n.isEqual(e))}var T8=new at(ae.comparator),D8=new kt(ae.comparator);function Me(...n){let e=D8;for(let t of n)e=e.add(t);return e}var S8=new kt(De);function A8(){return S8}function ob(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nu(e)?"-0":e}}function jO(n){return{integerValue:""+n}}function M8(n,e){return i8(e)?jO(e):ob(n,e)}var oc=class{constructor(){this._=void 0}};function R8(n,e,t){return n instanceof sc?(function(i,o){let s={fields:{[wO]:{stringValue:CO},[IO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Jw(o)&&(o=Kg(o)),o&&(s.fields[bO]=o),{mapValue:s}})(t,e):n instanceof Is?BO(n,e):n instanceof Ts?$O(n,e):(function(i,o){let s=zO(i,o),a=Ax(s)+Ax(i.Ee);return wC(s)&&wC(i.Ee)?jO(a):ob(i.serializer,a)})(n,e)}function P8(n,e,t){return n instanceof Is?BO(n,e):n instanceof Ts?$O(n,e):t}function zO(n,e){return n instanceof ac?(function(r){return wC(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var sc=class extends oc{},Is=class extends oc{constructor(e){super(),this.elements=e}};function BO(n,e){let t=HO(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ts=class extends oc{constructor(e){super(),this.elements=e}};function $O(n,e){let t=HO(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var ac=class extends oc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Ax(n){return tt(n.integerValue||n.doubleValue)}function HO(n){return tb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function x8(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Is&&i instanceof Is||r instanceof Ts&&i instanceof Ts?Xa(r.elements,i.elements,Wr):r instanceof ac&&i instanceof ac?Wr(r.Ee,i.Ee):r instanceof sc&&i instanceof sc})(n.transform,e.transform)}var kC=class{constructor(e,t){this.version=e,this.transformResults=t}},Hr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var cc=class{};function qO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lu(n.key,Hr.none()):new Ds(n.key,n.data,Hr.none());{let t=n.data,r=Bn.empty(),i=new kt($n.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Gr(n.key,r,new tr(i.toArray()),Hr.none())}}function O8(n,e,t){n instanceof Ds?(function(i,o,s){let a=i.value.clone(),l=Rx(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Gr?(function(i,o,s){if(!dg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Rx(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(WO(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Pu(n,e,t,r){return n instanceof Ds?(function(o,s,a,l){if(!dg(o.precondition,s))return a;let u=o.value.clone(),h=Px(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Gr?(function(o,s,a,l){if(!dg(o.precondition,s))return a;let u=Px(o.fieldTransforms,l,s),h=s.data;return h.setAll(WO(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return dg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function N8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=zO(r.transform,i||null);o!=null&&(t===null&&(t=Bn.empty()),t.set(r.field,o))}return t||null}function Mx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(o,s)=>x8(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ds=class extends cc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Gr=class extends cc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Rx(n,e,t){let r=new Map;Be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,P8(s,a,t[i]))}return r}function Px(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,R8(o,s,e))}return r}var Lu=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},FC=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var LC=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&O8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UO();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=qO(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(t,r)=>Mx(t,r))&&Xa(this.baseMutations,e.baseMutations,(t,r)=>Mx(t,r))}},VC=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return T8})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var UC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Et,xe;function k8(n){switch(n){case V.OK:return de(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return de(15467,{code:n})}}function GO(n){if(n===void 0)return Ei("GRPC error has no .code"),V.UNKNOWN;switch(n){case Et.OK:return V.OK;case Et.CANCELLED:return V.CANCELLED;case Et.UNKNOWN:return V.UNKNOWN;case Et.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Et.INTERNAL:return V.INTERNAL;case Et.UNAVAILABLE:return V.UNAVAILABLE;case Et.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Et.NOT_FOUND:return V.NOT_FOUND;case Et.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Et.ABORTED:return V.ABORTED;case Et.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Et.DATA_LOSS:return V.DATA_LOSS;default:return de(39323,{code:n})}}(xe=Et||(Et={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";var xx=null;var F8=new vi([4294967295,4294967295],0);function Ox(n){let e=rO().encode(n),t=new tC;return t.update(e),new Uint8Array(t.digest())}function Nx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new vi([t,r],0),new vi([i,o],0)]}var zC=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _s(`Invalid padding: ${t}`);if(r<0)throw new _s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _s(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _s(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=vi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(vi.fromNumber(r)));return i.compare(F8)===1&&(i=new vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Ox(e),[r,i]=Nx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Ox(e),[r,i]=Nx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Eg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Vu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ce.min(),i,new at(De),Ii(),Me())}},Vu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var Za=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Cg=class{constructor(e,t){this.targetId=e,this.De=t}},wg=class{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},bg=class{constructor(){this.ve=0,this.Ce=kx(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Me(),t=Me(),r=Me();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:o})}}),new Vu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=kx()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},BC=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ii(),this.je=ag(),this.Je=ag(),this.He=new at(De)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(xC(o))if(r===0){let s=new ae(o.path);this.Xe(t,s,_r.newNoDocument(s,Ce.min()))}else Be(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),l=a?this.ut(a,e,s):1;if(l!==0){this.rt(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}xx?.ct((function(h,p,_,y,T){var k,F,B,oe,fe,Fe;let Lt={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},$e=p.unchangedNames;return $e&&(Lt.bloomFilter={applied:T===0,hashCount:(k=$e?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(oe=(B=(F=$e?.bits)===null||F===void 0?void 0:F.bitmap)===null||B===void 0?void 0:B.length)!==null&&oe!==void 0?oe:0,padding:(Fe=(fe=$e?.bits)===null||fe===void 0?void 0:fe.padding)!==null&&Fe!==void 0?Fe:0,mightContain:A=>{var w;return(w=y?.mightContain(A))!==null&&w!==void 0&&w}}),Lt})(s,e.De,this.We.lt(),a,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(l){if(l instanceof mg)return ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zC(s,i,o)}catch(l){return ao(l instanceof _s?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&xC(a.target)){let l=new ae(a.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,_r.newNoDocument(l,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Me();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Eg(e,t,this.He,this.ze,r);return this.ze=Ii(),this.je=ag(),this.Je=ag(),this.He=new at(De),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new bg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(De),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new bg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function ag(){return new at(ae.comparator)}function kx(){return new at(ae.comparator)}var L8={asc:"ASCENDING",desc:"DESCENDING"},V8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U8={and:"AND",or:"OR"},$C=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function HC(n,e){return n.useProto3Json||Gg(e)?e:{value:e}}function Ig(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j8(n,e){return Ig(n,e.toTimestamp())}function qr(n){return Be(!!n,49232),Ce.fromTimestamp((function(t){let r=Ci(t);return new It(r.seconds,r.nanos)})(n))}function sb(n,e){return qC(n,e).canonicalString()}function qC(n,e){let t=(function(i){return new nt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function YO(n){let e=nt.fromString(n);return Be(eN(e),10190,{key:e.toString()}),e}function WC(n,e){return sb(n.databaseId,e.path)}function aC(n,e){let t=YO(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(ZO(t))}function QO(n,e){return sb(n.databaseId,e)}function z8(n){let e=YO(n);return e.length===4?nt.emptyPath():ZO(e)}function GC(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZO(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fx(n,e,t){return{name:WC(n,e),fields:t.value.mapValue.fields}}function B8(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?(Be(h===void 0||typeof h=="string",58123),nn.fromBase64String(h||"")):(Be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let h=u.code===void 0?V.UNKNOWN:GO(u.code);return new Y(h,u.message||"")})(s);t=new wg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=aC(n,r.document.name),o=qr(r.document.updateTime),s=r.document.createTime?qr(r.document.createTime):Ce.min(),a=new Bn({mapValue:{fields:r.document.fields}}),l=_r.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Za(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=aC(n,r.document),o=r.readTime?qr(r.readTime):Ce.min(),s=_r.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Za([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=aC(n,r.document),o=r.removedTargetIds||[];t=new Za([],o,i,null)}else{if(!("filter"in e))return de(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new jC(i,o),a=r.targetId;t=new Cg(a,s)}}return t}function $8(n,e){let t;if(e instanceof Ds)t={update:Fx(n,e.key,e.value)};else if(e instanceof Lu)t={delete:WC(n,e.key)};else if(e instanceof Gr)t={update:Fx(n,e.key,e.data),updateMask:J8(e.fieldMask)};else{if(!(e instanceof FC))return de(16599,{Rt:e.type});t={verify:WC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof sc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ac)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw de(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:j8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de(27497)})(n,e.precondition)),t}function H8(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?qr(i.updateTime):qr(o);return s.isEqual(Ce.min())&&(s=qr(o)),new kC(s,i.transformResults||[])})(t,e))):[]}function q8(n,e){return{documents:[QO(n,e.path)]}}function W8(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QO(n,i);let o=(function(u){if(u.length!==0)return XO(vr.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(h=>(function(_){return{field:Ka(_.field),direction:Y8(_.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=HC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function G8(n){let e=z8(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Be(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let _=JO(p);return _ instanceof vr&&RO(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(_=>(function(T){return new ic(Ya(T.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(_))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let _;return _=typeof p=="object"?p.value:p,Gg(_)?null:_})(t.limit));let l=null;t.startAt&&(l=(function(p){let _=!!p.before,y=p.values||[];return new rc(y,_)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let _=!p.before,y=p.values||[];return new rc(y,_)})(t.endAt)),E8(e,i,s,o,a,"F",l,u)}function K8(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ya(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ya(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ya(t.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ya(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wt.create(Ya(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vr.create(t.compositeFilter.filters.map(r=>JO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(t.compositeFilter.op))})(n):de(30097,{filter:n})}function Y8(n){return L8[n]}function Q8(n){return V8[n]}function Z8(n){return U8[n]}function Ka(n){return{fieldPath:n.canonicalString()}}function Ya(n){return $n.fromServerFormat(n.fieldPath)}function XO(n){return n instanceof wt?(function(t){if(t.op==="=="){if(bx(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(wx(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bx(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(wx(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:Q8(t.op),value:t.value}}})(n):n instanceof vr?(function(t){let r=t.getFilters().map(i=>XO(i));return r.length===1?r[0]:{compositeFilter:{op:Z8(t.op),filters:r}}})(n):de(54877,{filter:n})}function J8(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function eN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Uu=class n{constructor(e,t,r,i,o=Ce.min(),s=Ce.min(),a=nn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var KC=class{constructor(e){this.gt=e}};function X8(n){let e=G8({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?NC(e,e.limit,"L"):e}var Tg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Nu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Ci(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(wi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?SO(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):DO(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):de(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ec,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(tt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Tg.Ut=new Tg;var YC=class{constructor(){this.Dn=new QC}addToCollectionParentIndex(e,t){return this.Dn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(ws.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},QC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kt(nt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(nt.comparator)).toArray()}};var Bde=new Uint8Array(0);var Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tN=41943040,er=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(tN,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);var ju=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Vx="LruGarbageCollector",eq=1048576;function Ux([n,e],[t,r]){let i=De(n,t);return i===0?De(e,r):i}var ZC=class{constructor(e){this.Tr=e,this.buffer=new kt(Ux),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ux(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},JC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(Vx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pc(t)?J(Vx,"Ignoring IndexedDB error during garbage collection: ",t):await fc(t)}await this.Rr(3e5)})}},XC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Qw.ue);let r=new ZC(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Lx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Wa()<=Se.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function tq(n,e){return new XC(n,e)}var ew=class{constructor(){this.changes=new bi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Pu(r.mutation,i,tr.empty(),It.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Su();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ii(),s=Ru(),a=(function(){return Ru()})();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Gr)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Pu(h.mutation,u,h.mutation.getFieldMask(),It.now())):s.set(u.key,tr.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>{var p;return a.set(u,new tw(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ru(),i=new at((s,a)=>s-a),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||tr.empty();h=a.applyToLocalView(u,h),r.set(l,h);let p=(i.get(a.batchId)||Me()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=UO();h.forEach(_=>{if(!o.has(_)){let y=qO(t.get(_),r.get(_));y!==null&&p.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(ms()),a=Ou,l=o;return s.next(u=>z.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Me())).next(h=>({batchId:a,changes:VO(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(r=>{let i=Su();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Su();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,l=>{let u=(function(p,_){return new bs(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,_r.newInvalidDocument(h)))});let a=Su();return s.forEach((l,u)=>{let h=o.get(l);h!==void 0&&Pu(h.mutation,u,tr.empty(),It.now()),Qg(t,u)&&(a=a.insert(l,u))}),a})}};var rw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qr(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:X8(i.bundledQuery),readTime:qr(i.readTime)}})(t)),z.resolve()}};var iw=class{constructor(){this.overlays=new at(ae.comparator),this.kr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ms();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=ms(),o=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new at((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=ms(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=ms(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return z.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new UC(t,r));let o=this.kr.get(t);o===void 0&&(o=Me(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var ow=class{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var zu=class{constructor(){this.qr=new kt(Ct.Qr),this.$r=new kt(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ae(new nt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ae(new nt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=Me();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ct(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}};var sw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(Ct.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new LC(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Zw:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(De);return t.forEach(i=>{let o=new Ct(i,0),s=new Ct(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ae.isDocumentKey(o)||(o=o.child(""));let s=new Ct(new ae(o),0),a=new kt(De);return this.Yr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},s),z.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(t.mutations,i=>{let o=new Ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aw=class{constructor(e){this.ni=e,this.docs=(function(){return new at(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(t))}getEntries(e,t){let r=Ii();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_r.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ii(),s=t.path,a=new ae(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||t8(e8(h),r)<=0||(i.has(h.key)||Qg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){de(9500)}ri(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cw(this)}getSize(e){return z.resolve(this.size)}},cw=class extends ew{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var lw=class{constructor(e){this.persistence=e,this.ii=new bi(t=>nb(t),rb),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new zu,this.targetCount=0,this._i=ju.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new ju(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.hr(t),z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.oi.containsKey(t))}};var Dg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Qw(0),this.ci=!1,this.ci=!0,this.li=new ow,this.referenceDelegate=e(this),this.hi=new lw(this),this.indexManager=new YC,this.remoteDocumentCache=(function(i){return new aw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new KC(t),this.Ti=new rw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new sw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new uw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},uw=class extends yC{constructor(e){super(),this.currentSequenceNumber=e}},dw=class n{constructor(e){this.persistence=e,this.Ai=new zu,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw de(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=ae.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return z.or([()=>z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Sg=class n{constructor(e,t){this.persistence=e,this.gi=new bi(r=>o8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lg(e.data.value)),t}Sr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Me(),i=Me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var fw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return hP()?8:r8(zn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new fw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Wa()<=Se.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ga(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Wa()<=Se.DEBUG&&J("QueryEngine","Query:",Ga(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Wa()<=Se.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ga(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):z.resolve())}ps(e,t){if(Sx(t))return z.resolve(null);let r=$r(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=NC(t,null,"F"),r=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Me(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,a);return this.Ds(t,u,s,l.readTime)?this.ps(e,NC(t,null,"F")):this.vs(e,u,t,l)}))})))}ys(e,t,r,i){return Sx(t)||i.isEqual(Ce.min())?z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?z.resolve(null):(Wa()<=Se.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ga(t)),this.vs(e,s,t,X5(i,Ou)).next(a=>a))})}bs(e,t){let r=new kt(FO(e));return t.forEach((i,o)=>{Qg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Wa()<=Se.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ga(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ab="LocalStore",nq=3e8,gw=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new at(De),this.Ms=new bi(o=>nb(o),rb),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function rq(n,e,t,r){return new gw(n,e,t,r)}async function nN(n,e){let t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Me();for(let u of i){s.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})}function iq(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){let p=u.batch,_=p.keys(),y=z.resolve();return _.forEach(T=>{y=y.next(()=>h.getEntry(l,T)).next(k=>{let F=u.docVersions.get(T);Be(F!==null,48541),k.version.compareTo(F)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rN(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function oq(n,e){let t=ve(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let _=i.get(p);if(!_)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,F,B){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=nq?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,y,h)&&a.push(t.hi.updateTargetData(o,y))});let l=Ii(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(sq(o,s,e.documentUpdates).next(h=>{l=h.Ls,u=h.ks})),!r.isEqual(Ce.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Fs=i,o))}function sq(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ii();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):J(ab,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function aq(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cq(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Uu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function mw(n,e,t){let r=ve(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pc(s))throw s;J(ab,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function jx(n,e,t){let r=ve(n),i=Ce.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(l,u,h){let p=ve(l),_=p.Ms.get(h);return _!==void 0?z.resolve(p.Fs.get(_)):p.hi.getTargetData(u,h)})(r,s,$r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Ce.min(),t?o:Me())).next(a=>(lq(r,w8(e),a),{documents:a,qs:o})))}function lq(n,e,t){let r=n.xs.get(e)||Ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Ag=class{constructor(){this.activeTargetIds=A8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _w=class{constructor(){this.Fo=new Ag,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ag,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vw=class{xo(e){}shutdown(){}};var zx="ConnectivityMonitor",Mg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(zx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(zx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cg=null;function yw(){return cg===null?cg=(function(){return 268435456+Math.round(2147483648*Math.random())})():cg++,"0x"+cg.toString(16)}var cC="RestConnection",uq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ew=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===_g?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=yw(),a=this.Go(e,t.toUriEncodedString());J(cC,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:u}=new URL(a),h=ss(u);return this.jo(e,a,l,r,h).then(p=>(J(cC,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ao(cC,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=uq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Cw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var tn="WebChannelConnection",ww=class extends Ew{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=yw();return new Promise((a,l)=>{let u=new nC;u.setWithCredentials(!0),u.listenOnce(rC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Du.NO_ERROR:let p=u.getResponseJson();J(tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Du.TIMEOUT:J(tn,`RPC '${e}' ${s} timed out`),l(new Y(V.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:let _=u.getStatus();if(J(tn,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let k=(function(B){let oe=B.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(oe)>=0?oe:V.UNKNOWN})(T.status);l(new Y(k,T.message))}else l(new Y(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(V.UNAVAILABLE,"Connection failed."));break;default:de(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(tn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);J(tn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}P_(e,t,r){let i=yw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sC(),a=oC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=o.join("");J(tn,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=s.createWebChannel(h,l);this.T_(p);let _=!1,y=!1,T=new Cw({Ho:F=>{y?J(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(_||(J(tn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),J(tn,`RPC '${e}' stream ${i} sending:`,F),p.send(F))},Yo:()=>p.close()}),k=(F,B,oe)=>{F.listen(B,fe=>{try{oe(fe)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return k(p,qa.EventType.OPEN,()=>{y||(J(tn,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),k(p,qa.EventType.CLOSE,()=>{y||(y=!0,J(tn,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),k(p,qa.EventType.ERROR,F=>{y||(y=!0,ao(tn,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),T.__(new Y(V.UNAVAILABLE,"The operation could not be completed")))}),k(p,qa.EventType.MESSAGE,F=>{var B;if(!y){let oe=F.data[0];Be(!!oe,16349);let fe=oe,Fe=fe?.error||((B=fe[0])===null||B===void 0?void 0:B.error);if(Fe){J(tn,`RPC '${e}' stream ${i} received error:`,Fe);let Lt=Fe.status,$e=(function(I){let S=Et[I];if(S!==void 0)return GO(S)})(Lt),A=Fe.message;$e===void 0&&($e=V.INTERNAL,A="Unknown error status: "+Lt+" with message "+Fe.message),y=!0,T.__(new Y($e,A)),p.close()}else J(tn,`RPC '${e}' stream ${i} received:`,oe),T.a_(oe)}}),k(a,iC.STAT_EVENT,F=>{F.stat===og.PROXY?J(tn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===og.NOPROXY&&J(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function lC(){return typeof document<"u"?document:null}function Zg(n){return new $C(n,!0)}var Rg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Bx="PersistentStream",Pg=class{constructor(e,t,r,i,o,s,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Rg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Y(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(Bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(J(Bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bw=class extends Pg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=B8(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?qr(s.readTime):Ce.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=GC(this.serializer),t.addTarget=(function(o,s){let a,l=s.target;if(a=xC(l)?{documents:q8(o,l)}:{query:W8(o,l).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KO(o,s.resumeToken);let u=HC(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Ig(o,s.snapshotVersion.toTimestamp());let u=HC(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=K8(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=GC(this.serializer),t.removeTarget=e,this.k_(t)}},Iw=class extends Pg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=H8(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=GC(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>$8(this.serializer,r))};this.k_(t)}};var Tw=class{},Dw=class extends Tw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qC(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(V.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,qC(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(V.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Sw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ei(t),this._a=!1):J("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ss="RemoteStore",Aw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ms(this)&&(J(Ss,"Restarting streams for network reachability change."),await(async function(l){let u=ve(l);u.Ia.add(4),await Wu(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Jg(u)})(this))})}),this.Aa=new Sw(r,i)}};async function Jg(n){if(Ms(n))for(let e of n.da)await e(!0)}async function Wu(n){for(let e of n.da)await e(!1)}function iN(n,e){let t=ve(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),db(t)?ub(t):gc(t).x_()&&lb(t,e))}function cb(n,e){let t=ve(n),r=gc(t);t.Ta.delete(e),r.x_()&&oN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ms(t)&&t.Aa.set("Unknown"))}function lb(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).H_(e)}function oN(n,e){n.Ra.$e(e),gc(n).Y_(e)}function ub(n){n.Ra=new BC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.Aa.aa()}function db(n){return Ms(n)&&!gc(n).M_()&&n.Ta.size>0}function Ms(n){return ve(n).Ia.size===0}function sN(n){n.Ra=void 0}async function dq(n){n.Aa.set("Online")}async function hq(n){n.Ta.forEach((e,t)=>{lb(n,e)})}async function fq(n,e){sN(n),db(n)?(n.Aa.la(e),ub(n)):n.Aa.set("Unknown")}async function pq(n,e,t){if(n.Aa.set("Online"),e instanceof wg&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){J(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xg(n,r)}else if(e instanceof Za?n.Ra.Ye(e):e instanceof Cg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ce.min()))try{let r=await rN(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let h=o.Ta.get(l);if(!h)return;o.Ta.set(l,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),oN(o,l);let p=new Uu(h.target,l,u,h.sequenceNumber);lb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){J(Ss,"Failed to raise snapshot:",r),await xg(n,r)}}async function xg(n,e,t){if(!pc(e))throw e;n.Ia.add(1),await Wu(n),n.Aa.set("Offline"),t||(t=()=>rN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{J(Ss,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Jg(n)})}function aN(n,e){return e().catch(t=>xg(n,t,e))}async function Xg(n){let e=ve(n),t=lo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Zw;for(;gq(e);)try{let i=await aq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,mq(e,i)}catch(i){await xg(e,i)}cN(e)&&lN(e)}function gq(n){return Ms(n)&&n.Pa.length<10}function mq(n,e){n.Pa.push(e);let t=lo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function cN(n){return Ms(n)&&!lo(n).M_()&&n.Pa.length>0}function lN(n){lo(n).start()}async function _q(n){lo(n).na()}async function vq(n){let e=lo(n);for(let t of n.Pa)e.X_(t.mutations)}async function yq(n,e,t){let r=n.Pa.shift(),i=VC.from(r,e,t);await aN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Xg(n)}async function Eq(n,e){e&&lo(n).Z_&&await(async function(r,i){if((function(s){return k8(s)&&s!==V.ABORTED})(i.code)){let o=r.Pa.shift();lo(r).N_(),await aN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Xg(r)}})(n,e),cN(n)&&lN(n)}async function $x(n,e){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),J(Ss,"RemoteStore received new credentials");let r=Ms(t);t.Ia.add(3),await Wu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Jg(t)}async function Cq(n,e){let t=ve(n);e?(t.Ia.delete(2),await Jg(t)):e||(t.Ia.add(2),await Wu(t),t.Aa.set("Unknown"))}function gc(n){return n.Va||(n.Va=(function(t,r,i){let o=ve(t);return o.ia(),new bw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:dq.bind(null,n),e_:hq.bind(null,n),n_:fq.bind(null,n),J_:pq.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),db(n)?ub(n):n.Aa.set("Unknown")):(await n.Va.stop(),sN(n))})),n.Va}function lo(n){return n.ma||(n.ma=(function(t,r,i){let o=ve(t);return o.ia(),new Iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:_q.bind(null,n),n_:Eq.bind(null,n),ea:vq.bind(null,n),ta:yq.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Xg(n)):(await n.ma.stop(),n.Pa.length>0&&(J(Ss,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var Mw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hb(n,e){if(Ei("AsyncQueue",`${e}: ${n}`),pc(n))return new Y(V.UNAVAILABLE,`${e}: ${n}`);throw n}var Og=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=Su(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ng=class{constructor(){this.fa=new at(ae.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):de(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},lc=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Og.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Rw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Pw=class{constructor(){this.queries=Hx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ve(t),o=i.queries;i.queries=Hx(),o.forEach((s,a)=>{for(let l of a.wa)l.onError(r)})})(this,new Y(V.ABORTED,"Firestore shutting down"))}};function Hx(){return new bi(n=>kO(n),Yg)}async function uN(n,e){let t=ve(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Rw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=hb(s,`Initialization of query '${Ga(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&fb(t)}async function dN(n,e){let t=ve(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wq(n,e){let t=ve(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&fb(t)}function bq(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function fb(n){n.Da.forEach(e=>{e.next()})}var xw,qx;(qx=xw||(xw={})).Fa="default",qx.Cache="cache";var kg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xw.Cache}};var Fg=class{constructor(e){this.key=e}},Lg=class{constructor(e){this.key=e}},Ow=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Me(),this.mutatedKeys=Me(),this.Xa=FO(e),this.eu=new Og(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Ng,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let _=i.get(h),y=Qg(this.query,p)?p:null,T=!!_&&this.mutatedKeys.has(_.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),F=!1;_&&y?_.data.isEqual(y.data)?T!==k&&(r.track({type:3,doc:y}),F=!0):this.iu(_,y)||(r.track({type:2,doc:y}),F=!0,(l&&this.Xa(y,l)>0||u&&this.Xa(y,u)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),F=!0):_&&!y&&(r.track({type:1,doc:_}),F=!0,(l||u)&&(a=!0)),F&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,T){let k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{At:F})}};return k(y)-k(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,s.length!==0||u?{snapshot:new lc(this.query,e.eu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ng,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Lg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Fg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Me();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return lc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},pb="SyncEngine",Nw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},kw=class{constructor(e){this.key=e,this.lu=!1}},Fw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new bi(a=>kO(a),Yg),this.Tu=new Map,this.Iu=new Set,this.du=new at(ae.comparator),this.Eu=new Map,this.Au=new zu,this.Ru={},this.Vu=new Map,this.mu=ju.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Iq(n,e,t=!0){let r=_N(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await hN(r,e,t,!0),i}async function Tq(n,e){let t=_N(n);await hN(t,e,!0,!1)}async function hN(n,e,t,r){let i=await cq(n.localStore,$r(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await Dq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&iN(n.remoteStore,i),a}async function Dq(n,e,t,r,i){n.gu=(p,_,y)=>(async function(k,F,B,oe){let fe=F.view.nu(B);fe.Ds&&(fe=await jx(k.localStore,F.query,!1).then(({documents:A})=>F.view.nu(A,fe)));let Fe=oe&&oe.targetChanges.get(F.targetId),Lt=oe&&oe.targetMismatches.get(F.targetId)!=null,$e=F.view.applyChanges(fe,k.isPrimaryClient,Fe,Lt);return Gx(k,F.targetId,$e._u),$e.snapshot})(n,p,_,y);let o=await jx(n.localStore,e,!0),s=new Ow(e,o.qs),a=s.nu(o.documents),l=Vu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);Gx(n,t,u._u);let h=new Nw(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function Sq(n,e,t){let r=ve(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Yg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cb(r.remoteStore,i.targetId),Lw(r,i.targetId)}).catch(fc)):(Lw(r,i.targetId),await mw(r.localStore,i.targetId,!0))}async function Aq(n,e){let t=ve(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cb(t.remoteStore,r.targetId))}async function Mq(n,e,t){let r=Fq(n);try{let i=await(function(s,a){let l=ve(s),u=It.now(),h=a.reduce((y,T)=>y.add(T.key),Me()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Ii(),k=Me();return l.Os.getEntries(y,h).next(F=>{T=F,T.forEach((B,oe)=>{oe.isValidDocument()||(k=k.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,T)).next(F=>{p=F;let B=[];for(let oe of a){let fe=N8(oe,p.get(oe.key).overlayedDocument);fe!=null&&B.push(new Gr(oe.key,fe,AO(fe.value.mapValue),Hr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,B,a)}).next(F=>{_=F;let B=F.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(y,F.batchId,B)})}).then(()=>({batchId:_.batchId,changes:VO(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,l){let u=s.Ru[s.currentUser.toKey()];u||(u=new at(De)),u=u.insert(a,l),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),await Gu(r,i.changes),await Xg(r.remoteStore)}catch(i){let o=hb(i,"Failed to persist write");t.reject(o)}}async function fN(n,e){let t=ve(n);try{let r=await oq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Be(s.lu,14607):i.removedDocuments.size>0&&(Be(s.lu,42227),s.lu=!1))}),await Gu(t,r,e)}catch(r){await fc(r)}}function Wx(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let l=ve(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let _ of p.wa)_.va(a)&&(u=!0)}),u&&fb(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Rq(n,e,t){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new at(ae.comparator);s=s.insert(o,_r.newNoDocument(o,Ce.min()));let a=Me().add(o),l=new Eg(Ce.min(),new Map,new at(De),s,a);await fN(r,l),r.du=r.du.remove(o),r.Eu.delete(e),gb(r)}else await mw(r.localStore,e,!1).then(()=>Lw(r,e,t)).catch(fc)}async function Pq(n,e){let t=ve(n),r=e.batch.batchId;try{let i=await iq(t.localStore,e);gN(t,r,null),pN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gu(t,i)}catch(i){await fc(i)}}async function xq(n,e,t){let r=ve(n);try{let i=await(function(s,a){let l=ve(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Be(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})})(r.localStore,e);gN(r,e,t),pN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gu(r,i)}catch(i){await fc(i)}}function pN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function gN(n,e,t){let r=ve(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Lw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||mN(n,r)})}function mN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(cb(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),gb(n))}function Gx(n,e,t){for(let r of t)r instanceof Fg?(n.Au.addReference(r.key,e),Oq(n,r)):r instanceof Lg?(J(pb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||mN(n,r.key)):de(19791,{yu:r})}function Oq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(J(pb,"New document in limbo: "+t),n.Iu.add(r),gb(n))}function gb(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ae(nt.fromString(e)),r=n.mu.next();n.Eu.set(r,new kw(t)),n.du=n.du.insert(t,r),iN(n.remoteStore,new Uu($r(ib(t.path)),r,"TargetPurposeLimboResolution",Qw.ue))}}async function Gu(n,e,t){let r=ve(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{s.push(r.gu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=hw.Es(l.targetId,u);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(l,u){let h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(u,_=>z.forEach(_.Is,y=>h.persistence.referenceDelegate.addReference(p,_.targetId,y)).next(()=>z.forEach(_.ds,y=>h.persistence.referenceDelegate.removeReference(p,_.targetId,y)))))}catch(p){if(!pc(p))throw p;J(ab,"Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let y=h.Fs.get(_),T=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(_,k)}}})(r.localStore,o))}async function Nq(n,e){let t=ve(n);if(!t.currentUser.isEqual(e)){J(pb,"User change. New user:",e.toKey());let r=await nN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(l=>{l.reject(new Y(V.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gu(t,r.Bs)}}function kq(n,e){let t=ve(n),r=t.Eu.get(e);if(r&&r.lu)return Me().add(r.key);{let i=Me(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function _N(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rq.bind(null,e),e.hu.J_=wq.bind(null,e.eventManager),e.hu.pu=bq.bind(null,e.eventManager),e}function Fq(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xq.bind(null,e),e}var vN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return rq(this.persistence,new pw,t.initialUser,this.serializer)}Du(t){return new Dg(dw.Vi,this.serializer)}bu(t){return new _w}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Vw=class extends vN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof Sg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new JC(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?er.withCacheSize(this.cacheSizeBytes):er.DEFAULT;return new Dg(r=>Sg.Vi(r,t),this.serializer)}};var Lq=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Wx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nq.bind(null,this.syncEngine),await Cq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Pw})()}createDatastore(t){let r=Zg(t.databaseInfo.databaseId),i=(function(s){return new ww(s)})(t.databaseInfo);return(function(s,a,l,u){return new Dw(s,a,l,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,l){return new Aw(i,o,s,a,l)})(this.localStore,this.datastore,t.asyncQueue,r=>Wx(this.syncEngine,r,0),(function(){return Mg.C()?new Mg:new vw})())}createSyncEngine(t,r){return(function(o,s,a,l,u,h,p){let _=new Fw(o,s,a,l,u,h);return p&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=ve(o);J(Ss,"RemoteStore shutting down."),s.Ia.add(5),await Wu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Vg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var uo="FirestoreClient",Uw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{J(uo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J(uo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=hb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function uC(n,e){n.asyncQueue.verifyOperationInProgress(),J(uo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ao("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ao("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function Kx(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Vq(n);J(uo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$x(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$x(e.remoteStore,i)),n._onlineComponents=e}async function Vq(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(uo,"Using user provided OfflineComponentProvider");try{await uC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ao("Error using user provided cache. Falling back to memory cache: "+t),await uC(n,new vN)}}else J(uo,"Using default OfflineComponentProvider"),await uC(n,new Vw(void 0));return n._offlineComponents}async function yN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(uo,"Using user provided OnlineComponentProvider"),await Kx(n,n._uninitializedComponentsProvider._online)):(J(uo,"Using default OnlineComponentProvider"),await Kx(n,new Lq))),n._onlineComponents}function Uq(n){return yN(n).then(e=>e.syncEngine)}async function jw(n){let e=await yN(n),t=e.eventManager;return t.onListen=Iq.bind(null,e.syncEngine),t.onUnlisten=Sq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Tq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Aq.bind(null,e.syncEngine),t}function jq(n,e,t={}){let r=new zr;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,l,u){let h=new Vg({next:_=>{h.Ou(),s.enqueueAndForget(()=>dN(o,p)),_.fromCache&&l.source==="server"?u.reject(new Y(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new kg(a,h,{includeMetadataChanges:!0,ka:!0});return uN(o,p)})(await jw(n),n.asyncQueue,e,t,r)),r.promise}function EN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Yx=new Map;var CN="firestore.googleapis.com",Qx=!0,Ug=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CN,this.ssl=Qx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eq)throw new Y(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},uc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ug({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ug(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dC;switch(r.type){case"firstParty":return new gC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Yx.get(t);r&&(J("ComponentProvider","Removing Datastore"),Yx.delete(t),r.terminate())})(this),Promise.resolve()}};function wN(n,e,t,r={}){var i;n=nr(n,uc);let o=ss(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(mE(`https://${l}`),_E("Firestore",!0)),s.host!==CN&&s.host!==l&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!as(u,a)&&(n._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Nt.MOCK_USER;else{h=aP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Y(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nt(_)}n._authCredentials=new hC(new hg(h,p))}}var As=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qu(t,n._jsonSchema))return new n(e,r||null,new ae(nt.fromString(t.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:bt("string",Ft._jsonSchemaVersion),referencePath:bt("string")};var ro=class n extends As{constructor(e,t,r){super(e,t,ib(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function bN(n,e,...t){if(n=$t(n),iO("collection","path",e),n instanceof uc){let r=nt.fromString(e,...t);return px(r),new ro(n,null,r)}{if(!(n instanceof Ft||n instanceof ro))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return px(r),new ro(n.firestore,null,r)}}function mb(n,e,...t){if(n=$t(n),arguments.length===1&&(e=xu.newId()),iO("doc","path",e),n instanceof uc){let r=nt.fromString(e,...t);return fx(r),new Ft(n,null,new ae(r))}{if(!(n instanceof Ft||n instanceof ro))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return fx(r),new Ft(n.firestore,n instanceof ro?n.converter:null,new ae(r))}}var Zx="AsyncQueue",jg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Rg(this,"async_queue_retry"),this.oc=()=>{let r=lC();r&&J(Zx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=lC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=lC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new zr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;J(Zx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ei("INTERNAL UNHANDLED ERROR: ",Jx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Mw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&de(47125,{hc:Jx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Jx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Xx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Kr=class extends uc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jg(e),this._firestoreClient=void 0,await e}}};function IN(n,e){let t=typeof n=="object"?n:Ba(),r=typeof n=="string"?n:e||_g,i=jp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=oP("firestore");o&&wN(i,...o)}return i}function _b(n){if(n._terminated)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zq(n),n._firestoreClient}function zq(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,l,u,h){return new EC(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,EN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Uw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}var io=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nn.fromBase64String(e))}catch(t){throw new Y(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};io._jsonSchemaVersion="firestore/bytes/1.0",io._jsonSchema={type:bt("string",io._jsonSchemaVersion),bytes:bt("string")};var dc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bu=class{constructor(e){this._methodName=e}};var oo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(qu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};oo._jsonSchemaVersion="firestore/geoPoint/1.0",oo._jsonSchema={type:bt("string",oo._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};var so=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Y(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};so._jsonSchemaVersion="firestore/vectorValue/1.0",so._jsonSchema={type:bt("string",so._jsonSchemaVersion),vectorValues:bt("object")};var Bq=/^__.*__$/,zw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ds(e,this.data,t,this.fieldTransforms)}},zg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function TN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ec:n})}}var Bw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $g(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(TN(this.Ec)&&Bq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},$w=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zg(e)}Dc(e,t,r,i=!1){return new Bw({Ec:e,methodName:t,bc:r,path:$n.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function em(n){let e=n._freezeSettings(),t=Zg(n._databaseId);return new $w(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DN(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);vb("Data must be an object, but it was:",s,r);let a=SN(r,s),l,u;if(o.merge)l=new tr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let _=Hw(e,p,t);if(!s.contains(_))throw new Y(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);MN(h,_)||h.push(_)}l=new tr(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new zw(new Bn(a),l,u)}var Bg=class n extends Bu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function $q(n,e,t,r){let i=n.Dc(1,e,t);vb("Data must be an object, but it was:",i,r);let o=[],s=Bn.empty();ho(r,(l,u)=>{let h=yb(e,l,t);u=$t(u);let p=i.gc(h);if(u instanceof Bg)o.push(h);else{let _=Ku(u,p);_!=null&&(o.push(h),s.set(h,_))}});let a=new tr(o);return new zg(s,a,i.fieldTransforms)}function Hq(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Hw(e,r,t)],l=[i];if(o.length%2!=0)throw new Y(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(Hw(e,o[_])),l.push(o[_+1]);let u=[],h=Bn.empty();for(let _=a.length-1;_>=0;--_)if(!MN(u,a[_])){let y=a[_],T=l[_];T=$t(T);let k=s.gc(y);if(T instanceof Bg)u.push(y);else{let F=Ku(T,k);F!=null&&(u.push(y),h.set(y,F))}}let p=new tr(u);return new zg(h,p,s.fieldTransforms)}function qq(n,e,t,r=!1){return Ku(t,n.Dc(r?4:3,e))}function Ku(n,e){if(AN(n=$t(n)))return vb("Unsupported field value:",e,n),SN(n,e);if(n instanceof Bu)return(function(r,i){if(!TN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let l=Ku(a,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=It.fromDate(r);return{timestampValue:Ig(i.serializer,o)}}if(r instanceof It){let o=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ig(i.serializer,o)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:KO(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof so)return(function(s,a){return{mapValue:{fields:{[Xw]:{stringValue:eb},[ec]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return ob(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Wg(r)}`)})(n,e)}function SN(n,e){let t={};return EO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,(r,i)=>{let o=Ku(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function AN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof oo||n instanceof io||n instanceof Ft||n instanceof Bu||n instanceof so)}function vb(n,e,t){if(!AN(t)||!oO(t)){let r=Wg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Hw(n,e,t){if((e=$t(e))instanceof dc)return e._internalPath;if(typeof e=="string")return yb(n,e);throw $g("Field path arguments must be of type string or ",n,!1,void 0,t)}var Wq=new RegExp("[~\\*/\\[\\]]");function yb(n,e,t){if(e.search(Wq)>=0)throw $g(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw $g(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $g(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Y(V.INVALID_ARGUMENT,a+n+l)}function MN(n,e){return n.some(t=>t.isEqual(e))}var Hg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Eb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qw=class extends Hg{data(){return super.data()}};function Eb(n,e){return typeof e=="string"?yb(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function RN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $u=class{},Ww=class extends $u{};function PN(n,e,...t){let r=[];e instanceof $u&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(l=>l instanceof Gw).length,a=o.filter(l=>l instanceof qg).length;if(s>1||s>0&&a>0)throw new Y(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var qg=class n extends Ww{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ON(e._query,t),new As(e.firestore,e.converter,OC(e._query,t))}_parse(e){let t=em(e.firestore);return(function(o,s,a,l,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tO(p,h);let T=[];for(let k of p)T.push(eO(l,o,k));_={arrayValue:{values:T}}}else _=eO(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tO(p,h),_=qq(a,s,p,h==="in"||h==="not-in");return wt.create(u,h,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function xN(n,e,t){let r=e,i=Eb("where",n);return qg._create(i,r,t)}var Gw=class n extends $u{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:vr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)ON(s,l),s=OC(s,l)})(e._query,t),new As(e.firestore,e.converter,OC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function eO(n,e,t){if(typeof(t=$t(t))=="string"){if(t==="")throw new Y(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NO(e)&&t.indexOf("/")!==-1)throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(nt.fromString(t));if(!ae.isDocumentKey(r))throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cx(n,new ae(r))}if(t instanceof Ft)return Cx(n,t._key);throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wg(t)}.`)}function tO(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ON(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Kw=class{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ho(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ec].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new so(o)}convertGeoPoint(e){return new oo(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){let t=Ci(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=nt.fromString(e);Be(eN(r),9688,{name:e});let i=new vg(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(t)||Ei(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function NN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var vs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ys=class n extends Hg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Eb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:bt("string",ys._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};var Ja=class extends ys{data(e={}){return super.data(e)}},Es=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ja(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Gq(a.type),doc:l,oldIndex:u,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Gq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:n})}}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:bt("string",Es._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};var Hu=class extends Kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}};function kN(n){n=nr(n,As);let e=nr(n.firestore,Kr),t=_b(e),r=new Hu(e);return RN(n._query),jq(t,n._query).then(i=>new Es(e,r,n,i))}function FN(n,e,t){n=nr(n,Ft);let r=nr(n.firestore,Kr),i=NN(n.converter,e,t);return tm(r,[DN(em(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Hr.none())])}function LN(n,e,t,...r){n=nr(n,Ft);let i=nr(n.firestore,Kr),o=em(i),s;return s=typeof(e=$t(e))=="string"||e instanceof dc?Hq(o,"updateDoc",n._key,e,t,r):$q(o,"updateDoc",n._key,e),tm(i,[s.toMutation(n._key,Hr.exists(!0))])}function VN(n){return tm(nr(n.firestore,Kr),[new Lu(n._key,Hr.none())])}function UN(n,e){let t=nr(n.firestore,Kr),r=mb(n),i=NN(n.converter,e);return tm(t,[DN(em(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Hr.exists(!1))]).then(()=>r)}function Cb(n,...e){var t,r,i;n=$t(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Xx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,h;if(n instanceof Ft)u=nr(n.firestore,Kr),h=ib(n._key.path),l={next:p=>{e[s]&&e[s](Kq(u,n,p))},error:e[s+1],complete:e[s+2]};else{let p=nr(n,As);u=nr(p.firestore,Kr),h=p._query;let _=new Hu(u);l={next:y=>{e[s]&&e[s](new Es(u,_,p,y))},error:e[s+1],complete:e[s+2]},RN(n._query)}return(function(_,y,T,k){let F=new Vg(k),B=new kg(y,F,T);return _.asyncQueue.enqueueAndForget(async()=>uN(await jw(_),B)),()=>{F.Ou(),_.asyncQueue.enqueueAndForget(async()=>dN(await jw(_),B))}})(_b(u),h,a,l)}function tm(n,e){return(function(r,i){let o=new zr;return r.asyncQueue.enqueueAndForget(async()=>Mq(await Uq(r),i,o)),o.promise})(_b(n),e)}function Kq(n,e,t){let r=t.docs.get(e._key),i=new Hu(n);return new ys(n,i,e._key,r,new vs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hc=i})(za),gr(new fn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Kr(new fC(r.getProvider("auth-internal")),new mC(s,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vg(u.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ft(lx,ux,e),ft(lx,ux,"esm2017")})();var nm=function(){return nm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},nm.apply(this,arguments)};var Zq={includeMetadataChanges:!1};function wb(n,e){return e===void 0&&(e=Zq),new he(function(t){var r=Cb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function jN(n){return wb(n,{includeMetadataChanges:!0})}function zN(n,e){return e===void 0&&(e={}),jN(n).pipe(ne(function(t){return bb(t,e)}))}function bb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:nm(nm({},r),(t={},t[e.idField]=n.id,t))}function BN(n){return wb(n,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function $N(n,e){return e===void 0&&(e={}),BN(n).pipe(ne(function(t){return t.map(function(r){return bb(r,e)})}))}var Ti=class{constructor(e){return e}},HN="firestore",Ib=class{constructor(){return Ha(HN)}};var Tb=new W("angularfire2.firestore-instances");function Jq(n,e){let t=$p(HN,n,e);return t&&new Ti(t)}function Xq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ti(r)}}var eW={provide:Ib,deps:[[new Mr,Tb]]},tW={provide:Ti,useFactory:Jq,deps:[[new Mr,Tb],hs]};function qN(n,...e){return ft("angularfire",us.full,"fst"),At([tW,eW,{provide:Tb,useFactory:Xq(n),multi:!0,deps:[Ne,st,ds,yu,[new Mr,rg],[new Mr,qp],...e]}])}var rm=Ht($N,!0);var im=Ht(zN,!0);var WN=Ht(UN,!0,2);var om=Ht(bN,!0,2);var sm=Ht(VN,!0,2);var Di=Ht(mb,!0,2);var mc=Ht(kN,!0);var GN=Ht(IN,!0);var Yu=Ht(PN,!0,2);var KN=Ht(FN,!0,2);var am=Ht(LN,!0,2);var Qu=Ht(xN,!0,2);var Yr=class n{firestore=P(Ti);usersCollection=om(this.firestore,"utenti");getAll(){return rm(this.usersCollection,{idField:"id"})}getById(e){let t=Di(this.firestore,`utenti/${e}`);return im(t,{idField:"id"})}getByCodiceFiscale(e){let t=Yu(this.usersCollection,Qu("codiceFiscale","==",e.toUpperCase()));return Re(mc(t)).pipe(ne(r=>{if(r.empty)return null;let i=r.docs[0],o=i.data();return te(L({id:i.id},o),{dataDiNascita:o.dataDiNascita?o.dataDiNascita.toDate():null})}))}create(e){let t=te(L({},e),{codiceFiscale:e.codiceFiscale.toUpperCase()});return Re(WN(this.usersCollection,t)).pipe(ne(r=>r.id))}update(e,t){let r=Di(this.firestore,`utenti/${e}`),i=t.codiceFiscale?te(L({},t),{codiceFiscale:t.codiceFiscale.toUpperCase()}):t;return Re(am(r,i))}delete(e){let t=Di(this.firestore,`utenti/${e}`);return Re(sm(t))}checkCodiceFiscaleExists(e){return this.getByCodiceFiscale(e).pipe(ne(t=>t!==null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var En=class n{userService=P(Yr);router=P(xt);platformId=P(li);currentUserSignal=re(null);currentUser=this.currentUserSignal.asReadonly();STORAGE_KEY="currentUser";isBrowser;constructor(){this.isBrowser=b1(this.platformId),this.isBrowser&&this.loadUserFromStorage()}login(e,t,r){return this.userService.getByCodiceFiscale(r).pipe(ne(i=>i?i.nome.toLowerCase()!==e.toLowerCase()||i.cognome.toLowerCase()!==t.toLowerCase()?{success:!1,message:"Nome o cognome non corrispondono al codice fiscale."}:(this.setCurrentUser(i),{success:!0,user:i}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),mn(i=>(console.error("Errore durante il login:",i),se({success:!1,message:"Errore durante il login. Riprova."}))))}loginByCodiceFiscale(e){return this.userService.getByCodiceFiscale(e).pipe(ne(t=>t?(this.setCurrentUser(t),{success:!0,user:t}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),mn(t=>(console.error("Errore durante il login:",t),se({success:!1,message:"Errore durante il login. Riprova."}))))}register(e){return this.userService.checkCodiceFiscaleExists(e.codiceFiscale).pipe(ne(t=>{if(t)throw new Error("Codice fiscale gi\xE0 registrato. Usa il login per accedere.");return t}),ct(()=>{}),ne(()=>(this.userService.create(e).subscribe({next:t=>{let r=te(L({},e),{id:t});this.setCurrentUser(r)},error:t=>{console.error("Errore durante la registrazione:",t)}}),{success:!0})),mn(t=>(console.error("Errore durante la registrazione:",t),se({success:!1,message:t.message||"Errore durante la registrazione. Riprova."}))))}logout(){this.currentUserSignal.set(null),this.isBrowser&&localStorage.removeItem(this.STORAGE_KEY),this.router.navigate(["/login"])}isAuthenticated(){return this.currentUserSignal()!==null}setCurrentUser(e){this.currentUserSignal.set(e),this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadUserFromStorage(){if(!this.isBrowser)return;let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let t=JSON.parse(e);this.currentUserSignal.set(t)}catch(t){console.error("Errore nel parsing dell'utente salvato:",t),localStorage.removeItem(this.STORAGE_KEY)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};function nW(n,e){if(n&1){let t=le();g(0,"div",8),N(1,"i",12),E(2),g(3,"button",13),q("click",function(){U(t);let i=D();return j(i.successMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.successMessage()," ")}}function rW(n,e){if(n&1){let t=le();g(0,"div",9),N(1,"i",14),E(2),g(3,"button",13),q("click",function(){U(t);let i=D();return j(i.errorMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.errorMessage()," ")}}function iW(n,e){if(n&1){let t=le();g(0,"input",37),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.editData().nome,i)||(o.editData().nome=i),j(i)}),m()}if(n&2){let t=D(2);Q("ngModel",t.editData().nome)}}function oW(n,e){if(n&1&&(g(0,"div",28),E(1),m()),n&2){let t=D();C(),ke(t.nome)}}function sW(n,e){if(n&1){let t=le();g(0,"input",38),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.editData().cognome,i)||(o.editData().cognome=i),j(i)}),m()}if(n&2){let t=D(2);Q("ngModel",t.editData().cognome)}}function aW(n,e){if(n&1&&(g(0,"div",28),E(1),m()),n&2){let t=D();C(),ke(t.cognome)}}function cW(n,e){if(n&1){let t=le();g(0,"input",39),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.editData().email,i)||(o.editData().email=i),j(i)}),m()}if(n&2){let t=D(2);Q("ngModel",t.editData().email)}}function lW(n,e){if(n&1&&(g(0,"div",28),E(1),m()),n&2){let t=D();C(),ke(t.email||"Non impostato")}}function uW(n,e){if(n&1){let t=le();g(0,"input",40),q("change",function(i){U(t);let o=D(2);return j(o.onDateChange(i))}),m()}if(n&2){let t=D(2);we("value",t.getDateInputValue(t.editData().dataDiNascita??null))}}function dW(n,e){if(n&1&&(g(0,"div",28),E(1),m()),n&2){let t=D(),r=D();C(),ke(r.formatDate(t.dataDiNascita))}}function hW(n,e){if(n&1){let t=le();g(0,"input",41),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.editData().annoConseguimentoPatente,i)||(o.editData().annoConseguimentoPatente=i),j(i)}),m()}if(n&2){let t=D(2);Q("ngModel",t.editData().annoConseguimentoPatente),we("min",1950)("max",t.currentYear)}}function fW(n,e){if(n&1&&(g(0,"div",28),E(1),m()),n&2){let t=D();C(),ke(t.annoConseguimentoPatente||"Non impostato")}}function pW(n,e){n&1&&(N(0,"span",43),g(1,"span"),E(2,"Salvataggio..."),m())}function gW(n,e){n&1&&(N(0,"i",44),g(1,"span"),E(2,"Salva Modifiche"),m())}function mW(n,e){if(n&1&&(g(0,"div",36)(1,"button",42),G(2,pW,3,0)(3,gW,3,0),m()()),n&2){let t=D(2);C(),we("disabled",t.isSaving()),C(),K(t.isSaving()?2:3)}}function _W(n,e){if(n&1){let t=le();g(0,"div",10)(1,"div",15)(2,"div",16),N(3,"i",17),m(),g(4,"div",18)(5,"h2"),E(6),m(),g(7,"p",19),N(8,"i",20),E(9),m()()(),g(10,"form",21),q("ngSubmit",function(){U(t);let i=D();return j(i.saveChanges())}),g(11,"div",22)(12,"div",23)(13,"div",24)(14,"label",25),N(15,"i",26),E(16,"Nome "),m(),G(17,iW,1,1,"input",27)(18,oW,2,1,"div",28),m()(),g(19,"div",23)(20,"div",24)(21,"label",25),N(22,"i",26),E(23,"Cognome "),m(),G(24,sW,1,1,"input",29)(25,aW,2,1,"div",28),m()(),g(26,"div",23)(27,"div",24)(28,"label",25),N(29,"i",30),E(30,"Email "),m(),G(31,cW,1,1,"input",31)(32,lW,2,1,"div",28),m()(),g(33,"div",23)(34,"div",24)(35,"label",25),N(36,"i",32),E(37,"Data di Nascita "),m(),G(38,uW,1,1,"input",33)(39,dW,2,1,"div",28),m()(),g(40,"div",23)(41,"div",24)(42,"label",25),N(43,"i",34),E(44,"Anno Conseguimento Patente "),m(),G(45,hW,1,3,"input",35)(46,fW,2,1,"div",28),m()()(),G(47,mW,4,2,"div",36),m()()}if(n&2){let t=e,r=D();C(6),Nr("",t.nome," ",t.cognome),C(3),ue(" ",t.codiceFiscale," "),C(8),K(r.isEditMode()?17:18),C(7),K(r.isEditMode()?24:25),C(7),K(r.isEditMode()?31:32),C(7),K(r.isEditMode()?38:39),C(7),K(r.isEditMode()?45:46),C(2),K(r.isEditMode()?47:-1)}}var cm=class n{authService=P(En);userService=P(Yr);currentUser=this.authService.currentUser;isEditMode=re(!1);isSaving=re(!1);successMessage=re(null);errorMessage=re(null);editData=re({});currentYear=new Date().getFullYear();ngOnInit(){let e=this.currentUser();e&&this.editData.set(L({},e))}toggleEditMode(){if(this.isEditMode()){let e=this.currentUser();e&&this.editData.set(L({},e))}this.isEditMode.update(e=>!e),this.clearMessages()}saveChanges(){let e=this.currentUser();if(!e)return;this.clearMessages(),this.isSaving.set(!0);let t=this.editData(),r={nome:t.nome?.toUpperCase(),cognome:t.cognome?.toUpperCase(),email:t.email||null,dataDiNascita:t.dataDiNascita||null,annoConseguimentoPatente:t.annoConseguimentoPatente||null};this.userService.update(e.id,r).subscribe({next:()=>{this.isSaving.set(!1),this.isEditMode.set(!1),this.successMessage.set("Dati aggiornati con successo!");let i=L(L({},e),r);this.authService.setCurrentUser(i),setTimeout(()=>this.successMessage.set(null),3e3)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio:",i)}})}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}formatDate(e){if(!e)return"Non impostato";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("it-IT")}catch{return"Non impostato"}}getDateInputValue(e){if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toISOString().split("T")[0]}catch{return""}}onDateChange(e){let r=e.target.value;this.editData.update(i=>te(L({},i),{dataDiNascita:r?new Date(r):null}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-homepage"]],decls:18,vars:23,consts:[[1,"homepage-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-person-circle","me-2"],[1,"page-subtitle"],[1,"btn","btn-edit-desktop",3,"click","disabled"],[1,"me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"profile-card"],[1,"btn","btn-edit-mobile",3,"click","disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"profile-header"],[1,"avatar"],[1,"bi","bi-person-fill"],[1,"user-info"],[1,"cf-badge"],[1,"bi","bi-credit-card","me-1"],[1,"profile-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"info-item"],[1,"info-label"],[1,"bi","bi-person-fill","me-2"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"info-value"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"bi","bi-envelope-fill","me-2"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","date","name","dataDiNascita",1,"form-control",3,"value"],[1,"bi","bi-card-heading","me-2"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModel","min","max"],[1,"action-buttons"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","dataDiNascita",1,"form-control",3,"change","value"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModelChange","ngModel","min","max"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(t,r){if(t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),N(5,"i",4),E(6," Profilo Utente "),m(),g(7,"p",5),E(8,"Visualizza e modifica i tuoi dati personali"),m()(),g(9,"button",6),q("click",function(){return r.toggleEditMode()}),N(10,"i",7),E(11),m()(),G(12,nW,4,1,"div",8),G(13,rW,4,1,"div",9),G(14,_W,48,9,"div",10),g(15,"button",11),q("click",function(){return r.toggleEditMode()}),N(16,"i",7),E(17),m()()()),t&2){let i;C(9),Te("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),we("disabled",r.isSaving()),C(),Te("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),C(),ue(" ",r.isEditMode()?"Annulla":"Modifica"," "),C(),K(r.successMessage()?12:-1),C(),K(r.errorMessage()?13:-1),C(),K((i=r.currentUser())?14:-1,i),C(),Te("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),we("disabled",r.isSaving()),C(),Te("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),C(),ue(" ",r.isEditMode()?"Annulla":"Modifica"," ")}},dependencies:[en,Ua,Ot,jn,Xt,Va,rs,gi,fu,Bt,ns,Ge],styles:[".homepage-container[_ngcontent-%COMP%]{padding:2rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;display:flex;align-items:center;gap:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #0003}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:#fff}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{display:inline-block;background:#fff3;padding:.375rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600;margin-top:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:2rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#1e293b;min-height:48px;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.homepage-container[_ngcontent-%COMP%]{padding:1rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;margin-top:1rem;border-radius:10px;padding:.875rem 1.5rem;font-weight:600;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{border-radius:15px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;text-align:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:70px;height:70px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .625rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.8rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%], .homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:1rem}}"]})};var fo=class n{firestore=P(Ti);carsCollection=om(this.firestore,"auto");getAll(){return rm(this.carsCollection,{idField:"targa"})}getByTarga(e){let t=Di(this.firestore,`auto/${e}`);return im(t,{idField:"targa"}).pipe(ne(r=>{if(r)return this.convertFirebaseTimestamps(r)}))}getByProprietario(e){let t=Yu(this.carsCollection,Qu("proprietario.id","==",e));return Re(mc(t)).pipe(ne(r=>r.docs.map(i=>{let o=i.data();return this.convertFirebaseTimestamps(te(L({},o),{targa:i.id}))})))}getByProprietarioOComproprietario(e){let t=Yu(this.carsCollection,Qu("proprietario.id","==",e));return Re(Promise.all([mc(t),mc(this.carsCollection)])).pipe(ne(([r,i])=>{let o=new Map;return r.docs.forEach(s=>{let a=s.data();o.set(s.id,this.convertFirebaseTimestamps(te(L({},a),{targa:s.id})))}),i.docs.forEach(s=>{if(!o.has(s.id)){let a=s.data();(a.coProprietari||[]).some(h=>h.id===e)&&o.set(s.id,this.convertFirebaseTimestamps(te(L({},a),{targa:s.id})))}}),Array.from(o.values())}))}create(e){let t=Di(this.firestore,`auto/${e.targa.toUpperCase()}`),r=te(L({},e),{targa:e.targa.toUpperCase()});return Re(KN(t,r))}update(e,t){let r=Di(this.firestore,`auto/${e.toUpperCase()}`);return Re(am(r,t))}delete(e){let t=Di(this.firestore,`auto/${e.toUpperCase()}`);return Re(sm(t))}checkTargaExists(e){return this.getByTarga(e).pipe(ne(t=>t!==void 0))}convertFirebaseTimestamps(e){return te(L({},e),{dataDiAcquisto:e.dataDiAcquisto?.toDate?e.dataDiAcquisto.toDate():e.dataDiAcquisto,dataDiVendita:e.dataDiVendita?.toDate?e.dataDiVendita.toDate():e.dataDiVendita,dataProssimaManutenzione:e.dataProssimaManutenzione?.toDate?e.dataProssimaManutenzione.toDate():e.dataProssimaManutenzione,dataProssimaRevisione:e.dataProssimaRevisione?.toDate?e.dataProssimaRevisione.toDate():e.dataProssimaRevisione,assicurazioni:e.assicurazioni?.map(t=>te(L({},t),{dataInizio:t.dataInizio?.toDate?t.dataInizio.toDate():t.dataInizio,dataFine:t.dataFine?.toDate?t.dataFine.toDate():t.dataFine}))||[],manutenzioni:e.manutenzioni?.map(t=>te(L({},t),{data:t.data?.toDate?t.data.toDate():t.data}))||[],revisioni:e.revisioni?.map(t=>te(L({},t),{data:t.data?.toDate?t.data.toDate():t.data}))||[]})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ee({token:n,factory:n.\u0275fac,providedIn:"root"})};var vW=n=>["/dettaglio-auto",n],yW=(n,e)=>e.targa;function EW(n,e){n&1&&(g(0,"div",6)(1,"div",10)(2,"span",11),E(3,"Caricamento..."),m()()())}function CW(n,e){if(n&1&&(g(0,"div",7),N(1,"i",12),E(2),m()),n&2){let t=D();C(2),ue(" ",t.error()," ")}}function wW(n,e){n&1&&(g(0,"div",8),N(1,"i",13),E(2," Non hai ancora registrato nessuna auto. "),g(3,"a",14),E(4,"Aggiungi la tua prima auto"),m()())}function bW(n,e){if(n&1&&(g(0,"tr")(1,"td")(2,"strong",19),E(3),m()(),g(4,"td"),E(5),m(),g(6,"td"),E(7),m(),g(8,"td"),E(9),m(),g(10,"td",16)(11,"span",20),E(12),m()(),g(13,"td",17),E(14),m(),g(15,"td",17),E(16),m(),g(17,"td",17),E(18),m(),g(19,"td",18)(20,"a",21),N(21,"i",22),g(22,"span",23),E(23,"Dettagli"),m()()()()),n&2){let t=e.$implicit,r=D(2);C(3),ke(t.targa),C(2),ke(t.marca),C(2),ke(t.modello),C(2),ke(t.anno),C(2),Te("bg-primary",r.getRuolo(t)==="Proprietario")("bg-secondary",r.getRuolo(t)==="Coproprietario"),C(),ue(" ",r.getRuolo(t)," "),C(2),ke(t.colore),C(2),ke(r.formatDate(t.dataDiAcquisto)),C(2),ke(r.formatPrice(t.prezzoDiAcquisto)),C(2),we("routerLink",t0(13,vW,t.targa))}}function IW(n,e){if(n&1&&(g(0,"div",9)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),E(5,"Targa"),m(),g(6,"th"),E(7,"Marca"),m(),g(8,"th"),E(9,"Modello"),m(),g(10,"th"),E(11,"Anno"),m(),g(12,"th",16),E(13,"Ruolo"),m(),g(14,"th",17),E(15,"Colore"),m(),g(16,"th",17),E(17,"Data Acquisto"),m(),g(18,"th",17),E(19,"Prezzo Acquisto"),m(),g(20,"th",18),E(21,"Azioni"),m()()(),g(22,"tbody"),On(23,bW,24,15,"tr",null,yW),m()()()),n&2){let t=D();C(23),Nn(t.auto())}}var lm=class n{carService=P(fo);authService=P(En);auto=re([]);loading=re(!0);error=re(null);ngOnInit(){this.loadAuto()}loadAuto(){let e=this.authService.currentUser();if(!e){this.error.set("Utente non autenticato"),this.loading.set(!1);return}this.carService.getByProprietarioOComproprietario(e.id).subscribe({next:t=>{this.auto.set(t),this.loading.set(!1)},error:t=>{console.error("Errore nel caricamento delle auto:",t),this.error.set("Errore nel caricamento delle auto"),this.loading.set(!1)}})}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}getRuolo(e){let t=this.authService.currentUser();return t?e.proprietario.id===t.id?"Proprietario":e.coProprietari?.some(i=>i.id===t.id)?"Coproprietario":"-":"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-elenco-auto"]],decls:11,vars:4,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-info"],[1,"table-responsive"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"bi","bi-info-circle","me-2"],["routerLink","/nuova-auto",1,"alert-link"],[1,"table","table-hover","align-middle"],[1,"d-none","d-md-table-cell"],[1,"d-none","d-lg-table-cell"],[1,"text-end"],[1,"text-uppercase"],[1,"badge"],["title","Visualizza dettagli",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"bi","bi-eye","me-1"],[1,"d-none","d-md-inline"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),N(5,"i",5),E(6," Le Mie Auto "),m()(),G(7,EW,4,0,"div",6),G(8,CW,3,1,"div",7),G(9,wW,5,0,"div",8),G(10,IW,25,0,"div",9),m()()()),t&2&&(C(7),K(r.loading()?7:-1),C(),K(r.error()?8:-1),C(),K(!r.loading()&&!r.error()&&r.auto().length===0?9:-1),C(),K(!r.loading()&&!r.error()&&r.auto().length>0?10:-1))},dependencies:[Ge,Vr],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem;overflow:hidden;border:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;font-weight:600;padding:1.5rem 1rem;background:transparent!important;color:#fff!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background-color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a;transform:translate(2px)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #dee2e6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}@media (max-width: 767px){.table[_ngcontent-%COMP%]{font-size:.875rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}"]})};function TW(n,e){if(n&1){let t=le();g(0,"div",6),N(1,"i",34),E(2),g(3,"button",35),q("click",function(){U(t);let i=D();return j(i.successMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.successMessage()," ")}}function DW(n,e){if(n&1){let t=le();g(0,"div",7),N(1,"i",36),E(2),g(3,"button",35),q("click",function(){U(t);let i=D();return j(i.errorMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.errorMessage()," ")}}function SW(n,e){n&1&&(N(0,"span",37),g(1,"span"),E(2,"Salvataggio..."),m())}function AW(n,e){n&1&&(N(0,"i",38),g(1,"span"),E(2,"Salva Auto"),m())}var um=class n{authService=P(En);carService=P(fo);router=P(xt);currentUser=this.authService.currentUser;isSaving=re(!1);successMessage=re(null);errorMessage=re(null);currentYear=new Date().getFullYear();targa="";marca="";modello="";anno=this.currentYear;colore="";prezzoDiAcquisto=0;dataDiAcquisto="";onSubmit(){this.clearMessages();let e=this.currentUser();if(!e){this.errorMessage.set("Utente non autenticato.");return}if(!this.targa.trim()||!this.marca.trim()||!this.modello.trim()||!this.dataDiAcquisto){this.errorMessage.set("Compila tutti i campi obbligatori.");return}if(this.targa.length<6||this.targa.length>10){this.errorMessage.set("La targa deve essere tra 6 e 10 caratteri.");return}this.isSaving.set(!0),this.carService.checkTargaExists(this.targa).subscribe({next:t=>{if(t){this.isSaving.set(!1),this.errorMessage.set("Targa gi\xE0 esistente.");return}let r={targa:this.targa.trim().toUpperCase(),marca:this.marca.trim().toUpperCase(),modello:this.modello.trim().toUpperCase(),anno:this.anno,colore:this.colore.trim().toUpperCase(),prezzoDiAcquisto:this.prezzoDiAcquisto,dataDiAcquisto:new Date(this.dataDiAcquisto),proprietario:e,coProprietari:[],assicurazioni:[],manutenzioni:[],revisioni:[]};this.carService.create(r).subscribe({next:()=>{this.isSaving.set(!1),this.successMessage.set("Auto aggiunta con successo!"),setTimeout(()=>{this.router.navigate(["/elenco-auto"])},1500)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio auto:",i)}})},error:t=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante la verifica. Riprova."),console.error("Errore verifica targa:",t)}})}resetForm(){this.targa="",this.marca="",this.modello="",this.anno=this.currentYear,this.colore="",this.prezzoDiAcquisto=0,this.dataDiAcquisto="",this.clearMessages()}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-nuova-auto"]],decls:67,vars:15,consts:[[1,"nuova-auto-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-plus-circle-fill","me-2"],[1,"page-subtitle"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"form-card"],[1,"card-header"],[1,"bi","bi-car-front-fill","me-2"],[1,"card-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"bi","bi-credit-card-2-front-fill","me-2"],["type","text","name","targa","placeholder","ES. AB123CD","maxlength","10","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-tag-fill","me-2"],["type","text","name","marca","placeholder","ES. FIAT","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-car-front","me-2"],["type","text","name","modello","placeholder","ES. PANDA","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","number","name","anno","required","",1,"form-control",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-palette-fill","me-2"],["type","text","name","colore","placeholder","ES. BIANCO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-currency-euro","me-2"],["type","number","name","prezzoDiAcquisto","placeholder","0","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-event-fill","me-2"],["type","date","name","dataDiAcquisto","required","",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise","me-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),N(5,"i",4),E(6," Nuova Auto "),m(),g(7,"p",5),E(8,"Inserisci i dati della tua auto"),m()()(),G(9,TW,4,1,"div",6),G(10,DW,4,1,"div",7),g(11,"div",8)(12,"div",9),N(13,"i",10),g(14,"span"),E(15,"Dati Auto"),m()(),g(16,"form",11),q("ngSubmit",function(){return r.onSubmit()}),g(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),N(21,"i",16),E(22,"Targa * "),m(),g(23,"input",17),Z("ngModelChange",function(o){return X(r.targa,o)||(r.targa=o),o}),m()()(),g(24,"div",13)(25,"div",14)(26,"label",15),N(27,"i",18),E(28,"Marca * "),m(),g(29,"input",19),Z("ngModelChange",function(o){return X(r.marca,o)||(r.marca=o),o}),m()()(),g(30,"div",13)(31,"div",14)(32,"label",15),N(33,"i",20),E(34,"Modello * "),m(),g(35,"input",21),Z("ngModelChange",function(o){return X(r.modello,o)||(r.modello=o),o}),m()()(),g(36,"div",13)(37,"div",14)(38,"label",15),N(39,"i",22),E(40,"Anno immatricolazione * "),m(),g(41,"input",23),Z("ngModelChange",function(o){return X(r.anno,o)||(r.anno=o),o}),m()()(),g(42,"div",13)(43,"div",14)(44,"label",15),N(45,"i",24),E(46,"Colore "),m(),g(47,"input",25),Z("ngModelChange",function(o){return X(r.colore,o)||(r.colore=o),o}),m()()(),g(48,"div",13)(49,"div",14)(50,"label",15),N(51,"i",26),E(52,"Prezzo di Acquisto "),m(),g(53,"input",27),Z("ngModelChange",function(o){return X(r.prezzoDiAcquisto,o)||(r.prezzoDiAcquisto=o),o}),m()()(),g(54,"div",13)(55,"div",14)(56,"label",15),N(57,"i",28),E(58,"Data di Acquisto * "),m(),g(59,"input",29),Z("ngModelChange",function(o){return X(r.dataDiAcquisto,o)||(r.dataDiAcquisto=o),o}),m()()()(),g(60,"div",30)(61,"button",31),q("click",function(){return r.resetForm()}),N(62,"i",32),E(63," Reset "),m(),g(64,"button",33),G(65,SW,3,0)(66,AW,3,0),m()()()()()()),t&2&&(C(9),K(r.successMessage()?9:-1),C(),K(r.errorMessage()?10:-1),C(13),Q("ngModel",r.targa),C(6),Q("ngModel",r.marca),C(6),Q("ngModel",r.modello),C(6),Q("ngModel",r.anno),we("min",1950)("max",r.currentYear),C(6),Q("ngModel",r.colore),C(6),Q("ngModel",r.prezzoDiAcquisto),C(6),Q("ngModel",r.dataDiAcquisto),we("max",r.currentYear+"-12-31"),C(2),we("disabled",r.isSaving()),C(3),we("disabled",r.isSaving()),C(),K(r.isSaving()?65:66))},dependencies:[en,Ua,Ot,jn,Xt,Va,rs,is,gi,fu,Bt,ns,Ge],styles:[".nuova-auto-container[_ngcontent-%COMP%]{padding:2rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.nuova-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;font-size:1.25rem;font-weight:600;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#cbd5e1;text-transform:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.nuova-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{border-radius:15px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;font-size:1.1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem 1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.8rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}}"]})};function MW(n,e){if(n&1){let t=le();g(0,"button",20),q("click",function(){U(t);let i=D(2);return j(i.toggleEditMode())}),N(1,"i",21),E(2," Modifica "),m()}}function RW(n,e){if(n&1){let t=le();g(0,"button",22),q("click",function(){U(t);let i=D(2);return j(i.saveChanges())}),N(1,"i",23),E(2," Salva "),m(),g(3,"button",24),q("click",function(){U(t);let i=D(2);return j(i.cancelEdit())}),N(4,"i",25),E(5," Annulla "),m()}}function PW(n,e){if(n&1){let t=le();g(0,"div",6)(1,"div",7),G(2,MW,3,0,"button",8)(3,RW,6,0),m(),g(4,"div",9)(5,"div",10)(6,"label",11),E(7,"Targa"),m(),N(8,"input",12),m(),g(9,"div",10)(10,"label",11),E(11,"Marca"),m(),g(12,"input",13),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.marca,i)||(o.car.marca=i),j(i)}),m()(),g(13,"div",10)(14,"label",11),E(15,"Modello"),m(),g(16,"input",13),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.modello,i)||(o.car.modello=i),j(i)}),m()(),g(17,"div",10)(18,"label",11),E(19,"Anno"),m(),g(20,"input",14),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.anno,i)||(o.car.anno=i),j(i)}),m()(),g(21,"div",10)(22,"label",11),E(23,"Colore"),m(),g(24,"input",13),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.colore,i)||(o.car.colore=i),j(i)}),m()(),g(25,"div",10)(26,"label",11),E(27,"Data di Acquisto"),m(),g(28,"input",15),Sf(29,"date"),q("ngModelChange",function(i){U(t);let o=D();return j(o.car.dataDiAcquisto=i)}),m()(),g(30,"div",10)(31,"label",11),E(32,"Prezzo di Acquisto"),m(),g(33,"input",14),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.prezzoDiAcquisto,i)||(o.car.prezzoDiAcquisto=i),j(i)}),m()(),g(34,"div",10)(35,"label",11),E(36,"Prezzo di Vendita"),m(),g(37,"input",14),Z("ngModelChange",function(i){U(t);let o=D();return X(o.car.prezzoDiVendita,i)||(o.car.prezzoDiVendita=i),j(i)}),m()(),g(38,"div",10)(39,"label",11),E(40,"Data di Vendita"),m(),g(41,"input",15),Sf(42,"date"),q("ngModelChange",function(i){U(t);let o=D();return j(o.car.dataDiVendita=i)}),m()()(),N(43,"hr",16),g(44,"h5",17),E(45,"Proprietario"),m(),g(46,"div",9)(47,"div",18)(48,"label",11),E(49,"Nome"),m(),N(50,"input",19),m(),g(51,"div",18)(52,"label",11),E(53,"Cognome"),m(),N(54,"input",19),m(),g(55,"div",18)(56,"label",11),E(57,"Codice Fiscale"),m(),N(58,"input",12),m()()()}if(n&2){let t=D();C(2),K(t.editMode()?3:2),C(6),we("value",t.car.targa),C(4),Q("ngModel",t.car.marca),we("disabled",!t.editMode()),C(4),Q("ngModel",t.car.modello),we("disabled",!t.editMode()),C(4),Q("ngModel",t.car.anno),we("disabled",!t.editMode()),C(4),Q("ngModel",t.car.colore),we("disabled",!t.editMode()),C(4),we("ngModel",Af(29,21,t.car.dataDiAcquisto,"yyyy-MM-dd"))("disabled",!t.editMode()),C(5),Q("ngModel",t.car.prezzoDiAcquisto),we("disabled",!t.editMode()),C(4),Q("ngModel",t.car.prezzoDiVendita),we("disabled",!t.editMode()),C(4),we("ngModel",Af(42,24,t.car.dataDiVendita,"yyyy-MM-dd"))("disabled",!t.editMode()),C(9),we("value",t.proprietario.nome),C(4),we("value",t.proprietario.cognome),C(4),we("value",t.proprietario.codiceFiscale)}}var dm=class n{car;proprietario;carUpdated=new Ve;anagraficaOpen=re(!1);editMode=re(!1);originalCar=null;toggleAnagrafica(){this.anagraficaOpen.set(!this.anagraficaOpen())}toggleEditMode(){this.editMode()||(this.originalCar=JSON.parse(JSON.stringify(this.car))),this.editMode.set(!this.editMode())}saveChanges(){this.carUpdated.emit(this.car),this.editMode.set(!1),this.originalCar=null}cancelEdit(){this.originalCar&&Object.assign(this.car,this.originalCar),this.editMode.set(!1),this.originalCar=null}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-anagrafica"]],inputs:{car:"car",proprietario:"proprietario"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-file-text-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","text","disabled","",1,"form-control","text-uppercase",3,"value"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel","disabled"],["type","number",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"my-4"],[1,"mb-3"],[1,"col-md-4","mb-3"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-success","me-2",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),q("click",function(){return r.toggleAnagrafica()}),g(2,"div",2),N(3,"i",3),g(4,"span",4),E(5,"Anagrafica Auto"),m()(),N(6,"i",5),m(),G(7,PW,59,27,"div",6),m()),t&2&&(C(6),Te("bi-chevron-up",r.anagraficaOpen())("bi-chevron-down",!r.anagraficaOpen()),C(),K(r.anagraficaOpen()?7:-1))},dependencies:[Ge,en,Ot,jn,Xt,Bt,E0],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.info-row[_ngcontent-%COMP%]{padding:.75rem 0;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var xW=(n,e)=>e.codiceFiscale;function OW(n,e){if(n&1){let t=le();g(0,"div",14)(1,"div",15)(2,"div")(3,"div",16),E(4),m(),g(5,"small",17),E(6),m()(),g(7,"button",18),q("click",function(){let i=U(t).$implicit,o=D(3);return j(o.removeCoproprietario(i.codiceFiscale))}),N(8,"i",19),m()()()}if(n&2){let t=e.$implicit;C(4),Nr("",t.nome," ",t.cognome),C(2),ue("CF: ",t.codiceFiscale)}}function NW(n,e){if(n&1&&(g(0,"h5",12),E(1,"Coproprietari attuali"),m(),g(2,"div",13),On(3,OW,9,3,"div",14,xW),m()),n&2){let t=D(2);C(3),Nn(t.car.coProprietari)}}function kW(n,e){n&1&&(g(0,"div",7),N(1,"i",20),E(2," Non ci sono coproprietari per questa auto. "),m())}function FW(n,e){if(n&1){let t=le();g(0,"div",11)(1,"h5",12),E(2,"Nuovo Coproprietario"),m(),g(3,"div",21)(4,"div",22)(5,"label",23),E(6,"Nome *"),m(),g(7,"input",24),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newCoproprietario.nome,i)||(o.newCoproprietario.nome=i),j(i)}),m()(),g(8,"div",22)(9,"label",23),E(10,"Cognome *"),m(),g(11,"input",24),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newCoproprietario.cognome,i)||(o.newCoproprietario.cognome=i),j(i)}),m()(),g(12,"div",22)(13,"label",23),E(14,"Codice Fiscale *"),m(),g(15,"input",25),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newCoproprietario.codiceFiscale,i)||(o.newCoproprietario.codiceFiscale=i),j(i)}),m()(),g(16,"div",26)(17,"button",27),q("click",function(){U(t);let i=D(2);return j(i.addCoproprietario())}),N(18,"i",28),E(19," Aggiungi "),m()()(),g(20,"small",29),N(21,"i",30),E(22," Se l'utente non esiste verr\xE0 creato automaticamente nel sistema. "),m()()}if(n&2){let t=D(2);C(7),Q("ngModel",t.newCoproprietario.nome),C(4),Q("ngModel",t.newCoproprietario.cognome),C(4),Q("ngModel",t.newCoproprietario.codiceFiscale)}}function LW(n,e){if(n&1){let t=le();g(0,"div",6),G(1,NW,5,0)(2,kW,3,0,"div",7),g(3,"div",8)(4,"button",9),q("click",function(){U(t);let i=D();return j(i.toggleNewCoproprietarioForm())}),N(5,"i",10),E(6),m()(),G(7,FW,23,3,"div",11),m()}if(n&2){let t=D();C(),K(t.car.coProprietari&&t.car.coProprietari.length>0?1:2),C(3),Te("btn-primary",!t.showNewCoproprietarioForm())("btn-secondary",t.showNewCoproprietarioForm()),C(),Te("bi-plus-circle",!t.showNewCoproprietarioForm())("bi-x-circle",t.showNewCoproprietarioForm()),C(),ue(" ",t.showNewCoproprietarioForm()?"Annulla":"Aggiungi Coproprietario"," "),C(),K(t.showNewCoproprietarioForm()?7:-1)}}var hm=class n{userService=P(Yr);car;carUpdated=new Ve;coproprietariOpen=re(!1);showNewCoproprietarioForm=re(!1);newCoproprietario={nome:"",cognome:"",codiceFiscale:""};ngOnInit(){}toggleCoproprietari(){this.coproprietariOpen.set(!this.coproprietariOpen())}toggleNewCoproprietarioForm(){this.showNewCoproprietarioForm.set(!this.showNewCoproprietarioForm()),this.showNewCoproprietarioForm()||this.resetCoproprietarioForm()}async addCoproprietario(){let e=this.newCoproprietario.codiceFiscale.trim().toUpperCase(),t=this.newCoproprietario.nome.trim().toUpperCase(),r=this.newCoproprietario.cognome.trim().toUpperCase();if(!e||!t||!r){alert("Compila tutti i campi");return}if(this.car.proprietario.codiceFiscale===e){alert("Il codice fiscale inserito corrisponde al proprietario");return}if(this.car.coProprietari?.some(o=>o.codiceFiscale===e)){alert("Questo coproprietario \xE8 gi\xE0 presente");return}let i={id:"",nome:t,cognome:r,codiceFiscale:e,dataDiNascita:null,email:null,annoConseguimentoPatente:null};this.car.coProprietari||(this.car.coProprietari=[]),this.car.coProprietari.push(i),this.carUpdated.emit(this.car),this.toggleNewCoproprietarioForm()}removeCoproprietario(e){confirm("Sei sicuro di voler rimuovere questo coproprietario?")&&(this.car.coProprietari=this.car.coProprietari?.filter(t=>t.codiceFiscale!==e),this.carUpdated.emit(L({},this.car)))}resetCoproprietarioForm(){this.newCoproprietario={nome:"",cognome:"",codiceFiscale:""}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-coproprietari"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-people-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-info"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-coproprietario-form"],[1,"mb-3"],[1,"coproprietari-list","mb-4"],[1,"coproprietario-item","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"text-muted","text-uppercase"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"],[1,"row"],[1,"col-md-4","mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","maxlength","16",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),q("click",function(){return r.toggleCoproprietari()}),g(2,"div",2),N(3,"i",3),g(4,"span",4),E(5,"Coproprietari"),m()(),N(6,"i",5),m(),G(7,LW,8,11,"div",6),m()),t&2&&(C(6),Te("bi-chevron-up",r.coproprietariOpen())("bi-chevron-down",!r.coproprietariOpen()),C(),K(r.coproprietariOpen()?7:-1))},dependencies:[Ge,en,Ot,Xt,is,Bt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.coproprietari-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.coproprietario-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.coproprietario-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.new-coproprietario-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var VW=(n,e)=>e.id;function UW(n,e){n&1&&(g(0,"div",7),N(1,"i",13),g(2,"div")(3,"strong"),E(4,"Attenzione!"),m(),E(5," Questa auto non ha un'assicurazione attiva. Provvedi al pi\xF9 presto a stipularne una. "),m()())}function jW(n,e){n&1&&(g(0,"span",18),E(1,"In scadenza"),m())}function zW(n,e){n&1&&(g(0,"span",19),E(1,"Scaduta"),m())}function BW(n,e){if(n&1){let t=le();E(0,"\\n "),g(1,"div",20)(2,"div",21)(3,"label",22),E(4,"Compagnia *"),m(),g(5,"input",23),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editAssicurazione.compagnia,i)||(o.editAssicurazione.compagnia=i),j(i)}),m()(),g(6,"div",21)(7,"label",22),E(8,"Numero Polizza *"),m(),g(9,"input",23),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editAssicurazione.numeroPolizza,i)||(o.editAssicurazione.numeroPolizza=i),j(i)}),m()(),g(10,"div",24)(11,"label",22),E(12,"Data Inizio *"),m(),g(13,"input",25),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editAssicurazione.dataInizio,i)||(o.editAssicurazione.dataInizio=i),j(i)}),m()(),g(14,"div",24)(15,"label",22),E(16,"Data Fine *"),m(),g(17,"input",25),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editAssicurazione.dataFine,i)||(o.editAssicurazione.dataFine=i),j(i)}),m()(),g(18,"div",24)(19,"label",22),E(20,"Costo Annuale (\u20AC) *"),m(),g(21,"input",26),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editAssicurazione.costoAnnuale,i)||(o.editAssicurazione.costoAnnuale=i),j(i)}),m()(),g(22,"div",27)(23,"label",22),E(24,"Coperture (separate da virgola)"),m(),g(25,"input",28),Z("ngModelChange",function(i){U(t);let o=D(3);return X(o.editCopertureInput,i)||(o.editCopertureInput=i),j(i)}),m()(),g(26,"div",29)(27,"button",30),q("click",function(){U(t);let i=D(3);return j(i.cancelEdit())}),N(28,"i",31),E(29," Annulla "),m(),g(30,"button",32),q("click",function(){U(t);let i=D(3);return j(i.saveEditAssicurazione())}),N(31,"i",33),E(32," Salva "),m()()()}if(n&2){let t=D(3);C(5),Q("ngModel",t.editAssicurazione.compagnia),C(4),Q("ngModel",t.editAssicurazione.numeroPolizza),C(4),Q("ngModel",t.editAssicurazione.dataInizio),C(4),Q("ngModel",t.editAssicurazione.dataFine),C(4),Q("ngModel",t.editAssicurazione.costoAnnuale),C(4),Q("ngModel",t.editCopertureInput)}}function $W(n,e){if(n&1&&(g(0,"li"),N(1,"i",44),E(2),m()),n&2){let t=e.$implicit;C(2),ke(t)}}function HW(n,e){if(n&1&&(g(0,"ul",37),On(1,$W,3,1,"li",null,Df),m()),n&2){let t=D(2);C(),Nn(t.coperture)}}function qW(n,e){n&1&&(g(0,"p",38),E(1,"Nessuna copertura specificata"),m())}function WW(n,e){if(n&1){let t=le();g(0,"div",20)(1,"div",34)(2,"div",35)(3,"strong"),E(4,"Compagnia:"),m(),E(5),m(),g(6,"div",35)(7,"strong"),E(8,"Polizza:"),m(),E(9),m(),g(10,"div",35)(11,"strong"),E(12,"Data Inizio:"),m(),E(13),m(),g(14,"div",35)(15,"strong"),E(16,"Data Fine:"),m(),g(17,"span"),E(18),m()(),g(19,"div",35)(20,"strong"),E(21,"Costo Annuale:"),m(),E(22),m()(),g(23,"div",36)(24,"strong"),E(25,"Coperture:"),m(),G(26,HW,3,0,"ul",37)(27,qW,2,0,"p",38),m()(),g(28,"div",39)(29,"button",40),q("click",function(){U(t);let i=D(),o=D(2);return j(o.startEditAssicurazione(i))}),N(30,"i",41),E(31," Modifica "),m(),g(32,"button",42),q("click",function(){U(t);let i=D(),o=D(2);return j(o.deleteAssicurazione(i.id))}),N(33,"i",43),E(34," Elimina "),m()()}if(n&2){let t=D(),r=D(2);C(5),ue(" ",t.compagnia," "),C(4),ue(" ",t.numeroPolizza," "),C(4),ue(" ",r.formatDate(t.dataInizio)," "),C(4),Te("text-danger",r.isAssicurazioneInScadenza(t.dataFine)||r.isAssicurazioneScaduta(t.dataFine)),C(),ue(" ",r.formatDate(t.dataFine)," "),C(4),ue(" ",r.formatPrice(t.costoAnnuale)," "),C(4),K(t.coperture&&t.coperture.length>0?26:27)}}function GW(n,e){if(n&1&&(g(0,"div",14)(1,"div",15)(2,"h5",16),N(3,"i",17),E(4," Assicurazione Attiva "),m(),G(5,jW,2,0,"span",18),G(6,zW,2,0,"span",19),m(),G(7,BW,33,6)(8,WW,35,8),m()),n&2){let t=e,r=D(2);Te("in-scadenza",r.isAssicurazioneInScadenza(t.dataFine))("scaduta",r.isAssicurazioneScaduta(t.dataFine)),C(5),K(r.isAssicurazioneInScadenza(t.dataFine)?5:-1),C(),K(r.isAssicurazioneScaduta(t.dataFine)?6:-1),C(),K(r.editingAssicurazioneId===t.id&&r.editAssicurazione?7:8)}}function KW(n,e){if(n&1){let t=le();g(0,"div",12)(1,"h5",45),E(2,"Nuova Assicurazione"),m(),g(3,"div",20)(4,"div",21)(5,"label",22),E(6,"Compagnia *"),m(),g(7,"input",23),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newAssicurazione.compagnia,i)||(o.newAssicurazione.compagnia=i),j(i)}),m()(),g(8,"div",21)(9,"label",22),E(10,"Numero Polizza *"),m(),g(11,"input",23),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newAssicurazione.numeroPolizza,i)||(o.newAssicurazione.numeroPolizza=i),j(i)}),m()(),g(12,"div",24)(13,"label",22),E(14,"Data Inizio *"),m(),g(15,"input",25),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newAssicurazione.dataInizio,i)||(o.newAssicurazione.dataInizio=i),j(i)}),m()(),g(16,"div",24)(17,"label",22),E(18,"Data Fine *"),m(),g(19,"input",25),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newAssicurazione.dataFine,i)||(o.newAssicurazione.dataFine=i),j(i)}),m()(),g(20,"div",24)(21,"label",22),E(22,"Costo Annuale (\u20AC) *"),m(),g(23,"input",26),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newAssicurazione.costoAnnuale,i)||(o.newAssicurazione.costoAnnuale=i),j(i)}),m()(),g(24,"div",27)(25,"label",22),E(26,"Coperture (separate da virgola)"),m(),g(27,"input",28),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.copertureInput,i)||(o.copertureInput=i),j(i)}),m()(),g(28,"div",29)(29,"button",46),q("click",function(){U(t);let i=D(2);return j(i.addAssicurazione())}),N(30,"i",47),E(31," Aggiungi "),m()()()()}if(n&2){let t=D(2);C(7),Q("ngModel",t.newAssicurazione.compagnia),C(4),Q("ngModel",t.newAssicurazione.numeroPolizza),C(4),Q("ngModel",t.newAssicurazione.dataInizio),C(4),Q("ngModel",t.newAssicurazione.dataFine),C(4),Q("ngModel",t.newAssicurazione.costoAnnuale),C(4),Q("ngModel",t.copertureInput)}}function YW(n,e){if(n&1){let t=le();g(0,"div",20)(1,"div",21)(2,"label",22),E(3,"Compagnia *"),m(),g(4,"input",23),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editAssicurazione.compagnia,i)||(o.editAssicurazione.compagnia=i),j(i)}),m()(),g(5,"div",21)(6,"label",22),E(7,"Numero Polizza *"),m(),g(8,"input",23),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editAssicurazione.numeroPolizza,i)||(o.editAssicurazione.numeroPolizza=i),j(i)}),m()(),g(9,"div",24)(10,"label",22),E(11,"Data Inizio *"),m(),g(12,"input",25),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editAssicurazione.dataInizio,i)||(o.editAssicurazione.dataInizio=i),j(i)}),m()(),g(13,"div",24)(14,"label",22),E(15,"Data Fine *"),m(),g(16,"input",25),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editAssicurazione.dataFine,i)||(o.editAssicurazione.dataFine=i),j(i)}),m()(),g(17,"div",24)(18,"label",22),E(19,"Costo Annuale (\u20AC) *"),m(),g(20,"input",26),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editAssicurazione.costoAnnuale,i)||(o.editAssicurazione.costoAnnuale=i),j(i)}),m()(),g(21,"div",27)(22,"label",22),E(23,"Coperture (separate da virgola)"),m(),g(24,"input",28),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editCopertureInput,i)||(o.editCopertureInput=i),j(i)}),m()(),g(25,"div",29)(26,"button",30),q("click",function(){U(t);let i=D(4);return j(i.cancelEdit())}),N(27,"i",31),E(28," Annulla "),m(),g(29,"button",32),q("click",function(){U(t);let i=D(4);return j(i.saveEditAssicurazione())}),N(30,"i",33),E(31," Salva "),m()()()}if(n&2){let t=D(4);C(4),Q("ngModel",t.editAssicurazione.compagnia),C(4),Q("ngModel",t.editAssicurazione.numeroPolizza),C(4),Q("ngModel",t.editAssicurazione.dataInizio),C(4),Q("ngModel",t.editAssicurazione.dataFine),C(4),Q("ngModel",t.editAssicurazione.costoAnnuale),C(4),Q("ngModel",t.editCopertureInput)}}function QW(n,e){if(n&1&&(g(0,"li"),N(1,"i",44),E(2),m()),n&2){let t=e.$implicit;C(2),ke(t)}}function ZW(n,e){if(n&1&&(g(0,"ul",37),On(1,QW,3,1,"li",null,Df),m()),n&2){let t=D(2).$implicit;C(),Nn(t.coperture)}}function JW(n,e){n&1&&(g(0,"p",38),E(1,"Nessuna copertura"),m())}function XW(n,e){if(n&1){let t=le();g(0,"div",51)(1,"div",52)(2,"div",53)(3,"div",35)(4,"strong"),E(5,"Compagnia:"),m(),E(6),m(),g(7,"div",35)(8,"strong"),E(9,"Polizza:"),m(),E(10),m(),g(11,"div",35)(12,"strong"),E(13,"Periodo:"),m(),E(14),m(),g(15,"div",35)(16,"strong"),E(17,"Costo Annuale:"),m(),E(18),m()(),g(19,"div",54)(20,"strong"),E(21,"Coperture:"),m(),G(22,ZW,3,0,"ul",37)(23,JW,2,0,"p",38),m()(),g(24,"div",55)(25,"button",56),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.startEditAssicurazione(i))}),N(26,"i",57),m(),g(27,"button",42),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.deleteAssicurazione(i.id))}),N(28,"i",58),m()()()}if(n&2){let t=D().$implicit,r=D(3);C(6),ue(" ",t.compagnia," "),C(4),ue(" ",t.numeroPolizza," "),C(4),Nr(" ",r.formatDate(t.dataInizio)," - ",r.formatDate(t.dataFine)," "),C(4),ue(" ",r.formatPrice(t.costoAnnuale)," "),C(4),K(t.coperture&&t.coperture.length>0?22:23)}}function e9(n,e){if(n&1&&(g(0,"div",50),G(1,YW,32,6,"div",20)(2,XW,29,6,"div",51),m()),n&2){let t=e.$implicit,r=D(3);Te("in-scadenza",r.isAssicurazioneInScadenza(t.dataFine))("scaduta",r.isAssicurazioneScaduta(t.dataFine)),C(),K(r.editingAssicurazioneId===t.id&&r.editAssicurazione?1:2)}}function t9(n,e){if(n&1&&(N(0,"hr",48),g(1,"h5",45),E(2,"Storico Assicurazioni"),m(),On(3,e9,3,5,"div",49,VW)),n&2){let t=D(2);C(3),Nn(t.getStoricoAssicurazioni())}}function n9(n,e){if(n&1){let t=le();g(0,"div",6),G(1,UW,6,0,"div",7),G(2,GW,9,7,"div",8),g(3,"div",9)(4,"button",10),q("click",function(){U(t);let i=D();return j(i.toggleNewAssicurazioneForm())}),N(5,"i",11),E(6),m()(),G(7,KW,32,6,"div",12),G(8,t9,5,0),m()}if(n&2){let t,r=D();C(),K(r.getAssicurazioneAttiva()?-1:1),C(),K((t=r.getAssicurazioneAttiva())?2:-1,t),C(2),Te("btn-primary",!r.showNewAssicurazioneForm())("btn-secondary",r.showNewAssicurazioneForm()),C(),Te("bi-plus-circle",!r.showNewAssicurazioneForm())("bi-x-circle",r.showNewAssicurazioneForm()),C(),ue(" ",r.showNewAssicurazioneForm()?"Annulla":"Aggiungi Nuova Assicurazione"," "),C(),K(r.showNewAssicurazioneForm()?7:-1),C(),K(r.getStoricoAssicurazioni().length>0?8:-1)}}var fm=class n{car;carUpdated=new Ve;assicurazioniOpen=re(!1);showNewAssicurazioneForm=re(!1);newAssicurazione=this.getEmptyAssicurazione();copertureInput="";editingAssicurazioneId=null;editAssicurazione=null;editCopertureInput="";toggleAssicurazioni(){this.assicurazioniOpen.set(!this.assicurazioniOpen())}toggleNewAssicurazioneForm(){this.showNewAssicurazioneForm.set(!this.showNewAssicurazioneForm()),this.showNewAssicurazioneForm()||(this.newAssicurazione=this.getEmptyAssicurazione(),this.copertureInput="")}getAssicurazioneAttiva(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return null;let e=new Date;return e.setHours(0,0,0,0),this.car.assicurazioni.find(r=>{let i=new Date(r.dataInizio),o=new Date(r.dataFine);return i.setHours(0,0,0,0),o.setHours(0,0,0,0),i<=e&&o>=e})||null}getStoricoAssicurazioni(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return[];let e=this.getAssicurazioneAttiva();return[...this.car.assicurazioni].filter(t=>!e||t.id!==e.id).sort((t,r)=>new Date(r.dataInizio).getTime()-new Date(t.dataInizio).getTime())}isAssicurazioneInScadenza(e){let t=new Date,i=new Date(e).getTime()-t.getTime(),o=Math.ceil(i/(1e3*60*60*24));return o<=30&&o>=0}isAssicurazioneScaduta(e){let t=new Date;return new Date(e)<t}addAssicurazione(){if(!this.newAssicurazione.compagnia||!this.newAssicurazione.numeroPolizza||!this.newAssicurazione.dataInizio||!this.newAssicurazione.dataFine){alert("Compila tutti i campi obbligatori");return}let e=new Date(this.newAssicurazione.dataInizio),t=new Date(this.newAssicurazione.dataFine);if(t<=e){alert("La data di fine deve essere successiva alla data di inizio");return}if(this.car.assicurazioni)for(let o of this.car.assicurazioni){let s=new Date(o.dataInizio),a=new Date(o.dataFine);if(e>=s&&e<=a||t>=s&&t<=a||e<=s&&t>=a){alert("Le date si sovrappongono con un'altra assicurazione esistente");return}}let r=this.copertureInput.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o.length>0),i={id:Date.now().toString(),compagnia:this.newAssicurazione.compagnia.toUpperCase(),numeroPolizza:this.newAssicurazione.numeroPolizza.toUpperCase(),dataInizio:this.newAssicurazione.dataInizio,dataFine:this.newAssicurazione.dataFine,costoAnnuale:this.newAssicurazione.costoAnnuale||0,coperture:r};this.car.assicurazioni||(this.car.assicurazioni=[]),this.car.assicurazioni.push(i),this.carUpdated.emit(this.car),this.toggleNewAssicurazioneForm()}deleteAssicurazione(e){confirm("Sei sicuro di voler eliminare questa assicurazione?")&&(this.car.assicurazioni=this.car.assicurazioni?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}startEditAssicurazione(e){this.editingAssicurazioneId=e.id,this.editAssicurazione=L({},e),this.editCopertureInput=e.coperture?e.coperture.join(", "):""}cancelEdit(){this.editingAssicurazioneId=null,this.editAssicurazione=null,this.editCopertureInput=""}saveEditAssicurazione(){if(!this.editAssicurazione||!this.editAssicurazione.compagnia||!this.editAssicurazione.numeroPolizza||!this.editAssicurazione.dataInizio||!this.editAssicurazione.dataFine){alert("Compila tutti i campi obbligatori");return}let e=new Date(this.editAssicurazione.dataInizio);if(new Date(this.editAssicurazione.dataFine)<=e){alert("La data di fine deve essere successiva alla data di inizio");return}let r=this.editCopertureInput.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o.length>0),i=this.car.assicurazioni?.findIndex(o=>o.id===this.editingAssicurazioneId);i!==void 0&&i!==-1&&this.car.assicurazioni&&(this.car.assicurazioni[i]=te(L({},this.editAssicurazione),{compagnia:this.editAssicurazione.compagnia.toUpperCase(),numeroPolizza:this.editAssicurazione.numeroPolizza.toUpperCase(),coperture:r}),this.carUpdated.emit(this.car),this.cancelEdit())}getEmptyAssicurazione(){return{id:"",compagnia:"",numeroPolizza:"",dataInizio:new Date,dataFine:new Date,costoAnnuale:0,coperture:[]}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-assicurazioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-shield-fill-check","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"assicurazione-attiva","mb-4",3,"in-scadenza","scaduta"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-assicurazione-form","mb-4"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"assicurazione-attiva","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"bi","bi-shield-check","text-success","me-2"],[1,"badge","bg-warning"],[1,"badge","bg-danger"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-md-4","mb-3"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["type","text","placeholder","RCA, FURTO, INCENDIO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"col-md-8"],[1,"mb-2"],[1,"col-md-4"],[1,"list-unstyled","mt-2","mb-0"],[1,"text-muted","mb-0","mt-2"],[1,"text-end","mt-3"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash","me-1"],[1,"bi","bi-check-circle-fill","text-success","me-2"],[1,"mb-3"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"my-4"],[1,"assicurazione-item","mb-3",3,"in-scadenza","scaduta"],[1,"assicurazione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"row","flex-grow-1"],[1,"col-md-7"],[1,"col-md-5"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),q("click",function(){return r.toggleAssicurazioni()}),g(2,"div",2),N(3,"i",3),g(4,"span",4),E(5,"Assicurazioni"),m()(),N(6,"i",5),m(),G(7,n9,9,13,"div",6),m()),t&2&&(C(6),Te("bi-chevron-up",r.assicurazioniOpen())("bi-chevron-down",!r.assicurazioniOpen()),C(),K(r.assicurazioniOpen()?7:-1))},dependencies:[Ge,en,Ot,jn,Xt,Bt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.assicurazione-attiva[_ngcontent-%COMP%]{background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:1.5rem}.new-assicurazione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.assicurazione-storico[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var r9=(n,e)=>e.id;function i9(n,e){if(n&1){let t=le();g(0,"div",10)(1,"h5",12),E(2,"Nuova Manutenzione"),m(),g(3,"div",13)(4,"div",14)(5,"label",15),E(6,"Data *"),m(),g(7,"input",16),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newManutenzione.data,i)||(o.newManutenzione.data=i),j(i)}),m()(),g(8,"div",14)(9,"label",15),E(10,"Chilometraggio *"),m(),g(11,"input",17),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newManutenzione.chilometraggio,i)||(o.newManutenzione.chilometraggio=i),j(i)}),m()(),g(12,"div",14)(13,"label",15),E(14,"Costo (\u20AC)"),m(),g(15,"input",18),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newManutenzione.costo,i)||(o.newManutenzione.costo=i),j(i)}),m()(),g(16,"div",14)(17,"label",15),E(18,"Tipologia *"),m(),g(19,"select",19),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newManutenzione.tipologia,i)||(o.newManutenzione.tipologia=i),j(i)}),g(20,"option",20),E(21,"Ordinaria (Tagliando)"),m(),g(22,"option",21),E(23,"Straordinaria"),m()()(),g(24,"div",22)(25,"label",15),E(26,"Descrizione *"),m(),g(27,"textarea",23),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newManutenzione.descrizione,i)||(o.newManutenzione.descrizione=i),j(i)}),m()(),g(28,"div",24)(29,"button",25),q("click",function(){U(t);let i=D(2);return j(i.addManutenzione())}),N(30,"i",26),E(31," Aggiungi "),m()()()()}if(n&2){let t=D(2);C(7),Q("ngModel",t.newManutenzione.data),C(4),Q("ngModel",t.newManutenzione.chilometraggio),C(4),Q("ngModel",t.newManutenzione.costo),C(4),Q("ngModel",t.newManutenzione.tipologia),C(8),Q("ngModel",t.newManutenzione.descrizione)}}function o9(n,e){if(n&1){let t=le();g(0,"div",13)(1,"div",14)(2,"label",15),E(3,"Data *"),m(),g(4,"input",16),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editManutenzione.data,i)||(o.editManutenzione.data=i),j(i)}),m()(),g(5,"div",14)(6,"label",15),E(7,"Chilometraggio *"),m(),g(8,"input",17),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editManutenzione.chilometraggio,i)||(o.editManutenzione.chilometraggio=i),j(i)}),m()(),g(9,"div",14)(10,"label",15),E(11,"Costo (\u20AC)"),m(),g(12,"input",18),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editManutenzione.costo,i)||(o.editManutenzione.costo=i),j(i)}),m()(),g(13,"div",14)(14,"label",15),E(15,"Tipologia *"),m(),g(16,"select",19),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editManutenzione.tipologia,i)||(o.editManutenzione.tipologia=i),j(i)}),g(17,"option",20),E(18,"Ordinaria (Tagliando)"),m(),g(19,"option",21),E(20,"Straordinaria"),m()()(),g(21,"div",22)(22,"label",15),E(23,"Descrizione *"),m(),g(24,"textarea",29),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editManutenzione.descrizione,i)||(o.editManutenzione.descrizione=i),j(i)}),m()(),g(25,"div",24)(26,"button",30),q("click",function(){U(t);let i=D(4);return j(i.cancelEditManutenzione())}),N(27,"i",31),E(28," Annulla "),m(),g(29,"button",32),q("click",function(){U(t);let i=D(4);return j(i.saveEditManutenzione())}),N(30,"i",33),E(31," Salva "),m()()()}if(n&2){let t=D(4);C(4),Q("ngModel",t.editManutenzione.data),C(4),Q("ngModel",t.editManutenzione.chilometraggio),C(4),Q("ngModel",t.editManutenzione.costo),C(4),Q("ngModel",t.editManutenzione.tipologia),C(8),Q("ngModel",t.editManutenzione.descrizione)}}function s9(n,e){if(n&1){let t=le();g(0,"div",28)(1,"div",34)(2,"div",13)(3,"div",35)(4,"strong"),E(5,"Data:"),m(),E(6),m(),g(7,"div",35)(8,"strong"),E(9,"Km:"),m(),E(10),m(),g(11,"div",35)(12,"strong"),E(13,"Tipologia:"),m(),g(14,"span",36),E(15),m()(),g(16,"div",35)(17,"strong"),E(18,"Costo:"),m(),E(19),m(),g(20,"div",37)(21,"strong"),E(22,"Descrizione:"),m(),g(23,"p",38),E(24),m()()()(),g(25,"div",39)(26,"button",40),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.startEditManutenzione(i))}),N(27,"i",41),m(),g(28,"button",42),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.deleteManutenzione(i.id))}),N(29,"i",43),m()()()}if(n&2){let t=D().$implicit,r=D(3);C(6),ue(" ",r.formatDate(t.data)," "),C(4),ue(" ",t.chilometraggio.toLocaleString("it-IT")," "),C(4),Te("bg-primary",t.tipologia==="ordinaria")("bg-info",t.tipologia==="straordinaria"),C(),ue(" ",t.tipologia==="ordinaria"?"Ordinaria":"Straordinaria"," "),C(4),ue(" ",r.formatPrice(t.costo)," "),C(5),ke(t.descrizione)}}function a9(n,e){if(n&1&&(g(0,"div",27),G(1,o9,32,5,"div",13)(2,s9,30,9,"div",28),m()),n&2){let t=e.$implicit,r=D(3);C(),K(r.editingManutenzioneId===t.id&&r.editManutenzione?1:2)}}function c9(n,e){if(n&1&&(g(0,"h5",12),E(1,"Storico Manutenzioni"),m(),On(2,a9,3,1,"div",27,r9)),n&2){let t=D(2);C(2),Nn(t.getManutenzioniOrdinate())}}function l9(n,e){n&1&&(g(0,"div",11),N(1,"i",44),E(2," Non ci sono manutenzioni registrate per questa auto. "),m())}function u9(n,e){if(n&1){let t=le();g(0,"div",6)(1,"div",7)(2,"button",8),q("click",function(){U(t);let i=D();return j(i.toggleNewManutenzioneForm())}),N(3,"i",9),E(4),m()(),G(5,i9,32,5,"div",10),G(6,c9,4,0)(7,l9,3,0,"div",11),m()}if(n&2){let t=D();C(2),Te("btn-primary",!t.showNewManutenzioneForm())("btn-secondary",t.showNewManutenzioneForm()),C(),Te("bi-plus-circle",!t.showNewManutenzioneForm())("bi-x-circle",t.showNewManutenzioneForm()),C(),ue(" ",t.showNewManutenzioneForm()?"Annulla":"Aggiungi Nuova Manutenzione"," "),C(),K(t.showNewManutenzioneForm()?5:-1),C(),K(t.getManutenzioniOrdinate().length>0?6:7)}}var pm=class n{car;carUpdated=new Ve;manutenzioneOpen=re(!1);showNewManutenzioneForm=re(!1);newManutenzione=this.getEmptyManutenzione();editingManutenzioneId=null;editManutenzione=null;toggleManutenzione(){this.manutenzioneOpen.set(!this.manutenzioneOpen())}toggleNewManutenzioneForm(){this.showNewManutenzioneForm.set(!this.showNewManutenzioneForm()),this.showNewManutenzioneForm()||(this.newManutenzione=this.getEmptyManutenzione())}getManutenzioniOrdinate(){return!this.car.manutenzioni||this.car.manutenzioni.length===0?[]:[...this.car.manutenzioni].sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime())}addManutenzione(){if(!this.newManutenzione.data||!this.newManutenzione.chilometraggio||!this.newManutenzione.tipologia){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newManutenzione.data,chilometraggio:this.newManutenzione.chilometraggio,descrizione:this.newManutenzione.descrizione?.toUpperCase()||"",costo:this.newManutenzione.costo,tipologia:this.newManutenzione.tipologia};this.car.manutenzioni||(this.car.manutenzioni=[]),this.car.manutenzioni.push(e),this.carUpdated.emit(this.car),this.toggleNewManutenzioneForm()}deleteManutenzione(e){confirm("Sei sicuro di voler eliminare questa manutenzione?")&&(this.car.manutenzioni=this.car.manutenzioni?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}startEditManutenzione(e){this.editingManutenzioneId=e.id,this.editManutenzione=L({},e)}cancelEditManutenzione(){this.editingManutenzioneId=null,this.editManutenzione=null}saveEditManutenzione(){if(!this.editManutenzione||!this.editManutenzione.data||!this.editManutenzione.chilometraggio||!this.editManutenzione.tipologia){alert("Compila tutti i campi obbligatori");return}let e=this.car.manutenzioni?.findIndex(t=>t.id===this.editingManutenzioneId);e!==void 0&&e!==-1&&this.car.manutenzioni&&(this.car.manutenzioni[e]=te(L({},this.editManutenzione),{descrizione:this.editManutenzione.descrizione?.toUpperCase()||""}),this.carUpdated.emit(this.car),this.cancelEditManutenzione())}getEmptyManutenzione(){return{id:"",data:new Date,chilometraggio:0,descrizione:"",costo:0,tipologia:"ordinaria"}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-manutenzione"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-wrench-adjustable-circle-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-manutenzione-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","ordinaria"],["value","straordinaria"],[1,"col-md-12","mb-3"],["rows","4","placeholder","Descrivi le operazioni effettuate (es. CAMBIO OLIO, FILTRI, PASTIGLIE FRENO...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"manutenzione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],["rows","4","placeholder","Descrivi le operazioni effettuate",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"badge"],[1,"col-12","mt-2"],[1,"mb-0","mt-1","text-muted"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),q("click",function(){return r.toggleManutenzione()}),g(2,"div",2),N(3,"i",3),g(4,"span",4),E(5,"Manutenzione"),m()(),N(6,"i",5),m(),G(7,u9,8,11,"div",6),m()),t&2&&(C(6),Te("bi-chevron-up",r.manutenzioneOpen())("bi-chevron-down",!r.manutenzioneOpen()),C(),K(r.manutenzioneOpen()?7:-1))},dependencies:[Ge,en,xp,Op,Ot,jn,ja,Xt,gi,Bt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.new-tagliando-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.tagliando-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.tagliando-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.tagliando-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var d9=(n,e)=>e.id;function h9(n,e){if(n&1&&(g(0,"div",8),N(1,"i",17),g(2,"div")(3,"strong"),E(4,"Revisione non ancora richiesta"),m(),N(5,"br"),E(6," Auto nei primi 4 anni. Prima revisione prevista per: "),g(7,"strong"),E(8),m()()()),n&2){let t=D(2);C(8),ke(t.formatDate(t.getDataProssimaRevisione()))}}function f9(n,e){if(n&1&&(g(0,"div",9),N(1,"i",18),g(2,"div")(3,"strong"),E(4,"Revisione valida"),m(),N(5,"br"),E(6," Prossima revisione prevista per: "),g(7,"strong"),E(8),m()()()),n&2){let t=D(2);C(8),ke(t.formatDate(t.getDataProssimaRevisione()))}}function p9(n,e){if(n&1&&(g(0,"div",10),N(1,"i",19),g(2,"div")(3,"strong"),E(4,"Attenzione! Revisione in scadenza"),m(),N(5,"br"),E(6," Scadenza prevista per: "),g(7,"strong",20),E(8),m(),N(9,"br"),g(10,"small"),E(11,"Manca meno di un mese alla scadenza. Prenota subito la revisione!"),m()()()),n&2){let t=D(2);C(8),ke(t.formatDate(t.getDataProssimaRevisione()))}}function g9(n,e){if(n&1&&(E(0," Data scadenza: "),g(1,"strong"),E(2),m(),N(3,"br")),n&2){let t=D(3);C(2),ke(t.formatDate(t.getDataProssimaRevisione()))}}function m9(n,e){if(n&1&&(g(0,"div",11),N(1,"i",21),g(2,"div")(3,"strong"),E(4,"Revisione scaduta!"),m(),N(5,"br"),G(6,g9,4,1),g(7,"small"),E(8,"Auto non in regola. Effettua immediatamente la revisione."),m()()()),n&2){let t=D(2);C(6),K(t.getDataProssimaRevisione()?6:-1)}}function _9(n,e){if(n&1){let t=le();g(0,"div",15)(1,"h5",22),E(2,"Nuova Revisione"),m(),g(3,"div",23)(4,"div",24)(5,"label",25),E(6,"Data *"),m(),g(7,"input",26),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newRevisione.data,i)||(o.newRevisione.data=i),j(i)}),m()(),g(8,"div",24)(9,"label",25),E(10,"Chilometraggio *"),m(),g(11,"input",27),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newRevisione.chilometraggio,i)||(o.newRevisione.chilometraggio=i),j(i)}),m()(),g(12,"div",24)(13,"label",25),E(14,"Esito *"),m(),g(15,"select",28),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newRevisione.esito,i)||(o.newRevisione.esito=i),j(i)}),g(16,"option",29),E(17,"Positiva"),m(),g(18,"option",30),E(19,"Negativa"),m()()(),g(20,"div",31)(21,"label",25),E(22,"Note"),m(),g(23,"textarea",32),Z("ngModelChange",function(i){U(t);let o=D(2);return X(o.newRevisione.note,i)||(o.newRevisione.note=i),j(i)}),m()(),g(24,"div",33)(25,"button",34),q("click",function(){U(t);let i=D(2);return j(i.addRevisione())}),N(26,"i",35),E(27," Aggiungi "),m()()()()}if(n&2){let t=D(2);C(7),Q("ngModel",t.newRevisione.data),C(4),Q("ngModel",t.newRevisione.chilometraggio),C(4),Q("ngModel",t.newRevisione.esito),C(8),Q("ngModel",t.newRevisione.note)}}function v9(n,e){if(n&1){let t=le();g(0,"div",23)(1,"div",24)(2,"label",25),E(3,"Data *"),m(),g(4,"input",26),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editRevisione.data,i)||(o.editRevisione.data=i),j(i)}),m()(),g(5,"div",24)(6,"label",25),E(7,"Chilometraggio *"),m(),g(8,"input",27),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editRevisione.chilometraggio,i)||(o.editRevisione.chilometraggio=i),j(i)}),m()(),g(9,"div",24)(10,"label",25),E(11,"Esito *"),m(),g(12,"select",28),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editRevisione.esito,i)||(o.editRevisione.esito=i),j(i)}),g(13,"option",29),E(14,"Positiva"),m(),g(15,"option",30),E(16,"Negativa"),m()()(),g(17,"div",31)(18,"label",25),E(19,"Note"),m(),g(20,"textarea",39),Z("ngModelChange",function(i){U(t);let o=D(4);return X(o.editRevisione.note,i)||(o.editRevisione.note=i),j(i)}),m()(),g(21,"div",33)(22,"button",40),q("click",function(){U(t);let i=D(4);return j(i.cancelEditRevisione())}),N(23,"i",41),E(24," Annulla "),m(),g(25,"button",42),q("click",function(){U(t);let i=D(4);return j(i.saveEditRevisione())}),N(26,"i",43),E(27," Salva "),m()()()}if(n&2){let t=D(4);C(4),Q("ngModel",t.editRevisione.data),C(4),Q("ngModel",t.editRevisione.chilometraggio),C(4),Q("ngModel",t.editRevisione.esito),C(8),Q("ngModel",t.editRevisione.note)}}function y9(n,e){if(n&1&&(g(0,"div",47)(1,"strong"),E(2,"Note:"),m(),g(3,"p",53),E(4),m()()),n&2){let t=D(2).$implicit;C(4),ke(t.note)}}function E9(n,e){if(n&1){let t=le();g(0,"div",38)(1,"div",44)(2,"div",23)(3,"div",45)(4,"strong"),E(5,"Data:"),m(),E(6),m(),g(7,"div",45)(8,"strong"),E(9,"Km:"),m(),E(10),m(),g(11,"div",45)(12,"strong"),E(13,"Esito: "),m(),g(14,"span",46),E(15),m()(),G(16,y9,5,1,"div",47),m()(),g(17,"div",48)(18,"button",49),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.startEditRevisione(i))}),N(19,"i",50),m(),g(20,"button",51),q("click",function(){U(t);let i=D().$implicit,o=D(3);return j(o.deleteRevisione(i.id))}),N(21,"i",52),m()()()}if(n&2){let t=D().$implicit,r=D(3);C(6),ue(" ",r.formatDate(t.data)," "),C(4),ue(" ",t.chilometraggio.toLocaleString("it-IT")," "),C(4),Te("bg-success",t.esito==="positiva")("bg-danger",t.esito==="negativa"),C(),ue(" ",t.esito==="positiva"?"Positiva":"Negativa"," "),C(),K(t.note?16:-1)}}function C9(n,e){if(n&1&&(g(0,"div",37),G(1,v9,28,4,"div",23)(2,E9,22,8,"div",38),m()),n&2){let t=e.$implicit,r=D(3);Te("revisione-negativa",t.esito==="negativa"),C(),K(r.editingRevisioneId===t.id&&r.editRevisione?1:2)}}function w9(n,e){if(n&1&&(g(0,"h5",22),E(1,"Storico Revisioni"),m(),On(2,C9,3,3,"div",36,d9)),n&2){let t=D(2);C(2),Nn(t.getRevisioniOrdinate())}}function b9(n,e){n&1&&(g(0,"div",16),N(1,"i",54),E(2," Non ci sono revisioni registrate per questa auto. "),m())}function I9(n,e){if(n&1){let t=le();g(0,"div",6)(1,"div",7),G(2,h9,9,1,"div",8),G(3,f9,9,1,"div",9),G(4,p9,12,1,"div",10),G(5,m9,9,1,"div",11),m(),g(6,"div",12)(7,"button",13),q("click",function(){U(t);let i=D();return j(i.toggleNewRevisioneForm())}),N(8,"i",14),E(9),m()(),G(10,_9,28,4,"div",15),G(11,w9,4,0)(12,b9,3,0,"div",16),m()}if(n&2){let t=D();C(2),K(t.getStatoRevisione()==="non_richiesta"?2:-1),C(),K(t.getStatoRevisione()==="valida"?3:-1),C(),K(t.getStatoRevisione()==="in_scadenza"?4:-1),C(),K(t.getStatoRevisione()==="scaduta"?5:-1),C(2),Te("btn-primary",!t.showNewRevisioneForm())("btn-secondary",t.showNewRevisioneForm()),C(),Te("bi-plus-circle",!t.showNewRevisioneForm())("bi-x-circle",t.showNewRevisioneForm()),C(),ue(" ",t.showNewRevisioneForm()?"Annulla":"Aggiungi Nuova Revisione"," "),C(),K(t.showNewRevisioneForm()?10:-1),C(),K(t.getRevisioniOrdinate().length>0?11:12)}}var gm=class n{car;carUpdated=new Ve;revisioniOpen=re(!1);showNewRevisioneForm=re(!1);newRevisione=this.getEmptyRevisione();editingRevisioneId=null;editRevisione=null;toggleRevisioni(){this.revisioniOpen.set(!this.revisioniOpen())}toggleNewRevisioneForm(){this.showNewRevisioneForm.set(!this.showNewRevisioneForm()),this.showNewRevisioneForm()||(this.newRevisione=this.getEmptyRevisione())}getRevisioniOrdinate(){return!this.car.revisioni||this.car.revisioni.length===0?[]:[...this.car.revisioni].sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime())}getDataProssimaRevisione(){if(!this.car.dataDiAcquisto)return null;let e=new Date(this.car.dataDiAcquisto);if((new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let i=this.getRevisioniOrdinate();if(i.length===0){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let o=new Date(i[0].data),s=new Date(o);return s.setFullYear(s.getFullYear()+2),s}isRevisioneInScadenza(){let e=this.getDataProssimaRevisione();if(!e)return!1;let t=new Date,r=e.getTime()-t.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<=30&&i>0}isRevisioneScaduta(){let e=this.getDataProssimaRevisione();return e?e<new Date:!1}getStatoRevisione(){if(!this.car.dataDiAcquisto)return"non_richiesta";let e=new Date(this.car.dataDiAcquisto);return(new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4?"non_richiesta":this.isRevisioneScaduta()?"scaduta":this.isRevisioneInScadenza()?"in_scadenza":"valida"}addRevisione(){if(!this.newRevisione.data||!this.newRevisione.chilometraggio||!this.newRevisione.esito){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newRevisione.data,chilometraggio:this.newRevisione.chilometraggio,esito:this.newRevisione.esito,note:this.newRevisione.note?.toUpperCase()};this.car.revisioni||(this.car.revisioni=[]),this.car.revisioni.push(e),this.carUpdated.emit(this.car),this.toggleNewRevisioneForm()}deleteRevisione(e){confirm("Sei sicuro di voler eliminare questa revisione?")&&(this.car.revisioni=this.car.revisioni?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}startEditRevisione(e){this.editingRevisioneId=e.id,this.editRevisione=L({},e)}cancelEditRevisione(){this.editingRevisioneId=null,this.editRevisione=null}saveEditRevisione(){if(!this.editRevisione||!this.editRevisione.data||!this.editRevisione.chilometraggio||!this.editRevisione.esito){alert("Compila tutti i campi obbligatori");return}let e=this.car.revisioni?.findIndex(t=>t.id===this.editingRevisioneId);e!==void 0&&e!==-1&&this.car.revisioni&&(this.car.revisioni[e]=te(L({},this.editRevisione),{note:this.editRevisione.note?.toUpperCase()}),this.carUpdated.emit(this.car),this.cancelEditRevisione())}getEmptyRevisione(){return{id:"",data:new Date,chilometraggio:0,esito:"positiva",note:""}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-revisioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-clipboard-check-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"revisione-status","mb-4"],["role","alert",1,"alert","alert-info","d-flex","align-items-center"],["role","alert",1,"alert","alert-success","d-flex","align-items-center"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-revisione-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"bi","bi-info-circle-fill","fs-3","me-3"],[1,"bi","bi-check-circle-fill","fs-3","me-3"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"text-danger"],[1,"bi","bi-x-circle-fill","fs-3","me-3"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","positiva"],["value","negativa"],[1,"col-md-12","mb-3"],["rows","3","placeholder","Note aggiuntive (es. PRESCRIZIONI, DIFETTI RISCONTRATI...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"revisione-item","mb-3",3,"revisione-negativa"],[1,"revisione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],["rows","3","placeholder","Note aggiuntive",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"badge"],[1,"col-12","mt-2"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"mb-0","mt-1","text-muted"],[1,"bi","bi-info-circle","me-2"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),q("click",function(){return r.toggleRevisioni()}),g(2,"div",2),N(3,"i",3),g(4,"span",4),E(5,"Revisioni"),m()(),N(6,"i",5),m(),G(7,I9,13,15,"div",6),m()),t&2&&(C(6),Te("bi-chevron-up",r.revisioniOpen())("bi-chevron-down",!r.revisioniOpen()),C(),K(r.revisioniOpen()?7:-1))},dependencies:[Ge,en,xp,Op,Ot,jn,ja,Xt,gi,Bt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.revisione-status[_ngcontent-%COMP%]{margin-bottom:1.5rem}.new-revisione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.revisione-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.revisione-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.revisione-item[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function T9(n,e){n&1&&(g(0,"div",2)(1,"div",4)(2,"span",5),E(3,"Caricamento..."),m()()())}function D9(n,e){if(n&1&&(g(0,"div",3),N(1,"i",6),E(2),m()),n&2){let t=D();C(2),ue(" ",t.error()," ")}}function S9(n,e){if(n&1){let t=le();g(0,"div",15),N(1,"i",20),E(2),g(3,"button",21),q("click",function(){U(t);let i=D(2);return j(i.successMessage.set(null))}),m()()}if(n&2){let t=D(2);C(2),ue(" ",t.successMessage()," ")}}function A9(n,e){if(n&1){let t=le();g(0,"div",16),N(1,"i",22),E(2),g(3,"button",21),q("click",function(){U(t);let i=D(2);return j(i.errorMessage.set(null))}),m()()}if(n&2){let t=D(2);C(2),ue(" ",t.errorMessage()," ")}}function M9(n,e){if(n&1){let t=le();g(0,"app-sezione-anagrafica",23),q("carUpdated",function(i){U(t);let o=D(2);return j(o.onCarUpdated(i))}),m()}if(n&2){let t=D(2);we("car",t.car())("proprietario",t.proprietario())}}function R9(n,e){if(n&1){let t=le();g(0,"app-sezione-coproprietari",24),q("carUpdated",function(i){U(t);let o=D(2);return j(o.onCarUpdated(i))}),m()}if(n&2){let t=D(2);we("car",t.car())}}function P9(n,e){if(n&1){let t=le();g(0,"app-sezione-assicurazioni",24),q("carUpdated",function(i){U(t);let o=D(2);return j(o.onCarUpdated(i))}),m()}if(n&2){let t=D(2);we("car",t.car())}}function x9(n,e){if(n&1){let t=le();g(0,"app-sezione-manutenzione",24),q("carUpdated",function(i){U(t);let o=D(2);return j(o.onCarUpdated(i))}),m()}if(n&2){let t=D(2);we("car",t.car())}}function O9(n,e){if(n&1){let t=le();g(0,"app-sezione-revisioni",24),q("carUpdated",function(i){U(t);let o=D(2);return j(o.onCarUpdated(i))}),m()}if(n&2){let t=D(2);we("car",t.car())}}function N9(n,e){if(n&1){let t=le();g(0,"div",7)(1,"div",8)(2,"div")(3,"h1",9),N(4,"i",10),E(5),m(),g(6,"p",11),E(7,"Targa: "),g(8,"strong",12),E(9),m()()(),g(10,"button",13),q("click",function(){U(t);let i=D();return j(i.goBack())}),N(11,"i",14),E(12," Torna all'elenco "),m()()(),G(13,S9,4,1,"div",15),G(14,A9,4,1,"div",16),g(15,"div",17),G(16,M9,1,2,"app-sezione-anagrafica",18),G(17,R9,1,1,"app-sezione-coproprietari",19),G(18,P9,1,1,"app-sezione-assicurazioni",19),G(19,x9,1,1,"app-sezione-manutenzione",19),G(20,O9,1,1,"app-sezione-revisioni",19),m()}if(n&2){let t=D();C(5),Nr(" ",t.car().marca," ",t.car().modello," "),C(4),ke(t.car().targa),C(4),K(t.successMessage()?13:-1),C(),K(t.errorMessage()?14:-1),C(2),K(t.car()&&t.proprietario()?16:-1),C(),K(t.car()?17:-1),C(),K(t.car()?18:-1),C(),K(t.car()?19:-1),C(),K(t.car()?20:-1)}}var mm=class n{route=P(fr);router=P(xt);carService=P(fo);userService=P(Yr);car=re(null);proprietario=re(null);loading=re(!0);error=re(null);successMessage=re(null);errorMessage=re(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("targa");if(!e){this.error.set("Targa non specificata"),this.loading.set(!1);return}this.loadCar(e)}async loadCar(e){this.carService.getByTarga(e).subscribe({next:async t=>{t?(t.assicurazioni||(t.assicurazioni=[]),t.manutenzioni||(t.manutenzioni=[]),t.revisioni||(t.revisioni=[]),t.coProprietari||(t.coProprietari=[]),this.car.set(t),this.proprietario.set(t.proprietario)):this.error.set("Auto non trovata"),this.loading.set(!1)},error:t=>{console.error("Errore nel caricamento dell'auto:",t),this.error.set("Errore nel caricamento dell'auto"),this.loading.set(!1)}})}onCarUpdated(e){let t=this.cleanUndefinedFields(e);this.carService.update(e.targa,t).subscribe({next:()=>{this.successMessage.set("Modifiche salvate con successo"),this.car.set(e),setTimeout(()=>this.successMessage.set(null),3e3)},error:r=>{console.error("Errore nell'aggiornamento:",r),this.errorMessage.set("Errore nel salvataggio delle modifiche"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}cleanUndefinedFields(e){if(e==null)return null;if(e instanceof Date)return e;if(Array.isArray(e))return e.map(t=>this.cleanUndefinedFields(t));if(typeof e=="object"){let t={};for(let r in e)e.hasOwnProperty(r)&&e[r]!==void 0&&(t[r]=this.cleanUndefinedFields(e[r]));return t}return e}goBack(){this.router.navigate(["/elenco-auto"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-dettaglio-auto"]],decls:5,vars:3,consts:[[1,"dettaglio-auto-container"],[1,"container"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"page-header"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"page-subtitle"],[1,"text-uppercase"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-left","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"accordion-sections"],[3,"car","proprietario"],[3,"car"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[3,"carUpdated","car","proprietario"],[3,"carUpdated","car"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1),G(2,T9,4,0,"div",2),G(3,D9,3,1,"div",3),G(4,N9,21,10),m()()),t&2&&(C(2),K(r.loading()?2:-1),C(),K(r.error()?3:-1),C(),K(!r.loading()&&!r.error()&&r.car()?4:-1))},dependencies:[Ge,dm,hm,fm,pm,gm],styles:[".dettaglio-auto-container[_ngcontent-%COMP%]{padding:2rem 0;min-height:100vh}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:600}.dettaglio-auto-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 767px){.dettaglio-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function k9(n,e){if(n&1){let t=le();g(0,"div",8),N(1,"i",20),E(2),g(3,"button",21),q("click",function(){U(t);let i=D();return j(i.errorMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.errorMessage()," ")}}function F9(n,e){if(n&1){let t=le();g(0,"div",9),N(1,"i",22),E(2),g(3,"button",21),q("click",function(){U(t);let i=D();return j(i.successMessage.set(null))}),m()()}if(n&2){let t=D();C(2),ue(" ",t.successMessage()," ")}}function L9(n,e){if(n&1){let t=le();g(0,"div",11)(1,"div",12)(2,"input",23),Z("ngModelChange",function(i){U(t);let o=D();return X(o.nome,i)||(o.nome=i),j(i)}),m(),g(3,"label",24),N(4,"i",25),E(5,"Nome "),m()(),g(6,"div",12)(7,"input",26),Z("ngModelChange",function(i){U(t);let o=D();return X(o.cognome,i)||(o.cognome=i),j(i)}),m(),g(8,"label",27),N(9,"i",25),E(10,"Cognome "),m()()()}if(n&2){let t=D();C(2),Q("ngModel",t.nome),C(5),Q("ngModel",t.cognome)}}function V9(n,e){if(n&1&&(N(0,"span",28),E(1)),n&2){let t=D();C(),ue(" ",t.isRegisterMode()?"Registrazione...":"Accesso..."," ")}}function U9(n,e){if(n&1&&(N(0,"i",29),E(1)),n&2){let t=D();Te("bi-box-arrow-in-right",!t.isRegisterMode())("bi-person-plus-fill",t.isRegisterMode()),C(),ue(" ",t.isRegisterMode()?"Registrati":"Accedi"," ")}}var _m=class n{authService=P(En);router=P(xt);isRegisterMode=re(!1);isLoading=re(!1);errorMessage=re(null);successMessage=re(null);currentYear=new Date().getFullYear();nome="";cognome="";codiceFiscale="";toggleMode(){this.isRegisterMode.update(e=>!e),this.clearMessages(),this.nome="",this.cognome="",this.codiceFiscale=""}onSubmit(){if(this.clearMessages(),!this.codiceFiscale.trim()){this.errorMessage.set("Inserisci il codice fiscale.");return}if(this.codiceFiscale.length!==16){this.errorMessage.set("Il codice fiscale deve essere di 16 caratteri.");return}if(this.isRegisterMode()&&(!this.nome.trim()||!this.cognome.trim())){this.errorMessage.set("Inserisci nome e cognome.");return}this.isLoading.set(!0),this.isRegisterMode()?this.handleRegister():this.handleLogin()}handleLogin(){this.authService.loginByCodiceFiscale(this.codiceFiscale.toUpperCase()).subscribe({next:e=>{this.isLoading.set(!1),e.success?(this.successMessage.set("Login effettuato con successo!"),setTimeout(()=>{this.router.navigate(["/"])},500)):this.errorMessage.set(e.message||"Errore durante il login.")},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante il login. Riprova."),console.error("Errore login:",e)}})}handleRegister(){let e={nome:this.nome.trim().toUpperCase(),cognome:this.cognome.trim().toUpperCase(),codiceFiscale:this.codiceFiscale.trim().toUpperCase(),email:null,dataDiNascita:null,annoConseguimentoPatente:null};this.authService.register(e).subscribe({next:t=>{this.isLoading.set(!1),t.success?(this.successMessage.set("Registrazione completata! Accesso in corso..."),setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage.set(t.message||"Errore durante la registrazione.")},error:t=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante la registrazione. Riprova."),console.error("Errore registrazione:",t)}})}clearMessages(){this.errorMessage.set(null),this.successMessage.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"card-header"],[1,"logo"],[1,"bi","bi-car-front-fill"],[1,"title"],[1,"subtitle"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[3,"ngSubmit"],[1,"register-fields"],[1,"form-floating","mb-3"],["type","text","id","codiceFiscale","placeholder","Codice Fiscale","name","codiceFiscale","maxlength","16","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","codiceFiscale"],[1,"bi","bi-credit-card-fill","me-2"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"toggle-text"],["type","button",1,"btn","btn-link",3,"click","disabled"],[1,"bi","bi-exclamation-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-check-circle-fill","me-2"],["type","text","id","nome","placeholder","Nome","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","nome"],[1,"bi","bi-person-fill","me-2"],["type","text","id","cognome","placeholder","Cognome","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","cognome"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"me-2"]],template:function(t,r){t&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),N(4,"i",4),m(),g(5,"h2",5),E(6),m(),g(7,"p",6),E(8),m()(),g(9,"div",7),G(10,k9,4,1,"div",8),G(11,F9,4,1,"div",9),g(12,"form",10),q("ngSubmit",function(){return r.onSubmit()}),G(13,L9,11,2,"div",11),g(14,"div",12)(15,"input",13),Z("ngModelChange",function(o){return X(r.codiceFiscale,o)||(r.codiceFiscale=o),o}),m(),g(16,"label",14),N(17,"i",15),E(18,"Codice Fiscale "),m()(),g(19,"button",16),G(20,V9,2,1)(21,U9,2,5),m()(),g(22,"div",17)(23,"p",18),E(24),g(25,"button",19),q("click",function(){return r.toggleMode()}),E(26),m()()()()()()),t&2&&(C(6),ke(r.isRegisterMode()?"Registrati":"Benvenuto"),C(2),ke(r.isRegisterMode()?"Crea il tuo account":"Accedi al tuo account"),C(2),K(r.errorMessage()?10:-1),C(),K(r.successMessage()?11:-1),C(2),K(r.isRegisterMode()?13:-1),C(2),Q("ngModel",r.codiceFiscale),C(4),we("disabled",r.isLoading()),C(),K(r.isLoading()?20:21),C(4),ue(" ",r.isRegisterMode()?"Hai gi\xE0 un account?":"Non hai un account?"," "),C(),we("disabled",r.isLoading()),C(),ue(" ",r.isRegisterMode()?"Accedi":"Registrati"," "))},dependencies:[en,Ua,Ot,Xt,Va,rs,is,Bt,ns,Ge],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:3rem 2rem 2rem;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.2))}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:1.5rem .75rem .5rem;height:auto;min-height:58px;font-size:1rem;line-height:1.5;transition:all .3s ease;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-.75rem) translate(.15rem)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem .75rem;color:#64748b;transform-origin:0 0;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-fields[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:1rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:#64748b;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;padding:0 .25rem;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:3rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Zu=(n,e)=>{let t=P(En),r=P(xt);return t.isAuthenticated()?!0:r.createUrlTree(["/login"])};var YN=[{path:"login",component:_m},{path:"",component:cm,canActivate:[Zu]},{path:"elenco-auto",component:lm,canActivate:[Zu]},{path:"nuova-auto",component:um,canActivate:[Zu]},{path:"dettaglio-auto/:targa",component:mm,canActivate:[Zu],data:{prerender:!1}},{path:"**",redirectTo:"login"}];var Db="Service workers are disabled or not supported by this browser",_c=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new he(r=>r.error(new H(5601,!1)));else{let r=null,i=new et;this.worker=new he(u=>(r!==null&&u.next(r),i.subscribe(h=>u.next(h))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Tt(()=>e.getRegistration().then(u=>{if(!u)throw new H(5601,!1);return u})));let s=new et;this.events=s.asObservable();let a=u=>{let{data:h}=u;h?.type&&s.next(h)};e.addEventListener("message",a),t?.get(St,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(sn(1)).subscribe(i=>{i.postMessage(L({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(mt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(sn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(mt(i=>i.nonce===e),sn(1),ne(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},j9=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new et;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ei,this.notificationClicks=ei,this.notificationCloses=ei,this.pushSubscriptionChanges=ei,this.subscription=ei;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ne(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ne(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ne(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ne(i=>i.data)),this.pushManager=this.sw.registration.pipe(ne(i=>i.pushManager));let r=this.pushManager.pipe(Tt(i=>i.getSubscription()));this.subscription=new he(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Db));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Tt(l=>l.subscribe(r)),sn(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Db));let t=r=>{if(r===null)throw new H(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new H(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(sn(1),Tt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(me(_c))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})(),z9=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ei,this.unrecoverable=ei;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Db));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new H(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(me(_c))};static \u0275prov=ee({token:n,factory:n.\u0275fac})}return n})();var ZN=new W("");function B9(){let n=P(Ju);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=P(ZN),t=P(Ne),r=P(St);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=QN(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),QN(+a[0])]);break;default:throw new H(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(sr(5604,!1)))})})}function QN(n){return new Promise(e=>setTimeout(e,n))}function $9(n,e){return new _c(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Ju=class{enabled;updateViaCache;type;scope;registrationStrategy};function JN(n,e={}){return At([j9,z9,{provide:ZN,useValue:n},{provide:Ju,useValue:e},{provide:_c,useFactory:$9,deps:[Ju,st]},Tf(B9)])}var XN={production:!0,firebase:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}};var ek={providers:[hv(),i0(),iE(YN),L1(F1()),JN("ngsw-worker.js",{enabled:!Al(),registrationStrategy:"registerWhenStable:30000"}),xP(()=>OP(XN.firebase)),qN(()=>GN())]};var H9=()=>({exact:!0}),vm=class n{authService=P(En);isMobileMenuOpen=re(!1);toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}logout(){this.closeMobileMenu(),this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-header"]],decls:32,vars:2,consts:[[1,"mobile-navbar","d-lg-none"],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","py-3"],[1,"app-title","mb-0"],[1,"bi","bi-car-front-fill","me-2"],["type","button",1,"btn","btn-link","logout-btn-mobile",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"sidebar","d-none","d-lg-flex"],[1,"sidebar-header"],[1,"app-title"],[1,"bi","bi-car-front-fill"],[1,"ms-2"],[1,"sidebar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"ms-3"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-plus-circle-fill"],[1,"sidebar-footer"],["type","button",1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(g(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3),N(4,"i",4),E(5," Car Handler "),m(),g(6,"button",5),q("click",function(){return r.logout()}),N(7,"i",6),m()()()(),g(8,"aside",7)(9,"div",8)(10,"h1",9),N(11,"i",10),g(12,"span",11),E(13,"Car Handler"),m()()(),g(14,"nav",12)(15,"a",13),N(16,"i",14),g(17,"span",15),E(18,"Homepage"),m()(),g(19,"a",16),N(20,"i",17),g(21,"span",15),E(22,"Elenco Auto"),m()(),g(23,"a",18),N(24,"i",19),g(25,"span",15),E(26,"Nuova Auto"),m()()(),g(27,"div",20)(28,"button",21),q("click",function(){return r.logout()}),N(29,"i",6),g(30,"span",11),E(31,"Logout"),m()()()()),t&2&&(C(15),we("routerLinkActiveOptions",Tl(1,H9)))},dependencies:[Vr,ou,Ge],styles:['.mobile-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 10px #0000001a;z-index:1030}.mobile-navbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.5px}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;padding:0;border:none;transition:transform .3s ease}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover, .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background:linear-gradient(180deg,#667eea,#764ba2);box-shadow:2px 0 15px #0000001a;flex-direction:column;z-index:1000;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;letter-spacing:-.5px;margin:0}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#fffc;font-weight:500;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border-left:3px solid transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:0;height:100%;background:#ffffff1a;transition:width .3s ease;z-index:0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background:#ffffff26;border-left-color:#fff;font-weight:600;box-shadow:inset 0 0 15px #0000001a}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 10px #ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:.875rem 1rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}']})};var q9=()=>({exact:!0}),ym=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-footer"]],decls:13,vars:2,consts:[[1,"bottom-nav","d-lg-none"],["routerLink","/","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"nav-label"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-plus-circle-fill"]],template:function(t,r){t&1&&(g(0,"nav",0)(1,"a",1),N(2,"i",2),g(3,"span",3),E(4,"Home"),m()(),g(5,"a",4),N(6,"i",5),g(7,"span",3),E(8,"Elenco"),m()(),g(9,"a",6),N(10,"i",7),g(11,"span",3),E(12,"Nuova"),m()()()),t&2&&(C(),we("routerLinkActiveOptions",Tl(1,q9)))},dependencies:[Vr,ou,Ge],styles:['.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;height:65px;background:#fff;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:space-around;align-items:center;z-index:1000;padding:.5rem 0}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;text-decoration:none;color:#94a3b8;transition:all .3s ease;padding:.5rem;position:relative}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%) scaleX(0);width:40px;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:0 0 3px 3px;transition:transform .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#667eea}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{transform:translate(-50%) scaleX(1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-weight:600}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 991.98px){[_nghost-%COMP%]{display:block}}']})};function W9(n,e){n&1&&N(0,"app-header")}function G9(n,e){n&1&&N(0,"app-footer")}var Em=class n{router=P(xt);title=re("car-handler-pwa");isLoginPage=re(!1);constructor(){this.checkRoute(this.router.url),this.router.events.pipe(mt(e=>e instanceof Un)).subscribe(e=>{this.checkRoute(e.url)})}checkRoute(e){this.isLoginPage.set(e.includes("/login"))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-root"]],decls:4,vars:4,template:function(t,r){t&1&&(G(0,W9,1,0,"app-header"),g(1,"main"),N(2,"router-outlet"),m(),G(3,G9,1,0,"app-footer")),t&2&&(K(r.isLoginPage()?-1:0),C(),Te("login-main",r.isLoginPage()),C(2),K(r.isLoginPage()?-1:3))},dependencies:[nu,vm,ym,Ge],styles:["main[_ngcontent-%COMP%]{padding:2rem 0}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-left:280px;min-height:100vh}}@media (max-width: 991.98px){main[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:65px;min-height:calc(100vh - 135px)}}main.login-main[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh}"]})};P0(Em,ek).catch(n=>console.error(n));
