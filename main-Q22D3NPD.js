var Nk=Object.defineProperty,kk=Object.defineProperties;var Fk=Object.getOwnPropertyDescriptors;var gd=Object.getOwnPropertySymbols;var Db=Object.prototype.hasOwnProperty,Sb=Object.prototype.propertyIsEnumerable;var Tb=(n,e,t)=>e in n?Nk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})Db.call(e,t)&&Tb(n,t,e[t]);if(gd)for(var t of gd(e))Sb.call(e,t)&&Tb(n,t,e[t]);return n},te=(n,e)=>kk(n,Fk(e));var Ab=(n,e)=>{var t={};for(var r in n)Db.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&gd)for(var r of gd(n))e.indexOf(r)<0&&Sb.call(n,r)&&(t[r]=n[r]);return t};var $m;function md(){return $m}function _r(n){let e=$m;return $m=n,e}var Mb=Symbol("NotFound");function Ns(n){return n===Mb||n?.name==="\u0275NotFound"}var Yt=null,vd=!1,Hm=1,Lk=null,Qt=Symbol("SIGNAL");function he(n){let e=Yt;return Yt=n,e}function Cd(){return Yt}var ks={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fs(n){if(vd)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let e=Yt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Yt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Yt.producers,t!==void 0&&t.producer===n)){Yt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Yt&&(!r||Uk(i,Yt)))return;let o=Vs(Yt),s={producer:n,consumer:Yt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Yt.producersTail=s,e!==void 0?e.nextProducer=s:Yt.producers=s,o&&xb(n,s)}function Rb(){Hm++}function wd(n){if(!(Vs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hm)){if(!n.producerMustRecompute(n)&&!Vc(n)){Ed(n);return}n.producerRecomputeValue(n),Ed(n)}}function qm(n){if(n.consumers===void 0)return;let e=vd;vd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Vk(r)}}finally{vd=e}}function Wm(){return Yt?.consumerAllowSignalWrites!==!1}function Vk(n){n.dirty=!0,qm(n),n.consumerMarkedDirty?.(n)}function Ed(n){n.dirty=!1,n.lastCleanEpoch=Hm}function Ls(n){return n&&Pb(n),he(n)}function Pb(n){n.producersTail=void 0,n.recomputing=!0}function Lc(n,e){he(e),n&&Ob(n)}function Ob(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Vs(n))do t=Gm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Vc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(wd(t),r!==t.version))return!0}return!1}function Uc(n){if(Vs(n)){let e=n.producers;for(;e!==void 0;)e=Gm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function xb(n,e){let t=n.consumersTail,r=Vs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)xb(i.producer,i)}function Gm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Vs(e)){let o=e.producers;for(;o!==void 0;)o=Gm(o)}return t}function Vs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Id(n){Lk?.(n)}function Uk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function bd(n,e){return Object.is(n,e)}function Td(n,e){let t=Object.create(jk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(wd(t),Fs(t),t.value===Fc)throw t.error;return t.value};return r[Qt]=t,Id(t),r}var yd=Symbol("UNSET"),_d=Symbol("COMPUTING"),Fc=Symbol("ERRORED"),jk=te(V({},ks),{value:yd,dirty:!0,error:null,equal:bd,kind:"computed",producerMustRecompute(n){return n.value===yd||n.value===_d},producerRecomputeValue(n){if(n.value===_d)throw new Error("");let e=n.value;n.value=_d;let t=Ls(n),r,i=!1;try{r=n.computation(),he(null),i=e!==yd&&e!==Fc&&r!==Fc&&n.equal(e,r)}catch(o){r=Fc,n.error=o}finally{Lc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Bk(){throw new Error}var Nb=Bk;function kb(n){Nb(n)}function Km(n){Nb=n}var zk=null;function Ym(n,e){let t=Object.create(Dd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Fb(t);return r[Qt]=t,Id(t),[r,s=>Us(t,s),s=>Qm(t,s)]}function Fb(n){return Fs(n),n.value}function Us(n,e){Wm()||kb(n),n.equal(n.value,e)||(n.value=e,$k(n))}function Qm(n,e){Wm()||kb(n),Us(n,e(n.value))}var Dd=te(V({},ks),{equal:bd,value:void 0,kind:"signal"});function $k(n){n.version++,Rb(),qm(n),zk?.(n)}function _e(n){return typeof n=="function"}function js(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Sd=js(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function yo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(_e(r))try{r()}catch(o){e=o instanceof Sd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Lb(o)}catch(s){e=e??[],s instanceof Sd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Sd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Lb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&yo(t,e)}remove(e){let{_finalizers:t}=this;t&&yo(t,e),e instanceof n&&e._removeParent(this)}};ot.EMPTY=(()=>{let n=new ot;return n.closed=!0,n})();var Zm=ot.EMPTY;function Ad(n){return n instanceof ot||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function Lb(n){_e(n)?n():n.unsubscribe()}var nr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bs={setTimeout(n,e,...t){let{delegate:r}=Bs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Bs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Md(n){Bs.setTimeout(()=>{let{onUnhandledError:e}=nr;if(e)e(n);else throw n})}function _o(){}var Vb=Jm("C",void 0,void 0);function Ub(n){return Jm("E",void 0,n)}function jb(n){return Jm("N",n,void 0)}function Jm(n,e,t){return{kind:n,value:e,error:t}}var Eo=null;function zs(n){if(nr.useDeprecatedSynchronousErrorHandling){let e=!Eo;if(e&&(Eo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Eo;if(Eo=null,t)throw r}}else n()}function Bb(n){nr.useDeprecatedSynchronousErrorHandling&&Eo&&(Eo.errorThrown=!0,Eo.error=n)}var Co=class extends ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ad(e)&&e.add(this)):this.destination=Wk}static create(e,t,r){return new $s(e,t,r)}next(e){this.isStopped?ev(jb(e),this):this._next(e)}error(e){this.isStopped?ev(Ub(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ev(Vb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hk=Function.prototype.bind;function Xm(n,e){return Hk.call(n,e)}var tv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rd(r)}else Rd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rd(t)}}},$s=class extends Co{constructor(e,t,r){super();let i;if(_e(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xm(e.next,o),error:e.error&&Xm(e.error,o),complete:e.complete&&Xm(e.complete,o)}):i=e}this.destination=new tv(i)}};function Rd(n){nr.useDeprecatedSynchronousErrorHandling?Bb(n):Md(n)}function qk(n){throw n}function ev(n,e){let{onStoppedNotification:t}=nr;t&&Bs.setTimeout(()=>t(n,e))}var Wk={closed:!0,next:_o,error:qk,complete:_o};var Hs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wn(n){return n}function Pd(...n){return nv(n)}function nv(n){return n.length===0?wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Kk(t)?t:new $s(t,r,i);return zs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=zb(r),new r((i,o)=>{let s=new $s({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hs](){return this}pipe(...t){return nv(t)(this)}toPromise(t){return t=zb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function zb(n){var e;return(e=n??nr.Promise)!==null&&e!==void 0?e:Promise}function Gk(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function Kk(n){return n&&n instanceof Co||Gk(n)&&Ad(n)}function rv(n){return _e(n?.lift)}function Re(n){return e=>{if(rv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,e,t,r,i){return new iv(n,e,t,r,i)}var iv=class extends Co{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qs(){return Re((n,e)=>{let t=null;n._refCount++;let r=Se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ws=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ot;let t=this.getSubject();e.add(this.source.subscribe(Se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ot.EMPTY)}return e}refCount(){return qs()(this)}};var $b=js(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $b}next(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Zm:(this.currentObservers=null,o.push(t),new ot(()=>{this.currentObservers=null,yo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new Od(e,t),n})(),Od=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Zm}};var Ut=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ov={now(){return(ov.delegate||Date).now()},delegate:void 0};var xd=class extends ot{constructor(e,t){super()}schedule(e,t=0){return this}};var jc={setInterval(n,e,...t){let{delegate:r}=jc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=jc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Gs=class extends xd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return jc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&jc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,yo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ks=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ks.now=ov.now;var Ys=class extends Ks{constructor(e,t=Ks.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var sv=new Ys(Gs);var Nd=class extends Gs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var kd=class extends Ys{};var av=new kd(Nd);var pn=new ce(n=>n.complete());function Hb(n){return n&&_e(n.schedule)}function qb(n){return n[n.length-1]}function Fd(n){return _e(qb(n))?n.pop():void 0}function Pi(n){return Hb(qb(n))?n.pop():void 0}function cv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Gb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(p){s(p)}}function l(f){try{u(r.throw(f))}catch(p){s(p)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Wb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wo(n){return this instanceof wo?(this.v=n,this):new wo(n)}function Kb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(T){return Promise.resolve(T).then(_,p)}}function a(_,T){r[_]&&(i[_]=function(x){return new Promise(function(N,j){o.push([_,x,N,j])>1||l(_,x)})},T&&(i[_]=T(i[_])))}function l(_,T){try{u(r[_](T))}catch(x){g(o[0][3],x)}}function u(_){_.value instanceof wo?Promise.resolve(_.value.v).then(f,p):g(o[0][2],_)}function f(_){l("next",_)}function p(_){l("throw",_)}function g(_,T){_(T),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Yb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Wb=="function"?Wb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Ld=n=>n&&typeof n.length=="number"&&typeof n!="function";function Vd(n){return _e(n?.then)}function Ud(n){return _e(n[Hs])}function jd(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function Bd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Yk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zd=Yk();function $d(n){return _e(n?.[zd])}function Hd(n){return Kb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield wo(t.read());if(i)return yield wo(void 0);yield yield wo(r)}}finally{t.releaseLock()}})}function qd(n){return _e(n?.getReader)}function pt(n){if(n instanceof ce)return n;if(n!=null){if(Ud(n))return Qk(n);if(Ld(n))return Zk(n);if(Vd(n))return Jk(n);if(jd(n))return Qb(n);if($d(n))return Xk(n);if(qd(n))return eF(n)}throw Bd(n)}function Qk(n){return new ce(e=>{let t=n[Hs]();if(_e(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Zk(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Jk(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Md)})}function Xk(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Qb(n){return new ce(e=>{tF(n,e).catch(t=>e.error(t))})}function eF(n){return Qb(Hd(n))}function tF(n,e){var t,r,i,o;return Gb(this,void 0,void 0,function*(){try{for(t=Yb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function gn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Oi(n,e=0){return Re((t,r)=>{t.subscribe(Se(r,i=>gn(r,n,()=>r.next(i),e),()=>gn(r,n,()=>r.complete(),e),i=>gn(r,n,()=>r.error(i),e)))})}function xi(n,e=0){return Re((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Zb(n,e){return pt(n).pipe(xi(e),Oi(e))}function Jb(n,e){return pt(n).pipe(xi(e),Oi(e))}function Xb(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eT(n,e){return new ce(t=>{let r;return gn(t,e,()=>{r=n[zd](),gn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>_e(r?.return)&&r.return()})}function Wd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{gn(t,e,()=>{let r=n[Symbol.asyncIterator]();gn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tT(n,e){return Wd(Hd(n),e)}function nT(n,e){if(n!=null){if(Ud(n))return Zb(n,e);if(Ld(n))return Xb(n,e);if(Vd(n))return Jb(n,e);if(jd(n))return Wd(n,e);if($d(n))return eT(n,e);if(qd(n))return tT(n,e)}throw Bd(n)}function Me(n,e){return e?nT(n,e):pt(n)}function re(...n){let e=Pi(n);return Me(n,e)}function Qs(n,e){let t=_e(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function lv(n){return!!n&&(n instanceof ce||_e(n.lift)&&_e(n.subscribe))}var Xr=js(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return Re((t,r)=>{let i=0;t.subscribe(Se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:nF}=Array;function rF(n,e){return nF(e)?n(...e):n(e)}function Gd(n){return J(e=>rF(n,e))}var{isArray:iF}=Array,{getPrototypeOf:oF,prototype:sF,keys:aF}=Object;function Kd(n){if(n.length===1){let e=n[0];if(iF(e))return{args:e,keys:null};if(cF(e)){let t=aF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function cF(n){return n&&typeof n=="object"&&oF(n)===sF}function Yd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qd(...n){let e=Pi(n),t=Fd(n),{args:r,keys:i}=Kd(n);if(r.length===0)return Me([],e);let o=new ce(lF(r,e,i?s=>Yd(i,s):wn));return t?o.pipe(Gd(t)):o}function lF(n,e,t=wn){return r=>{rT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)rT(e,()=>{let u=Me(n[l],e),f=!1;u.subscribe(Se(r,p=>{o[l]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function rT(n,e,t){n?gn(t,n,e):e()}function iT(n,e,t,r,i,o,s,a){let l=[],u=0,f=0,p=!1,g=()=>{p&&!l.length&&!u&&e.complete()},_=x=>u<r?T(x):l.push(x),T=x=>{o&&e.next(x),u++;let N=!1;pt(t(x,f++)).subscribe(Se(e,j=>{i?.(j),o?_(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;l.length&&u<r;){let j=l.shift();s?gn(e,s,()=>T(j)):T(j)}g()}catch(j){e.error(j)}}))};return n.subscribe(Se(e,_,()=>{p=!0,g()})),()=>{a?.()}}function gt(n,e,t=1/0){return _e(e)?gt((r,i)=>J((o,s)=>e(r,o,i,s))(pt(n(r,i))),t):(typeof e=="number"&&(t=e),Re((r,i)=>iT(r,i,n,t)))}function Zs(n=1/0){return gt(wn,n)}function oT(){return Zs(1)}function Js(...n){return oT()(Me(n,Pi(n)))}function Bc(n){return new ce(e=>{pt(n()).subscribe(e)})}function uv(...n){let e=Fd(n),{args:t,keys:r}=Kd(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let p=!1;pt(t[f]).subscribe(Se(o,g=>{p||(p=!0,u--),a[f]=g},()=>l--,void 0,()=>{(!l||!p)&&(u||o.next(r?Yd(r,a):a),o.complete())}))}});return e?i.pipe(Gd(e)):i}var ei=new ce(_o);function mt(n,e){return Re((t,r)=>{let i=0;t.subscribe(Se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function mn(n){return Re((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Se(t,void 0,void 0,s=>{o=pt(n(s,mn(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function sT(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(Se(s,f=>{let p=u++;l=a?n(l,f,p):(a=!0,f),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Io(n,e){return _e(e)?gt(n,e,1):gt(n,1)}function Ni(n){return Re((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sn(n){return n<=0?()=>pn:Re((e,t)=>{let r=0;e.subscribe(Se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zd(n=uF){return Re((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uF(){return new Xr}function zc(n){return Re((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ti(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):wn,sn(1),t?Ni(e):Zd(()=>new Xr))}function Xs(n){return n<=0?()=>pn:Re((e,t)=>{let r=[];e.subscribe(Se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function dv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):wn,Xs(1),t?Ni(e):Zd(()=>new Xr))}function Jd(n,e){return Re(sT(n,e,arguments.length>=2,!0))}function Xd(...n){let e=Pi(n);return Re((t,r)=>{(e?Js(n,t,e):Js(n,t)).subscribe(r)})}function Tt(n,e){return Re((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Se(r,l=>{i?.unsubscribe();let u=0,f=o++;pt(n(l,f)).subscribe(i=Se(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ef(n){return Re((e,t)=>{pt(n).subscribe(Se(t,()=>t.complete(),_o)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=_e(n)||e||t?{next:n,error:e,complete:t}:n;return r?Re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Se(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):wn}function aT(n){let e=he(null);try{return n()}finally{he(e)}}var ki=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},bv=new ki("20.3.15");var of="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,t){super(ir(e,t)),this.code=e}};function dF(n){return`NG0${Math.abs(n)}`}function ir(n,e){return`${dF(n)}${e?": "+e:""}`}var Cr=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("")}function uT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ri(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(ri).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Tv(n,e){return n?e?`${n} ${e}`:n:e||""}var fF=Be({__forward_ref__:Be});function cn(n){return n.__forward_ref__=cn,n.toString=function(){return ri(this())},n}function jt(n){return Dv(n)?n():n}function Dv(n){return typeof n=="function"&&n.hasOwnProperty(fF)&&n.__forward_ref__===cn}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function or(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wc(n){return hF(n,sf)}function Sv(n){return Wc(n)!==null}function hF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function pF(n){let e=n?.[sf]??null;return e||null}function hv(n){return n&&n.hasOwnProperty(nf)?n[nf]:null}var sf=Be({\u0275prov:Be}),nf=Be({\u0275inj:Be}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Av(n){return n&&!!n.\u0275providers}var Mv=Be({\u0275cmp:Be}),Rv=Be({\u0275dir:Be}),Pv=Be({\u0275pipe:Be}),Ov=Be({\u0275mod:Be}),Hc=Be({\u0275fac:Be}),Ao=Be({__NG_ELEMENT_ID__:Be}),cT=Be({__NG_ENV_ID__:Be});function Mo(n){return typeof n=="string"?n:n==null?"":String(n)}function dT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Mo(n)}var fT=Be({ngErrorCode:Be}),gF=Be({ngErrorMessage:Be}),mF=Be({ngTokenPath:Be});function xv(n,e){return hT("",-200,e)}function af(n,e){throw new z(-201,!1)}function hT(n,e,t){let r=new z(e,n);return r[fT]=e,r[gF]=n,t&&(r[mF]=t),r}function vF(n){return n[fT]}var pv;function pT(){return pv}function an(n){let e=pv;return pv=n,e}function Nv(n,e,t){let r=Wc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;af(n,"Injector")}var yF={},bo=yF,gv="__NG_DI_FLAG__",mv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=To(t)||0;try{return this.injector.get(e,r&8?null:bo,r)}catch(i){if(Ns(i))return i;throw i}}};function _F(n,e=0){let t=md();if(t===void 0)throw new z(-203,!1);if(t===null)return Nv(n,void 0,e);{let r=EF(e),i=t.retrieve(n,r);if(Ns(i)){if(r.optional)return null;throw i}return i}}function me(n,e=0){return(pT()||_F)(jt(n),e)}function R(n,e){return me(n,To(e))}function To(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function EF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function vv(n){let e=[];for(let t=0;t<n.length;t++){let r=jt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=CF(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(me(i,o))}else e.push(me(r))}return e}function gT(n,e){return n[gv]=e,n.prototype[gv]=e,n}function CF(n){return n[gv]}function Fi(n,e){let t=n.hasOwnProperty(Hc);return t?n[Hc]:null}function mT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function vT(n){return n.flat(Number.POSITIVE_INFINITY)}function cf(n,e){n.forEach(t=>Array.isArray(t)?cf(t,e):e(t))}function kv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function _T(n,e,t){let r=ta(n,e);return r>=0?n[r|1]=t:(r=~r,yT(n,r,e,t)),r}function lf(n,e){let t=ta(n,e);if(t>=0)return n[t|1]}function ta(n,e){return wF(n,e,1)}function wF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Vi={},In=[],zn=new $(""),Fv=new $("",-1),Lv=new $(""),qc=class{get(e,t=bo){if(t===bo){let i=hT("",-201);throw i.name="\u0275NotFound",i}return t}};function Vv(n){return n[Ov]||null}function ii(n){return n[Mv]||null}function uf(n){return n[Rv]||null}function Uv(n){return n[Pv]||null}function At(n){return{\u0275providers:n}}function ET(n){return At([{provide:zn,multi:!0,useValue:n}])}function CT(...n){return{\u0275providers:df(!0,n),\u0275fromNgModule:!0}}function df(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return cf(e,s=>{let a=s;rf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wT(i,o),t}function wT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];jv(i,o=>{e(o,r)})}}function rf(n,e,t,r){if(n=jt(n),!n)return!1;let i=null,o=hv(n),s=!o&&ii(n);if(!o&&!s){let l=n.ngModule;if(o=hv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)rf(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{cf(o.imports,f=>{rf(f,e,t,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&wT(u,e)}if(!a){let u=Fi(i)||(()=>new i);e({provide:i,useFactory:u,deps:In},i),e({provide:Lv,useValue:i,multi:!0},i),e({provide:zn,useValue:()=>me(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;jv(l,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function jv(n,e){for(let t of n)Av(t)&&(t=t.\u0275providers),Array.isArray(t)?jv(t,e):e(t)}var IF=Be({provide:String,useValue:Be});function IT(n){return n!==null&&typeof n=="object"&&IF in n}function bF(n){return!!(n&&n.useExisting)}function TF(n){return!!(n&&n.useFactory)}function Do(n){return typeof n=="function"}function bT(n){return!!n.useClass}var Kc=new $(""),tf={},lT={},fv;function Yc(){return fv===void 0&&(fv=new qc),fv}var lt=class{},So=class extends lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,_v(e,s=>this.processProvider(s)),this.records.set(Fv,ea(void 0,this)),i.has("environment")&&this.records.set(lt,ea(void 0,this));let o=this.records.get(Kc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Lv,In,{self:!0}))}retrieve(e,t){let r=To(t)||0;try{return this.get(e,bo,r)}catch(i){if(Ns(i))return i;throw i}}destroy(){$c(this),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return $c(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){$c(this);let t=_r(this),r=an(void 0),i;try{return e()}finally{_r(t),an(r)}}get(e,t=bo,r){if($c(this),e.hasOwnProperty(cT))return e[cT](this);let i=To(r),o,s=_r(this),a=an(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let f=RF(e)&&Wc(e);f&&this.injectableDefInScope(f)?u=ea(yv(e),tf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let l=i&2?Yc():this.parent;return t=i&8&&t===bo?null:t,l.get(e,t)}catch(l){let u=vF(l);throw u===-200||u===-201?new z(u,null):l}finally{an(a),_r(s)}}resolveInjectorInitializers(){let e=he(null),t=_r(this),r=an(void 0),i;try{let o=this.get(zn,In,{self:!0});for(let s of o)s()}finally{_r(t),an(r),he(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(ri(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=jt(e);let t=Do(e)?e:jt(e&&e.provide),r=SF(e);if(!Do(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ea(void 0,tf,!0),i.factory=()=>vv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=he(null);try{if(t.value===lT)throw xv(ri(e));return t.value===tf&&(t.value=lT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&MF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{he(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=jt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yv(n){let e=Wc(n),t=e!==null?e.factory:Fi(n);if(t!==null)return t;if(n instanceof $)throw new z(204,!1);if(n instanceof Function)return DF(n);throw new z(204,!1)}function DF(n){if(n.length>0)throw new z(204,!1);let t=pF(n);return t!==null?()=>t.factory(n):()=>new n}function SF(n){if(IT(n))return ea(void 0,n.useValue);{let e=Bv(n);return ea(e,tf)}}function Bv(n,e,t){let r;if(Do(n)){let i=jt(n);return Fi(i)||yv(i)}else if(IT(n))r=()=>jt(n.useValue);else if(TF(n))r=()=>n.useFactory(...vv(n.deps||[]));else if(bF(n))r=(i,o)=>me(jt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=jt(n&&(n.useClass||n.provide));if(AF(n))r=()=>new i(...vv(n.deps));else return Fi(i)||yv(i)}return r}function $c(n){if(n.destroyed)throw new z(205,!1)}function ea(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function AF(n){return!!n.deps}function MF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function RF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function _v(n,e){for(let t of n)Array.isArray(t)?_v(t,e):t&&Av(t)?_v(t.\u0275providers,e):e(t)}function vt(n,e){let t;n instanceof So?($c(n),t=n):t=new mv(n);let r,i=_r(t),o=an(void 0);try{return e()}finally{_r(i),an(o)}}function TT(){return pT()!==void 0||md()!=null}var ln=0,ee=1,pe=2,ut=3,$n=4,Hn=5,vn=6,na=7,dt=8,bn=9,wr=10,He=11,ra=12,zv=13,Ro=14,un=15,Ui=16,Po=17,Ir=18,Qc=19,$v=20,ni=21,ff=22,Zc=23,Tn=24,Oo=25,xo=26,Ye=27,DT=1,sr=6,br=7,Jc=8,No=9,rt=10;function Dn(n){return Array.isArray(n)&&typeof n[DT]=="object"}function Sn(n){return Array.isArray(n)&&n[DT]===!0}function Hv(n){return(n.flags&4)!==0}function oi(n){return n.componentOffset>-1}function hf(n){return(n.flags&1)===1}function Tr(n){return!!n.template}function ko(n){return(n[pe]&512)!==0}function ji(n){return(n[pe]&256)===256}var ST="svg",AT="math";function An(n){for(;Array.isArray(n);)n=n[ln];return n}function qv(n,e){return An(e[n])}function qn(n,e){return An(e[n.index])}function Fo(n,e){return n.data[e]}function MT(n,e){return n[e]}function Wv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Wn(n,e){let t=e[n];return Dn(t)?t:t[ln]}function RT(n){return(n[pe]&4)===4}function pf(n){return(n[pe]&128)===128}function PT(n){return Sn(n[ut])}function Bi(n,e){return e==null?null:n[e]}function Gv(n){n[Po]=0}function Kv(n){n[pe]&1024||(n[pe]|=1024,pf(n)&&ia(n))}function OT(n,e){for(;n>0;)e=e[Ro],n--;return e}function Xc(n){return!!(n[pe]&9216||n[Tn]?.dirty)}function gf(n){n[wr].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),Xc(n)&&ia(n)}function ia(n){n[wr].changeDetectionScheduler?.notify(0);let e=Li(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!pf(e)));)e=Li(e)}function Yv(n,e){if(ji(n))throw new z(911,!1);n[ni]===null&&(n[ni]=[]),n[ni].push(e)}function xT(n,e){if(n[ni]===null)return;let t=n[ni].indexOf(e);t!==-1&&n[ni].splice(t,1)}function Li(n){let e=n[ut];return Sn(e)?e[ut]:e}function Qv(n){return n[na]??=[]}function Zv(n){return n.cleanup??=[]}function NT(n,e,t,r){let i=Qv(e);i.push(t),n.firstCreatePass&&Zv(n).push(r,i.length-1)}var Ie={lFrame:ZT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ev=!1;function kT(){return Ie.lFrame.elementDepthCount}function FT(){Ie.lFrame.elementDepthCount++}function LT(){Ie.lFrame.elementDepthCount--}function VT(){return Ie.bindingsEnabled}function Jv(){return Ie.skipHydrationRootTNode!==null}function UT(n){return Ie.skipHydrationRootTNode===n}function jT(n){Ie.skipHydrationRootTNode=n}function BT(){Ie.skipHydrationRootTNode=null}function be(){return Ie.lFrame.lView}function Mt(){return Ie.lFrame.tView}function H(n){return Ie.lFrame.contextLView=n,n[dt]}function q(n){return Ie.lFrame.contextLView=null,n}function Bt(){let n=Xv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Xv(){return Ie.lFrame.currentTNode}function zT(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function oa(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function ey(){return Ie.lFrame.isParent}function $T(){Ie.lFrame.isParent=!1}function ty(){return Ev}function ny(n){let e=Ev;return Ev=n,e}function mf(){let n=Ie.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function HT(){return Ie.lFrame.bindingIndex}function qT(n){return Ie.lFrame.bindingIndex=n}function Lo(){return Ie.lFrame.bindingIndex++}function ry(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function WT(){return Ie.lFrame.inI18n}function GT(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,vf(e)}function KT(){return Ie.lFrame.currentDirectiveIndex}function vf(n){Ie.lFrame.currentDirectiveIndex=n}function YT(n){let e=Ie.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function iy(){return Ie.lFrame.currentQueryIndex}function yf(n){Ie.lFrame.currentQueryIndex=n}function PF(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[Hn]:null}function oy(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=PF(o),i===null||(o=o[Ro],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ie.lFrame=QT();return r.currentTNode=e,r.lView=n,!0}function _f(n){let e=QT(),t=n[ee];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function QT(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?ZT(n):e}function ZT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function JT(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var sy=JT;function Ef(){let n=JT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XT(n){return(Ie.lFrame.contextLView=OT(n,Ie.lFrame.contextLView))[dt]}function si(){return Ie.lFrame.selectedIndex}function zi(n){Ie.lFrame.selectedIndex=n}function Cf(){let n=Ie.lFrame;return Fo(n.tView,n.selectedIndex)}function ay(){return Ie.lFrame.currentNamespace}var eD=!0;function wf(){return eD}function ai(n){eD=n}function Cv(n,e=null,t=null,r){let i=cy(n,e,t,r);return i.resolveInjectorInitializers(),i}function cy(n,e=null,t=null,r,i=new Set){let o=[t||In,CT(n)];return r=r||(typeof n=="object"?void 0:ri(n)),new So(o,e||Yc(),r||null,i)}var st=class n{static THROW_IF_NOT_FOUND=bo;static NULL=new qc;static create(e,t){if(Array.isArray(e))return Cv({name:""},t,e,"");{let r=e.name??"";return Cv({name:r},e.parent,e.providers,r)}}static \u0275prov=Z({token:n,providedIn:"any",factory:()=>me(Fv)});static __NG_ELEMENT_ID__=-1},Dt=new $(""),Gn=(()=>{class n{static __NG_ELEMENT_ID__=OF;static __NG_ENV_ID__=t=>t}return n})(),wv=class extends Gn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ji(this._lView)}onDestroy(e){let t=this._lView;return Yv(t,e),()=>xT(t,e)}};function OF(){return new wv(be())}var rr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},dn=new $("",{providedIn:"root",factory:()=>{let n=R(lt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(rr),e.handleError(t))}}}),tD={provide:zn,useValue:()=>void R(rr),multi:!0},xF=new $("",{providedIn:"root",factory:()=>{let n=R(Dt).defaultView;if(!n)return;let e=R(dn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(Gn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function ly(){return At([ET(()=>void R(xF))])}function uy(n){return typeof n=="function"&&n[Qt]!==void 0}function X(n,e){let[t,r,i]=Ym(n,e?.equal),o=t,s=o[Qt];return o.set=r,o.update=i,o.asReadonly=nD.bind(o),o}function nD(){let n=this[Qt];if(n.readonlyFn===void 0){let e=()=>this();e[Qt]=n,n.readonlyFn=e}return n.readonlyFn}function dy(n){return uy(n)&&typeof n.set=="function"}var If=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=NF}return n})();function NF(){return new If(be(),Bt())}var Er=class{},sa=new $("",{providedIn:"root",factory:()=>!1});var fy=new $(""),bf=new $(""),ar=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ut(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ce(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),$i=(()=>{class n{internalPendingTasks=R(ar);scheduler=R(Er);errorHandler=R(dn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})();function el(...n){}var hy=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new Iv})}return n})(),Iv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};var Tf={JSACTION:"jsaction"};function ma(n){return{toString:n}.toString()}var Df="__parameters__";function zF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function $F(n,e,t){return ma(()=>{let r=zF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,f){let p=l.hasOwnProperty(Df)?l[Df]:Object.defineProperty(l,Df,{value:[]})[Df];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Mr=gT($F("Optional"),8);function HF(n){return typeof n=="function"}var Ff=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Rr=(()=>{let n=()=>WD;return n.ngInherit=!0,n})();function WD(n){return n.type.prototype.ngOnChanges&&(n.setInput=WF),qF}function qF(){let n=KD(this),e=n?.current;if(e){let t=n.previous;if(t===Vi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WF(n,e,t,r,i){let o=this.declaredInputs[r],s=KD(n)||GF(n,{previous:Vi,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Ff(u&&u.currentValue,t,l===Vi),qD(n,e,i,t)}var GD="__ngSimpleChanges__";function KD(n){return n[GD]||null}function GF(n,e){return n[GD]=e}var rD=[];var ke=function(n,e=null,t){for(let r=0;r<rD.length;r++){let i=rD[r];i(n,e,t)}};function KF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=WD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function YF(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function Rf(n,e,t){YD(n,e,3,t)}function Pf(n,e,t,r){(n[pe]&3)===t&&YD(n,e,t,r)}function py(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function YD(n,e,t,r){let i=r!==void 0?n[Po]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Po]+=65536),(a<o||o==-1)&&(QF(n,t,e,l),n[Po]=(n[Po]&4294901760)+l+2),l++}function iD(n,e){ke(4,n,e);let t=he(null);try{e.call(n)}finally{he(t),ke(5,n,e)}}function QF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[Po]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,iD(a,o)):iD(a,o)}var ca=-1,jo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function ZF(n){return(n.flags&8)!==0}function JF(n){return(n.flags&16)!==0}function XF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];eL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function QD(n){return n===3||n===4||n===6}function eL(n){return n.charCodeAt(0)===64}function rl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?oD(n,t,i,null,e[++r]):oD(n,t,i,null,null))}}return n}function oD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function ZD(n){return n!==ca}function Lf(n){return n&32767}function tL(n){return n>>16}function Vf(n,e){let t=tL(n),r=e;for(;t>0;)r=r[Ro],t--;return r}var My=!0;function Uf(n){let e=My;return My=n,e}var nL=256,JD=nL-1,XD=5,rL=0,Dr={};function iL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ao)&&(r=t[Ao]),r==null&&(r=t[Ao]=rL++);let i=r&JD,o=1<<i;e.data[n+(i>>XD)]|=o}function jf(n,e){let t=eS(n,e);if(t!==-1)return t;let r=e[ee];r.firstCreatePass&&(n.injectorIndex=e.length,gy(r.data,n),gy(e,null),gy(r.blueprint,null));let i=s_(n,e),o=n.injectorIndex;if(ZD(i)){let s=Lf(i),a=Vf(i,e),l=a[ee].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function gy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function s_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oS(i),r===null)return ca;if(t++,i=i[Ro],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ca}function Ry(n,e,t){iL(n,e,t)}function oL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(QD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tS(n,e,t){if(t&8||n!==void 0)return n;af(e,"NodeInjector")}function nS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[bn],o=an(void 0);try{return i?i.get(e,r,t&8):Nv(e,r,t&8)}finally{an(o)}}return tS(r,e,t)}function rS(n,e,t,r=0,i){if(n!==null){if(e[pe]&2048&&!(r&2)){let s=lL(n,e,t,r,Dr);if(s!==Dr)return s}let o=iS(n,e,t,r,Dr);if(o!==Dr)return o}return nS(e,t,r,i)}function iS(n,e,t,r,i){let o=aL(t);if(typeof o=="function"){if(!oy(e,n,r))return r&1?tS(i,t,r):nS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))af(t);else return s}finally{sy()}}else if(typeof o=="number"){let s=null,a=eS(n,e),l=ca,u=r&1?e[un][Hn]:null;for((a===-1||r&4)&&(l=a===-1?s_(n,e):e[a+8],l===ca||!aD(r,!1)?a=-1:(s=e[ee],a=Lf(l),e=Vf(l,e)));a!==-1;){let f=e[ee];if(sD(o,a,f.data)){let p=sL(a,e,t,s,r,u);if(p!==Dr)return p}l=e[a+8],l!==ca&&aD(r,e[ee].data[a+8]===u)&&sD(o,a,e)?(s=f,a=Lf(l),e=Vf(l,e)):a=-1}}return i}function sL(n,e,t,r,i,o){let s=e[ee],a=s.data[n+8],l=r==null?oi(a)&&My:r!=s&&(a.type&3)!==0,u=i&1&&o===a,f=Of(a,s,t,l,u);return f!==null?il(e,s,f,a,i):Dr}function Of(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,p=r?a:a+f,g=i?a+f:u;for(let _=p;_<g;_++){let T=s[_];if(_<l&&t===T||_>=l&&T.type===t)return _}if(i){let _=s[l];if(_&&Tr(_)&&_.type===t)return l}return null}function il(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof jo){let a=o;if(a.resolving){let _=dT(s[t]);throw xv(_)}let l=Uf(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],f,p=a.injectImpl?an(a.injectImpl):null,g=oy(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&KF(t,s[t],e)}finally{p!==null&&an(p),Uf(l),a.resolving=!1,sy()}}return o}function aL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ao)?n[Ao]:void 0;return typeof e=="number"?e>=0?e&JD:cL:e}function sD(n,e,t){let r=1<<n;return!!(t[e+(n>>XD)]&r)}function aD(n,e){return!(n&2)&&!(n&1&&e)}var Uo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rS(this._tNode,this._lView,e,To(r),t)}};function cL(){return new Uo(Bt(),be())}function Rn(n){return ma(()=>{let e=n.prototype.constructor,t=e[Hc]||Py(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Hc]||Py(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Py(n){return Dv(n)?()=>{let e=Py(jt(n));return e&&e()}:Fi(n)}function lL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!ko(s);){let a=iS(o,s,t,r|2,Dr);if(a!==Dr)return a;let l=o.parent;if(!l){let u=s[$v];if(u){let f=u.get(t,Dr,r);if(f!==Dr)return f}l=oS(s),s=s[Ro]}o=l}return i}function oS(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[Hn]:null}function dl(n){return oL(Bt(),n)}function uL(){return va(Bt(),be())}function va(n,e){return new yn(qn(n,e))}var yn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=uL}return n})();function dL(n){return n instanceof yn?n.nativeElement:n}function fL(){return this._results[Symbol.iterator]()}var Bf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=vT(e);(this._changesDetected=!mT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fL},sS="ngSkipHydration",hL="ngskiphydration";function aS(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===hL)return!0}return!1}function cS(n){return n.hasAttribute(sS)}function zf(n){return(n.flags&128)===128}function lS(n){if(zf(n))return!0;let e=n.parent;for(;e;){if(zf(n)||aS(e))return!0;e=e.parent}return!1}var a_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(a_||{}),uS=new Map,pL=0;function gL(){return pL++}function mL(n){uS.set(n[Qc],n)}function Oy(n){uS.delete(n[Qc])}var cD="__ngContext__";function da(n,e){Dn(e)?(n[cD]=e[Qc],mL(e)):n[cD]=e}function dS(n){return hS(n[ra])}function fS(n){return hS(n[$n])}function hS(n){for(;n!==null&&!Sn(n);)n=n[$n];return n}var xy;function c_(n){xy=n}function fl(){if(xy!==void 0)return xy;if(typeof document<"u")return document;throw new z(210,!1)}var Pr=new $("",{providedIn:"root",factory:()=>vL}),vL="ng",ih=new $(""),li=new $("",{providedIn:"platform",factory:()=>"unknown"});var oh=new $("",{providedIn:"root",factory:()=>fl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function yL(){let n=new qo;return n.store=_L(fl(),R(Pr)),n}var qo=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:yL});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function _L(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var pS="h",gS="b",EL="f",CL="n",mS="e",vS="t",sh="c",l_="x",ol="r",yS="i",_S="n",u_="d";var ES="di",CS="s",wS="p";var hl=new $(""),IS=!1,d_=new $("",{providedIn:"root",factory:()=>IS});var f_=new $(""),bS=!1,TS=new $(""),h_=new $("",{providedIn:"root",factory:()=>new Map});var pl="ngb";var DS=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},SS=(n,e)=>{let t=n,r=t.getAttribute(pl)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var AS=n=>{n.removeAttribute(Tf.JSACTION),n.removeAttribute(pl),n.__jsaction_fns=void 0},MS=new $("",{providedIn:"root",factory:()=>({})});function p_(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var Ny=new Map;function RS(n,e){return Ny.set(n,e),()=>Ny.delete(n)}var lD=!1,PS=(n,e,t,r)=>{};function wL(n,e,t,r){PS(n,e,t,r)}function OS(){lD||(PS=(n,e,t,r)=>{let i=n[bn].get(Pr);Ny.get(i)?.(e,t,r)},lD=!0)}var ah=new $("");function ch(n){return(n.flags&32)===32}var IL="__nghData__",g_=IL,bL="__nghDeferData__",xS=bL;var xf="ngh",NS="nghm",kS=()=>null;function TL(n,e,t=!1){let r=n.getAttribute(xf);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",a=t?i:s,l={};if(r!==""){let f=e.get(qo,null,{optional:!0});f!==null&&(l=f.get(g_,[])[Number(r)])}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,lh(u,0,n.nextSibling)),a?n.setAttribute(xf,a):n.removeAttribute(xf),u}function FS(){kS=TL}function LS(n,e,t=!1){return kS(n,e,t)}function VS(n){let e=n._lView;return e[ee].type===2?null:(ko(e)&&(e=e[Ye]),e)}function DL(n){return n.textContent?.replace(/\s/gm,"")}function SL(n){let e=fl(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=DL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function lh(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function ky(n,e){return n.segmentHeads?.[e]??null}function US(n){return n.get(TS,!1,{optional:!0})}function AL(n,e){let t=n.data,r=t[mS]?.[e]??null;return r===null&&t[sh]?.[e]&&(r=m_(n,e)),r}function jS(n,e){return n.data[sh]?.[e]??null}function m_(n,e){let t=jS(n,e)??[],r=0;for(let i of t)r+=i[ol]*(i[l_]??1);return r}function ML(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[u_];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function BS(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[u_];n.disconnectedNodes=t?new Set(t):null}return!!ML(n)?.has(e)}function uh(n,e){let t=n[vn];return t!==null&&!Jv()&&!ch(e)&&!BS(t,e.index-Ye)}function RL(n,e){let t=e.get(ah),i=e.get(qo).get(xS,{}),o=!1,s=n,a=null,l=[];for(;!o&&s;){o=t.has(s);let u=t.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}l.unshift(s),s=i[s][wS]}return{parentBlockPromise:a,hydrationQueue:l}}function my(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===NS}function uD(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function zS(n){for(let r of n.body.childNodes)if(my(r))return;let e=uD(n.body.previousSibling);if(my(e))return;let t=uD(n.head.lastChild);if(!my(t))throw new z(-507,!1)}function $S(n,e){let t=n.contentQueries;if(t!==null){let r=he(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];yf(o),a.contentQueries(2,e[s],s)}}}finally{he(r)}}}function Fy(n,e,t){yf(0);let r=he(null);try{e(n,t)}finally{he(r)}}function HS(n,e,t){if(Hv(e)){let r=he(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{he(r)}}}var ci=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(ci||{});var Sf;function PL(){if(Sf===void 0&&(Sf=null,Cr.trustedTypes))try{Sf=Cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Sf}function dD(n){return PL()?.createScriptURL(n)||n}var $f=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${of})`}};function gl(n){return n instanceof $f?n.changingThisBreaksApplicationSecurity:n}function dh(n,e){let t=qS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${of})`)}return t===e}function qS(n){return n instanceof $f&&n.getTypeName()||null}var OL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v_(n){return n=String(n),n.match(OL)?n:"unsafe:"+n}var xL=/^>|^->|<!--|-->|--!>|<!-$/g,NL=/(<|>)/g,kL="\u200B$1\u200B";function FL(n){return n.replace(xL,e=>e.replace(NL,kL))}function WS(n,e){return n.createText(e)}function LL(n,e,t){n.setValue(e,t)}function GS(n,e){return n.createComment(FL(e))}function y_(n,e,t){return n.createElement(e,t)}function Hf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KS(n,e,t){n.appendChild(e,t)}function fD(n,e,t,r,i){r!==null?Hf(n,e,t,r,i):KS(n,e,t)}function __(n,e,t,r){n.removeChild(null,e,t,r)}function YS(n){n.textContent=""}function VL(n,e,t){n.setAttribute(e,"style",t)}function UL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&XF(n,e,r),i!==null&&UL(n,e,i),o!==null&&VL(n,e,o)}var ml=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(ml||{});function ZS(n){let e=XS();return e?e.sanitize(ml.URL,n)||"":dh(n,"URL")?gl(n):v_(Mo(n))}function JS(n){let e=XS();if(e)return dD(e.sanitize(ml.RESOURCE_URL,n)||"");if(dh(n,"ResourceURL"))return dD(gl(n));throw new z(904,!1)}function jL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?JS:ZS}function E_(n,e,t){return jL(e,t)(n)}function XS(){let n=be();return n&&n[wr].sanitizer}function eA(n){return n.ownerDocument.body}function tA(n){return n instanceof Function?n():n}function BL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var nA="ng-template";function zL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(C_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function C_(n){return n.type===4&&n.value!==nA}function $L(n,e,t){let r=n.type===4&&!t?nA:n.value;return e===r}function HL(n,e,t){let r=4,i=n.attrs,o=i!==null?GL(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!cr(r)&&!cr(l))return!1;if(s&&cr(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!$L(n,l,t)||l===""&&e.length===1){if(cr(r))return!1;s=!0}}else if(r&8){if(i===null||!zL(n,i,l,t)){if(cr(r))return!1;s=!0}}else{let u=e[++a],f=qL(l,i,C_(n),t);if(f===-1){if(cr(r))return!1;s=!0;continue}if(u!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(cr(r))return!1;s=!0}}}}return cr(r)||s}function cr(n){return(n&1)===0}function qL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return KL(e,n)}function WL(n,e,t=!1){for(let r=0;r<e.length;r++)if(HL(n,e[r],t))return!0;return!1}function GL(n){for(let e=0;e<n.length;e++){let t=n[e];if(QD(t))return e}return n.length}function KL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function hD(n,e){return n?":not("+e.trim()+")":e}function YL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!cr(s)&&(e+=hD(o,i),i=""),r=s,o=o||!cr(r);t++}return i!==""&&(e+=hD(o,i)),e}function QL(n){return n.map(YL).join(",")}function ZL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!cr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Pn={};function w_(n,e,t,r,i,o,s,a,l,u,f){let p=Ye+r,g=p+i,_=JL(p,g),T=typeof u=="function"?u():u;return _[ee]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:T,incompleteFirstPass:!1,ssrId:f}}function JL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Pn);return t}function XL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=w_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function I_(n,e,t,r,i,o,s,a,l,u,f){let p=e.blueprint.slice();return p[ln]=i,p[pe]=r|4|128|8|64|1024,(u!==null||n&&n[pe]&2048)&&(p[pe]|=2048),Gv(p),p[ut]=p[Ro]=n,p[dt]=t,p[wr]=s||n&&n[wr],p[He]=a||n&&n[He],p[bn]=l||n&&n[bn]||null,p[Hn]=o,p[Qc]=gL(),p[vn]=f,p[$v]=u,p[un]=e.type==2?n[un]:p,p}function eV(n,e,t){let r=qn(e,n),i=XL(t),o=n[wr].rendererFactory,s=b_(n,I_(n,i,null,rA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function rA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function iA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function b_(n,e){return n[ra]?n[zv][$n]=e:n[ra]=e,n[zv]=e,e}function b(n=1){oA(Mt(),be(),si()+n,!1)}function oA(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Rf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Pf(e,o,0,t)}zi(t)}var fh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(fh||{});function Ly(n,e,t,r){let i=he(null);try{let[o,s,a]=n.inputs[t],l=null;(s&fh.SignalBased)!==0&&(l=e[o][Qt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):qD(e,l,o,r)}finally{he(i)}}var Sr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Sr||{}),tV;function T_(n,e){return tV(n,e)}var Bo=new Set,hh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hh||{}),Wo=new $(""),pD=new Set;function On(n){pD.has(n)||(pD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var sA=!1,Vy=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TT()&&(this.destroyRef=R(Gn,{optional:!0})??void 0,this.pendingTasks=R(ar,{optional:!0})??void 0)}emit(e){let t=he(null);try{super.next(e)}finally{he(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ot&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Fe=Vy;function aA(n){let e,t;function r(){n=el;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function gD(n){return queueMicrotask(()=>n()),()=>{n=el}}var D_="isAngularZone",qf=D_+"_ID",nV=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Fe(!1);onMicrotaskEmpty=new Fe(!1);onStable=new Fe(!1);onError=new Fe(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sA}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,oV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(D_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rV,el,el);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},rV={};function S_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){aA(()=>{n.callbackScheduled=!1,Uy(n),n.isCheckStableRunning=!0,S_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Uy(n)}function oV(n){let e=()=>{iV(n)},t=nV++;n._inner=n._inner.fork({name:"angular",properties:{[D_]:!0,[qf]:t,[qf+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(sV(l))return r.invokeTask(o,s,a,l);try{return mD(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),vD(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return mD(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!aV(l)&&e(),vD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Uy(n),S_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Uy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function vD(n){n._nesting--,S_(n)}var sl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Fe;onMicrotaskEmpty=new Fe;onStable=new Fe;onError=new Fe;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function sV(n){return cA(n,"__ignore_ng_zone__")}function aV(n){return cA(n,"__scheduler_tick__")}function cA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var A_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),lA=[0,1,2,3],uA=(()=>{class n{ngZone=R(xe);scheduler=R(Er);errorHandler=R(rr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(Wo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ke(16),this.executing=!0;for(let r of lA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ke(17)}register(t){let{view:r}=t;r!==void 0?((r[Oo]??=[]).push(t),ia(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(hh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Oo];e&&(this.view[Oo]=e.filter(t=>t!==this))}};function vl(n,e){let t=e?.injector??R(st);return On("NgAfterNextRender"),lV(n,t,e,!0)}function cV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function lV(n,e,t,r){let i=e.get(A_);i.impl??=e.get(uA);let o=e.get(Wo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Gn):null,a=e.get(If,null,{optional:!0}),l=new Wf(i.impl,cV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var dA=new $("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function fA(n,e,t){let r=n.get(dA);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function uV(n,e){let t=n.get(dA);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function dV(n,e){for(let[t,r]of e)fA(n,r.animateFns)}function yD(n,e,t,r){let i=n?.[xo]?.enter;e!==null&&i&&i.has(t.index)&&dV(r,i)}function aa(n,e,t,r,i,o,s,a){if(i!=null){let l,u=!1;Sn(i)?l=i:Dn(i)&&(u=!0,i=i[ln]);let f=An(i);n===0&&r!==null?(yD(a,r,o,t),s==null?KS(e,r,f):Hf(e,r,f,s||null,!0)):n===1&&r!==null?(yD(a,r,o,t),Hf(e,r,f,s||null,!0)):n===2?_D(a,o,t,p=>{__(e,f,u,p)}):n===3&&_D(a,o,t,()=>{e.destroyNode(f)}),l!=null&&bV(e,n,t,l,o,r,s)}}function fV(n,e){hA(n,e),e[ln]=null,e[Hn]=null}function hV(n,e,t,r,i,o){r[ln]=i,r[Hn]=e,gh(n,r,t,1,i,o)}function hA(n,e){e[wr].changeDetectionScheduler?.notify(9),gh(n,e,e[He],2,null,null)}function pV(n){let e=n[ra];if(!e)return vy(n[ee],n);for(;e;){let t=null;if(Dn(e))t=e[ra];else{let r=e[rt];r&&(t=r)}if(!t){for(;e&&!e[$n]&&e!==n;)Dn(e)&&vy(e[ee],e),e=e[ut];e===null&&(e=n),Dn(e)&&vy(e[ee],e),t=e&&e[$n]}e=t}}function M_(n,e){let t=n[No],r=t.indexOf(e);t.splice(r,1)}function ph(n,e){if(ji(e))return;let t=e[He];t.destroyNode&&gh(n,e,t,3,null,null),pV(e)}function vy(n,e){if(ji(e))return;let t=he(null);try{e[pe]&=-129,e[pe]|=256,e[Tn]&&Uc(e[Tn]),vV(n,e),mV(n,e),e[ee].type===1&&e[He].destroy();let r=e[Ui];if(r!==null&&Sn(e[ut])){r!==e[ut]&&M_(r,e);let i=e[Ir];i!==null&&i.detachView(n)}Oy(e)}finally{he(t)}}function _D(n,e,t,r){let i=n?.[xo];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Bo.add(n),fA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let u=s.animateFns[l],{promise:f}=u();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),gV(n,r)}else n&&Bo.delete(n),r(!1)},i)}function gV(n,e){let t=n[xo]?.running;if(t){t.then(()=>{n[xo].running=void 0,Bo.delete(n),e(!0)});return}e(!1)}function mV(n,e){let t=n.cleanup,r=e[na];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[na]=null);let i=e[ni];if(i!==null){e[ni]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Zc];if(o!==null){e[Zc]=null;for(let s of o)s.destroy()}}function vV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof jo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];ke(4,a,l);try{l.call(a)}finally{ke(5,a,l)}}else{ke(4,i,o);try{o.call(i)}finally{ke(5,i,o)}}}}}function yV(n,e,t){return _V(n,e.parent,t)}function _V(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ln];if(oi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ci.None||i===ci.Emulated)return null}return qn(r,t)}function EV(n,e,t){return wV(n,e,t)}function CV(n,e,t){return n.type&40?qn(n,t):null}var wV=CV,ED;function R_(n,e,t,r){let i=yV(n,r,e),o=e[He],s=r.parent||e[Hn],a=EV(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)fD(o,i,t[l],a,!1);else fD(o,i,t,a,!1);ED!==void 0&&ED(o,r,e,t,i)}function tl(n,e){if(e!==null){let t=e.type;if(t&3)return qn(e,n);if(t&4)return jy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return tl(n,r);{let i=n[e.index];return Sn(i)?jy(-1,i):An(i)}}else{if(t&128)return tl(n,e.next);if(t&32)return T_(e,n)()||An(n[e.index]);{let r=pA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(n[un]);return tl(i,r)}else return tl(n,e.next)}}}return null}function pA(n,e){if(e!==null){let r=n[un][Hn],i=e.projection;return r.projection[i]}return null}function jy(n,e){let t=rt+n+1;if(t<e.length){let r=e[t],i=r[ee].firstChild;if(i!==null)return tl(r,i)}return e[br]}function P_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[bn];if(t.type===128){t=t.next;continue}let l=r[t.index],u=t.type;if(s&&e===0&&(l&&da(An(l),r),t.flags|=2),!ch(t))if(u&8)P_(n,e,t.child,r,i,o,!1),aa(e,n,a,i,l,t,o,r);else if(u&32){let f=T_(t,r),p;for(;p=f();)aa(e,n,a,i,p,t,o,r);aa(e,n,a,i,l,t,o,r)}else u&16?IV(n,e,r,t,i,o):aa(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function gh(n,e,t,r,i,o){P_(t,r,n.firstChild,e,i,o,!1)}function IV(n,e,t,r,i,o){let s=t[un],l=s[Hn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];aa(e,n,t[bn],i,f,r,o,t)}else{let u=l,f=s[ut];zf(r)&&(u.flags|=128),P_(n,e,u,f,i,o,!0)}}function bV(n,e,t,r,i,o,s){let a=r[br],l=An(r);a!==l&&aa(e,n,t,o,a,i,s);for(let u=rt;u<r.length;u++){let f=r[u];gh(f[ee],f,n,e,o,a)}}function TV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Sr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Sr.Important),n.setStyle(t,r,i,o))}}function gA(n,e,t,r,i){let o=si(),s=r&2;try{zi(-1),s&&e.length>Ye&&oA(n,e,Ye,!1),ke(s?2:0,i,t),t(r,i)}finally{zi(o),ke(s?3:1,i,t)}}function mA(n,e,t){OV(n,e,t),(t.flags&64)===64&&xV(n,e,t)}function vA(n,e,t=qn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function DV(n,e,t,r){let o=r.get(d_,IS)||t===ci.ShadowDom,s=n.selectRootElement(e,o);return SV(s),s}function SV(n){yA(n)}var yA=()=>null;function AV(n){cS(n)?YS(n):SL(n)}function _A(){yA=AV}function MV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function EA(n,e,t,r,i,o){let s=e[ee];if(x_(n,s,e,t,r)){oi(n)&&PV(e,n.index);return}n.type&3&&(t=MV(t)),RV(n,e,t,r,i,o)}function RV(n,e,t,r,i,o){if(n.type&3){let s=qn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function PV(n,e){let t=Wn(e,n);t[pe]&16||(t[pe]|=64)}function OV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;oi(t)&&eV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||jf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=il(e,n,s,t);if(da(l,e),o!==null&&VV(e,s-r,l,a,t,o),Tr(a)){let u=Wn(t.index,e);u[dt]=il(e,n,s,t)}}}function xV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=KT();try{zi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];vf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&NV(l,u)}}finally{zi(-1),vf(s)}}function NV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function kV(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];WL(e,o.selectors,!1)&&(r??=[],Tr(o)?r.unshift(o):r.push(o))}return r}function FV(n,e,t,r,i,o){let s=qn(n,e);LV(e[He],s,o,n.value,t,r,i)}function LV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Mo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function VV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];Ly(r,t,l,u)}}function UV(n,e,t,r,i){let o=Ye+t,s=e[ee],a=i(s,e,n,r,t);e[o]=a,oa(n,!0);let l=n.type===2;return l?(QS(e[He],a,n),(kT()===0||hf(n))&&da(a,e),FT()):da(a,e),wf()&&(!l||!ch(n))&&R_(s,e,a,n),n}function jV(n){let e=n;return ey()?$T():(e=e.parent,oa(e,!1)),e}function O_(n,e){let t=n[bn];if(!t)return;let r;try{r=t.get(dn,null)}catch{r=null}r?.(e)}function x_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],p=e.data[u];Ly(p,t[u],f,i),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];Ly(f,u,r,i),a=!0}return a}function BV(n,e){let t=Wn(e,n),r=t[ee];zV(r,t);let i=t[ln];i!==null&&t[vn]===null&&(t[vn]=LS(i,t[bn])),ke(18),N_(r,t,t[dt]),ke(19,t[dt])}function zV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function N_(n,e,t){_f(e);try{let r=n.viewQuery;r!==null&&Fy(1,r,t);let i=n.template;i!==null&&gA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ir]?.finishViewCreation(n),n.staticContentQueries&&$S(n,e),n.staticViewQueries&&Fy(2,n.viewQuery,t);let o=n.components;o!==null&&$V(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,Ef()}}function $V(n,e){for(let t=0;t<e.length;t++)BV(n,e[t])}function yl(n,e,t,r){let i=he(null);try{let o=e.tView,a=n[pe]&4096?4096:16,l=I_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Ui]=u;let f=n[Ir];return f!==null&&(l[Ir]=f.createEmbeddedView(o)),N_(o,l,t),l}finally{he(i)}}function fa(n,e){return!e||e.firstChild===null||zf(n)}function al(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(An(o)),Sn(o)&&CA(o,r);let s=t.type;if(s&8)al(n,e,t.child,r);else if(s&32){let a=T_(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=pA(e,t);if(Array.isArray(a))r.push(...a);else{let l=Li(e[un]);al(l[ee],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function CA(n,e){for(let t=rt;t<n.length;t++){let r=n[t],i=r[ee].firstChild;i!==null&&al(r[ee],r,i,e)}n[br]!==n[ln]&&e.push(n[br])}function wA(n){if(n[Oo]!==null){for(let e of n[Oo])e.impl.addSequence(e);n[Oo].length=0}}var IA=[];function HV(n){return n[Tn]??qV(n)}function qV(n){let e=IA.pop()??Object.create(GV);return e.lView=n,e}function WV(n){n.lView[Tn]!==n&&(n.lView=null,IA.push(n))}var GV=te(V({},ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ia(n.lView)},consumerOnSignalRead(){this.lView[Tn]=this}});function KV(n){let e=n[Tn]??Object.create(YV);return e.lView=n,e}var YV=te(V({},ks),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Li(n.lView);for(;e&&!bA(e[ee]);)e=Li(e);e&&Kv(e)},consumerOnSignalRead(){this.lView[Tn]=this}});function bA(n){return n.type!==2}function TA(n){if(n[Zc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Zc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var QV=100;function DA(n,e=0){let r=n[wr].rendererFactory,i=!1;i||r.begin?.();try{ZV(n,e)}finally{i||r.end?.()}}function ZV(n,e){let t=ty();try{ny(!0),By(n,e);let r=0;for(;Xc(n);){if(r===QV)throw new z(103,!1);r++,By(n,1)}}finally{ny(t)}}function JV(n,e,t,r){if(ji(e))return;let i=e[pe],o=!1,s=!1;_f(e);let a=!0,l=null,u=null;o||(bA(n)?(u=HV(e),l=Ls(u)):Cd()===null?(a=!1,u=KV(e),l=Ls(u)):e[Tn]&&(Uc(e[Tn]),e[Tn]=null));try{Gv(e),qT(n.bindingStartIndex),t!==null&&gA(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let _=n.preOrderCheckHooks;_!==null&&Rf(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Pf(e,_,0,null),py(e,0)}if(s||XV(e),TA(e),SA(e,0),n.contentQueries!==null&&$S(n,e),!o)if(f){let _=n.contentCheckHooks;_!==null&&Rf(e,_)}else{let _=n.contentHooks;_!==null&&Pf(e,_,1),py(e,1)}t2(n,e);let p=n.components;p!==null&&MA(e,p,0);let g=n.viewQuery;if(g!==null&&Fy(2,g,r),!o)if(f){let _=n.viewCheckHooks;_!==null&&Rf(e,_)}else{let _=n.viewHooks;_!==null&&Pf(e,_,2),py(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ff]){for(let _ of e[ff])_();e[ff]=null}o||(wA(e),e[pe]&=-73)}catch(f){throw o||ia(e),f}finally{u!==null&&(Lc(u,l),a&&WV(u)),Ef()}}function SA(n,e){for(let t=dS(n);t!==null;t=fS(t))for(let r=rt;r<t.length;r++){let i=t[r];AA(i,e)}}function XV(n){for(let e=dS(n);e!==null;e=fS(e)){if(!(e[pe]&2))continue;let t=e[No];for(let r=0;r<t.length;r++){let i=t[r];Kv(i)}}}function e2(n,e,t){ke(18);let r=Wn(e,n);AA(r,t),ke(19,r[dt])}function AA(n,e){pf(n)&&By(n,e)}function By(n,e){let r=n[ee],i=n[pe],o=n[Tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vc(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)JV(r,n,r.template,n[dt]);else if(i&8192){let a=he(null);try{TA(n),SA(n,1);let l=r.components;l!==null&&MA(n,l,1),wA(n)}finally{he(a)}}}function MA(n,e,t){for(let r=0;r<e.length;r++)e2(n,e[r],t)}function t2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zi(~i);else{let o=i,s=t[++r],a=t[++r];GT(s,o);let l=e[o];ke(24,l),a(2,l),ke(25,l)}}}finally{zi(-1)}}function mh(n,e){let t=ty()?64:1088;for(n[wr].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=Li(n);if(ko(n)&&!r)return n;n=r}return null}function RA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function PA(n,e){let t=rt+e;if(t<n.length)return n[t]}function _l(n,e,t,r=!0){let i=e[ee];if(n2(i,e,n,t),r){let s=jy(t,n),a=e[He],l=a.parentNode(n[br]);l!==null&&hV(i,n[Hn],a,e,l,s)}let o=e[vn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function k_(n,e){let t=cl(n,e);return t!==void 0&&ph(t[ee],t),t}function cl(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t];if(r){let i=r[Ui];i!==null&&i!==n&&M_(i,r),e>0&&(n[t-1][$n]=r[$n]);let o=Gc(n,rt+e);fV(r[ee],r);let s=o[Ir];s!==null&&s.detachView(o[ee]),r[ut]=null,r[$n]=null,r[pe]&=-129}return r}function n2(n,e,t,r){let i=rt+r,o=t.length;r>0&&(t[i-1][$n]=e),r<o-rt?(e[$n]=t[i],kv(t,rt+r,e)):(t.push(e),e[$n]=null),e[ut]=t;let s=e[Ui];s!==null&&t!==s&&OA(s,e);let a=e[Ir];a!==null&&a.insertView(n),gf(e),e[pe]|=128}function OA(n,e){let t=n[No],r=e[ut];if(Dn(r))n[pe]|=2;else{let i=r[ut][un];e[un]!==i&&(n[pe]|=2)}t===null?n[No]=[e]:t.push(e)}var Hi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ee];return al(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[dt]}set context(e){this._lView[dt]=e}get destroyed(){return ji(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Sn(e)){let t=e[Jc],r=t?t.indexOf(this):-1;r>-1&&(cl(e,r),Gc(t,r))}this._attachedToViewContainer=!1}ph(this._lView[ee],this._lView)}onDestroy(e){Yv(this._lView,e)}markForCheck(){mh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){gf(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,DA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ko(this._lView),t=this._lView[Ui];t!==null&&!e&&M_(t,this._lView),hA(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=ko(this._lView),r=this._lView[Ui];r!==null&&!t&&OA(r,this._lView),gf(this._lView)}};var ha=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=r2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=yl(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Hi(o)}}return n})();function r2(){return F_(Bt(),be())}function F_(n,e){return n.type&4?new ha(e,n,va(n,e)):null}function L_(n,e,t,r,i){let o=n.data[e];if(o===null)o=i2(n,e,t,r,i),WT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=zT();o.injectorIndex=s===null?-1:s.injectorIndex}return oa(o,!0),o}function i2(n,e,t,r,i){let o=Xv(),s=ey(),a=s?o:o&&o.parent,l=n.data[e]=s2(n,a,t,e,r,i);return o2(n,l,o,s),l}function o2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function s2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Jv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var a2=new RegExp(`^(\\d+)*(${gS}|${pS})*(.*)`);function c2(n){let e=n.match(a2),[t,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(f,10)||1;a.push(u,p)}return[s,...a]}function l2(n){return!n.prev&&n.parent?.type===8}function yy(n){return n.index-Ye}function u2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function vh(n,e,t,r){let i=yy(r),o=u2(n,i);if(o===void 0){let s=n.data[_S];if(s?.[i])o=f2(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let a=r.prev===null,l=r.prev??r.parent;if(l2(r)){let u=yy(r.parent);o=ky(n,u)}else{let u=qn(l,t);if(a)o=u.firstChild;else{let f=yy(l),p=ky(n,f);if(l.type===2&&p){let _=m_(n,f)+1;o=yh(_,p)}else o=u.nextSibling}}}}return o}function yh(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function d2(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case EL:t=t.firstChild;break;case CL:t=t.nextSibling;break}}return t}function f2(n,e){let[t,...r]=c2(n),i;if(t===pS)i=e[un][ln];else if(t===gS)i=eA(e[un][ln]);else{let o=Number(t);i=An(e[o+Ye])}return d2(i,r)}var h2=!1;function xA(n){h2=n}function p2(n){let e=n[vn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[He];for(let o of r.values())g2(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function g2(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-Ye);i&&__(n,i,!1)}}function _h(n){let e=n[sr]??[],r=n[ut][He],i=[];for(let o of e)o.data[ES]!==void 0?i.push(o):NA(o,r);n[sr]=i}function m2(n){let{lContainer:e}=n,t=e[sr];if(t===null)return;let i=e[ut][He];for(let o of t)NA(o,i)}function NA(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[ol];for(;t<i;){let o=r.nextSibling;__(e,r,!1),r=o,t++}}}function Eh(n){_h(n);let e=n[ln];Dn(e)&&Gf(e);for(let t=rt;t<n.length;t++)Gf(n[t])}function Gf(n){p2(n);let e=n[ee];for(let t=Ye;t<e.bindingStartIndex;t++)if(Sn(n[t])){let r=n[t];Eh(r)}else Dn(n[t])&&Gf(n[t])}function V_(n){let e=n._views;for(let t of e){let r=VS(t);r!==null&&r[ln]!==null&&(Dn(r)?Gf(r):Eh(r))}}function v2(n,e,t,r){n!==null&&(t.cleanup(e),Eh(n.lContainer),V_(r))}function y2(n,e){let t=[];for(let r of e)for(let i=0;i<(r[l_]??1);i++){let o={data:r,firstChild:null};r[ol]>0&&(o.firstChild=n,n=yh(r[ol],n)),t.push(o)}return[n,t]}var kA=()=>null,FA=()=>null;function LA(){kA=_2,FA=E2}function _2(n,e){return UA(n,e)?n[sr].shift():(_h(n),null)}function Kf(n,e){return kA(n,e)}function E2(n,e,t){if(e.tView.ssrId===null)return null;let r=Kf(n,e.tView.ssrId);return t[ee].firstUpdatePass&&r===null&&C2(t,e),r}function VA(n,e,t){return FA(n,e,t)}function C2(n,e){let t=e;for(;t;){if(CD(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(CD(n,t))return;t=t.next}}function UA(n,e){let t=n[sr];return!e||t===null||t.length===0?!1:t[0].data[yS]===e}function CD(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return Sn(r)&&UA(r,t)?(_h(r),!0):!1}var jA=class{},Ch=class{},zy=class{resolveComponentFactory(e){throw new z(917,!1)}},El=class{static NULL=new zy},zo=class{},Or=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>w2()}return n})();function w2(){let n=be(),e=Bt(),t=Wn(e.index,n);return(Dn(t)?t:n)[He]}var BA=(()=>{class n{static \u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}return n})();var Nf={},la=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Nf,r);return i!==Nf||t===Nf?i:this.parentInjector.get(e,t,r)}};function wD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Tv(i,a);else if(o==2){let l=a,u=e[++s];r=Tv(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ee(n,e=0){let t=be();if(t===null)return me(n,e);let r=Bt();return rS(r,t,jt(n),e)}function I2(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,u]=f.resolveHostDirectives(s);break}D2(n,e,t,a,o,l,u)}o!==null&&r!==null&&b2(t,r,o)}function b2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function T2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function D2(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let g=0;g<a;g++){let _=r[g];!l&&Tr(_)&&(l=!0,T2(n,t,g)),Ry(jf(t,e),n,_.type)}O2(t,n.data.length,a);for(let g=0;g<a;g++){let _=r[g];_.providersResolver&&_.providersResolver(_)}let u=!1,f=!1,p=iA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let _=r[g];if(t.mergedAttrs=rl(t.mergedAttrs,_.hostAttrs),A2(n,t,e,p,_),P2(p,_,i),s!==null&&s.has(_)){let[x,N]=s.get(_);t.directiveToIndex.set(_.type,[p,x+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(_))&&t.directiveToIndex.set(_.type,p);_.contentQueries!==null&&(t.flags|=4),(_.hostBindings!==null||_.hostAttrs!==null||_.hostVars!==0)&&(t.flags|=64);let T=_.type.prototype;!u&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}S2(n,t,o)}function S2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ID(0,e,i,r),ID(1,e,i,r),TD(e,r,!1);else{let o=t.get(i);bD(0,e,o,r),bD(1,e,o,r),TD(e,r,!0)}}}function ID(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),zA(e,o)}}function bD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),zA(e,s)}}function zA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function TD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||C_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let f of u)if(f===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function A2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Fi(i.type,!0)),s=new jo(o,Tr(i),Ee,null);n.blueprint[r]=s,t[r]=s,M2(n,e,r,iA(n,t,i.hostVars,Pn),i)}function M2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;R2(s)!=a&&s.push(a),s.push(t,r,o)}}function R2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function P2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Tr(e)&&(t[""]=n)}}function O2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function $A(n,e,t,r,i,o,s,a){let l=e[ee],u=l.consts,f=Bi(u,s),p=L_(l,n,t,r,f);return o&&I2(l,e,p,Bi(u,a),i),p.mergedAttrs=rl(p.mergedAttrs,p.attrs),p.attrs!==null&&wD(p,p.attrs,!1),p.mergedAttrs!==null&&wD(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function HA(n,e){YF(n,e),Hv(e)&&n.queries.elementEnd(e)}function U_(n,e,t){return n[e]=t}function x2(n,e){return n[e]}function Ar(n,e,t){if(t===Pn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function qA(n,e,t,r){let i=Ar(n,e,t);return Ar(n,e+1,r)||i}function _y(n,e,t){return function r(i){let o=oi(n)?Wn(n.index,e):e;mh(o,5);let s=e[dt],a=DD(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=DD(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function DD(n,e,t,r){let i=he(null);try{return ke(6,e,t),t(r)!==!1}catch(o){return O_(n,o),!1}finally{ke(7,e,t),he(i)}}function N2(n,e,t,r,i,o,s,a){let l=hf(n),u=!1,f=null;if(!r&&l&&(f=F2(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let p=qn(n,t),g=r?r(p):p;wL(t,g,o,a);let _=i.listen(g,o,a);if(!k2(o)){let T=r?x=>r(An(x[n.index])):n.index;WA(T,e,t,o,a,_,!1)}}return u}function k2(n){return n.startsWith("animation")||n.startsWith("transition")}function F2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[na],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function WA(n,e,t,r,i,o,s){let a=e.firstCreatePass?Zv(e):null,l=Qv(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function SD(n,e,t,r,i,o){let s=e[t],a=e[ee],u=a.data[t].outputs[r],p=s[u].subscribe(o);WA(n.index,a,e,i,o,p,!0)}var $y=Symbol("BINDING");var Yf=class extends El{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ii(e);return new pa(t,this.ngModule)}};function L2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&fh.SignalBased)!==0};return i&&(o.transform=i),o})}function V2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function U2(n,e,t){let r=e instanceof lt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new la(t,r):t}function j2(n){let e=n.get(zo,null);if(e===null)throw new z(407,!1);let t=n.get(BA,null),r=n.get(Er,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function B2(n,e){let t=GA(n);return y_(e,t,t==="svg"?ST:t==="math"?AT:null)}function GA(n){return(n.selectors[0][0]||"div").toLowerCase()}var pa=class extends Ch{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=L2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=V2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=QL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ke(22);let a=he(null);try{let l=this.componentDef,u=z2(r,l,s,o),f=U2(l,i||this.ngModule,e),p=j2(f),g=p.rendererFactory.createRenderer(null,l),_=r?DV(g,r,l.encapsulation,f):B2(l,g),T=s?.some(AD)||o?.some(j=>typeof j!="function"&&j.bindings.some(AD)),x=I_(null,u,null,512|rA(l),null,null,p,g,f,null,LS(_,f,!0));x[Ye]=_,_f(x);let N=null;try{let j=$A(Ye,x,2,"#host",()=>u.directiveRegistry,!0,0);QS(g,_,j),da(_,x),mA(u,x,j),HS(u,j,x),HA(u,j),t!==void 0&&H2(j,this.ngContentSelectors,t),N=Wn(j.index,x),x[dt]=N[dt],N_(u,x,null)}catch(j){throw N!==null&&Oy(N),Oy(x),j}finally{ke(23),Ef()}return new Qf(this.componentType,x,!!T)}finally{he(a)}}};function z2(n,e,t,r){let i=n?["ng-version","20.3.15"]:ZL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[$y].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let g of p.bindings){a+=g[$y].requiredVars;let _=f+1;g.create&&(g.targetIdx=_,(o??=[]).push(g)),g.update&&(g.targetIdx=_,(s??=[]).push(g))}}let l=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,g=uf(p);l.push(g)}return w_(0,null,$2(o,s),1,a,l,null,null,null,[i],null)}function $2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function AD(n){let e=n[$y].kind;return e==="input"||e==="twoWay"}var Qf=class extends jA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Fo(t[ee],Ye),this.location=va(this._tNode,t),this.instance=Wn(this._tNode.index,t)[dt],this.hostView=this.changeDetectorRef=new Hi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=x_(r,i[ee],i,e,t);this.previousInputValues.set(e,t);let s=Wn(r.index,i);mh(s,1)}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Go=(()=>{class n{static __NG_ELEMENT_ID__=q2}return n})();function q2(){let n=Bt();return YA(n,be())}var W2=Go,KA=class extends W2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return va(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){let e=s_(this._hostTNode,this._hostLView);if(ZD(e)){let t=Vf(e,this._hostLView),r=Lf(e),i=t[ee].data[r+8];return new Uo(i,t)}else return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=MD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Kf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,fa(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!HF(e),u;if(l)u=t;else{let N=t||{};u=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let f=l?e:new pa(ii(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let j=(l?p:this.parentInjector).get(lt,null);j&&(o=j)}let g=ii(f.componentType??{}),_=Kf(this._lContainer,g?.id??null),T=_?.firstChild??null,x=f.create(p,i,T,o,s,a);return this.insertImpl(x.hostView,u,fa(this._hostTNode,_)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(PT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ut],u=new KA(l,l[Hn],l[ut]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return _l(s,i,o,r),e.attachToViewContainerRef(),kv(Ey(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=MD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=cl(this._lContainer,t);r&&(Gc(Ey(this._lContainer),t),ph(r[ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=cl(this._lContainer,t);return r&&Gc(Ey(this._lContainer),t)!=null?new Hi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function MD(n){return n[Jc]}function Ey(n){return n[Jc]||(n[Jc]=[])}function YA(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=RA(r,e,null,n),e[n.index]=t,b_(e,t)),QA(t,e,n,r),new KA(t,n,e)}function G2(n,e){let t=n[He],r=t.createComment(""),i=qn(e,n),o=t.parentNode(i);return Hf(t,o,r,t.nextSibling(i),!1),r}var QA=ZA,j_=()=>!1;function K2(n,e,t){return j_(n,e,t)}function ZA(n,e,t,r){if(n[br])return;let i;t.type&8?i=An(r):i=G2(e,t),n[br]=i}function Y2(n,e,t){if(n[br]&&n[sr])return!0;let r=t[vn],i=e.index-Ye;if(!r||lS(e)||BS(r,i))return!1;let s=ky(r,i),a=r.data[sh]?.[i],[l,u]=y2(s,a);return n[br]=l,n[sr]=u,!0}function Q2(n,e,t,r){j_(n,t,e)||ZA(n,e,t,r)}function JA(){QA=Q2,j_=Y2}var Hy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},qy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)B_(e,t).matches!==null&&this.queries[t].setDirty()}},Wy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=iU(e):this.predicate=e}},Gy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ky=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,Z2(t,o)),this.matchTNodeWithReadOption(e,t,Of(t,e,o,!1,!1))}else r===ha?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Of(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===yn||i===Go||i===ha&&t.type&4)this.addMatch(t.index,-2);else{let o=Of(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Z2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function J2(n,e){return n.type&11?va(n,e):n.type&4?F_(n,e):null}function X2(n,e,t,r){return t===-1?J2(e,n):t===-2?eU(n,e,r):il(n,n[ee],t,e)}function eU(n,e,t){if(t===yn)return va(e,n);if(t===ha)return F_(e,n);if(t===Go)return YA(e,n)}function XA(n,e,t,r){let i=e[Ir].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(X2(e,f,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Yy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=XA(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let p=rt;p<f.length;p++){let g=f[p];g[Ui]===g[ut]&&Yy(g[ee],g,u,r)}if(f[No]!==null){let p=f[No];for(let g=0;g<p.length;g++){let _=p[g];Yy(_[ee],_,u,r)}}}}}return r}function tU(n,e){return n[Ir].queries[e].queryList}function nU(n,e,t){let r=new Bf((t&4)===4);return NT(n,e,r,r.destroy),(e[Ir]??=new qy).queries.push(new Hy(r))-1}function rU(n,e,t,r){let i=Mt();if(i.firstCreatePass){let o=Bt();oU(i,new Wy(e,t,r),o.index),sU(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return nU(i,be(),t)}function iU(n){return n.split(",").map(e=>e.trim())}function oU(n,e,t){n.queries===null&&(n.queries=new Gy),n.queries.track(new Ky(e,t))}function sU(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function B_(n,e){return n.queries.getByIndex(e)}function aU(n,e){let t=n[ee],r=B_(t,e);return r.crossesNgTemplate?Yy(t,n,e,[]):XA(t,n,r,e)}var $o=class{},wh=class{};var Zf=class extends $o{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Yf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Vv(e);this._bootstrapComponents=tA(o.bootstrap),this._r3Injector=cy(e,t,[{provide:$o,useValue:this},{provide:El,useValue:this.componentFactoryResolver},...r],ri(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jf=class extends wh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zf(this.moduleType,e,[])}};var ll=class extends $o{injector;componentFactoryResolver=new Yf(this);instance=null;constructor(e){super();let t=new So([...e.providers,{provide:$o,useValue:this},{provide:El,useValue:this.componentFactoryResolver}],e.parent||Yc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ya(n,e,t=null){return new ll({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var cU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=df(!1,t.type),i=r.length>0?ya([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(me(lt))})}return n})();function qe(n){return ma(()=>{let e=eM(n),t=te(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===a_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(cU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ci.Emulated,styles:n.styles||In,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&On("NgStandalone"),tM(t);let r=n.dependencies;return t.directiveDefs=RD(r,lU),t.pipeDefs=RD(r,Uv),t.id=fU(t),t})}function lU(n){return ii(n)||uf(n)}function xr(n){return ma(()=>({type:n.type,bootstrap:n.bootstrap||In,declarations:n.declarations||In,imports:n.imports||In,exports:n.exports||In,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uU(n,e){if(n==null)return Vi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=fh.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function dU(n){if(n==null)return Vi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qe(n){return ma(()=>{let e=eM(n);return tM(e),e})}function z_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function eM(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Vi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||In,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:uU(n.inputs,e),outputs:dU(n.outputs),debugInfo:null}}function tM(n){n.features?.forEach(e=>e(n))}function RD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function fU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function hU(n){return Object.getPrototypeOf(n.prototype).constructor}function Zt(n){let e=hU(n.type),t=!0,r=[n];for(;e;){let i;if(Tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Cy(n.inputs),s.declaredInputs=Cy(n.declaredInputs),s.outputs=Cy(n.outputs);let a=i.hostBindings;a&&yU(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&mU(n,l),u&&vU(n,u),pU(n,i),uT(n.outputs,i.outputs),Tr(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Zt&&(t=!1)}}e=Object.getPrototypeOf(e)}gU(r)}function pU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function gU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=rl(i.hostAttrs,t=rl(t,i.hostAttrs))}}function Cy(n){return n===Vi?{}:n===In?[]:n}function mU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function yU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function _U(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=rl(n.mergedAttrs,n.attrs);let f=n.tView=w_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),oa(n,!1);let l=nM(t,e,n,r);wf()&&R_(t,e,l,n),da(l,e);let u=RA(l,e,l,n);e[r+Ye]=u,b_(e,u),K2(u,n,e)}function Xf(n,e,t,r,i,o,s,a,l,u,f){let p=t+Ye,g;if(e.firstCreatePass){if(g=L_(e,p,4,s||null,a||null),u!=null){let _=Bi(e.consts,u);g.localNames=[];for(let T=0;T<_.length;T+=2)g.localNames.push(_[T],-1)}}else g=e.data[p];return _U(g,n,e,t,r,i,o,l),u!=null&&vA(n,g,f),g}var nM=rM;function rM(n,e,t,r){return ai(!0),e[He].createComment("")}function EU(n,e,t,r){let i=!uh(e,t);ai(i);let o=e[vn]?.data[vS]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return rM(n,e);let s=e[vn],a=vh(s,n,e,t);lh(s,r,a);let l=m_(s,r);return yh(l,a)}function iM(){nM=EU}var Mn=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(Mn||{}),PD=0,CU=1,yt=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(yt||{});var wU=0,Cl=1;var IU=4,bU=5;var TU=7,ua=8,DU=9,$_=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})($_||{});function kf(n,e){let t=AU(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function SU(n){kf(1,n),kf(0,n),kf(2,n)}function AU(n){let e=IU;return n===1?e=bU:n===2&&(e=DU),e}function oM(n){return n+1}function _a(n,e){let t=n[ee],r=oM(e.index);return n[r]}function wl(n,e){let t=oM(e.index);return n.data[t]}function MU(n,e,t){let r=e[ee],i=wl(r,t);switch(n){case yt.Complete:return i.primaryTmplIndex;case yt.Loading:return i.loadingTmplIndex;case yt.Error:return i.errorTmplIndex;case yt.Placeholder:return i.placeholderTmplIndex;default:return null}}function OD(n,e){return e===yt.Placeholder?n.placeholderBlockConfig?.[PD]??null:e===yt.Loading?n.loadingBlockConfig?.[PD]??null:null}function RU(n){return n.loadingBlockConfig?.[CU]??null}function xD(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function PU(n,e){let t=e.primaryTmplIndex+Ye;return Fo(n,t)}var OU=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?ya(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n})}return n})();var sM=new $("");function wy(n,e,t){return n.get(OU).getOrCreateInjector(e,n,t,"")}function xU(n,e,t){if(n instanceof la){let i=n.injector,o=n.parentInjector,s=wy(o,e,t);return new la(i,s)}let r=n.get(lt);if(r!==n){let i=wy(r,e,t);return new la(n,i)}return wy(n,e,t)}function Vo(n,e,t,r=!1){let i=t[ut],o=i[ee];if(ji(i))return;let s=_a(i,e),a=s[Cl],l=s[TU];if(!(l!==null&&n<l)&&ND(a,n)&&ND(s[wU]??-1,n)){let u=wl(o,e),p=!r&&!0&&(RU(u)!==null||OD(u,yt.Loading)!==null||OD(u,yt.Placeholder))?FU:kU;try{p(n,s,t,e,i)}catch(g){O_(i,g)}}}function NU(n,e){let t=n[sr]?.findIndex(i=>i.data[CS]===e[Cl])??-1;return{dehydratedView:t>-1?n[sr][t]:null,dehydratedViewIx:t}}function kU(n,e,t,r,i){ke(20);let o=MU(n,i,r);if(o!==null){e[Cl]=n;let s=i[ee],a=o+Ye,l=Fo(s,a),u=0;k_(t,u);let f;if(n===yt.Complete){let T=wl(s,r),x=T.providers;x&&x.length>0&&(f=xU(i[bn],T,x))}let{dehydratedView:p,dehydratedViewIx:g}=NU(t,e),_=yl(i,l,null,{injector:f,dehydratedView:p});if(_l(t,_,u,fa(l,p)),mh(_,2),g>-1&&t[sr]?.splice(g,1),(n===yt.Complete||n===yt.Error)&&Array.isArray(e[ua])){for(let T of e[ua])T();e[ua]=null}}ke(21)}function ND(n,e){return n<e}function kD(n,e,t){n.loadingPromise.then(()=>{n.loadingState===Mn.COMPLETE?Vo(yt.Complete,e,t):n.loadingState===Mn.FAILED&&Vo(yt.Error,e,t)})}var FU=null;var Ih=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var H_=new $("");function qi(n){return!!n&&typeof n.then=="function"}function q_(n){return!!n&&typeof n.subscribe=="function"}var W_=new $("");function bh(n){return At([{provide:W_,multi:!0,useValue:n}])}var G_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(W_,{optional:!0})??[];injector=R(st);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=vt(this.injector,i);if(qi(o))t.push(o);else if(q_(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wi=new $("");function aM(){Km(()=>{let n="";throw new z(600,n)})}function cM(n){return n.isBoundToModule}var LU=10;var St=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(dn);afterRenderManager=R(A_);zonelessEnabled=R(sa);rootEffectScheduler=R(hy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(ar);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(J(t=>!t))}constructor(){R(Wo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=st.NULL){return this._injector.get(xe).run(()=>{ke(10);let s=t instanceof Ch;if(!this._injector.get(G_).done){let T="";throw new z(405,T)}let l;s?l=t:l=this._injector.get(El).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=cM(l)?void 0:this._injector.get($o),f=r||l.selector,p=l.create(i,[],f,u),g=p.location.nativeElement,_=p.injector.get(H_,null);return _?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),nl(this.components,p),_?.unregisterApplication(g)}),this._loadComponent(p),ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new z(101,!1);let t=he(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,he(t),this.afterTick.next(),ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<LU;)ke(14),this.synchronizeOnce(),ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Xc(i))continue;let o=r&&!this.zonelessEnabled?0:1;DA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Wi,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VU(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function lM(n,e,t){let r=e[bn],i=e[ee];if(n.loadingState!==Mn.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=_a(e,t),s=PU(i,n);n.loadingState=Mn.IN_PROGRESS,kf(1,o);let a=n.dependencyResolverFn,l=r.get($i).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let f=!1,p=[],g=[];for(let _ of u)if(_.status==="fulfilled"){let T=_.value,x=ii(T)||uf(T);if(x)p.push(x);else{let N=Uv(T);N&&g.push(N)}}else{f=!0;break}if(f){if(n.loadingState=Mn.FAILED,n.errorTmplIndex===null){let T=new z(-750,!1);O_(e,T)}}else{n.loadingState=Mn.COMPLETE;let _=s.tView;if(p.length>0){_.directiveRegistry=xD(_.directiveRegistry,p);let T=p.map(N=>N.type),x=df(!1,...T);n.providers=x}g.length>0&&(_.pipeRegistry=xD(_.pipeRegistry,g))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,l()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=Mn.COMPLETE,l()}),n.loadingPromise)}function UU(n,e){return e[bn].get(sM,null,{optional:!0})?.behavior!==$_.Manual}function jU(n,e,t){let r=e[ee],i=e[t.index];if(!UU(n,e))return;let o=_a(e,t),s=wl(r,t);switch(SU(o),s.loadingState){case Mn.NOT_STARTED:Vo(yt.Loading,t,i),lM(s,e,t),s.loadingState===Mn.IN_PROGRESS&&kD(s,t,i);break;case Mn.IN_PROGRESS:Vo(yt.Loading,t,i),kD(s,t,i);break;case Mn.COMPLETE:Vo(yt.Complete,t,i);break;case Mn.FAILED:Vo(yt.Error,t,i);break;default:}}async function uM(n,e,t){let r=n.get(ah);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=RL(e,n);if(s.length===0)return;o!==null&&s.shift(),$U(r,s),o!==null&&await o;let a=s[0];r.has(a)?await FD(n,s,t):r.awaitParentBlock(a,async()=>await FD(n,s,t))}async function FD(n,e,t){let r=n.get(ah),i=r.hydrating,o=n.get(ar),s=o.add();for(let l=0;l<e.length;l++){let u=e[l],f=r.get(u);if(f!=null){if(await qU(f),await HU(n),BU(f)){m2(f),LD(e.slice(l),r);break}i.get(u).resolve()}else{zU(l,e,r),LD(e.slice(l),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),t&&t(e),v2(r.get(a),e,r,n.get(St))}function BU(n){return _a(n.lView,n.tNode)[Cl]===yt.Error}function zU(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&Eh(i.lContainer)}function LD(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function $U(n,e){for(let t of e)n.hydrating.set(t,VU())}function HU(n){return new Promise(e=>vl(e,{injector:n}))}async function qU(n){let{tNode:e,lView:t}=n,r=_a(t,e);return new Promise(i=>{WU(r,i),jU(2,t,e)})}function WU(n,e){Array.isArray(n[ua])||(n[ua]=[]),n[ua].push(e)}function ui(n,e,t,r){let i=be(),o=Lo();if(Ar(i,o,e)){let s=Mt(),a=Cf();FV(a,i,n,e,t,r)}return ui}var jX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Qy=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Iy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function GU(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=n.at(o),f=e[o],p=Iy(o,u,o,f,t);if(p!==0){p<0&&n.updateValue(o,f),o++;continue}let g=n.at(s),_=e[l],T=Iy(s,g,l,_,t);if(T!==0){T<0&&n.updateValue(s,_),s--,l--;continue}let x=t(o,u),N=t(s,g),j=t(o,f);if(Object.is(j,N)){let ne=t(l,_);Object.is(ne,x)?(n.swap(o,s),n.updateValue(s,_),l--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(r??=new eh,i??=UD(n,o,s,t),Zy(n,r,o,j))n.updateValue(o,f),o++,s++;else if(i.has(j))r.set(x,n.detach(o)),s--;else{let ne=n.create(o,e[o]);n.attach(o,ne),o++,s++}}for(;o<=l;)VD(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let f=n.at(o),p=u.value,g=Iy(o,f,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,u=l.next();else{r??=new eh,i??=UD(n,o,s,t);let _=t(o,p);if(Zy(n,r,o,_))n.updateValue(o,p),o++,s++,u=l.next();else if(!i.has(_))n.attach(o,n.create(o,p)),o++,s++,u=l.next();else{let T=t(o,f);r.set(T,n.detach(o)),s--}}}for(;!u.done;)VD(n,r,t,n.length,u.value),u=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function Zy(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function VD(n,e,t,r,i){if(Zy(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function UD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var eh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function W(n,e,t,r,i,o,s,a){On("NgControlFlow");let l=be(),u=Mt(),f=Bi(u.consts,o);return Xf(l,u,n,e,t,r,i,f,256,s,a),K_}function K_(n,e,t,r,i,o,s,a){On("NgControlFlow");let l=be(),u=Mt(),f=Bi(u.consts,o);return Xf(l,u,n,e,t,r,i,f,512,s,a),K_}function G(n,e){On("NgControlFlow");let t=be(),r=Lo(),i=t[r]!==Pn?t[r]:-1,o=i!==-1?th(t,Ye+i):void 0,s=0;if(Ar(t,r,n)){let a=he(null);try{if(o!==void 0&&k_(o,s),n!==-1){let l=Ye+n,u=th(t,l),f=t_(t[ee],l),p=VA(u,f,t),g=yl(t,f,e,{dehydratedView:p});_l(u,g,s,fa(f,p))}}finally{he(a)}}else if(o!==void 0){let a=PA(o,s);a!==void 0&&(a[dt]=e)}}var Jy=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-rt}};var Xy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function lr(n,e,t,r,i,o,s,a,l,u,f,p,g){On("NgControlFlow");let _=be(),T=Mt(),x=l!==void 0,N=be(),j=a?s.bind(N[un][dt]):s,ne=new Xy(x,j);N[Ye+n]=ne,Xf(_,T,n+1,e,t,r,i,Bi(T.consts,o),256),x&&Xf(_,T,n+2,l,u,f,p,Bi(T.consts,g),512)}var e_=class extends Qy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[dt].$implicit}attach(e,t){let r=t[vn];this.needsIndexUpdate||=e!==this.length,_l(this.lContainer,t,e,fa(this.templateTNode,r)),KU(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,YU(this.lContainer,e),QU(this.lContainer,e)}create(e,t){let r=Kf(this.lContainer,this.templateTNode.tView.ssrId),i=yl(this.hostLView,this.templateTNode,new Jy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ph(e[ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[dt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[dt].$index=e}getLView(e){return ZU(this.lContainer,e)}};function ur(n){let e=he(null),t=si();try{let r=be(),i=r[ee],o=r[t],s=t+1,a=th(r,s);if(o.liveCollection===void 0){let u=t_(i,s);o.liveCollection=new e_(a,r,u)}else o.liveCollection.reset();let l=o.liveCollection;if(GU(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=Lo(),f=l.length===0;if(Ar(r,u,f)){let p=t+2,g=th(r,p);if(f){let _=t_(i,p),T=VA(g,_,r),x=yl(r,_,void 0,{dehydratedView:T});_l(g,x,0,fa(_,T))}else i.firstUpdatePass&&_h(g),k_(g,0)}}}finally{he(e)}}function th(n,e){return n[e]}function KU(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[xo]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[bn];uV(o,i),Bo.delete(r),i.detachedLeaveAnimationFns=void 0}}function YU(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[xo]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function QU(n,e){return cl(n,e)}function ZU(n,e){return PA(n,e)}function t_(n,e){return Fo(n,e)}function we(n,e,t){let r=be(),i=Lo();if(Ar(r,i,e)){let o=Mt(),s=Cf();EA(s,r,n,e,r[He],t)}return we}function jD(n,e,t,r,i){x_(e,n,t,i?"class":"style",r)}function y(n,e,t,r){let i=be(),o=i[ee],s=n+Ye,a=o.firstCreatePass?$A(s,i,2,e,kV,VT(),t,r):o.data[s];if(UV(a,i,n,e,dM),hf(a)){let l=i[ee];mA(l,i,a),HS(l,a,i)}return r!=null&&vA(i,a),y}function v(){let n=Mt(),e=Bt(),t=jV(e);return n.firstCreatePass&&HA(n,t),UT(t)&&BT(),LT(),t.classesWithoutHost!=null&&ZF(t)&&jD(n,t,be(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&JF(t)&&jD(n,t,be(),t.stylesWithoutHost,!1),v}function F(n,e,t,r){return y(n,e,t,r),v(),F}var dM=(n,e,t,r,i)=>(ai(!0),y_(e[He],r,ay()));function JU(n,e,t,r,i){let o=!uh(e,t);if(ai(o),o)return y_(e[He],r,ay());let s=e[vn],a=vh(s,n,e,t);return jS(s,i)&&lh(s,i,a.nextSibling),s&&(aS(t)||cS(a))&&oi(t)&&(jT(t),YS(a)),a}function fM(){dM=JU}var XU=(n,e,t,r,i)=>(ai(!0),GS(e[He],""));function ej(n,e,t,r,i){let o,s=!uh(e,t);if(ai(s),s)return GS(e[He],"");let a=e[vn],l=vh(a,n,e,t),u=AL(a,i);return lh(a,i,l),o=yh(u,l),o}function hM(){XU=ej}function ue(){return be()}var Af=void 0;function tj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var nj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Af,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Af,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Af,"{1} 'at' {0}",Af],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",tj],by={};function xn(n){let e=rj(n),t=BD(e);if(t)return t;let r=e.split("-")[0];if(t=BD(r),t)return t;if(r==="en")return nj;throw new z(701,!1)}function BD(n){return n in by||(by[n]=Cr.ng&&Cr.ng.common&&Cr.ng.common.locales&&Cr.ng.common.locales[n]),by[n]}var ft=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(ft||{});function rj(n){return n.toLowerCase().replace(/_/g,"-")}var Il="en-US";var ij=Il;function pM(n){typeof n=="string"&&(ij=n.toLowerCase().replace(/_/g,"-"))}function Q(n,e,t){let r=be(),i=Mt(),o=Bt();return gM(i,r,r[He],o,n,e,t),Q}function gM(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=_y(r,e,o),N2(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],_=f[p+1];l??=_y(r,e,o),SD(r,e,g,_,i,l)}if(u&&u.length)for(let p of u)l??=_y(r,e,o),SD(r,e,p,i,i,l)}}function k(n=1){return XT(n)}function Y_(n,e,t,r){rU(n,e,t,r)}function Q_(n){let e=be(),t=Mt(),r=iy();yf(r+1);let i=B_(t,r);if(n.dirty&&RT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=aU(e,r);n.reset(o,dL),n.notifyOnChanges()}return!0}return!1}function Z_(){return tU(be(),iy())}function Mf(n,e){return n<<17|e<<2}function Ho(n){return n>>17&32767}function oj(n){return(n&2)==2}function sj(n,e){return n&131071|e<<17}function n_(n){return n|2}function ga(n){return(n&131068)>>2}function Ty(n,e){return n&-131069|e<<2}function aj(n){return(n&1)===1}function r_(n){return n|1}function cj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ho(s),l=ga(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||ta(p,f)>0)&&(u=!0)}else f=t;if(i)if(l!==0){let g=Ho(n[a+1]);n[r+1]=Mf(g,a),g!==0&&(n[g+1]=Ty(n[g+1],r)),n[a+1]=sj(n[a+1],r)}else n[r+1]=Mf(a,0),a!==0&&(n[a+1]=Ty(n[a+1],r)),a=r;else n[r+1]=Mf(l,0),a===0?a=r:n[l+1]=Ty(n[l+1],r),l=r;u&&(n[r+1]=n_(n[r+1])),zD(n,f,r,!0),zD(n,f,r,!1),lj(e,f,n,r,o),s=Mf(a,l),o?e.classBindings=s:e.styleBindings=s}function lj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ta(o,e)>=0&&(t[r+1]=r_(t[r+1]))}function zD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ho(i):ga(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];uj(l,e)&&(a=!0,n[s+1]=r?r_(u):n_(u)),s=r?Ho(u):ga(u)}a&&(n[t+1]=r?n_(i):r_(i))}function uj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ta(n,e)>=0:!1}function Le(n,e){return dj(n,e,null,!0),Le}function dj(n,e,t,r){let i=be(),o=Mt(),s=ry(2);if(o.firstUpdatePass&&hj(o,n,s,r),e!==Pn&&Ar(i,s,e)){let a=o.data[si()];yj(o,a,i,i[He],n,i[s+1]=_j(e,t),r,s)}}function fj(n,e){return e>=n.expandoStartIndex}function hj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[si()],s=fj(n,t);Ej(o,r)&&e===null&&!s&&(e=!1),e=pj(i,o,e,r),cj(i,o,e,t,s,r)}}function pj(n,e,t,r){let i=YT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Dy(null,n,e,t,r),t=ul(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Dy(i,n,e,t,r),o===null){let l=gj(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Dy(null,n,e,l[1],r),l=ul(l,e.attrs,r),mj(n,e,r,l))}else o=vj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function gj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ga(r)!==0)return n[Ho(r)]}function mj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ho(i)]=r}function vj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ul(r,s,t)}return ul(r,e.attrs,t)}function Dy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ul(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ul(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_T(n,s,t?!0:e[++o]))}return n===void 0?null:n}function yj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=aj(u)?$D(l,e,t,i,ga(u),s):void 0;if(!nh(f)){nh(o)||oj(u)&&(o=$D(l,null,t,i,a,s));let p=qv(si(),t);TV(r,s,p,i,o)}}function $D(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,g=t[i+1];g===Pn&&(g=p?In:void 0);let _=p?lf(g,r):f===r?g:void 0;if(u&&!nh(_)&&(_=lf(l,r)),nh(_)&&(a=_,s))return a;let T=n[i+1];i=s?Ho(T):ga(T)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=lf(l,r))}return a}function nh(n){return n!==void 0}function _j(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=ri(gl(n)))),n}function Ej(n,e){return(n.flags&(e?8:16))!==0}function C(n,e=""){let t=be(),r=Mt(),i=n+Ye,o=r.firstCreatePass?L_(r,i,1,e,null):r.data[i],s=mM(r,t,o,e,n);t[i]=s,wf()&&R_(r,t,s,o),oa(o,!1)}var mM=(n,e,t,r,i)=>(ai(!0),WS(e[He],r));function Cj(n,e,t,r,i){let o=!uh(e,t);if(ai(o),o)return WS(e[He],r);let s=e[vn];return vh(s,n,e,t)}function vM(){mM=Cj}function wj(n,e,t,r=""){return Ar(n,Lo(),t)?e+Mo(t)+r:Pn}function Ij(n,e,t,r,i,o=""){let s=HT(),a=qA(n,s,t,i);return ry(2),a?e+Mo(t)+r+Mo(i)+o:Pn}function Ve(n){return se("",n),Ve}function se(n,e,t){let r=be(),i=wj(r,n,e,t);return i!==Pn&&yM(r,si(),i),se}function Nr(n,e,t,r,i){let o=be(),s=Ij(o,n,e,t,r,i);return s!==Pn&&yM(o,si(),s),Nr}function yM(n,e,t){let r=qv(e,n);LL(n[He],r,t)}function de(n,e,t){dy(e)&&(e=e());let r=be(),i=Lo();if(Ar(r,i,e)){let o=Mt(),s=Cf();EA(s,r,n,e,r[He],t)}return de}function ge(n,e){let t=dy(n);return t&&n.set(e),t}function fe(n,e){let t=be(),r=Mt(),i=Bt();return gM(r,t,t[He],i,n,e),fe}function bj(n,e,t){let r=Mt();if(r.firstCreatePass){let i=Tr(n);i_(t,r.data,r.blueprint,i,!0),i_(e,r.data,r.blueprint,i,!1)}}function i_(n,e,t,r,i){if(n=jt(n),Array.isArray(n))for(let o=0;o<n.length;o++)i_(n[o],e,t,r,i);else{let o=Mt(),s=be(),a=Bt(),l=Do(n)?n:jt(n.provide),u=Bv(n),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Do(n)||!n.multi){let _=new jo(u,i,Ee,null),T=Ay(l,e,i?f:f+g,p);T===-1?(Ry(jf(a,s),o,l),Sy(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),s.push(_)):(t[T]=_,s[T]=_)}else{let _=Ay(l,e,f+g,p),T=Ay(l,e,f,f+g),x=_>=0&&t[_],N=T>=0&&t[T];if(i&&!N||!i&&!x){Ry(jf(a,s),o,l);let j=Sj(i?Dj:Tj,t.length,i,r,u,n);!i&&N&&(t[T].providerFactory=j),Sy(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=_M(t[i?T:_],u,!i&&r);Sy(o,n,_>-1?_:T,j)}!i&&r&&N&&t[T].componentProviders++}}}function Sy(n,e,t,r){let i=Do(e),o=bT(e);if(i||o){let l=(o?jt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,l]):u[f+1].push(r,l)}else u.push(t,l)}}}function _M(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ay(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Tj(n,e,t,r,i){return o_(this.multi,[])}function Dj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=il(r,r[ee],this.providerFactory.index,i);s=l.slice(0,a),o_(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],o_(o,s);return s}function o_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Sj(n,e,t,r,i,o){let s=new jo(n,t,Ee,null);return s.multi=[],s.index=e,s.componentProviders=0,_M(s,i,r&&!t),s}function Kn(n,e=[]){return t=>{t.providersResolver=(r,i)=>bj(r,i?i(n):n,e)}}function bl(n,e,t){let r=mf()+n,i=be();return i[r]===Pn?U_(i,r,t?e.call(t):e()):x2(i,r)}function J_(n,e,t,r){return Aj(be(),mf(),n,e,t,r)}function EM(n,e){let t=n[e];return t===Pn?void 0:t}function Aj(n,e,t,r,i,o){let s=e+t;return Ar(n,s,i)?U_(n,s+1,o?r.call(o,i):r(i)):EM(n,s+1)}function Mj(n,e,t,r,i,o,s){let a=e+t;return qA(n,a,i,o)?U_(n,a+2,s?r.call(s,i,o):r(i,o)):EM(n,a+2)}function Th(n,e){let t=Mt(),r,i=n+Ye;t.firstCreatePass?(r=Rj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Fi(r.type,!0)),s,a=an(Ee);try{let l=Uf(!1),u=o();return Uf(l),Wv(t,be(),i,u),u}finally{an(a)}}function Rj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Dh(n,e,t,r){let i=n+Ye,o=be(),s=MT(o,i);return Pj(o,i)?Mj(o,mf(),e,s.transform,t,r,s):s.transform(t,r)}function Pj(n,e){return n[ee].data[e].pure}var rh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},X_=(()=>{class n{compileModuleSync(t){return new Jf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Vv(t),o=tA(i.declarations).reduce((s,a)=>{let l=ii(a);return l&&s.push(new pa(l)),s},[]);return new rh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Oj=(()=>{class n{zone=R(xe);changeDetectionScheduler=R(Er);applicationRef=R(St);applicationErrorHandler=R(dn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CM({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(te(V({},wM()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:zn,multi:!0,useFactory:()=>{let r=R(Oj,{optional:!0});return()=>r.initialize()}},{provide:zn,multi:!0,useFactory:()=>{let r=R(xj);return()=>{r.initialize()}}},e===!0?{provide:fy,useValue:!0}:[],{provide:bf,useValue:t??sA},{provide:dn,useFactory:()=>{let r=R(xe),i=R(lt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(rr),o.handleError(s))})}}}]}function wM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var xj=(()=>{class n{subscription=new ot;initialized=!1;zone=R(xe);pendingTasks=R(ar);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eE=(()=>{class n{applicationErrorHandler=R(dn);appRef=R(St);taskService=R(ar);ngZone=R(xe);zonelessEnabled=R(sa);tracing=R(Wo,{optional:!0});disableScheduling=R(fy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(qf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(bf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?gD:aA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(qf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tE(){return On("NgZoneless"),At([{provide:Er,useExisting:eE},{provide:xe,useClass:sl},{provide:sa,useValue:!0},{provide:bf,useValue:!1},[]])}function Nj(){return typeof $localize<"u"&&$localize.locale||Il}var Tl=new $("",{providedIn:"root",factory:()=>R(Tl,{optional:!0,skipSelf:!0})||Nj()});function Rt(n){return aT(n)}function Ko(n,e){return Td(n,e?.equal)}var IM=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};var sE={JSACTION:"__jsaction",OWNER:"__owner"},SM={};function kj(n){return n[sE.JSACTION]}function bM(n,e){n[sE.JSACTION]=e}function Fj(n){return SM[n]}function Lj(n,e){SM[n]=e}var oe={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Vj=[oe.MOUSEENTER,oe.MOUSELEAVE,"pointerenter","pointerleave"],eee=[oe.CLICK,oe.DBLCLICK,oe.FOCUSIN,oe.FOCUSOUT,oe.KEYDOWN,oe.KEYUP,oe.KEYPRESS,oe.MOUSEOVER,oe.MOUSEOUT,oe.SUBMIT,oe.TOUCHSTART,oe.TOUCHEND,oe.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Uj=[oe.FOCUS,oe.BLUR,oe.ERROR,oe.LOAD,oe.TOGGLE],aE=n=>Uj.indexOf(n)>=0;function jj(n){return n===oe.MOUSEENTER?oe.MOUSEOVER:n===oe.MOUSELEAVE?oe.MOUSEOUT:n===oe.POINTERENTER?oe.POINTEROVER:n===oe.POINTERLEAVE?oe.POINTEROUT:n}function Bj(n,e,t,r){let i=!1;aE(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function zj(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function $j(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var TM=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Hj(n){return n.which===2||n.which==null&&n.button===4}function qj(n){return TM&&n.metaKey||!TM&&n.ctrlKey||Hj(n)||n.shiftKey}function Wj(n,e,t){let r=n.relatedTarget;return(n.type===oe.MOUSEOVER&&e===oe.MOUSEENTER||n.type===oe.MOUSEOUT&&e===oe.MOUSELEAVE||n.type===oe.POINTEROVER&&e===oe.POINTERENTER||n.type===oe.POINTEROUT&&e===oe.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function Gj(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===oe.MOUSEOVER?t.type=oe.MOUSEENTER:n.type===oe.MOUSEOUT?t.type=oe.MOUSELEAVE:n.type===oe.POINTEROVER?t.type=oe.POINTERENTER:t.type=oe.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var Kj=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Rh=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){Kj&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Bj(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)zj(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Yj={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Gi(n){return n.eventType}function cE(n,e){n.eventType=e}function Ah(n){return n.event}function AM(n,e){n.event=e}function MM(n){return n.targetElement}function RM(n,e){n.targetElement=e}function PM(n){return n.eic}function Qj(n,e){n.eic=e}function Zj(n){return n.timeStamp}function Jj(n,e){n.timeStamp=e}function Mh(n){return n.eia}function OM(n,e,t){n.eia=[e,t]}function nE(n){n.eia=void 0}function Sh(n){return n[1]}function Xj(n){return n.eirp}function xM(n,e){n.eirp=e}function NM(n){return n.eir}function kM(n,e){n.eir=e}function FM(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function eB(n,e,t,r,i,o,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var rE=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Gi(this.eventInfo)}setEventType(e){cE(this.eventInfo,e)}getEvent(){return Ah(this.eventInfo)}setEvent(e){AM(this.eventInfo,e)}getTargetElement(){return MM(this.eventInfo)}setTargetElement(e){RM(this.eventInfo,e)}getContainer(){return PM(this.eventInfo)}setContainer(e){Qj(this.eventInfo,e)}getTimestamp(){return Zj(this.eventInfo)}setTimestamp(e){Jj(this.eventInfo,e)}getAction(){let e=Mh(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){nE(this.eventInfo);return}OM(this.eventInfo,e.name,e.element)}getIsReplay(){return Xj(this.eventInfo)}setIsReplay(e){xM(this.eventInfo,e)}getResolved(){return NM(this.eventInfo)}setResolved(e){kM(this.eventInfo,e)}clone(){return new n(FM(this.eventInfo))}},tB={},nB=/\s*;\s*/,rB=oe.CLICK,iE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Gi(e)===oe.CLICK&&qj(Ah(e))?cE(e,oe.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){NM(e)||(this.populateAction(e,MM(e)),kM(e,!0))}resolveParentAction(e){let t=Mh(e),r=t&&Sh(t);nE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==PM(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Mh(e));)r=this.getParentNode(r);let i=Mh(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Gi(e)===oe.MOUSEENTER||Gi(e)===oe.MOUSELEAVE||Gi(e)===oe.POINTERENTER||Gi(e)===oe.POINTERLEAVE)))if(Wj(Ah(e),Gi(e),Sh(i))){let o=Gj(Ah(e),Sh(i));AM(e,o),RM(e,Sh(i))}else nE(e)}getParentNode(e){let t=e[sE.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[Gi(t)];i!==void 0&&OM(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=kj(e);if(!t){let r=e.getAttribute(Tf.JSACTION);if(!r)t=tB,bM(e,t);else{if(t=Fj(r),!t){t={};let i=r.split(nB);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(Yj.EVENT_ACTION_SEPARATOR),l=a!==-1,u=l?s.substr(0,a).trim():rB,f=l?s.substr(a+1).trim():s;t[u]=f}Lj(r,t)}bM(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},LM=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(LM||{}),oE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new rE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&iB(r.element,t)&&$j(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function iB(n,e){return n.tagName==="A"&&(e.getEventType()===oe.CLICK||e.getEventType()===oe.CLICKMOD)}var VM=Symbol.for("propagationStopped"),lE={REPLAY:101};var oB="`preventDefault` called during event replay.";var sB="`composedPath` called during event replay.",Ph=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new iE({clickModSupport:t}),this.dispatcher=new oE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&lB(e),aB(e);e.getAction();){if(uB(e),aE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),cB(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function aB(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[VM]=!0,t()};Yo(e,"stopPropagation",r),Yo(e,"stopImmediatePropagation",r)}function cB(n){return!!n.getEvent()[VM]}function lB(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);Yo(e,"target",t),Yo(e,"eventPhase",lE.REPLAY),Yo(e,"preventDefault",()=>{throw r(),new Error(oB+"")}),Yo(e,"composedPath",()=>{throw new Error(sB+"")})}function uB(n){let e=n.getEvent(),t=n.getAction()?.element;t&&Yo(e,"currentTarget",t,{configurable:!0})}function Yo(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function UM(n,e){n.ecrd(t=>{e.dispatch(t)},LM.I_AM_THE_JSACTION_FRAMEWORK)}function dB(n){return n?.q??[]}function fB(n){n&&(DM(n.c,n.et,n.h),DM(n.c,n.etc,n.h,!0))}function DM(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var hB=!1,jM=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=hB;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=eB(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){xM(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Vj.indexOf(t)>=0)return;let o=(a,l,u)=>{this.handleEvent(a,l,u)};this.eventHandlers[t]=o;let s=jj(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>l=>{o(t,l,a)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),fB(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=FM(i);cE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function BM(n,e=window){return dB(e._ejsas?.[n])}function uE(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var GM=Symbol("InputSignalNode#UNSET"),FB=te(V({},Dd),{transformFn:void 0,applyValueToInputSignal(n,e){Us(n,e)}});function KM(n,e){let t=Object.create(FB);t.value=n,t.transformFn=e?.transform;function r(){if(Fs(t),t.value===GM){let i=null;throw new z(-950,i)}return t.value}return r[Qt]=t,r}var kh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>dl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},LB=new $("");LB.__NG_ELEMENT_ID__=n=>{let e=Bt();if(e===null)throw new z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new z(204,!1)};function zM(n,e){return KM(n,e)}function VB(n){return KM(GM,n)}var YM=(zM.required=VB,zM);var dE=new $(""),UB=new $("");function Dl(n){return!n.moduleRef}function jB(n){let e=Dl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{Dl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(dn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Dl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dE);s.add(o),n.moduleRef.onDestroy(()=>{nl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return zB(r,t,()=>{let o=e.get(ar),s=o.add(),a=e.get(G_);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Tl,Il);if(pM(l||Il),!e.get(UB,!0))return Dl(n)?e.get(St):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Dl(n)){let f=e.get(St);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return BB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var BB;function zB(n,e,t){try{let r=t();return qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var xh=null;function $B(n=[],e){return st.create({name:e,providers:[{provide:Kc,useValue:"platform"},{provide:dE,useValue:new Set([()=>xh=null])},...n]})}function HB(n=[]){if(xh)return xh;let e=$B(n);return xh=e,aM(),qB(e),e}function qB(n){let e=n.get(ih,null);vt(n,()=>{e?.forEach(t=>t())})}function Sl(){return!1}var Ki=(()=>{class n{static __NG_ELEMENT_ID__=WB}return n})();function WB(n){return GB(Bt(),be(),(n&16)===16)}function GB(n,e,t){if(oi(n)&&!t){let r=Wn(n.index,e);return new Hi(r,r)}else if(n.type&175){let r=e[un];return new Hi(r,e)}return null}function QM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ke(8);try{let o=i?.injector??HB(r),s=[CM({}),{provide:Er,useExisting:eE},tD,...t||[]],a=new ll({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return jB({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ke(9)}}var Oh=new WeakSet,$M="",Nh=[];function HM(n){return n.get(f_,bS)}function ZM(){let n=[{provide:f_,useFactory:()=>{let e=!0;{let t=R(Pr);e=!!window._ejsas?.[t]}return e&&On("NgEventReplay"),e}}];return n.push({provide:zn,useValue:()=>{let e=R(St),{injector:t}=e;if(!Oh.has(e)){let r=R(h_);if(HM(t)){OS();let i=t.get(Pr),o=RS(i,(s,a,l)=>{s.nodeType===Node.ELEMENT_NODE&&(DS(s,a,l),SS(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Wi,useFactory:()=>{let e=R(St),{injector:t}=e;return()=>{if(!HM(t)||Oh.has(e))return;Oh.add(e);let r=t.get(Pr);e.onDestroy(()=>{Oh.delete(e),uE(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(MS);KB(i,t);let o=t.get(h_);o.get($M)?.forEach(AS),o.delete($M);let s=i.instance;US(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var KB=(n,e)=>{let t=e.get(Pr),r=window._ejsas[t],i=n.instance=new jM(new Rh(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=BM(t);i.replayEarlyEventInfos(o),uE(t);let s=new Ph(a=>{YB(e,a,a.currentTarget)});UM(i,s)};function YB(n,e,t){let r=(t&&t.getAttribute(pl))??"";/d\d+/.test(r)?QB(r,n,e,t):e.eventPhase===lE.REPLAY&&p_(e,t)}function QB(n,e,t,r){Nh.push({event:t,currentTarget:r}),uM(e,n,ZB)}function ZB(n){let e=[...Nh],t=new Set(n);Nh=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(pl);t.has(o)?p_(r,i):Nh.push({event:r,currentTarget:i})}}var qM=!1;function JB(){qM||(qM=!0,FS(),fM(),vM(),hM(),iM(),JA(),LA(),_A())}function XB(n){return n.whenStable()}function JM(){let n=[{provide:hl,useFactory:()=>{let e=!0;return e=!!R(qo,{optional:!0})?.get(g_,null),e&&On("NgHydration"),e}},{provide:zn,useValue:()=>{xA(!1),R(hl)&&(zS(fl()),JB())},multi:!0}];return n.push({provide:d_,useFactory:()=>R(hl)},{provide:Wi,useFactory:()=>{if(R(hl)){let e=R(St);return()=>{XB(e).then(()=>{e.destroyed||V_(e)})}}return()=>{}},multi:!0}),At(n)}function Qo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var tR=null;function Yn(){return tR}function fE(n){tR??=n}var Al=class{},hE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(nR),providedIn:"platform"})}return n})();var nR=(()=>{class n extends hE{_location;_history;_doc=R(Dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function rR(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function XM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yi(n){return n&&n[0]!=="?"?`?${n}`:n}var Ea=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(oR),providedIn:"root"})}return n})(),iR=new $(""),oR=(()=>{class n extends Ea{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Yi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Yi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(me(hE),me(iR,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ca=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=n3(XM(eR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yi(r))}normalize(t){return n.stripTrailingSlash(t3(this._basePath,eR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yi;static joinWithSlash=rR;static stripTrailingSlash=XM;static \u0275fac=function(r){return new(r||n)(me(Ea))};static \u0275prov=Z({token:n,factory:()=>e3(),providedIn:"root"})}return n})();function e3(){return new Ca(me(Ea))}function t3(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function eR(n){return n.replace(/\/index.html$/,"")}function n3(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Jt=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Jt||{}),We=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(We||{}),_n=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(_n||{}),fi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function aR(n){return xn(n)[ft.LocaleId]}function cR(n,e,t){let r=xn(n),i=[r[ft.DayPeriodsFormat],r[ft.DayPeriodsStandalone]],o=Qn(i,e);return Qn(o,t)}function lR(n,e,t){let r=xn(n),i=[r[ft.DaysFormat],r[ft.DaysStandalone]],o=Qn(i,e);return Qn(o,t)}function uR(n,e,t){let r=xn(n),i=[r[ft.MonthsFormat],r[ft.MonthsStandalone]],o=Qn(i,e);return Qn(o,t)}function dR(n,e){let r=xn(n)[ft.Eras];return Qn(r,e)}function Ml(n,e){let t=xn(n);return Qn(t[ft.DateFormat],e)}function Rl(n,e){let t=xn(n);return Qn(t[ft.TimeFormat],e)}function Pl(n,e){let r=xn(n)[ft.DateTimeFormat];return Qn(r,e)}function Ol(n,e){let t=xn(n),r=t[ft.NumberSymbols][e];if(typeof r>"u"){if(e===fi.CurrencyDecimal)return t[ft.NumberSymbols][fi.Decimal];if(e===fi.CurrencyGroup)return t[ft.NumberSymbols][fi.Group]}return r}function fR(n){if(!n[ft.ExtraData])throw new z(2303,!1)}function hR(n){let e=xn(n);return fR(e),(e[ft.ExtraData][2]||[]).map(r=>typeof r=="string"?pE(r):[pE(r[0]),pE(r[1])])}function pR(n,e,t){let r=xn(n);fR(r);let i=[r[ft.ExtraData][0],r[ft.ExtraData][1]],o=Qn(i,e)||[];return Qn(o,t)||[]}function Qn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new z(2304,!1)}function pE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var r3=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fh={},i3=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gR(n,e,t,r){let i=h3(n);e=di(t,e)||e;let s=[],a;for(;e;)if(a=i3.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=vR(r,l),i=f3(i,r));let u="";return s.forEach(f=>{let p=u3(f);u+=p?p(i,t,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Bh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function di(n,e){let t=aR(n);if(Fh[t]??={},Fh[t][e])return Fh[t][e];let r="";switch(e){case"shortDate":r=Ml(n,_n.Short);break;case"mediumDate":r=Ml(n,_n.Medium);break;case"longDate":r=Ml(n,_n.Long);break;case"fullDate":r=Ml(n,_n.Full);break;case"shortTime":r=Rl(n,_n.Short);break;case"mediumTime":r=Rl(n,_n.Medium);break;case"longTime":r=Rl(n,_n.Long);break;case"fullTime":r=Rl(n,_n.Full);break;case"short":let i=di(n,"shortTime"),o=di(n,"shortDate");r=Lh(Pl(n,_n.Short),[i,o]);break;case"medium":let s=di(n,"mediumTime"),a=di(n,"mediumDate");r=Lh(Pl(n,_n.Medium),[s,a]);break;case"long":let l=di(n,"longTime"),u=di(n,"longDate");r=Lh(Pl(n,_n.Long),[l,u]);break;case"full":let f=di(n,"fullTime"),p=di(n,"fullDate");r=Lh(Pl(n,_n.Full),[f,p]);break}return r&&(Fh[t][e]=r),r}function Lh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function dr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function o3(n,e){return dr(n,3).substring(0,e)}function _t(n,e,t=0,r=!1,i=!1){return function(o,s){let a=s3(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return o3(a,e);let l=Ol(s,fi.MinusSign);return dr(a,e,l,r,i)}}function s3(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new z(2301,!1)}}function Je(n,e,t=Jt.Format,r=!1){return function(i,o){return a3(i,o,n,e,t,r)}}function a3(n,e,t,r,i,o){switch(t){case 2:return uR(e,i,r)[n.getMonth()];case 1:return lR(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=hR(e),f=pR(e,i,r),p=u.findIndex(g=>{if(Array.isArray(g)){let[_,T]=g,x=s>=_.hours&&a>=_.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(_.hours<T.hours){if(x&&N)return!0}else if(x||N)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return cR(e,i,r)[s<12?0:1];case 3:return dR(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new z(2302,!1)}}function Vh(n){return function(e,t,r){let i=-1*r,o=Ol(t,fi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+dr(s,2,o)+dr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+dr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+dr(s,2,o)+":"+dr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+dr(s,2,o)+":"+dr(Math.abs(i%60),2,o);default:throw new z(2310,!1)}}}var c3=0,jh=4;function l3(n){let e=Bh(n,c3,1).getDay();return Bh(n,0,1+(e<=jh?jh:jh+7)-e)}function mR(n){let e=n.getDay(),t=e===0?-3:jh-e;return Bh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function gE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=mR(t),s=l3(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return dr(i,n,Ol(r,fi.MinusSign))}}function Uh(n,e=!1){return function(t,r){let o=mR(t).getFullYear();return dr(o,n,Ol(r,fi.MinusSign),e)}}var mE={};function u3(n){if(mE[n])return mE[n];let e;switch(n){case"G":case"GG":case"GGG":e=Je(3,We.Abbreviated);break;case"GGGG":e=Je(3,We.Wide);break;case"GGGGG":e=Je(3,We.Narrow);break;case"y":e=_t(0,1,0,!1,!0);break;case"yy":e=_t(0,2,0,!0,!0);break;case"yyy":e=_t(0,3,0,!1,!0);break;case"yyyy":e=_t(0,4,0,!1,!0);break;case"Y":e=Uh(1);break;case"YY":e=Uh(2,!0);break;case"YYY":e=Uh(3);break;case"YYYY":e=Uh(4);break;case"M":case"L":e=_t(1,1,1);break;case"MM":case"LL":e=_t(1,2,1);break;case"MMM":e=Je(2,We.Abbreviated);break;case"MMMM":e=Je(2,We.Wide);break;case"MMMMM":e=Je(2,We.Narrow);break;case"LLL":e=Je(2,We.Abbreviated,Jt.Standalone);break;case"LLLL":e=Je(2,We.Wide,Jt.Standalone);break;case"LLLLL":e=Je(2,We.Narrow,Jt.Standalone);break;case"w":e=gE(1);break;case"ww":e=gE(2);break;case"W":e=gE(1,!0);break;case"d":e=_t(2,1);break;case"dd":e=_t(2,2);break;case"c":case"cc":e=_t(7,1);break;case"ccc":e=Je(1,We.Abbreviated,Jt.Standalone);break;case"cccc":e=Je(1,We.Wide,Jt.Standalone);break;case"ccccc":e=Je(1,We.Narrow,Jt.Standalone);break;case"cccccc":e=Je(1,We.Short,Jt.Standalone);break;case"E":case"EE":case"EEE":e=Je(1,We.Abbreviated);break;case"EEEE":e=Je(1,We.Wide);break;case"EEEEE":e=Je(1,We.Narrow);break;case"EEEEEE":e=Je(1,We.Short);break;case"a":case"aa":case"aaa":e=Je(0,We.Abbreviated);break;case"aaaa":e=Je(0,We.Wide);break;case"aaaaa":e=Je(0,We.Narrow);break;case"b":case"bb":case"bbb":e=Je(0,We.Abbreviated,Jt.Standalone,!0);break;case"bbbb":e=Je(0,We.Wide,Jt.Standalone,!0);break;case"bbbbb":e=Je(0,We.Narrow,Jt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Je(0,We.Abbreviated,Jt.Format,!0);break;case"BBBB":e=Je(0,We.Wide,Jt.Format,!0);break;case"BBBBB":e=Je(0,We.Narrow,Jt.Format,!0);break;case"h":e=_t(3,1,-12);break;case"hh":e=_t(3,2,-12);break;case"H":e=_t(3,1);break;case"HH":e=_t(3,2);break;case"m":e=_t(4,1);break;case"mm":e=_t(4,2);break;case"s":e=_t(5,1);break;case"ss":e=_t(5,2);break;case"S":e=_t(6,1);break;case"SS":e=_t(6,2);break;case"SSS":e=_t(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Vh(0);break;case"ZZZZZ":e=Vh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vh(2);break;default:return null}return mE[n]=e,e}function vR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function d3(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function f3(n,e,t){let i=n.getTimezoneOffset(),o=vR(e,i);return d3(n,-1*(o-i))}function h3(n){if(sR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Bh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(r3))return p3(r)}let e=new Date(n);if(!sR(e))throw new z(2311,!1);return e}function p3(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,u),e}function sR(n){return n instanceof Date&&!isNaN(n.valueOf())}function g3(n,e){return new z(2100,!1)}var m3="mediumDate",yR=new $(""),_R=new $(""),vE=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??m3,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gR(t,s,o||this.locale,a)}catch(s){throw g3(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ee(Tl,16),Ee(yR,24),Ee(_R,24))};static \u0275pipe=z_({name:"date",type:n,pure:!0})}return n})();var Ge=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=or({})}return n})();function yE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xl=class{};var _E="browser";function ER(n){return n===_E}var Nl=class{_doc;constructor(e){this._doc=e}manager},zh=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),Hh=new $(""),bE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof zh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof zh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(me(Hh),me(xe))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),EE="ng-app-id";function wR(n){for(let e of n)e.remove()}function IR(n,e){let t=e.createElement("style");return t.textContent=n,t}function y3(n,e,t,r){let i=n.head?.querySelectorAll(`style[${EE}="${e}"],link[${EE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(EE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function wE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var TE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,y3(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,IR);r?.forEach(i=>this.addUsage(i,this.external,wE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(wR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])wR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,IR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,wE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(me(Dt),me(Pr),me(oh,8),me(li))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),CE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},DE=/%COMP%/g;var TR="%COMP%",_3=`_nghost-${TR}`,E3=`_ngcontent-${TR}`,C3=!0,w3=new $("",{providedIn:"root",factory:()=>C3});function I3(n){return E3.replace(DE,n)}function b3(n){return _3.replace(DE,n)}function DR(n,e){return e.map(t=>t.replace(DE,n))}var SE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new kl(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof $h?i.applyToHost(t):i instanceof Fl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case ci.Emulated:o=new $h(l,u,r,this.appId,f,s,a,p,g);break;case ci.ShadowDom:return new IE(l,u,t,r,s,a,this.nonce,p,g);default:o=new Fl(l,u,r,f,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(me(bE),me(TE),me(Pr),me(w3),me(Dt),me(xe),me(oh),me(Wo,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),kl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(CE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(bR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=CE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=CE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Sr.DashCase|Sr.Important)?e.style.setProperty(t,r,i&Sr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Sr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function bR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var IE=class extends kl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=DR(i.id,f);for(let g of f){let _=document.createElement("style");a&&_.setAttribute("nonce",a),_.textContent=g,this.shadowRoot.appendChild(_)}let p=i.getExternalStyles?.();if(p)for(let g of p){let _=wE(g,o);a&&_.setAttribute("nonce",a),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fl=class extends kl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=u?DR(u,f):f,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Bo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},$h=class extends Fl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u){let f=i+"-"+r.id;super(e,t,r,o,s,a,l,u,f),this.contentAttr=I3(f),this.hostAttr=b3(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var qh=class n extends Al{supportsDOMEvents=!0;static makeCurrent(){fE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=T3();return t==null?null:D3(t)}resetBaseElement(){Ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yE(document.cookie,e)}},Ll=null;function T3(){return Ll=Ll||document.head.querySelector("base"),Ll?Ll.getAttribute("href"):null}function D3(n){return new URL(n,document.baseURI).pathname}var S3=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),SR=["alt","control","meta","shift"],A3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},M3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AR=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),SR.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=A3[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),SR.forEach(s=>{if(s!==i){let a=M3[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();function AE(n,e,t){let r=V({rootComponent:n,platformRef:t?.platformRef},R3(e));return QM(r)}function R3(n){return{appProviders:[...k3,...n?.providers??[]],platformProviders:N3}}function P3(){qh.makeCurrent()}function O3(){return new rr}function x3(){return c_(document),document}var N3=[{provide:li,useValue:_E},{provide:ih,useValue:P3,multi:!0},{provide:Dt,useFactory:x3}];var k3=[{provide:Kc,useValue:"root"},{provide:rr,useFactory:O3},{provide:Hh,useClass:zh,multi:!0,deps:[Dt]},{provide:Hh,useClass:AR,multi:!0,deps:[Dt]},SE,TE,bE,{provide:zo,useExisting:SE},{provide:xl,useClass:S3},[]];var Vl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var F3="X-Request-URL",L3="text/plain",V3="application/json",Kse=`${V3}, ${L3}, */*`;var RE=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(RE||{}),ME=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Vl,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var Wh=class n extends ME{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=RE.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var MR=new $("");var Yse=RegExp(`^${F3}:`,"m");var U3=new $(""),j3="b",B3="h",z3="s",$3="st",H3="u",q3="rt",PE=new $(""),W3=["GET","HEAD"];function G3(n,e){let _=R(PE),{isCacheActive:t}=_,r=Ab(_,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!W3.includes(o)||!r.includeRequestsWithAuthHeaders&&K3(n)||r.filter?.(n)===!1)return e(n);let s=R(qo);if(R(U3,{optional:!0}))throw new z(2803,!1);let l=n.url,u=Y3(n,l),f=s.get(u,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),f){let{[j3]:T,[q3]:x,[B3]:N,[z3]:j,[$3]:ne,[H3]:le}=f,Ne=T;switch(x){case"arraybuffer":Ne=new TextEncoder().encode(T).buffer;break;case"blob":Ne=new Blob([T]);break}let Lt=new Vl(N);return re(new Wh({body:Ne,headers:Lt,status:j,statusText:ne,url:le}))}return e(n)}function K3(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function RR(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Y3(n,e){let{params:t,method:r,responseType:i}=n,o=RR(t),s=n.serializeBody();s instanceof URLSearchParams?s=RR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),l=Q3(a);return l}function Q3(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function PR(n){return[{provide:PE,useFactory:()=>(On("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:MR,useValue:G3,multi:!0},{provide:Wi,multi:!0,useFactory:()=>{let e=R(St),t=R(PE);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var OR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(me(Dt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gh=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(Gh||{});function Z3(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function xR(){return Z3(Gh.EventReplay,ZM())}function NR(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(Gh.HttpTransferCacheOptions);return At([[],[],JM(),t.has(Gh.NoHttpTransferCache)||r?[]:PR({}),e])}var ve="primary",Xl=Symbol("RouteTitle"),FE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xo(n){return new FE(n)}function zR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function X3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kr(n[t],e[t]))return!1;return!0}function kr(n,e){let t=n?LE(n):void 0,r=e?LE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!$R(n[i],e[i]))return!1;return!0}function LE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $R(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function HR(n){return n.length>0?n[n.length-1]:null}function pi(n){return lv(n)?n:qi(n)?Me(Promise.resolve(n)):re(n)}var ez={exact:WR,subset:GR},qR={exact:tz,subset:nz,ignored:()=>!0};function kR(n,e,t){return ez[t.paths](n.root,e.root,t.matrixParams)&&qR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tz(n,e){return kr(n,e)}function WR(n,e,t){if(!Zo(n.segments,e.segments)||!Qh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!WR(n.children[r],e.children[r],t))return!1;return!0}function nz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$R(n[t],e[t]))}function GR(n,e,t){return KR(n,e,e.segments,t)}function KR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zo(i,t)||e.hasChildren()||!Qh(i,t,r))}else if(n.segments.length===t.length){if(!Zo(n.segments,t)||!Qh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!GR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Zo(n.segments,i)||!Qh(n.segments,i,r)||!n.children[ve]?!1:KR(n.children[ve],e,o,r)}}function Qh(n,e,t){return e.every((r,i)=>qR[t](n[i].parameters,r.parameters))}var Lr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return oz.serialize(this)}},Ue=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zh(this)}},Qi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return QR(this)}};function rz(n,e){return Zo(n,e)&&n.every((t,r)=>kr(t.parameters,e[r].parameters))}function Zo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function iz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}var eu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>new es,providedIn:"root"})}return n})(),es=class{parse(e){let t=new UE(e);return new Lr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ul(e.root,!0)}`,r=cz(e.queryParams),i=typeof e.fragment=="string"?`#${sz(e.fragment)}`:"";return`${t}${r}${i}`}},oz=new es;function Zh(n){return n.segments.map(e=>QR(e)).join("/")}function Ul(n,e){if(!n.hasChildren())return Zh(n);if(e){let t=n.children[ve]?Ul(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ve&&r.push(`${i}:${Ul(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=iz(n,(r,i)=>i===ve?[Ul(n.children[ve],!1)]:[`${i}:${Ul(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ve]!=null?`${Zh(n)}/${t[0]}`:`${Zh(n)}/(${t.join("//")})`}}function YR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Kh(n){return YR(n).replace(/%3B/gi,";")}function sz(n){return encodeURI(n)}function VE(n){return YR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jh(n){return decodeURIComponent(n)}function FR(n){return Jh(n.replace(/\+/g,"%20"))}function QR(n){return`${VE(n.path)}${az(n.parameters)}`}function az(n){return Object.entries(n).map(([e,t])=>`;${VE(e)}=${VE(t)}`).join("")}function cz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Kh(t)}=${Kh(i)}`).join("&"):`${Kh(t)}=${Kh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var lz=/^[^\/()?;#]+/;function OE(n){let e=n.match(lz);return e?e[0]:""}var uz=/^[^\/()?;=#]+/;function dz(n){let e=n.match(uz);return e?e[0]:""}var fz=/^[^=?&#]+/;function hz(n){let e=n.match(fz);return e?e[0]:""}var pz=/^[^&#]+/;function gz(n){let e=n.match(pz);return e?e[0]:""}var UE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new Ue(e,t)),r}parseSegment(){let e=OE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Qi(Jh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=dz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=OE(this.remaining);i&&(r=i,this.capture(r))}e[Jh(t)]=Jh(r)}parseQueryParam(e){let t=hz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=gz(this.remaining);s&&(r=s,this.capture(r))}let i=FR(t),o=FR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=OE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ve);let s=this.parseChildren();t[o??ve]=Object.keys(s).length===1&&s[ve]?s[ve]:new Ue([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function ZR(n){return n.segments.length>0?new Ue([],{[ve]:n}):n}function JR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=JR(i);if(r===ve&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ue(n.segments,e);return mz(t)}function mz(n){if(n.numberOfChildren===1&&n.children[ve]){let e=n.children[ve];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Zi(n){return n instanceof Lr}function XR(n,e,t=null,r=null){let i=eP(n);return tP(i,e,t,r)}function eP(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Ue(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ZR(r);return e??i}function tP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xE(i,i,i,t,r);let o=vz(e);if(o.toRoot())return xE(i,i,new Ue([],{}),t,r);let s=yz(o,i,n),a=s.processChildren?Bl(s.segmentGroup,s.index,o.commands):rP(s.segmentGroup,s.index,o.commands);return xE(i,s.segmentGroup,a,t,r)}function Xh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hl(n){return typeof n=="object"&&n!=null&&n.outlets}function xE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=nP(n,e,t);let a=ZR(JR(s));return new Lr(a,o,i)}function nP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=nP(o,e,t)}),new Ue(n.segments,r)}var ep=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xh(r[0]))throw new z(4003,!1);let i=r.find(Hl);if(i&&i!==HR(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ep(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ep(t,e,r)}var ba=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function yz(n,e,t){if(n.isAbsolute)return new ba(e,!0,0);if(!t)return new ba(e,!1,NaN);if(t.parent===null)return new ba(t,!0,0);let r=Xh(n.commands[0])?0:1,i=t.segments.length-1+r;return _z(t,i,n.numberOfDoubleDots)}function _z(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new ba(r,!1,i-o)}function Ez(n){return Hl(n[0])?n[0].outlets:{[ve]:n}}function rP(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Bl(n,e,t);let r=Cz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ue(n.segments.slice(0,r.pathIndex),{});return o.children[ve]=new Ue(n.segments.slice(r.pathIndex),n.children),Bl(o,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?jE(n,e,t):r.match?Bl(n,0,i):jE(n,e,t)}function Bl(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=Ez(t),i={};if(Object.keys(r).some(o=>o!==ve)&&n.children[ve]&&n.numberOfChildren===1&&n.children[ve].segments.length===0){let o=Bl(n.children[ve],e,t);return new Ue(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=rP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ue(n.segments,i)}}function Cz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Hl(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!VR(l,u,s))return o;r+=2}else{if(!VR(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Hl(o)){let l=wz(o.outlets);return new Ue(r,l)}if(i===0&&Xh(t[0])){let l=n.segments[e];r.push(new Qi(l.path,LR(t[0]))),i++;continue}let s=Hl(o)?o.outlets[ve]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Xh(a)?(r.push(new Qi(s,LR(a))),i+=2):(r.push(new Qi(s,{})),i++)}return new Ue(r,{})}function wz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=jE(new Ue([],{}),0,r))}),e}function LR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function VR(n,e,t){return n==t.path&&kr(e,t.parameters)}var zl="imperative",Pt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Pt||{}),Fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},ts=class extends Fn{type=Pt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends Fn{urlAfterRedirects;type=Pt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(fn||{}),ql=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ql||{}),Fr=class extends Fn{reason;code;type=Pt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hi=class extends Fn{reason;code;type=Pt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Da=class extends Fn{error;target;type=Pt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wl=class extends Fn{urlAfterRedirects;state;type=Pt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tp=class extends Fn{urlAfterRedirects;state;type=Pt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},np=class extends Fn{urlAfterRedirects;state;shouldActivate;type=Pt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rp=class extends Fn{urlAfterRedirects;state;type=Pt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ip=class extends Fn{urlAfterRedirects;state;type=Pt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},op=class{route;type=Pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},sp=class{route;type=Pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ap=class{snapshot;type=Pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cp=class{snapshot;type=Pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lp=class{snapshot;type=Pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},up=class{snapshot;type=Pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Gl=class{},Sa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Iz(n){return!(n instanceof Gl)&&!(n instanceof Sa)}function bz(n,e){return n.providers&&!n._injector&&(n._injector=ya(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fr(n){return n.outlet||ve}function Tz(n,e){let t=n.filter(r=>fr(r)===e);return t.push(...n.filter(r=>fr(r)!==e)),t}function Ra(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ra(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Pa(this.rootInjector)}},Pa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(me(lt))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=BE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=BE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=zE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zE(e,this._root).map(t=>t.value)}};function BE(n,e){if(n===e.value)return e;for(let t of e.children){let r=BE(n,t);if(r)return r}return null}function zE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=zE(n,t);if(r.length)return r.unshift(e),r}return[]}var kn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ia(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kl=class extends fp{snapshot;constructor(e,t){super(e),this.snapshot=t,QE(this,e)}toString(){return this.snapshot.toString()}};function iP(n){let e=Dz(n),t=new Ut([new Qi("",{})]),r=new Ut({}),i=new Ut({}),o=new Ut({}),s=new Ut(""),a=new hr(t,r,o,s,i,ve,n,e.root);return a.snapshot=e.root,new Kl(new kn(a,[]),e)}function Dz(n){let e={},t={},r={},o=new Jo([],e,r,"",t,ve,n,null,{});return new Yl("",new kn(o,[]))}var hr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[Xl]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&sP(i)&&(r.resolve[Xl]=i.title),r}var Jo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xl]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Yl=class extends fp{url;constructor(e,t){super(t),this.url=e,QE(this,t)}toString(){return oP(this._root)}};function QE(n,e){e.value._routerState=n,e.children.forEach(t=>QE(n,t))}function oP(n){let e=n.children.length>0?` { ${n.children.map(oP).join(", ")} } `:"";return`${n.value}${e}`}function NE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kr(e.params,t.params)||n.paramsSubject.next(t.params),X3(e.url,t.url)||n.urlSubject.next(t.url),kr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $E(n,e){let t=kr(n.params,e.params)&&rz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$E(n.parent,e.parent))}function sP(n){return typeof n.title=="string"||n.title===null}var aP=new $(""),tu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ve;activateEvents=new Fe;deactivateEvents=new Fe;attachEvents=new Fe;detachEvents=new Fe;routerOutletData=YM();parentContexts=R(Pa);location=R(Go);changeDetector=R(Ki);inputBinder=R(vp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new HE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Rr]})}return n})(),HE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===hr?this.route:e===Pa?this.childContexts:e===aP?this.outletData:this.parent.get(e,t)}},vp=new $("");var ZE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=qe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&F(0,"router-outlet")},dependencies:[tu],encapsulation:2})}return n})();function JE(n){let e=n.children&&n.children.map(JE),t=e?te(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=ZE),t}function Sz(n,e,t){let r=Ql(n,e._root,t?t._root:void 0);return new Kl(r,e)}function Ql(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Az(n,e,t);return new kn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ql(n,a)),s}}let r=Mz(e.value),i=e.children.map(o=>Ql(n,o));return new kn(r,i)}}function Az(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ql(n,r,i);return Ql(n,r)})}function Mz(n){return new hr(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var Aa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},cP="ngNavigationCancelingError";function pp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Zi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=lP(!1,fn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function lP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[cP]=!0,t.cancellationCode=e,t}function Rz(n){return uP(n)&&Zi(n.url)}function uP(n){return!!n&&n[cP]}var Pz=(n,e,t,r)=>J(i=>(new qE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),qE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),NE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ia(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ia(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ia(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ia(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new up(o.value.snapshot))}),e.children.length&&this.forwardEvent(new cp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(NE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),NE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},gp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ta=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Oz(n,e,t){let r=n._root,i=e?e._root:null;return jl(r,i,t,[r.value])}function xz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Oa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Sv(n)?n:e.get(n):r}function jl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ia(e);return n.children.forEach(s=>{Nz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$l(a,t.getContext(s),i)),i}function Nz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=kz(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new gp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?jl(n,e,a?a.children:null,r,i):jl(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ta(a.outlet.component,s))}else s&&$l(e,a,i),i.canActivateChecks.push(new gp(r)),o.component?jl(n,null,a?a.children:null,r,i):jl(n,null,t,r,i);return i}function kz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zo(n.url,e.url)||!kr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$E(n,e)||!kr(n.queryParams,e.queryParams);case"paramsChange":default:return!$E(n,e)}}function $l(n,e,t){let r=Ia(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?$l(s,e.children.getContext(o),t):$l(s,null,t):$l(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ta(e.outlet.component,i)):t.canDeactivateChecks.push(new Ta(null,i)):t.canDeactivateChecks.push(new Ta(null,i))}function nu(n){return typeof n=="function"}function Fz(n){return typeof n=="boolean"}function Lz(n){return n&&nu(n.canLoad)}function Vz(n){return n&&nu(n.canActivate)}function Uz(n){return n&&nu(n.canActivateChild)}function jz(n){return n&&nu(n.canDeactivate)}function Bz(n){return n&&nu(n.canMatch)}function dP(n){return n instanceof Xr||n?.name==="EmptyError"}var Yh=Symbol("INITIAL_VALUE");function Ma(){return Tt(n=>Qd(n.map(e=>e.pipe(sn(1),Xd(Yh)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Yh)return Yh;if(t===!1||zz(t))return t}return!0}),mt(e=>e!==Yh),sn(1)))}function zz(n){return Zi(n)||n instanceof Aa}function $z(n,e){return gt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(te(V({},t),{guardsResult:!0})):Hz(s,r,i,n).pipe(gt(a=>a&&Fz(a)?qz(r,o,n,e):re(a)),J(a=>te(V({},t),{guardsResult:a})))})}function Hz(n,e,t,r){return Me(n).pipe(gt(i=>Qz(i.component,i.route,t,e,r)),ti(i=>i!==!0,!0))}function qz(n,e,t,r){return Me(e).pipe(Io(i=>Js(Gz(i.route.parent,r),Wz(i.route,r),Yz(n,i.path,t),Kz(n,i.route,t))),ti(i=>i!==!0,!0))}function Wz(n,e){return n!==null&&e&&e(new lp(n)),re(!0)}function Gz(n,e){return n!==null&&e&&e(new ap(n)),re(!0)}function Kz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>Bc(()=>{let s=Ra(e)??t,a=Oa(o,s),l=Vz(a)?a.canActivate(e,n):vt(s,()=>a(e,n));return pi(l).pipe(ti())}));return re(i).pipe(Ma())}function Yz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>xz(s)).filter(s=>s!==null).map(s=>Bc(()=>{let a=s.guards.map(l=>{let u=Ra(s.node)??t,f=Oa(l,u),p=Uz(f)?f.canActivateChild(r,n):vt(u,()=>f(r,n));return pi(p).pipe(ti())});return re(a).pipe(Ma())}));return re(o).pipe(Ma())}function Qz(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let l=Ra(e)??i,u=Oa(a,l),f=jz(u)?u.canDeactivate(n,e,t,r):vt(l,()=>u(n,e,t,r));return pi(f).pipe(ti())});return re(s).pipe(Ma())}function Zz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let a=Oa(s,n),l=Lz(a)?a.canLoad(e,t):vt(n,()=>a(e,t));return pi(l)});return re(o).pipe(Ma(),fP(r))}function fP(n){return Pd(ct(e=>{if(typeof e!="boolean")throw pp(n,e)}),J(e=>e===!0))}function Jz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let a=Oa(s,n),l=Bz(a)?a.canMatch(e,t):vt(n,()=>a(e,t));return pi(l)});return re(o).pipe(Ma(),fP(r))}var Zl=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Jl=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function wa(n){return Qs(new Zl(n))}function Xz(n){return Qs(new z(4e3,!1))}function e4(n){return Qs(lP(!1,fn.GuardRejected))}var WE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[ve])return Xz(`${e.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(e,t,r,i,o){return t4(t,i,o).pipe(J(s=>{if(s instanceof Lr)throw new Jl(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Jl(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Lr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Ue(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function t4(n,e,t){if(typeof n=="string")return re(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:u,data:f,title:p}=e;return pi(vt(t,()=>r({params:u,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:p})))}var GE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function n4(n,e,t,r,i){let o=hP(n,e,t);return o.matched?(r=bz(e,r),Jz(r,e,t,i).pipe(J(s=>s===!0?o:V({},GE)))):re(o)}function hP(n,e,t){if(e.path==="**")return r4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},GE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zR)(t,n,e);if(!i)return V({},GE);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function r4(n){return{matched:!0,parameters:n.length>0?HR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function UR(n,e,t,r){return t.length>0&&s4(n,t,r)?{segmentGroup:new Ue(e,o4(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&a4(n,t,r)?{segmentGroup:new Ue(n.segments,i4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function i4(n,e,t,r){let i={};for(let o of t)if(yp(n,e,o)&&!r[fr(o)]){let s=new Ue([],{});i[fr(o)]=s}return V(V({},r),i)}function o4(n,e){let t={};t[ve]=e;for(let r of n)if(r.path===""&&fr(r)!==ve){let i=new Ue([],{});t[fr(r)]=i}return t}function s4(n,e,t){return t.some(r=>yp(n,e,r)&&fr(r)!==ve)}function a4(n,e,t){return t.some(r=>yp(n,e,r))}function yp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function c4(n,e,t){return e.length===0&&!n.children[t]}var KE=class{};function l4(n,e,t,r,i,o,s="emptyOnly"){return new YE(n,e,t,r,i,s,o).recognize()}var u4=31,YE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new WE(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=UR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new kn(r,t),o=new Yl("",i),s=XR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Jo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ve,t).pipe(J(r=>({children:r,rootSnapshot:t})),mn(r=>{if(r instanceof Jl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Zl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof kn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Me(o).pipe(Io(s=>{let a=r.children[s],l=Tz(t,s);return this.processSegmentGroup(e,l,a,s,i)}),Jd((s,a)=>(s.push(...a),s)),Ni(null),dv(),gt(s=>{if(s===null)return wa(r);let a=pP(s);return d4(a),re(a)}))}processSegment(e,t,r,i,o,s,a){return Me(t).pipe(Io(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(mn(u=>{if(u instanceof Zl)return re(null);throw u}))),ti(l=>!!l),mn(l=>{if(dP(l))return c4(r,i,o)?re(new KE):wa(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return fr(r)!==s&&(s===ve||!yp(i,o,r))?wa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):wa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:p,remainingSegments:g}=hP(t,i,o);if(!l)return wa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>u4&&(this.allowRedirects=!1));let _=new Jo(o,u,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,jR(i),fr(i),i.component??i._loadedComponent??null,i,BR(i)),T=hp(_,a,this.paramsInheritanceStrategy);return _.params=Object.freeze(T.params),_.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,_,e).pipe(Tt(N=>this.applyRedirects.lineralizeSegments(i,N)),gt(N=>this.processSegment(e,r,t,N.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=n4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Tt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tt(({routes:u})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:_}=l,T=new Jo(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,jR(r),fr(r),r.component??r._loadedComponent??null,r,BR(r)),x=hp(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(x.params),T.data=Object.freeze(x.data);let{segmentGroup:N,slicedSegments:j}=UR(t,g,_,u);if(j.length===0&&N.hasChildren())return this.processChildren(f,u,N,T).pipe(J(le=>new kn(T,le)));if(u.length===0&&j.length===0)return re(new kn(T,[]));let ne=fr(r)===o;return this.processSegment(f,u,N,j,ne?ve:o,!0,T).pipe(J(le=>new kn(T,le instanceof kn?[le]:[])))}))):wa(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):Zz(e,t,r,this.urlSerializer).pipe(gt(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):e4(t))):re({routes:[],injector:e})}};function d4(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}function f4(n){let e=n.value.routeConfig;return e&&e.path===""}function pP(n){let e=[],t=new Set;for(let r of n){if(!f4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=pP(r.children);e.push(new kn(r.value,i))}return e.filter(r=>!t.has(r))}function jR(n){return n.data||{}}function BR(n){return n.resolve||{}}function h4(n,e,t,r,i,o){return gt(s=>l4(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:l})=>te(V({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function p4(n,e){return gt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of gP(l))s.add(u);let a=0;return Me(s).pipe(Io(l=>o.has(l)?g4(l,r,n,e):(l.data=hp(l,l.parent,n).resolve,re(void 0))),ct(()=>a++),Xs(1),gt(l=>a===s.size?re(t):pn))})}function gP(n){let e=n.children.map(t=>gP(t)).flat();return[n,...e]}function g4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!sP(i)&&(o[Xl]=i.title),Bc(()=>(n.data=hp(n,n.parent,t).resolve,m4(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=V(V({},n.data),s),null)))))}function m4(n,e,t,r){let i=LE(n);if(i.length===0)return re({});let o={};return Me(i).pipe(gt(s=>v4(n[s],e,t,r).pipe(ti(),ct(a=>{if(a instanceof Aa)throw pp(new es,a);o[s]=a}))),Xs(1),J(()=>o),mn(s=>dP(s)?pn:Qs(s)))}function v4(n,e,t,r){let i=Ra(e)??r,o=Oa(n,i),s=o.resolve?o.resolve(e,t):vt(i,()=>o(e,t));return pi(s)}function kE(n){return Tt(e=>{let t=n(e);return t?Me(t).pipe(J(()=>e)):re(e)})}var XE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ve);return r}getResolvedTitleForRoute(t){return t.data[Xl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(mP),providedIn:"root"})}return n})(),mP=(()=>{class n extends XE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(me(OR))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xa=new $("",{providedIn:"root",factory:()=>({})}),ru=new $(""),vP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(X_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pi(vt(t,()=>r.loadComponent())).pipe(J(_P),Tt(EP),ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),zc(()=>{this.componentLoaders.delete(r)})),o=new Ws(i,()=>new et).pipe(qs());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yP(r,this.compiler,t,this.onLoadEndListener).pipe(zc(()=>{this.childrenLoaders.delete(r)})),s=new Ws(o,()=>new et).pipe(qs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yP(n,e,t,r){return pi(vt(t,()=>n.loadChildren())).pipe(J(_P),Tt(EP),gt(i=>i instanceof wh||Array.isArray(i)?re(i):Me(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ru,[],{optional:!0,self:!0}).flat()),{routes:s.map(JE),injector:o}}))}function y4(n){return n&&typeof n=="object"&&"default"in n}function _P(n){return y4(n)?n.default:n}function EP(n){return re(n)}var _p=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(_4),providedIn:"root"})}return n})(),_4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CP=new $("");var wP=new $(""),IP=(()=>{class n{currentNavigation=X(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortWithErrorSubject=new et;configLoader=R(vP);environmentInjector=R(lt);destroyRef=R(Gn);urlSerializer=R(eu);rootContexts=R(Pa);location=R(Ca);inputBindingEnabled=R(vp,{optional:!0})!==null;titleStrategy=R(XE);options=R(xa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(_p);createViewTransition=R(CP,{optional:!0});navigationErrorHandler=R(wP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new op(i)),r=i=>this.events.next(new sp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Rt(()=>{this.transitions?.next(te(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Ut(null),this.transitions.pipe(mt(r=>r!==null),Tt(r=>{let i=!1;return re(r).pipe(Tt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",fn.SupersededByNewNavigation),pn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?te(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new hi(o.id,this.urlSerializer.serialize(o.rawUrl),"",ql.IgnoredSameUrlNavigation)),o.resolve(!1),pn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return re(o).pipe(Tt(l=>(this.events.next(new ts(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?pn:Promise.resolve(l))),h4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let u=new Wl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:f,restoredState:p,extras:g}=o,_=new ts(l,this.urlSerializer.serialize(u),f,p);this.events.next(_);let T=iP(this.rootComponentType).snapshot;return this.currentTransition=r=te(V({},o),{targetSnapshot:T,urlAfterRedirects:u,extras:te(V({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=u,x)),re(r)}else return this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ql.IgnoredByUrlHandlingStrategy)),o.resolve(!1),pn}),ct(o=>{let s=new tp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),J(o=>(this.currentTransition=r=te(V({},o),{guards:Oz(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),$z(this.environmentInjector,o=>this.events.next(o)),ct(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw pp(this.urlSerializer,o.guardsResult);let s=new np(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),mt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",fn.GuardRejected),!1)),kE(o=>{if(o.guards.canActivateChecks.length!==0)return re(o).pipe(ct(s=>{let a=new rp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Tt(s=>{let a=!1;return re(s).pipe(p4(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",fn.NoDataFromResolver)}}))}),ct(s=>{let a=new ip(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),kE(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let u=Ra(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(ct(f=>{a.component=f}),J(()=>{})))}for(let u of a.children)l.push(...s(u));return l};return Qd(s(o.targetSnapshot.root)).pipe(Ni(null),sn(1))}),kE(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Me(a).pipe(J(()=>r)):re(r)}),J(o=>{let s=Sz(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=te(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ct(()=>{this.events.next(new Gl)}),Pz(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),sn(1),ef(new ce(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(mt(()=>!i&&!r.targetRouterState),ct(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",fn.Aborted)}))),ct({next:o=>{i=!0,this.lastSuccessfulNavigation=Rt(this.currentNavigation),this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ef(this.transitionAbortWithErrorSubject.pipe(ct(o=>{throw o}))),zc(()=>{i||this.cancelNavigationTransition(r,"",fn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),mn(o=>{if(this.destroyed)return r.resolve(!1),pn;if(i=!0,uP(o))this.events.next(new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Rz(o)?this.events.next(new Sa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Da(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=vt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Aa){let{message:l,cancellationCode:u}=pp(this.urlSerializer,a);this.events.next(new Fr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Sa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return pn}))}))}cancelNavigationTransition(t,r,i){let o=new Fr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Rt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E4(n){return n!==zl}var bP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(C4),providedIn:"root"})}return n})(),mp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},C4=(()=>{class n extends mp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TP=(()=>{class n{urlSerializer=R(eu);options=R(xa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Ca);urlHandlingStrategy=R(_p);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Lr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Lr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=iP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:()=>R(w4),providedIn:"root"})}return n})(),w4=(()=>{class n extends TP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ts?this.updateStateMemento():t instanceof hi?this.commitTransition(r):t instanceof Wl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Gl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Fr&&t.code!==fn.SupersededByNewNavigation&&t.code!==fn.Redirect?this.restoreHistory(r):t instanceof Da?this.restoreHistory(r,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function e0(n,e){n.events.pipe(mt(t=>t instanceof Ln||t instanceof Fr||t instanceof Da||t instanceof hi),J(t=>t instanceof Ln||t instanceof hi?0:(t instanceof Fr?t.code===fn.Redirect||t.code===fn.SupersededByNewNavigation:!1)?2:1),mt(t=>t!==2),sn(1)).subscribe(()=>{e()})}var I4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},b4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ot=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Ih);stateManager=R(TP);options=R(xa,{optional:!0})||{};pendingTasks=R(ar);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(IP);urlSerializer=R(eu);location=R(Ca);urlHandlingStrategy=R(_p);injector=R(lt);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(bP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(ru,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(vp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ot;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Rt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Fr&&r.code!==fn.Redirect&&r.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof Sa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||E4(i.source)},s);this.scheduleNavigation(a,zl,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Iz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=V({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(dn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Rt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(JE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=eP(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return tP(p,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Zi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zl,null,r)}navigate(t,r={skipLocationChange:!1}){return T4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ir(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},I4):r===!1?i=V({},b4):i=r,Zi(t))return kR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return kR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((p,g)=>{a=p,l=g});let f=this.pendingTasks.add();return e0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}var Vr=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=X(null);get href(){return Rt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;applicationErrorHandler=R(dn);options=R(xa,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new kh("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ln&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Zi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Zi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ee(Ot),Ee(hr),dl("tabindex"),Ee(Or),Ee(yn),Ee(Ea))};static \u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Q("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ui("href",i.reactiveHref(),E_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qo],replaceUrl:[2,"replaceUrl","replaceUrl",Qo],routerLink:"routerLink"},features:[Rr]})}return n})(),iu=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Fe;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ln&&this.update()})}ngAfterContentInit(){re(this.links.changes,re(null)).pipe(Zs()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Me(t).pipe(Zs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=S4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Ee(Ot),Ee(yn),Ee(Or),Ee(Ki),Ee(Vr,8))};static \u0275dir=Qe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Y_(o,Vr,5),r&2){let s;Q_(s=Z_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Rr]})}return n})();function S4(n){return!!n.paths}var A4=new $("");function t0(n,...e){return At([{provide:ru,multi:!0,useValue:n},[],{provide:hr,useFactory:M4,deps:[Ot]},{provide:Wi,multi:!0,useFactory:R4},e.map(t=>t.\u0275providers)])}function M4(n){return n.routerState.root}function R4(){let n=R(st);return e=>{let t=n.get(St);if(e!==t.components[0])return;let r=n.get(Ot),i=n.get(P4);n.get(O4)===1&&r.initialNavigation(),n.get(x4,null,{optional:!0})?.setUpPreloading(),n.get(A4,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var P4=new $("",{factory:()=>new et}),O4=new $("",{providedIn:"root",factory:()=>1});var x4=new $("");var kP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ee(Or),Ee(yn))};static \u0275dir=Qe({type:n})}return n})(),Ap=(()=>{class n extends kP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[Zt]})}return n})(),du=new $("");var N4={provide:du,useExisting:cn(()=>xt),multi:!0};function k4(){let n=Yn()?Yn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var F4=new $(""),xt=(()=>{class n extends kP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!k4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ee(Or),Ee(yn),Ee(F4,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Kn([N4]),Zt]})}return n})();function L4(n){return n==null||FP(n)===0}function FP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var La=new $(""),LP=new $("");function V4(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function U4(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function j4(n){return L4(n.value)?{required:!0}:null}function B4(n){return e=>{let t=e.value?.length??FP(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function DP(n){return null}function VP(n){return n!=null}function UP(n){return qi(n)?Me(n):n}function jP(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function BP(n,e){return e.map(t=>t(n))}function z4(n){return!n.validate}function zP(n){return n.map(e=>z4(e)?e:t=>e.validate(t))}function $4(n){if(!n)return null;let e=n.filter(VP);return e.length==0?null:function(t){return jP(BP(t,e))}}function i0(n){return n!=null?$4(zP(n)):null}function H4(n){if(!n)return null;let e=n.filter(VP);return e.length==0?null:function(t){let r=BP(t,e).map(UP);return uv(r).pipe(J(jP))}}function o0(n){return n!=null?H4(zP(n)):null}function SP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function q4(n){return n._rawValidators}function W4(n){return n._rawAsyncValidators}function n0(n){return n?Array.isArray(n)?n:[n]:[]}function Cp(n,e){return Array.isArray(n)?n.includes(e):n===e}function AP(n,e){let t=n0(e);return n0(n).forEach(i=>{Cp(t,i)||t.push(i)}),t}function MP(n,e){return n0(e).filter(t=>!Cp(n,t))}var wp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=i0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=o0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fa=class extends wp{name;get formDirective(){return null}get path(){return null}},uu=class extends wp{_parent=null;name=null;valueAccessor=null},Ip=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},G4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bce=te(V({},G4),{"[class.ng-submitted]":"isSubmitted"}),Xt=(()=>{class n extends Ip{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(uu,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Le("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Zt]})}return n})(),Va=(()=>{class n extends Ip{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ee(Fa,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Le("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Zt]})}return n})();var ou="VALID",Ep="INVALID",Na="PENDING",su="DISABLED",Ji=class{},bp=class extends Ji{value;source;constructor(e,t){super(),this.value=e,this.source=t}},cu=class extends Ji{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},lu=class extends Ji{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ka=class extends Ji{status;source;constructor(e,t){super(),this.status=e,this.source=t}},r0=class extends Ji{source;constructor(e){super(),this.source=e}},Tp=class extends Ji{source;constructor(e){super(),this.source=e}};function $P(n){return(Mp(n)?n.validators:n)||null}function K4(n){return Array.isArray(n)?i0(n):n||null}function HP(n,e){return(Mp(e)?e.asyncValidators:n)||null}function Y4(n){return Array.isArray(n)?o0(n):n||null}function Mp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Q4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[t])throw new z(1001,"")}function Z4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new z(1002,"")})}var Dp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rt(this.statusReactive)}set status(e){Rt(()=>this.statusReactive.set(e))}_status=Ko(()=>this.statusReactive());statusReactive=X(void 0);get valid(){return this.status===ou}get invalid(){return this.status===Ep}get pending(){return this.status==Na}get disabled(){return this.status===su}get enabled(){return this.status!==su}errors;get pristine(){return Rt(this.pristineReactive)}set pristine(e){Rt(()=>this.pristineReactive.set(e))}_pristine=Ko(()=>this.pristineReactive());pristineReactive=X(!0);get dirty(){return!this.pristine}get touched(){return Rt(this.touchedReactive)}set touched(e){Rt(()=>this.touchedReactive.set(e))}_touched=Ko(()=>this.touchedReactive());touchedReactive=X(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MP(e,this._rawAsyncValidators))}hasValidator(e){return Cp(this._rawValidators,e)}hasAsyncValidator(e){return Cp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new lu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new cu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new cu(!0,r))}markAsPending(e={}){this.status=Na;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ka(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=su,this.errors=null,this._forEachChild(i=>{i.disable(te(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bp(this.value,r)),this._events.next(new ka(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ou,this._forEachChild(r=>{r.enable(te(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ou||this.status===Na)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bp(this.value,t)),this._events.next(new ka(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?su:ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Na,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=UP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ka(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?su:this.errors?Ep:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Na)?Na:this._anyControlsHaveStatus(Ep)?Ep:ou}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new cu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new lu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=K4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y4(this._rawAsyncValidators)}},Sp=class extends Dp{constructor(e,t,r){super($P(t),HP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Z4(this,!0,e),Object.keys(e).forEach(r=>{Q4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Tp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var s0=new $("",{providedIn:"root",factory:()=>a0}),a0="always";function J4(n,e){return[...e.path,n]}function qP(n,e,t=a0){WP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),e$(n,e),n$(n,e),t$(n,e),X4(n,e)}function RP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function X4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WP(n,e){let t=q4(n);e.validator!==null?n.setValidators(SP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=W4(n);e.asyncValidator!==null?n.setAsyncValidators(SP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();RP(e._rawValidators,i),RP(e._rawAsyncValidators,i)}function e$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&GP(n,e)})}function t$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&GP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function GP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function n$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function r$(n,e){n==null,WP(n,e)}function i$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function o$(n){return Object.getPrototypeOf(n.constructor)===Ap}function s$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function a$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===xt?t=o:o$(o)?r=o:i=o}),i||r||t||null}var c$={provide:Fa,useExisting:cn(()=>ns)},au=Promise.resolve(),ns=(()=>{class n extends Fa{callSetDisabledState;get submitted(){return Rt(this.submittedReactive)}_submitted=Ko(()=>this.submittedReactive());submittedReactive=X(!1);_directives=new Set;form;ngSubmit=new Fe;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Sp({},i0(t),o0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){au.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),qP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){au.then(()=>{let r=this._findContainer(t.path),i=new Sp({});r$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){au.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),s$(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new r0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ee(La,10),Ee(LP,10),Ee(s0,8))};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kn([c$]),Zt]})}return n})();function PP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function OP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var l$=class extends Dp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super($P(t),HP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(OP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Tp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){OP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var u$={provide:uu,useExisting:cn(()=>zt)},xP=Promise.resolve(),zt=(()=>{class n extends uu{_changeDetectorRef;callSetDisabledState;control=new l$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Fe;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=a$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),i$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){qP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){xP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Qo(r);xP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?J4(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ee(Fa,9),Ee(La,10),Ee(LP,10),Ee(du,10),Ee(Ki,8),Ee(s0,8))};static \u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Kn([u$]),Zt,Rr]})}return n})();var Ua=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),d$={provide:du,useExisting:cn(()=>Vn),multi:!0},Vn=(()=>{class n extends Ap{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Q("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Kn([d$]),Zt]})}return n})();var f$={provide:du,useExisting:cn(()=>Rp),multi:!0};function KP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function h$(n){return n.split(":")[0]}var Rp=(()=>{class n extends Ap{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(St).injector;destroyRef=R(Gn);cdr=R(Ki);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,vl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=KP(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=h$(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Q("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kn([f$]),Zt]})}return n})(),YP=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(KP(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Ee(yn),Ee(Or),Ee(Rp,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),p$={provide:du,useExisting:cn(()=>QP),multi:!0};function NP(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function g$(n){return n.split(":")[0]}var QP=(()=>{class n extends Ap{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=g$(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Q("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Kn([p$]),Zt]})}return n})(),ZP=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(NP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(NP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Ee(yn),Ee(Or),Ee(QP,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function m$(n){return typeof n=="number"?n:parseInt(n,10)}function JP(n){return typeof n=="number"?n:parseFloat(n)}var Pp=(()=>{class n{_validator=DP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):DP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,features:[Rr]})}return n})(),v$={provide:La,useExisting:cn(()=>fu),multi:!0},fu=(()=>{class n extends Pp{max;inputName="max";normalizeInput=t=>JP(t);createValidator=t=>U4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Kn([v$]),Zt]})}return n})(),y$={provide:La,useExisting:cn(()=>gi),multi:!0},gi=(()=>{class n extends Pp{min;inputName="min";normalizeInput=t=>JP(t);createValidator=t=>V4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Kn([y$]),Zt]})}return n})(),_$={provide:La,useExisting:cn(()=>rs),multi:!0};var rs=(()=>{class n extends Pp{required;inputName="required";normalizeInput=Qo;createValidator=t=>j4;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ui("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Kn([_$]),Zt]})}return n})();var E$={provide:La,useExisting:cn(()=>is),multi:!0},is=(()=>{class n extends Pp{maxlength;inputName="maxlength";normalizeInput=t=>m$(t);createValidator=t=>B4(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ui("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Kn([E$]),Zt]})}return n})();var C$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=or({})}return n})();var en=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:s0,useValue:t.callSetDisabledState??a0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=or({imports:[C$]})}return n})();var XP=()=>{};var n1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},w$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Op={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|u>>6,_=u&63;l||(_=64,s||(g=64)),r.push(t[f],t[p],t[g],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(n1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):w$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new l0;let g=o<<2|a>>4;if(r.push(g),u!==64){let _=a<<4&240|u>>2;if(r.push(_),p!==64){let T=u<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},l0=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},I$=function(n){let e=n1(n);return Op.encodeByteArray(e,!0)},pu=function(n){return I$(n).replace(/\./g,"")},xp=function(n){try{return Op.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var b$=()=>d0().__FIREBASE_DEFAULTS__,T$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},D$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xp(n[1]);return e&&JSON.parse(e)},Np=()=>{try{return XP()||b$()||T$()||D$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},r1=n=>{var e,t;return(t=(e=Np())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},i1=n=>{let e=r1(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},f0=()=>{var n;return(n=Np())===null||n===void 0?void 0:n.config},o1=n=>{var e;return(e=Np())===null||e===void 0?void 0:e[`_${n}`]};var os=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ss(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h0(n){return(await fetch(n,{credentials:"include"})).ok}function s1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pu(JSON.stringify(t)),pu(JSON.stringify(s)),""].join(".")}var hu={};function S$(){let n={prod:[],emulator:[]};for(let e of Object.keys(hu))hu[e]?n.emulator.push(e):n.prod.push(e);return n}function A$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var e1=!1;function p0(n,e){if(typeof window>"u"||typeof document>"u"||!ss(window.location.host)||hu[n]===e||hu[n]||e1)return;hu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=S$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{e1=!0,s()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=A$(r),_=t("text"),T=document.getElementById(_)||document.createElement("span"),x=t("learnmore"),N=document.getElementById(x)||document.createElement("a"),j=t("preprendIcon"),ne=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let le=g.element;a(le),f(N,x);let Ne=u();l(ne,j),le.append(ne,T,N,Ne),document.body.appendChild(le)}o?(T.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function M$(){var n;let e=(n=Np())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d1(){return!M$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gu(){try{return typeof indexedDB=="object"}catch{return!1}}function f1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var R$="FirebaseError",Zn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=R$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pr.prototype.create)}},pr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?P$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Zn(i,a,r)}};function P$(n,e){return n.replace(O$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var O$=/\{\$([^}]+)}/g;function as(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(t1(o)&&t1(s)){if(!as(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function t1(n){return n!==null&&typeof n=="object"}function g0(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function h1(n,e){let t=new u0(n,e);return t.subscribe.bind(t)}var u0=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");x$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=c0),i.error===void 0&&(i.error=c0),i.complete===void 0&&(i.complete=c0);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function x$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function c0(){}var Wce=14400*1e3;function $t(n){return n&&n._delegate?n._delegate:n}var hn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cs="[DEFAULT]";var m0=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new os;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k$(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function N$(n){return n===cs?void 0:n}function k$(n){return n.instantiationMode==="EAGER"}var kp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new m0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var F$=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),L$={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},V$=De.INFO,U$={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},j$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=U$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ur=class{constructor(e){this.name=e,this._logLevel=V$,this._logHandler=j$,this._userLogHandler=null,F$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var B$=(n,e)=>e.some(t=>n instanceof t),p1,g1;function z$(){return p1||(p1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $$(){return g1||(g1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var m1=new WeakMap,y0=new WeakMap,v1=new WeakMap,v0=new WeakMap,E0=new WeakMap;function H$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(jr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&m1.set(t,n)}).catch(()=>{}),E0.set(e,n),e}function q$(n){if(y0.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});y0.set(n,e)}var _0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return y0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function y1(n){_0=n(_0)}function W$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Fp(this),e,...t);return v1.set(r,e.sort?e.sort():[e]),jr(r)}:$$().includes(n)?function(...e){return n.apply(Fp(this),e),jr(m1.get(this))}:function(...e){return jr(n.apply(Fp(this),e))}}function G$(n){return typeof n=="function"?W$(n):(n instanceof IDBTransaction&&q$(n),B$(n,z$())?new Proxy(n,_0):n)}function jr(n){if(n instanceof IDBRequest)return H$(n);if(v0.has(n))return v0.get(n);let e=G$(n);return e!==n&&(v0.set(n,e),E0.set(e,n)),e}var Fp=n=>E0.get(n);function E1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=jr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(jr(s.result),l.oldVersion,l.newVersion,jr(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var K$=["get","getKey","getAll","getAllKeys","count"],Y$=["put","add","delete","clear"],C0=new Map;function _1(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(C0.get(e))return C0.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Y$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||K$.includes(t)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return C0.set(e,o),o}y1(n=>te(V({},n),{get:(e,t,r)=>_1(e,t)||n.get(e,t,r),has:(e,t)=>!!_1(e,t)||n.has(e,t)}));var I0=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Q$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Q$(n){let e=n.getComponent();return e?.type==="VERSION"}var b0="@firebase/app",C1="0.13.2";var mi=new Ur("@firebase/app"),Z$="@firebase/app-compat",J$="@firebase/analytics-compat",X$="@firebase/analytics",eH="@firebase/app-check-compat",tH="@firebase/app-check",nH="@firebase/auth",rH="@firebase/auth-compat",iH="@firebase/database",oH="@firebase/data-connect",sH="@firebase/database-compat",aH="@firebase/functions",cH="@firebase/functions-compat",lH="@firebase/installations",uH="@firebase/installations-compat",dH="@firebase/messaging",fH="@firebase/messaging-compat",hH="@firebase/performance",pH="@firebase/performance-compat",gH="@firebase/remote-config",mH="@firebase/remote-config-compat",vH="@firebase/storage",yH="@firebase/storage-compat",_H="@firebase/firestore",EH="@firebase/ai",CH="@firebase/firestore-compat",wH="firebase",IH="11.10.0";var T0="[DEFAULT]",bH={[b0]:"fire-core",[Z$]:"fire-core-compat",[X$]:"fire-analytics",[J$]:"fire-analytics-compat",[tH]:"fire-app-check",[eH]:"fire-app-check-compat",[nH]:"fire-auth",[rH]:"fire-auth-compat",[iH]:"fire-rtdb",[oH]:"fire-data-connect",[sH]:"fire-rtdb-compat",[aH]:"fire-fn",[cH]:"fire-fn-compat",[lH]:"fire-iid",[uH]:"fire-iid-compat",[dH]:"fire-fcm",[fH]:"fire-fcm-compat",[hH]:"fire-perf",[pH]:"fire-perf-compat",[gH]:"fire-rc",[mH]:"fire-rc-compat",[vH]:"fire-gcs",[yH]:"fire-gcs-compat",[_H]:"fire-fst",[CH]:"fire-fst-compat",[EH]:"fire-vertex","fire-js":"fire-js",[wH]:"fire-js-all"};var mu=new Map,TH=new Map,D0=new Map;function w1(n,e){try{n.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gr(n){let e=n.name;if(D0.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;D0.set(e,n);for(let t of mu.values())w1(t,n);for(let t of TH.values())w1(t,n);return!0}function Lp(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}var DH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new pr("app","Firebase",DH);var S0=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}};var ja=IH;function R0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:T0,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(t||(t=f0()),!t)throw eo.create("no-options");let o=mu.get(i);if(o){if(as(t,o.options)&&as(r,o.config))return o;throw eo.create("duplicate-app",{appName:i})}let s=new kp(i);for(let l of D0.values())s.addComponent(l);let a=new S0(t,r,s);return mu.set(i,a),a}function Ba(n=T0){let e=mu.get(n);if(!e&&n===T0&&f0())return R0();if(!e)throw eo.create("no-app",{appName:n});return e}function Vp(){return Array.from(mu.values())}function ht(n,e,t){var r;let i=(r=bH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(a.join(" "));return}gr(new hn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var SH="firebase-heartbeat-database",AH=1,vu="firebase-heartbeat-store",w0=null;function D1(){return w0||(w0=E1(SH,AH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(vu)}catch(t){console.warn(t)}}}}).catch(n=>{throw eo.create("idb-open",{originalErrorMessage:n.message})})),w0}async function MH(n){try{let t=(await D1()).transaction(vu),r=await t.objectStore(vu).get(S1(n));return await t.done,r}catch(e){if(e instanceof Zn)mi.warn(e.message);else{let t=eo.create("idb-get",{originalErrorMessage:e?.message});mi.warn(t.message)}}}async function I1(n,e){try{let r=(await D1()).transaction(vu,"readwrite");await r.objectStore(vu).put(e,S1(n)),await r.done}catch(t){if(t instanceof Zn)mi.warn(t.message);else{let r=eo.create("idb-set",{originalErrorMessage:t?.message});mi.warn(r.message)}}}function S1(n){return`${n.name}!${n.options.appId}`}var RH=1024,PH=30,A0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new M0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=b1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>PH){let s=xH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=b1(),{heartbeatsToSend:r,unsentEntries:i}=OH(this._heartbeatsCache.heartbeats),o=pu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return mi.warn(t),""}}};function b1(){return new Date().toISOString().substring(0,10)}function OH(n,e=RH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),T1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),T1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var M0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gu()?f1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await MH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return I1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return I1(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function T1(n){return pu(JSON.stringify({version:2,heartbeats:n})).length}function xH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function NH(n){gr(new hn("platform-logger",e=>new I0(e),"PRIVATE")),gr(new hn("heartbeat",e=>new A0(e),"PRIVATE")),ht(b0,C1,n),ht(b0,C1,"esm2017"),ht("fire-js","")}NH("");var kH="firebase",FH="11.10.0";ht(kH,FH,"app");function A1(n){n===void 0&&(n=R(st));let e=n.get($i);return t=>new ce(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var us=new ki("ANGULARFIRE2_VERSION");function jp(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var $a=(n,e)=>{let t=e?[e]:Vp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},za=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(za||{}),M1=Sl()&&typeof Zone<"u"?za.WARN:za.SILENT;var Up=class{zone;delegate;constructor(e,t=av){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ds=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(xe);this.outsideAngular=t.runOutsideAngular(()=>new Up(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Up(typeof Zone>"u"?void 0:Zone.current,sv))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R1=!1;function LH(n,e){!R1&&(M1>za.SILENT||Sl())&&(R1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),M1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function VH(n){let e=R(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ls(n){let e=R(xe,{optional:!0});return e?e.run(()=>n()):n()}var UH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),vt(t,()=>ls(()=>n.apply(void 0,r)))),Ht=(n,e,t)=>(t||=e?za.WARN:za.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(ds),s=R($i),a=R(lt)}catch{return LH(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ls(()=>s.add())),i[u]=UH(i[u],r,a));let l=VH(()=>n.apply(this,i));return e?l instanceof ce?l.pipe(xi(o.outsideAngular),Oi(o.insideAngular),A1(a)):l instanceof Promise?ls(()=>{let u=s.add();return new Promise((f,p)=>{l.then(g=>vt(a,()=>ls(()=>f(g))),g=>vt(a,()=>ls(()=>p(g)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ls(()=>l):l instanceof ce?l.pipe(xi(o.outsideAngular),Oi(o.insideAngular)):ls(()=>l)});var fs=class{constructor(e){return e}},yu=class{constructor(){return Vp()}};function jH(n){return n&&n.length===1?n[0]:new fs(Ba())}var P0=new $("angularfire2._apps"),BH={provide:fs,useFactory:jH,deps:[[new Mr,P0]]},zH={provide:yu,deps:[[new Mr,P0]]};function $H(n){return(e,t)=>{let r=t.get(li);ht("angularfire",us.full,"core"),ht("angularfire",us.full,"app"),ht("angular",bv.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new fs(i)}}function P1(n,...e){return At([BH,zH,{provide:P0,useFactory:$H(n),multi:!0,deps:[xe,st,ds,...e]}])}var O1=Ht(R0,!0);var HH=new Map,qH={activated:!1,tokenObservers:[]},WH={initialized:!1,enabled:!1};function mr(n){return HH.get(n)||Object.assign({},qH)}function F1(){return WH}var GH="https://content-firebaseappcheck.googleapis.com/v1";var KH="exchangeDebugToken",x1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wle=1440*60*1e3;var N0=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new os,this.pending.promise.catch(t=>{}),await YH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new os,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function YH(n){return new Promise(e=>{setTimeout(e,n)})}var QH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},to=new pr("appCheck","AppCheck",QH);function L1(n){if(!mr(n).activated)throw to.create("use-before-activation",{appName:n.name})}async function V1({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw to.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw to.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw to.create("fetch-parse-error",{originalErrorMessage:p?.message})}let l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(l[1])*1e3,f=Date.now();return{token:a.token,expireTimeMillis:f+u,issuedAtTimeMillis:f}}function U1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${GH}/projects/${t}/apps/${r}:${KH}?key=${i}`,body:{debug_token:e}}}var ZH="firebase-app-check-database",JH=1,k0="firebase-app-check-store";var Bp=null;function XH(){return Bp||(Bp=new Promise((n,e)=>{try{let t=indexedDB.open(ZH,JH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(k0,{keyPath:"compositeKey"})}}}catch(t){e(to.create("storage-open",{originalErrorMessage:t?.message}))}}),Bp)}function e6(n,e){return t6(n6(n),e)}async function t6(n,e){let r=(await XH()).transaction(k0,"readwrite"),o=r.objectStore(k0).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(to.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function n6(n){return`${n.options.appId}-${n.name}`}var _u=new Ur("@firebase/app-check");function O0(n,e){return gu()?e6(n,e).catch(t=>{_u.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function j1(){return F1().enabled}async function B1(){let n=F1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var r6={error:"UNKNOWN_ERROR"};function i6(n){return Op.encodeString(JSON.stringify(n),!1)}async function F0(n,e=!1,t=!1){let r=n.app;L1(r);let i=mr(r),o=i.token,s;if(o&&!Eu(o)&&(i.token=void 0,o=void 0),!o){let u=await i.cachedTokenPromise;u&&(Eu(u)?o=u:await O0(r,void 0))}if(!e&&o&&Eu(o))return{token:o.token};let a=!1;if(j1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=V1(U1(r,await B1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await O0(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?_u.warn(u.message):t&&_u.error(u),x0(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await mr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?_u.warn(u.message):t&&_u.error(u),s=u}let l;return o?s?Eu(o)?l={token:o.token,internalError:s}:l=x0(s):(l={token:o.token},i.token=o,await O0(r,o)):l=x0(s),a&&c6(r,l),l}async function o6(n){let e=n.app;L1(e);let{provider:t}=mr(e);if(j1()){let r=await B1(),{token:i}=await V1(U1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function s6(n,e,t,r){let{app:i}=n,o=mr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Eu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),N1(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>N1(n))}function z1(n,e){let t=mr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function N1(n){let{app:e}=n,t=mr(e),r=t.tokenRefresher;r||(r=a6(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function a6(n){let{app:e}=n;return new N0(async()=>{let t=mr(e),r;if(t.token?r=await F0(n,!0):r=await F0(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},x1.RETRIAL_MIN_WAIT,x1.RETRIAL_MAX_WAIT)}function c6(n,e){let t=mr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Eu(n){return n.expireTimeMillis-Date.now()>0}function x0(n){return{token:i6(r6),error:n}}var L0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=mr(this.app);for(let t of e)z1(this.app,t.next);return Promise.resolve()}};function l6(n,e){return new L0(n,e)}function u6(n){return{getToken:e=>F0(n,e),getLimitedUseToken:()=>o6(n),addTokenListener:e=>s6(n,"INTERNAL",e),removeTokenListener:e=>z1(n.app,e)}}var d6="@firebase/app-check",f6="0.10.1";var h6="app-check",k1="app-check-internal";function p6(){gr(new hn(h6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return l6(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(k1).initialize()})),gr(new hn(k1,n=>{let e=n.getProvider("app-check").getImmediate();return u6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(d6,f6)}p6();var g6="app-check";var zp=class{constructor(){return $a(g6)}};var m6=["localhost","0.0.0.0","127.0.0.1"],iue=typeof window<"u"&&m6.includes(window.location.hostname);function Q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Z1=Q1,J1=new pr("auth","Firebase",Q1());var Wp=new Ur("@firebase/auth");function v6(n,...e){Wp.logLevel<=De.WARN&&Wp.warn(`Auth (${ja}): ${n}`,...e)}function Hp(n,...e){Wp.logLevel<=De.ERROR&&Wp.error(`Auth (${ja}): ${n}`,...e)}function $1(n,...e){throw Y0(n,...e)}function K0(n,...e){return Y0(n,...e)}function X1(n,e,t){let r=Object.assign(Object.assign({},Z1()),{[e]:t});return new pr("auth","Firebase",r).create(e,{appName:n.name})}function qp(n){return X1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return J1.create(n,...e)}function je(n,e,...t){if(!n)throw Y0(e,...t)}function Cu(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Hp(e),new Error(e)}function Gp(n,e){n||Cu(e)}function y6(){return H1()==="http:"||H1()==="https:"}function H1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function _6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y6()||l1()||"connection"in navigator)?navigator.onLine:!0}function E6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var gs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gp(t>e,"Short delay should be less than long delay!"),this.isMobile=a1()||u1()}get(){return _6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function C6(n,e){Gp(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Kp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var w6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var I6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b6=new gs(3e4,6e4);function eO(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xp(n,e,t,r,i={}){return tO(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=g0(Object.assign({key:n.config.apiKey},s)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:l},o);return c1()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&ss(n.emulatorConfig.host)&&(u.credentials="include"),Kp.fetch()(await nO(n,n.config.apiHost,t,a),u)})}async function tO(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},w6),e);try{let i=new j0(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw $p(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $p(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw $p(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw $p(n,"user-disabled",s);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw X1(n,f,u);$1(n,f)}}catch(i){if(i instanceof Zn)throw i;$1(n,"network-request-failed",{message:String(i)})}}async function nO(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?C6(n.config,i):`${n.config.apiScheme}://${i}`;return I6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var j0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(K0(this.auth,"network-request-failed")),b6.get())})}};function $p(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=K0(n,e,r);return i.customData._tokenResponse=t,i}async function T6(n,e){return Xp(n,"POST","/v1/accounts:delete",e)}async function Yp(n,e){return Xp(n,"POST","/v1/accounts:lookup",e)}function wu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q0(n,e=!1){let t=$t(n),r=await t.getIdToken(e),i=rO(r);je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:wu(V0(i.auth_time)),issuedAtTime:wu(V0(i.iat)),expirationTime:wu(V0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function V0(n){return Number(n)*1e3}function rO(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Hp("JWT malformed, contained fewer than 3 sections"),null;try{let i=xp(t);return i?JSON.parse(i):(Hp("Failed to decode base64 JWT payload"),null)}catch(i){return Hp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function q1(n){let e=rO(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function B0(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zn&&D6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function D6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var z0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var bu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Qp(n){var e;let t=n.auth,r=await n.getIdToken(),i=await B0(n,Yp(t,{idToken:r}));je(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?iO(o.providerUserInfo):[],a=S6(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,f=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new bu(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,p)}async function Z0(n){let e=$t(n);await Qp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iO(n){return n.map(e=>{var{providerId:t}=e,r=cv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function A6(n,e){let t=await tO(n,{},async()=>{let r=g0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await nO(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&ss(n.emulatorConfig.host)&&(l.credentials="include"),Kp.fetch()(s,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M6(n,e){return Xp(n,"POST","/v2/accounts:revokeToken",eO(n,e))}var Iu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");let t=q1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await A6(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(je(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(je(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(je(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Cu("not implemented")}};function no(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var hs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=cv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await B0(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Q0(this,e)}reload(){return Z0(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Qp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(qp(this.auth));let e=await this.getIdToken();return await B0(this,T6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,_=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,j=(u=t.createdAt)!==null&&u!==void 0?u:void 0,ne=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:le,emailVerified:Ne,isAnonymous:Lt,providerData:$e,stsTokenManager:S}=t;je(le&&S,e,"internal-error");let E=Iu.fromJSON(this.name,S);je(typeof le=="string",e,"internal-error"),no(p,e.name),no(g,e.name),je(typeof Ne=="boolean",e,"internal-error"),je(typeof Lt=="boolean",e,"internal-error"),no(_,e.name),no(T,e.name),no(x,e.name),no(N,e.name),no(j,e.name),no(ne,e.name);let I=new n({uid:le,auth:e,email:g,emailVerified:Ne,displayName:p,isAnonymous:Lt,photoURL:T,phoneNumber:_,tenantId:x,stsTokenManager:E,createdAt:j,lastLoginAt:ne});return $e&&Array.isArray($e)&&(I.providerData=$e.map(D=>Object.assign({},D))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Iu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qp(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];je(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?iO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Iu;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new bu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l}};var W1=new Map;function ps(n){Gp(n instanceof Function,"Expected a class definition");let e=W1.get(n);return e?(Gp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,W1.set(n,e),e)}var R6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$0=R6;function U0(n,e,t){return`firebase:${n}:${e}:${t}`}var Zp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=U0(this.userKey,i.apiKey,o),this.fullPersistenceKey=U0("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Yp(this.auth,{idToken:e}).catch(()=>{});return t?hs._fromGetAccountInfoResponse(this.auth,t,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ps($0),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||ps($0),s=U0(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let f=await u._get(s);if(f){let p;if(typeof f=="string"){let g=await Yp(e,{idToken:f}).catch(()=>{});if(!g)break;p=await hs._fromGetAccountInfoResponse(e,g,f)}else p=hs._fromJSON(e,f);u!==o&&(a=p),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new n(o,e,r))}};function G1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F6(e))return"Blackberry";if(L6(e))return"Webos";if(O6(e))return"Safari";if((e.includes("chrome/")||x6(e))&&!e.includes("edge/"))return"Chrome";if(k6(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function P6(n=Un()){return/firefox\//i.test(n)}function O6(n=Un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x6(n=Un()){return/crios\//i.test(n)}function N6(n=Un()){return/iemobile/i.test(n)}function k6(n=Un()){return/android/i.test(n)}function F6(n=Un()){return/blackberry/i.test(n)}function L6(n=Un()){return/webos/i.test(n)}function oO(n,e=[]){let t;switch(n){case"Browser":t=G1(Un());break;case"Worker":t=`${G1(Un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ja}/${r}`}var H0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function V6(n,e={}){return Xp(n,"GET","/v2/passwordPolicy",eO(n,e))}var U6=6,q0=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:U6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var W0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jp(this),this.idTokenSubscription=new Jp(this),this.beforeStateQueue=new H0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Zp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Yp(this,{idToken:e}),r=await hs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(vi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=E6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(qp(this));let t=e?$t(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(qp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(qp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await V6(this),t=new q0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await M6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ps(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Zp.create(this,[ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&v6(`Error while retrieving App Check token: ${t.error}`),t?.token}};function j6(n){return $t(n)}var Jp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=h1(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var B6={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z6(n){B6=n}function $6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function H6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ps);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var mue=$6("rcb"),vue=new gs(3e4,6e4);var yue=new gs(2e3,1e4);var _ue=600*1e3;var Eue=new gs(3e4,6e4);var Cue=new gs(5e3,15e3);var wue=encodeURIComponent("fac");var K1="@firebase/auth",Y1="1.10.8";var G0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function q6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W6(n){gr(new hn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;je(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oO(n)},u=new W0(r,i,o,l);return H6(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),gr(new hn("auth-internal",e=>{let t=j6(e.getProvider("auth").getImmediate());return(r=>new G0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(K1,Y1,q6(n)),ht(K1,Y1,"esm2017")}var G6=300,Iue=o1("authIdTokenMaxAge")||G6;function K6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}z6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=K0("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",K6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W6("Browser");var W5="auth";var eg=class{constructor(){return $a(W5)}};var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aO={};var yi,J0;(function(){var n;function e(S,E){function I(){}I.prototype=E.prototype,S.D=E.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(D,A,P){for(var w=Array(arguments.length-2),Qr=2;Qr<arguments.length;Qr++)w[Qr-2]=arguments[Qr];return E.prototype[A].apply(D,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,I){I||(I=0);var D=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)D[A]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(A=0;16>A;++A)D[A]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=S.g[0],I=S.g[1],A=S.g[2];var P=S.g[3],w=E+(P^I&(A^P))+D[0]+3614090360&4294967295;E=I+(w<<7&4294967295|w>>>25),w=P+(A^E&(I^A))+D[1]+3905402710&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(I^P&(E^I))+D[2]+606105819&4294967295,A=P+(w<<17&4294967295|w>>>15),w=I+(E^A&(P^E))+D[3]+3250441966&4294967295,I=A+(w<<22&4294967295|w>>>10),w=E+(P^I&(A^P))+D[4]+4118548399&4294967295,E=I+(w<<7&4294967295|w>>>25),w=P+(A^E&(I^A))+D[5]+1200080426&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(I^P&(E^I))+D[6]+2821735955&4294967295,A=P+(w<<17&4294967295|w>>>15),w=I+(E^A&(P^E))+D[7]+4249261313&4294967295,I=A+(w<<22&4294967295|w>>>10),w=E+(P^I&(A^P))+D[8]+1770035416&4294967295,E=I+(w<<7&4294967295|w>>>25),w=P+(A^E&(I^A))+D[9]+2336552879&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(I^P&(E^I))+D[10]+4294925233&4294967295,A=P+(w<<17&4294967295|w>>>15),w=I+(E^A&(P^E))+D[11]+2304563134&4294967295,I=A+(w<<22&4294967295|w>>>10),w=E+(P^I&(A^P))+D[12]+1804603682&4294967295,E=I+(w<<7&4294967295|w>>>25),w=P+(A^E&(I^A))+D[13]+4254626195&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(I^P&(E^I))+D[14]+2792965006&4294967295,A=P+(w<<17&4294967295|w>>>15),w=I+(E^A&(P^E))+D[15]+1236535329&4294967295,I=A+(w<<22&4294967295|w>>>10),w=E+(A^P&(I^A))+D[1]+4129170786&4294967295,E=I+(w<<5&4294967295|w>>>27),w=P+(I^A&(E^I))+D[6]+3225465664&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^I&(P^E))+D[11]+643717713&4294967295,A=P+(w<<14&4294967295|w>>>18),w=I+(P^E&(A^P))+D[0]+3921069994&4294967295,I=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(I^A))+D[5]+3593408605&4294967295,E=I+(w<<5&4294967295|w>>>27),w=P+(I^A&(E^I))+D[10]+38016083&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^I&(P^E))+D[15]+3634488961&4294967295,A=P+(w<<14&4294967295|w>>>18),w=I+(P^E&(A^P))+D[4]+3889429448&4294967295,I=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(I^A))+D[9]+568446438&4294967295,E=I+(w<<5&4294967295|w>>>27),w=P+(I^A&(E^I))+D[14]+3275163606&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^I&(P^E))+D[3]+4107603335&4294967295,A=P+(w<<14&4294967295|w>>>18),w=I+(P^E&(A^P))+D[8]+1163531501&4294967295,I=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(I^A))+D[13]+2850285829&4294967295,E=I+(w<<5&4294967295|w>>>27),w=P+(I^A&(E^I))+D[2]+4243563512&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^I&(P^E))+D[7]+1735328473&4294967295,A=P+(w<<14&4294967295|w>>>18),w=I+(P^E&(A^P))+D[12]+2368359562&4294967295,I=A+(w<<20&4294967295|w>>>12),w=E+(I^A^P)+D[5]+4294588738&4294967295,E=I+(w<<4&4294967295|w>>>28),w=P+(E^I^A)+D[8]+2272392833&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^I)+D[11]+1839030562&4294967295,A=P+(w<<16&4294967295|w>>>16),w=I+(A^P^E)+D[14]+4259657740&4294967295,I=A+(w<<23&4294967295|w>>>9),w=E+(I^A^P)+D[1]+2763975236&4294967295,E=I+(w<<4&4294967295|w>>>28),w=P+(E^I^A)+D[4]+1272893353&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^I)+D[7]+4139469664&4294967295,A=P+(w<<16&4294967295|w>>>16),w=I+(A^P^E)+D[10]+3200236656&4294967295,I=A+(w<<23&4294967295|w>>>9),w=E+(I^A^P)+D[13]+681279174&4294967295,E=I+(w<<4&4294967295|w>>>28),w=P+(E^I^A)+D[0]+3936430074&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^I)+D[3]+3572445317&4294967295,A=P+(w<<16&4294967295|w>>>16),w=I+(A^P^E)+D[6]+76029189&4294967295,I=A+(w<<23&4294967295|w>>>9),w=E+(I^A^P)+D[9]+3654602809&4294967295,E=I+(w<<4&4294967295|w>>>28),w=P+(E^I^A)+D[12]+3873151461&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^I)+D[15]+530742520&4294967295,A=P+(w<<16&4294967295|w>>>16),w=I+(A^P^E)+D[2]+3299628645&4294967295,I=A+(w<<23&4294967295|w>>>9),w=E+(A^(I|~P))+D[0]+4096336452&4294967295,E=I+(w<<6&4294967295|w>>>26),w=P+(I^(E|~A))+D[7]+1126891415&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~I))+D[14]+2878612391&4294967295,A=P+(w<<15&4294967295|w>>>17),w=I+(P^(A|~E))+D[5]+4237533241&4294967295,I=A+(w<<21&4294967295|w>>>11),w=E+(A^(I|~P))+D[12]+1700485571&4294967295,E=I+(w<<6&4294967295|w>>>26),w=P+(I^(E|~A))+D[3]+2399980690&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~I))+D[10]+4293915773&4294967295,A=P+(w<<15&4294967295|w>>>17),w=I+(P^(A|~E))+D[1]+2240044497&4294967295,I=A+(w<<21&4294967295|w>>>11),w=E+(A^(I|~P))+D[8]+1873313359&4294967295,E=I+(w<<6&4294967295|w>>>26),w=P+(I^(E|~A))+D[15]+4264355552&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~I))+D[6]+2734768916&4294967295,A=P+(w<<15&4294967295|w>>>17),w=I+(P^(A|~E))+D[13]+1309151649&4294967295,I=A+(w<<21&4294967295|w>>>11),w=E+(A^(I|~P))+D[4]+4149444226&4294967295,E=I+(w<<6&4294967295|w>>>26),w=P+(I^(E|~A))+D[11]+3174756917&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~I))+D[2]+718787259&4294967295,A=P+(w<<15&4294967295|w>>>17),w=I+(P^(A|~E))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var I=E-this.blockSize,D=this.B,A=this.h,P=0;P<E;){if(A==0)for(;P<=I;)i(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<E;)if(D[A++]=S.charCodeAt(P++),A==this.blockSize){i(this,D),A=0;break}}else for(;P<E;)if(D[A++]=S[P++],A==this.blockSize){i(this,D),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var I=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=I&255,I/=256;for(this.u(S),S=Array(16),E=I=0;4>E;++E)for(var D=0;32>D;D+=8)S[I++]=this.g[E]>>>D&255;return S};function o(S,E){var I=a;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=E(S)}function s(S,E){this.h=E;for(var I=[],D=!0,A=S.length-1;0<=A;A--){var P=S[A]|0;D&&P==E||(I[A]=P,D=!1)}this.g=I}var a={};function l(S){return-128<=S&&128>S?o(S,function(E){return new s([E|0],0>E?-1:0)}):new s([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return N(u(-S));for(var E=[],I=1,D=0;S>=I;D++)E[D]=S/I|0,I*=4294967296;return new s(E,0)}function f(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return N(f(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(E,8)),D=p,A=0;A<S.length;A+=8){var P=Math.min(8,S.length-A),w=parseInt(S.substring(A,A+P),E);8>P?(P=u(Math.pow(E,P)),D=D.j(P).add(u(w))):(D=D.j(I),D=D.add(u(w)))}return D}var p=l(0),g=l(1),_=l(16777216);n=s.prototype,n.m=function(){if(x(this))return-N(this).m();for(var S=0,E=1,I=0;I<this.g.length;I++){var D=this.i(I);S+=(0<=D?D:4294967296+D)*E,E*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(x(this))return"-"+N(this).toString(S);for(var E=u(Math.pow(S,6)),I=this,D="";;){var A=Ne(I,E).g;I=j(I,A.j(E));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=A,T(I))return P+D;for(;6>P.length;)P="0"+P;D=P+D}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function x(S){return S.h==-1}n.l=function(S){return S=j(this,S),x(S)?-1:T(S)?0:1};function N(S){for(var E=S.g.length,I=[],D=0;D<E;D++)I[D]=~S.g[D];return new s(I,~S.h).add(g)}n.abs=function(){return x(this)?N(this):this},n.add=function(S){for(var E=Math.max(this.g.length,S.g.length),I=[],D=0,A=0;A<=E;A++){var P=D+(this.i(A)&65535)+(S.i(A)&65535),w=(P>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);D=w>>>16,P&=65535,w&=65535,I[A]=w<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(S,E){return S.add(N(E))}n.j=function(S){if(T(this)||T(S))return p;if(x(this))return x(S)?N(this).j(N(S)):N(N(this).j(S));if(x(S))return N(this.j(N(S)));if(0>this.l(_)&&0>S.l(_))return u(this.m()*S.m());for(var E=this.g.length+S.g.length,I=[],D=0;D<2*E;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var A=0;A<S.g.length;A++){var P=this.i(D)>>>16,w=this.i(D)&65535,Qr=S.i(A)>>>16,vc=S.i(A)&65535;I[2*D+2*A]+=w*vc,ne(I,2*D+2*A),I[2*D+2*A+1]+=P*vc,ne(I,2*D+2*A+1),I[2*D+2*A+1]+=w*Qr,ne(I,2*D+2*A+1),I[2*D+2*A+2]+=P*Qr,ne(I,2*D+2*A+2)}for(D=0;D<E;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=E;D<2*E;D++)I[D]=0;return new s(I,0)};function ne(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function le(S,E){this.g=S,this.h=E}function Ne(S,E){if(T(E))throw Error("division by zero");if(T(S))return new le(p,p);if(x(S))return E=Ne(N(S),E),new le(N(E.g),N(E.h));if(x(E))return E=Ne(S,N(E)),new le(N(E.g),E.h);if(30<S.g.length){if(x(S)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var I=g,D=E;0>=D.l(S);)I=Lt(I),D=Lt(D);var A=$e(I,1),P=$e(D,1);for(D=$e(D,2),I=$e(I,2);!T(D);){var w=P.add(D);0>=w.l(S)&&(A=A.add(I),P=w),D=$e(D,1),I=$e(I,1)}return E=j(S,A.j(E)),new le(A,E)}for(A=p;0<=S.l(E);){for(I=Math.max(1,Math.floor(S.m()/E.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),P=u(I),w=P.j(E);x(w)||0<w.l(S);)I-=D,P=u(I),w=P.j(E);T(P)&&(P=g),A=A.add(P),S=j(S,w)}return new le(A,S)}n.A=function(S){return Ne(this,S).h},n.and=function(S){for(var E=Math.max(this.g.length,S.g.length),I=[],D=0;D<E;D++)I[D]=this.i(D)&S.i(D);return new s(I,this.h&S.h)},n.or=function(S){for(var E=Math.max(this.g.length,S.g.length),I=[],D=0;D<E;D++)I[D]=this.i(D)|S.i(D);return new s(I,this.h|S.h)},n.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),I=[],D=0;D<E;D++)I[D]=this.i(D)^S.i(D);return new s(I,this.h^S.h)};function Lt(S){for(var E=S.g.length+1,I=[],D=0;D<E;D++)I[D]=S.i(D)<<1|S.i(D-1)>>>31;return new s(I,S.h)}function $e(S,E){var I=E>>5;E%=32;for(var D=S.g.length-I,A=[],P=0;P<D;P++)A[P]=0<E?S.i(P+I)>>>E|S.i(P+I+1)<<32-E:S.i(P+I);return new s(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,J0=aO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,yi=aO.Integer=s}).apply(typeof sO<"u"?sO:typeof self<"u"?self:typeof window<"u"?window:{});var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_i={};var X0,G5,Ha,eC,Tu,ng,tC,nC,rC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof tg=="object"&&tg];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var M=c[m];if(!(M in h))break e;h=h[M]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var h=0,m=!1,M={next:function(){if(!m&&h<c.length){var O=h++;return{value:d(O,c[O]),done:!1}}return m=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,h){return h})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,m),c.apply(d,M)}}return function(){return c.apply(d,arguments)}}function g(c,d,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function T(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(m,M,O){for(var B=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)B[Ke-2]=arguments[Ke];return d.prototype[M].apply(m,B)}}function x(c){let d=c.length;if(0<d){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function N(c,d){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let M=c.length||0,O=m.length||0;c.length=M+O;for(let B=0;B<O;B++)c[M+B]=m[B]}else c.push(m)}}class j{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ne(c){return/^[\s\xa0]*$/.test(c)}function le(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ne(c){return Ne[" "](c),c}Ne[" "]=function(){};var Lt=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function $e(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function S(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function E(c){let d={};for(let h in c)d[h]=c[h];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let h,m;for(let M=1;M<arguments.length;M++){m=arguments[M];for(h in m)c[h]=m[h];for(let O=0;O<I.length;O++)h=I[O],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function A(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function P(c){a.setTimeout(()=>{throw c},0)}function w(){var c=ym;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qr{constructor(){this.h=this.g=null}add(d,h){let m=vc.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var vc=new j(()=>new ek,c=>c.reset());class ek{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let yc,_c=!1,ym=new Qr,bI=()=>{let c=a.Promise.resolve(void 0);yc=()=>{c.then(tk)}};var tk=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(h){P(h)}var d=vc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}_c=!1};function Si(){this.s=this.s,this.C=this.C}Si.prototype.s=!1,Si.prototype.ma=function(){this.s||(this.s=!0,this.N())},Si.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var nk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c})();function Ec(c,d){if(qt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Lt){e:{try{Ne(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:rk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ec.aa.h.call(this)}}T(Ec,qt);var rk={2:"touch",3:"pen",4:"mouse"};Ec.prototype.h=function(){Ec.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),ik=0;function ok(c,d,h,m,M){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=M,this.key=++ik,this.da=this.fa=!1}function Ju(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Xu(c){this.src=c,this.g={},this.h=0}Xu.prototype.add=function(c,d,h,m,M){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var B=Em(c,d,m,M);return-1<B?(d=c[B],h||(d.fa=!1)):(d=new ok(d,this.src,O,!!m,M),d.fa=h,c.push(d)),d};function _m(c,d){var h=d.type;if(h in c.g){var m=c.g[h],M=Array.prototype.indexOf.call(m,d,void 0),O;(O=0<=M)&&Array.prototype.splice.call(m,M,1),O&&(Ju(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Em(c,d,h,m){for(var M=0;M<c.length;++M){var O=c[M];if(!O.da&&O.listener==d&&O.capture==!!h&&O.ha==m)return M}return-1}var Cm="closure_lm_"+(1e6*Math.random()|0),wm={};function TI(c,d,h,m,M){if(m&&m.once)return SI(c,d,h,m,M);if(Array.isArray(d)){for(var O=0;O<d.length;O++)TI(c,d[O],h,m,M);return null}return h=Dm(h),c&&c[Cc]?c.K(d,h,u(m)?!!m.capture:!!m,M):DI(c,d,h,!1,m,M)}function DI(c,d,h,m,M,O){if(!d)throw Error("Invalid event type");var B=u(M)?!!M.capture:!!M,Ke=bm(c);if(Ke||(c[Cm]=Ke=new Xu(c)),h=Ke.add(d,h,m,B,O),h.proxy)return h;if(m=sk(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)nk||(M=B),M===void 0&&(M=!1),c.addEventListener(d.toString(),m,M);else if(c.attachEvent)c.attachEvent(MI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function sk(){function c(h){return d.call(c.src,c.listener,h)}let d=ak;return c}function SI(c,d,h,m,M){if(Array.isArray(d)){for(var O=0;O<d.length;O++)SI(c,d[O],h,m,M);return null}return h=Dm(h),c&&c[Cc]?c.L(d,h,u(m)?!!m.capture:!!m,M):DI(c,d,h,!0,m,M)}function AI(c,d,h,m,M){if(Array.isArray(d))for(var O=0;O<d.length;O++)AI(c,d[O],h,m,M);else m=u(m)?!!m.capture:!!m,h=Dm(h),c&&c[Cc]?(c=c.i,d=String(d).toString(),d in c.g&&(O=c.g[d],h=Em(O,h,m,M),-1<h&&(Ju(O[h]),Array.prototype.splice.call(O,h,1),O.length==0&&(delete c.g[d],c.h--)))):c&&(c=bm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Em(d,h,m,M)),(h=-1<c?d[c]:null)&&Im(h))}function Im(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Cc])_m(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(MI(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=bm(d))?(_m(h,c),h.h==0&&(h.src=null,d[Cm]=null)):Ju(c)}}}function MI(c){return c in wm?wm[c]:wm[c]="on"+c}function ak(c,d){if(c.da)c=!0;else{d=new Ec(d,this);var h=c.listener,m=c.ha||c.src;c.fa&&Im(c),c=h.call(m,d)}return c}function bm(c){return c=c[Cm],c instanceof Xu?c:null}var Tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dm(c){return typeof c=="function"?c:(c[Tm]||(c[Tm]=function(d){return c.handleEvent(d)}),c[Tm])}function Wt(){Si.call(this),this.i=new Xu(this),this.M=this,this.F=null}T(Wt,Si),Wt.prototype[Cc]=!0,Wt.prototype.removeEventListener=function(c,d,h,m){AI(this,c,d,h,m)};function rn(c,d){var h,m=c.F;if(m)for(h=[];m;m=m.F)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new qt(d,c);else if(d instanceof qt)d.target=d.target||c;else{var M=d;d=new qt(m,c),D(d,M)}if(M=!0,h)for(var O=h.length-1;0<=O;O--){var B=d.g=h[O];M=ed(B,m,!0,d)&&M}if(B=d.g=c,M=ed(B,m,!0,d)&&M,M=ed(B,m,!1,d)&&M,h)for(O=0;O<h.length;O++)B=d.g=h[O],M=ed(B,m,!1,d)&&M}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],m=0;m<h.length;m++)Ju(h[m]);delete c.g[d],c.h--}}this.F=null},Wt.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},Wt.prototype.L=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function ed(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,O=0;O<d.length;++O){var B=d[O];if(B&&!B.da&&B.capture==h){var Ke=B.listener,Vt=B.ha||B.src;B.fa&&_m(c.i,B),M=Ke.call(Vt,m)!==!1&&M}}return M&&!m.defaultPrevented}function RI(c,d,h){if(typeof c=="function")h&&(c=g(c,h));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function PI(c){c.g=RI(()=>{c.g=null,c.i&&(c.i=!1,PI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ck extends Si{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:PI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wc(c){Si.call(this),this.h=c,this.g={}}T(wc,Si);var OI=[];function xI(c){$e(c.g,function(d,h){this.g.hasOwnProperty(h)&&Im(d)},c),c.g={}}wc.prototype.N=function(){wc.aa.N.call(this),xI(this)},wc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sm=a.JSON.stringify,lk=a.JSON.parse,uk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Am(){}Am.prototype.h=null;function NI(c){return c.h||(c.h=c.i())}function kI(){}var Ic={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mm(){qt.call(this,"d")}T(Mm,qt);function Rm(){qt.call(this,"c")}T(Rm,qt);var po={},FI=null;function td(){return FI=FI||new Wt}po.La="serverreachability";function LI(c){qt.call(this,po.La,c)}T(LI,qt);function bc(c){let d=td();rn(d,new LI(d))}po.STAT_EVENT="statevent";function VI(c,d){qt.call(this,po.STAT_EVENT,c),this.stat=d}T(VI,qt);function on(c){let d=td();rn(d,new VI(d,c))}po.Ma="timingevent";function UI(c,d){qt.call(this,po.Ma,c),this.size=d}T(UI,qt);function Tc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Dc(){this.g=!0}Dc.prototype.xa=function(){this.g=!1};function dk(c,d,h,m,M,O){c.info(function(){if(c.g)if(O)for(var B="",Ke=O.split("&"),Vt=0;Vt<Ke.length;Vt++){var Oe=Ke[Vt].split("=");if(1<Oe.length){var Gt=Oe[0];Oe=Oe[1];var Kt=Gt.split("_");B=2<=Kt.length&&Kt[1]=="type"?B+(Gt+"="+Oe+"&"):B+(Gt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+m+") [attempt "+M+"]: "+d+`
`+h+`
`+B})}function fk(c,d,h,m,M,O,B){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+M+"]: "+d+`
`+h+`
`+O+" "+B})}function Rs(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+pk(c,h)+(m?" "+m:"")})}function hk(c,d){c.info(function(){return"TIMEOUT: "+d})}Dc.prototype.info=function(){};function pk(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var m=h[c];if(!(2>m.length)){var M=m[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return Sm(h)}catch{return d}}var nd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pm;function rd(){}T(rd,Am),rd.prototype.g=function(){return new XMLHttpRequest},rd.prototype.i=function(){return{}},Pm=new rd;function Ai(c,d,h,m){this.j=c,this.i=d,this.l=h,this.R=m||1,this.U=new wc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new BI}function BI(){this.i=null,this.g="",this.h=!1}var zI={},Om={};function xm(c,d,h){c.L=1,c.v=ad(Zr(d)),c.m=h,c.P=!0,$I(c,null)}function $I(c,d){c.F=Date.now(),id(c),c.A=Zr(c.v);var h=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),rb(h.i,"t",m),c.C=0,h=c.j.J,c.h=new BI,c.g=Cb(c.j,h?d:null,!c.m),0<c.O&&(c.M=new ck(g(c.Y,c,c.g),c.O)),d=c.U,h=c.g,m=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(OI[0]=M.toString()),M=OI);for(var O=0;O<M.length;O++){var B=TI(h,M[O],m||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),bc(),dk(c.i,c.u,c.A,c.l,c.R,c.m)}Ai.prototype.ca=function(c){c=c.target;let d=this.M;d&&Jr(c)==3?d.j():this.Y(c)},Ai.prototype.Y=function(c){try{if(c==this.g)e:{let Kt=Jr(this.g);var d=this.g.Ba();let xs=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||ub(this.g)))){this.J||Kt!=4||d==7||(d==8||0>=xs?bc(3):bc(2)),Nm(this);var h=this.g.Z();this.X=h;t:if(HI(this)){var m=ub(this.g);c="";var M=m.length,O=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){go(this),Sc(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(O&&d==M-1)});m.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=h==200,fk(this.i,this.u,this.A,this.l,this.R,Kt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ke)){var Oe=Ke;break t}}Oe=null}if(h=Oe)Rs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,km(this,h);else{this.o=!1,this.s=3,on(12),go(this),Sc(this);break e}}if(this.P){h=!0;let tr;for(;!this.J&&this.C<B.length;)if(tr=gk(this,B),tr==Om){Kt==4&&(this.s=4,on(14),h=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==zI){this.s=4,on(15),Rs(this.i,this.l,B,"[Invalid Chunk]"),h=!1;break}else Rs(this.i,this.l,tr,null),km(this,tr);if(HI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||B.length!=0||this.h.h||(this.s=1,on(16),h=!1),this.o=this.o&&h,!h)Rs(this.i,this.l,B,"[Invalid Chunked Response]"),go(this),Sc(this);else if(0<B.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Bm(Gt),Gt.M=!0,on(11))}}else Rs(this.i,this.l,B,null),km(this,B);Kt==4&&go(this),this.o&&!this.J&&(Kt==4?vb(this.j,this):(this.o=!1,id(this)))}else Ok(this.g),h==400&&0<B.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),go(this),Sc(this)}}}catch{}finally{}};function HI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gk(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?Om:(h=Number(d.substring(h,m)),isNaN(h)?zI:(m+=1,m+h>d.length?Om:(d=d.slice(m,m+h),c.C=m+h,d)))}Ai.prototype.cancel=function(){this.J=!0,go(this)};function id(c){c.S=Date.now()+c.I,qI(c,c.I)}function qI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tc(g(c.ba,c),d)}function Nm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ai.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(hk(this.i,this.A),this.L!=2&&(bc(),on(17)),go(this),this.s=2,Sc(this)):qI(this,this.S-c)};function Sc(c){c.j.G==0||c.J||vb(c.j,c)}function go(c){Nm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,xI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function km(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||Fm(h.h,c))){if(!c.K&&Fm(h.h,c)&&h.G==3){try{var m=h.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var M=m;if(M[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)fd(h),ud(h);else break e;jm(h),on(18)}}else h.za=M[1],0<h.za-h.T&&37500>M[2]&&h.F&&h.v==0&&!h.C&&(h.C=Tc(g(h.Za,h),6e3));if(1>=KI(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else vo(h,11)}else if((c.K||h.g==c)&&fd(h),!ne(d))for(M=h.Da.g.parse(d),d=0;d<M.length;d++){let Oe=M[d];if(h.T=Oe[0],Oe=Oe[1],h.G==2)if(Oe[0]=="c"){h.K=Oe[1],h.ia=Oe[2];let Gt=Oe[3];Gt!=null&&(h.la=Gt,h.j.info("VER="+h.la));let Kt=Oe[4];Kt!=null&&(h.Aa=Kt,h.j.info("SVER="+h.Aa));let xs=Oe[5];xs!=null&&typeof xs=="number"&&0<xs&&(m=1.5*xs,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let tr=c.g;if(tr){let pd=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pd){var O=m.h;O.g||pd.indexOf("spdy")==-1&&pd.indexOf("quic")==-1&&pd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Lm(O,O.h),O.h=null))}if(m.D){let zm=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;zm&&(m.ya=zm,Xe(m.I,m.D,zm))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var B=c;if(m.qa=Eb(m,m.J?m.ia:null,m.W),B.K){YI(m.h,B);var Ke=B,Vt=m.L;Vt&&(Ke.I=Vt),Ke.B&&(Nm(Ke),id(Ke)),m.g=B}else gb(m);0<h.i.length&&dd(h)}else Oe[0]!="stop"&&Oe[0]!="close"||vo(h,7);else h.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?vo(h,7):Um(h):Oe[0]!="noop"&&h.l&&h.l.ta(Oe),h.v=0)}}bc(4)}catch{}}var mk=class{constructor(c,d){this.g=c,this.map=d}};function WI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function GI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function KI(c){return c.h?1:c.g?c.g.size:0}function Fm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Lm(c,d){c.g?c.g.add(d):c.h=d}function YI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}WI.prototype.cancel=function(){if(this.i=QI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function QI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return x(c.i)}function vk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],h=c.length,m=0;m<h;m++)d.push(c[m]);return d}d=[],h=0;for(m in c)d[h++]=c[m];return d}function yk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let m in c)d[h++]=m;return d}}}function ZI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=yk(c),m=vk(c),M=m.length,O=0;O<M;O++)d.call(void 0,m[O],h&&h[O],c)}var JI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _k(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var m=c[h].indexOf("="),M=null;if(0<=m){var O=c[h].substring(0,m);M=c[h].substring(m+1)}else O=c[h];d(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function mo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof mo){this.h=c.h,od(this,c.j),this.o=c.o,this.g=c.g,sd(this,c.s),this.l=c.l;var d=c.i,h=new Rc;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),XI(this,h),this.m=c.m}else c&&(d=String(c).match(JI))?(this.h=!1,od(this,d[1]||"",!0),this.o=Ac(d[2]||""),this.g=Ac(d[3]||"",!0),sd(this,d[4]),this.l=Ac(d[5]||"",!0),XI(this,d[6]||"",!0),this.m=Ac(d[7]||"")):(this.h=!1,this.i=new Rc(null,this.h))}mo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Mc(d,eb,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Mc(d,eb,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(Mc(h,h.charAt(0)=="/"?wk:Ck,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",Mc(h,bk)),c.join("")};function Zr(c){return new mo(c)}function od(c,d,h){c.j=h?Ac(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function sd(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function XI(c,d,h){d instanceof Rc?(c.i=d,Tk(c.i,c.h)):(h||(d=Mc(d,Ik)),c.i=new Rc(d,c.h))}function Xe(c,d,h){c.i.set(d,h)}function ad(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ac(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Mc(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,Ek),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ek(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var eb=/[#\/\?@]/g,Ck=/[#\?:]/g,wk=/[#\?]/g,Ik=/[#\?@]/g,bk=/#/g;function Rc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Mi(c){c.g||(c.g=new Map,c.h=0,c.i&&_k(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Rc.prototype,n.add=function(c,d){Mi(this),this.i=null,c=Ps(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function tb(c,d){Mi(c),d=Ps(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function nb(c,d){return Mi(c),d=Ps(c,d),c.g.has(d)}n.forEach=function(c,d){Mi(this),this.g.forEach(function(h,m){h.forEach(function(M){c.call(d,M,m,this)},this)},this)},n.na=function(){Mi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let m=0;m<d.length;m++){let M=c[m];for(let O=0;O<M.length;O++)h.push(d[m])}return h},n.V=function(c){Mi(this);let d=[];if(typeof c=="string")nb(this,c)&&(d=d.concat(this.g.get(Ps(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},n.set=function(c,d){return Mi(this),this.i=null,c=Ps(this,c),nb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function rb(c,d,h){tb(c,d),0<h.length&&(c.i=null,c.g.set(Ps(c,d),x(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var m=d[h];let O=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var M=O;B[m]!==""&&(M+="="+encodeURIComponent(String(B[m]))),c.push(M)}}return this.i=c.join("&")};function Ps(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Tk(c,d){d&&!c.j&&(Mi(c),c.i=null,c.g.forEach(function(h,m){var M=m.toLowerCase();m!=M&&(tb(this,m),rb(this,M,h))},c)),c.j=d}function Dk(c,d){let h=new Dc;if(a.Image){let m=new Image;m.onload=_(Ri,h,"TestLoadImage: loaded",!0,d,m),m.onerror=_(Ri,h,"TestLoadImage: error",!1,d,m),m.onabort=_(Ri,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=_(Ri,h,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function Sk(c,d){let h=new Dc,m=new AbortController,M=setTimeout(()=>{m.abort(),Ri(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(O=>{clearTimeout(M),O.ok?Ri(h,"TestPingServer: ok",!0,d):Ri(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Ri(h,"TestPingServer: error",!1,d)})}function Ri(c,d,h,m,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),m(h)}catch{}}function Ak(){this.g=new uk}function Mk(c,d,h){let m=h||"";try{ZI(c,function(M,O){let B=M;u(M)&&(B=Sm(M)),d.push(m+O+"="+encodeURIComponent(B))})}catch(M){throw d.push(m+"type="+encodeURIComponent("_badmap")),M}}function Pc(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Pc,Am),Pc.prototype.g=function(){return new cd(this.l,this.j)},Pc.prototype.i=(function(c){return function(){return c}})({});function cd(c,d){Wt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(cd,Wt),n=cd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,xc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xc(this)),this.g&&(this.readyState=3,xc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ib(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ib(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Oc(this):xc(this),this.readyState==3&&ib(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Oc(this))},n.Qa=function(c){this.g&&(this.response=c,Oc(this))},n.ga=function(){this.g&&Oc(this)};function Oc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function xc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ob(c){let d="";return $e(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function Vm(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=ob(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Xe(c,d,h))}function it(c){Wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(it,Wt);var Rk=/^https?$/i,Pk=["POST","PUT"];n=it.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pm.g(),this.v=this.o?NI(this.o):NI(Pm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(O){sb(this,O);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var M in m)h.set(M,m[M]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let O of m.keys())h.set(O,m.get(O));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Pk,d,void 0))||m||M||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of h)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lb(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){sb(this,O)}};function sb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,ab(c),ld(c)}function ab(c){c.A||(c.A=!0,rn(c,"complete"),rn(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,rn(this,"complete"),rn(this,"abort"),ld(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ld(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cb(this):this.bb())},n.bb=function(){cb(this)};function cb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Jr(c)!=4||c.Z()!=2)){if(c.u&&Jr(c)==4)RI(c.Ea,0,c);else if(rn(c,"readystatechange"),Jr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=B===0){var M=String(c.D).match(JI)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),m=!Rk.test(M?M.toLowerCase():"")}h=m}if(h)rn(c,"complete"),rn(c,"success");else{c.m=6;try{var O=2<Jr(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",ab(c)}}finally{ld(c)}}}}function ld(c,d){if(c.g){lb(c);let h=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||rn(c,"ready");try{h.onreadystatechange=m}catch{}}}function lb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Jr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),lk(d)}};function ub(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ok(c){let d={};c=(c.g&&2<=Jr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(ne(c[m]))continue;var h=A(c[m]);let M=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let O=d[M]||[];d[M]=O,O.push(h)}S(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function db(c){this.Aa=0,this.i=[],this.j=new Dc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nc("baseRetryDelayMs",5e3,c),this.cb=Nc("retryDelaySeedMs",1e4,c),this.Wa=Nc("forwardChannelMaxRetries",2,c),this.wa=Nc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new WI(c&&c.concurrentRequestLimit),this.Da=new Ak,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=db.prototype,n.la=8,n.G=1,n.connect=function(c,d,h,m){on(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Eb(this,null,this.W),dd(this)};function Um(c){if(fb(c),c.G==3){var d=c.U++,h=Zr(c.I);if(Xe(h,"SID",c.K),Xe(h,"RID",d),Xe(h,"TYPE","terminate"),kc(c,h),d=new Ai(c,c.j,d),d.L=2,d.v=ad(Zr(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=Cb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),id(d)}_b(c)}function ud(c){c.g&&(Bm(c),c.g.cancel(),c.g=null)}function fb(c){ud(c),c.u&&(a.clearTimeout(c.u),c.u=null),fd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function dd(c){if(!GI(c.h)&&!c.s){c.s=!0;var d=c.Ga;yc||bI(),_c||(yc(),_c=!0),ym.add(d,c),c.B=0}}function xk(c,d){return KI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tc(g(c.Ga,c,d),yb(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let M=new Ai(this,this.j,c),O=this.o;if(this.S&&(O?(O=E(O),D(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=pb(this,M,d),h=Zr(this.I),Xe(h,"RID",c),Xe(h,"CVER",22),this.D&&Xe(h,"X-HTTP-Session-Id",this.D),kc(this,h),O&&(this.O?d="headers="+encodeURIComponent(String(ob(O)))+"&"+d:this.m&&Vm(h,this.m,O)),Lm(this.h,M),this.Ua&&Xe(h,"TYPE","init"),this.P?(Xe(h,"$req",d),Xe(h,"SID","null"),M.T=!0,xm(M,h,null)):xm(M,h,d),this.G=2}}else this.G==3&&(c?hb(this,c):this.i.length==0||GI(this.h)||hb(this))};function hb(c,d){var h;d?h=d.l:h=c.U++;let m=Zr(c.I);Xe(m,"SID",c.K),Xe(m,"RID",h),Xe(m,"AID",c.T),kc(c,m),c.m&&c.o&&Vm(m,c.m,c.o),h=new Ai(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=pb(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Lm(c.h,h),xm(h,m,d)}function kc(c,d){c.H&&$e(c.H,function(h,m){Xe(d,m,h)}),c.l&&ZI({},function(h,m){Xe(d,m,h)})}function pb(c,d,h){h=Math.min(c.i.length,h);var m=c.l?g(c.l.Na,c.l,c):null;e:{var M=c.i;let O=-1;for(;;){let B=["count="+h];O==-1?0<h?(O=M[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Ke=!0;for(let Vt=0;Vt<h;Vt++){let Oe=M[Vt].g,Gt=M[Vt].map;if(Oe-=O,0>Oe)O=Math.max(0,M[Vt].g-100),Ke=!1;else try{Mk(Gt,B,"req"+Oe+"_")}catch{m&&m(Gt)}}if(Ke){m=B.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,m}function gb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;yc||bI(),_c||(yc(),_c=!0),ym.add(d,c),c.v=0}}function jm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tc(g(c.Fa,c),yb(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,mb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tc(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),ud(this),mb(this))};function Bm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function mb(c){c.g=new Ai(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Zr(c.qa);Xe(d,"RID","rpc"),Xe(d,"SID",c.K),Xe(d,"AID",c.T),Xe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(d,"TO",c.ja),Xe(d,"TYPE","xmlhttp"),kc(c,d),c.m&&c.o&&Vm(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=ad(Zr(d)),h.m=null,h.P=!0,$I(h,c)}n.Za=function(){this.C!=null&&(this.C=null,ud(this),jm(this),on(19))};function fd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function vb(c,d){var h=null;if(c.g==d){fd(c),Bm(c),c.g=null;var m=2}else if(Fm(c.h,d))h=d.D,YI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var M=c.B;m=td(),rn(m,new UI(m,h)),dd(c)}else gb(c);else if(M=d.s,M==3||M==0&&0<d.X||!(m==1&&xk(c,d)||m==2&&jm(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),M){case 1:vo(c,5);break;case 4:vo(c,10);break;case 3:vo(c,6);break;default:vo(c,2)}}}function yb(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function vo(c,d){if(c.j.info("Error code "+d),d==2){var h=g(c.fb,c),m=c.Xa;let M=!m;m=new mo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||od(m,"https"),ad(m),M?Dk(m.toString(),h):Sk(m.toString(),h)}else on(2);c.G=0,c.l&&c.l.sa(d),_b(c),fb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function _b(c){if(c.G=0,c.ka=[],c.l){let d=QI(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function Eb(c,d,h){var m=h instanceof mo?Zr(h):new mo(h);if(m.g!="")d&&(m.g=d+"."+m.g),sd(m,m.s);else{var M=a.location;m=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var O=new mo(null);m&&od(O,m),d&&(O.g=d),M&&sd(O,M),h&&(O.l=h),m=O}return h=c.D,d=c.ya,h&&d&&Xe(m,h,d),Xe(m,"VER",c.la),kc(c,m),m}function Cb(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new it(new Pc({eb:h})):new it(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wb(){}n=wb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hd(){}hd.prototype.g=function(c,d){return new Cn(c,d)};function Cn(c,d){Wt.call(this),this.g=new db(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!ne(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ne(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Os(this)}T(Cn,Wt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Um(this.g)},Cn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=Sm(c),c=h);d.i.push(new mk(d.Ya++,c)),d.G==3&&dd(d)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Um(this.g),delete this.g,Cn.aa.N.call(this)};function Ib(c){Mm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(Ib,Mm);function bb(){Rm.call(this),this.status=1}T(bb,Rm);function Os(c){this.g=c}T(Os,wb),Os.prototype.ua=function(){rn(this.g,"a")},Os.prototype.ta=function(c){rn(this.g,new Ib(c))},Os.prototype.sa=function(c){rn(this.g,new bb)},Os.prototype.ra=function(){rn(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,rC=_i.createWebChannelTransport=function(){return new hd},nC=_i.getStatEventTarget=function(){return td()},tC=_i.Event=po,ng=_i.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nd.NO_ERROR=0,nd.TIMEOUT=8,nd.HTTP_ERROR=6,Tu=_i.ErrorCode=nd,jI.COMPLETE="complete",eC=_i.EventType=jI,kI.EventType=Ic,Ic.OPEN="a",Ic.CLOSE="b",Ic.ERROR="c",Ic.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,Ha=_i.WebChannel=kI,G5=_i.FetchXmlHttpFactory=Pc,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,X0=_i.XhrIo=it}).apply(typeof tg<"u"?tg:typeof self<"u"?self:typeof window<"u"?window:{});var cO="@firebase/firestore",lO="4.8.0";var Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var dc="11.10.0";var Cs=new Ur("@firebase/firestore");function qa(){return Cs.logLevel}function Y(n,...e){if(Cs.logLevel<=De.DEBUG){let t=e.map(Ww);Cs.debug(`Firestore (${dc}): ${n}`,...t)}}function Ei(n,...e){if(Cs.logLevel<=De.ERROR){let t=e.map(Ww);Cs.error(`Firestore (${dc}): ${n}`,...t)}}function ao(n,...e){if(Cs.logLevel<=De.WARN){let t=e.map(Ww);Cs.warn(`Firestore (${dc}): ${n}`,...t)}}function Ww(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tx(n,r,t)}function tx(n,e,t){let r=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ei(r),new Error(r)}function ze(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||tx(e,i,r)}function ye(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Br=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var lg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nt.UNAUTHENTICATED))}shutdown(){}},lC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},uC=class{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Br,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Br)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new lg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}},dC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},fC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new dC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ug=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);let r=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ug(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ug(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function K5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function nx(){return new TextEncoder}var Pu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=K5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function pC(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Te(r,i);{let o=nx(),s=Y5(o.encode(uO(n,t)),o.encode(uO(e,t)));return s!==0?s:Te(r,i)}}t+=r>65535?2:1}return Te(n.length,e.length)}function uO(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Y5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function Ja(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var dO="__name__",dg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Te(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):pC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}},nt=class n extends dg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bn=class n extends dg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Q5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dO}static keyField(){return new n([dO])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(nt.fromString(e))}static fromName(e){return new n(nt.fromString(e).popFirst(5))}static empty(){return new n(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new nt(e.slice()))}};function rx(n,e,t){if(!t)throw new K(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Z5(n,e,t,r){if(e===!0&&r===!0)throw new K(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fO(n){if(!ie.isDocumentKey(n))throw new K(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hO(n){if(ie.isDocumentKey(n))throw new K(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ix(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $g(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae(12329,{type:typeof n})}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=$g(n);throw new K(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function It(n,e){let t={typeString:n};return e&&(t.value=e),t}function Hu(n,e){if(!ix(n))throw new K(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new K(L.INVALID_ARGUMENT,t);return!0}var pO=-62135596800,gO=1e6,bt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*gO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pO)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gO}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:It("string",bt._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};var Ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new bt(0,0))}static max(){return new n(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ou=-1,gC=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};gC.UNKNOWN_ID=-1;function J5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new bt(t+1,0):new bt(t,r));return new ws(i,ie.empty(),e)}function X5(n){return new ws(n.readTime,n.key,Ou)}var ws=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ce.min(),ie.empty(),Ou)}static max(){return new n(Ce.max(),ie.empty(),Ou)}};function eq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ie.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var tq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fc(n){if(n.code!==L.FAILED_PRECONDITION||n.message!==tq)throw n;Y("LocalStore","Unexpectedly lost primary lease")}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(f=>{s[u]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function nq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hc(n){return n.name==="IndexedDbTransactionError"}var Gw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Kw=-1;function Hg(n){return n==null}function xu(n){return n===0&&1/n==-1/0}function rq(n){return typeof n=="number"&&Number.isInteger(n)&&!xu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ox="";function iq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mO(e)),e=oq(n.get(t),e);return mO(e)}function oq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case ox:t+="";break;default:t+=o}}return t}function mO(n){return n+ox+""}var sq="remoteDocuments",sx="owner";var ax="mutationQueues";var cx="mutations";var lx="documentMutations",aq="remoteDocumentsV14";var ux="remoteDocumentGlobal";var dx="targets";var fx="targetDocuments";var hx="targetGlobal",px="collectionParents";var gx="clientMetadata";var mx="bundles";var vx="namedQueries";var cq="indexConfiguration";var lq="indexState";var uq="indexEntries";var yx="documentOverlays";var dq="globals";var fq=[ax,cx,lx,sq,dx,sx,hx,fx,gx,ux,px,mx,vx],Dde=[...fq,yx],hq=[ax,cx,lx,aq,dx,sx,hx,fx,gx,ux,px,mx,vx,yx],pq=hq,gq=[...pq,cq,lq,uq];var Sde=[...gq,dq];function vO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _x(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var at=class n{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}},Ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}};zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class n{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fg(this.data.getIterator())}getIteratorFrom(e){return new fg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},fg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xn=class n{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new n([])}unionWith(e){let t=new kt(Bn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nn.EMPTY_BYTE_STRING=new nn("");var mq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(ze(!!n,39018),typeof n=="string"){let e=0,t=mq.exec(n);if(ze(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}var Ex="server_timestamp",Cx="__type__",wx="__previous_value__",Ix="__local_write_time__";function Yw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cx])===null||t===void 0?void 0:t.stringValue)===Ex}function qg(n){let e=n.mapValue.fields[wx];return Yw(e)?qg(e):e}function Nu(n){let e=Ci(n.mapValue.fields[Ix].timestampValue);return new bt(e.seconds,e.nanos)}var vC=class{constructor(e,t,r,i,o,s,a,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}},pg="(default)",gg=class n{constructor(e,t){this.projectId=e,this.database=t||pg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===pg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Qw="__type__",bx="__max__",rg={mapValue:{fields:{__type__:{stringValue:bx}}}},Zw="__vector__",Xa="value";function co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yw(n)?4:Dx(n)?9007199254740991:Tx(n)?10:11:ae(28295,{value:n})}function Wr(n,e){if(n===e)return!0;let t=co(n);if(t!==co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nu(n).isEqual(Nu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ci(i.timestampValue),a=Ci(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return tt(i.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return tt(i.integerValue)===tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=tt(i.doubleValue),a=tt(o.doubleValue);return s===a?xu(s)===xu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(vO(s)!==vO(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Wr(s[l],a[l])))return!1;return!0})(n,e);default:return ae(52216,{left:n})}}function ku(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function ec(n,e){if(n===e)return 0;let t=co(n),r=co(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=tt(o.integerValue||o.doubleValue),l=tt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return yO(n.timestampValue,e.timestampValue);case 4:return yO(Nu(n),Nu(e));case 5:return pC(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=wi(o),l=wi(s);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let f=Te(a[u],l[u]);if(f!==0)return f}return Te(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Te(tt(o.latitude),tt(s.latitude));return a!==0?a:Te(tt(o.longitude),tt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return _O(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,l,u,f;let p=o.fields||{},g=s.fields||{},_=(a=p[Xa])===null||a===void 0?void 0:a.arrayValue,T=(l=g[Xa])===null||l===void 0?void 0:l.arrayValue,x=Te(((u=_?.values)===null||u===void 0?void 0:u.length)||0,((f=T?.values)===null||f===void 0?void 0:f.length)||0);return x!==0?x:_O(_,T)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===rg.mapValue&&s===rg.mapValue)return 0;if(o===rg.mapValue)return 1;if(s===rg.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let g=pC(l[p],f[p]);if(g!==0)return g;let _=ec(a[l[p]],u[f[p]]);if(_!==0)return _}return Te(l.length,f.length)})(n.mapValue,e.mapValue);default:throw ae(23264,{le:t})}}function yO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=Ci(n),r=Ci(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function _O(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ec(t[i],r[i]);if(o)return o}return Te(t.length,r.length)}function tc(n){return yC(n)}function yC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ci(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=yC(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${yC(t.fields[s])}`;return i+"}"})(n.mapValue):ae(61005,{value:n})}function sg(n){switch(co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qg(n);return e?16+sg(e):16;case 5:return 2*n.stringValue.length;case 6:return wi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+sg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return fo(r.fields,(o,s)=>{i+=o.length+sg(s)}),i})(n.mapValue);default:throw ae(13486,{value:n})}}function EO(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _C(n){return!!n&&"integerValue"in n}function Jw(n){return!!n&&"arrayValue"in n}function CO(n){return!!n&&"nullValue"in n}function wO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ag(n){return!!n&&"mapValue"in n}function Tx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Qw])===null||t===void 0?void 0:t.stringValue)===Zw}function Su(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Su(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Dx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===bx}var Mde={mapValue:{fields:{[Qw]:{stringValue:Zw},[Xa]:{arrayValue:{}}}}};var jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Su(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ag(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Su(this.value))}};function Sx(n){let e=[];return fo(n.fields,(t,r)=>{let i=new Bn([t]);if(ag(r)){let o=Sx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xn(e)}var vr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ce.min(),Ce.min(),Ce.min(),jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ce.min(),Ce.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ce.min(),Ce.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nc=class{constructor(e,t){this.position=e,this.inclusive=t}};function IO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),t.key):r=ec(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var rc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var mg=class{},wt=class n extends mg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CC(e,t,r):t==="array-contains"?new bC(e,r):t==="in"?new TC(e,r):t==="not-in"?new DC(e,r):t==="array-contains-any"?new SC(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wC(e,r):new IC(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ec(t,this.value)):t!==null&&co(this.value)===co(t)&&this.matchesComparison(ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yr=class n extends mg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Ax(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Ax(n){return n.op==="and"}function Mx(n){return yq(n)&&Ax(n)}function yq(n){for(let e of n.filters)if(e instanceof yr)return!1;return!0}function EC(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+tc(n.value);if(Mx(n))return n.filters.map(e=>EC(e)).join(",");{let e=n.filters.map(t=>EC(t)).join(",");return`${n.op}(${e})`}}function Rx(n,e){return n instanceof wt?(function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)})(n,e):n instanceof yr?(function(r,i){return i instanceof yr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Rx(s,i.filters[a]),!0):!1})(n,e):void ae(19439)}function Px(n){return n instanceof wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${tc(t.value)}`})(n):n instanceof yr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Px).join(" ,")+"}"})(n):"Filter"}var CC=class extends wt{constructor(e,t,r){super(e,t,r),this.key=ie.fromName(r.referenceValue)}matches(e){let t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}},wC=class extends wt{constructor(e,t){super(e,"in",t),this.keys=Ox("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},IC=class extends wt{constructor(e,t){super(e,"not-in",t),this.keys=Ox("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ox(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ie.fromName(r.referenceValue))}var bC=class extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jw(t)&&ku(t.arrayValue,this.value)}},TC=class extends wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ku(this.value.arrayValue,t)}},DC=class extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ku(this.value.arrayValue,t)}},SC=class extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}};var AC=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function TO(n,e=null,t=[],r=[],i=null,o=null,s=null){return new AC(n,e,t,r,i,o,s)}function Xw(n){let e=ye(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>EC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Hg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tc(r)).join(",")),e.Pe=t}return e.Pe}function eI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Rx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bO(n.startAt,e.startAt)&&bO(n.endAt,e.endAt)}function MC(n){return ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Is=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function _q(n,e,t,r,i,o,s,a){return new Is(n,e,t,r,i,o,s,a)}function tI(n){return new Is(n)}function DO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xx(n){return n.collectionGroup!==null}function Au(n){let e=ye(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new kt(Bn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new rc(o,r))}),t.has(Bn.keyField().canonicalString())||e.Te.push(new rc(Bn.keyField(),r))}return e.Te}function $r(n){let e=ye(n);return e.Ie||(e.Ie=Eq(e,Au(n))),e.Ie}function Eq(n,e){if(n.limitType==="F")return TO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new rc(i.field,o)});let t=n.endAt?new nc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nc(n.startAt.position,n.startAt.inclusive):null;return TO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function RC(n,e){let t=n.filters.concat([e]);return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function PC(n,e,t){return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wg(n,e){return eI($r(n),$r(e))&&n.limitType===e.limitType}function Nx(n){return`${Xw($r(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Px(i)).join(", ")}]`),Hg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tc(i)).join(",")),`Target(${r})`})($r(n))}; limitType=${n.limitType})`}function Gg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Au(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,l){let u=IO(s,a,l);return s.inclusive?u<=0:u<0})(r.startAt,Au(r),i)||r.endAt&&!(function(s,a,l){let u=IO(s,a,l);return s.inclusive?u>=0:u>0})(r.endAt,Au(r),i))})(n,e)}function Cq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kx(n){return(e,t)=>{let r=!1;for(let i of Au(n)){let o=wq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wq(n,e,t){let r=n.field.isKeyField()?ie.comparator(e.key,t.key):(function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?ec(l,u):ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:n.dir})}}var Ii=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return _x(this.inner)}size(){return this.innerSize}};var Iq=new at(ie.comparator);function bi(){return Iq}var Fx=new at(ie.comparator);function Du(...n){let e=Fx;for(let t of n)e=e.insert(t.key,t);return e}function Lx(n){let e=Fx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return Mu()}function Vx(){return Mu()}function Mu(){return new Ii(n=>n.toString(),(n,e)=>n.isEqual(e))}var bq=new at(ie.comparator),Tq=new kt(ie.comparator);function Ae(...n){let e=Tq;for(let t of n)e=e.add(t);return e}var Dq=new kt(Te);function Sq(){return Dq}function nI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xu(e)?"-0":e}}function Ux(n){return{integerValue:""+n}}function Aq(n,e){return rq(e)?Ux(e):nI(n,e)}var ic=class{constructor(){this._=void 0}};function Mq(n,e,t){return n instanceof oc?(function(i,o){let s={fields:{[Cx]:{stringValue:Ex},[Ix]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Yw(o)&&(o=qg(o)),o&&(s.fields[wx]=o),{mapValue:s}})(t,e):n instanceof bs?Bx(n,e):n instanceof Ts?zx(n,e):(function(i,o){let s=jx(i,o),a=SO(s)+SO(i.Ee);return _C(s)&&_C(i.Ee)?Ux(a):nI(i.serializer,a)})(n,e)}function Rq(n,e,t){return n instanceof bs?Bx(n,e):n instanceof Ts?zx(n,e):t}function jx(n,e){return n instanceof sc?(function(r){return _C(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var oc=class extends ic{},bs=class extends ic{constructor(e){super(),this.elements=e}};function Bx(n,e){let t=$x(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ts=class extends ic{constructor(e){super(),this.elements=e}};function zx(n,e){let t=$x(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var sc=class extends ic{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function SO(n){return tt(n.integerValue||n.doubleValue)}function $x(n){return Jw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Pq(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof bs&&i instanceof bs||r instanceof Ts&&i instanceof Ts?Ja(r.elements,i.elements,Wr):r instanceof sc&&i instanceof sc?Wr(r.Ee,i.Ee):r instanceof oc&&i instanceof oc})(n.transform,e.transform)}var OC=class{constructor(e,t){this.version=e,this.transformResults=t}},Hr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ac=class{};function Hx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fu(n.key,Hr.none()):new Ds(n.key,n.data,Hr.none());{let t=n.data,r=jn.empty(),i=new kt(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Gr(n.key,r,new Xn(i.toArray()),Hr.none())}}function Oq(n,e,t){n instanceof Ds?(function(i,o,s){let a=i.value.clone(),l=MO(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Gr?(function(i,o,s){if(!cg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MO(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(qx(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ru(n,e,t,r){return n instanceof Ds?(function(o,s,a,l){if(!cg(o.precondition,s))return a;let u=o.value.clone(),f=RO(o.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Gr?(function(o,s,a,l){if(!cg(o.precondition,s))return a;let u=RO(o.fieldTransforms,l,s),f=s.data;return f.setAll(qx(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return cg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function xq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=jx(r.transform,i||null);o!=null&&(t===null&&(t=jn.empty()),t.set(r.field,o))}return t||null}function AO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,(o,s)=>Pq(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ds=class extends ac{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Gr=class extends ac{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function qx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MO(n,e,t){let r=new Map;ze(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Rq(s,a,t[i]))}return r}function RO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Mq(o,s,e))}return r}var Fu=class extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xC=class extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var NC=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Oq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ru(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ru(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Vx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=Hx(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(t,r)=>AO(t,r))&&Ja(this.baseMutations,e.baseMutations,(t,r)=>AO(t,r))}},kC=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ze(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return bq})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var FC=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var LC=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Et,Pe;function Nq(n){switch(n){case L.OK:return ae(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return ae(15467,{code:n})}}function Wx(n){if(n===void 0)return Ei("GRPC error has no .code"),L.UNKNOWN;switch(n){case Et.OK:return L.OK;case Et.CANCELLED:return L.CANCELLED;case Et.UNKNOWN:return L.UNKNOWN;case Et.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Et.INTERNAL:return L.INTERNAL;case Et.UNAVAILABLE:return L.UNAVAILABLE;case Et.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Et.NOT_FOUND:return L.NOT_FOUND;case Et.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Et.ABORTED:return L.ABORTED;case Et.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Et.DATA_LOSS:return L.DATA_LOSS;default:return ae(39323,{code:n})}}(Pe=Et||(Et={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var PO=null;var kq=new yi([4294967295,4294967295],0);function OO(n){let e=nx().encode(n),t=new J0;return t.update(e),new Uint8Array(t.digest())}function xO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([t,r],0),new yi([i,o],0)]}var VC=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vs(`Invalid padding: ${t}`);if(r<0)throw new vs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=yi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(yi.fromNumber(r)));return i.compare(kq)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=OO(e),[r,i]=xO(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=OO(e),[r,i]=xO(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},vs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var vg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ce.min(),i,new at(Te),bi(),Ae())}},Lu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ae(),Ae(),Ae())}};var Qa=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},yg=class{constructor(e,t){this.targetId=e,this.De=t}},_g=class{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Eg=class{constructor(){this.ve=0,this.Ce=NO(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ae(),t=Ae(),r=Ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:o})}}),new Lu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=NO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},UC=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=bi(),this.je=ig(),this.Je=ig(),this.He=new at(Te)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(MC(o))if(r===0){let s=new ie(o.path);this.Xe(t,s,vr.newNoDocument(s,Ce.min()))}else ze(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),l=a?this.ut(a,e,s):1;if(l!==0){this.rt(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}PO?.ct((function(f,p,g,_,T){var x,N,j,ne,le,Ne;let Lt={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},$e=p.unchangedNames;return $e&&(Lt.bloomFilter={applied:T===0,hashCount:(x=$e?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(ne=(j=(N=$e?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&ne!==void 0?ne:0,padding:(Ne=(le=$e?.bits)===null||le===void 0?void 0:le.padding)!==null&&Ne!==void 0?Ne:0,mightContain:S=>{var E;return(E=_?.mightContain(S))!==null&&E!==void 0&&E}}),Lt})(s,e.De,this.We.lt(),a,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(l){if(l instanceof hg)return ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new VC(s,i,o)}catch(l){return ao(l instanceof vs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&MC(a.target)){let l=new ie(a.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,vr.newNoDocument(l,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new vg(e,t,this.He,this.ze,r);return this.ze=bi(),this.je=ig(),this.Je=ig(),this.He=new at(Te),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Eg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new kt(Te),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new kt(Te),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Eg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function ig(){return new at(ie.comparator)}function NO(){return new at(ie.comparator)}var Fq={asc:"ASCENDING",desc:"DESCENDING"},Lq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vq={and:"AND",or:"OR"},jC=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function BC(n,e){return n.useProto3Json||Hg(e)?e:{value:e}}function Cg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Uq(n,e){return Cg(n,e.toTimestamp())}function qr(n){return ze(!!n,49232),Ce.fromTimestamp((function(t){let r=Ci(t);return new bt(r.seconds,r.nanos)})(n))}function rI(n,e){return zC(n,e).canonicalString()}function zC(n,e){let t=(function(i){return new nt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Kx(n){let e=nt.fromString(n);return ze(Xx(e),10190,{key:e.toString()}),e}function $C(n,e){return rI(n.databaseId,e.path)}function iC(n,e){let t=Kx(e);if(t.get(1)!==n.databaseId.projectId)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ie(Qx(t))}function Yx(n,e){return rI(n.databaseId,e)}function jq(n){let e=Kx(n);return e.length===4?nt.emptyPath():Qx(e)}function HC(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qx(n){return ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kO(n,e,t){return{name:$C(n,e),fields:t.value.mapValue.fields}}function Bq(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,f){return u.useProto3Json?(ze(f===void 0||typeof f=="string",58123),nn.fromBase64String(f||"")):(ze(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),nn.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let f=u.code===void 0?L.UNKNOWN:Wx(u.code);return new K(f,u.message||"")})(s);t=new _g(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=iC(n,r.document.name),o=qr(r.document.updateTime),s=r.document.createTime?qr(r.document.createTime):Ce.min(),a=new jn({mapValue:{fields:r.document.fields}}),l=vr.newFoundDocument(i,o,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Qa(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=iC(n,r.document),o=r.readTime?qr(r.readTime):Ce.min(),s=vr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Qa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=iC(n,r.document),o=r.removedTargetIds||[];t=new Qa([],o,i,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new LC(i,o),a=r.targetId;t=new yg(a,s)}}return t}function zq(n,e){let t;if(e instanceof Ds)t={update:kO(n,e.key,e.value)};else if(e instanceof Fu)t={delete:$C(n,e.key)};else if(e instanceof Gr)t={update:kO(n,e.key,e.data),updateMask:Zq(e.fieldMask)};else{if(!(e instanceof xC))return ae(16599,{Rt:e.type});t={verify:$C(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof oc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ae(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Uq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae(27497)})(n,e.precondition)),t}function $q(n,e){return n&&n.length>0?(ze(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?qr(i.updateTime):qr(o);return s.isEqual(Ce.min())&&(s=qr(o)),new OC(s,i.transformResults||[])})(t,e))):[]}function Hq(n,e){return{documents:[Yx(n,e.path)]}}function qq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Yx(n,i);let o=(function(u){if(u.length!==0)return Jx(yr.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(f=>(function(g){return{field:Ga(g.field),direction:Kq(g.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=BC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function Wq(n){let e=jq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ze(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(p){let g=Zx(p);return g instanceof yr&&Mx(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(T){return new rc(Ka(T.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Hg(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(p){let g=!!p.before,_=p.values||[];return new nc(_,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let g=!p.before,_=p.values||[];return new nc(_,g)})(t.endAt)),_q(e,i,s,o,a,"F",l,u)}function Gq(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ka(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ka(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ka(t.unaryFilter.field);return wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ka(t.unaryFilter.field);return wt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wt.create(Ka(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yr.create(t.compositeFilter.filters.map(r=>Zx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}})(t.compositeFilter.op))})(n):ae(30097,{filter:n})}function Kq(n){return Fq[n]}function Yq(n){return Lq[n]}function Qq(n){return Vq[n]}function Ga(n){return{fieldPath:n.canonicalString()}}function Ka(n){return Bn.fromServerFormat(n.fieldPath)}function Jx(n){return n instanceof wt?(function(t){if(t.op==="=="){if(wO(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NAN"}};if(CO(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wO(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NAN"}};if(CO(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(t.field),op:Yq(t.op),value:t.value}}})(n):n instanceof yr?(function(t){let r=t.getFilters().map(i=>Jx(i));return r.length===1?r[0]:{compositeFilter:{op:Qq(t.op),filters:r}}})(n):ae(54877,{filter:n})}function Zq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Xx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Vu=class n{constructor(e,t,r,i,o=Ce.min(),s=Ce.min(),a=nn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qC=class{constructor(e){this.gt=e}};function Jq(n){let e=Wq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?PC(e,e.limit,"L"):e}var wg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),xu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Ci(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(wi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Dx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Tx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ae(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Xa,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(tt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ie.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};wg.Ut=new wg;var WC=class{constructor(){this.Dn=new GC}addToCollectionParentIndex(e,t){return this.Dn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(ws.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},GC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kt(nt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(nt.comparator)).toArray()}};var Rde=new Uint8Array(0);var FO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eN=41943040,Jn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(eN,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);var Uu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var LO="LruGarbageCollector",Xq=1048576;function VO([n,e],[t,r]){let i=Te(n,t);return i===0?Te(e,r):i}var KC=class{constructor(e){this.Tr=e,this.buffer=new kt(VO),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();VO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},YC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Y(LO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hc(t)?Y(LO,"Ignoring IndexedDB error during garbage collection: ",t):await fc(t)}await this.Rr(3e5)})}},QC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(Gw.ue);let r=new KC(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(FO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,l,u,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),qa()<=De.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function e8(n,e){return new QC(n,e)}var ZC=class{constructor(){this.changes=new Ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var JC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var XC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ru(r.mutation,i,Xn.empty(),bt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ae()){let i=ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Du();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=bi(),s=Mu(),a=(function(){return Mu()})();return t.forEach((l,u)=>{let f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Gr)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Ru(f.mutation,u,f.mutation.getFieldMask(),bt.now())):s.set(u.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,f)=>s.set(u,f)),t.forEach((u,f)=>{var p;return a.set(u,new JC(f,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Mu(),i=new at((s,a)=>s-a),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let f=r.get(l)||Xn.empty();f=a.applyToLocalView(u,f),r.set(l,f);let p=(i.get(a.batchId)||Ae()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,f=l.value,p=Vx();f.forEach(g=>{if(!o.has(g)){let _=Hx(t.get(g),r.get(g));_!==null&&p.set(g,_),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(ms()),a=Ou,l=o;return s.next(u=>U.forEach(u,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{l=l.insert(f,g)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ae())).next(f=>({batchId:a,changes:Lx(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(r=>{let i=Du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Du();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{let u=(function(p,g){return new Is(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,vr.newInvalidDocument(f)))});let a=Du();return s.forEach((l,u)=>{let f=o.get(l);f!==void 0&&Ru(f.mutation,u,Xn.empty(),bt.now()),Gg(t,u)&&(a=a.insert(l,u))}),a})}};var ew=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return U.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:qr(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Jq(i.bundledQuery),readTime:qr(i.readTime)}})(t)),U.resolve()}};var tw=class{constructor(){this.overlays=new at(ie.comparator),this.kr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ms();return U.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=ms(),o=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new at((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=ms(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let a=ms(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return U.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new FC(t,r));let o=this.kr.get(t);o===void 0&&(o=Ae(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var nw=class{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var ju=class{constructor(){this.qr=new kt(Ct.Qr),this.$r=new kt(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ie(new nt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ie(new nt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=Ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ct(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ie.comparator(e.key,t.key)||Te(e.Hr,t.Hr)}static Ur(e,t){return Te(e.Hr,t.Hr)||ie.comparator(e.key,t.key)}};var rw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new kt(Ct.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new NC(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Kw:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(Te);return t.forEach(i=>{let o=new Ct(i,0),s=new Ct(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new Ct(new ie(o),0),a=new kt(Te);return this.Yr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},s),U.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ze(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(t.mutations,i=>{let o=new Ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iw=class{constructor(e){this.ni=e,this.docs=(function(){return new at(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():vr.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bi(),s=t.path,a=new ie(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||eq(X5(f),r)<=0||(i.has(f.key)||Gg(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ae(9500)}ri(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ow(this)}getSize(e){return U.resolve(this.size)}},ow=class extends ZC{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var sw=class{constructor(e){this.persistence=e,this.ii=new Ii(t=>Xw(t),eI),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new ju,this.targetCount=0,this._i=Uu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),U.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Uu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.hr(t),U.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this.oi.containsKey(t))}};var Ig=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Gw(0),this.ci=!1,this.ci=!0,this.li=new nw,this.referenceDelegate=e(this),this.hi=new sw(this),this.indexManager=new WC,this.remoteDocumentCache=(function(i){return new iw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new qC(t),this.Ti=new ew(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new rw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Y("MemoryPersistence","Starting transaction:",e);let i=new aw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},aw=class extends mC{constructor(e){super(),this.currentSequenceNumber=e}},cw=class n{constructor(e){this.persistence=e,this.Ai=new ju,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=ie.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return U.or([()=>U.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},bg=class n{constructor(e,t){this.persistence=e,this.gi=new Ii(r=>iq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=e8(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),U.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sg(e.data.value)),t}Sr(e,t,r){return U.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ae(),i=Ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var dw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return d1()?8:nq(Un())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new uw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(qa()<=De.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(qa()<=De.DEBUG&&Y("QueryEngine","Query:",Wa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(qa()<=De.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):U.resolve())}ps(e,t){if(DO(t))return U.resolve(null);let r=$r(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=PC(t,null,"F"),r=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,a);return this.Ds(t,u,s,l.readTime)?this.ps(e,PC(t,null,"F")):this.vs(e,u,t,l)}))})))}ys(e,t,r,i){return DO(t)||i.isEqual(Ce.min())?U.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?U.resolve(null):(qa()<=De.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wa(t)),this.vs(e,s,t,J5(i,Ou)).next(a=>a))})}bs(e,t){let r=new kt(kx(e));return t.forEach((i,o)=>{Gg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return qa()<=De.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iI="LocalStore",t8=3e8,fw=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new at(Te),this.Ms=new Ii(o=>Xw(o),eI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function n8(n,e,t,r){return new fw(n,e,t,r)}async function tN(n,e){let t=ye(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Ae();for(let u of i){s.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of o){a.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})}function r8(n,e){let t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,f){let p=u.batch,g=p.keys(),_=U.resolve();return g.forEach(T=>{_=_.next(()=>f.getEntry(l,T)).next(x=>{let N=u.docVersions.get(T);ze(N!==null,48541),x.version.compareTo(N)<0&&(p.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),f.addEntry(x)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nN(n){let e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function i8(n,e){let t=ye(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,p)));let _=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),(function(x,N,j){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=t8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,_,f)&&a.push(t.hi.updateTargetData(o,_))});let l=bi(),u=Ae();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(o8(o,s,e.documentUpdates).next(f=>{l=f.Ls,u=f.ks})),!r.isEqual(Ce.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Fs=i,o))}function o8(n,e,t){let r=Ae(),i=Ae();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=bi();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Y(iI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function s8(n,e){let t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a8(n,e){let t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Vu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function hw(n,e,t){let r=ye(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!hc(s))throw s;Y(iI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function UO(n,e,t){let r=ye(n),i=Ce.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(l,u,f){let p=ye(l),g=p.Ms.get(f);return g!==void 0?U.resolve(p.Fs.get(g)):p.hi.getTargetData(u,f)})(r,s,$r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:Ce.min(),t?o:Ae())).next(a=>(c8(r,Cq(e),a),{documents:a,qs:o})))}function c8(n,e,t){let r=n.xs.get(e)||Ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Tg=class{constructor(){this.activeTargetIds=Sq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pw=class{constructor(){this.Fo=new Tg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Tg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gw=class{xo(e){}shutdown(){}};var jO="ConnectivityMonitor",Dg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Y(jO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){Y(jO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var og=null;function mw(){return og===null?og=(function(){return 268435456+Math.round(2147483648*Math.random())})():og++,"0x"+og.toString(16)}var oC="RestConnection",l8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===pg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=mw(),a=this.Go(e,t.toUriEncodedString());Y(oC,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:u}=new URL(a),f=ss(u);return this.jo(e,a,l,r,f).then(p=>(Y(oC,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ao(oC,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=l8[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var yw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var tn="WebChannelConnection",_w=class extends vw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=mw();return new Promise((a,l)=>{let u=new X0;u.setWithCredentials(!0),u.listenOnce(eC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tu.NO_ERROR:let p=u.getResponseJson();Y(tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Tu.TIMEOUT:Y(tn,`RPC '${e}' ${s} timed out`),l(new K(L.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:let g=u.getStatus();if(Y(tn,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);let T=_?.error;if(T&&T.status&&T.message){let x=(function(j){let ne=j.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(ne)>=0?ne:L.UNKNOWN})(T.status);l(new K(x,T.message))}else l(new K(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(L.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{Y(tn,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);Y(tn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",f,r,15)})}P_(e,t,r){let i=mw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=rC(),a=nC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=o.join("");Y(tn,`Creating RPC '${e}' stream ${i}: ${f}`,l);let p=s.createWebChannel(f,l);this.T_(p);let g=!1,_=!1,T=new yw({Ho:N=>{_?Y(tn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(Y(tn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Y(tn,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),x=(N,j,ne)=>{N.listen(j,le=>{try{ne(le)}catch(Ne){setTimeout(()=>{throw Ne},0)}})};return x(p,Ha.EventType.OPEN,()=>{_||(Y(tn,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),x(p,Ha.EventType.CLOSE,()=>{_||(_=!0,Y(tn,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),x(p,Ha.EventType.ERROR,N=>{_||(_=!0,ao(tn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.__(new K(L.UNAVAILABLE,"The operation could not be completed")))}),x(p,Ha.EventType.MESSAGE,N=>{var j;if(!_){let ne=N.data[0];ze(!!ne,16349);let le=ne,Ne=le?.error||((j=le[0])===null||j===void 0?void 0:j.error);if(Ne){Y(tn,`RPC '${e}' stream ${i} received error:`,Ne);let Lt=Ne.status,$e=(function(I){let D=Et[I];if(D!==void 0)return Wx(D)})(Lt),S=Ne.message;$e===void 0&&($e=L.INTERNAL,S="Unknown error status: "+Lt+" with message "+Ne.message),_=!0,T.__(new K($e,S)),p.close()}else Y(tn,`RPC '${e}' stream ${i} received:`,ne),T.a_(ne)}}),x(a,tC.STAT_EVENT,N=>{N.stat===ng.PROXY?Y(tn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ng.NOPROXY&&Y(tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function sC(){return typeof document<"u"?document:null}function Kg(n){return new jC(n,!0)}var Sg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var BO="PersistentStream",Ag=class{constructor(e,t,r,i,o,s,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Sg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(Ei(t.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new K(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Y(BO,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Y(BO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ew=class extends Ag{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Bq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?qr(s.readTime):Ce.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=HC(this.serializer),t.addTarget=(function(o,s){let a,l=s.target;if(a=MC(l)?{documents:Hq(o,l)}:{query:qq(o,l).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Gx(o,s.resumeToken);let u=BC(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ce.min())>0){a.readTime=Cg(o,s.snapshotVersion.toTimestamp());let u=BC(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=Gq(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=HC(this.serializer),t.removeTarget=e,this.k_(t)}},Cw=class extends Ag{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=$q(e.writeResults,e.commitTime),r=qr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=HC(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>zq(this.serializer,r))};this.k_(t)}};var ww=class{},Iw=class extends ww{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,zC(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(L.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,zC(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(L.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},bw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ei(t),this._a=!1):Y("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ss="RemoteStore",Tw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ms(this)&&(Y(Ss,"Restarting streams for network reachability change."),await(async function(l){let u=ye(l);u.Ia.add(4),await qu(u),u.Aa.set("Unknown"),u.Ia.delete(4),await Yg(u)})(this))})}),this.Aa=new bw(r,i)}};async function Yg(n){if(Ms(n))for(let e of n.da)await e(!0)}async function qu(n){for(let e of n.da)await e(!1)}function rN(n,e){let t=ye(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),cI(t)?aI(t):pc(t).x_()&&sI(t,e))}function oI(n,e){let t=ye(n),r=pc(t);t.Ta.delete(e),r.x_()&&iN(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ms(t)&&t.Aa.set("Unknown"))}function sI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pc(n).H_(e)}function iN(n,e){n.Ra.$e(e),pc(n).Y_(e)}function aI(n){n.Ra=new UC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),pc(n).start(),n.Aa.aa()}function cI(n){return Ms(n)&&!pc(n).M_()&&n.Ta.size>0}function Ms(n){return ye(n).Ia.size===0}function oN(n){n.Ra=void 0}async function u8(n){n.Aa.set("Online")}async function d8(n){n.Ta.forEach((e,t)=>{sI(n,e)})}async function f8(n,e){oN(n),cI(n)?(n.Aa.la(e),aI(n)):n.Aa.set("Unknown")}async function h8(n,e,t){if(n.Aa.set("Online"),e instanceof _g&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){Y(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mg(n,r)}else if(e instanceof Qa?n.Ra.Ye(e):e instanceof yg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ce.min()))try{let r=await nN(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.Ta.get(u);f&&o.Ta.set(u,f.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let f=o.Ta.get(l);if(!f)return;o.Ta.set(l,f.withResumeToken(nn.EMPTY_BYTE_STRING,f.snapshotVersion)),iN(o,l);let p=new Vu(f.target,l,u,f.sequenceNumber);sI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){Y(Ss,"Failed to raise snapshot:",r),await Mg(n,r)}}async function Mg(n,e,t){if(!hc(e))throw e;n.Ia.add(1),await qu(n),n.Aa.set("Offline"),t||(t=()=>nN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Y(Ss,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Yg(n)})}function sN(n,e){return e().catch(t=>Mg(n,t,e))}async function Qg(n){let e=ye(n),t=lo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Kw;for(;p8(e);)try{let i=await s8(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,g8(e,i)}catch(i){await Mg(e,i)}aN(e)&&cN(e)}function p8(n){return Ms(n)&&n.Pa.length<10}function g8(n,e){n.Pa.push(e);let t=lo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function aN(n){return Ms(n)&&!lo(n).M_()&&n.Pa.length>0}function cN(n){lo(n).start()}async function m8(n){lo(n).na()}async function v8(n){let e=lo(n);for(let t of n.Pa)e.X_(t.mutations)}async function y8(n,e,t){let r=n.Pa.shift(),i=kC.from(r,e,t);await sN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Qg(n)}async function _8(n,e){e&&lo(n).Z_&&await(async function(r,i){if((function(s){return Nq(s)&&s!==L.ABORTED})(i.code)){let o=r.Pa.shift();lo(r).N_(),await sN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Qg(r)}})(n,e),aN(n)&&cN(n)}async function zO(n,e){let t=ye(n);t.asyncQueue.verifyOperationInProgress(),Y(Ss,"RemoteStore received new credentials");let r=Ms(t);t.Ia.add(3),await qu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Yg(t)}async function E8(n,e){let t=ye(n);e?(t.Ia.delete(2),await Yg(t)):e||(t.Ia.add(2),await qu(t),t.Aa.set("Unknown"))}function pc(n){return n.Va||(n.Va=(function(t,r,i){let o=ye(t);return o.ia(),new Ew(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:u8.bind(null,n),e_:d8.bind(null,n),n_:f8.bind(null,n),J_:h8.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),cI(n)?aI(n):n.Aa.set("Unknown")):(await n.Va.stop(),oN(n))})),n.Va}function lo(n){return n.ma||(n.ma=(function(t,r,i){let o=ye(t);return o.ia(),new Cw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:m8.bind(null,n),n_:_8.bind(null,n),ea:v8.bind(null,n),ta:y8.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Qg(n)):(await n.ma.stop(),n.Pa.length>0&&(Y(Ss,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var Dw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lI(n,e){if(Ei("AsyncQueue",`${e}: ${n}`),hc(n))return new K(L.UNAVAILABLE,`${e}: ${n}`);throw n}var Rg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ie.comparator(t.key,r.key):(t,r)=>ie.comparator(t.key,r.key),this.keyedMap=Du(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Pg=class{constructor(){this.fa=new at(ie.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ae(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},cc=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Rg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Sw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Aw=class{constructor(){this.queries=$O(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ye(t),o=i.queries;i.queries=$O(),o.forEach((s,a)=>{for(let l of a.wa)l.onError(r)})})(this,new K(L.ABORTED,"Firestore shutting down"))}};function $O(){return new Ii(n=>Nx(n),Wg)}async function lN(n,e){let t=ye(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Sw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=lI(s,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&uI(t)}async function uN(n,e){let t=ye(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function C8(n,e){let t=ye(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&uI(t)}function w8(n,e,t){let r=ye(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function uI(n){n.Da.forEach(e=>{e.next()})}var Mw,HO;(HO=Mw||(Mw={})).Fa="default",HO.Cache="cache";var Og=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Mw.Cache}};var xg=class{constructor(e){this.key=e}},Ng=class{constructor(e){this.key=e}},Rw=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ae(),this.mutatedKeys=Ae(),this.Xa=kx(e),this.eu=new Rg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Pg,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),_=Gg(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),N=!1;g&&_?g.data.isEqual(_.data)?T!==x&&(r.track({type:3,doc:_}),N=!0):this.iu(g,_)||(r.track({type:2,doc:_}),N=!0,(l&&this.Xa(_,l)>0||u&&this.Xa(_,u)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),N=!0):g&&!_&&(r.track({type:1,doc:g}),N=!0,(l||u)&&(a=!0)),N&&(_?(s=s.add(_),o=x?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,p)=>(function(_,T){let x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:N})}};return x(_)-x(T)})(f.type,p.type)||this.Xa(f.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,s.length!==0||u?{snapshot:new cc(this.query,e.eu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Pg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Ng(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new xg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ae();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return cc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},dI="SyncEngine",Pw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ow=class{constructor(e){this.key=e,this.lu=!1}},xw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ii(a=>Nx(a),Wg),this.Tu=new Map,this.Iu=new Set,this.du=new at(ie.comparator),this.Eu=new Map,this.Au=new ju,this.Ru={},this.Vu=new Map,this.mu=Uu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function I8(n,e,t=!0){let r=mN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await dN(r,e,t,!0),i}async function b8(n,e){let t=mN(n);await dN(t,e,!0,!1)}async function dN(n,e,t,r){let i=await a8(n.localStore,$r(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await T8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&rN(n.remoteStore,i),a}async function T8(n,e,t,r,i){n.gu=(p,g,_)=>(async function(x,N,j,ne){let le=N.view.nu(j);le.Ds&&(le=await UO(x.localStore,N.query,!1).then(({documents:S})=>N.view.nu(S,le)));let Ne=ne&&ne.targetChanges.get(N.targetId),Lt=ne&&ne.targetMismatches.get(N.targetId)!=null,$e=N.view.applyChanges(le,x.isPrimaryClient,Ne,Lt);return WO(x,N.targetId,$e._u),$e.snapshot})(n,p,g,_);let o=await UO(n.localStore,e,!0),s=new Rw(e,o.qs),a=s.nu(o.documents),l=Lu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);WO(n,t,u._u);let f=new Pw(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function D8(n,e,t){let r=ye(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Wg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oI(r.remoteStore,i.targetId),Nw(r,i.targetId)}).catch(fc)):(Nw(r,i.targetId),await hw(r.localStore,i.targetId,!0))}async function S8(n,e){let t=ye(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oI(t.remoteStore,r.targetId))}async function A8(n,e,t){let r=k8(n);try{let i=await(function(s,a){let l=ye(s),u=bt.now(),f=a.reduce((_,T)=>_.add(T.key),Ae()),p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let T=bi(),x=Ae();return l.Os.getEntries(_,f).next(N=>{T=N,T.forEach((j,ne)=>{ne.isValidDocument()||(x=x.add(j))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,T)).next(N=>{p=N;let j=[];for(let ne of a){let le=xq(ne,p.get(ne.key).overlayedDocument);le!=null&&j.push(new Gr(ne.key,le,Sx(le.value.mapValue),Hr.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,j,a)}).next(N=>{g=N;let j=N.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(_,N.batchId,j)})}).then(()=>({batchId:g.batchId,changes:Lx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,l){let u=s.Ru[s.currentUser.toKey()];u||(u=new at(Te)),u=u.insert(a,l),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),await Wu(r,i.changes),await Qg(r.remoteStore)}catch(i){let o=lI(i,"Failed to persist write");t.reject(o)}}async function fN(n,e){let t=ye(n);try{let r=await i8(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ze(s.lu,14607):i.removedDocuments.size>0&&(ze(s.lu,42227),s.lu=!1))}),await Wu(t,r,e)}catch(r){await fc(r)}}function qO(n,e,t){let r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let l=ye(s);l.onlineState=a;let u=!1;l.queries.forEach((f,p)=>{for(let g of p.wa)g.va(a)&&(u=!0)}),u&&uI(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M8(n,e,t){let r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new at(ie.comparator);s=s.insert(o,vr.newNoDocument(o,Ce.min()));let a=Ae().add(o),l=new vg(Ce.min(),new Map,new at(Te),s,a);await fN(r,l),r.du=r.du.remove(o),r.Eu.delete(e),fI(r)}else await hw(r.localStore,e,!1).then(()=>Nw(r,e,t)).catch(fc)}async function R8(n,e){let t=ye(n),r=e.batch.batchId;try{let i=await r8(t.localStore,e);pN(t,r,null),hN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Wu(t,i)}catch(i){await fc(i)}}async function P8(n,e,t){let r=ye(n);try{let i=await(function(s,a){let l=ye(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(ze(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})})(r.localStore,e);pN(r,e,t),hN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Wu(r,i)}catch(i){await fc(i)}}function hN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function pN(n,e,t){let r=ye(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Nw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||gN(n,r)})}function gN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(oI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),fI(n))}function WO(n,e,t){for(let r of t)r instanceof xg?(n.Au.addReference(r.key,e),O8(n,r)):r instanceof Ng?(Y(dI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||gN(n,r.key)):ae(19791,{yu:r})}function O8(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Y(dI,"New document in limbo: "+t),n.Iu.add(r),fI(n))}function fI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ie(nt.fromString(e)),r=n.mu.next();n.Eu.set(r,new Ow(t)),n.du=n.du.insert(t,r),rN(n.remoteStore,new Vu($r(tI(t.path)),r,"TargetPurposeLimboResolution",Gw.ue))}}async function Wu(n,e,t){let r=ye(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{s.push(r.gu(l,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=lw.Es(l.targetId,u);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(l,u){let f=ye(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,g=>U.forEach(g.Is,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>U.forEach(g.ds,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!hc(p))throw p;Y(iI,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let _=f.Fs.get(g),T=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(T);f.Fs=f.Fs.insert(g,x)}}})(r.localStore,o))}async function x8(n,e){let t=ye(n);if(!t.currentUser.isEqual(e)){Y(dI,"User change. New user:",e.toKey());let r=await tN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(l=>{l.reject(new K(L.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wu(t,r.Bs)}}function N8(n,e){let t=ye(n),r=t.Eu.get(e);if(r&&r.lu)return Ae().add(r.key);{let i=Ae(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function mN(n){let e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M8.bind(null,e),e.hu.J_=C8.bind(null,e.eventManager),e.hu.pu=w8.bind(null,e.eventManager),e}function k8(n){let e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P8.bind(null,e),e}var vN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return n8(this.persistence,new dw,t.initialUser,this.serializer)}Du(t){return new Ig(cw.Vi,this.serializer)}bu(t){return new pw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),kw=class extends vN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ze(this.persistence.referenceDelegate instanceof bg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new YC(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new Ig(r=>bg.Vi(r,t),this.serializer)}};var F8=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x8.bind(null,this.syncEngine),await E8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Aw})()}createDatastore(t){let r=Kg(t.databaseInfo.databaseId),i=(function(s){return new _w(s)})(t.databaseInfo);return(function(s,a,l,u){return new Iw(s,a,l,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,l){return new Tw(i,o,s,a,l)})(this.localStore,this.datastore,t.asyncQueue,r=>qO(this.syncEngine,r,0),(function(){return Dg.C()?new Dg:new gw})())}createSyncEngine(t,r){return(function(o,s,a,l,u,f,p){let g=new xw(o,s,a,l,u,f);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=ye(o);Y(Ss,"RemoteStore shutting down."),s.Ia.add(5),await qu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var kg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var uo="FirestoreClient",Fw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=Pu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Y(uo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Y(uo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lI(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function aC(n,e){n.asyncQueue.verifyOperationInProgress(),Y(uo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ao("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Y("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ao("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function GO(n,e){n.asyncQueue.verifyOperationInProgress();let t=await L8(n);Y(uo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>zO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>zO(e.remoteStore,i)),n._onlineComponents=e}async function L8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y(uo,"Using user provided OfflineComponentProvider");try{await aC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ao("Error using user provided cache. Falling back to memory cache: "+t),await aC(n,new vN)}}else Y(uo,"Using default OfflineComponentProvider"),await aC(n,new kw(void 0));return n._offlineComponents}async function yN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y(uo,"Using user provided OnlineComponentProvider"),await GO(n,n._uninitializedComponentsProvider._online)):(Y(uo,"Using default OnlineComponentProvider"),await GO(n,new F8))),n._onlineComponents}function V8(n){return yN(n).then(e=>e.syncEngine)}async function Lw(n){let e=await yN(n),t=e.eventManager;return t.onListen=I8.bind(null,e.syncEngine),t.onUnlisten=D8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=b8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S8.bind(null,e.syncEngine),t}function U8(n,e,t={}){let r=new Br;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,l,u){let f=new kg({next:g=>{f.Ou(),s.enqueueAndForget(()=>uN(o,p)),g.fromCache&&l.source==="server"?u.reject(new K(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new Og(a,f,{includeMetadataChanges:!0,ka:!0});return lN(o,p)})(await Lw(n),n.asyncQueue,e,t,r)),r.promise}function _N(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var KO=new Map;var EN="firestore.googleapis.com",YO=!0,Fg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EN,this.ssl=YO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:YO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Xq)throw new K(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_N((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new cC;switch(r.type){case"firstParty":return new fC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=KO.get(t);r&&(Y("ComponentProvider","Removing Datastore"),KO.delete(t),r.terminate())})(this),Promise.resolve()}};function CN(n,e,t,r={}){var i;n=er(n,lc);let o=ss(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(h0(`https://${l}`),p0("Firestore",!0)),s.host!==EN&&s.host!==l&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!as(u,a)&&(n._setSettings(u),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Nt.MOCK_USER;else{f=s1(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nt(g)}n._authCredentials=new lC(new lg(f,p))}}var As=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Hu(t,n._jsonSchema))return new n(e,r||null,new ie(nt.fromString(t.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:It("string",Ft._jsonSchemaVersion),referencePath:It("string")};var ro=class n extends As{constructor(e,t,r){super(e,t,tI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function wN(n,e,...t){if(n=$t(n),rx("collection","path",e),n instanceof lc){let r=nt.fromString(e,...t);return hO(r),new ro(n,null,r)}{if(!(n instanceof Ft||n instanceof ro))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return hO(r),new ro(n.firestore,null,r)}}function hI(n,e,...t){if(n=$t(n),arguments.length===1&&(e=Pu.newId()),rx("doc","path",e),n instanceof lc){let r=nt.fromString(e,...t);return fO(r),new Ft(n,null,new ie(r))}{if(!(n instanceof Ft||n instanceof ro))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(nt.fromString(e,...t));return fO(r),new Ft(n.firestore,n instanceof ro?n.converter:null,new ie(r))}}var QO="AsyncQueue",Lg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Sg(this,"async_queue_retry"),this.oc=()=>{let r=sC();r&&Y(QO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=sC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=sC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Br;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hc(e))throw e;Y(QO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ei("INTERNAL UNHANDLED ERROR: ",ZO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Dw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ae(47125,{hc:ZO(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function ZO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function JO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Kr=class extends lc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Lg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Lg(e),this._firestoreClient=void 0,await e}}};function IN(n,e){let t=typeof n=="object"?n:Ba(),r=typeof n=="string"?n:e||pg,i=Lp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=i1("firestore");o&&CN(i,...o)}return i}function pI(n){if(n._terminated)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||j8(n),n._firestoreClient}function j8(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,l,u,f){return new vC(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,_N(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}var io=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nn.fromBase64String(e))}catch(t){throw new K(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};io._jsonSchemaVersion="firestore/bytes/1.0",io._jsonSchema={type:It("string",io._jsonSchemaVersion),bytes:It("string")};var uc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bu=class{constructor(e){this._methodName=e}};var oo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};oo._jsonSchemaVersion="firestore/geoPoint/1.0",oo._jsonSchema={type:It("string",oo._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};var so=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new K(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};so._jsonSchemaVersion="firestore/vectorValue/1.0",so._jsonSchema={type:It("string",so._jsonSchemaVersion),vectorValues:It("object")};var B8=/^__.*__$/,Vw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ds(e,this.data,t,this.fieldTransforms)}},Vg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:n})}}var Uw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return jg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bN(this.Ec)&&B8.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},jw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kg(e)}Dc(e,t,r,i=!1){return new Uw({Ec:e,methodName:t,bc:r,path:Bn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zg(n){let e=n._freezeSettings(),t=Kg(n._databaseId);return new jw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TN(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);gI("Data must be an object, but it was:",s,r);let a=DN(r,s),l,u;if(o.merge)l=new Xn(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=Bw(e,p,t);if(!s.contains(g))throw new K(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);AN(f,g)||f.push(g)}l=new Xn(f),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new Vw(new jn(a),l,u)}var Ug=class n extends Bu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function z8(n,e,t,r){let i=n.Dc(1,e,t);gI("Data must be an object, but it was:",i,r);let o=[],s=jn.empty();fo(r,(l,u)=>{let f=mI(e,l,t);u=$t(u);let p=i.gc(f);if(u instanceof Ug)o.push(f);else{let g=Gu(u,p);g!=null&&(o.push(f),s.set(f,g))}});let a=new Xn(o);return new Vg(s,a,i.fieldTransforms)}function $8(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Bw(e,r,t)],l=[i];if(o.length%2!=0)throw new K(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Bw(e,o[g])),l.push(o[g+1]);let u=[],f=jn.empty();for(let g=a.length-1;g>=0;--g)if(!AN(u,a[g])){let _=a[g],T=l[g];T=$t(T);let x=s.gc(_);if(T instanceof Ug)u.push(_);else{let N=Gu(T,x);N!=null&&(u.push(_),f.set(_,N))}}let p=new Xn(u);return new Vg(f,p,s.fieldTransforms)}function H8(n,e,t,r=!1){return Gu(t,n.Dc(r?4:3,e))}function Gu(n,e){if(SN(n=$t(n)))return gI("Unsupported field value:",e,n),DN(n,e);if(n instanceof Bu)return(function(r,i){if(!bN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let l=Gu(a,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Aq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=bt.fromDate(r);return{timestampValue:Cg(i.serializer,o)}}if(r instanceof bt){let o=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cg(i.serializer,o)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:Gx(i.serializer,r._byteString)};if(r instanceof Ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof so)return(function(s,a){return{mapValue:{fields:{[Qw]:{stringValue:Zw},[Xa]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return nI(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${$g(r)}`)})(n,e)}function DN(n,e){let t={};return _x(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,i)=>{let o=Gu(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function SN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bt||n instanceof oo||n instanceof io||n instanceof Ft||n instanceof Bu||n instanceof so)}function gI(n,e,t){if(!SN(t)||!ix(t)){let r=$g(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Bw(n,e,t){if((e=$t(e))instanceof uc)return e._internalPath;if(typeof e=="string")return mI(n,e);throw jg("Field path arguments must be of type string or ",n,!1,void 0,t)}var q8=new RegExp("[~\\*/\\[\\]]");function mI(n,e,t){if(e.search(q8)>=0)throw jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new K(L.INVALID_ARGUMENT,a+n+l)}function AN(n,e){return n.some(t=>t.isEqual(e))}var Bg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(vI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zw=class extends Bg{data(){return super.data()}};function vI(n,e){return typeof e=="string"?mI(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}function MN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zu=class{},$w=class extends zu{};function RN(n,e,...t){let r=[];e instanceof zu&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(l=>l instanceof Hw).length,a=o.filter(l=>l instanceof zg).length;if(s>1||s>0&&a>0)throw new K(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var zg=class n extends $w{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return ON(e._query,t),new As(e.firestore,e.converter,RC(e._query,t))}_parse(e){let t=Zg(e.firestore);return(function(o,s,a,l,u,f,p){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ex(p,f);let T=[];for(let x of p)T.push(XO(l,o,x));g={arrayValue:{values:T}}}else g=XO(l,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ex(p,f),g=H8(a,s,p,f==="in"||f==="not-in");return wt.create(u,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function PN(n,e,t){let r=e,i=vI("where",n);return zg._create(i,r,t)}var Hw=class n extends zu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)ON(s,l),s=RC(s,l)})(e._query,t),new As(e.firestore,e.converter,RC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function XO(n,e,t){if(typeof(t=$t(t))=="string"){if(t==="")throw new K(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xx(e)&&t.indexOf("/")!==-1)throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(nt.fromString(t));if(!ie.isDocumentKey(r))throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return EO(n,new ie(r))}if(t instanceof Ft)return EO(n,t._key);throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(t)}.`)}function ex(n,e){if(!Array.isArray(n)||n.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ON(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var qw=class{convertValue(e,t="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Xa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>tt(s.doubleValue));return new so(o)}convertGeoPoint(e){return new oo(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nu(e));default:return null}}convertTimestamp(e){let t=Ci(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=nt.fromString(e);ze(Xx(r),9688,{name:e});let i=new gg(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(t)||Ei(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function xN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ys=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_s=class n extends Bg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Za(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(vI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:It("string",_s._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};var Za=class extends _s{data(e={}){return super.data(e)}},Es=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Za(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Za(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:W8(a.type),doc:l,oldIndex:u,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function W8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:n})}}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:It("string",Es._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};var $u=class extends qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}};function NN(n){n=er(n,As);let e=er(n.firestore,Kr),t=pI(e),r=new $u(e);return MN(n._query),U8(t,n._query).then(i=>new Es(e,r,n,i))}function kN(n,e,t){n=er(n,Ft);let r=er(n.firestore,Kr),i=xN(n.converter,e,t);return Jg(r,[TN(Zg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Hr.none())])}function FN(n,e,t,...r){n=er(n,Ft);let i=er(n.firestore,Kr),o=Zg(i),s;return s=typeof(e=$t(e))=="string"||e instanceof uc?$8(o,"updateDoc",n._key,e,t,r):z8(o,"updateDoc",n._key,e),Jg(i,[s.toMutation(n._key,Hr.exists(!0))])}function LN(n){return Jg(er(n.firestore,Kr),[new Fu(n._key,Hr.none())])}function VN(n,e){let t=er(n.firestore,Kr),r=hI(n),i=xN(n.converter,e);return Jg(t,[TN(Zg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Hr.exists(!1))]).then(()=>r)}function yI(n,...e){var t,r,i;n=$t(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JO(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(JO(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,f;if(n instanceof Ft)u=er(n.firestore,Kr),f=tI(n._key.path),l={next:p=>{e[s]&&e[s](G8(u,n,p))},error:e[s+1],complete:e[s+2]};else{let p=er(n,As);u=er(p.firestore,Kr),f=p._query;let g=new $u(u);l={next:_=>{e[s]&&e[s](new Es(u,g,p,_))},error:e[s+1],complete:e[s+2]},MN(n._query)}return(function(g,_,T,x){let N=new kg(x),j=new Og(_,N,T);return g.asyncQueue.enqueueAndForget(async()=>lN(await Lw(g),j)),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(async()=>uN(await Lw(g),j))}})(pI(u),f,a,l)}function Jg(n,e){return(function(r,i){let o=new Br;return r.asyncQueue.enqueueAndForget(async()=>A8(await V8(r),i,o)),o.promise})(pI(n),e)}function G8(n,e,t){let r=t.docs.get(e._key),i=new $u(n);return new _s(n,i,e._key,r,new ys(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dc=i})(ja),gr(new hn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Kr(new uC(r.getProvider("auth-internal")),new hC(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gg(u.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ht(cO,lO,e),ht(cO,lO,"esm2017")})();var Xg=function(){return Xg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Xg.apply(this,arguments)};var Q8={includeMetadataChanges:!1};function _I(n,e){return e===void 0&&(e=Q8),new ce(function(t){var r=yI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function UN(n){return _I(n,{includeMetadataChanges:!0})}function jN(n,e){return e===void 0&&(e={}),UN(n).pipe(J(function(t){return EI(t,e)}))}function EI(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Xg(Xg({},r),(t={},t[e.idField]=n.id,t))}function BN(n){return _I(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function zN(n,e){return e===void 0&&(e={}),BN(n).pipe(J(function(t){return t.map(function(r){return EI(r,e)})}))}var Ti=class{constructor(e){return e}},$N="firestore",CI=class{constructor(){return $a($N)}};var wI=new $("angularfire2.firestore-instances");function Z8(n,e){let t=jp($N,n,e);return t&&new Ti(t)}function J8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ti(r)}}var X8={provide:CI,deps:[[new Mr,wI]]},eW={provide:Ti,useFactory:Z8,deps:[[new Mr,wI],fs]};function HN(n,...e){return ht("angularfire",us.full,"fst"),At([eW,X8,{provide:wI,useFactory:J8(n),multi:!0,deps:[xe,st,ds,yu,[new Mr,eg],[new Mr,zp],...e]}])}var em=Ht(zN,!0);var tm=Ht(jN,!0);var qN=Ht(VN,!0,2);var nm=Ht(wN,!0,2);var rm=Ht(LN,!0,2);var Di=Ht(hI,!0,2);var gc=Ht(NN,!0);var WN=Ht(IN,!0);var Ku=Ht(RN,!0,2);var GN=Ht(kN,!0,2);var im=Ht(FN,!0,2);var Yu=Ht(PN,!0,2);var Yr=class n{firestore=R(Ti);usersCollection=nm(this.firestore,"utenti");getAll(){return em(this.usersCollection,{idField:"id"})}getById(e){let t=Di(this.firestore,`utenti/${e}`);return tm(t,{idField:"id"})}getByCodiceFiscale(e){let t=Ku(this.usersCollection,Yu("codiceFiscale","==",e.toUpperCase()));return Me(gc(t)).pipe(J(r=>{if(r.empty)return null;let i=r.docs[0],o=i.data();return te(V({id:i.id},o),{dataDiNascita:o.dataDiNascita?o.dataDiNascita.toDate():null})}))}create(e){let t=te(V({},e),{codiceFiscale:e.codiceFiscale.toUpperCase()});return Me(qN(this.usersCollection,t)).pipe(J(r=>r.id))}update(e,t){let r=Di(this.firestore,`utenti/${e}`),i=t.codiceFiscale?te(V({},t),{codiceFiscale:t.codiceFiscale.toUpperCase()}):t;return Me(im(r,i))}delete(e){let t=Di(this.firestore,`utenti/${e}`);return Me(rm(t))}checkCodiceFiscaleExists(e){return this.getByCodiceFiscale(e).pipe(J(t=>t!==null))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var En=class n{userService=R(Yr);router=R(Ot);platformId=R(li);currentUserSignal=X(null);currentUser=this.currentUserSignal.asReadonly();STORAGE_KEY="currentUser";isBrowser;constructor(){this.isBrowser=ER(this.platformId),this.isBrowser&&this.loadUserFromStorage()}login(e,t,r){return this.userService.getByCodiceFiscale(r).pipe(J(i=>i?i.nome.toLowerCase()!==e.toLowerCase()||i.cognome.toLowerCase()!==t.toLowerCase()?{success:!1,message:"Nome o cognome non corrispondono al codice fiscale."}:(this.setCurrentUser(i),{success:!0,user:i}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),mn(i=>(console.error("Errore durante il login:",i),re({success:!1,message:"Errore durante il login. Riprova."}))))}loginByCodiceFiscale(e){return this.userService.getByCodiceFiscale(e).pipe(J(t=>t?(this.setCurrentUser(t),{success:!0,user:t}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),mn(t=>(console.error("Errore durante il login:",t),re({success:!1,message:"Errore durante il login. Riprova."}))))}register(e){return this.userService.checkCodiceFiscaleExists(e.codiceFiscale).pipe(J(t=>{if(t)throw new Error("Codice fiscale gi\xE0 registrato. Usa il login per accedere.");return t}),ct(()=>{}),J(()=>(this.userService.create(e).subscribe({next:t=>{let r=te(V({},e),{id:t});this.setCurrentUser(r)},error:t=>{console.error("Errore durante la registrazione:",t)}}),{success:!0})),mn(t=>(console.error("Errore durante la registrazione:",t),re({success:!1,message:t.message||"Errore durante la registrazione. Riprova."}))))}logout(){this.currentUserSignal.set(null),this.isBrowser&&localStorage.removeItem(this.STORAGE_KEY),this.router.navigate(["/login"])}isAuthenticated(){return this.currentUserSignal()!==null}setCurrentUser(e){this.currentUserSignal.set(e),this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadUserFromStorage(){if(!this.isBrowser)return;let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let t=JSON.parse(e);this.currentUserSignal.set(t)}catch(t){console.error("Errore nel parsing dell'utente salvato:",t),localStorage.removeItem(this.STORAGE_KEY)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function tW(n,e){if(n&1){let t=ue();y(0,"div",8),F(1,"i",12),C(2),y(3,"button",13),Q("click",function(){H(t);let i=k();return q(i.successMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.successMessage()," ")}}function nW(n,e){if(n&1){let t=ue();y(0,"div",9),F(1,"i",14),C(2),y(3,"button",13),Q("click",function(){H(t);let i=k();return q(i.errorMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.errorMessage()," ")}}function rW(n,e){if(n&1){let t=ue();y(0,"input",37),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.editData().nome,i)||(o.editData().nome=i),q(i)}),v()}if(n&2){let t=k(2);de("ngModel",t.editData().nome)}}function iW(n,e){if(n&1&&(y(0,"div",28),C(1),v()),n&2){let t=k();b(),Ve(t.nome)}}function oW(n,e){if(n&1){let t=ue();y(0,"input",38),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.editData().cognome,i)||(o.editData().cognome=i),q(i)}),v()}if(n&2){let t=k(2);de("ngModel",t.editData().cognome)}}function sW(n,e){if(n&1&&(y(0,"div",28),C(1),v()),n&2){let t=k();b(),Ve(t.cognome)}}function aW(n,e){if(n&1){let t=ue();y(0,"input",39),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.editData().email,i)||(o.editData().email=i),q(i)}),v()}if(n&2){let t=k(2);de("ngModel",t.editData().email)}}function cW(n,e){if(n&1&&(y(0,"div",28),C(1),v()),n&2){let t=k();b(),Ve(t.email||"Non impostato")}}function lW(n,e){if(n&1){let t=ue();y(0,"input",40),Q("change",function(i){H(t);let o=k(2);return q(o.onDateChange(i))}),v()}if(n&2){let t=k(2);we("value",t.getDateInputValue(t.editData().dataDiNascita??null))}}function uW(n,e){if(n&1&&(y(0,"div",28),C(1),v()),n&2){let t=k(),r=k();b(),Ve(r.formatDate(t.dataDiNascita))}}function dW(n,e){if(n&1){let t=ue();y(0,"input",41),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.editData().annoConseguimentoPatente,i)||(o.editData().annoConseguimentoPatente=i),q(i)}),v()}if(n&2){let t=k(2);de("ngModel",t.editData().annoConseguimentoPatente),we("min",1950)("max",t.currentYear)}}function fW(n,e){if(n&1&&(y(0,"div",28),C(1),v()),n&2){let t=k();b(),Ve(t.annoConseguimentoPatente||"Non impostato")}}function hW(n,e){n&1&&(F(0,"span",43),y(1,"span"),C(2,"Salvataggio..."),v())}function pW(n,e){n&1&&(F(0,"i",44),y(1,"span"),C(2,"Salva Modifiche"),v())}function gW(n,e){if(n&1&&(y(0,"div",36)(1,"button",42),W(2,hW,3,0)(3,pW,3,0),v()()),n&2){let t=k(2);b(),we("disabled",t.isSaving()),b(),G(t.isSaving()?2:3)}}function mW(n,e){if(n&1){let t=ue();y(0,"div",10)(1,"div",15)(2,"div",16),F(3,"i",17),v(),y(4,"div",18)(5,"h2"),C(6),v(),y(7,"p",19),F(8,"i",20),C(9),v()()(),y(10,"form",21),Q("ngSubmit",function(){H(t);let i=k();return q(i.saveChanges())}),y(11,"div",22)(12,"div",23)(13,"div",24)(14,"label",25),F(15,"i",26),C(16,"Nome "),v(),W(17,rW,1,1,"input",27)(18,iW,2,1,"div",28),v()(),y(19,"div",23)(20,"div",24)(21,"label",25),F(22,"i",26),C(23,"Cognome "),v(),W(24,oW,1,1,"input",29)(25,sW,2,1,"div",28),v()(),y(26,"div",23)(27,"div",24)(28,"label",25),F(29,"i",30),C(30,"Email "),v(),W(31,aW,1,1,"input",31)(32,cW,2,1,"div",28),v()(),y(33,"div",23)(34,"div",24)(35,"label",25),F(36,"i",32),C(37,"Data di Nascita "),v(),W(38,lW,1,1,"input",33)(39,uW,2,1,"div",28),v()(),y(40,"div",23)(41,"div",24)(42,"label",25),F(43,"i",34),C(44,"Anno Conseguimento Patente "),v(),W(45,dW,1,3,"input",35)(46,fW,2,1,"div",28),v()()(),W(47,gW,4,2,"div",36),v()()}if(n&2){let t=e,r=k();b(6),Nr("",t.nome," ",t.cognome),b(3),se(" ",t.codiceFiscale," "),b(8),G(r.isEditMode()?17:18),b(7),G(r.isEditMode()?24:25),b(7),G(r.isEditMode()?31:32),b(7),G(r.isEditMode()?38:39),b(7),G(r.isEditMode()?45:46),b(2),G(r.isEditMode()?47:-1)}}var om=class n{authService=R(En);userService=R(Yr);currentUser=this.authService.currentUser;isEditMode=X(!1);isSaving=X(!1);successMessage=X(null);errorMessage=X(null);editData=X({});currentYear=new Date().getFullYear();ngOnInit(){let e=this.currentUser();e&&this.editData.set(V({},e))}toggleEditMode(){if(this.isEditMode()){let e=this.currentUser();e&&this.editData.set(V({},e))}this.isEditMode.update(e=>!e),this.clearMessages()}saveChanges(){let e=this.currentUser();if(!e)return;this.clearMessages(),this.isSaving.set(!0);let t=this.editData(),r={nome:t.nome?.toUpperCase(),cognome:t.cognome?.toUpperCase(),email:t.email||null,dataDiNascita:t.dataDiNascita||null,annoConseguimentoPatente:t.annoConseguimentoPatente||null};this.userService.update(e.id,r).subscribe({next:()=>{this.isSaving.set(!1),this.isEditMode.set(!1),this.successMessage.set("Dati aggiornati con successo!");let i=V(V({},e),r);this.authService.setCurrentUser(i),setTimeout(()=>this.successMessage.set(null),3e3)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio:",i)}})}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}formatDate(e){if(!e)return"Non impostato";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("it-IT")}catch{return"Non impostato"}}getDateInputValue(e){if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toISOString().split("T")[0]}catch{return""}}onDateChange(e){let r=e.target.value;this.editData.update(i=>te(V({},i),{dataDiNascita:r?new Date(r):null}))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-homepage"]],decls:18,vars:23,consts:[[1,"homepage-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-person-circle","me-2"],[1,"page-subtitle"],[1,"btn","btn-edit-desktop",3,"click","disabled"],[1,"me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"profile-card"],[1,"btn","btn-edit-mobile",3,"click","disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"profile-header"],[1,"avatar"],[1,"bi","bi-person-fill"],[1,"user-info"],[1,"cf-badge"],[1,"bi","bi-credit-card","me-1"],[1,"profile-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"info-item"],[1,"info-label"],[1,"bi","bi-person-fill","me-2"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"info-value"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"bi","bi-envelope-fill","me-2"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","date","name","dataDiNascita",1,"form-control",3,"value"],[1,"bi","bi-card-heading","me-2"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModel","min","max"],[1,"action-buttons"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","dataDiNascita",1,"form-control",3,"change","value"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModelChange","ngModel","min","max"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(t,r){if(t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),F(5,"i",4),C(6," Profilo Utente "),v(),y(7,"p",5),C(8,"Visualizza e modifica i tuoi dati personali"),v()(),y(9,"button",6),Q("click",function(){return r.toggleEditMode()}),F(10,"i",7),C(11),v()(),W(12,tW,4,1,"div",8),W(13,nW,4,1,"div",9),W(14,mW,48,9,"div",10),y(15,"button",11),Q("click",function(){return r.toggleEditMode()}),F(16,"i",7),C(17),v()()()),t&2){let i;b(9),Le("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),we("disabled",r.isSaving()),b(),Le("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),b(),se(" ",r.isEditMode()?"Annulla":"Modifica"," "),b(),G(r.successMessage()?12:-1),b(),G(r.errorMessage()?13:-1),b(),G((i=r.currentUser())?14:-1,i),b(),Le("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),we("disabled",r.isSaving()),b(),Le("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),b(),se(" ",r.isEditMode()?"Annulla":"Modifica"," ")}},dependencies:[en,Ua,xt,Vn,Xt,Va,rs,gi,fu,zt,ns,Ge],styles:[".homepage-container[_ngcontent-%COMP%]{padding:2rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;display:flex;align-items:center;gap:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #0003}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:#fff}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{display:inline-block;background:#fff3;padding:.375rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600;margin-top:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:2rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#1e293b;min-height:48px;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.homepage-container[_ngcontent-%COMP%]{padding:1rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;margin-top:1rem;border-radius:10px;padding:.875rem 1.5rem;font-weight:600;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{border-radius:15px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;text-align:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:70px;height:70px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .625rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.8rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%], .homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:1rem}}"]})};var ho=class n{firestore=R(Ti);carsCollection=nm(this.firestore,"auto");getAll(){return em(this.carsCollection,{idField:"targa"})}getByTarga(e){let t=Di(this.firestore,`auto/${e}`);return tm(t,{idField:"targa"}).pipe(J(r=>{if(r)return this.convertFirebaseTimestamps(r)}))}getByProprietario(e){let t=Ku(this.carsCollection,Yu("proprietario.id","==",e));return Me(gc(t)).pipe(J(r=>r.docs.map(i=>{let o=i.data();return this.convertFirebaseTimestamps(te(V({},o),{targa:i.id}))})))}getByProprietarioOComproprietario(e){let t=Ku(this.carsCollection,Yu("proprietario.id","==",e));return Me(Promise.all([gc(t),gc(this.carsCollection)])).pipe(J(([r,i])=>{let o=new Map;return r.docs.forEach(s=>{let a=s.data();o.set(s.id,this.convertFirebaseTimestamps(te(V({},a),{targa:s.id})))}),i.docs.forEach(s=>{if(!o.has(s.id)){let a=s.data();(a.coProprietari||[]).some(f=>f.id===e)&&o.set(s.id,this.convertFirebaseTimestamps(te(V({},a),{targa:s.id})))}}),Array.from(o.values())}))}create(e){let t=Di(this.firestore,`auto/${e.targa.toUpperCase()}`),r=te(V({},e),{targa:e.targa.toUpperCase()});return Me(GN(t,r))}update(e,t){let r=Di(this.firestore,`auto/${e.toUpperCase()}`);return Me(im(r,t))}delete(e){let t=Di(this.firestore,`auto/${e.toUpperCase()}`);return Me(rm(t))}checkTargaExists(e){return this.getByTarga(e).pipe(J(t=>t!==void 0))}convertFirebaseTimestamps(e){return te(V({},e),{dataDiAcquisto:e.dataDiAcquisto?.toDate?e.dataDiAcquisto.toDate():e.dataDiAcquisto,dataDiVendita:e.dataDiVendita?.toDate?e.dataDiVendita.toDate():e.dataDiVendita,dataProssimoTagliando:e.dataProssimoTagliando?.toDate?e.dataProssimoTagliando.toDate():e.dataProssimoTagliando,dataProssimaRevisione:e.dataProssimaRevisione?.toDate?e.dataProssimaRevisione.toDate():e.dataProssimaRevisione,assicurazioni:e.assicurazioni?.map(t=>te(V({},t),{dataInizio:t.dataInizio?.toDate?t.dataInizio.toDate():t.dataInizio,dataFine:t.dataFine?.toDate?t.dataFine.toDate():t.dataFine}))||[],tagliandi:e.tagliandi?.map(t=>te(V({},t),{data:t.data?.toDate?t.data.toDate():t.data}))||[],revisioni:e.revisioni?.map(t=>te(V({},t),{data:t.data?.toDate?t.data.toDate():t.data}))||[]})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var vW=n=>["/dettaglio-auto",n],yW=(n,e)=>e.targa;function _W(n,e){n&1&&(y(0,"div",6)(1,"div",10)(2,"span",11),C(3,"Caricamento..."),v()()())}function EW(n,e){if(n&1&&(y(0,"div",7),F(1,"i",12),C(2),v()),n&2){let t=k();b(2),se(" ",t.error()," ")}}function CW(n,e){n&1&&(y(0,"div",8),F(1,"i",13),C(2," Non hai ancora registrato nessuna auto. "),y(3,"a",14),C(4,"Aggiungi la tua prima auto"),v()())}function wW(n,e){if(n&1&&(y(0,"tr")(1,"td")(2,"strong",19),C(3),v()(),y(4,"td"),C(5),v(),y(6,"td"),C(7),v(),y(8,"td"),C(9),v(),y(10,"td",16)(11,"span",20),C(12),v()(),y(13,"td",17),C(14),v(),y(15,"td",17),C(16),v(),y(17,"td",17),C(18),v(),y(19,"td",18)(20,"a",21),F(21,"i",22),y(22,"span",23),C(23,"Dettagli"),v()()()()),n&2){let t=e.$implicit,r=k(2);b(3),Ve(t.targa),b(2),Ve(t.marca),b(2),Ve(t.modello),b(2),Ve(t.anno),b(2),Le("bg-primary",r.getRuolo(t)==="Proprietario")("bg-secondary",r.getRuolo(t)==="Coproprietario"),b(),se(" ",r.getRuolo(t)," "),b(2),Ve(t.colore),b(2),Ve(r.formatDate(t.dataDiAcquisto)),b(2),Ve(r.formatPrice(t.prezzoDiAcquisto)),b(2),we("routerLink",J_(13,vW,t.targa))}}function IW(n,e){if(n&1&&(y(0,"div",9)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),C(5,"Targa"),v(),y(6,"th"),C(7,"Marca"),v(),y(8,"th"),C(9,"Modello"),v(),y(10,"th"),C(11,"Anno"),v(),y(12,"th",16),C(13,"Ruolo"),v(),y(14,"th",17),C(15,"Colore"),v(),y(16,"th",17),C(17,"Data Acquisto"),v(),y(18,"th",17),C(19,"Prezzo Acquisto"),v(),y(20,"th",18),C(21,"Azioni"),v()()(),y(22,"tbody"),lr(23,wW,24,15,"tr",null,yW),v()()()),n&2){let t=k();b(23),ur(t.auto())}}var sm=class n{carService=R(ho);authService=R(En);auto=X([]);loading=X(!0);error=X(null);ngOnInit(){this.loadAuto()}loadAuto(){let e=this.authService.currentUser();if(!e){this.error.set("Utente non autenticato"),this.loading.set(!1);return}this.carService.getByProprietarioOComproprietario(e.id).subscribe({next:t=>{this.auto.set(t),this.loading.set(!1)},error:t=>{console.error("Errore nel caricamento delle auto:",t),this.error.set("Errore nel caricamento delle auto"),this.loading.set(!1)}})}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}getRuolo(e){let t=this.authService.currentUser();return t?e.proprietario.id===t.id?"Proprietario":e.coProprietari?.some(i=>i.id===t.id)?"Coproprietario":"-":"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-elenco-auto"]],decls:11,vars:4,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-info"],[1,"table-responsive"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"bi","bi-info-circle","me-2"],["routerLink","/nuova-auto",1,"alert-link"],[1,"table","table-hover","align-middle"],[1,"d-none","d-md-table-cell"],[1,"d-none","d-lg-table-cell"],[1,"text-end"],[1,"text-uppercase"],[1,"badge"],["title","Visualizza dettagli",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"bi","bi-eye","me-1"],[1,"d-none","d-md-inline"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),F(5,"i",5),C(6," Le Mie Auto "),v()(),W(7,_W,4,0,"div",6),W(8,EW,3,1,"div",7),W(9,CW,5,0,"div",8),W(10,IW,25,0,"div",9),v()()()),t&2&&(b(7),G(r.loading()?7:-1),b(),G(r.error()?8:-1),b(),G(!r.loading()&&!r.error()&&r.auto().length===0?9:-1),b(),G(!r.loading()&&!r.error()&&r.auto().length>0?10:-1))},dependencies:[Ge,Vr],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem;overflow:hidden;border:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;font-weight:600;padding:1.5rem 1rem;background:transparent!important;color:#fff!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background-color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a;transform:translate(2px)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #dee2e6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}@media (max-width: 767px){.table[_ngcontent-%COMP%]{font-size:.875rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}"]})};function bW(n,e){if(n&1){let t=ue();y(0,"div",6),F(1,"i",34),C(2),y(3,"button",35),Q("click",function(){H(t);let i=k();return q(i.successMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.successMessage()," ")}}function TW(n,e){if(n&1){let t=ue();y(0,"div",7),F(1,"i",36),C(2),y(3,"button",35),Q("click",function(){H(t);let i=k();return q(i.errorMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.errorMessage()," ")}}function DW(n,e){n&1&&(F(0,"span",37),y(1,"span"),C(2,"Salvataggio..."),v())}function SW(n,e){n&1&&(F(0,"i",38),y(1,"span"),C(2,"Salva Auto"),v())}var am=class n{authService=R(En);carService=R(ho);router=R(Ot);currentUser=this.authService.currentUser;isSaving=X(!1);successMessage=X(null);errorMessage=X(null);currentYear=new Date().getFullYear();targa="";marca="";modello="";anno=this.currentYear;colore="";prezzoDiAcquisto=0;dataDiAcquisto="";onSubmit(){this.clearMessages();let e=this.currentUser();if(!e){this.errorMessage.set("Utente non autenticato.");return}if(!this.targa.trim()||!this.marca.trim()||!this.modello.trim()||!this.dataDiAcquisto){this.errorMessage.set("Compila tutti i campi obbligatori.");return}if(this.targa.length<6||this.targa.length>10){this.errorMessage.set("La targa deve essere tra 6 e 10 caratteri.");return}this.isSaving.set(!0),this.carService.checkTargaExists(this.targa).subscribe({next:t=>{if(t){this.isSaving.set(!1),this.errorMessage.set("Targa gi\xE0 esistente.");return}let r={targa:this.targa.trim().toUpperCase(),marca:this.marca.trim().toUpperCase(),modello:this.modello.trim().toUpperCase(),anno:this.anno,colore:this.colore.trim().toUpperCase(),prezzoDiAcquisto:this.prezzoDiAcquisto,dataDiAcquisto:new Date(this.dataDiAcquisto),proprietario:e,coProprietari:[],assicurazioni:[],tagliandi:[],revisioni:[]};this.carService.create(r).subscribe({next:()=>{this.isSaving.set(!1),this.successMessage.set("Auto aggiunta con successo!"),setTimeout(()=>{this.router.navigate(["/elenco-auto"])},1500)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio auto:",i)}})},error:t=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante la verifica. Riprova."),console.error("Errore verifica targa:",t)}})}resetForm(){this.targa="",this.marca="",this.modello="",this.anno=this.currentYear,this.colore="",this.prezzoDiAcquisto=0,this.dataDiAcquisto="",this.clearMessages()}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-nuova-auto"]],decls:67,vars:15,consts:[[1,"nuova-auto-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-plus-circle-fill","me-2"],[1,"page-subtitle"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"form-card"],[1,"card-header"],[1,"bi","bi-car-front-fill","me-2"],[1,"card-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"bi","bi-credit-card-2-front-fill","me-2"],["type","text","name","targa","placeholder","ES. AB123CD","maxlength","10","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-tag-fill","me-2"],["type","text","name","marca","placeholder","ES. FIAT","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-car-front","me-2"],["type","text","name","modello","placeholder","ES. PANDA","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","number","name","anno","required","",1,"form-control",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-palette-fill","me-2"],["type","text","name","colore","placeholder","ES. BIANCO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-currency-euro","me-2"],["type","number","name","prezzoDiAcquisto","placeholder","0","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-event-fill","me-2"],["type","date","name","dataDiAcquisto","required","",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise","me-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),F(5,"i",4),C(6," Nuova Auto "),v(),y(7,"p",5),C(8,"Inserisci i dati della tua auto"),v()()(),W(9,bW,4,1,"div",6),W(10,TW,4,1,"div",7),y(11,"div",8)(12,"div",9),F(13,"i",10),y(14,"span"),C(15,"Dati Auto"),v()(),y(16,"form",11),Q("ngSubmit",function(){return r.onSubmit()}),y(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),F(21,"i",16),C(22,"Targa * "),v(),y(23,"input",17),fe("ngModelChange",function(o){return ge(r.targa,o)||(r.targa=o),o}),v()()(),y(24,"div",13)(25,"div",14)(26,"label",15),F(27,"i",18),C(28,"Marca * "),v(),y(29,"input",19),fe("ngModelChange",function(o){return ge(r.marca,o)||(r.marca=o),o}),v()()(),y(30,"div",13)(31,"div",14)(32,"label",15),F(33,"i",20),C(34,"Modello * "),v(),y(35,"input",21),fe("ngModelChange",function(o){return ge(r.modello,o)||(r.modello=o),o}),v()()(),y(36,"div",13)(37,"div",14)(38,"label",15),F(39,"i",22),C(40,"Anno * "),v(),y(41,"input",23),fe("ngModelChange",function(o){return ge(r.anno,o)||(r.anno=o),o}),v()()(),y(42,"div",13)(43,"div",14)(44,"label",15),F(45,"i",24),C(46,"Colore "),v(),y(47,"input",25),fe("ngModelChange",function(o){return ge(r.colore,o)||(r.colore=o),o}),v()()(),y(48,"div",13)(49,"div",14)(50,"label",15),F(51,"i",26),C(52,"Prezzo di Acquisto "),v(),y(53,"input",27),fe("ngModelChange",function(o){return ge(r.prezzoDiAcquisto,o)||(r.prezzoDiAcquisto=o),o}),v()()(),y(54,"div",13)(55,"div",14)(56,"label",15),F(57,"i",28),C(58,"Data di Acquisto * "),v(),y(59,"input",29),fe("ngModelChange",function(o){return ge(r.dataDiAcquisto,o)||(r.dataDiAcquisto=o),o}),v()()()(),y(60,"div",30)(61,"button",31),Q("click",function(){return r.resetForm()}),F(62,"i",32),C(63," Reset "),v(),y(64,"button",33),W(65,DW,3,0)(66,SW,3,0),v()()()()()()),t&2&&(b(9),G(r.successMessage()?9:-1),b(),G(r.errorMessage()?10:-1),b(13),de("ngModel",r.targa),b(6),de("ngModel",r.marca),b(6),de("ngModel",r.modello),b(6),de("ngModel",r.anno),we("min",1950)("max",r.currentYear),b(6),de("ngModel",r.colore),b(6),de("ngModel",r.prezzoDiAcquisto),b(6),de("ngModel",r.dataDiAcquisto),we("max",r.currentYear+"-12-31"),b(2),we("disabled",r.isSaving()),b(3),we("disabled",r.isSaving()),b(),G(r.isSaving()?65:66))},dependencies:[en,Ua,xt,Vn,Xt,Va,rs,is,gi,fu,zt,ns,Ge],styles:[".nuova-auto-container[_ngcontent-%COMP%]{padding:2rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.nuova-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;font-size:1.25rem;font-weight:600;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#cbd5e1;text-transform:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.nuova-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{border-radius:15px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;font-size:1.1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem 1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.8rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}}"]})};function AW(n,e){if(n&1){let t=ue();y(0,"button",20),Q("click",function(){H(t);let i=k(2);return q(i.toggleEditMode())}),F(1,"i",21),C(2," Modifica "),v()}}function MW(n,e){if(n&1){let t=ue();y(0,"button",22),Q("click",function(){H(t);let i=k(2);return q(i.saveChanges())}),F(1,"i",23),C(2," Salva "),v(),y(3,"button",24),Q("click",function(){H(t);let i=k(2);return q(i.cancelEdit())}),F(4,"i",25),C(5," Annulla "),v()}}function RW(n,e){if(n&1){let t=ue();y(0,"div",6)(1,"div",7),W(2,AW,3,0,"button",8)(3,MW,6,0),v(),y(4,"div",9)(5,"div",10)(6,"label",11),C(7,"Targa"),v(),F(8,"input",12),v(),y(9,"div",10)(10,"label",11),C(11,"Marca"),v(),y(12,"input",13),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.marca,i)||(o.car.marca=i),q(i)}),v()(),y(13,"div",10)(14,"label",11),C(15,"Modello"),v(),y(16,"input",13),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.modello,i)||(o.car.modello=i),q(i)}),v()(),y(17,"div",10)(18,"label",11),C(19,"Anno"),v(),y(20,"input",14),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.anno,i)||(o.car.anno=i),q(i)}),v()(),y(21,"div",10)(22,"label",11),C(23,"Colore"),v(),y(24,"input",13),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.colore,i)||(o.car.colore=i),q(i)}),v()(),y(25,"div",10)(26,"label",11),C(27,"Data di Acquisto"),v(),y(28,"input",15),Th(29,"date"),Q("ngModelChange",function(i){H(t);let o=k();return q(o.car.dataDiAcquisto=i)}),v()(),y(30,"div",10)(31,"label",11),C(32,"Prezzo di Acquisto"),v(),y(33,"input",14),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.prezzoDiAcquisto,i)||(o.car.prezzoDiAcquisto=i),q(i)}),v()(),y(34,"div",10)(35,"label",11),C(36,"Prezzo di Vendita"),v(),y(37,"input",14),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.car.prezzoDiVendita,i)||(o.car.prezzoDiVendita=i),q(i)}),v()(),y(38,"div",10)(39,"label",11),C(40,"Data di Vendita"),v(),y(41,"input",15),Th(42,"date"),Q("ngModelChange",function(i){H(t);let o=k();return q(o.car.dataDiVendita=i)}),v()()(),F(43,"hr",16),y(44,"h5",17),C(45,"Proprietario"),v(),y(46,"div",9)(47,"div",18)(48,"label",11),C(49,"Nome"),v(),F(50,"input",19),v(),y(51,"div",18)(52,"label",11),C(53,"Cognome"),v(),F(54,"input",19),v(),y(55,"div",18)(56,"label",11),C(57,"Codice Fiscale"),v(),F(58,"input",12),v()()()}if(n&2){let t=k();b(2),G(t.editMode()?3:2),b(6),we("value",t.car.targa),b(4),de("ngModel",t.car.marca),we("disabled",!t.editMode()),b(4),de("ngModel",t.car.modello),we("disabled",!t.editMode()),b(4),de("ngModel",t.car.anno),we("disabled",!t.editMode()),b(4),de("ngModel",t.car.colore),we("disabled",!t.editMode()),b(4),we("ngModel",Dh(29,21,t.car.dataDiAcquisto,"yyyy-MM-dd"))("disabled",!t.editMode()),b(5),de("ngModel",t.car.prezzoDiAcquisto),we("disabled",!t.editMode()),b(4),de("ngModel",t.car.prezzoDiVendita),we("disabled",!t.editMode()),b(4),we("ngModel",Dh(42,24,t.car.dataDiVendita,"yyyy-MM-dd"))("disabled",!t.editMode()),b(9),we("value",t.proprietario.nome),b(4),we("value",t.proprietario.cognome),b(4),we("value",t.proprietario.codiceFiscale)}}var cm=class n{car;proprietario;carUpdated=new Fe;anagraficaOpen=X(!1);editMode=X(!1);originalCar=null;toggleAnagrafica(){this.anagraficaOpen.set(!this.anagraficaOpen())}toggleEditMode(){this.editMode()||(this.originalCar=JSON.parse(JSON.stringify(this.car))),this.editMode.set(!this.editMode())}saveChanges(){this.carUpdated.emit(this.car),this.editMode.set(!1),this.originalCar=null}cancelEdit(){this.originalCar&&Object.assign(this.car,this.originalCar),this.editMode.set(!1),this.originalCar=null}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-anagrafica"]],inputs:{car:"car",proprietario:"proprietario"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-file-text-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","text","disabled","",1,"form-control","text-uppercase",3,"value"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel","disabled"],["type","number",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"my-4"],[1,"mb-3"],[1,"col-md-4","mb-3"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-success","me-2",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),Q("click",function(){return r.toggleAnagrafica()}),y(2,"div",2),F(3,"i",3),y(4,"span",4),C(5,"Anagrafica Auto"),v()(),F(6,"i",5),v(),W(7,RW,59,27,"div",6),v()),t&2&&(b(6),Le("bi-chevron-up",r.anagraficaOpen())("bi-chevron-down",!r.anagraficaOpen()),b(),G(r.anagraficaOpen()?7:-1))},dependencies:[Ge,en,xt,Vn,Xt,zt,vE],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.info-row[_ngcontent-%COMP%]{padding:.75rem 0;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var PW=(n,e)=>e.codiceFiscale;function OW(n,e){if(n&1){let t=ue();y(0,"div",14)(1,"div",15)(2,"div")(3,"div",16),C(4),v(),y(5,"small",17),C(6),v()(),y(7,"button",18),Q("click",function(){let i=H(t).$implicit,o=k(3);return q(o.removeCoproprietario(i.codiceFiscale))}),F(8,"i",19),v()()()}if(n&2){let t=e.$implicit;b(4),Nr("",t.nome," ",t.cognome),b(2),se("CF: ",t.codiceFiscale)}}function xW(n,e){if(n&1&&(y(0,"h5",12),C(1,"Coproprietari attuali"),v(),y(2,"div",13),lr(3,OW,9,3,"div",14,PW),v()),n&2){let t=k(2);b(3),ur(t.car.coProprietari)}}function NW(n,e){n&1&&(y(0,"div",7),F(1,"i",20),C(2," Non ci sono coproprietari per questa auto. "),v())}function kW(n,e){if(n&1){let t=ue();y(0,"div",11)(1,"h5",12),C(2,"Nuovo Coproprietario"),v(),y(3,"div",21)(4,"div",22)(5,"label",23),C(6,"Nome *"),v(),y(7,"input",24),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newCoproprietario.nome,i)||(o.newCoproprietario.nome=i),q(i)}),v()(),y(8,"div",22)(9,"label",23),C(10,"Cognome *"),v(),y(11,"input",24),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newCoproprietario.cognome,i)||(o.newCoproprietario.cognome=i),q(i)}),v()(),y(12,"div",22)(13,"label",23),C(14,"Codice Fiscale *"),v(),y(15,"input",25),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newCoproprietario.codiceFiscale,i)||(o.newCoproprietario.codiceFiscale=i),q(i)}),v()(),y(16,"div",26)(17,"button",27),Q("click",function(){H(t);let i=k(2);return q(i.addCoproprietario())}),F(18,"i",28),C(19," Aggiungi "),v()()(),y(20,"small",29),F(21,"i",30),C(22," Se l'utente non esiste verr\xE0 creato automaticamente nel sistema. "),v()()}if(n&2){let t=k(2);b(7),de("ngModel",t.newCoproprietario.nome),b(4),de("ngModel",t.newCoproprietario.cognome),b(4),de("ngModel",t.newCoproprietario.codiceFiscale)}}function FW(n,e){if(n&1){let t=ue();y(0,"div",6),W(1,xW,5,0)(2,NW,3,0,"div",7),y(3,"div",8)(4,"button",9),Q("click",function(){H(t);let i=k();return q(i.toggleNewCoproprietarioForm())}),F(5,"i",10),C(6),v()(),W(7,kW,23,3,"div",11),v()}if(n&2){let t=k();b(),G(t.car.coProprietari&&t.car.coProprietari.length>0?1:2),b(5),se(" ",t.showNewCoproprietarioForm()?"Annulla":"Aggiungi Coproprietario"," "),b(),G(t.showNewCoproprietarioForm()?7:-1)}}var lm=class n{userService=R(Yr);car;carUpdated=new Fe;coproprietariOpen=X(!1);showNewCoproprietarioForm=X(!1);newCoproprietario={nome:"",cognome:"",codiceFiscale:""};ngOnInit(){}toggleCoproprietari(){this.coproprietariOpen.set(!this.coproprietariOpen())}toggleNewCoproprietarioForm(){this.showNewCoproprietarioForm.set(!this.showNewCoproprietarioForm()),this.showNewCoproprietarioForm()||this.resetCoproprietarioForm()}async addCoproprietario(){let e=this.newCoproprietario.codiceFiscale.trim().toUpperCase(),t=this.newCoproprietario.nome.trim().toUpperCase(),r=this.newCoproprietario.cognome.trim().toUpperCase();if(!e||!t||!r){alert("Compila tutti i campi");return}if(this.car.proprietario.codiceFiscale===e){alert("Il codice fiscale inserito corrisponde al proprietario");return}if(this.car.coProprietari?.some(o=>o.codiceFiscale===e)){alert("Questo coproprietario \xE8 gi\xE0 presente");return}let i={id:"",nome:t,cognome:r,codiceFiscale:e,dataDiNascita:null,email:null,annoConseguimentoPatente:null};this.car.coProprietari||(this.car.coProprietari=[]),this.car.coProprietari.push(i),this.carUpdated.emit(this.car),this.toggleNewCoproprietarioForm()}removeCoproprietario(e){confirm("Sei sicuro di voler rimuovere questo coproprietario?")&&(this.car.coProprietari=this.car.coProprietari?.filter(t=>t.codiceFiscale!==e),this.carUpdated.emit(V({},this.car)))}resetCoproprietarioForm(){this.newCoproprietario={nome:"",cognome:"",codiceFiscale:""}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-coproprietari"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-people-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-info"],[1,"mb-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"new-coproprietario-form"],[1,"mb-3"],[1,"coproprietari-list","mb-4"],[1,"coproprietario-item","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"text-muted","text-uppercase"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"],[1,"row"],[1,"col-md-4","mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","maxlength","16",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),Q("click",function(){return r.toggleCoproprietari()}),y(2,"div",2),F(3,"i",3),y(4,"span",4),C(5,"Coproprietari"),v()(),F(6,"i",5),v(),W(7,FW,8,3,"div",6),v()),t&2&&(b(6),Le("bi-chevron-up",r.coproprietariOpen())("bi-chevron-down",!r.coproprietariOpen()),b(),G(r.coproprietariOpen()?7:-1))},dependencies:[Ge,en,xt,Xt,is,zt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.coproprietari-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.coproprietario-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.coproprietario-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.new-coproprietario-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var LW=(n,e)=>e.id;function VW(n,e){n&1&&(y(0,"div",7),F(1,"i",13),y(2,"div")(3,"strong"),C(4,"Attenzione!"),v(),C(5," Questa auto non ha un'assicurazione attiva. Provvedi al pi\xF9 presto a stipularne una. "),v()())}function UW(n,e){n&1&&(y(0,"span",18),C(1,"In scadenza"),v())}function jW(n,e){n&1&&(y(0,"span",19),C(1,"Scaduta"),v())}function BW(n,e){if(n&1&&(y(0,"div",23)(1,"strong"),C(2,"Coperture:"),v(),y(3,"p",27),C(4),v()()),n&2){let t=k();b(4),Ve(t.coperture.join(", "))}}function zW(n,e){if(n&1){let t=ue();y(0,"div",14)(1,"div",15)(2,"h5",16),F(3,"i",17),C(4," Assicurazione Attiva "),v(),W(5,UW,2,0,"span",18),W(6,jW,2,0,"span",19),v(),y(7,"div",20)(8,"div",21)(9,"strong"),C(10,"Compagnia:"),v(),C(11),v(),y(12,"div",21)(13,"strong"),C(14,"Polizza:"),v(),C(15),v(),y(16,"div",22)(17,"strong"),C(18,"Data Inizio:"),v(),C(19),v(),y(20,"div",22)(21,"strong"),C(22,"Data Fine:"),v(),y(23,"span"),C(24),v()(),y(25,"div",22)(26,"strong"),C(27,"Costo Annuale:"),v(),C(28),v(),W(29,BW,5,1,"div",23),v(),y(30,"div",24)(31,"button",25),Q("click",function(){let i=H(t),o=k(2);return q(o.deleteAssicurazione(i.id))}),F(32,"i",26),C(33," Elimina "),v()()()}if(n&2){let t=e,r=k(2);Le("in-scadenza",r.isAssicurazioneInScadenza(t.dataFine))("scaduta",r.isAssicurazioneScaduta(t.dataFine)),b(5),G(r.isAssicurazioneInScadenza(t.dataFine)?5:-1),b(),G(r.isAssicurazioneScaduta(t.dataFine)?6:-1),b(5),se(" ",t.compagnia," "),b(4),se(" ",t.numeroPolizza," "),b(4),se(" ",r.formatDate(t.dataInizio)," "),b(4),Le("text-danger",r.isAssicurazioneInScadenza(t.dataFine)||r.isAssicurazioneScaduta(t.dataFine)),b(),se(" ",r.formatDate(t.dataFine)," "),b(4),se(" ",r.formatPrice(t.costoAnnuale)," "),b(),G(t.coperture&&t.coperture.length>0?29:-1)}}function $W(n,e){if(n&1){let t=ue();y(0,"div",12)(1,"h5",28),C(2,"Nuova Assicurazione"),v(),y(3,"div",20)(4,"div",21)(5,"label",29),C(6,"Compagnia *"),v(),y(7,"input",30),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newAssicurazione.compagnia,i)||(o.newAssicurazione.compagnia=i),q(i)}),v()(),y(8,"div",21)(9,"label",29),C(10,"Numero Polizza *"),v(),y(11,"input",30),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newAssicurazione.numeroPolizza,i)||(o.newAssicurazione.numeroPolizza=i),q(i)}),v()(),y(12,"div",22)(13,"label",29),C(14,"Data Inizio *"),v(),y(15,"input",31),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newAssicurazione.dataInizio,i)||(o.newAssicurazione.dataInizio=i),q(i)}),v()(),y(16,"div",22)(17,"label",29),C(18,"Data Fine *"),v(),y(19,"input",31),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newAssicurazione.dataFine,i)||(o.newAssicurazione.dataFine=i),q(i)}),v()(),y(20,"div",22)(21,"label",29),C(22,"Costo Annuale (\u20AC) *"),v(),y(23,"input",32),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newAssicurazione.costoAnnuale,i)||(o.newAssicurazione.costoAnnuale=i),q(i)}),v()(),y(24,"div",23)(25,"label",29),C(26,"Coperture (separate da virgola)"),v(),F(27,"input",33),v(),y(28,"div",34)(29,"button",35),Q("click",function(){H(t);let i=k(2);return q(i.addAssicurazione())}),F(30,"i",36),C(31," Aggiungi "),v()()()()}if(n&2){let t=k(2);b(7),de("ngModel",t.newAssicurazione.compagnia),b(4),de("ngModel",t.newAssicurazione.numeroPolizza),b(4),de("ngModel",t.newAssicurazione.dataInizio),b(4),de("ngModel",t.newAssicurazione.dataFine),b(4),de("ngModel",t.newAssicurazione.costoAnnuale)}}function HW(n,e){if(n&1&&(y(0,"div",44)(1,"strong"),C(2,"Coperture:"),v(),C(3),v()),n&2){let t=k().$implicit;b(3),se(" ",t.coperture.join(", ")," ")}}function qW(n,e){if(n&1){let t=ue();y(0,"div",39)(1,"div",40)(2,"div",41)(3,"div",20)(4,"div",42)(5,"strong"),C(6,"Compagnia:"),v(),C(7),v(),y(8,"div",42)(9,"strong"),C(10,"Polizza:"),v(),C(11),v(),y(12,"div",42)(13,"strong"),C(14,"Costo Annuale:"),v(),C(15),v(),y(16,"div",43)(17,"strong"),C(18,"Periodo:"),v(),C(19),v(),W(20,HW,4,1,"div",44),v()(),y(21,"button",45),Q("click",function(){let i=H(t).$implicit,o=k(3);return q(o.deleteAssicurazione(i.id))}),F(22,"i",46),v()()()}if(n&2){let t=e.$implicit,r=k(3);Le("in-scadenza",r.isAssicurazioneInScadenza(t.dataFine))("scaduta",r.isAssicurazioneScaduta(t.dataFine)),b(7),se(" ",t.compagnia," "),b(4),se(" ",t.numeroPolizza," "),b(4),se(" ",r.formatPrice(t.costoAnnuale)," "),b(4),Nr(" ",r.formatDate(t.dataInizio)," - ",r.formatDate(t.dataFine)," "),b(),G(t.coperture&&t.coperture.length>0?20:-1)}}function WW(n,e){if(n&1&&(F(0,"hr",37),y(1,"h5",28),C(2,"Storico Assicurazioni"),v(),lr(3,qW,23,10,"div",38,LW)),n&2){let t=k(2);b(3),ur(t.getStoricoAssicurazioni())}}function GW(n,e){if(n&1){let t=ue();y(0,"div",6),W(1,VW,6,0,"div",7),W(2,zW,34,14,"div",8),y(3,"div",9)(4,"button",10),Q("click",function(){H(t);let i=k();return q(i.toggleNewAssicurazioneForm())}),F(5,"i",11),C(6),v()(),W(7,$W,32,5,"div",12),W(8,WW,5,0),v()}if(n&2){let t,r=k();b(),G(r.getAssicurazioneAttiva()?-1:1),b(),G((t=r.getAssicurazioneAttiva())?2:-1,t),b(4),se(" ",r.showNewAssicurazioneForm()?"Annulla":"Aggiungi Nuova Assicurazione"," "),b(),G(r.showNewAssicurazioneForm()?7:-1),b(),G(r.getStoricoAssicurazioni().length>0?8:-1)}}var um=class n{car;carUpdated=new Fe;assicurazioniOpen=X(!1);showNewAssicurazioneForm=X(!1);newAssicurazione=this.getEmptyAssicurazione();toggleAssicurazioni(){this.assicurazioniOpen.set(!this.assicurazioniOpen())}toggleNewAssicurazioneForm(){this.showNewAssicurazioneForm.set(!this.showNewAssicurazioneForm()),this.showNewAssicurazioneForm()||(this.newAssicurazione=this.getEmptyAssicurazione())}getAssicurazioneAttiva(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return null;let e=new Date;return e.setHours(0,0,0,0),this.car.assicurazioni.find(r=>{let i=new Date(r.dataInizio),o=new Date(r.dataFine);return i.setHours(0,0,0,0),o.setHours(0,0,0,0),i<=e&&o>=e})||null}getStoricoAssicurazioni(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return[];let e=this.getAssicurazioneAttiva();return[...this.car.assicurazioni].filter(t=>!e||t.id!==e.id).sort((t,r)=>new Date(r.dataInizio).getTime()-new Date(t.dataInizio).getTime())}isAssicurazioneInScadenza(e){let t=new Date,i=new Date(e).getTime()-t.getTime(),o=Math.ceil(i/(1e3*60*60*24));return o<=30&&o>=0}isAssicurazioneScaduta(e){let t=new Date;return new Date(e)<t}addAssicurazione(){if(!this.newAssicurazione.compagnia||!this.newAssicurazione.numeroPolizza||!this.newAssicurazione.dataInizio||!this.newAssicurazione.dataFine){alert("Compila tutti i campi obbligatori");return}let e=new Date(this.newAssicurazione.dataInizio),t=new Date(this.newAssicurazione.dataFine);if(t<=e){alert("La data di fine deve essere successiva alla data di inizio");return}if(this.car.assicurazioni)for(let i of this.car.assicurazioni){let o=new Date(i.dataInizio),s=new Date(i.dataFine);if(e>=o&&e<=s||t>=o&&t<=s||e<=o&&t>=s){alert("Le date si sovrappongono con un'altra assicurazione esistente");return}}let r={id:Date.now().toString(),compagnia:this.newAssicurazione.compagnia.toUpperCase(),numeroPolizza:this.newAssicurazione.numeroPolizza.toUpperCase(),dataInizio:this.newAssicurazione.dataInizio,dataFine:this.newAssicurazione.dataFine,costoAnnuale:this.newAssicurazione.costoAnnuale||0,coperture:[]};this.car.assicurazioni||(this.car.assicurazioni=[]),this.car.assicurazioni.push(r),this.carUpdated.emit(this.car),this.toggleNewAssicurazioneForm()}deleteAssicurazione(e){confirm("Sei sicuro di voler eliminare questa assicurazione?")&&(this.car.assicurazioni=this.car.assicurazioni?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}getEmptyAssicurazione(){return{id:"",compagnia:"",numeroPolizza:"",dataInizio:new Date,dataFine:new Date,costoAnnuale:0,coperture:[]}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-assicurazioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-shield-fill-check","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"assicurazione-attiva","mb-4",3,"in-scadenza","scaduta"],[1,"mb-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"new-assicurazione-form","mb-4"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"assicurazione-attiva","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"bi","bi-shield-check","text-success","me-2"],[1,"badge","bg-warning"],[1,"badge","bg-danger"],[1,"row"],[1,"col-md-6","mb-3"],[1,"col-md-4","mb-3"],[1,"col-12","mb-3"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash","me-1"],[1,"mb-0","mt-1"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","RCA, FURTO, INCENDIO",1,"form-control","text-uppercase"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"my-4"],[1,"assicurazione-item","mb-3",3,"in-scadenza","scaduta"],[1,"assicurazione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"col-md-4"],[1,"col-md-6","mt-2"],[1,"col-12","mt-2"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"bi","bi-trash"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),Q("click",function(){return r.toggleAssicurazioni()}),y(2,"div",2),F(3,"i",3),y(4,"span",4),C(5,"Assicurazioni"),v()(),F(6,"i",5),v(),W(7,GW,9,5,"div",6),v()),t&2&&(b(6),Le("bi-chevron-up",r.assicurazioniOpen())("bi-chevron-down",!r.assicurazioniOpen()),b(),G(r.assicurazioniOpen()?7:-1))},dependencies:[Ge,en,xt,Vn,Xt,zt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.assicurazione-attiva[_ngcontent-%COMP%]{background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:1.5rem}.new-assicurazione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.assicurazione-storico[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var KW=(n,e)=>e.id;function YW(n,e){if(n&1){let t=ue();y(0,"div",10)(1,"h5",12),C(2,"Nuovo Tagliando"),v(),y(3,"div",13)(4,"div",14)(5,"label",15),C(6,"Data *"),v(),y(7,"input",16),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newTagliando.data,i)||(o.newTagliando.data=i),q(i)}),v()(),y(8,"div",14)(9,"label",15),C(10,"Chilometraggio *"),v(),y(11,"input",17),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newTagliando.chilometraggio,i)||(o.newTagliando.chilometraggio=i),q(i)}),v()(),y(12,"div",18)(13,"label",15),C(14,"Descrizione *"),v(),y(15,"textarea",19),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newTagliando.descrizione,i)||(o.newTagliando.descrizione=i),q(i)}),v()(),y(16,"div",14)(17,"label",15),C(18,"Costo (\u20AC)"),v(),y(19,"input",20),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newTagliando.costo,i)||(o.newTagliando.costo=i),q(i)}),v()(),y(20,"div",21)(21,"button",22),Q("click",function(){H(t);let i=k(2);return q(i.addTagliando())}),F(22,"i",23),C(23," Aggiungi "),v()()()()}if(n&2){let t=k(2);b(7),de("ngModel",t.newTagliando.data),b(4),de("ngModel",t.newTagliando.chilometraggio),b(4),de("ngModel",t.newTagliando.descrizione),b(4),de("ngModel",t.newTagliando.costo)}}function QW(n,e){if(n&1){let t=ue();y(0,"div",24)(1,"div",25)(2,"div",26)(3,"div",13)(4,"div",27)(5,"strong"),C(6,"Data:"),v(),C(7),v(),y(8,"div",27)(9,"strong"),C(10,"Km:"),v(),C(11),v(),y(12,"div",27)(13,"strong"),C(14,"Costo:"),v(),C(15),v(),y(16,"div",28)(17,"strong"),C(18,"Descrizione:"),v(),y(19,"p",29),C(20),v()()()(),y(21,"button",30),Q("click",function(){let i=H(t).$implicit,o=k(3);return q(o.deleteTagliando(i.id))}),F(22,"i",31),v()()()}if(n&2){let t=e.$implicit,r=k(3);b(7),se(" ",r.formatDate(t.data)," "),b(4),se(" ",t.chilometraggio.toLocaleString("it-IT")," "),b(4),se(" ",r.formatPrice(t.costo)," "),b(5),Ve(t.descrizione)}}function ZW(n,e){if(n&1&&(y(0,"h5",12),C(1,"Storico Tagliandi"),v(),lr(2,QW,23,4,"div",24,KW)),n&2){let t=k(2);b(2),ur(t.getTagliandiOrdinati())}}function JW(n,e){n&1&&(y(0,"div",11),F(1,"i",32),C(2," Non ci sono tagliandi registrati per questa auto. "),v())}function XW(n,e){if(n&1){let t=ue();y(0,"div",6)(1,"div",7)(2,"button",8),Q("click",function(){H(t);let i=k();return q(i.toggleNewTagliandoForm())}),F(3,"i",9),C(4),v()(),W(5,YW,24,4,"div",10),W(6,ZW,4,0)(7,JW,3,0,"div",11),v()}if(n&2){let t=k();b(4),se(" ",t.showNewTagliandoForm()?"Annulla":"Aggiungi Nuovo Tagliando"," "),b(),G(t.showNewTagliandoForm()?5:-1),b(),G(t.getTagliandiOrdinati().length>0?6:7)}}var dm=class n{car;carUpdated=new Fe;tagliandiOpen=X(!1);showNewTagliandoForm=X(!1);newTagliando=this.getEmptyTagliando();toggleTagliandi(){this.tagliandiOpen.set(!this.tagliandiOpen())}toggleNewTagliandoForm(){this.showNewTagliandoForm.set(!this.showNewTagliandoForm()),this.showNewTagliandoForm()||(this.newTagliando=this.getEmptyTagliando())}getTagliandiOrdinati(){return!this.car.tagliandi||this.car.tagliandi.length===0?[]:[...this.car.tagliandi].sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime())}addTagliando(){if(!this.newTagliando.data||!this.newTagliando.chilometraggio){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newTagliando.data,chilometraggio:this.newTagliando.chilometraggio,descrizione:this.newTagliando.descrizione?.toUpperCase()||"",costo:this.newTagliando.costo};this.car.tagliandi||(this.car.tagliandi=[]),this.car.tagliandi.push(e),this.carUpdated.emit(this.car),this.toggleNewTagliandoForm()}deleteTagliando(e){confirm("Sei sicuro di voler eliminare questo tagliando?")&&(this.car.tagliandi=this.car.tagliandi?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}getEmptyTagliando(){return{id:"",data:new Date,chilometraggio:0,descrizione:"",costo:0}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-tagliandi"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-wrench-adjustable-circle-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"mb-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"new-tagliando-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12","mb-3"],["rows","4","placeholder","Descrivi le operazioni effettuate (es. CAMBIO OLIO, FILTRI, PASTIGLIE FRENO...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"tagliando-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"col-12","mt-2"],[1,"mb-0","mt-1","text-muted"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),Q("click",function(){return r.toggleTagliandi()}),y(2,"div",2),F(3,"i",3),y(4,"span",4),C(5,"Tagliandi"),v()(),F(6,"i",5),v(),W(7,XW,8,3,"div",6),v()),t&2&&(b(6),Le("bi-chevron-up",r.tagliandiOpen())("bi-chevron-down",!r.tagliandiOpen()),b(),G(r.tagliandiOpen()?7:-1))},dependencies:[Ge,en,xt,Vn,Xt,gi,zt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.new-tagliando-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.tagliando-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.tagliando-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.tagliando-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var eG=(n,e)=>e.id;function tG(n,e){if(n&1&&(y(0,"div",8),F(1,"i",17),y(2,"div")(3,"strong"),C(4,"Revisione non ancora richiesta"),v(),F(5,"br"),C(6," Auto nei primi 4 anni. Prima revisione prevista per: "),y(7,"strong"),C(8),v()()()),n&2){let t=k(2);b(8),Ve(t.formatDate(t.getDataProssimaRevisione()))}}function nG(n,e){if(n&1&&(y(0,"div",9),F(1,"i",18),y(2,"div")(3,"strong"),C(4,"Revisione valida"),v(),F(5,"br"),C(6," Prossima revisione prevista per: "),y(7,"strong"),C(8),v()()()),n&2){let t=k(2);b(8),Ve(t.formatDate(t.getDataProssimaRevisione()))}}function rG(n,e){if(n&1&&(y(0,"div",10),F(1,"i",19),y(2,"div")(3,"strong"),C(4,"Attenzione! Revisione in scadenza"),v(),F(5,"br"),C(6," Scadenza prevista per: "),y(7,"strong",20),C(8),v(),F(9,"br"),y(10,"small"),C(11,"Manca meno di un mese alla scadenza. Prenota subito la revisione!"),v()()()),n&2){let t=k(2);b(8),Ve(t.formatDate(t.getDataProssimaRevisione()))}}function iG(n,e){if(n&1&&(C(0," Data scadenza: "),y(1,"strong"),C(2),v(),F(3,"br")),n&2){let t=k(3);b(2),Ve(t.formatDate(t.getDataProssimaRevisione()))}}function oG(n,e){if(n&1&&(y(0,"div",11),F(1,"i",21),y(2,"div")(3,"strong"),C(4,"Revisione scaduta!"),v(),F(5,"br"),W(6,iG,4,1),y(7,"small"),C(8,"Auto non in regola. Effettua immediatamente la revisione."),v()()()),n&2){let t=k(2);b(6),G(t.getDataProssimaRevisione()?6:-1)}}function sG(n,e){if(n&1){let t=ue();y(0,"div",15)(1,"h5",22),C(2,"Nuova Revisione"),v(),y(3,"div",23)(4,"div",24)(5,"label",25),C(6,"Data *"),v(),y(7,"input",26),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newRevisione.data,i)||(o.newRevisione.data=i),q(i)}),v()(),y(8,"div",24)(9,"label",25),C(10,"Chilometraggio *"),v(),y(11,"input",27),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newRevisione.chilometraggio,i)||(o.newRevisione.chilometraggio=i),q(i)}),v()(),y(12,"div",24)(13,"label",25),C(14,"Esito *"),v(),y(15,"select",28),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newRevisione.esito,i)||(o.newRevisione.esito=i),q(i)}),y(16,"option",29),C(17,"Positiva"),v(),y(18,"option",30),C(19,"Negativa"),v()()(),y(20,"div",31)(21,"label",25),C(22,"Note"),v(),y(23,"textarea",32),fe("ngModelChange",function(i){H(t);let o=k(2);return ge(o.newRevisione.note,i)||(o.newRevisione.note=i),q(i)}),v()(),y(24,"div",33)(25,"button",34),Q("click",function(){H(t);let i=k(2);return q(i.addRevisione())}),F(26,"i",35),C(27," Aggiungi "),v()()()()}if(n&2){let t=k(2);b(7),de("ngModel",t.newRevisione.data),b(4),de("ngModel",t.newRevisione.chilometraggio),b(4),de("ngModel",t.newRevisione.esito),b(8),de("ngModel",t.newRevisione.note)}}function aG(n,e){if(n&1&&(y(0,"div",42)(1,"strong"),C(2,"Note:"),v(),y(3,"p",45),C(4),v()()),n&2){let t=k().$implicit;b(4),Ve(t.note)}}function cG(n,e){if(n&1){let t=ue();y(0,"div",37)(1,"div",38)(2,"div",39)(3,"div",23)(4,"div",40)(5,"strong"),C(6,"Data:"),v(),C(7),v(),y(8,"div",40)(9,"strong"),C(10,"Km:"),v(),C(11),v(),y(12,"div",40)(13,"strong"),C(14,"Esito:"),v(),y(15,"span",41),C(16),v()(),W(17,aG,5,1,"div",42),v()(),y(18,"button",43),Q("click",function(){let i=H(t).$implicit,o=k(3);return q(o.deleteRevisione(i.id))}),F(19,"i",44),v()()()}if(n&2){let t=e.$implicit,r=k(3);Le("revisione-negativa",t.esito==="negativa"),b(7),se(" ",r.formatDate(t.data)," "),b(4),se(" ",t.chilometraggio.toLocaleString("it-IT")," "),b(4),Le("bg-success",t.esito==="positiva")("bg-danger",t.esito==="negativa"),b(),se(" ",t.esito==="positiva"?"Positiva":"Negativa"," "),b(),G(t.note?17:-1)}}function lG(n,e){if(n&1&&(y(0,"h5",22),C(1,"Storico Revisioni"),v(),lr(2,cG,20,10,"div",36,eG)),n&2){let t=k(2);b(2),ur(t.getRevisioniOrdinate())}}function uG(n,e){n&1&&(y(0,"div",16),F(1,"i",46),C(2," Non ci sono revisioni registrate per questa auto. "),v())}function dG(n,e){if(n&1){let t=ue();y(0,"div",6)(1,"div",7),W(2,tG,9,1,"div",8),W(3,nG,9,1,"div",9),W(4,rG,12,1,"div",10),W(5,oG,9,1,"div",11),v(),y(6,"div",12)(7,"button",13),Q("click",function(){H(t);let i=k();return q(i.toggleNewRevisioneForm())}),F(8,"i",14),C(9),v()(),W(10,sG,28,4,"div",15),W(11,lG,4,0)(12,uG,3,0,"div",16),v()}if(n&2){let t=k();b(2),G(t.getStatoRevisione()==="non_richiesta"?2:-1),b(),G(t.getStatoRevisione()==="valida"?3:-1),b(),G(t.getStatoRevisione()==="in_scadenza"?4:-1),b(),G(t.getStatoRevisione()==="scaduta"?5:-1),b(4),se(" ",t.showNewRevisioneForm()?"Annulla":"Aggiungi Nuova Revisione"," "),b(),G(t.showNewRevisioneForm()?10:-1),b(),G(t.getRevisioniOrdinate().length>0?11:12)}}var fm=class n{car;carUpdated=new Fe;revisioniOpen=X(!1);showNewRevisioneForm=X(!1);newRevisione=this.getEmptyRevisione();toggleRevisioni(){this.revisioniOpen.set(!this.revisioniOpen())}toggleNewRevisioneForm(){this.showNewRevisioneForm.set(!this.showNewRevisioneForm()),this.showNewRevisioneForm()||(this.newRevisione=this.getEmptyRevisione())}getRevisioniOrdinate(){return!this.car.revisioni||this.car.revisioni.length===0?[]:[...this.car.revisioni].sort((e,t)=>new Date(t.data).getTime()-new Date(e.data).getTime())}getDataProssimaRevisione(){if(!this.car.dataDiAcquisto)return null;let e=new Date(this.car.dataDiAcquisto);if((new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let i=this.getRevisioniOrdinate();if(i.length===0){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let o=new Date(i[0].data),s=new Date(o);return s.setFullYear(s.getFullYear()+2),s}isRevisioneInScadenza(){let e=this.getDataProssimaRevisione();if(!e)return!1;let t=new Date,r=e.getTime()-t.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<=30&&i>0}isRevisioneScaduta(){let e=this.getDataProssimaRevisione();return e?e<new Date:!1}getStatoRevisione(){if(!this.car.dataDiAcquisto)return"non_richiesta";let e=new Date(this.car.dataDiAcquisto);return(new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4?"non_richiesta":this.isRevisioneScaduta()?"scaduta":this.isRevisioneInScadenza()?"in_scadenza":"valida"}addRevisione(){if(!this.newRevisione.data||!this.newRevisione.chilometraggio||!this.newRevisione.esito){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newRevisione.data,chilometraggio:this.newRevisione.chilometraggio,esito:this.newRevisione.esito,note:this.newRevisione.note?.toUpperCase()};this.car.revisioni||(this.car.revisioni=[]),this.car.revisioni.push(e),this.carUpdated.emit(this.car),this.toggleNewRevisioneForm()}deleteRevisione(e){confirm("Sei sicuro di voler eliminare questa revisione?")&&(this.car.revisioni=this.car.revisioni?.filter(t=>t.id!==e),this.carUpdated.emit(this.car))}getEmptyRevisione(){return{id:"",data:new Date,chilometraggio:0,esito:"positiva",note:""}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-sezione-revisioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-clipboard-check-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"revisione-status","mb-4"],["role","alert",1,"alert","alert-info","d-flex","align-items-center"],["role","alert",1,"alert","alert-success","d-flex","align-items-center"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center"],[1,"mb-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"new-revisione-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"bi","bi-info-circle-fill","fs-3","me-3"],[1,"bi","bi-check-circle-fill","fs-3","me-3"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"text-danger"],[1,"bi","bi-x-circle-fill","fs-3","me-3"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","positiva"],["value","negativa"],[1,"col-md-12","mb-3"],["rows","3","placeholder","Note aggiuntive (es. PRESCRIZIONI, DIFETTI RISCONTRATI...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"revisione-item","mb-3",3,"revisione-negativa"],[1,"revisione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"badge"],[1,"col-12","mt-2"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"bi","bi-trash"],[1,"mb-0","mt-1","text-muted"],[1,"bi","bi-info-circle","me-2"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),Q("click",function(){return r.toggleRevisioni()}),y(2,"div",2),F(3,"i",3),y(4,"span",4),C(5,"Revisioni"),v()(),F(6,"i",5),v(),W(7,dG,13,7,"div",6),v()),t&2&&(b(6),Le("bi-chevron-up",r.revisioniOpen())("bi-chevron-down",!r.revisioniOpen()),b(),G(r.revisioniOpen()?7:-1))},dependencies:[Ge,en,YP,ZP,xt,Vn,Rp,Xt,gi,zt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.revisione-status[_ngcontent-%COMP%]{margin-bottom:1.5rem}.new-revisione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.revisione-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.revisione-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.revisione-item[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function fG(n,e){n&1&&(y(0,"div",2)(1,"div",4)(2,"span",5),C(3,"Caricamento..."),v()()())}function hG(n,e){if(n&1&&(y(0,"div",3),F(1,"i",6),C(2),v()),n&2){let t=k();b(2),se(" ",t.error()," ")}}function pG(n,e){if(n&1){let t=ue();y(0,"div",15),F(1,"i",20),C(2),y(3,"button",21),Q("click",function(){H(t);let i=k(2);return q(i.successMessage.set(null))}),v()()}if(n&2){let t=k(2);b(2),se(" ",t.successMessage()," ")}}function gG(n,e){if(n&1){let t=ue();y(0,"div",16),F(1,"i",22),C(2),y(3,"button",21),Q("click",function(){H(t);let i=k(2);return q(i.errorMessage.set(null))}),v()()}if(n&2){let t=k(2);b(2),se(" ",t.errorMessage()," ")}}function mG(n,e){if(n&1){let t=ue();y(0,"app-sezione-anagrafica",23),Q("carUpdated",function(i){H(t);let o=k(2);return q(o.onCarUpdated(i))}),v()}if(n&2){let t=k(2);we("car",t.car())("proprietario",t.proprietario())}}function vG(n,e){if(n&1){let t=ue();y(0,"app-sezione-coproprietari",24),Q("carUpdated",function(i){H(t);let o=k(2);return q(o.onCarUpdated(i))}),v()}if(n&2){let t=k(2);we("car",t.car())}}function yG(n,e){if(n&1){let t=ue();y(0,"app-sezione-assicurazioni",24),Q("carUpdated",function(i){H(t);let o=k(2);return q(o.onCarUpdated(i))}),v()}if(n&2){let t=k(2);we("car",t.car())}}function _G(n,e){if(n&1){let t=ue();y(0,"app-sezione-tagliandi",24),Q("carUpdated",function(i){H(t);let o=k(2);return q(o.onCarUpdated(i))}),v()}if(n&2){let t=k(2);we("car",t.car())}}function EG(n,e){if(n&1){let t=ue();y(0,"app-sezione-revisioni",24),Q("carUpdated",function(i){H(t);let o=k(2);return q(o.onCarUpdated(i))}),v()}if(n&2){let t=k(2);we("car",t.car())}}function CG(n,e){if(n&1){let t=ue();y(0,"div",7)(1,"div",8)(2,"div")(3,"h1",9),F(4,"i",10),C(5),v(),y(6,"p",11),C(7,"Targa: "),y(8,"strong",12),C(9),v()()(),y(10,"button",13),Q("click",function(){H(t);let i=k();return q(i.goBack())}),F(11,"i",14),C(12," Torna all'elenco "),v()()(),W(13,pG,4,1,"div",15),W(14,gG,4,1,"div",16),y(15,"div",17),W(16,mG,1,2,"app-sezione-anagrafica",18),W(17,vG,1,1,"app-sezione-coproprietari",19),W(18,yG,1,1,"app-sezione-assicurazioni",19),W(19,_G,1,1,"app-sezione-tagliandi",19),W(20,EG,1,1,"app-sezione-revisioni",19),v()}if(n&2){let t=k();b(5),Nr(" ",t.car().marca," ",t.car().modello," "),b(4),Ve(t.car().targa),b(4),G(t.successMessage()?13:-1),b(),G(t.errorMessage()?14:-1),b(2),G(t.car()&&t.proprietario()?16:-1),b(),G(t.car()?17:-1),b(),G(t.car()?18:-1),b(),G(t.car()?19:-1),b(),G(t.car()?20:-1)}}var hm=class n{route=R(hr);router=R(Ot);carService=R(ho);userService=R(Yr);car=X(null);proprietario=X(null);loading=X(!0);error=X(null);successMessage=X(null);errorMessage=X(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("targa");if(!e){this.error.set("Targa non specificata"),this.loading.set(!1);return}this.loadCar(e)}async loadCar(e){this.carService.getByTarga(e).subscribe({next:async t=>{t?(t.assicurazioni||(t.assicurazioni=[]),t.tagliandi||(t.tagliandi=[]),t.revisioni||(t.revisioni=[]),t.coProprietari||(t.coProprietari=[]),this.car.set(t),this.proprietario.set(t.proprietario)):this.error.set("Auto non trovata"),this.loading.set(!1)},error:t=>{console.error("Errore nel caricamento dell'auto:",t),this.error.set("Errore nel caricamento dell'auto"),this.loading.set(!1)}})}onCarUpdated(e){let t=this.cleanUndefinedFields(e);this.carService.update(e.targa,t).subscribe({next:()=>{this.successMessage.set("Modifiche salvate con successo"),this.car.set(e),setTimeout(()=>this.successMessage.set(null),3e3)},error:r=>{console.error("Errore nell'aggiornamento:",r),this.errorMessage.set("Errore nel salvataggio delle modifiche"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}cleanUndefinedFields(e){if(e==null)return null;if(e instanceof Date)return e;if(Array.isArray(e))return e.map(t=>this.cleanUndefinedFields(t));if(typeof e=="object"){let t={};for(let r in e)e.hasOwnProperty(r)&&e[r]!==void 0&&(t[r]=this.cleanUndefinedFields(e[r]));return t}return e}goBack(){this.router.navigate(["/elenco-auto"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-dettaglio-auto"]],decls:5,vars:3,consts:[[1,"dettaglio-auto-container"],[1,"container"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"page-header"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"page-subtitle"],[1,"text-uppercase"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-left","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"accordion-sections"],[3,"car","proprietario"],[3,"car"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[3,"carUpdated","car","proprietario"],[3,"carUpdated","car"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1),W(2,fG,4,0,"div",2),W(3,hG,3,1,"div",3),W(4,CG,21,10),v()()),t&2&&(b(2),G(r.loading()?2:-1),b(),G(r.error()?3:-1),b(),G(!r.loading()&&!r.error()&&r.car()?4:-1))},dependencies:[Ge,cm,lm,um,dm,fm],styles:[".dettaglio-auto-container[_ngcontent-%COMP%]{padding:2rem 0;min-height:100vh}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:600}.dettaglio-auto-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 767px){.dettaglio-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function wG(n,e){if(n&1){let t=ue();y(0,"div",8),F(1,"i",20),C(2),y(3,"button",21),Q("click",function(){H(t);let i=k();return q(i.errorMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.errorMessage()," ")}}function IG(n,e){if(n&1){let t=ue();y(0,"div",9),F(1,"i",22),C(2),y(3,"button",21),Q("click",function(){H(t);let i=k();return q(i.successMessage.set(null))}),v()()}if(n&2){let t=k();b(2),se(" ",t.successMessage()," ")}}function bG(n,e){if(n&1){let t=ue();y(0,"div",11)(1,"div",12)(2,"input",23),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.nome,i)||(o.nome=i),q(i)}),v(),y(3,"label",24),F(4,"i",25),C(5,"Nome "),v()(),y(6,"div",12)(7,"input",26),fe("ngModelChange",function(i){H(t);let o=k();return ge(o.cognome,i)||(o.cognome=i),q(i)}),v(),y(8,"label",27),F(9,"i",25),C(10,"Cognome "),v()()()}if(n&2){let t=k();b(2),de("ngModel",t.nome),b(5),de("ngModel",t.cognome)}}function TG(n,e){if(n&1&&(F(0,"span",28),C(1)),n&2){let t=k();b(),se(" ",t.isRegisterMode()?"Registrazione...":"Accesso..."," ")}}function DG(n,e){if(n&1&&(F(0,"i",29),C(1)),n&2){let t=k();Le("bi-box-arrow-in-right",!t.isRegisterMode())("bi-person-plus-fill",t.isRegisterMode()),b(),se(" ",t.isRegisterMode()?"Registrati":"Accedi"," ")}}var pm=class n{authService=R(En);router=R(Ot);isRegisterMode=X(!1);isLoading=X(!1);errorMessage=X(null);successMessage=X(null);currentYear=new Date().getFullYear();nome="";cognome="";codiceFiscale="";toggleMode(){this.isRegisterMode.update(e=>!e),this.clearMessages(),this.nome="",this.cognome="",this.codiceFiscale=""}onSubmit(){if(this.clearMessages(),!this.codiceFiscale.trim()){this.errorMessage.set("Inserisci il codice fiscale.");return}if(this.codiceFiscale.length!==16){this.errorMessage.set("Il codice fiscale deve essere di 16 caratteri.");return}if(this.isRegisterMode()&&(!this.nome.trim()||!this.cognome.trim())){this.errorMessage.set("Inserisci nome e cognome.");return}this.isLoading.set(!0),this.isRegisterMode()?this.handleRegister():this.handleLogin()}handleLogin(){this.authService.loginByCodiceFiscale(this.codiceFiscale.toUpperCase()).subscribe({next:e=>{this.isLoading.set(!1),e.success?(this.successMessage.set("Login effettuato con successo!"),setTimeout(()=>{this.router.navigate(["/"])},500)):this.errorMessage.set(e.message||"Errore durante il login.")},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante il login. Riprova."),console.error("Errore login:",e)}})}handleRegister(){let e={nome:this.nome.trim().toUpperCase(),cognome:this.cognome.trim().toUpperCase(),codiceFiscale:this.codiceFiscale.trim().toUpperCase(),email:null,dataDiNascita:null,annoConseguimentoPatente:null};this.authService.register(e).subscribe({next:t=>{this.isLoading.set(!1),t.success?(this.successMessage.set("Registrazione completata! Accesso in corso..."),setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage.set(t.message||"Errore durante la registrazione.")},error:t=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante la registrazione. Riprova."),console.error("Errore registrazione:",t)}})}clearMessages(){this.errorMessage.set(null),this.successMessage.set(null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"card-header"],[1,"logo"],[1,"bi","bi-car-front-fill"],[1,"title"],[1,"subtitle"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[3,"ngSubmit"],[1,"register-fields"],[1,"form-floating","mb-3"],["type","text","id","codiceFiscale","placeholder","Codice Fiscale","name","codiceFiscale","maxlength","16","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","codiceFiscale"],[1,"bi","bi-credit-card-fill","me-2"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"toggle-text"],["type","button",1,"btn","btn-link",3,"click","disabled"],[1,"bi","bi-exclamation-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-check-circle-fill","me-2"],["type","text","id","nome","placeholder","Nome","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","nome"],[1,"bi","bi-person-fill","me-2"],["type","text","id","cognome","placeholder","Cognome","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","cognome"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"me-2"]],template:function(t,r){t&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),F(4,"i",4),v(),y(5,"h2",5),C(6),v(),y(7,"p",6),C(8),v()(),y(9,"div",7),W(10,wG,4,1,"div",8),W(11,IG,4,1,"div",9),y(12,"form",10),Q("ngSubmit",function(){return r.onSubmit()}),W(13,bG,11,2,"div",11),y(14,"div",12)(15,"input",13),fe("ngModelChange",function(o){return ge(r.codiceFiscale,o)||(r.codiceFiscale=o),o}),v(),y(16,"label",14),F(17,"i",15),C(18,"Codice Fiscale "),v()(),y(19,"button",16),W(20,TG,2,1)(21,DG,2,5),v()(),y(22,"div",17)(23,"p",18),C(24),y(25,"button",19),Q("click",function(){return r.toggleMode()}),C(26),v()()()()()()),t&2&&(b(6),Ve(r.isRegisterMode()?"Registrati":"Benvenuto"),b(2),Ve(r.isRegisterMode()?"Crea il tuo account":"Accedi al tuo account"),b(2),G(r.errorMessage()?10:-1),b(),G(r.successMessage()?11:-1),b(2),G(r.isRegisterMode()?13:-1),b(2),de("ngModel",r.codiceFiscale),b(4),we("disabled",r.isLoading()),b(),G(r.isLoading()?20:21),b(4),se(" ",r.isRegisterMode()?"Hai gi\xE0 un account?":"Non hai un account?"," "),b(),we("disabled",r.isLoading()),b(),se(" ",r.isRegisterMode()?"Accedi":"Registrati"," "))},dependencies:[en,Ua,xt,Xt,Va,rs,is,zt,ns,Ge],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:3rem 2rem 2rem;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.2))}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:1.5rem .75rem .5rem;height:auto;min-height:58px;font-size:1rem;line-height:1.5;transition:all .3s ease;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-.75rem) translate(.15rem)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem .75rem;color:#64748b;transform-origin:0 0;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-fields[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:1rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:#64748b;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;padding:0 .25rem;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:3rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Qu=(n,e)=>{let t=R(En),r=R(Ot);return t.isAuthenticated()?!0:r.createUrlTree(["/login"])};var KN=[{path:"login",component:pm},{path:"",component:om,canActivate:[Qu]},{path:"elenco-auto",component:sm,canActivate:[Qu]},{path:"nuova-auto",component:am,canActivate:[Qu]},{path:"dettaglio-auto/:targa",component:hm,canActivate:[Qu],data:{prerender:!1}},{path:"**",redirectTo:"login"}];var II="Service workers are disabled or not supported by this browser",mc=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new ce(r=>r.error(new z(5601,!1)));else{let r=null,i=new et;this.worker=new ce(u=>(r!==null&&u.next(r),i.subscribe(f=>u.next(f))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Tt(()=>e.getRegistration().then(u=>{if(!u)throw new z(5601,!1);return u})));let s=new et;this.events=s.asObservable();let a=u=>{let{data:f}=u;f?.type&&s.next(f)};e.addEventListener("message",a),t?.get(St,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(sn(1)).subscribe(i=>{i.postMessage(V({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(mt(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(sn(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(mt(i=>i.nonce===e),sn(1),J(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},SG=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new et;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ei,this.notificationClicks=ei,this.notificationCloses=ei,this.pushSubscriptionChanges=ei,this.subscription=ei;return}this.messages=this.sw.eventsOfType("PUSH").pipe(J(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(J(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(J(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(J(i=>i.data)),this.pushManager=this.sw.registration.pipe(J(i=>i.pushManager));let r=this.pushManager.pipe(Tt(i=>i.getSubscription()));this.subscription=new ce(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(II));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Tt(l=>l.subscribe(r)),sn(1)).subscribe({next:l=>{this.subscriptionChanges.next(l),s(l)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(II));let t=r=>{if(r===null)throw new z(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new z(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(sn(1),Tt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(me(mc))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})(),AG=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ei,this.unrecoverable=ei;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(II));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new z(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(me(mc))};static \u0275prov=Z({token:n,factory:n.\u0275fac})}return n})();var QN=new $("");function MG(){let n=R(Zu);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=R(QN),t=R(xe),r=R(St);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=YN(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),YN(+a[0])]);break;default:throw new z(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(s=>console.error(ir(5604,!1)))})})}function YN(n){return new Promise(e=>setTimeout(e,n))}function RG(n,e){return new mc(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Zu=class{enabled;updateViaCache;type;scope;registrationStrategy};function ZN(n,e={}){return At([SG,AG,{provide:QN,useValue:n},{provide:Zu,useValue:e},{provide:mc,useFactory:RG,deps:[Zu,st]},bh(MG)])}var JN={production:!0,firebase:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}};var XN={providers:[ly(),tE(),t0(KN),NR(xR()),ZN("ngsw-worker.js",{enabled:!Sl(),registrationStrategy:"registerWhenStable:30000"}),P1(()=>O1(JN.firebase)),HN(()=>WN())]};var PG=()=>({exact:!0}),gm=class n{authService=R(En);isMobileMenuOpen=X(!1);toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}logout(){this.closeMobileMenu(),this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-header"]],decls:32,vars:2,consts:[[1,"mobile-navbar","d-lg-none"],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","py-3"],[1,"app-title","mb-0"],[1,"bi","bi-car-front-fill","me-2"],["type","button",1,"btn","btn-link","logout-btn-mobile",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"sidebar","d-none","d-lg-flex"],[1,"sidebar-header"],[1,"app-title"],[1,"bi","bi-car-front-fill"],[1,"ms-2"],[1,"sidebar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"ms-3"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-plus-circle-fill"],[1,"sidebar-footer"],["type","button",1,"logout-btn",3,"click"]],template:function(t,r){t&1&&(y(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3),F(4,"i",4),C(5," Car Handler "),v(),y(6,"button",5),Q("click",function(){return r.logout()}),F(7,"i",6),v()()()(),y(8,"aside",7)(9,"div",8)(10,"h1",9),F(11,"i",10),y(12,"span",11),C(13,"Car Handler"),v()()(),y(14,"nav",12)(15,"a",13),F(16,"i",14),y(17,"span",15),C(18,"Homepage"),v()(),y(19,"a",16),F(20,"i",17),y(21,"span",15),C(22,"Elenco Auto"),v()(),y(23,"a",18),F(24,"i",19),y(25,"span",15),C(26,"Nuova Auto"),v()()(),y(27,"div",20)(28,"button",21),Q("click",function(){return r.logout()}),F(29,"i",6),y(30,"span",11),C(31,"Logout"),v()()()()),t&2&&(b(15),we("routerLinkActiveOptions",bl(1,PG)))},dependencies:[Vr,iu,Ge],styles:['.mobile-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 10px #0000001a;z-index:1030}.mobile-navbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.5px}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;padding:0;border:none;transition:transform .3s ease}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover, .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background:linear-gradient(180deg,#667eea,#764ba2);box-shadow:2px 0 15px #0000001a;flex-direction:column;z-index:1000;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;letter-spacing:-.5px;margin:0}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#fffc;font-weight:500;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border-left:3px solid transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:0;height:100%;background:#ffffff1a;transition:width .3s ease;z-index:0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background:#ffffff26;border-left-color:#fff;font-weight:600;box-shadow:inset 0 0 15px #0000001a}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 10px #ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:.875rem 1rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}']})};var OG=()=>({exact:!0}),mm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-footer"]],decls:13,vars:2,consts:[[1,"bottom-nav","d-lg-none"],["routerLink","/","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"nav-label"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-plus-circle-fill"]],template:function(t,r){t&1&&(y(0,"nav",0)(1,"a",1),F(2,"i",2),y(3,"span",3),C(4,"Home"),v()(),y(5,"a",4),F(6,"i",5),y(7,"span",3),C(8,"Elenco"),v()(),y(9,"a",6),F(10,"i",7),y(11,"span",3),C(12,"Nuova"),v()()()),t&2&&(b(),we("routerLinkActiveOptions",bl(1,OG)))},dependencies:[Vr,iu,Ge],styles:['.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;height:65px;background:#fff;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:space-around;align-items:center;z-index:1000;padding:.5rem 0}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;text-decoration:none;color:#94a3b8;transition:all .3s ease;padding:.5rem;position:relative}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%) scaleX(0);width:40px;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:0 0 3px 3px;transition:transform .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#667eea}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{transform:translate(-50%) scaleX(1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-weight:600}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 991.98px){[_nghost-%COMP%]{display:block}}']})};function xG(n,e){n&1&&F(0,"app-header")}function NG(n,e){n&1&&F(0,"app-footer")}var vm=class n{router=R(Ot);title=X("car-handler-pwa");isLoginPage=X(!1);constructor(){this.checkRoute(this.router.url),this.router.events.pipe(mt(e=>e instanceof Ln)).subscribe(e=>{this.checkRoute(e.url)})}checkRoute(e){this.isLoginPage.set(e.includes("/login"))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-root"]],decls:4,vars:4,template:function(t,r){t&1&&(W(0,xG,1,0,"app-header"),y(1,"main"),F(2,"router-outlet"),v(),W(3,NG,1,0,"app-footer")),t&2&&(G(r.isLoginPage()?-1:0),b(),Le("login-main",r.isLoginPage()),b(2),G(r.isLoginPage()?-1:3))},dependencies:[tu,gm,mm,Ge],styles:["main[_ngcontent-%COMP%]{padding:2rem 0}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-left:280px;min-height:100vh}}@media (max-width: 991.98px){main[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:65px;min-height:calc(100vh - 135px)}}main.login-main[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh}"]})};AE(vm,XN).catch(n=>console.error(n));
