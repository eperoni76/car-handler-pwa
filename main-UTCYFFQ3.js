var p1=Object.defineProperty,g1=Object.defineProperties;var m1=Object.getOwnPropertyDescriptors;var jl=Object.getOwnPropertySymbols;var Zb=Object.prototype.hasOwnProperty,Jb=Object.prototype.propertyIsEnumerable;var Yb=(t,e,n)=>e in t?p1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})Zb.call(e,n)&&Yb(t,n,e[n]);if(jl)for(var n of jl(e))Jb.call(e,n)&&Yb(t,n,e[n]);return t},J=(t,e)=>g1(t,m1(e));var Xb=(t,e)=>{var n={};for(var r in t)Zb.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&jl)for(var r of jl(t))e.indexOf(r)<0&&Jb.call(t,r)&&(n[r]=t[r]);return n};var Yg;function Ul(){return Yg}function Vn(t){let e=Yg;return Yg=t,e}var eC=Symbol("NotFound");function ss(t){return t===eC||t?.name==="\u0275NotFound"}var At=null,Bl=!1,Zg=1,y1=null,Rt=Symbol("SIGNAL");function ne(t){let e=At;return At=t,e}function ql(){return At}var as={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cs(t){if(Bl)throw new Error("");if(At===null)return;At.consumerOnSignalRead(t);let e=At.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=At.recomputing;if(r&&(n=e!==void 0?e.nextProducer:At.producers,n!==void 0&&n.producer===t)){At.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===At&&(!r||_1(i,At)))return;let o=ls(At),s={producer:t,consumer:At,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};At.producersTail=s,e!==void 0?e.nextProducer=s:At.producers=s,o&&iC(t,s)}function tC(){Zg++}function Gl(t){if(!(ls(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Zg)){if(!t.producerMustRecompute(t)&&!gc(t)){zl(t);return}t.producerRecomputeValue(t),zl(t)}}function Jg(t){if(t.consumers===void 0)return;let e=Bl;Bl=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||v1(r)}}finally{Bl=e}}function Xg(){return At?.consumerAllowSignalWrites!==!1}function v1(t){t.dirty=!0,Jg(t),t.consumerMarkedDirty?.(t)}function zl(t){t.dirty=!1,t.lastCleanEpoch=Zg}function us(t){return t&&nC(t),ne(t)}function nC(t){t.producersTail=void 0,t.recomputing=!0}function pc(t,e){ne(e),t&&rC(t)}function rC(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ls(t))do n=em(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function gc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Gl(n),r!==n.version))return!0}return!1}function mc(t){if(ls(t)){let e=t.producers;for(;e!==void 0;)e=em(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function iC(t,e){let n=t.consumersTail,r=ls(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)iC(i.producer,i)}function em(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ls(e)){let o=e.producers;for(;o!==void 0;)o=em(o)}return n}function ls(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Wl(t){y1?.(t)}function _1(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Kl(t,e){return Object.is(t,e)}function Ql(t,e){let n=Object.create(E1);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Gl(n),cs(n),n.value===fc)throw n.error;return n.value};return r[Rt]=n,Wl(n),r}var $l=Symbol("UNSET"),Hl=Symbol("COMPUTING"),fc=Symbol("ERRORED"),E1=J(O({},as),{value:$l,dirty:!0,error:null,equal:Kl,kind:"computed",producerMustRecompute(t){return t.value===$l||t.value===Hl},producerRecomputeValue(t){if(t.value===Hl)throw new Error("");let e=t.value;t.value=Hl;let n=us(t),r,i=!1;try{r=t.computation(),ne(null),i=e!==$l&&e!==fc&&r!==fc&&t.equal(e,r)}catch(o){r=fc,t.error=o}finally{pc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function I1(){throw new Error}var oC=I1;function sC(t){oC(t)}function tm(t){oC=t}var w1=null;function nm(t,e){let n=Object.create(Yl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>aC(n);return r[Rt]=n,Wl(n),[r,s=>ds(n,s),s=>rm(n,s)]}function aC(t){return cs(t),t.value}function ds(t,e){Xg()||sC(t),t.equal(t.value,e)||(t.value=e,T1(t))}function rm(t,e){Xg()||sC(t),ds(t,e(t.value))}var Yl=J(O({},as),{equal:Kl,value:void 0,kind:"signal"});function T1(t){t.version++,tC(),Jg(t),w1?.(t)}function re(t){return typeof t=="function"}function hs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Zl=hs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Zl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{cC(o)}catch(s){e=e??[],s instanceof Zl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Zl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)cC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};Ve.EMPTY=(()=>{let t=new Ve;return t.closed=!0,t})();var im=Ve.EMPTY;function Jl(t){return t instanceof Ve||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function cC(t){re(t)?t():t.unsubscribe()}var Tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fs={setTimeout(t,e,...n){let{delegate:r}=fs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Xl(t){fs.setTimeout(()=>{let{onUnhandledError:e}=Tn;if(e)e(t);else throw t})}function zi(){}var uC=om("C",void 0,void 0);function lC(t){return om("E",void 0,t)}function dC(t){return om("N",t,void 0)}function om(t,e,n){return{kind:t,value:e,error:n}}var qi=null;function ps(t){if(Tn.useDeprecatedSynchronousErrorHandling){let e=!qi;if(e&&(qi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qi;if(qi=null,n)throw r}}else t()}function hC(t){Tn.useDeprecatedSynchronousErrorHandling&&qi&&(qi.errorThrown=!0,qi.error=t)}var Gi=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Jl(e)&&e.add(this)):this.destination=D1}static create(e,n,r){return new gs(e,n,r)}next(e){this.isStopped?am(dC(e),this):this._next(e)}error(e){this.isStopped?am(lC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?am(uC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},b1=Function.prototype.bind;function sm(t,e){return b1.call(t,e)}var cm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ed(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ed(r)}else ed(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ed(n)}}},gs=class extends Gi{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sm(e.next,o),error:e.error&&sm(e.error,o),complete:e.complete&&sm(e.complete,o)}):i=e}this.destination=new cm(i)}};function ed(t){Tn.useDeprecatedSynchronousErrorHandling?hC(t):Xl(t)}function C1(t){throw t}function am(t,e){let{onStoppedNotification:n}=Tn;n&&fs.setTimeout(()=>n(t,e))}var D1={closed:!0,next:zi,error:C1,complete:zi};var ms=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wt(t){return t}function td(...t){return um(t)}function um(t){return t.length===0?Wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var K=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=A1(n)?n:new gs(n,r,i);return ps(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=fC(r),new r((i,o)=>{let s=new gs({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ms](){return this}pipe(...n){return um(n)(this)}toPromise(n){return n=fC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function fC(t){var e;return(e=t??Tn.Promise)!==null&&e!==void 0?e:Promise}function S1(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function A1(t){return t&&t instanceof Gi||S1(t)&&Jl(t)}function lm(t){return re(t?.lift)}function de(t){return e=>{if(lm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new dm(t,e,n,r,i)}var dm=class extends Gi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ys(){return de((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var vs=class extends K{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return ys()(this)}};var pC=hs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class t extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new nd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pC}next(n){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?im:(this.currentObservers=null,o.push(n),new Ve(()=>{this.currentObservers=null,Hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new K;return n.source=this,n}}return t.create=(e,n)=>new nd(e,n),t})(),nd=class extends Ne{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:im}};var mt=class extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hm={now(){return(hm.delegate||Date).now()},delegate:void 0};var rd=class extends Ve{constructor(e,n){super()}schedule(e,n=0){return this}};var yc={setInterval(t,e,...n){let{delegate:r}=yc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=yc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _s=class extends rd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return yc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&yc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Es=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Es.now=hm.now;var Is=class extends Es{constructor(e,n=Es.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fm=new Is(_s);var id=class extends _s{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var od=class extends Is{};var pm=new od(id);var jt=new K(t=>t.complete());function gC(t){return t&&re(t.schedule)}function mC(t){return t[t.length-1]}function sd(t){return re(mC(t))?t.pop():void 0}function Yr(t){return gC(mC(t))?t.pop():void 0}function gm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vC(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function yC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wi(t){return this instanceof Wi?(this.v=t,this):new Wi(t)}function _C(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(M){return new Promise(function(R,k){o.push([y,M,R,k])>1||u(y,M)})},b&&(i[y]=b(i[y])))}function u(y,b){try{l(r[y](b))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof Wi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,b){y(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function EC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yC=="function"?yC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ad=t=>t&&typeof t.length=="number"&&typeof t!="function";function cd(t){return re(t?.then)}function ud(t){return re(t[ms])}function ld(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function dd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function R1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hd=R1();function fd(t){return re(t?.[hd])}function pd(t){return _C(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Wi(n.read());if(i)return yield Wi(void 0);yield yield Wi(r)}}finally{n.releaseLock()}})}function gd(t){return re(t?.getReader)}function qe(t){if(t instanceof K)return t;if(t!=null){if(ud(t))return M1(t);if(ad(t))return N1(t);if(cd(t))return P1(t);if(ld(t))return IC(t);if(fd(t))return O1(t);if(gd(t))return x1(t)}throw dd(t)}function M1(t){return new K(e=>{let n=t[ms]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function N1(t){return new K(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function P1(t){return new K(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Xl)})}function O1(t){return new K(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function IC(t){return new K(e=>{k1(t,e).catch(n=>e.error(n))})}function x1(t){return IC(pd(t))}function k1(t,e){var n,r,i,o;return vC(this,void 0,void 0,function*(){try{for(n=EC(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Ut(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Zr(t,e=0){return de((n,r)=>{n.subscribe(ue(r,i=>Ut(r,t,()=>r.next(i),e),()=>Ut(r,t,()=>r.complete(),e),i=>Ut(r,t,()=>r.error(i),e)))})}function Jr(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function wC(t,e){return qe(t).pipe(Jr(e),Zr(e))}function TC(t,e){return qe(t).pipe(Jr(e),Zr(e))}function bC(t,e){return new K(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function CC(t,e){return new K(n=>{let r;return Ut(n,e,()=>{r=t[hd](),Ut(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function md(t,e){if(!t)throw new Error("Iterable cannot be null");return new K(n=>{Ut(n,e,()=>{let r=t[Symbol.asyncIterator]();Ut(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function DC(t,e){return md(pd(t),e)}function SC(t,e){if(t!=null){if(ud(t))return wC(t,e);if(ad(t))return bC(t,e);if(cd(t))return TC(t,e);if(ld(t))return md(t,e);if(fd(t))return CC(t,e);if(gd(t))return DC(t,e)}throw dd(t)}function De(t,e){return e?SC(t,e):qe(t)}function H(...t){let e=Yr(t);return De(t,e)}function ws(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new K(e?i=>e.schedule(r,0,i):r)}function mm(t){return!!t&&(t instanceof K||re(t.lift)&&re(t.subscribe))}var yr=hs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return de((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:F1}=Array;function L1(t,e){return F1(e)?t(...e):t(e)}function yd(t){return B(e=>L1(t,e))}var{isArray:V1}=Array,{getPrototypeOf:j1,prototype:U1,keys:B1}=Object;function vd(t){if(t.length===1){let e=t[0];if(V1(e))return{args:e,keys:null};if($1(e)){let n=B1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $1(t){return t&&typeof t=="object"&&j1(t)===U1}function _d(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ed(...t){let e=Yr(t),n=sd(t),{args:r,keys:i}=vd(t);if(r.length===0)return De([],e);let o=new K(H1(r,e,i?s=>_d(i,s):Wt));return n?o.pipe(yd(n)):o}function H1(t,e,n=Wt){return r=>{AC(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)AC(e,()=>{let l=De(t[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function AC(t,e,n){t?Ut(n,t,e):e()}function RC(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?b(M):u.push(M),b=M=>{o&&e.next(M),l++;let R=!1;qe(n(M,h++)).subscribe(ue(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?Ut(e,s,()=>b(k)):b(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Ge(t,e,n=1/0){return re(e)?Ge((r,i)=>B((o,s)=>e(r,o,i,s))(qe(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>RC(r,i,t,n)))}function Ts(t=1/0){return Ge(Wt,t)}function MC(){return Ts(1)}function bs(...t){return MC()(De(t,Yr(t)))}function vc(t){return new K(e=>{qe(t()).subscribe(e)})}function ym(...t){let e=sd(t),{args:n,keys:r}=vd(t),i=new K(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;qe(n[h]).subscribe(ue(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?_d(r,a):a),o.complete())}))}});return e?i.pipe(yd(e)):i}var vr=new K(zi);function We(t,e){return de((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Bt(t){return de((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=qe(t(s,Bt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function NC(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ki(t,e){return re(e)?Ge(t,e,1):Ge(t,1)}function Xr(t){return de((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function kt(t){return t<=0?()=>jt:de((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Id(t=z1){return de((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function z1(){return new yr}function _c(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _r(t,e){let n=arguments.length>=2;return r=>r.pipe(t?We((i,o)=>t(i,o,r)):Wt,kt(1),n?Xr(e):Id(()=>new yr))}function Cs(t){return t<=0?()=>jt:de((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?We((i,o)=>t(i,o,r)):Wt,Cs(1),n?Xr(e):Id(()=>new yr))}function wd(t,e){return de(NC(t,e,arguments.length>=2,!0))}function Td(...t){let e=Yr(t);return de((n,r)=>{(e?bs(t,n,e):bs(t,n)).subscribe(r)})}function rt(t,e){return de((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;qe(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function bd(t){return de((e,n)=>{qe(t).subscribe(ue(n,()=>n.complete(),zi)),!n.closed&&e.subscribe(n)})}function Be(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Wt}function PC(t){let e=ne(null);try{return t()}finally{ne(e)}}var ei=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Nm=new ei("20.3.15");var Ad="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(e,n){super(Un(e,n)),this.code=e}};function q1(t){return`NG0${Math.abs(t)}`}function Un(t,e){return`${q1(t)}${e?": "+e:""}`}var Ss=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("")}function kC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ir(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Ir).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Pm(t,e){return t?e?`${t} ${e}`:t:e||""}var G1=we({__forward_ref__:we});function Bn(t){return t.__forward_ref__=Bn,t.toString=function(){return Ir(this())},t}function yt(t){return Om(t)?t():t}function Om(t){return typeof t=="function"&&t.hasOwnProperty(G1)&&t.__forward_ref__===Bn}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tc(t){return W1(t,Rd)}function xm(t){return Tc(t)!==null}function W1(t,e){return t.hasOwnProperty(e)&&t[e]||null}function K1(t){let e=t?.[Rd]??null;return e||null}function Em(t){return t&&t.hasOwnProperty(Dd)?t[Dd]:null}var Rd=we({\u0275prov:we}),Dd=we({\u0275inj:we}),F=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function km(t){return t&&!!t.\u0275providers}var Fm=we({\u0275cmp:we}),Lm=we({\u0275dir:we}),Vm=we({\u0275pipe:we}),jm=we({\u0275mod:we}),Ic=we({\u0275fac:we}),eo=we({__NG_ELEMENT_ID__:we}),OC=we({__NG_ENV_ID__:we});function bc(t){return typeof t=="string"?t:t==null?"":String(t)}function FC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():bc(t)}var LC=we({ngErrorCode:we}),Q1=we({ngErrorMessage:we}),Y1=we({ngTokenPath:we});function Um(t,e){return VC("",-200,e)}function Md(t,e){throw new L(-201,!1)}function VC(t,e,n){let r=new L(e,t);return r[LC]=e,r[Q1]=t,n&&(r[Y1]=n),r}function Z1(t){return t[LC]}var Im;function jC(){return Im}function Kt(t){let e=Im;return Im=t,e}function Bm(t,e,n){let r=Tc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Md(t,"Injector")}var J1={},Qi=J1,wm="__NG_DI_FLAG__",Tm=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Yi(n)||0;try{return this.injector.get(e,r&8?null:Qi,r)}catch(i){if(ss(i))return i;throw i}}};function X1(t,e=0){let n=Ul();if(n===void 0)throw new L(-203,!1);if(n===null)return Bm(t,void 0,e);{let r=eF(e),i=n.retrieve(t,r);if(ss(i)){if(r.optional)return null;throw i}return i}}function X(t,e=0){return(jC()||X1)(yt(t),e)}function S(t,e){return X(t,Yi(e))}function Yi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function eF(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function bm(t){let e=[];for(let n=0;n<t.length;n++){let r=yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=tF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(X(i,o))}else e.push(X(r))}return e}function UC(t,e){return t[wm]=e,t.prototype[wm]=e,t}function tF(t){return t[wm]}function Zi(t,e){let n=t.hasOwnProperty(Ic);return n?t[Ic]:null}function BC(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function $C(t){return t.flat(Number.POSITIVE_INFINITY)}function Nd(t,e){t.forEach(n=>Array.isArray(n)?Nd(n,e):e(n))}function $m(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Cc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function HC(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function zC(t,e,n){let r=As(t,e);return r>=0?t[r|1]=n:(r=~r,HC(t,r,e,n)),r}function Pd(t,e){let n=As(t,e);if(n>=0)return t[n|1]}function As(t,e){return nF(t,e,1)}function nF(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ni={},Qt=[],ln=new F(""),Hm=new F("",-1),zm=new F(""),wc=class{get(e,n=Qi){if(n===Qi){let i=VC("",-201);throw i.name="\u0275NotFound",i}return n}};function qm(t){return t[jm]||null}function wr(t){return t[Fm]||null}function Od(t){return t[Lm]||null}function Gm(t){return t[Vm]||null}function Ke(t){return{\u0275providers:t}}function qC(t){return Ke([{provide:ln,multi:!0,useValue:t}])}function GC(...t){return{\u0275providers:xd(!0,t),\u0275fromNgModule:!0}}function xd(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Nd(e,s=>{let a=s;Sd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WC(i,o),n}function WC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Wm(i,o=>{e(o,r)})}}function Sd(t,e,n,r){if(t=yt(t),!t)return!1;let i=null,o=Em(t),s=!o&&wr(t);if(!o&&!s){let u=t.ngModule;if(o=Em(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Sd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Nd(o.imports,h=>{Sd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&WC(l,e)}if(!a){let l=Zi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:zm,useValue:i,multi:!0},i),e({provide:ln,useValue:()=>X(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Wm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Wm(t,e){for(let n of t)km(n)&&(n=n.\u0275providers),Array.isArray(n)?Wm(n,e):e(n)}var rF=we({provide:String,useValue:we});function KC(t){return t!==null&&typeof t=="object"&&rF in t}function iF(t){return!!(t&&t.useExisting)}function oF(t){return!!(t&&t.useFactory)}function Ji(t){return typeof t=="function"}function QC(t){return!!t.useClass}var Dc=new F(""),Cd={},xC={},_m;function Sc(){return _m===void 0&&(_m=new wc),_m}var $e=class{},Xi=class extends $e{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Dm(e,s=>this.processProvider(s)),this.records.set(Hm,Ds(void 0,this)),i.has("environment")&&this.records.set($e,Ds(void 0,this));let o=this.records.get(Dc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zm,Qt,{self:!0}))}retrieve(e,n){let r=Yi(n)||0;try{return this.get(e,Qi,r)}catch(i){if(ss(i))return i;throw i}}destroy(){Ec(this),this._destroyed=!0;let e=ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ne(e)}}onDestroy(e){return Ec(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ec(this);let n=Vn(this),r=Kt(void 0),i;try{return e()}finally{Vn(n),Kt(r)}}get(e,n=Qi,r){if(Ec(this),e.hasOwnProperty(OC))return e[OC](this);let i=Yi(r),o,s=Vn(this),a=Kt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=lF(e)&&Tc(e);h&&this.injectableDefInScope(h)?l=Ds(Cm(e),Cd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Sc():this.parent;return n=i&8&&n===Qi?null:n,u.get(e,n)}catch(u){let l=Z1(u);throw l===-200||l===-201?new L(l,null):u}finally{Kt(a),Vn(s)}}resolveInjectorInitializers(){let e=ne(null),n=Vn(this),r=Kt(void 0),i;try{let o=this.get(ln,Qt,{self:!0});for(let s of o)s()}finally{Vn(n),Kt(r),ne(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ir(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let n=Ji(e)?e:yt(e&&e.provide),r=aF(e);if(!Ji(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ds(void 0,Cd,!0),i.factory=()=>bm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ne(null);try{if(n.value===xC)throw Um(Ir(e));return n.value===Cd&&(n.value=xC,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&uF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ne(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cm(t){let e=Tc(t),n=e!==null?e.factory:Zi(t);if(n!==null)return n;if(t instanceof F)throw new L(204,!1);if(t instanceof Function)return sF(t);throw new L(204,!1)}function sF(t){if(t.length>0)throw new L(204,!1);let n=K1(t);return n!==null?()=>n.factory(t):()=>new t}function aF(t){if(KC(t))return Ds(void 0,t.useValue);{let e=Km(t);return Ds(e,Cd)}}function Km(t,e,n){let r;if(Ji(t)){let i=yt(t);return Zi(i)||Cm(i)}else if(KC(t))r=()=>yt(t.useValue);else if(oF(t))r=()=>t.useFactory(...bm(t.deps||[]));else if(iF(t))r=(i,o)=>X(yt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yt(t&&(t.useClass||t.provide));if(cF(t))r=()=>new i(...bm(t.deps));else return Zi(i)||Cm(i)}return r}function Ec(t){if(t.destroyed)throw new L(205,!1)}function Ds(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cF(t){return!!t.deps}function uF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lF(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Dm(t,e){for(let n of t)Array.isArray(n)?Dm(n,e):n&&km(n)?Dm(n.\u0275providers,e):e(n)}function Qe(t,e){let n;t instanceof Xi?(Ec(t),n=t):n=new Tm(t);let r,i=Vn(n),o=Kt(void 0);try{return e()}finally{Vn(i),Kt(o)}}function YC(){return jC()!==void 0||Ul()!=null}var Ft=0,$=1,Z=2,He=3,dn=4,hn=5,Yt=6,Rs=7,vt=8,fn=9,$n=10,Se=11,Ms=12,Qm=13,to=14,$t=15,ri=16,no=17,Hn=18,Ac=19,Ym=20,Er=21,kd=22,Rc=23,Zt=24,ro=25,Mc=26,Pe=27,ZC=1,Dn=6,zn=7,Nc=8,io=9,_t=10;function Jt(t){return Array.isArray(t)&&typeof t[ZC]=="object"}function Xt(t){return Array.isArray(t)&&t[ZC]===!0}function Zm(t){return(t.flags&4)!==0}function Tr(t){return t.componentOffset>-1}function Fd(t){return(t.flags&1)===1}function qn(t){return!!t.template}function oo(t){return(t[Z]&512)!==0}function ii(t){return(t[Z]&256)===256}var JC="svg",XC="math";function en(t){for(;Array.isArray(t);)t=t[Ft];return t}function Jm(t,e){return en(e[t])}function pn(t,e){return en(e[t.index])}function so(t,e){return t.data[e]}function gn(t,e){let n=e[t];return Jt(n)?n:n[Ft]}function eD(t){return(t[Z]&4)===4}function Ld(t){return(t[Z]&128)===128}function tD(t){return Xt(t[He])}function oi(t,e){return e==null?null:t[e]}function Xm(t){t[no]=0}function ey(t){t[Z]&1024||(t[Z]|=1024,Ld(t)&&Ns(t))}function nD(t,e){for(;t>0;)e=e[to],t--;return e}function Pc(t){return!!(t[Z]&9216||t[Zt]?.dirty)}function Vd(t){t[$n].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Pc(t)&&Ns(t)}function Ns(t){t[$n].changeDetectionScheduler?.notify(0);let e=ti(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Ld(e)));)e=ti(e)}function ty(t,e){if(ii(t))throw new L(911,!1);t[Er]===null&&(t[Er]=[]),t[Er].push(e)}function rD(t,e){if(t[Er]===null)return;let n=t[Er].indexOf(e);n!==-1&&t[Er].splice(n,1)}function ti(t){let e=t[He];return Xt(e)?e[He]:e}function ny(t){return t[Rs]??=[]}function ry(t){return t.cleanup??=[]}function iD(t,e,n,r){let i=ny(e);i.push(n),t.firstCreatePass&&ry(t).push(r,i.length-1)}var se={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Sm=!1;function oD(){return se.lFrame.elementDepthCount}function sD(){se.lFrame.elementDepthCount++}function iy(){se.lFrame.elementDepthCount--}function aD(){return se.bindingsEnabled}function oy(){return se.skipHydrationRootTNode!==null}function sy(t){return se.skipHydrationRootTNode===t}function cD(t){se.skipHydrationRootTNode=t}function ay(){se.skipHydrationRootTNode=null}function he(){return se.lFrame.lView}function Mt(){return se.lFrame.tView}function ao(t){return se.lFrame.contextLView=t,t[vt]}function co(t){return se.lFrame.contextLView=null,t}function ct(){let t=cy();for(;t!==null&&t.type===64;)t=t.parent;return t}function cy(){return se.lFrame.currentTNode}function uD(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ps(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function uy(){return se.lFrame.isParent}function lD(){se.lFrame.isParent=!1}function ly(){return Sm}function dy(t){let e=Sm;return Sm=t,e}function dD(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function hD(t){return se.lFrame.bindingIndex=t}function Os(){return se.lFrame.bindingIndex++}function fD(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function pD(){return se.lFrame.inI18n}function gD(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,jd(e)}function mD(){return se.lFrame.currentDirectiveIndex}function jd(t){se.lFrame.currentDirectiveIndex=t}function yD(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function hy(){return se.lFrame.currentQueryIndex}function Ud(t){se.lFrame.currentQueryIndex=t}function dF(t){let e=t[$];return e.type===2?e.declTNode:e.type===1?t[hn]:null}function fy(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=dF(o),i===null||(o=o[to],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=se.lFrame=vD();return r.currentTNode=e,r.lView=t,!0}function Bd(t){let e=vD(),n=t[$];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vD(){let t=se.lFrame,e=t===null?null:t.child;return e===null?_D(t):e}function _D(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ED(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var py=ED;function $d(){let t=ED();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ID(t){return(se.lFrame.contextLView=nD(t,se.lFrame.contextLView))[vt]}function uo(){return se.lFrame.selectedIndex}function si(t){se.lFrame.selectedIndex=t}function Hd(){let t=se.lFrame;return so(t.tView,t.selectedIndex)}function gy(){return se.lFrame.currentNamespace}var wD=!0;function zd(){return wD}function br(t){wD=t}function Am(t,e=null,n=null,r){let i=my(t,e,n,r);return i.resolveInjectorInitializers(),i}function my(t,e=null,n=null,r,i=new Set){let o=[n||Qt,GC(t)];return r=r||(typeof t=="object"?void 0:Ir(t)),new Xi(o,e||Sc(),r||null,i)}var xe=class t{static THROW_IF_NOT_FOUND=Qi;static NULL=new wc;static create(e,n){if(Array.isArray(e))return Am({name:""},n,e,"");{let r=e.name??"";return Am({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:t,providedIn:"any",factory:()=>X(Hm)});static __NG_ELEMENT_ID__=-1},it=new F(""),Sn=(()=>{class t{static __NG_ELEMENT_ID__=hF;static __NG_ENV_ID__=n=>n}return t})(),Rm=class extends Sn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ii(this._lView)}onDestroy(e){let n=this._lView;return ty(n,e),()=>rD(n,e)}};function hF(){return new Rm(he())}var bn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ht=new F("",{providedIn:"root",factory:()=>{let t=S($e),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(bn),e.handleError(n))}}}),TD={provide:ln,useValue:()=>void S(bn),multi:!0},fF=new F("",{providedIn:"root",factory:()=>{let t=S(it).defaultView;if(!t)return;let e=S(Ht),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),S(Sn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function yy(){return Ke([qC(()=>void S(fF))])}function vy(t){return typeof t=="function"&&t[Rt]!==void 0}function Oe(t,e){let[n,r,i]=nm(t,e?.equal),o=n,s=o[Rt];return o.set=r,o.update=i,o.asReadonly=bD.bind(o),o}function bD(){let t=this[Rt];if(t.readonlyFn===void 0){let e=()=>this();e[Rt]=t,t.readonlyFn=e}return t.readonlyFn}function _y(t){return vy(t)&&typeof t.set=="function"}var qd=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=pF}return t})();function pF(){return new qd(he(),ct())}var jn=class{},xs=new F("",{providedIn:"root",factory:()=>!1});var Ey=new F(""),Gd=new F(""),An=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new mt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new K(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),ai=(()=>{class t{internalPendingTasks=S(An);scheduler=S(jn);errorHandler=S(Ht);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();function Oc(...t){}var Iy=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>new Mm})}return t})(),Mm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};var Wd={JSACTION:"jsaction"};function Gs(t){return{toString:t}.toString()}var Kd="__parameters__";function TF(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function bF(t,e,n){return Gs(()=>{let r=TF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Kd)?u[Kd]:Object.defineProperty(u,Kd,{value:[]})[Kd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var zt=UC(bF("Optional"),8);function CF(t){return typeof t=="function"}var rh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function dS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Wn=(()=>{let t=()=>hS;return t.ngInherit=!0,t})();function hS(t){return t.type.prototype.ngOnChanges&&(t.setInput=SF),DF}function DF(){let t=pS(this),e=t?.current;if(e){let n=t.previous;if(n===ni)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function SF(t,e,n,r,i){let o=this.declaredInputs[r],s=pS(t)||AF(t,{previous:ni,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new rh(l&&l.currentValue,n,u===ni),dS(t,e,i,n)}var fS="__ngSimpleChanges__";function pS(t){return t[fS]||null}function AF(t,e){return t[fS]=e}var CD=[];var Ee=function(t,e=null,n){for(let r=0;r<CD.length;r++){let i=CD[r];i(t,e,n)}};function RF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=hS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function MF(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Zd(t,e,n){gS(t,e,3,n)}function Jd(t,e,n,r){(t[Z]&3)===n&&gS(t,e,n,r)}function wy(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function gS(t,e,n,r){let i=r!==void 0?t[no]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[no]+=65536),(a<o||o==-1)&&(NF(t,n,e,u),t[no]=(t[no]&4294901760)+u+2),u++}function DD(t,e){Ee(4,t,e);let n=ne(null);try{e.call(t)}finally{ne(n),Ee(5,t,e)}}function NF(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Z]>>14<t[no]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,DD(a,o)):DD(a,o)}var Fs=-1,fo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function PF(t){return(t.flags&8)!==0}function OF(t){return(t.flags&16)!==0}function xF(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];kF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function mS(t){return t===3||t===4||t===6}function kF(t){return t.charCodeAt(0)===64}function js(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?SD(t,n,i,null,e[++r]):SD(t,n,i,null,null))}}return t}function SD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function yS(t){return t!==Fs}function ih(t){return t&32767}function FF(t){return t>>16}function oh(t,e){let n=FF(t),r=e;for(;n>0;)r=r[to],n--;return r}var ky=!0;function AD(t){let e=ky;return ky=t,e}var LF=256,vS=LF-1,_S=5,VF=0,Gn={};function jF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(eo)&&(r=n[eo]),r==null&&(r=n[eo]=VF++);let i=r&vS,o=1<<i;e.data[t+(i>>_S)]|=o}function sh(t,e){let n=ES(t,e);if(n!==-1)return n;let r=e[$];r.firstCreatePass&&(t.injectorIndex=e.length,Ty(r.data,t),Ty(e,null),Ty(r.blueprint,null));let i=av(t,e),o=t.injectorIndex;if(yS(i)){let s=ih(i),a=oh(i,e),u=a[$].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ES(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function av(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=CS(i),r===null)return Fs;if(n++,i=i[to],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Fs}function Fy(t,e,n){jF(t,e,n)}function UF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(mS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function IS(t,e,n){if(n&8||t!==void 0)return t;Md(e,"NodeInjector")}function wS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[fn],o=Kt(void 0);try{return i?i.get(e,r,n&8):Bm(e,r,n&8)}finally{Kt(o)}}return IS(r,e,n)}function TS(t,e,n,r=0,i){if(t!==null){if(e[Z]&2048&&!(r&2)){let s=zF(t,e,n,r,Gn);if(s!==Gn)return s}let o=bS(t,e,n,r,Gn);if(o!==Gn)return o}return wS(e,n,r,i)}function bS(t,e,n,r,i){let o=$F(n);if(typeof o=="function"){if(!fy(e,t,r))return r&1?IS(i,n,r):wS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Md(n);else return s}finally{py()}}else if(typeof o=="number"){let s=null,a=ES(t,e),u=Fs,l=r&1?e[$t][hn]:null;for((a===-1||r&4)&&(u=a===-1?av(t,e):e[a+8],u===Fs||!MD(r,!1)?a=-1:(s=e[$],a=ih(u),e=oh(u,e)));a!==-1;){let h=e[$];if(RD(o,a,h.data)){let p=BF(a,e,n,s,r,l);if(p!==Gn)return p}u=e[a+8],u!==Fs&&MD(r,e[$].data[a+8]===l)&&RD(o,a,e)?(s=h,a=ih(u),e=oh(u,e)):a=-1}}return i}function BF(t,e,n,r,i,o){let s=e[$],a=s.data[t+8],u=r==null?Tr(a)&&ky:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Xd(a,s,n,u,l);return h!==null?Fc(e,s,h,a,i):Gn}function Xd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=s[u];if(y&&qn(y)&&y.type===n)return u}return null}function Fc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof fo){let a=o;if(a.resolving){let y=FC(s[n]);throw Um(y)}let u=AD(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Kt(a.injectImpl):null,m=fy(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&RF(n,s[n],e)}finally{p!==null&&Kt(p),AD(u),a.resolving=!1,py()}}return o}function $F(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(eo)?t[eo]:void 0;return typeof e=="number"?e>=0?e&vS:HF:e}function RD(t,e,n){let r=1<<t;return!!(n[e+(t>>_S)]&r)}function MD(t,e){return!(t&2)&&!(t&1&&e)}var ho=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return TS(this._tNode,this._lView,e,Yi(r),n)}};function HF(){return new ho(ct(),he())}function ui(t){return Gs(()=>{let e=t.prototype.constructor,n=e[Ic]||Ly(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ic]||Ly(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ly(t){return Om(t)?()=>{let e=Ly(yt(t));return e&&e()}:Zi(t)}function zF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!oo(s);){let a=bS(o,s,n,r|2,Gn);if(a!==Gn)return a;let u=o.parent;if(!u){let l=s[Ym];if(l){let h=l.get(n,Gn,r);if(h!==Gn)return h}u=CS(s),s=s[to]}o=u}return i}function CS(t){let e=t[$],n=e.type;return n===2?e.declTNode:n===1?t[hn]:null}function $c(t){return UF(ct(),t)}function qF(){return Ws(ct(),he())}function Ws(t,e){return new mn(pn(t,e))}var mn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=qF}return t})();function GF(t){return t instanceof mn?t.nativeElement:t}function WF(){return this._results[Symbol.iterator]()}var ah=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ne}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=$C(e);(this._changesDetected=!BC(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=WF},DS="ngSkipHydration",KF="ngskiphydration";function SS(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===KF)return!0}return!1}function AS(t){return t.hasAttribute(DS)}function ch(t){return(t.flags&128)===128}function RS(t){if(ch(t))return!0;let e=t.parent;for(;e;){if(ch(t)||SS(e))return!0;e=e.parent}return!1}var cv=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(cv||{}),MS=new Map,QF=0;function YF(){return QF++}function ZF(t){MS.set(t[Ac],t)}function Vy(t){MS.delete(t[Ac])}var ND="__ngContext__";function Us(t,e){Jt(e)?(t[ND]=e[Ac],ZF(e)):t[ND]=e}function NS(t){return OS(t[Ms])}function PS(t){return OS(t[dn])}function OS(t){for(;t!==null&&!Xt(t);)t=t[dn];return t}var jy;function uv(t){jy=t}function Hc(){if(jy!==void 0)return jy;if(typeof document<"u")return document;throw new L(210,!1)}var Kn=new F("",{providedIn:"root",factory:()=>JF}),JF="ng",Th=new F(""),Sr=new F("",{providedIn:"platform",factory:()=>"unknown"});var bh=new F("",{providedIn:"root",factory:()=>Hc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function XF(){let t=new mo;return t.store=eL(Hc(),S(Kn)),t}var mo=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:XF});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function eL(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var xS="h",kS="b",tL="f",nL="n",FS="e",LS="t",Ch="c",lv="x",Lc="r",VS="i",jS="n",dv="d";var US="di",BS="s",$S="p";var zc=new F(""),HS=!1,hv=new F("",{providedIn:"root",factory:()=>HS});var fv=new F(""),zS=!1,qS=new F(""),pv=new F("",{providedIn:"root",factory:()=>new Map});var qc="ngb";var GS=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},WS=(t,e)=>{let n=t,r=n.getAttribute(qc)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var KS=t=>{t.removeAttribute(Wd.JSACTION),t.removeAttribute(qc),t.__jsaction_fns=void 0},QS=new F("",{providedIn:"root",factory:()=>({})});function gv(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var Uy=new Map;function YS(t,e){return Uy.set(t,e),()=>Uy.delete(t)}var PD=!1,ZS=(t,e,n,r)=>{};function rL(t,e,n,r){ZS(t,e,n,r)}function JS(){PD||(ZS=(t,e,n,r)=>{let i=t[fn].get(Kn);Uy.get(i)?.(e,n,r)},PD=!0)}var Dh=new F("");function Sh(t){return(t.flags&32)===32}var iL="__nghData__",mv=iL,oL="__nghDeferData__",XS=oL;var eh="ngh",eA="nghm",tA=()=>null;function sL(t,e,n=!1){let r=t.getAttribute(eh);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,u={};if(r!==""){let h=e.get(mo,null,{optional:!0});h!==null&&(u=h.get(mv,[])[Number(r)])}let l={data:u,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Ah(l,0,t.nextSibling)),a?t.setAttribute(eh,a):t.removeAttribute(eh),l}function nA(){tA=sL}function rA(t,e,n=!1){return tA(t,e,n)}function iA(t){let e=t._lView;return e[$].type===2?null:(oo(e)&&(e=e[Pe]),e)}function aL(t){return t.textContent?.replace(/\s/gm,"")}function cL(t){let e=Hc(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=aL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Ah(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function By(t,e){return t.segmentHeads?.[e]??null}function oA(t){return t.get(qS,!1,{optional:!0})}function uL(t,e){let n=t.data,r=n[FS]?.[e]??null;return r===null&&n[Ch]?.[e]&&(r=yv(t,e)),r}function sA(t,e){return t.data[Ch]?.[e]??null}function yv(t,e){let n=sA(t,e)??[],r=0;for(let i of n)r+=i[Lc]*(i[lv]??1);return r}function lL(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[dv];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function aA(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[dv];t.disconnectedNodes=n?new Set(n):null}return!!lL(t)?.has(e)}function Rh(t,e){let n=t[Yt];return n!==null&&!oy()&&!Sh(e)&&!aA(n,e.index-Pe)}function dL(t,e){let n=e.get(Dh),i=e.get(mo).get(XS,{}),o=!1,s=t,a=null,u=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}u.unshift(s),s=i[s][$S]}return{parentBlockPromise:a,hydrationQueue:u}}function by(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===eA}function OD(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function cA(t){for(let r of t.body.childNodes)if(by(r))return;let e=OD(t.body.previousSibling);if(by(e))return;let n=OD(t.head.lastChild);if(!by(n))throw new L(-507,!1)}function uA(t,e){let n=t.contentQueries;if(n!==null){let r=ne(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Ud(o),a.contentQueries(2,e[s],s)}}}finally{ne(r)}}}function $y(t,e,n){Ud(0);let r=ne(null);try{e(t,n)}finally{ne(r)}}function lA(t,e,n){if(Zm(e)){let r=ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ne(r)}}}var Cr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Cr||{});var Qd;function hL(){if(Qd===void 0&&(Qd=null,Ss.trustedTypes))try{Qd=Ss.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Qd}function xD(t){return hL()?.createScriptURL(t)||t}var uh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ad})`}};function Gc(t){return t instanceof uh?t.changingThisBreaksApplicationSecurity:t}function Mh(t,e){let n=dA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ad})`)}return n===e}function dA(t){return t instanceof uh&&t.getTypeName()||null}var fL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vv(t){return t=String(t),t.match(fL)?t:"unsafe:"+t}var pL=/^>|^->|<!--|-->|--!>|<!-$/g,gL=/(<|>)/g,mL="\u200B$1\u200B";function yL(t){return t.replace(pL,e=>e.replace(gL,mL))}function hA(t,e){return t.createText(e)}function vL(t,e,n){t.setValue(e,n)}function fA(t,e){return t.createComment(yL(e))}function _v(t,e,n){return t.createElement(e,n)}function lh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function pA(t,e,n){t.appendChild(e,n)}function kD(t,e,n,r,i){r!==null?lh(t,e,n,r,i):pA(t,e,n)}function Ev(t,e,n,r){t.removeChild(null,e,n,r)}function gA(t){t.textContent=""}function _L(t,e,n){t.setAttribute(e,"style",n)}function EL(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function mA(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&xF(t,e,r),i!==null&&EL(t,e,i),o!==null&&_L(t,e,o)}var Wc=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Wc||{});function yA(t){let e=_A();return e?e.sanitize(Wc.URL,t)||"":Mh(t,"URL")?Gc(t):vv(bc(t))}function vA(t){let e=_A();if(e)return xD(e.sanitize(Wc.RESOURCE_URL,t)||"");if(Mh(t,"ResourceURL"))return xD(Gc(t));throw new L(904,!1)}function IL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?vA:yA}function Iv(t,e,n){return IL(e,n)(t)}function _A(){let t=he();return t&&t[$n].sanitizer}function EA(t){return t.ownerDocument.body}function IA(t){return t instanceof Function?t():t}function wL(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var wA="ng-template";function TL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wL(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(wv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function wv(t){return t.type===4&&t.value!==wA}function bL(t,e,n){let r=t.type===4&&!n?wA:t.value;return e===r}function CL(t,e,n){let r=4,i=t.attrs,o=i!==null?AL(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Rn(r)&&!Rn(u))return!1;if(s&&Rn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!bL(t,u,n)||u===""&&e.length===1){if(Rn(r))return!1;s=!0}}else if(r&8){if(i===null||!TL(t,i,u,n)){if(Rn(r))return!1;s=!0}}else{let l=e[++a],h=DL(u,i,wv(t),n);if(h===-1){if(Rn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Rn(r))return!1;s=!0}}}}return Rn(r)||s}function Rn(t){return(t&1)===0}function DL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return RL(e,t)}function SL(t,e,n=!1){for(let r=0;r<e.length;r++)if(CL(t,e[r],n))return!0;return!1}function AL(t){for(let e=0;e<t.length;e++){let n=t[e];if(mS(n))return e}return t.length}function RL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function FD(t,e){return t?":not("+e.trim()+")":e}function ML(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rn(s)&&(e+=FD(o,i),i=""),r=s,o=o||!Rn(r);n++}return i!==""&&(e+=FD(o,i)),e}function NL(t){return t.map(ML).join(",")}function PL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Rn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Qn={};function Tv(t,e,n,r,i,o,s,a,u,l,h){let p=Pe+r,m=p+i,y=OL(p,m),b=typeof l=="function"?l():l;return y[$]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function OL(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Qn);return n}function xL(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Tv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function bv(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ft]=i,p[Z]=r|4|128|8|64|1024,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),Xm(p),p[He]=p[to]=t,p[vt]=n,p[$n]=s||t&&t[$n],p[Se]=a||t&&t[Se],p[fn]=u||t&&t[fn]||null,p[hn]=o,p[Ac]=YF(),p[Yt]=h,p[Ym]=l,p[$t]=e.type==2?t[$t]:p,p}function kL(t,e,n){let r=pn(e,t),i=xL(n),o=t[$n].rendererFactory,s=Cv(t,bv(t,i,null,TA(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function TA(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function bA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Cv(t,e){return t[Ms]?t[Qm][dn]=e:t[Ms]=e,t[Qm]=e,e}function Ae(t=1){CA(Mt(),he(),uo()+t,!1)}function CA(t,e,n,r){if(!r)if((e[Z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Zd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Jd(e,o,0,n)}si(n)}var Nh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Nh||{});function Hy(t,e,n,r){let i=ne(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Nh.SignalBased)!==0&&(u=e[o][Rt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):dS(e,u,o,r)}finally{ne(i)}}var Dr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Dr||{}),FL;function Dv(t,e){return FL(t,e)}var Bs=new Set,Ph=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ph||{}),yo=new F(""),LD=new Set;function yn(t){LD.has(t)||(LD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var DA=!1,zy=class extends Ne{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,YC()&&(this.destroyRef=S(Sn,{optional:!0})??void 0,this.pendingTasks=S(An,{optional:!0})??void 0)}emit(e){let n=ne(null);try{super.next(e)}finally{ne(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ze=zy;function SA(t){let e,n;function r(){t=Oc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function VD(t){return queueMicrotask(()=>t()),()=>{t=Oc}}var Sv="isAngularZone",dh=Sv+"_ID",LL=0,fe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ze(!1);onMicrotaskEmpty=new ze(!1);onStable=new ze(!1);onError=new ze(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=DA}=e;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,UL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new L(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,VL,Oc,Oc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},VL={};function Av(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function jL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){SA(()=>{t.callbackScheduled=!1,qy(t),t.isCheckStableRunning=!0,Av(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),qy(t)}function UL(t){let e=()=>{jL(t)},n=LL++;t._inner=t._inner.fork({name:"angular",properties:{[Sv]:!0,[dh]:n,[dh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(BL(u))return r.invokeTask(o,s,a,u);try{return jD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),UD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return jD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!$L(u)&&e(),UD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,qy(t),Av(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function qy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function jD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function UD(t){t._nesting--,Av(t)}var Vc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ze;onMicrotaskEmpty=new ze;onStable=new ze;onError=new ze;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function BL(t){return AA(t,"__ignore_ng_zone__")}function $L(t){return AA(t,"__scheduler_tick__")}function AA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rv=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),RA=[0,1,2,3],MA=(()=>{class t{ngZone=S(fe);scheduler=S(jn);errorHandler=S(bn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(yo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ee(16),this.executing=!0;for(let r of RA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ee(17)}register(n){let{view:r}=n;r!==void 0?((r[ro]??=[]).push(n),Ns(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Ph.AFTER_NEXT_RENDER,n):n()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),hh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ro];e&&(this.view[ro]=e.filter(n=>n!==this))}};function Oh(t,e){let n=e?.injector??S(xe);return yn("NgAfterNextRender"),zL(t,n,e,!0)}function HL(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function zL(t,e,n,r){let i=e.get(Rv);i.impl??=e.get(MA);let o=e.get(yo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Sn):null,a=e.get(qd,null,{optional:!0}),u=new hh(i.impl,HL(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var qL=new F("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function NA(t,e,n){let r=t.get(qL);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function GL(t,e){for(let[n,r]of e)NA(t,r.animateFns)}function BD(t,e,n,r){let i=t?.[Mc]?.enter;e!==null&&i&&i.has(n.index)&&GL(r,i)}function ks(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Xt(i)?u=i:Jt(i)&&(l=!0,i=i[Ft]);let h=en(i);t===0&&r!==null?(BD(a,r,o,n),s==null?pA(e,r,h):lh(e,r,h,s||null,!0)):t===1&&r!==null?(BD(a,r,o,n),lh(e,r,h,s||null,!0)):t===2?$D(a,o,n,p=>{Ev(e,h,l,p)}):t===3&&$D(a,o,n,()=>{e.destroyNode(h)}),u!=null&&oV(e,t,n,u,o,r,s)}}function WL(t,e){PA(t,e),e[Ft]=null,e[hn]=null}function KL(t,e,n,r,i,o){r[Ft]=i,r[hn]=e,xh(t,r,n,1,i,o)}function PA(t,e){e[$n].changeDetectionScheduler?.notify(9),xh(t,e,e[Se],2,null,null)}function QL(t){let e=t[Ms];if(!e)return Cy(t[$],t);for(;e;){let n=null;if(Jt(e))n=e[Ms];else{let r=e[_t];r&&(n=r)}if(!n){for(;e&&!e[dn]&&e!==t;)Jt(e)&&Cy(e[$],e),e=e[He];e===null&&(e=t),Jt(e)&&Cy(e[$],e),n=e&&e[dn]}e=n}}function Mv(t,e){let n=t[io],r=n.indexOf(e);n.splice(r,1)}function Nv(t,e){if(ii(e))return;let n=e[Se];n.destroyNode&&xh(t,e,n,3,null,null),QL(e)}function Cy(t,e){if(ii(e))return;let n=ne(null);try{e[Z]&=-129,e[Z]|=256,e[Zt]&&mc(e[Zt]),JL(t,e),ZL(t,e),e[$].type===1&&e[Se].destroy();let r=e[ri];if(r!==null&&Xt(e[He])){r!==e[He]&&Mv(r,e);let i=e[Hn];i!==null&&i.detachView(t)}Vy(e)}finally{ne(n)}}function $D(t,e,n,r){let i=t?.[Mc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Bs.add(t),NA(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),YL(t,r)}else t&&Bs.delete(t),r(!1)},i)}function YL(t,e){let n=t[Mc]?.running;if(n){n.then(()=>{t[Mc].running=void 0,Bs.delete(t),e(!0)});return}e(!1)}function ZL(t,e){let n=t.cleanup,r=e[Rs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Rs]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Rc];if(o!==null){e[Rc]=null;for(let s of o)s.destroy()}}function JL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof fo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ee(4,a,u);try{u.call(a)}finally{Ee(5,a,u)}}else{Ee(4,i,o);try{o.call(i)}finally{Ee(5,i,o)}}}}}function XL(t,e,n){return eV(t,e.parent,n)}function eV(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ft];if(Tr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Cr.None||i===Cr.Emulated)return null}return pn(r,n)}function tV(t,e,n){return rV(t,e,n)}function nV(t,e,n){return t.type&40?pn(t,n):null}var rV=nV,HD;function Pv(t,e,n,r){let i=XL(t,r,e),o=e[Se],s=r.parent||e[hn],a=tV(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)kD(o,i,n[u],a,!1);else kD(o,i,n,a,!1);HD!==void 0&&HD(o,r,e,n,i)}function xc(t,e){if(e!==null){let n=e.type;if(n&3)return pn(e,t);if(n&4)return Gy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return xc(t,r);{let i=t[e.index];return Xt(i)?Gy(-1,i):en(i)}}else{if(n&128)return xc(t,e.next);if(n&32)return Dv(e,t)()||en(t[e.index]);{let r=OA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ti(t[$t]);return xc(i,r)}else return xc(t,e.next)}}}return null}function OA(t,e){if(e!==null){let r=t[$t][hn],i=e.projection;return r.projection[i]}return null}function Gy(t,e){let n=_t+t+1;if(n<e.length){let r=e[n],i=r[$].firstChild;if(i!==null)return xc(r,i)}return e[zn]}function Ov(t,e,n,r,i,o,s){for(;n!=null;){let a=r[fn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&Us(en(u),r),n.flags|=2),!Sh(n))if(l&8)Ov(t,e,n.child,r,i,o,!1),ks(e,t,a,i,u,n,o,r);else if(l&32){let h=Dv(n,r),p;for(;p=h();)ks(e,t,a,i,p,n,o,r);ks(e,t,a,i,u,n,o,r)}else l&16?iV(t,e,r,n,i,o):ks(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function xh(t,e,n,r,i,o){Ov(n,r,t.firstChild,e,i,o,!1)}function iV(t,e,n,r,i,o){let s=n[$t],u=s[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ks(e,t,n[fn],i,h,r,o,n)}else{let l=u,h=s[He];ch(r)&&(l.flags|=128),Ov(t,e,l,h,i,o,!0)}}function oV(t,e,n,r,i,o,s){let a=r[zn],u=en(r);a!==u&&ks(e,t,n,o,a,i,s);for(let l=_t;l<r.length;l++){let h=r[l];xh(h[$],h,t,e,o,a)}}function sV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Dr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Dr.Important),t.setStyle(n,r,i,o))}}function xA(t,e,n,r,i){let o=uo(),s=r&2;try{si(-1),s&&e.length>Pe&&CA(t,e,Pe,!1),Ee(s?2:0,i,n),n(r,i)}finally{si(o),Ee(s?3:1,i,n)}}function kA(t,e,n){fV(t,e,n),(n.flags&64)===64&&pV(t,e,n)}function xv(t,e,n=pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function aV(t,e,n,r){let o=r.get(hv,HS)||n===Cr.ShadowDom,s=t.selectRootElement(e,o);return cV(s),s}function cV(t){FA(t)}var FA=()=>null;function uV(t){AS(t)?gA(t):cL(t)}function LA(){FA=uV}function lV(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function VA(t,e,n,r,i,o){let s=e[$];if(Fv(t,s,e,n,r)){Tr(t)&&hV(e,t.index);return}t.type&3&&(n=lV(n)),dV(t,e,n,r,i,o)}function dV(t,e,n,r,i,o){if(t.type&3){let s=pn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function hV(t,e){let n=gn(e,t);n[Z]&16||(n[Z]|=64)}function fV(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Tr(n)&&kL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||sh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Fc(e,t,s,n);if(Us(u,e),o!==null&&_V(e,s-r,u,a,n,o),qn(a)){let l=gn(n.index,e);l[vt]=Fc(e,t,s,n)}}}function pV(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=mD();try{si(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];jd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&gV(u,l)}}finally{si(-1),jd(s)}}function gV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mV(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];SL(e,o.selectors,!1)&&(r??=[],qn(o)?r.unshift(o):r.push(o))}return r}function yV(t,e,n,r,i,o){let s=pn(t,e);vV(e[Se],s,o,t.value,n,r,i)}function vV(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?bc(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function _V(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Hy(r,n,u,l)}}function jA(t,e,n,r,i){let o=Pe+n,s=e[$],a=i(s,e,t,r,n);e[o]=a,Ps(t,!0);let u=t.type===2;return u?(mA(e[Se],a,t),(oD()===0||Fd(t))&&Us(a,e),sD()):Us(a,e),zd()&&(!u||!Sh(t))&&Pv(s,e,a,t),t}function UA(t){let e=t;return uy()?lD():(e=e.parent,Ps(e,!1)),e}function kv(t,e){let n=t[fn];if(!n)return;let r;try{r=n.get(Ht,null)}catch{r=null}r?.(e)}function Fv(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Hy(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Hy(h,l,r,i),a=!0}return a}function EV(t,e){let n=gn(e,t),r=n[$];IV(r,n);let i=n[Ft];i!==null&&n[Yt]===null&&(n[Yt]=rA(i,n[fn])),Ee(18),Lv(r,n,n[vt]),Ee(19,n[vt])}function IV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lv(t,e,n){Bd(e);try{let r=t.viewQuery;r!==null&&$y(1,r,n);let i=t.template;i!==null&&xA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Hn]?.finishViewCreation(t),t.staticContentQueries&&uA(t,e),t.staticViewQueries&&$y(2,t.viewQuery,n);let o=t.components;o!==null&&wV(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,$d()}}function wV(t,e){for(let n=0;n<e.length;n++)EV(t,e[n])}function Vv(t,e,n,r){let i=ne(null);try{let o=e.tView,a=t[Z]&4096?4096:16,u=bv(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ri]=l;let h=t[Hn];return h!==null&&(u[Hn]=h.createEmbeddedView(o)),Lv(o,u,n),u}finally{ne(i)}}function fh(t,e){return!e||e.firstChild===null||ch(t)}function jc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(en(o)),Xt(o)&&BA(o,r);let s=n.type;if(s&8)jc(t,e,n.child,r);else if(s&32){let a=Dv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=OA(e,n);if(Array.isArray(a))r.push(...a);else{let u=ti(e[$t]);jc(u[$],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BA(t,e){for(let n=_t;n<t.length;n++){let r=t[n],i=r[$].firstChild;i!==null&&jc(r[$],r,i,e)}t[zn]!==t[Ft]&&e.push(t[zn])}function $A(t){if(t[ro]!==null){for(let e of t[ro])e.impl.addSequence(e);t[ro].length=0}}var HA=[];function TV(t){return t[Zt]??bV(t)}function bV(t){let e=HA.pop()??Object.create(DV);return e.lView=t,e}function CV(t){t.lView[Zt]!==t&&(t.lView=null,HA.push(t))}var DV=J(O({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ns(t.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function SV(t){let e=t[Zt]??Object.create(AV);return e.lView=t,e}var AV=J(O({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ti(t.lView);for(;e&&!zA(e[$]);)e=ti(e);e&&ey(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function zA(t){return t.type!==2}function qA(t){if(t[Rc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Rc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Z]&8192)}}var RV=100;function GA(t,e=0){let r=t[$n].rendererFactory,i=!1;i||r.begin?.();try{MV(t,e)}finally{i||r.end?.()}}function MV(t,e){let n=ly();try{dy(!0),Wy(t,e);let r=0;for(;Pc(t);){if(r===RV)throw new L(103,!1);r++,Wy(t,1)}}finally{dy(n)}}function NV(t,e,n,r){if(ii(e))return;let i=e[Z],o=!1,s=!1;Bd(e);let a=!0,u=null,l=null;o||(zA(t)?(l=TV(e),u=us(l)):ql()===null?(a=!1,l=SV(e),u=us(l)):e[Zt]&&(mc(e[Zt]),e[Zt]=null));try{Xm(e),hD(t.bindingStartIndex),n!==null&&xA(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Zd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Jd(e,y,0,null),wy(e,0)}if(s||PV(e),qA(e),WA(e,0),t.contentQueries!==null&&uA(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Zd(e,y)}else{let y=t.contentHooks;y!==null&&Jd(e,y,1),wy(e,1)}xV(t,e);let p=t.components;p!==null&&QA(e,p,0);let m=t.viewQuery;if(m!==null&&$y(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Zd(e,y)}else{let y=t.viewHooks;y!==null&&Jd(e,y,2),wy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[kd]){for(let y of e[kd])y();e[kd]=null}o||($A(e),e[Z]&=-73)}catch(h){throw o||Ns(e),h}finally{l!==null&&(pc(l,u),a&&CV(l)),$d()}}function WA(t,e){for(let n=NS(t);n!==null;n=PS(n))for(let r=_t;r<n.length;r++){let i=n[r];KA(i,e)}}function PV(t){for(let e=NS(t);e!==null;e=PS(e)){if(!(e[Z]&2))continue;let n=e[io];for(let r=0;r<n.length;r++){let i=n[r];ey(i)}}}function OV(t,e,n){Ee(18);let r=gn(e,t);KA(r,n),Ee(19,r[vt])}function KA(t,e){Ld(t)&&Wy(t,e)}function Wy(t,e){let r=t[$],i=t[Z],o=t[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gc(o)),s||=!1,o&&(o.dirty=!1),t[Z]&=-9217,s)NV(r,t,r.template,t[vt]);else if(i&8192){let a=ne(null);try{qA(t),WA(t,1);let u=r.components;u!==null&&QA(t,u,1),$A(t)}finally{ne(a)}}}function QA(t,e,n){for(let r=0;r<e.length;r++)OV(t,e[r],n)}function xV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)si(~i);else{let o=i,s=n[++r],a=n[++r];gD(s,o);let u=e[o];Ee(24,u),a(2,u),Ee(25,u)}}}finally{si(-1)}}function kh(t,e){let n=ly()?64:1088;for(t[$n].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=ti(t);if(oo(t)&&!r)return t;t=r}return null}function YA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function kV(t,e){let n=_t+e;if(n<t.length)return t[n]}function jv(t,e,n,r=!0){let i=e[$];if(FV(i,e,t,n),r){let s=Gy(n,t),a=e[Se],u=a.parentNode(t[zn]);u!==null&&KL(i,t[hn],a,e,u,s)}let o=e[Yt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ZA(t,e){let n=ph(t,e);return n!==void 0&&Nv(n[$],n),n}function ph(t,e){if(t.length<=_t)return;let n=_t+e,r=t[n];if(r){let i=r[ri];i!==null&&i!==t&&Mv(i,r),e>0&&(t[n-1][dn]=r[dn]);let o=Cc(t,_t+e);WL(r[$],r);let s=o[Hn];s!==null&&s.detachView(o[$]),r[He]=null,r[dn]=null,r[Z]&=-129}return r}function FV(t,e,n,r){let i=_t+r,o=n.length;r>0&&(n[i-1][dn]=e),r<o-_t?(e[dn]=n[i],$m(n,_t+r,e)):(n.push(e),e[dn]=null),e[He]=n;let s=e[ri];s!==null&&n!==s&&JA(s,e);let a=e[Hn];a!==null&&a.insertView(t),Vd(e),e[Z]|=128}function JA(t,e){let n=t[io],r=e[He];if(Jt(r))t[Z]|=2;else{let i=r[He][$t];e[$t]!==i&&(t[Z]|=2)}n===null?t[io]=[e]:n.push(e)}var ci=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[$];return jc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[vt]}set context(e){this._lView[vt]=e}get destroyed(){return ii(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[He];if(Xt(e)){let n=e[Nc],r=n?n.indexOf(this):-1;r>-1&&(ph(e,r),Cc(n,r))}this._attachedToViewContainer=!1}Nv(this._lView[$],this._lView)}onDestroy(e){ty(this._lView,e)}markForCheck(){kh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Vd(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,GA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=oo(this._lView),n=this._lView[ri];n!==null&&!e&&Mv(n,this._lView),PA(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let n=oo(this._lView),r=this._lView[ri];r!==null&&!n&&JA(r,this._lView),Vd(this._lView)}};var $s=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=LV;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Vv(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new ci(o)}}return t})();function LV(){return Uv(ct(),he())}function Uv(t,e){return t.type&4?new $s(e,t,Ws(t,e)):null}function Fh(t,e,n,r,i){let o=t.data[e];if(o===null)o=VV(t,e,n,r,i),pD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=uD();o.injectorIndex=s===null?-1:s.injectorIndex}return Ps(o,!0),o}function VV(t,e,n,r,i){let o=cy(),s=uy(),a=s?o:o&&o.parent,u=t.data[e]=UV(t,a,n,e,r,i);return jV(t,u,o,s),u}function jV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function UV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return oy()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var BV=new RegExp(`^(\\d+)*(${kS}|${xS})*(.*)`);function $V(t){let e=t.match(BV),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function HV(t){return!t.prev&&t.parent?.type===8}function Dy(t){return t.index-Pe}function zV(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Lh(t,e,n,r){let i=Dy(r),o=zV(t,i);if(o===void 0){let s=t.data[jS];if(s?.[i])o=GV(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(HV(r)){let l=Dy(r.parent);o=By(t,l)}else{let l=pn(u,n);if(a)o=l.firstChild;else{let h=Dy(u),p=By(t,h);if(u.type===2&&p){let y=yv(t,h)+1;o=Vh(y,p)}else o=l.nextSibling}}}}return o}function Vh(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function qV(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case tL:n=n.firstChild;break;case nL:n=n.nextSibling;break}}return n}function GV(t,e){let[n,...r]=$V(t),i;if(n===xS)i=e[$t][Ft];else if(n===kS)i=EA(e[$t][Ft]);else{let o=Number(n);i=en(e[o+Pe])}return qV(i,r)}var WV=!1;function XA(t){WV=t}function KV(t){let e=t[Yt];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[Se];for(let o of r.values())QV(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function QV(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Pe);i&&Ev(t,i,!1)}}function Bv(t){let e=t[Dn]??[],r=t[He][Se],i=[];for(let o of e)o.data[US]!==void 0?i.push(o):e0(o,r);t[Dn]=i}function YV(t){let{lContainer:e}=t,n=e[Dn];if(n===null)return;let i=e[He][Se];for(let o of n)e0(o,i)}function e0(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Lc];for(;n<i;){let o=r.nextSibling;Ev(e,r,!1),r=o,n++}}}function jh(t){Bv(t);let e=t[Ft];Jt(e)&&gh(e);for(let n=_t;n<t.length;n++)gh(t[n])}function gh(t){KV(t);let e=t[$];for(let n=Pe;n<e.bindingStartIndex;n++)if(Xt(t[n])){let r=t[n];jh(r)}else Jt(t[n])&&gh(t[n])}function $v(t){let e=t._views;for(let n of e){let r=iA(n);r!==null&&r[Ft]!==null&&(Jt(r)?gh(r):jh(r))}}function ZV(t,e,n,r){t!==null&&(n.cleanup(e),jh(t.lContainer),$v(r))}function JV(t,e){let n=[];for(let r of e)for(let i=0;i<(r[lv]??1);i++){let o={data:r,firstChild:null};r[Lc]>0&&(o.firstChild=t,t=Vh(r[Lc],t)),n.push(o)}return[t,n]}var t0=()=>null,n0=()=>null;function r0(){t0=XV,n0=e2}function XV(t,e){return i0(t,e)?t[Dn].shift():(Bv(t),null)}function Ky(t,e){return t0(t,e)}function e2(t,e,n){if(e.tView.ssrId===null)return null;let r=Ky(t,e.tView.ssrId);return n[$].firstUpdatePass&&r===null&&n2(n,e),r}function t2(t,e,n){return n0(t,e,n)}function n2(t,e){let n=e;for(;n;){if(zD(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(zD(t,n))return;n=n.next}}function i0(t,e){let n=t[Dn];return!e||n===null||n.length===0?!1:n[0].data[VS]===e}function zD(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return Xt(r)&&i0(r,n)?(Bv(r),!0):!1}var o0=class{},Uh=class{},Qy=class{resolveComponentFactory(e){throw new L(917,!1)}},Kc=class{static NULL=new Qy},po=class{},li=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>r2()}return t})();function r2(){let t=he(),e=ct(),n=gn(e.index,t);return(Jt(n)?n:t)[Se]}var s0=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();var th={},Ls=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,th,r);return i!==th||n===th?i:this.parentInjector.get(e,n,r)}};function mh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Pm(i,a);else if(o==2){let u=a,l=e[++s];r=Pm(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ge(t,e=0){let n=he();if(n===null)return X(t,e);let r=ct();return TS(r,n,yt(t),e)}function i2(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}a2(t,e,n,a,o,u,l)}o!==null&&r!==null&&o2(n,r,o)}function o2(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}function s2(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function a2(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&qn(y)&&(u=!0,s2(t,n,m)),Fy(sh(n,e),t,y.type)}f2(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=bA(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=js(n.mergedAttrs,y.hostAttrs),u2(t,n,e,p,y),h2(p,y,i),s!==null&&s.has(y)){let[M,R]=s.get(y);n.directiveToIndex.set(y.type,[p,M+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let b=y.type.prototype;!l&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(b.ngOnChanges||b.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}c2(t,n,o)}function c2(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))qD(0,e,i,r),qD(1,e,i,r),WD(e,r,!1);else{let o=n.get(i);GD(0,e,o,r),GD(1,e,o,r),WD(e,r,!0)}}}function qD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),a0(e,o)}}function GD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),a0(e,s)}}function a0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function WD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||wv(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function u2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Zi(i.type,!0)),s=new fo(o,qn(i),ge,null);t.blueprint[r]=s,n[r]=s,l2(t,e,r,bA(t,n,i.hostVars,Qn),i)}function l2(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;d2(s)!=a&&s.push(a),s.push(n,r,o)}}function d2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function h2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qn(e)&&(n[""]=t)}}function f2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function c0(t,e,n,r,i,o,s,a){let u=e[$],l=u.consts,h=oi(l,s),p=Fh(u,t,n,r,h);return o&&i2(u,e,p,oi(l,a),i),p.mergedAttrs=js(p.mergedAttrs,p.attrs),p.attrs!==null&&mh(p,p.attrs,!1),p.mergedAttrs!==null&&mh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function u0(t,e){MF(t,e),Zm(e)&&t.queries.elementEnd(e)}function p2(t,e,n,r,i,o){let s=e.consts,a=oi(s,i),u=Fh(e,t,n,r,a);if(u.mergedAttrs=js(u.mergedAttrs,u.attrs),o!=null){let l=oi(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&mh(u,u.attrs,!1),u.mergedAttrs!==null&&mh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function g2(t,e,n){return t[e]=n}function m2(t,e){return t[e]}function Ks(t,e,n){if(n===Qn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Sy(t,e,n){return function r(i){let o=Tr(t)?gn(t.index,e):e;kh(o,5);let s=e[vt],a=KD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=KD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function KD(t,e,n,r){let i=ne(null);try{return Ee(6,e,n),n(r)!==!1}catch(o){return kv(t,o),!1}finally{Ee(7,e,n),ne(i)}}function y2(t,e,n,r,i,o,s,a){let u=Fd(t),l=!1,h=null;if(!r&&u&&(h=_2(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=pn(t,n),m=r?r(p):p;rL(n,m,o,a);let y=i.listen(m,o,a);if(!v2(o)){let b=r?M=>r(en(M[t.index])):t.index;l0(b,e,n,o,a,y,!1)}}return l}function v2(t){return t.startsWith("animation")||t.startsWith("transition")}function _2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Rs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function l0(t,e,n,r,i,o,s){let a=e.firstCreatePass?ry(e):null,u=ny(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function QD(t,e,n,r,i,o){let s=e[n],a=e[$],l=a.data[n].outputs[r],p=s[l].subscribe(o);l0(t.index,a,e,i,o,p,!0)}var Yy=Symbol("BINDING");var yh=class extends Kc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new Hs(n,this.ngModule)}};function E2(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Nh.SignalBased)!==0};return i&&(o.transform=i),o})}function I2(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function w2(t,e,n){let r=e instanceof $e?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Ls(n,r):n}function T2(t){let e=t.get(po,null);if(e===null)throw new L(407,!1);let n=t.get(s0,null),r=t.get(jn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function b2(t,e){let n=d0(t);return _v(e,n,n==="svg"?JC:n==="math"?XC:null)}function d0(t){return(t.selectors[0][0]||"div").toLowerCase()}var Hs=class extends Uh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=E2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=I2(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=NL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ee(22);let a=ne(null);try{let u=this.componentDef,l=C2(r,u,s,o),h=w2(u,i||this.ngModule,e),p=T2(h),m=p.rendererFactory.createRenderer(null,u),y=r?aV(m,r,u.encapsulation,h):b2(u,m),b=s?.some(YD)||o?.some(k=>typeof k!="function"&&k.bindings.some(YD)),M=bv(null,l,null,512|TA(u),null,null,p,m,h,null,rA(y,h,!0));M[Pe]=y,Bd(M);let R=null;try{let k=c0(Pe,M,2,"#host",()=>l.directiveRegistry,!0,0);mA(m,y,k),Us(y,M),kA(l,M,k),lA(l,k,M),u0(l,k),n!==void 0&&S2(k,this.ngContentSelectors,n),R=gn(k.index,M),M[vt]=R[vt],Lv(l,M,null)}catch(k){throw R!==null&&Vy(R),Vy(M),k}finally{Ee(23),$d()}return new vh(this.componentType,M,!!b)}finally{ne(a)}}};function C2(t,e,n,r){let i=t?["ng-version","20.3.15"]:PL(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Yy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Yy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Od(p);u.push(m)}return Tv(0,null,D2(o,s),1,a,u,null,null,null,[i],null)}function D2(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function YD(t){let e=t[Yy].kind;return e==="input"||e==="twoWay"}var vh=class extends o0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=so(n[$],Pe),this.location=Ws(this._tNode,n),this.instance=gn(this._tNode.index,n)[vt],this.hostView=this.changeDetectorRef=new ci(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Fv(r,i[$],i,e,n);this.previousInputValues.set(e,n);let s=gn(r.index,i);kh(s,1)}get injector(){return new ho(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function S2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var vo=(()=>{class t{static __NG_ELEMENT_ID__=A2}return t})();function A2(){let t=ct();return f0(t,he())}var R2=vo,h0=class extends R2{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ws(this._hostTNode,this._hostLView)}get injector(){return new ho(this._hostTNode,this._hostLView)}get parentInjector(){let e=av(this._hostTNode,this._hostLView);if(yS(e)){let n=oh(e,this._hostLView),r=ih(e),i=n[$].data[r+8];return new ho(i,n)}else return new ho(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ZD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-_t}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ky(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fh(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!CF(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Hs(wr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get($e,null);k&&(o=k)}let m=wr(h.componentType??{}),y=Ky(this._lContainer,m?.id??null),b=y?.firstChild??null,M=h.create(p,i,b,o,s,a);return this.insertImpl(M.hostView,l,fh(this._hostTNode,y)),M}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(tD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[He],l=new h0(u,u[hn],u[He]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return jv(s,i,o,r),e.attachToViewContainerRef(),$m(Ay(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ZD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ph(this._lContainer,n);r&&(Cc(Ay(this._lContainer),n),Nv(r[$],r))}detach(e){let n=this._adjustIndex(e,-1),r=ph(this._lContainer,n);return r&&Cc(Ay(this._lContainer),n)!=null?new ci(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ZD(t){return t[Nc]}function Ay(t){return t[Nc]||(t[Nc]=[])}function f0(t,e){let n,r=e[t.index];return Xt(r)?n=r:(n=YA(r,e,null,t),e[t.index]=n,Cv(e,n)),p0(n,e,t,r),new h0(n,t,e)}function M2(t,e){let n=t[Se],r=n.createComment(""),i=pn(e,t),o=n.parentNode(i);return lh(n,o,r,n.nextSibling(i),!1),r}var p0=g0,Hv=()=>!1;function N2(t,e,n){return Hv(t,e,n)}function g0(t,e,n,r){if(t[zn])return;let i;n.type&8?i=en(r):i=M2(e,n),t[zn]=i}function P2(t,e,n){if(t[zn]&&t[Dn])return!0;let r=n[Yt],i=e.index-Pe;if(!r||RS(e)||aA(r,i))return!1;let s=By(r,i),a=r.data[Ch]?.[i],[u,l]=JV(s,a);return t[zn]=u,t[Dn]=l,!0}function O2(t,e,n,r){Hv(t,n,e)||g0(t,e,n,r)}function m0(){p0=O2,Hv=P2}var Zy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Jy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)zv(e,n).matches!==null&&this.queries[n].setDirty()}},Xy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=B2(e):this.predicate=e}},ev=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},tv=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,x2(n,o)),this.matchTNodeWithReadOption(e,n,Xd(n,e,o,!1,!1))}else r===$s?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Xd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===mn||i===vo||i===$s&&n.type&4)this.addMatch(n.index,-2);else{let o=Xd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function x2(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function k2(t,e){return t.type&11?Ws(t,e):t.type&4?Uv(t,e):null}function F2(t,e,n,r){return n===-1?k2(e,t):n===-2?L2(t,e,r):Fc(t,t[$],n,e)}function L2(t,e,n){if(n===mn)return Ws(e,t);if(n===$s)return Uv(e,t);if(n===vo)return f0(e,t)}function y0(t,e,n,r){let i=e[Hn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(F2(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function nv(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=y0(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=_t;p<h.length;p++){let m=h[p];m[ri]===m[He]&&nv(m[$],m,l,r)}if(h[io]!==null){let p=h[io];for(let m=0;m<p.length;m++){let y=p[m];nv(y[$],y,l,r)}}}}}return r}function V2(t,e){return t[Hn].queries[e].queryList}function j2(t,e,n){let r=new ah((n&4)===4);return iD(t,e,r,r.destroy),(e[Hn]??=new Jy).queries.push(new Zy(r))-1}function U2(t,e,n,r){let i=Mt();if(i.firstCreatePass){let o=ct();$2(i,new Xy(e,n,r),o.index),H2(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return j2(i,he(),n)}function B2(t){return t.split(",").map(e=>e.trim())}function $2(t,e,n){t.queries===null&&(t.queries=new ev),t.queries.track(new tv(e,n))}function H2(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function zv(t,e){return t.queries.getByIndex(e)}function z2(t,e){let n=t[$],r=zv(n,e);return r.crossesNgTemplate?nv(n,t,e,[]):y0(n,t,r,e)}var zs=class{},Bh=class{};var _h=class extends zs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new yh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=qm(e);this._bootstrapComponents=IA(o.bootstrap),this._r3Injector=my(e,n,[{provide:zs,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver},...r],Ir(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Eh=class extends Bh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _h(this.moduleType,e,[])}};var Uc=class extends zs{injector;componentFactoryResolver=new yh(this);instance=null;constructor(e){super();let n=new Xi([...e.providers,{provide:zs,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver}],e.parent||Sc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Qs(t,e,n=null){return new Uc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var q2=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=xd(!1,n.type),i=r.length>0?Qs([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(X($e))})}return t})();function Et(t){return Gs(()=>{let e=v0(t),n=J(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===cv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(q2).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Cr.Emulated,styles:t.styles||Qt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&yn("NgStandalone"),_0(n);let r=t.dependencies;return n.directiveDefs=JD(r,G2),n.pipeDefs=JD(r,Gm),n.id=Q2(n),n})}function G2(t){return wr(t)||Od(t)}function Yn(t){return Gs(()=>({type:t.type,bootstrap:t.bootstrap||Qt,declarations:t.declarations||Qt,imports:t.imports||Qt,exports:t.exports||Qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function W2(t,e){if(t==null)return ni;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Nh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function K2(t){if(t==null)return ni;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ot(t){return Gs(()=>{let e=v0(t);return _0(e),e})}function v0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ni,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:W2(t.inputs,e),outputs:K2(t.outputs),debugInfo:null}}function _0(t){t.features?.forEach(e=>e(t))}function JD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function Q2(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Y2(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let e=Y2(t.type),n=!0,r=[t];for(;e;){let i;if(qn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ry(t.inputs),s.declaredInputs=Ry(t.declaredInputs),s.outputs=Ry(t.outputs);let a=i.hostBindings;a&&tj(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&X2(t,u),l&&ej(t,l),Z2(t,i),kC(t.outputs,i.outputs),qn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Mn&&(n=!1)}}e=Object.getPrototypeOf(e)}J2(r)}function Z2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function J2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=js(i.hostAttrs,n=js(n,i.hostAttrs))}}function Ry(t){return t===ni?{}:t===Qt?[]:t}function X2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function ej(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function tj(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function nj(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=js(t.mergedAttrs,t.attrs);let h=t.tView=Tv(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ps(t,!1);let u=I0(n,e,t,r);zd()&&Pv(n,e,u,t),Us(u,e);let l=YA(u,e,u,t);e[r+Pe]=l,Cv(e,l),N2(l,t,e)}function E0(t,e,n,r,i,o,s,a,u,l,h){let p=n+Pe,m;if(e.firstCreatePass){if(m=Fh(e,p,4,s||null,a||null),l!=null){let y=oi(e.consts,l);m.localNames=[];for(let b=0;b<y.length;b+=2)m.localNames.push(y[b],-1)}}else m=e.data[p];return nj(m,t,e,n,r,i,o,u),l!=null&&xv(t,m,h),m}var I0=w0;function w0(t,e,n,r){return br(!0),e[Se].createComment("")}function rj(t,e,n,r){let i=!Rh(e,n);br(i);let o=e[Yt]?.data[LS]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return w0(t,e);let s=e[Yt],a=Lh(s,t,e,n);Ah(s,r,a);let u=yv(s,r);return Vh(u,a)}function T0(){I0=rj}var tn=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(tn||{}),XD=0,ij=1,Ye=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(Ye||{});var oj=0,Qc=1;var sj=4,aj=5;var cj=7,Vs=8,uj=9,qv=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(qv||{});function nh(t,e){let n=dj(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function lj(t){nh(1,t),nh(0,t),nh(2,t)}function dj(t){let e=sj;return t===1?e=aj:t===2&&(e=uj),e}function b0(t){return t+1}function Ys(t,e){let n=t[$],r=b0(e.index);return t[r]}function Yc(t,e){let n=b0(e.index);return t.data[n]}function hj(t,e,n){let r=e[$],i=Yc(r,n);switch(t){case Ye.Complete:return i.primaryTmplIndex;case Ye.Loading:return i.loadingTmplIndex;case Ye.Error:return i.errorTmplIndex;case Ye.Placeholder:return i.placeholderTmplIndex;default:return null}}function eS(t,e){return e===Ye.Placeholder?t.placeholderBlockConfig?.[XD]??null:e===Ye.Loading?t.loadingBlockConfig?.[XD]??null:null}function fj(t){return t.loadingBlockConfig?.[ij]??null}function tS(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function pj(t,e){let n=e.primaryTmplIndex+Pe;return so(t,n)}var gj=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?Qs(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t})}return t})();var C0=new F("");function My(t,e,n){return t.get(gj).getOrCreateInjector(e,t,n,"")}function mj(t,e,n){if(t instanceof Ls){let i=t.injector,o=t.parentInjector,s=My(o,e,n);return new Ls(i,s)}let r=t.get($e);if(r!==t){let i=My(r,e,n);return new Ls(t,i)}return My(t,e,n)}function lo(t,e,n,r=!1){let i=n[He],o=i[$];if(ii(i))return;let s=Ys(i,e),a=s[Qc],u=s[cj];if(!(u!==null&&t<u)&&nS(a,t)&&nS(s[oj]??-1,t)){let l=Yc(o,e),p=!r&&!0&&(fj(l)!==null||eS(l,Ye.Loading)!==null||eS(l,Ye.Placeholder))?_j:vj;try{p(t,s,n,e,i)}catch(m){kv(i,m)}}}function yj(t,e){let n=t[Dn]?.findIndex(i=>i.data[BS]===e[Qc])??-1;return{dehydratedView:n>-1?t[Dn][n]:null,dehydratedViewIx:n}}function vj(t,e,n,r,i){Ee(20);let o=hj(t,i,r);if(o!==null){e[Qc]=t;let s=i[$],a=o+Pe,u=so(s,a),l=0;ZA(n,l);let h;if(t===Ye.Complete){let b=Yc(s,r),M=b.providers;M&&M.length>0&&(h=mj(i[fn],b,M))}let{dehydratedView:p,dehydratedViewIx:m}=yj(n,e),y=Vv(i,u,null,{injector:h,dehydratedView:p});if(jv(n,y,l,fh(u,p)),kh(y,2),m>-1&&n[Dn]?.splice(m,1),(t===Ye.Complete||t===Ye.Error)&&Array.isArray(e[Vs])){for(let b of e[Vs])b();e[Vs]=null}}Ee(21)}function nS(t,e){return t<e}function rS(t,e,n){t.loadingPromise.then(()=>{t.loadingState===tn.COMPLETE?lo(Ye.Complete,e,n):t.loadingState===tn.FAILED&&lo(Ye.Error,e,n)})}var _j=null;var $h=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Gv=new F("");function _o(t){return!!t&&typeof t.then=="function"}function D0(t){return!!t&&typeof t.subscribe=="function"}var Wv=new F("");function Hh(t){return Ke([{provide:Wv,multi:!0,useValue:t}])}var Kv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=S(Wv,{optional:!0})??[];injector=S(xe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Qe(this.injector,i);if(_o(o))n.push(o);else if(D0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),di=new F("");function S0(){tm(()=>{let t="";throw new L(600,t)})}function A0(t){return t.isBoundToModule}var Ej=10;var ut=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(Ht);afterRenderManager=S(Rv);zonelessEnabled=S(xs);rootEffectScheduler=S(Iy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ne;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(An);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(B(n=>!n))}constructor(){S(yo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=S($e);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=xe.NULL){return this._injector.get(fe).run(()=>{Ee(10);let s=n instanceof Uh;if(!this._injector.get(Kv).done){let b="";throw new L(405,b)}let u;s?u=n:u=this._injector.get(Kc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=A0(u)?void 0:this._injector.get(zs),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Gv,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),kc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ee(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ph.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new L(101,!1);let n=ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ne(n),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(po,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Ej;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Pc(i))continue;let o=r&&!this.zonelessEnabled?0:1;GA(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Pc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;kc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(di,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>kc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new L(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ij(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function R0(t,e,n){let r=e[fn],i=e[$];if(t.loadingState!==tn.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=Ys(e,n),s=pj(i,t);t.loadingState=tn.IN_PROGRESS,nh(1,o);let a=t.dependencyResolverFn,u=r.get(ai).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],m=[];for(let y of l)if(y.status==="fulfilled"){let b=y.value,M=wr(b)||Od(b);if(M)p.push(M);else{let R=Gm(b);R&&m.push(R)}}else{h=!0;break}if(h){if(t.loadingState=tn.FAILED,t.errorTmplIndex===null){let b=new L(-750,!1);kv(e,b)}}else{t.loadingState=tn.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=tS(y.directiveRegistry,p);let b=p.map(R=>R.type),M=xd(!1,...b);t.providers=M}m.length>0&&(y.pipeRegistry=tS(y.pipeRegistry,m))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=tn.COMPLETE,u()}),t.loadingPromise)}function wj(t,e){return e[fn].get(C0,null,{optional:!0})?.behavior!==qv.Manual}function Tj(t,e,n){let r=e[$],i=e[n.index];if(!wj(t,e))return;let o=Ys(e,n),s=Yc(r,n);switch(lj(o),s.loadingState){case tn.NOT_STARTED:lo(Ye.Loading,n,i),R0(s,e,n),s.loadingState===tn.IN_PROGRESS&&rS(s,n,i);break;case tn.IN_PROGRESS:lo(Ye.Loading,n,i),rS(s,n,i);break;case tn.COMPLETE:lo(Ye.Complete,n,i);break;case tn.FAILED:lo(Ye.Error,n,i);break;default:}}async function M0(t,e,n){let r=t.get(Dh);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=dL(e,t);if(s.length===0)return;o!==null&&s.shift(),Dj(r,s),o!==null&&await o;let a=s[0];r.has(a)?await iS(t,s,n):r.awaitParentBlock(a,async()=>await iS(t,s,n))}async function iS(t,e,n){let r=t.get(Dh),i=r.hydrating,o=t.get(An),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],h=r.get(l);if(h!=null){if(await Aj(h),await Sj(t),bj(h)){YV(h),oS(e.slice(u),r);break}i.get(l).resolve()}else{Cj(u,e,r),oS(e.slice(u),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),n&&n(e),ZV(r.get(a),e,r,t.get(ut))}function bj(t){return Ys(t.lView,t.tNode)[Qc]===Ye.Error}function Cj(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&jh(i.lContainer)}function oS(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function Dj(t,e){for(let n of e)t.hydrating.set(n,Ij())}function Sj(t){return new Promise(e=>Oh(e,{injector:t}))}async function Aj(t){let{tNode:e,lView:n}=t,r=Ys(n,e);return new Promise(i=>{Rj(r,i),Tj(2,n,e)})}function Rj(t,e){Array.isArray(t[Vs])||(t[Vs]=[]),t[Vs].push(e)}function Eo(t,e,n,r){let i=he(),o=Os();if(Ks(i,o,e)){let s=Mt(),a=Hd();yV(a,i,t,e,n,r)}return Eo}var TJ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ar(t,e,n,r,i,o,s,a){yn("NgControlFlow");let u=he(),l=Mt(),h=oi(l.consts,o);return E0(u,l,t,e,n,r,i,h,256,s,a),Qv}function Qv(t,e,n,r,i,o,s,a){yn("NgControlFlow");let u=he(),l=Mt(),h=oi(l.consts,o);return E0(u,l,t,e,n,r,i,h,512,s,a),Qv}function Rr(t,e){yn("NgControlFlow");let n=he(),r=Os(),i=n[r]!==Qn?n[r]:-1,o=i!==-1?sS(n,Pe+i):void 0,s=0;if(Ks(n,r,t)){let a=ne(null);try{if(o!==void 0&&ZA(o,s),t!==-1){let u=Pe+t,l=sS(n,u),h=Mj(n[$],u),p=t2(l,h,n),m=Vv(n,h,e,{dehydratedView:p});jv(l,m,s,fh(h,p))}}finally{ne(a)}}else if(o!==void 0){let a=kV(o,s);a!==void 0&&(a[vt]=e)}}function sS(t,e){return t[e]}function Mj(t,e){return so(t,e)}function hi(t,e,n){let r=he(),i=Os();if(Ks(r,i,e)){let o=Mt(),s=Hd();VA(s,r,t,e,r[Se],n)}return hi}function aS(t,e,n,r,i){Fv(e,t,n,i?"class":"style",r)}function oe(t,e,n,r){let i=he(),o=i[$],s=t+Pe,a=o.firstCreatePass?c0(s,i,2,e,mV,aD(),n,r):o.data[s];if(jA(a,i,t,e,Yv),Fd(a)){let u=i[$];kA(u,i,a),lA(u,a,i)}return r!=null&&xv(i,a),oe}function ye(){let t=Mt(),e=ct(),n=UA(e);return t.firstCreatePass&&u0(t,n),sy(n)&&ay(),iy(),n.classesWithoutHost!=null&&PF(n)&&aS(t,n,he(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&OF(n)&&aS(t,n,he(),n.stylesWithoutHost,!1),ye}function Te(t,e,n,r){return oe(t,e,n,r),ye(),Te}function Zn(t,e,n,r){let i=he(),o=i[$],s=t+Pe,a=o.firstCreatePass?p2(s,o,2,e,n,r):o.data[s];return jA(a,i,t,e,Yv),r!=null&&xv(i,a),Zn}function Jn(){let t=ct(),e=UA(t);return sy(e)&&ay(),iy(),Jn}var Yv=(t,e,n,r,i)=>(br(!0),_v(e[Se],r,gy()));function Nj(t,e,n,r,i){let o=!Rh(e,n);if(br(o),o)return _v(e[Se],r,gy());let s=e[Yt],a=Lh(s,t,e,n);return sA(s,i)&&Ah(s,i,a.nextSibling),s&&(SS(n)||AS(a))&&Tr(n)&&(cD(n),gA(a)),a}function N0(){Yv=Nj}var Pj=(t,e,n,r,i)=>(br(!0),fA(e[Se],""));function Oj(t,e,n,r,i){let o,s=!Rh(e,n);if(br(s),s)return fA(e[Se],"");let a=e[Yt],u=Lh(a,t,e,n),l=uL(a,i);return Ah(a,i,u),o=Vh(l,u),o}function P0(){Pj=Oj}function Zc(){return he()}var Jc="en-US";var xj=Jc;function O0(t){typeof t=="string"&&(xj=t.toLowerCase().replace(/_/g,"-"))}function Ze(t,e,n){let r=he(),i=Mt(),o=ct();return x0(i,r,r[Se],o,t,e,n),Ze}function x0(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Sy(r,e,o),y2(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Sy(r,e,o),QD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Sy(r,e,o),QD(r,e,p,i,i,u)}}function Nn(t=1){return ID(t)}function Zv(t,e,n,r){U2(t,e,n,r)}function Jv(t){let e=he(),n=Mt(),r=hy();Ud(r+1);let i=zv(n,r);if(t.dirty&&eD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=z2(e,r);t.reset(o,GF),t.notifyOnChanges()}return!0}return!1}function Xv(){return V2(he(),hy())}function Yd(t,e){return t<<17|e<<2}function go(t){return t>>17&32767}function kj(t){return(t&2)==2}function Fj(t,e){return t&131071|e<<17}function rv(t){return t|2}function qs(t){return(t&131068)>>2}function Ny(t,e){return t&-131069|e<<2}function Lj(t){return(t&1)===1}function iv(t){return t|1}function Vj(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=go(s),u=qs(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||As(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=go(t[a+1]);t[r+1]=Yd(m,a),m!==0&&(t[m+1]=Ny(t[m+1],r)),t[a+1]=Fj(t[a+1],r)}else t[r+1]=Yd(a,0),a!==0&&(t[a+1]=Ny(t[a+1],r)),a=r;else t[r+1]=Yd(u,0),a===0?a=r:t[u+1]=Ny(t[u+1],r),u=r;l&&(t[r+1]=rv(t[r+1])),cS(t,h,r,!0),cS(t,h,r,!1),jj(e,h,t,r,o),s=Yd(a,u),o?e.classBindings=s:e.styleBindings=s}function jj(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&As(o,e)>=0&&(n[r+1]=iv(n[r+1]))}function cS(t,e,n,r){let i=t[n+1],o=e===null,s=r?go(i):qs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];Uj(u,e)&&(a=!0,t[s+1]=r?iv(l):rv(l)),s=r?go(l):qs(l)}a&&(t[n+1]=r?rv(i):iv(i))}function Uj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?As(t,e)>=0:!1}function nn(t,e){return Bj(t,e,null,!0),nn}function Bj(t,e,n,r){let i=he(),o=Mt(),s=fD(2);if(o.firstUpdatePass&&Hj(o,t,s,r),e!==Qn&&Ks(i,s,e)){let a=o.data[uo()];Kj(o,a,i,i[Se],t,i[s+1]=Qj(e,n),r,s)}}function $j(t,e){return e>=t.expandoStartIndex}function Hj(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[uo()],s=$j(t,n);Yj(o,r)&&e===null&&!s&&(e=!1),e=zj(i,o,e,r),Vj(i,o,e,n,s,r)}}function zj(t,e,n,r){let i=yD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Py(null,t,e,n,r),n=Bc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Py(i,t,e,n,r),o===null){let u=qj(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Py(null,t,e,u[1],r),u=Bc(u,e.attrs,r),Gj(t,e,r,u))}else o=Wj(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function qj(t,e,n){let r=n?e.classBindings:e.styleBindings;if(qs(r)!==0)return t[go(r)]}function Gj(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[go(i)]=r}function Wj(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Bc(r,s,n)}return Bc(r,e.attrs,n)}function Py(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Bc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zC(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Kj(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=Lj(l)?uS(u,e,n,i,qs(l),s):void 0;if(!Ih(h)){Ih(o)||kj(l)&&(o=uS(u,null,n,i,a,s));let p=Jm(uo(),n);sV(r,s,p,i,o)}}function uS(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Qn&&(m=p?Qt:void 0);let y=p?Pd(m,r):h===r?m:void 0;if(l&&!Ih(y)&&(y=Pd(u,r)),Ih(y)&&(a=y,s))return a;let b=t[i+1];i=s?go(b):qs(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Pd(u,r))}return a}function Ih(t){return t!==void 0}function Qj(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ir(Gc(t)))),t}function Yj(t,e){return(t.flags&(e?8:16))!==0}function ve(t,e=""){let n=he(),r=Mt(),i=t+Pe,o=r.firstCreatePass?Fh(r,i,1,e,null):r.data[i],s=k0(r,n,o,e,t);n[i]=s,zd()&&Pv(r,n,s,o),Ps(o,!1)}var k0=(t,e,n,r,i)=>(br(!0),hA(e[Se],r));function Zj(t,e,n,r,i){let o=!Rh(e,n);if(br(o),o)return hA(e[Se],r);let s=e[Yt];return Lh(s,t,e,n)}function F0(){k0=Zj}function Jj(t,e,n,r=""){return Ks(t,Os(),n)?e+bc(n)+r:Qn}function Xc(t){return Xn("",t),Xc}function Xn(t,e,n){let r=he(),i=Jj(r,t,e,n);return i!==Qn&&Xj(r,uo(),i),Xn}function Xj(t,e,n){let r=Jm(e,t);vL(t[Se],r,n)}function Zs(t,e,n){_y(e)&&(e=e());let r=he(),i=Os();if(Ks(r,i,e)){let o=Mt(),s=Hd();VA(s,r,t,e,r[Se],n)}return Zs}function eu(t,e){let n=_y(t);return n&&t.set(e),n}function Js(t,e){let n=he(),r=Mt(),i=ct();return x0(r,n,n[Se],i,t,e),Js}function eU(t,e,n){let r=Mt();if(r.firstCreatePass){let i=qn(t);ov(n,r.data,r.blueprint,i,!0),ov(e,r.data,r.blueprint,i,!1)}}function ov(t,e,n,r,i){if(t=yt(t),Array.isArray(t))for(let o=0;o<t.length;o++)ov(t[o],e,n,r,i);else{let o=Mt(),s=he(),a=ct(),u=Ji(t)?t:yt(t.provide),l=Km(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ji(t)||!t.multi){let y=new fo(l,i,ge,null),b=xy(u,e,i?h:h+m,p);b===-1?(Fy(sh(a,s),o,u),Oy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[b]=y,s[b]=y)}else{let y=xy(u,e,h+m,p),b=xy(u,e,h,h+m),M=y>=0&&n[y],R=b>=0&&n[b];if(i&&!R||!i&&!M){Fy(sh(a,s),o,u);let k=rU(i?nU:tU,n.length,i,r,l,t);!i&&R&&(n[b].providerFactory=k),Oy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=L0(n[i?b:y],l,!i&&r);Oy(o,t,y>-1?y:b,k)}!i&&r&&R&&n[b].componentProviders++}}}function Oy(t,e,n,r){let i=Ji(e),o=QC(e);if(i||o){let u=(o?yt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function L0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function xy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tU(t,e,n,r,i){return sv(this.multi,[])}function nU(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Fc(r,r[$],this.providerFactory.index,i);s=u.slice(0,a),sv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],sv(o,s);return s}function sv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function rU(t,e,n,r,i,o){let s=new fo(t,n,ge,null);return s.multi=[],s.index=e,s.componentProviders=0,L0(s,i,r&&!n),s}function Io(t,e=[]){return n=>{n.providersResolver=(r,i)=>eU(r,i?i(t):t,e)}}function zh(t,e,n){let r=dD()+t,i=he();return i[r]===Qn?g2(i,r,n?e.call(n):e()):m2(i,r)}var wh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},e_=(()=>{class t{compileModuleSync(n){return new Eh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=qm(n),o=IA(i.declarations).reduce((s,a)=>{let u=wr(a);return u&&s.push(new Hs(u)),s},[]);return new wh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iU=(()=>{class t{zone=S(fe);changeDetectionScheduler=S(jn);applicationRef=S(ut);applicationErrorHandler=S(Ht);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function V0({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new fe(J(O({},j0()),{scheduleInRootZone:n})),[{provide:fe,useFactory:t},{provide:ln,multi:!0,useFactory:()=>{let r=S(iU,{optional:!0});return()=>r.initialize()}},{provide:ln,multi:!0,useFactory:()=>{let r=S(oU);return()=>{r.initialize()}}},e===!0?{provide:Ey,useValue:!0}:[],{provide:Gd,useValue:n??DA},{provide:Ht,useFactory:()=>{let r=S(fe),i=S($e),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(bn),o.handleError(s))})}}}]}function j0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var oU=(()=>{class t{subscription=new Ve;initialized=!1;zone=S(fe);pendingTasks=S(An);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var t_=(()=>{class t{applicationErrorHandler=S(Ht);appRef=S(ut);taskService=S(An);ngZone=S(fe);zonelessEnabled=S(xs);tracing=S(yo,{optional:!0});disableScheduling=S(Ey,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(Gd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?VD:SA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,VD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function n_(){return yn("NgZoneless"),Ke([{provide:jn,useExisting:t_},{provide:fe,useClass:Vc},{provide:xs,useValue:!0},{provide:Gd,useValue:!1},[]])}function sU(){return typeof $localize<"u"&&$localize.locale||Jc}var r_=new F("",{providedIn:"root",factory:()=>S(r_,{optional:!0,skipSelf:!0})||sU()});function It(t){return PC(t)}function wo(t,e){return Ql(t,e?.equal)}var U0=class{[Rt];constructor(e){this[Rt]=e}destroy(){this[Rt].destroy()}};var c_={JSACTION:"__jsaction",OWNER:"__owner"},z0={};function aU(t){return t[c_.JSACTION]}function B0(t,e){t[c_.JSACTION]=e}function cU(t){return z0[t]}function uU(t,e){z0[t]=e}var q={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},lU=[q.MOUSEENTER,q.MOUSELEAVE,"pointerenter","pointerleave"],LJ=[q.CLICK,q.DBLCLICK,q.FOCUSIN,q.FOCUSOUT,q.KEYDOWN,q.KEYUP,q.KEYPRESS,q.MOUSEOVER,q.MOUSEOUT,q.SUBMIT,q.TOUCHSTART,q.TOUCHEND,q.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],dU=[q.FOCUS,q.BLUR,q.ERROR,q.LOAD,q.TOGGLE],u_=t=>dU.indexOf(t)>=0;function hU(t){return t===q.MOUSEENTER?q.MOUSEOVER:t===q.MOUSELEAVE?q.MOUSEOUT:t===q.POINTERENTER?q.POINTEROVER:t===q.POINTERLEAVE?q.POINTEROUT:t}function fU(t,e,n,r){let i=!1;u_(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function pU(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function gU(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var $0=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function mU(t){return t.which===2||t.which==null&&t.button===4}function yU(t){return $0&&t.metaKey||!$0&&t.ctrlKey||mU(t)||t.shiftKey}function vU(t,e,n){let r=t.relatedTarget;return(t.type===q.MOUSEOVER&&e===q.MOUSEENTER||t.type===q.MOUSEOUT&&e===q.MOUSELEAVE||t.type===q.POINTEROVER&&e===q.POINTERENTER||t.type===q.POINTEROUT&&e===q.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function _U(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===q.MOUSEOVER?n.type=q.MOUSEENTER:t.type===q.MOUSEOUT?n.type=q.MOUSELEAVE:t.type===q.POINTEROVER?n.type=q.POINTERENTER:n.type=q.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var EU=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Kh=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){EU&&(this.element.style.cursor="pointer"),this.handlerInfos.push(fU(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)pU(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},IU={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function fi(t){return t.eventType}function l_(t,e){t.eventType=e}function Gh(t){return t.event}function q0(t,e){t.event=e}function G0(t){return t.targetElement}function W0(t,e){t.targetElement=e}function K0(t){return t.eic}function wU(t,e){t.eic=e}function TU(t){return t.timeStamp}function bU(t,e){t.timeStamp=e}function Wh(t){return t.eia}function Q0(t,e,n){t.eia=[e,n]}function i_(t){t.eia=void 0}function qh(t){return t[1]}function CU(t){return t.eirp}function Y0(t,e){t.eirp=e}function Z0(t){return t.eir}function J0(t,e){t.eir=e}function X0(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function DU(t,e,n,r,i,o,s,a){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var o_=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return fi(this.eventInfo)}setEventType(e){l_(this.eventInfo,e)}getEvent(){return Gh(this.eventInfo)}setEvent(e){q0(this.eventInfo,e)}getTargetElement(){return G0(this.eventInfo)}setTargetElement(e){W0(this.eventInfo,e)}getContainer(){return K0(this.eventInfo)}setContainer(e){wU(this.eventInfo,e)}getTimestamp(){return TU(this.eventInfo)}setTimestamp(e){bU(this.eventInfo,e)}getAction(){let e=Wh(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){i_(this.eventInfo);return}Q0(this.eventInfo,e.name,e.element)}getIsReplay(){return CU(this.eventInfo)}setIsReplay(e){Y0(this.eventInfo,e)}getResolved(){return Z0(this.eventInfo)}setResolved(e){J0(this.eventInfo,e)}clone(){return new t(X0(this.eventInfo))}},SU={},AU=/\s*;\s*/,RU=q.CLICK,s_=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&fi(e)===q.CLICK&&yU(Gh(e))?l_(e,q.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Z0(e)||(this.populateAction(e,G0(e)),J0(e,!0))}resolveParentAction(e){let n=Wh(e),r=n&&qh(n);i_(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==K0(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Wh(e));)r=this.getParentNode(r);let i=Wh(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(fi(e)===q.MOUSEENTER||fi(e)===q.MOUSELEAVE||fi(e)===q.POINTERENTER||fi(e)===q.POINTERLEAVE)))if(vU(Gh(e),fi(e),qh(i))){let o=_U(Gh(e),qh(i));q0(e,o),W0(e,qh(i))}else i_(e)}getParentNode(e){let n=e[c_.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[fi(n)];i!==void 0&&Q0(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=aU(e);if(!n){let r=e.getAttribute(Wd.JSACTION);if(!r)n=SU,B0(e,n);else{if(n=cU(r),!n){n={};let i=r.split(AU);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(IU.EVENT_ACTION_SEPARATOR),u=a!==-1,l=u?s.substr(0,a).trim():RU,h=u?s.substr(a+1).trim():s;n[l]=h}uU(r,n)}B0(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},eR=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(eR||{}),a_=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new o_(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&MU(r.element,n)&&gU(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function MU(t,e){return t.tagName==="A"&&(e.getEventType()===q.CLICK||e.getEventType()===q.CLICKMOD)}var tR=Symbol.for("propagationStopped"),d_={REPLAY:101};var NU="`preventDefault` called during event replay.";var PU="`composedPath` called during event replay.",Qh=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new s_({clickModSupport:n}),this.dispatcher=new a_(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&kU(e),OU(e);e.getAction();){if(FU(e),u_(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),xU(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function OU(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[tR]=!0,n()};To(e,"stopPropagation",r),To(e,"stopImmediatePropagation",r)}function xU(t){return!!t.getEvent()[tR]}function kU(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);To(e,"target",n),To(e,"eventPhase",d_.REPLAY),To(e,"preventDefault",()=>{throw r(),new Error(NU+"")}),To(e,"composedPath",()=>{throw new Error(PU+"")})}function FU(t){let e=t.getEvent(),n=t.getAction()?.element;n&&To(e,"currentTarget",n,{configurable:!0})}function To(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function nR(t,e){t.ecrd(n=>{e.dispatch(n)},eR.I_AM_THE_JSACTION_FRAMEWORK)}function LU(t){return t?.q??[]}function VU(t){t&&(H0(t.c,t.et,t.h),H0(t.c,t.etc,t.h,!0))}function H0(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var jU=!1,rR=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=jU;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=DU(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){Y0(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&lU.indexOf(n)>=0)return;let o=(a,u,l)=>{this.handleEvent(a,u,l)};this.eventHandlers[n]=o;let s=hU(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{o(n,u,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),VU(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=X0(i);l_(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function iR(t,e=window){return LU(e._ejsas?.[t])}function h_(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var lR=Symbol("InputSignalNode#UNSET"),oB=J(O({},Yl),{transformFn:void 0,applyValueToInputSignal(t,e){ds(t,e)}});function dR(t,e){let n=Object.create(oB);n.value=t,n.transformFn=e?.transform;function r(){if(cs(n),n.value===lR){let i=null;throw new L(-950,i)}return n.value}return r[Rt]=n,r}var Xh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>$c(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},sB=new F("");sB.__NG_ELEMENT_ID__=t=>{let e=ct();if(e===null)throw new L(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new L(204,!1)};function oR(t,e){return dR(t,e)}function aB(t){return dR(lR,t)}var hR=(oR.required=aB,oR);var f_=new F(""),cB=new F("");function tu(t){return!t.moduleRef}function uB(t){let e=tu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(fe);return n.run(()=>{tu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ht),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),tu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(f_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(f_);s.add(o),t.moduleRef.onDestroy(()=>{kc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return dB(r,n,()=>{let o=e.get(An),s=o.add(),a=e.get(Kv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(r_,Jc);if(O0(u||Jc),!e.get(cB,!0))return tu(t)?e.get(ut):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(tu(t)){let h=e.get(ut);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return lB?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var lB;function dB(t,e,n){try{let r=n();return _o(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Zh=null;function hB(t=[],e){return xe.create({name:e,providers:[{provide:Dc,useValue:"platform"},{provide:f_,useValue:new Set([()=>Zh=null])},...t]})}function fB(t=[]){if(Zh)return Zh;let e=hB(t);return Zh=e,S0(),pB(e),e}function pB(t){let e=t.get(Th,null);Qe(t,()=>{e?.forEach(n=>n())})}function nu(){return!1}var Co=(()=>{class t{static __NG_ELEMENT_ID__=gB}return t})();function gB(t){return mB(ct(),he(),(t&16)===16)}function mB(t,e,n){if(Tr(t)&&!n){let r=gn(t.index,e);return new ci(r,r)}else if(t.type&175){let r=e[$t];return new ci(r,e)}return null}function fR(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ee(8);try{let o=i?.injector??fB(r),s=[V0({}),{provide:jn,useExisting:t_},TD,...n||[]],a=new Uc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return uB({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ee(9)}}var Yh=new WeakSet,sR="",Jh=[];function aR(t){return t.get(fv,zS)}function pR(){let t=[{provide:fv,useFactory:()=>{let e=!0;{let n=S(Kn);e=!!window._ejsas?.[n]}return e&&yn("NgEventReplay"),e}}];return t.push({provide:ln,useValue:()=>{let e=S(ut),{injector:n}=e;if(!Yh.has(e)){let r=S(pv);if(aR(n)){JS();let i=n.get(Kn),o=YS(i,(s,a,u)=>{s.nodeType===Node.ELEMENT_NODE&&(GS(s,a,u),WS(s,r))});e.onDestroy(o)}}},multi:!0},{provide:di,useFactory:()=>{let e=S(ut),{injector:n}=e;return()=>{if(!aR(n)||Yh.has(e))return;Yh.add(e);let r=n.get(Kn);e.onDestroy(()=>{Yh.delete(e),h_(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(QS);yB(i,n);let o=n.get(pv);o.get(sR)?.forEach(KS),o.delete(sR);let s=i.instance;oA(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var yB=(t,e)=>{let n=e.get(Kn),r=window._ejsas[n],i=t.instance=new rR(new Kh(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=iR(n);i.replayEarlyEventInfos(o),h_(n);let s=new Qh(a=>{vB(e,a,a.currentTarget)});nR(i,s)};function vB(t,e,n){let r=(n&&n.getAttribute(qc))??"";/d\d+/.test(r)?_B(r,t,e,n):e.eventPhase===d_.REPLAY&&gv(e,n)}function _B(t,e,n,r){Jh.push({event:n,currentTarget:r}),M0(e,t,EB)}function EB(t){let e=[...Jh],n=new Set(t);Jh=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(qc);n.has(o)?gv(r,i):Jh.push({event:r,currentTarget:i})}}var cR=!1;function IB(){cR||(cR=!0,nA(),N0(),F0(),P0(),T0(),m0(),r0(),LA())}function wB(t){return t.whenStable()}function gR(){let t=[{provide:zc,useFactory:()=>{let e=!0;return e=!!S(mo,{optional:!0})?.get(mv,null),e&&yn("NgHydration"),e}},{provide:ln,useValue:()=>{XA(!1),S(zc)&&(cA(Hc()),IB())},multi:!0}];return t.push({provide:hv,useFactory:()=>S(zc)},{provide:di,useFactory:()=>{if(S(zc)){let e=S(ut);return()=>{wB(e).then(()=>{e.destroyed||$v(e)})}}return()=>{}},multi:!0}),Ke(t)}function Do(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var vR=null;function vn(){return vR}function p_(t){vR??=t}var ru=class{},g_=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(_R),providedIn:"platform"})}return t})();var _R=(()=>{class t extends g_{_location;_history;_doc=S(it);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vn().getBaseHref(this._doc)}onPopState(n){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=vn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function ER(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function mR(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function pi(t){return t&&t[0]!=="?"?`?${t}`:t}var Xs=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(wR),providedIn:"root"})}return t})(),IR=new F(""),wR=(()=>{class t extends Xs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ER(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+pi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+pi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+pi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(X(g_),X(IR,8))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ea=(()=>{class t{_subject=new Ne;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=CB(mR(yR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+pi(r))}normalize(n){return t.stripTrailingSlash(bB(this._basePath,yR(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=pi;static joinWithSlash=ER;static stripTrailingSlash=mR;static \u0275fac=function(r){return new(r||t)(X(Xs))};static \u0275prov=U({token:t,factory:()=>TB(),providedIn:"root"})}return t})();function TB(){return new ea(X(Xs))}function bB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function yR(t){return t.replace(/\/index.html$/,"")}function CB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var gi=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yn({type:t});static \u0275inj=Cn({})}return t})();function m_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var iu=class{};var y_="browser";function TR(t){return t===y_}var ou=class{_doc;constructor(e){this._doc=e}manager},ef=(()=>{class t extends ou{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(X(it))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),nf=new F(""),w_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ef));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ef);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(X(nf),X(fe))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),v_="ng-app-id";function bR(t){for(let e of t)e.remove()}function CR(t,e){let n=e.createElement("style");return n.textContent=t,n}function AB(t,e,n,r){let i=t.head?.querySelectorAll(`style[${v_}="${e}"],link[${v_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(v_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function E_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var T_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,AB(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,CR);r?.forEach(i=>this.addUsage(i,this.external,E_))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(bR(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])bR(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,CR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,E_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(X(it),X(Kn),X(bh,8),X(Sr))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),__={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},b_=/%COMP%/g;var SR="%COMP%",RB=`_nghost-${SR}`,MB=`_ngcontent-${SR}`,NB=!0,PB=new F("",{providedIn:"root",factory:()=>NB});function OB(t){return MB.replace(b_,t)}function xB(t){return RB.replace(b_,t)}function AR(t,e){return e.map(n=>n.replace(b_,t))}var C_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new su(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof tf?i.applyToHost(n):i instanceof au&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Cr.Emulated:o=new tf(u,l,r,this.appId,h,s,a,p,m);break;case Cr.ShadowDom:return new I_(u,l,n,r,s,a,this.nonce,p,m);default:o=new au(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(X(w_),X(T_),X(Kn),X(PB),X(it),X(fe),X(bh),X(yo,8))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),su=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(__[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(DR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(DR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=__[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=__[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Dr.DashCase|Dr.Important)?e.style.setProperty(n,r,i&Dr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Dr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=vn().getGlobalEventTarget(this.doc,e),!e))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function DR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var I_=class extends su{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=AR(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=E_(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},au=class extends su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?AR(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Bs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},tf=class extends au{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=OB(h),this.hostAttr=xB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var rf=class t extends ru{supportsDOMEvents=!0;static makeCurrent(){p_(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=kB();return n==null?null:FB(n)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m_(document.cookie,e)}},cu=null;function kB(){return cu=cu||document.head.querySelector("base"),cu?cu.getAttribute("href"):null}function FB(t){return new URL(t,document.baseURI).pathname}var LB=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),RR=["alt","control","meta","shift"],VB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},MR=(()=>{class t extends ou{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),RR.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=VB[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),RR.forEach(s=>{if(s!==i){let a=jB[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(X(it))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function D_(t,e,n){let r=O({rootComponent:t,platformRef:n?.platformRef},UB(e));return fR(r)}function UB(t){return{appProviders:[...qB,...t?.providers??[]],platformProviders:zB}}function BB(){rf.makeCurrent()}function $B(){return new bn}function HB(){return uv(document),document}var zB=[{provide:Sr,useValue:y_},{provide:Th,useValue:BB,multi:!0},{provide:it,useFactory:HB}];var qB=[{provide:Dc,useValue:"root"},{provide:bn,useFactory:$B},{provide:nf,useClass:ef,multi:!0,deps:[it]},{provide:nf,useClass:MR,multi:!0,deps:[it]},C_,T_,w_,{provide:po,useExisting:C_},{provide:iu,useClass:LB},[]];var uu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var GB="X-Request-URL",WB="text/plain",KB="application/json",Qoe=`${KB}, ${WB}, */*`;var A_=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(A_||{}),S_=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new uu,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var of=class t extends S_{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=A_.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var NR=new F("");var Yoe=RegExp(`^${GB}:`,"m");var QB=new F(""),YB="b",ZB="h",JB="s",XB="st",e$="u",t$="rt",R_=new F(""),n$=["GET","HEAD"];function r$(t,e){let y=S(R_),{isCacheActive:n}=y,r=Xb(y,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!n$.includes(o)||!r.includeRequestsWithAuthHeaders&&i$(t)||r.filter?.(t)===!1)return e(t);let s=S(mo);if(S(QB,{optional:!0}))throw new L(2803,!1);let u=t.url,l=o$(t,u),h=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[YB]:b,[t$]:M,[ZB]:R,[JB]:k,[XB]:W,[e$]:Q}=h,_e=b;switch(M){case"arraybuffer":_e=new TextEncoder().encode(b).buffer;break;case"blob":_e=new Blob([b]);break}let pt=new uu(R);return H(new of({body:_e,headers:pt,status:k,statusText:W,url:Q}))}return e(t)}function i$(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function PR(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function o$(t,e){let{params:n,method:r,responseType:i}=t,o=PR(n),s=t.serializeBody();s instanceof URLSearchParams?s=PR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=s$(a);return u}function s$(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function OR(t){return[{provide:R_,useFactory:()=>(yn("NgHttpTransferCache"),O({isCacheActive:!0},t))},{provide:NR,useValue:r$,multi:!0},{provide:di,multi:!0,useFactory:()=>{let e=S(ut),n=S(R_);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var xR=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(X(it))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var sf=(function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t})(sf||{});function a$(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function kR(){return a$(sf.EventReplay,pR())}function FR(...t){let e=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);let r=n.has(sf.HttpTransferCacheOptions);return Ke([[],[],gR(),n.has(sf.NoHttpTransferCache)||r?[]:OR({}),e])}var ee="primary",bu=Symbol("RouteTitle"),x_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ro(t){return new x_(t)}function zR(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function u$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}function er(t,e){let n=t?k_(t):void 0,r=e?k_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qR(t[i],e[i]))return!1;return!0}function k_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function GR(t){return t.length>0?t[t.length-1]:null}function Pr(t){return mm(t)?t:_o(t)?De(Promise.resolve(t)):H(t)}var l$={exact:KR,subset:QR},WR={exact:d$,subset:h$,ignored:()=>!0};function LR(t,e,n){return l$[n.paths](t.root,e.root,n.matrixParams)&&WR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function d$(t,e){return er(t,e)}function KR(t,e,n){if(!So(t.segments,e.segments)||!uf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!KR(t.children[r],e.children[r],n))return!1;return!0}function h$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qR(t[n],e[n]))}function QR(t,e,n){return YR(t,e,e.segments,n)}function YR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!So(i,n)||e.hasChildren()||!uf(i,n,r))}else if(t.segments.length===n.length){if(!So(t.segments,n)||!uf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!QR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!So(t.segments,i)||!uf(t.segments,i,r)||!t.children[ee]?!1:YR(t.children[ee],e,o,r)}}function uf(t,e,n){return e.every((r,i)=>WR[n](t[i].parameters,r.parameters))}var nr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ie([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){return g$.serialize(this)}},Ie=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},mi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ro(this.parameters),this._parameterMap}toString(){return JR(this)}};function f$(t,e){return So(t,e)&&t.every((n,r)=>er(n.parameters,e[r].parameters))}function So(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function p$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var Cu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new Mo,providedIn:"root"})}return t})(),Mo=class{parse(e){let n=new L_(e);return new nr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${lu(e.root,!0)}`,r=v$(e.queryParams),i=typeof e.fragment=="string"?`#${m$(e.fragment)}`:"";return`${n}${r}${i}`}},g$=new Mo;function lf(t){return t.segments.map(e=>JR(e)).join("/")}function lu(t,e){if(!t.hasChildren())return lf(t);if(e){let n=t.children[ee]?lu(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${lu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=p$(t,(r,i)=>i===ee?[lu(t.children[ee],!1)]:[`${i}:${lu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${lf(t)}/${n[0]}`:`${lf(t)}/(${n.join("//")})`}}function ZR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(t){return ZR(t).replace(/%3B/gi,";")}function m$(t){return encodeURI(t)}function F_(t){return ZR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(t){return decodeURIComponent(t)}function VR(t){return df(t.replace(/\+/g,"%20"))}function JR(t){return`${F_(t.path)}${y$(t.parameters)}`}function y$(t){return Object.entries(t).map(([e,n])=>`;${F_(e)}=${F_(n)}`).join("")}function v$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${af(n)}=${af(i)}`).join("&"):`${af(n)}=${af(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var _$=/^[^\/()?;#]+/;function M_(t){let e=t.match(_$);return e?e[0]:""}var E$=/^[^\/()?;=#]+/;function I$(t){let e=t.match(E$);return e?e[0]:""}var w$=/^[^=?&#]+/;function T$(t){let e=t.match(w$);return e?e[0]:""}var b$=/^[^&#]+/;function C$(t){let e=t.match(b$);return e?e[0]:""}var L_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ie([],{}):new Ie([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new Ie(e,n)),r}parseSegment(){let e=M_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new mi(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=I$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=M_(this.remaining);i&&(r=i,this.capture(r))}e[df(n)]=df(r)}parseQueryParam(e){let n=T$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=C$(this.remaining);s&&(r=s,this.capture(r))}let i=VR(n),o=VR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=M_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o??ee]=Object.keys(s).length===1&&s[ee]?s[ee]:new Ie([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function XR(t){return t.segments.length>0?new Ie([],{[ee]:t}):t}function eM(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=eM(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ie(t.segments,e);return D$(n)}function D$(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new Ie(t.segments.concat(e.segments),e.children)}return t}function yi(t){return t instanceof nr}function tM(t,e,n=null,r=null){let i=nM(t);return rM(i,e,n,r)}function nM(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ie(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=XR(r);return e??i}function rM(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return N_(i,i,i,n,r);let o=S$(e);if(o.toRoot())return N_(i,i,new Ie([],{}),n,r);let s=A$(o,i,t),a=s.processChildren?hu(s.segmentGroup,s.index,o.commands):oM(s.segmentGroup,s.index,o.commands);return N_(i,s.segmentGroup,a,n,r)}function hf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function gu(t){return typeof t=="object"&&t!=null&&t.outlets}function N_(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=iM(t,e,n);let a=XR(eM(s));return new nr(a,o,i)}function iM(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=iM(o,e,n)}),new Ie(t.segments,r)}var ff=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hf(r[0]))throw new L(4003,!1);let i=r.find(gu);if(i&&i!==GR(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ff(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ff(n,e,r)}var ra=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function A$(t,e,n){if(t.isAbsolute)return new ra(e,!0,0);if(!n)return new ra(e,!1,NaN);if(n.parent===null)return new ra(n,!0,0);let r=hf(t.commands[0])?0:1,i=n.segments.length-1+r;return R$(n,i,t.numberOfDoubleDots)}function R$(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new ra(r,!1,i-o)}function M$(t){return gu(t[0])?t[0].outlets:{[ee]:t}}function oM(t,e,n){if(t??=new Ie([],{}),t.segments.length===0&&t.hasChildren())return hu(t,e,n);let r=N$(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ie(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new Ie(t.segments.slice(r.pathIndex),t.children),hu(o,0,i)}else return r.match&&i.length===0?new Ie(t.segments,{}):r.match&&!t.hasChildren()?V_(t,e,n):r.match?hu(t,0,i):V_(t,e,n)}function hu(t,e,n){if(n.length===0)return new Ie(t.segments,{});{let r=M$(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=hu(t.children[ee],e,n);return new Ie(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oM(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ie(t.segments,i)}}function N$(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(gu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!UR(u,l,s))return o;r+=2}else{if(!UR(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function V_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(gu(o)){let u=P$(o.outlets);return new Ie(r,u)}if(i===0&&hf(n[0])){let u=t.segments[e];r.push(new mi(u.path,jR(n[0]))),i++;continue}let s=gu(o)?o.outlets[ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&hf(a)?(r.push(new mi(s,jR(a))),i+=2):(r.push(new mi(s,{})),i++)}return new Ie(r,{})}function P$(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=V_(new Ie([],{}),0,r))}),e}function jR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function UR(t,e,n){return t==n.path&&er(e,n.parameters)}var fu="imperative",lt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(lt||{}),on=class{id;url;constructor(e,n){this.id=e,this.url=n}},No=class extends on{type=lt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends on{urlAfterRedirects;type=lt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Lt||{}),mu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(mu||{}),tr=class extends on{reason;code;type=lt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends on{reason;code;type=lt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},oa=class extends on{error;target;type=lt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yu=class extends on{urlAfterRedirects;state;type=lt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pf=class extends on{urlAfterRedirects;state;type=lt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends on{urlAfterRedirects;state;shouldActivate;type=lt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mf=class extends on{urlAfterRedirects;state;type=lt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends on{urlAfterRedirects;state;type=lt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class{route;type=lt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_f=class{route;type=lt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ef=class{snapshot;type=lt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},If=class{snapshot;type=lt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{snapshot;type=lt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{snapshot;type=lt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vu=class{},sa=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function O$(t){return!(t instanceof vu)&&!(t instanceof sa)}function x$(t,e){return t.providers&&!t._injector&&(t._injector=Qs(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Pn(t){return t.outlet||ee}function k$(t,e){let n=t.filter(r=>Pn(r)===e);return n.push(...t.filter(r=>Pn(r)!==e)),n}function ua(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var bf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ua(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new la(this.rootInjector)}},la=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new bf(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(X($e))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=j_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=j_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=U_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return U_(e,this._root).map(n=>n.value)}};function j_(t,e){if(t===e.value)return e;for(let n of e.children){let r=j_(t,n);if(r)return r}return null}function U_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=U_(t,n);if(r.length)return r.unshift(e),r}return[]}var rn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function na(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var _u=class extends Cf{snapshot;constructor(e,n){super(e),this.snapshot=n,K_(this,e)}toString(){return this.snapshot.toString()}};function sM(t){let e=F$(t),n=new mt([new mi("",{})]),r=new mt({}),i=new mt({}),o=new mt({}),s=new mt(""),a=new Nr(n,r,o,s,i,ee,t,e.root);return a.snapshot=e.root,new _u(new rn(a,[]),e)}function F$(t){let e={},n={},r={},o=new Ao([],e,r,"",n,ee,t,null,{});return new Eu("",new rn(o,[]))}var Nr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(B(l=>l[bu]))??H(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>Ro(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>Ro(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Df(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&cM(i)&&(r.resolve[bu]=i.title),r}var Ao=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[bu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ro(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Eu=class extends Cf{url;constructor(e,n){super(n),this.url=e,K_(this,n)}toString(){return aM(this._root)}};function K_(t,e){e.value._routerState=t,e.children.forEach(n=>K_(t,n))}function aM(t){let e=t.children.length>0?` { ${t.children.map(aM).join(", ")} } `:"";return`${t.value}${e}`}function P_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),er(e.params,n.params)||t.paramsSubject.next(n.params),u$(e.url,n.url)||t.urlSubject.next(n.url),er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function B_(t,e){let n=er(t.params,e.params)&&f$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||B_(t.parent,e.parent))}function cM(t){return typeof t.title=="string"||t.title===null}var uM=new F(""),Du=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new ze;deactivateEvents=new ze;attachEvents=new ze;detachEvents=new ze;routerOutletData=hR();parentContexts=S(la);location=S(vo);changeDetector=S(Co);inputBinder=S(Mf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new $_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wn]})}return t})(),$_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Nr?this.route:e===la?this.childContexts:e===uM?this.outletData:this.parent.get(e,n)}},Mf=new F("");var Q_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Et({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Te(0,"router-outlet")},dependencies:[Du],encapsulation:2})}return t})();function Y_(t){let e=t.children&&t.children.map(Y_),n=e?J(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=Q_),n}function L$(t,e,n){let r=Iu(t,e._root,n?n._root:void 0);return new _u(r,e)}function Iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=V$(t,e,n);return new rn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Iu(t,a)),s}}let r=j$(e.value),i=e.children.map(o=>Iu(t,o));return new rn(r,i)}}function V$(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Iu(t,r,i);return Iu(t,r)})}function j$(t){return new Nr(new mt(t.url),new mt(t.params),new mt(t.queryParams),new mt(t.fragment),new mt(t.data),t.outlet,t.component,t)}var aa=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},lM="ngNavigationCancelingError";function Sf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dM(!1,Lt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function dM(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[lM]=!0,n.cancellationCode=e,n}function U$(t){return hM(t)&&yi(t.url)}function hM(t){return!!t&&t[lM]}var B$=(t,e,n,r)=>B(i=>(new H_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),H_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),P_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=na(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=na(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=na(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Tf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new If(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(P_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),P_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Af=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ia=class{component;route;constructor(e,n){this.component=e,this.route=n}};function $$(t,e,n){let r=t._root,i=e?e._root:null;return du(r,i,n,[r.value])}function H$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function da(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!xm(t)?t:e.get(t):r}function du(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=na(e);return t.children.forEach(s=>{z$(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pu(a,n.getContext(s),i)),i}function z$(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=q$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Af(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?du(t,e,a?a.children:null,r,i):du(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ia(a.outlet.component,s))}else s&&pu(e,a,i),i.canActivateChecks.push(new Af(r)),o.component?du(t,null,a?a.children:null,r,i):du(t,null,n,r,i);return i}function q$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!So(t.url,e.url);case"pathParamsOrQueryParamsChange":return!So(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!B_(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!B_(t,e)}}function pu(t,e,n){let r=na(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?pu(s,e.children.getContext(o),n):pu(s,null,n):pu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ia(e.outlet.component,i)):n.canDeactivateChecks.push(new ia(null,i)):n.canDeactivateChecks.push(new ia(null,i))}function Su(t){return typeof t=="function"}function G$(t){return typeof t=="boolean"}function W$(t){return t&&Su(t.canLoad)}function K$(t){return t&&Su(t.canActivate)}function Q$(t){return t&&Su(t.canActivateChild)}function Y$(t){return t&&Su(t.canDeactivate)}function Z$(t){return t&&Su(t.canMatch)}function fM(t){return t instanceof yr||t?.name==="EmptyError"}var cf=Symbol("INITIAL_VALUE");function ca(){return rt(t=>Ed(t.map(e=>e.pipe(kt(1),Td(cf)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===cf)return cf;if(n===!1||J$(n))return n}return!0}),We(e=>e!==cf),kt(1)))}function J$(t){return yi(t)||t instanceof aa}function X$(t,e){return Ge(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?H(J(O({},n),{guardsResult:!0})):eH(s,r,i,t).pipe(Ge(a=>a&&G$(a)?tH(r,o,t,e):H(a)),B(a=>J(O({},n),{guardsResult:a})))})}function eH(t,e,n,r){return De(t).pipe(Ge(i=>sH(i.component,i.route,n,e,r)),_r(i=>i!==!0,!0))}function tH(t,e,n,r){return De(e).pipe(Ki(i=>bs(rH(i.route.parent,r),nH(i.route,r),oH(t,i.path,n),iH(t,i.route,n))),_r(i=>i!==!0,!0))}function nH(t,e){return t!==null&&e&&e(new wf(t)),H(!0)}function rH(t,e){return t!==null&&e&&e(new Ef(t)),H(!0)}function iH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(o=>vc(()=>{let s=ua(e)??n,a=da(o,s),u=K$(a)?a.canActivate(e,t):Qe(s,()=>a(e,t));return Pr(u).pipe(_r())}));return H(i).pipe(ca())}function oH(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>H$(s)).filter(s=>s!==null).map(s=>vc(()=>{let a=s.guards.map(u=>{let l=ua(s.node)??n,h=da(u,l),p=Q$(h)?h.canActivateChild(r,t):Qe(l,()=>h(r,t));return Pr(p).pipe(_r())});return H(a).pipe(ca())}));return H(o).pipe(ca())}function sH(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let u=ua(e)??i,l=da(a,u),h=Y$(l)?l.canDeactivate(t,e,n,r):Qe(u,()=>l(t,e,n,r));return Pr(h).pipe(_r())});return H(s).pipe(ca())}function aH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return H(!0);let o=i.map(s=>{let a=da(s,t),u=W$(a)?a.canLoad(e,n):Qe(t,()=>a(e,n));return Pr(u)});return H(o).pipe(ca(),pM(r))}function pM(t){return td(Be(e=>{if(typeof e!="boolean")throw Sf(t,e)}),B(e=>e===!0))}function cH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=da(s,t),u=Z$(a)?a.canMatch(e,n):Qe(t,()=>a(e,n));return Pr(u)});return H(o).pipe(ca(),pM(r))}var wu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Tu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ta(t){return ws(new wu(t))}function uH(t){return ws(new L(4e3,!1))}function lH(t){return ws(dM(!1,Lt.GuardRejected))}var z_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[ee])return uH(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,o){return dH(n,i,o).pipe(B(s=>{if(s instanceof nr)throw new Tu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Tu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new nr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ie(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function dH(t,e,n){if(typeof t=="string")return H(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Pr(Qe(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var q_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hH(t,e,n,r,i){let o=gM(t,e,n);return o.matched?(r=x$(e,r),cH(r,e,n,i).pipe(B(s=>s===!0?o:O({},q_)))):H(o)}function gM(t,e,n){if(e.path==="**")return fH(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},q_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zR)(n,t,e);if(!i)return O({},q_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function fH(t){return{matched:!0,parameters:t.length>0?GR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function BR(t,e,n,r){return n.length>0&&mH(t,n,r)?{segmentGroup:new Ie(e,gH(r,new Ie(n,t.children))),slicedSegments:[]}:n.length===0&&yH(t,n,r)?{segmentGroup:new Ie(t.segments,pH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ie(t.segments,t.children),slicedSegments:n}}function pH(t,e,n,r){let i={};for(let o of n)if(Nf(t,e,o)&&!r[Pn(o)]){let s=new Ie([],{});i[Pn(o)]=s}return O(O({},r),i)}function gH(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Pn(r)!==ee){let i=new Ie([],{});n[Pn(r)]=i}return n}function mH(t,e,n){return n.some(r=>Nf(t,e,r)&&Pn(r)!==ee)}function yH(t,e,n){return n.some(r=>Nf(t,e,r))}function Nf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vH(t,e,n){return e.length===0&&!t.children[n]}var G_=class{};function _H(t,e,n,r,i,o,s="emptyOnly"){return new W_(t,e,n,r,i,s,o).recognize()}var EH=31,W_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new z_(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){let e=BR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(({children:n,rootSnapshot:r})=>{let i=new rn(r,n),o=new Eu("",i),s=tM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ao([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(B(r=>({children:r,rootSnapshot:n})),Bt(r=>{if(r instanceof Tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(B(s=>s instanceof rn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return De(o).pipe(Ki(s=>{let a=r.children[s],u=k$(n,s);return this.processSegmentGroup(e,u,a,s,i)}),wd((s,a)=>(s.push(...a),s)),Xr(null),vm(),Ge(s=>{if(s===null)return ta(r);let a=mM(s);return IH(a),H(a)}))}processSegment(e,n,r,i,o,s,a){return De(n).pipe(Ki(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Bt(l=>{if(l instanceof wu)return H(null);throw l}))),_r(u=>!!u),Bt(u=>{if(fM(u))return vH(r,i,o)?H(new G_):ta(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Pn(r)!==s&&(s===ee||!Nf(i,o,r))?ta(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):ta(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=gM(n,i,o);if(!u)return ta(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EH&&(this.allowRedirects=!1));let y=new Ao(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,$R(i),Pn(i),i.component??i._loadedComponent??null,i,HR(i)),b=Df(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(b.params),y.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(rt(R=>this.applyRedirects.lineralizeSegments(i,R)),Ge(R=>this.processSegment(e,r,n,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=hH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(rt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(rt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Ao(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,$R(r),Pn(r),r.component??r._loadedComponent??null,r,HR(r)),M=Df(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:R,slicedSegments:k}=BR(n,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,b).pipe(B(Q=>new rn(b,Q)));if(l.length===0&&k.length===0)return H(new rn(b,[]));let W=Pn(r)===o;return this.processSegment(h,l,R,k,W?ee:o,!0,b).pipe(B(Q=>new rn(b,Q instanceof rn?[Q]:[])))}))):ta(n)))}getChildConfig(e,n,r){return n.children?H({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?H({routes:n._loadedRoutes,injector:n._loadedInjector}):aH(e,n,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,n).pipe(Be(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):lH(n))):H({routes:[],injector:e})}};function IH(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function wH(t){let e=t.value.routeConfig;return e&&e.path===""}function mM(t){let e=[],n=new Set;for(let r of t){if(!wH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=mM(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!n.has(r))}function $R(t){return t.data||{}}function HR(t){return t.resolve||{}}function TH(t,e,n,r,i,o){return Ge(s=>_H(t,e,n,r,s.extractedUrl,i,o).pipe(B(({state:a,tree:u})=>J(O({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function bH(t,e){return Ge(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return H(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of yM(u))s.add(l);let a=0;return De(s).pipe(Ki(u=>o.has(u)?CH(u,r,t,e):(u.data=Df(u,u.parent,t).resolve,H(void 0))),Be(()=>a++),Cs(1),Ge(u=>a===s.size?H(n):jt))})}function yM(t){let e=t.children.map(n=>yM(n)).flat();return[t,...e]}function CH(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!cM(i)&&(o[bu]=i.title),vc(()=>(t.data=Df(t,t.parent,n).resolve,DH(o,t,e,r).pipe(B(s=>(t._resolvedData=s,t.data=O(O({},t.data),s),null)))))}function DH(t,e,n,r){let i=k_(t);if(i.length===0)return H({});let o={};return De(i).pipe(Ge(s=>SH(t[s],e,n,r).pipe(_r(),Be(a=>{if(a instanceof aa)throw Sf(new Mo,a);o[s]=a}))),Cs(1),B(()=>o),Bt(s=>fM(s)?jt:ws(s)))}function SH(t,e,n,r){let i=ua(e)??r,o=da(t,i),s=o.resolve?o.resolve(e,n):Qe(i,()=>o(e,n));return Pr(s)}function O_(t){return rt(e=>{let n=t(e);return n?De(n).pipe(B(()=>e)):H(e)})}var Z_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[bu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(vM),providedIn:"root"})}return t})(),vM=(()=>{class t extends Z_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(X(xR))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ha=new F("",{providedIn:"root",factory:()=>({})}),Au=new F(""),_M=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(e_);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return H(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Pr(Qe(n,()=>r.loadComponent())).pipe(B(IM),rt(wM),Be(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),_c(()=>{this.componentLoaders.delete(r)})),o=new vs(i,()=>new Ne).pipe(ys());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=EM(r,this.compiler,n,this.onLoadEndListener).pipe(_c(()=>{this.childrenLoaders.delete(r)})),s=new vs(o,()=>new Ne).pipe(ys());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EM(t,e,n,r){return Pr(Qe(n,()=>t.loadChildren())).pipe(B(IM),rt(wM),Ge(i=>i instanceof Bh||Array.isArray(i)?H(i):De(e.compileModuleAsync(i))),B(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Au,[],{optional:!0,self:!0}).flat()),{routes:s.map(Y_),injector:o}}))}function AH(t){return t&&typeof t=="object"&&"default"in t}function IM(t){return AH(t)?t.default:t}function wM(t){return H(t)}var Pf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(RH),providedIn:"root"})}return t})(),RH=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),TM=new F("");var bM=new F(""),CM=(()=>{class t{currentNavigation=Oe(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ne;transitionAbortWithErrorSubject=new Ne;configLoader=S(_M);environmentInjector=S($e);destroyRef=S(Sn);urlSerializer=S(Cu);rootContexts=S(la);location=S(ea);inputBindingEnabled=S(Mf,{optional:!0})!==null;titleStrategy=S(Z_);options=S(ha,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Pf);createViewTransition=S(TM,{optional:!0});navigationErrorHandler=S(bM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new vf(i)),r=i=>this.events.next(new _f(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;It(()=>{this.transitions?.next(J(O({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new mt(null),this.transitions.pipe(We(r=>r!==null),rt(r=>{let i=!1;return H(r).pipe(rt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Lt.SupersededByNewNavigation),jt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?J(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Mr(o.id,this.urlSerializer.serialize(o.rawUrl),"",mu.IgnoredSameUrlNavigation)),o.resolve(!1),jt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return H(o).pipe(rt(u=>(this.events.next(new No(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?jt:Promise.resolve(u))),TH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new yu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new No(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let b=sM(this.rootComponentType).snapshot;return this.currentTransition=r=J(O({},o),{targetSnapshot:b,urlAfterRedirects:l,extras:J(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(M=>(M.finalUrl=l,M)),H(r)}else return this.events.next(new Mr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",mu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),jt}),Be(o=>{let s=new pf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),B(o=>(this.currentTransition=r=J(O({},o),{guards:$$(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),X$(this.environmentInjector,o=>this.events.next(o)),Be(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Sf(this.urlSerializer,o.guardsResult);let s=new gf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),We(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Lt.GuardRejected),!1)),O_(o=>{if(o.guards.canActivateChecks.length!==0)return H(o).pipe(Be(s=>{let a=new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),rt(s=>{let a=!1;return H(s).pipe(bH(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Lt.NoDataFromResolver)}}))}),Be(s=>{let a=new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),O_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=ua(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Be(h=>{a.component=h}),B(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Ed(s(o.targetSnapshot.root)).pipe(Xr(null),kt(1))}),O_(()=>this.afterPreactivation()),rt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?De(a).pipe(B(()=>r)):H(r)}),B(o=>{let s=L$(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=J(O({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Be(()=>{this.events.next(new vu)}),B$(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),kt(1),bd(new K(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(We(()=>!i&&!r.targetRouterState),Be(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Lt.Aborted)}))),Be({next:o=>{i=!0,this.lastSuccessfulNavigation=It(this.currentNavigation),this.events.next(new sn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),bd(this.transitionAbortWithErrorSubject.pipe(Be(o=>{throw o}))),_c(()=>{i||this.cancelNavigationTransition(r,"",Lt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Bt(o=>{if(this.destroyed)return r.resolve(!1),jt;if(i=!0,hM(o))this.events.next(new tr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),U$(o)?this.events.next(new sa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new oa(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof aa){let{message:u,cancellationCode:l}=Sf(this.urlSerializer,a);this.events.next(new tr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new sa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return jt}))}))}cancelNavigationTransition(n,r,i){let o=new tr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=It(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MH(t){return t!==fu}var DM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(NH),providedIn:"root"})}return t})(),Rf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},NH=(()=>{class t extends Rf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SM=(()=>{class t{urlSerializer=S(Cu);options=S(ha,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(ea);urlHandlingStrategy=S(Pf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new nr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof nr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=sM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>S(PH),providedIn:"root"})}return t})(),PH=(()=>{class t extends SM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof No?this.updateStateMemento():n instanceof Mr?this.commitTransition(r):n instanceof yu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof vu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof tr&&n.code!==Lt.SupersededByNewNavigation&&n.code!==Lt.Redirect?this.restoreHistory(r):n instanceof oa?this.restoreHistory(r,!0):n instanceof sn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function J_(t,e){t.events.pipe(We(n=>n instanceof sn||n instanceof tr||n instanceof oa||n instanceof Mr),B(n=>n instanceof sn||n instanceof Mr?0:(n instanceof tr?n.code===Lt.Redirect||n.code===Lt.SupersededByNewNavigation:!1)?2:1),We(n=>n!==2),kt(1)).subscribe(()=>{e()})}var OH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},qt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S($h);stateManager=S(SM);options=S(ha,{optional:!0})||{};pendingTasks=S(An);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(CM);urlSerializer=S(Cu);location=S(ea);urlHandlingStrategy=S(Pf);injector=S($e);_events=new Ne;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(DM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(Au,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(Mf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=It(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof tr&&r.code!==Lt.Redirect&&r.code!==Lt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0;else if(r instanceof sa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MH(i.source)},s);this.scheduleNavigation(a,fu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}O$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Ht)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return It(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Y_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=nM(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return rM(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=yi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fu,null,r)}navigate(n,r={skipLocationChange:!1}){return kH(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Un(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},OH):r===!1?i=O({},xH):i=r,yi(n))return LR(this.currentUrlTree,n,i);let o=this.parseUrl(n);return LR(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return J_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kH(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new L(4008,!1)}var fa=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Oe(null);get href(){return It(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ne;applicationErrorHandler=S(Ht);options=S(ha,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new Xh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof sn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(yi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:yi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ge(qt),ge(Nr),$c("tabindex"),ge(li),ge(mn),ge(Xs))};static \u0275dir=ot({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Ze("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Eo("href",i.reactiveHref(),Iv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Do],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Do],replaceUrl:[2,"replaceUrl","replaceUrl",Do],routerLink:"routerLink"},features:[Wn]})}return t})(),X_=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ze;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof sn&&this.update()})}ngAfterContentInit(){H(this.links.changes,H(null)).pipe(Ts()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=De(n).pipe(Ts()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=LH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(ge(qt),ge(mn),ge(li),ge(Co),ge(fa,8))};static \u0275dir=ot({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Zv(o,fa,5),r&2){let s;Jv(s=Xv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Wn]})}return t})();function LH(t){return!!t.paths}var VH=new F("");function eE(t,...e){return Ke([{provide:Au,multi:!0,useValue:t},[],{provide:Nr,useFactory:jH,deps:[qt]},{provide:di,multi:!0,useFactory:UH},e.map(n=>n.\u0275providers)])}function jH(t){return t.routerState.root}function UH(){let t=S(xe);return e=>{let n=t.get(ut);if(e!==n.components[0])return;let r=t.get(qt),i=t.get(BH);t.get($H)===1&&r.initialNavigation(),t.get(HH,null,{optional:!0})?.setUpPreloading(),t.get(VH,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BH=new F("",{factory:()=>new Ne}),$H=new F("",{providedIn:"root",factory:()=>1});var HH=new F("");var Of=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-homepage"]],decls:2,vars:0,template:function(n,r){n&1&&(Zn(0,"p"),ve(1,"homepage works!"),Jn())},encapsulation:2})};var xf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-elenco-auto"]],decls:2,vars:0,template:function(n,r){n&1&&(Zn(0,"p"),ve(1,"elenco-auto works!"),Jn())},encapsulation:2})};var kf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-nuova-auto"]],decls:2,vars:0,template:function(n,r){n&1&&(Zn(0,"p"),ve(1,"nuova-auto works!"),Jn())},encapsulation:2})};var FM=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ge(li),ge(mn))};static \u0275dir=ot({type:t})}return t})(),zH=(()=>{class t extends FM{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=ot({type:t,features:[Mn]})}return t})(),LM=new F("");var qH={provide:LM,useExisting:Bn(()=>zf),multi:!0};function GH(){let t=vn()?vn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var WH=new F(""),zf=(()=>{class t extends FM{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!GH())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ge(li),ge(mn),ge(WH,8))};static \u0275dir=ot({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ze("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Io([qH]),Mn]})}return t})();function KH(t){return t==null||VM(t)===0}function VM(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var qf=new F(""),jM=new F("");function QH(t){return KH(t.value)?{required:!0}:null}function YH(t){return e=>{let n=e.value?.length??VM(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function AM(t){return null}function UM(t){return t!=null}function BM(t){return _o(t)?De(t):t}function $M(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function HM(t,e){return e.map(n=>n(t))}function ZH(t){return!t.validate}function zM(t){return t.map(e=>ZH(e)?e:n=>e.validate(n))}function JH(t){if(!t)return null;let e=t.filter(UM);return e.length==0?null:function(n){return $M(HM(n,e))}}function rE(t){return t!=null?JH(zM(t)):null}function XH(t){if(!t)return null;let e=t.filter(UM);return e.length==0?null:function(n){let r=HM(n,e).map(BM);return ym(r).pipe(B($M))}}function iE(t){return t!=null?XH(zM(t)):null}function RM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function e4(t){return t._rawValidators}function t4(t){return t._rawAsyncValidators}function tE(t){return t?Array.isArray(t)?t:[t]:[]}function Lf(t,e){return Array.isArray(t)?t.includes(e):t===e}function MM(t,e){let n=tE(e);return tE(t).forEach(i=>{Lf(n,i)||n.push(i)}),n}function NM(t,e){return tE(e).filter(n=>!Lf(t,n))}var Vf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ma=class extends Vf{name;get formDirective(){return null}get path(){return null}},xu=class extends Vf{_parent=null;name=null;valueAccessor=null},jf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},n4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qae=J(O({},n4),{"[class.ng-submitted]":"isSubmitted"}),qM=(()=>{class t extends jf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ge(xu,2))};static \u0275dir=ot({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&nn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Mn]})}return t})(),GM=(()=>{class t extends jf{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ge(ma,10))};static \u0275dir=ot({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&nn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Mn]})}return t})();var Ru="VALID",Ff="INVALID",pa="PENDING",Mu="DISABLED",vi=class{},Uf=class extends vi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Pu=class extends vi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Ou=class extends vi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ga=class extends vi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},nE=class extends vi{source;constructor(e){super(),this.source=e}},Bf=class extends vi{source;constructor(e){super(),this.source=e}};function WM(t){return(Gf(t)?t.validators:t)||null}function r4(t){return Array.isArray(t)?rE(t):t||null}function KM(t,e){return(Gf(e)?e.asyncValidators:t)||null}function i4(t){return Array.isArray(t)?iE(t):t||null}function Gf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function o4(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[n])throw new L(1001,"")}function s4(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new L(1002,"")})}var $f=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return It(this.statusReactive)}set status(e){It(()=>this.statusReactive.set(e))}_status=wo(()=>this.statusReactive());statusReactive=Oe(void 0);get valid(){return this.status===Ru}get invalid(){return this.status===Ff}get pending(){return this.status==pa}get disabled(){return this.status===Mu}get enabled(){return this.status!==Mu}errors;get pristine(){return It(this.pristineReactive)}set pristine(e){It(()=>this.pristineReactive.set(e))}_pristine=wo(()=>this.pristineReactive());pristineReactive=Oe(!0);get dirty(){return!this.pristine}get touched(){return It(this.touchedReactive)}set touched(e){It(()=>this.touchedReactive.set(e))}_touched=wo(()=>this.touchedReactive());touchedReactive=Oe(!1);get untouched(){return!this.touched}_events=new Ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(MM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(NM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(NM(e,this._rawAsyncValidators))}hasValidator(e){return Lf(this._rawValidators,e)}hasAsyncValidator(e){return Lf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ou(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ou(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Pu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Pu(!0,r))}markAsPending(e={}){this.status=pa;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ga(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Mu,this.errors=null,this._forEachChild(i=>{i.disable(J(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uf(this.value,r)),this._events.next(new ga(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ru,this._forEachChild(r=>{r.enable(J(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ru||this.status===pa)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uf(this.value,n)),this._events.next(new ga(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mu:Ru}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=pa,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=BM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ga(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ze,this.statusChanges=new ze}_calculateStatus(){return this._allControlsDisabled()?Mu:this.errors?Ff:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pa)?pa:this._anyControlsHaveStatus(Ff)?Ff:Ru}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Pu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ou(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=r4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=i4(this._rawAsyncValidators)}},Hf=class extends $f{constructor(e,n,r){super(WM(n),KM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){s4(this,!0,e),Object.keys(e).forEach(r=>{o4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Bf(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var oE=new F("",{providedIn:"root",factory:()=>sE}),sE="always";function a4(t,e){return[...e.path,t]}function QM(t,e,n=sE){YM(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),u4(t,e),d4(t,e),l4(t,e),c4(t,e)}function PM(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function c4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function YM(t,e){let n=e4(t);e.validator!==null?t.setValidators(RM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=t4(t);e.asyncValidator!==null?t.setAsyncValidators(RM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();PM(e._rawValidators,i),PM(e._rawAsyncValidators,i)}function u4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ZM(t,e)})}function l4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ZM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ZM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function d4(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function h4(t,e){t==null,YM(t,e)}function f4(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function p4(t){return Object.getPrototypeOf(t.constructor)===zH}function g4(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function m4(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===zf?n=o:p4(o)?r=o:i=o}),i||r||n||null}var y4={provide:ma,useExisting:Bn(()=>aE)},Nu=Promise.resolve(),aE=(()=>{class t extends ma{callSetDisabledState;get submitted(){return It(this.submittedReactive)}_submitted=wo(()=>this.submittedReactive());submittedReactive=Oe(!1);_directives=new Set;form;ngSubmit=new ze;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Hf({},rE(n),iE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Nu.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),QM(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Nu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Nu.then(()=>{let r=this._findContainer(n.path),i=new Hf({});h4(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Nu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Nu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),g4(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new nE(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(ge(qf,10),ge(jM,10),ge(oE,8))};static \u0275dir=ot({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ze("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Io([y4]),Mn]})}return t})();function OM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var v4=class extends $f{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(WM(n),KM(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Bf(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _4={provide:xu,useExisting:Bn(()=>cE)},kM=Promise.resolve(),cE=(()=>{class t extends xu{_changeDetectorRef;callSetDisabledState;control=new v4;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ze;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=m4(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),f4(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){QM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){kM.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Do(r);kM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?a4(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(ge(ma,9),ge(qf,10),ge(jM,10),ge(LM,10),ge(Co,8),ge(oE,8))};static \u0275dir=ot({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Io([_4]),Mn,Wn]})}return t})();var JM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();function E4(t){return typeof t=="number"?t:parseInt(t,10)}var XM=(()=>{class t{_validator=AM;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):AM,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ot({type:t,features:[Wn]})}return t})();var I4={provide:qf,useExisting:Bn(()=>uE),multi:!0};var uE=(()=>{class t extends XM{required;inputName="required";normalizeInput=Do;createValidator=n=>QH;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=ot({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Eo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Io([I4]),Mn]})}return t})();var w4={provide:qf,useExisting:Bn(()=>lE),multi:!0},lE=(()=>{class t extends XM{maxlength;inputName="maxlength";normalizeInput=n=>E4(n);createValidator=n=>YH(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=ui(t)))(i||t)}})();static \u0275dir=ot({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Eo("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Io([w4]),Mn]})}return t})();var T4=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yn({type:t});static \u0275inj=Cn({})}return t})();var eN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:oE,useValue:n.callSetDisabledState??sE}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Yn({type:t});static \u0275inj=Cn({imports:[T4]})}return t})();var tN=()=>{};var iN=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C4=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new hE;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},hE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},D4=function(t){let e=iN(t);return Wf.encodeByteArray(e,!0)},Fu=function(t){return D4(t).replace(/\./g,"")},Kf=function(t){try{return Wf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var S4=()=>pE().__FIREBASE_DEFAULTS__,A4=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Kf(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return tN()||S4()||A4()||R4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gE=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oN=t=>{let e=gE(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mE=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config},yE=t=>{var e;return(e=Qf())===null||e===void 0?void 0:e[`_${t}`]};var Po=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function _i(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yf(t){return(await fetch(t,{credentials:"include"})).ok}function sN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fu(JSON.stringify(n)),Fu(JSON.stringify(s)),""].join(".")}var ku={};function M4(){let t={prod:[],emulator:[]};for(let e of Object.keys(ku))ku[e]?t.emulator.push(e):t.prod.push(e);return t}function N4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var nN=!1;function Zf(t,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||ku[t]===e||ku[t]||nN)return;ku[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=M4().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nN=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=N4(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),M=n("learnmore"),R=document.getElementById(M)||document.createElement("a"),k=n("preprendIcon"),W=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Q=m.element;a(Q),h(R,M);let _e=l();u(W,k),Q.append(W,b,R,_e),document.body.appendChild(Q)}o?(b.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function P4(){var t;let e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uN(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){let t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hN(){return!P4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lu(){try{return typeof indexedDB=="object"}catch{return!1}}function fN(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var O4="FirebaseError",an=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=O4,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,On.prototype.create)}},On=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?x4(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new an(i,a,r)}};function x4(t,e){return t.replace(k4,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var k4=/\{\$([^}]+)}/g;function pN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(rN(o)&&rN(s)){if(!rr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function rN(t){return t!==null&&typeof t=="object"}function Vu(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gN(t,e){let n=new fE(t,e);return n.subscribe.bind(n)}var fE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dE),i.error===void 0&&(i.error=dE),i.complete===void 0&&(i.complete=dE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function F4(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dE(){}var Yae=14400*1e3;function at(t){return t&&t._delegate?t._delegate:t}var Vt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Oo="[DEFAULT]";var vE=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Po;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V4(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function L4(t){return t===Oo?void 0:t}function V4(t){return t.instantiationMode==="EAGER"}var Jf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new vE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var j4=[],ce=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ce||{}),U4={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},B4=ce.INFO,$4={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},H4=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=$4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ir=class{constructor(e){this.name=e,this._logLevel=B4,this._logHandler=H4,this._userLogHandler=null,j4.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var z4=(t,e)=>e.some(n=>t instanceof n),mN,yN;function q4(){return mN||(mN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G4(){return yN||(yN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vN=new WeakMap,EE=new WeakMap,_N=new WeakMap,_E=new WeakMap,wE=new WeakMap;function W4(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(or(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&vN.set(n,t)}).catch(()=>{}),wE.set(e,t),e}function K4(t){if(EE.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});EE.set(t,e)}var IE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return EE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_N.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EN(t){IE=t(IE)}function Q4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xf(this),e,...n);return _N.set(r,e.sort?e.sort():[e]),or(r)}:G4().includes(t)?function(...e){return t.apply(Xf(this),e),or(vN.get(this))}:function(...e){return or(t.apply(Xf(this),e))}}function Y4(t){return typeof t=="function"?Q4(t):(t instanceof IDBTransaction&&K4(t),z4(t,q4())?new Proxy(t,IE):t)}function or(t){if(t instanceof IDBRequest)return W4(t);if(_E.has(t))return _E.get(t);let e=Y4(t);return e!==t&&(_E.set(t,e),wE.set(e,t)),e}var Xf=t=>wE.get(t);function wN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=or(s);return r&&s.addEventListener("upgradeneeded",u=>{r(or(s.result),u.oldVersion,u.newVersion,or(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Z4=["get","getKey","getAll","getAllKeys","count"],J4=["put","add","delete","clear"],TE=new Map;function IN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(TE.get(e))return TE.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=J4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Z4.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return TE.set(e,o),o}EN(t=>J(O({},t),{get:(e,n,r)=>IN(e,n)||t.get(e,n,r),has:(e,n)=>!!IN(e,n)||t.has(e,n)}));var CE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(X4(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function X4(t){let e=t.getComponent();return e?.type==="VERSION"}var DE="@firebase/app",TN="0.13.2";var Or=new ir("@firebase/app"),ez="@firebase/app-compat",tz="@firebase/analytics-compat",nz="@firebase/analytics",rz="@firebase/app-check-compat",iz="@firebase/app-check",oz="@firebase/auth",sz="@firebase/auth-compat",az="@firebase/database",cz="@firebase/data-connect",uz="@firebase/database-compat",lz="@firebase/functions",dz="@firebase/functions-compat",hz="@firebase/installations",fz="@firebase/installations-compat",pz="@firebase/messaging",gz="@firebase/messaging-compat",mz="@firebase/performance",yz="@firebase/performance-compat",vz="@firebase/remote-config",_z="@firebase/remote-config-compat",Ez="@firebase/storage",Iz="@firebase/storage-compat",wz="@firebase/firestore",Tz="@firebase/ai",bz="@firebase/firestore-compat",Cz="firebase",Dz="11.10.0";var SE="[DEFAULT]",Sz={[DE]:"fire-core",[ez]:"fire-core-compat",[nz]:"fire-analytics",[tz]:"fire-analytics-compat",[iz]:"fire-app-check",[rz]:"fire-app-check-compat",[oz]:"fire-auth",[sz]:"fire-auth-compat",[az]:"fire-rtdb",[cz]:"fire-data-connect",[uz]:"fire-rtdb-compat",[lz]:"fire-fn",[dz]:"fire-fn-compat",[hz]:"fire-iid",[fz]:"fire-iid-compat",[pz]:"fire-fcm",[gz]:"fire-fcm-compat",[mz]:"fire-perf",[yz]:"fire-perf-compat",[vz]:"fire-rc",[_z]:"fire-rc-compat",[Ez]:"fire-gcs",[Iz]:"fire-gcs-compat",[wz]:"fire-fst",[bz]:"fire-fst-compat",[Tz]:"fire-vertex","fire-js":"fire-js",[Cz]:"fire-js-all"};var ju=new Map,Az=new Map,AE=new Map;function bN(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){let e=t.name;if(AE.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;AE.set(e,t);for(let n of ju.values())bN(n,t);for(let n of Az.values())bN(n,t);return!0}function ya(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t==null?!1:t.settings!==void 0}var Rz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new On("app","Firebase",Rz);var RE=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};var Ii=Dz;function PE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:SE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(n||(n=mE()),!n)throw Ei.create("no-options");let o=ju.get(i);if(o){if(rr(n,o.options)&&rr(r,o.config))return o;throw Ei.create("duplicate-app",{appName:i})}let s=new Jf(i);for(let u of AE.values())s.addComponent(u);let a=new RE(n,r,s);return ju.set(i,a),a}function xo(t=SE){let e=ju.get(t);if(!e&&t===SE&&mE())return PE();if(!e)throw Ei.create("no-app",{appName:t});return e}function ep(){return Array.from(ju.values())}function je(t,e,n){var r;let i=(r=Sz[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(a.join(" "));return}xn(new Vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Mz="firebase-heartbeat-database",Nz=1,Uu="firebase-heartbeat-store",bE=null;function AN(){return bE||(bE=wN(Mz,Nz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),bE}async function Pz(t){try{let n=(await AN()).transaction(Uu),r=await n.objectStore(Uu).get(RN(t));return await n.done,r}catch(e){if(e instanceof an)Or.warn(e.message);else{let n=Ei.create("idb-get",{originalErrorMessage:e?.message});Or.warn(n.message)}}}async function CN(t,e){try{let r=(await AN()).transaction(Uu,"readwrite");await r.objectStore(Uu).put(e,RN(t)),await r.done}catch(n){if(n instanceof an)Or.warn(n.message);else{let r=Ei.create("idb-set",{originalErrorMessage:n?.message});Or.warn(r.message)}}}function RN(t){return`${t.name}!${t.options.appId}`}var Oz=1024,xz=30,ME=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new NE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=DN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xz){let s=Fz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=DN(),{heartbeatsToSend:r,unsentEntries:i}=kz(this._heartbeatsCache.heartbeats),o=Fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Or.warn(n),""}}};function DN(){return new Date().toISOString().substring(0,10)}function kz(t,e=Oz){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),SN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var NE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lu()?fN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await Pz(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return CN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return CN(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function SN(t){return Fu(JSON.stringify({version:2,heartbeats:t})).length}function Fz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Lz(t){xn(new Vt("platform-logger",e=>new CE(e),"PRIVATE")),xn(new Vt("heartbeat",e=>new ME(e),"PRIVATE")),je(DE,TN,t),je(DE,TN,"esm2017"),je("fire-js","")}Lz("");var Vz="firebase",jz="11.10.0";je(Vz,jz,"app");function MN(t){t===void 0&&(t=S(xe));let e=t.get(ai);return n=>new K(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var wi=new ei("ANGULARFIRE2_VERSION");function Bu(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _a=(t,e)=>{let n=e?[e]:ep(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},va=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(va||{}),NN=nu()&&typeof Zone<"u"?va.WARN:va.SILENT;var tp=class{zone;delegate;constructor(e,n=pm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Ti=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=S(fe);this.outsideAngular=n.runOutsideAngular(()=>new tp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new tp(typeof Zone>"u"?void 0:Zone.current,fm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PN=!1;function Uz(t,e){!PN&&(NN>va.SILENT||nu())&&(PN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),NN>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Bz(t){let e=S(fe,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function ko(t){let e=S(fe,{optional:!0});return e?e.run(()=>t()):t()}var $z=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Qe(n,()=>ko(()=>t.apply(void 0,r)))),wt=(t,e,n)=>(n||=e?va.WARN:va.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(Ti),s=S(ai),a=S($e)}catch{return Uz(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ko(()=>s.add())),i[l]=$z(i[l],r,a));let u=Bz(()=>t.apply(this,i));return e?u instanceof K?u.pipe(Jr(o.outsideAngular),Zr(o.insideAngular),MN(a)):u instanceof Promise?ko(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Qe(a,()=>ko(()=>h(m))),m=>Qe(a,()=>ko(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ko(()=>u):u instanceof K?u.pipe(Jr(o.outsideAngular),Zr(o.insideAngular)):ko(()=>u)});var xr=class{constructor(e){return e}},Fo=class{constructor(){return ep()}};function Hz(t){return t&&t.length===1?t[0]:new xr(xo())}var OE=new F("angularfire2._apps"),zz={provide:xr,useFactory:Hz,deps:[[new zt,OE]]},qz={provide:Fo,deps:[[new zt,OE]]};function Gz(t){return(e,n)=>{let r=n.get(Sr);je("angularfire",wi.full,"core"),je("angularfire",wi.full,"app"),je("angular",Nm.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new xr(i)}}function ON(t,...e){return Ke([zz,qz,{provide:OE,useFactory:Gz(t),multi:!0,deps:[fe,xe,Ti,...e]}])}var xN=wt(PE,!0);var Wz=new Map,Kz={activated:!1,tokenObservers:[]},Qz={initialized:!1,enabled:!1};function kn(t){return Wz.get(t)||Object.assign({},Kz)}function VN(){return Qz}var Yz="https://content-firebaseappcheck.googleapis.com/v1";var Zz="exchangeDebugToken",kN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Yce=1440*60*1e3;var FE=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Po,this.pending.promise.catch(n=>{}),await Jz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Po,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Jz(t){return new Promise(e=>{setTimeout(e,t)})}var Xz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},bi=new On("appCheck","AppCheck",Xz);function jN(t){if(!kn(t).activated)throw bi.create("use-before-activation",{appName:t.name})}async function UN({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw bi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw bi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw bi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function BN(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Yz}/projects/${n}/apps/${r}:${Zz}?key=${i}`,body:{debug_token:e}}}var eq="firebase-app-check-database",tq=1,LE="firebase-app-check-store";var np=null;function nq(){return np||(np=new Promise((t,e)=>{try{let n=indexedDB.open(eq,tq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(bi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(LE,{keyPath:"compositeKey"})}}}catch(n){e(bi.create("storage-open",{originalErrorMessage:n?.message}))}}),np)}function rq(t,e){return iq(oq(t),e)}async function iq(t,e){let r=(await nq()).transaction(LE,"readwrite"),o=r.objectStore(LE).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(bi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function oq(t){return`${t.options.appId}-${t.name}`}var $u=new ir("@firebase/app-check");function xE(t,e){return Lu()?rq(t,e).catch(n=>{$u.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function $N(){return VN().enabled}async function HN(){let t=VN();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var sq={error:"UNKNOWN_ERROR"};function aq(t){return Wf.encodeString(JSON.stringify(t),!1)}async function VE(t,e=!1,n=!1){let r=t.app;jN(r);let i=kn(r),o=i.token,s;if(o&&!Hu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Hu(l)?o=l:await xE(r,void 0))}if(!e&&o&&Hu(o))return{token:o.token};let a=!1;if($N())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=UN(BN(r,await HN()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await xE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$u.warn(l.message):n&&$u.error(l),kE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await kn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?$u.warn(l.message):n&&$u.error(l),s=l}let u;return o?s?Hu(o)?u={token:o.token,internalError:s}:u=kE(s):(u={token:o.token},i.token=o,await xE(r,o)):u=kE(s),a&&dq(r,u),u}async function cq(t){let e=t.app;jN(e);let{provider:n}=kn(e);if($N()){let r=await HN(),{token:i}=await UN(BN(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function uq(t,e,n,r){let{app:i}=t,o=kn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Hu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),FN(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>FN(t))}function zN(t,e){let n=kn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function FN(t){let{app:e}=t,n=kn(e),r=n.tokenRefresher;r||(r=lq(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function lq(t){let{app:e}=t;return new FE(async()=>{let n=kn(e),r;if(n.token?r=await VE(t,!0):r=await VE(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=kn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},kN.RETRIAL_MIN_WAIT,kN.RETRIAL_MAX_WAIT)}function dq(t,e){let n=kn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Hu(t){return t.expireTimeMillis-Date.now()>0}function kE(t){return{token:aq(sq),error:t}}var jE=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=kn(this.app);for(let n of e)zN(this.app,n.next);return Promise.resolve()}};function hq(t,e){return new jE(t,e)}function fq(t){return{getToken:e=>VE(t,e),getLimitedUseToken:()=>cq(t),addTokenListener:e=>uq(t,"INTERNAL",e),removeTokenListener:e=>zN(t.app,e)}}var pq="@firebase/app-check",gq="0.10.1";var mq="app-check",LN="app-check-internal";function yq(){xn(new Vt(mq,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return hq(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(LN).initialize()})),xn(new Vt(LN,t=>{let e=t.getProvider("app-check").getImmediate();return fq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),je(pq,gq)}yq();var vq="app-check";var Ea=class{constructor(){return _a(vq)}};var _q=["localhost","0.0.0.0","127.0.0.1"],cue=typeof window<"u"&&_q.includes(window.location.hostname);function oP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sP=oP,aP=new On("auth","Firebase",oP());var cp=new ir("@firebase/auth");function Eq(t,...e){cp.logLevel<=ce.WARN&&cp.warn(`Auth (${Ii}): ${t}`,...e)}function ip(t,...e){cp.logLevel<=ce.ERROR&&cp.error(`Auth (${Ii}): ${t}`,...e)}function Si(t,...e){throw oI(t,...e)}function Vo(t,...e){return oI(t,...e)}function cP(t,e,n){let r=Object.assign(Object.assign({},sP()),{[e]:n});return new On("auth","Firebase",r).create(e,{appName:t.name})}function Lo(t){return cP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aP.create(t,...e)}function Y(t,e,...n){if(!t)throw oI(e,...n)}function kr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ip(e),new Error(e)}function Ai(t,e){t||kr(e)}function HE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Iq(){return qN()==="http:"||qN()==="https:"}function qN(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Iq()||uN()||"connection"in navigator)?navigator.onLine:!0}function Tq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var jo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ai(n>e,"Short delay should be less than long delay!"),this.isMobile=aN()||lN()}get(){return wq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sI(t,e){Ai(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var up=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Cq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Dq=new jo(3e4,6e4);function aI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ia(t,e,n,r,i={}){return uP(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Vu(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return cN()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&_i(t.emulatorConfig.host)&&(l.credentials="include"),up.fetch()(await lP(t,t.config.apiHost,n,a),l)})}async function uP(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},bq),e);try{let i=new zE(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw rp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rp(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw rp(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw rp(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw cP(t,h,l);Si(t,h)}}catch(i){if(i instanceof an)throw i;Si(t,"network-request-failed",{message:String(i)})}}async function Sq(t,e,n,r,i={}){let o=await Ia(t,e,n,r,i);return"mfaPendingCredential"in o&&Si(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function lP(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?sI(t.config,i):`${t.config.apiScheme}://${i}`;return Cq.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var zE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vo(this.auth,"network-request-failed")),Dq.get())})}};function rp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Vo(t,e,r);return i.customData._tokenResponse=n,i}async function Aq(t,e){return Ia(t,"POST","/v1/accounts:delete",e)}async function lp(t,e){return Ia(t,"POST","/v1/accounts:lookup",e)}function zu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cI(t,e=!1){let n=at(t),r=await n.getIdToken(e),i=uI(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:zu(UE(i.auth_time)),issuedAtTime:zu(UE(i.iat)),expirationTime:zu(UE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function UE(t){return Number(t)*1e3}function uI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kf(n);return i?JSON.parse(i):(ip("Failed to decode base64 JWT payload"),null)}catch(i){return ip("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GN(t){let e=uI(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof an&&Rq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var qE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Wu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function dp(t){var e;let n=t.auth,r=await t.getIdToken(),i=await Gu(t,lp(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dP(o.providerUserInfo):[],a=Mq(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Wu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function lI(t){let e=at(t);await dp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dP(t){return t.map(e=>{var{providerId:n}=e,r=gm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Nq(t,e){let n=await uP(t,{},async()=>{let r=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await lP(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&_i(t.emulatorConfig.host)&&(u.credentials="include"),up.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Pq(t,e){return Ia(t,"POST","/v2/accounts:revokeToken",aI(t,e))}var qu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=GN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await Nq(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return kr("not implemented")}};function Ci(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Di=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cI(this,e)}reload(){return lI(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Lo(this.auth));let e=await this.getIdToken();return await Gu(this,Aq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(s=n.photoURL)!==null&&s!==void 0?s:void 0,M=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,W=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:_e,isAnonymous:pt,providerData:Ce,stsTokenManager:w}=n;Y(Q&&w,e,"internal-error");let v=qu.fromJSON(this.name,w);Y(typeof Q=="string",e,"internal-error"),Ci(p,e.name),Ci(m,e.name),Y(typeof _e=="boolean",e,"internal-error"),Y(typeof pt=="boolean",e,"internal-error"),Ci(y,e.name),Ci(b,e.name),Ci(M,e.name),Ci(R,e.name),Ci(k,e.name),Ci(W,e.name);let E=new t({uid:Q,auth:e,email:m,emailVerified:_e,displayName:p,isAnonymous:pt,photoURL:b,phoneNumber:y,tenantId:M,stsTokenManager:v,createdAt:k,lastLoginAt:W});return Ce&&Array.isArray(Ce)&&(E.providerData=Ce.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new qu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await dp(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new qu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var WN=new Map;function Fr(t){Ai(t instanceof Function,"Expected a class definition");let e=WN.get(t);return e?(Ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WN.set(t,e),e)}var Oq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),GE=Oq;function op(t,e,n){return`firebase:${t}:${e}:${n}`}var hp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=op(this.userKey,i.apiKey,o),this.fullPersistenceKey=op("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await lp(this.auth,{idToken:e}).catch(()=>{});return n?Di._fromGetAccountInfoResponse(this.auth,n,e):null}return Di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Fr(GE),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Fr(GE),s=op(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await lp(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Di._fromGetAccountInfoResponse(e,m,h)}else p=Di._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function KN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yP(e))return"Blackberry";if(vP(e))return"Webos";if(fP(e))return"Safari";if((e.includes("chrome/")||pP(e))&&!e.includes("edge/"))return"Chrome";if(mP(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function hP(t=dt()){return/firefox\//i.test(t)}function fP(t=dt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pP(t=dt()){return/crios\//i.test(t)}function gP(t=dt()){return/iemobile/i.test(t)}function mP(t=dt()){return/android/i.test(t)}function yP(t=dt()){return/blackberry/i.test(t)}function vP(t=dt()){return/webos/i.test(t)}function dI(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xq(t=dt()){var e;return dI(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kq(){return dN()&&document.documentMode===10}function _P(t=dt()){return dI(t)||mP(t)||vP(t)||yP(t)||/windows phone/i.test(t)||gP(t)}function EP(t,e=[]){let n;switch(t){case"Browser":n=KN(dt());break;case"Worker":n=`${KN(dt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ii}/${r}`}var WE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Fq(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",aI(t,e))}var Lq=6,KE=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Lq,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var QE=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fp(this),this.idTokenSubscription=new fp(this),this.beforeStateQueue=new WE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fr(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await hp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await lp(this,{idToken:e}),r=await Di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Tq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Lo(this));let n=e?at(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Lo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Lo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Fq(this),n=new KE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Pq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Fr(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await hp.create(this,[Fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Eq(`Error while retrieving App Check token: ${n.error}`),n?.token}};function hI(t){return at(t)}var fp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gN(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vq(t){fI=t}function jq(t){return fI.loadJS(t)}function Uq(){return fI.gapiScript}function IP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function pI(t,e){let n=ya(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(rr(o,e??{}))return i;Si(i,"already-initialized")}return n.initialize({options:e})}function Bq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Fr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gI(t,e,n){let r=hI(t);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=wP(e),{host:s,port:a}=$q(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(rr(l,r.config.emulator)&&rr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,_i(s)?(Yf(`${o}//${s}${u}`),Zf("Auth",!0)):i||Hq()}function wP(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $q(t){let e=wP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:QN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:QN(s)}}}function QN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Hq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var pp=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}};async function BE(t,e){return Sq(t,"POST","/v1/accounts:signInWithIdp",aI(t,e))}var gp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var YE=class extends gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ku=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Di._fromIdTokenResponse(e,r,i),s=YN(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=YN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function YN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ZE=class t extends an{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function TP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ZE._fromErrorAndOperation(t,o,e,r):o})}async function zq(t,e,n=!1){let r=await Gu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ku._forOperation(t,"link",r)}async function qq(t,e,n=!1){let{auth:r}=t;if(_n(r.app))return Promise.reject(Lo(r));let i="reauthenticate";try{let o=await Gu(t,TP(r,i,e,t),n);Y(o.idToken,r,"internal-error");let s=uI(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(t.uid===a,r,"user-mismatch"),Ku._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Si(r,"user-mismatch"),o}}async function Gq(t,e,n=!1){if(_n(t.app))return Promise.reject(Lo(t));let r="signIn",i=await TP(t,r,e),o=await Ku._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function mI(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function yI(t,e,n){return at(t).beforeAuthStateChanged(e,n)}var mp="__sak";var yp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mp,"1"),this.storage.removeItem(mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Wq=1e3,Kq=10,Qq=(()=>{class t extends yp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_P(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);kq()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Kq):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Wq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),bP=Qq;var Yq=(()=>{class t extends yp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),vI=Yq;function Zq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var Jq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await Zq(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function CP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var JE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=CP("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function sr(){return window}function Xq(t){sr().location.href=t}function DP(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function e3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t3(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function n3(){return DP()?self:null}var SP="firebaseLocalStorageDb",r3=1,vp="firebaseLocalStorage",AP="fbase_key",Uo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ep(t,e){return t.transaction([vp],e?"readwrite":"readonly").objectStore(vp)}function i3(){let t=indexedDB.deleteDatabase(SP);return new Uo(t).toPromise()}function XE(){let t=indexedDB.open(SP,r3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(vp,{keyPath:AP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(vp)?e(r):(r.close(),await i3(),e(await XE()))})})}async function ZN(t,e,n){let r=Ep(t,!0).put({[AP]:e,value:n});return new Uo(r).toPromise()}async function o3(t,e){let n=Ep(t,!1).get(e),r=await new Uo(n).toPromise();return r===void 0?null:r.value}function JN(t,e){let n=Ep(t,!0).delete(e);return new Uo(n).toPromise()}var s3=800,a3=3,c3=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XE(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>a3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jq._getInstance(n3()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await e3(),!this.activeServiceWorker)return;this.sender=new JE(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||t3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await XE();return await ZN(n,mp,"1"),await JN(n,mp),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>ZN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>o3(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>JN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Ep(o,!1).getAll();return new Uo(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RP=c3;var vue=IP("rcb"),_ue=new jo(3e4,6e4);function u3(t,e){return e?Fr(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Qu=class extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return BE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return BE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return BE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function l3(t){return Gq(t.auth,new Qu(t),t.bypassAuthState)}function d3(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),qq(n,new Qu(t),t.bypassAuthState)}async function h3(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),zq(n,new Qu(t),t.bypassAuthState)}var eI=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l3;case"linkViaPopup":case"linkViaRedirect":return h3;case"reauthViaPopup":case"reauthViaRedirect":return d3;default:Si(this.auth,"internal-error")}}resolve(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Eue=new jo(2e3,1e4);var f3="pendingRedirect",sp=new Map,tI=class extends eI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sp.get(this.auth._key());if(!e){try{let r=await p3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sp.set(this.auth._key(),e)}return this.bypassAuthState||sp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function p3(t,e){let n=y3(e),r=m3(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function g3(t,e){sp.set(t._key(),e)}function m3(t){return Fr(t._redirectPersistence)}function y3(t){return op(f3,t.config.apiKey,t.name)}async function v3(t,e,n=!1){if(_n(t.app))return Promise.reject(Lo(t));let r=hI(t),i=u3(r,e),s=await new tI(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var _3=600*1e3,nI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vo(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_3&&this.cachedEventUids.clear(),this.cachedEventUids.has(XN(e))}saveEventToCache(e){this.cachedEventUids.add(XN(e)),this.lastProcessedEventTime=Date.now()}};function XN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MP({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function E3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MP(t);default:return!1}}async function I3(t,e={}){return Ia(t,"GET","/v1/projects",e)}var w3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T3=/^https?/;async function b3(t){if(t.config.emulator)return;let{authorizedDomains:e}=await I3(t);for(let n of e)try{if(C3(n))return}catch{}Si(t,"unauthorized-domain")}function C3(t){let e=HE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!T3.test(n))return!1;if(w3.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var D3=new jo(3e4,6e4);function eP(){let t=sr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function S3(t){return new Promise((e,n)=>{var r,i,o;function s(){eP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eP(),n(Vo(t,"network-request-failed"))},timeout:D3.get()})}if(!((i=(r=sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=sr().gapi)===null||o===void 0)&&o.load)s();else{let a=IP("iframefcb");return sr()[a]=()=>{gapi.load?s():n(Vo(t,"network-request-failed"))},jq(`${Uq()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ap=null,e})}var ap=null;function A3(t){return ap=ap||S3(t),ap}var R3=new jo(5e3,15e3),M3="__/auth/iframe",N3="emulator/auth/iframe",P3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x3(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?sI(e,N3):`https://${t.config.authDomain}/${M3}`,r={apiKey:e.apiKey,appName:t.name,v:Ii},i=O3.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vu(r).slice(1)}`}async function k3(t){let e=await A3(t),n=sr().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:x3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P3,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Vo(t,"network-request-failed"),a=sr().setTimeout(()=>{o(s)},R3.get());function u(){sr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var F3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L3=500,V3=600,j3="_blank",U3="http://localhost",_p=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function B3(t,e,n,r=L3,i=V3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},F3),{width:r.toString(),height:i.toString(),top:o,left:s}),l=dt().toLowerCase();n&&(a=pP(l)?j3:n),hP(l)&&(e=e||U3,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(xq(l)&&a!=="_self")return $3(e||"",a),new _p(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new _p(p)}function $3(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var H3="__/auth/handler",z3="emulator/auth/handler",q3=encodeURIComponent("fac");async function tP(t,e,n,r,i,o){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ii,eventId:i};if(e instanceof gp){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",pN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof YE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${q3}=${encodeURIComponent(u)}`:"";return`${G3(t)}?${Vu(a).slice(1)}${l}`}function G3({config:t}){return t.emulator?sI(t,z3):`https://${t.authDomain}/${H3}`}var $E="webStorageSupport",rI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vI,this._completeRedirectFn=v3,this._overrideRedirectResult=g3}async _openPopup(e,n,r,i){var o;Ai((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await tP(e,n,r,HE(),i);return B3(e,s,CP())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await tP(e,n,r,HE(),i);return Xq(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ai(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await k3(e),r=new nI(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($E,{type:$E},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[$E];s!==void 0&&n(!!s),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=b3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _P()||fP()||dI()}},NP=rI;var nP="@firebase/auth",rP="1.10.8";var iI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function W3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K3(t){xn(new Vt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EP(t)},l=new QE(r,i,o,u);return Bq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xn(new Vt("auth-internal",e=>{let n=hI(e.getProvider("auth").getImmediate());return(r=>new iI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),je(nP,rP,W3(t)),je(nP,rP,"esm2017")}var Q3=300,Y3=yE("authIdTokenMaxAge")||Q3,iP=null,Z3=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Y3)return;let i=n?.token;iP!==i&&(iP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _I(t=xo()){let e=ya(t,"auth");if(e.isInitialized())return e.getImmediate();let n=pI(t,{popupRedirectResolver:NP,persistence:[RP,bP,vI]}),r=yE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Z3(o.toString());yI(n,s,()=>s(n.currentUser)),mI(n,a=>s(a))}}let i=gE("auth");return i&&gI(n,`http://${i}`),n}function J3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Vq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Vo("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",J3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K3("Browser");var PP="auth",Yu=class{constructor(e){return e}},Zu=class{constructor(){return _a(PP)}};var EI=new F("angularfire2.auth-instances");function q6(t,e){let n=Bu(PP,t,e);return n&&new Yu(n)}function G6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yu(r)}}var W6={provide:Zu,deps:[[new zt,EI]]},K6={provide:Yu,useFactory:q6,deps:[[new zt,EI],xr]};function OP(t,...e){return je("angularfire",wi.full,"auth"),Ke([K6,W6,{provide:EI,useFactory:G6(t),multi:!0,deps:[fe,xe,Ti,Fo,[new zt,Ea],...e]}])}var xP=wt(_I,!0);var kP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FP={};var Lr,II;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,T,D){for(var _=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)_[pr-2]=arguments[pr];return v.prototype[T].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)I[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],T=w.g[2];var D=w.g[3],_=v+(D^E&(T^D))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=D+(T^v&(E^T))+I[1]+3905402710&4294967295,D=v+(_<<12&4294967295|_>>>20),_=T+(E^D&(v^E))+I[2]+606105819&4294967295,T=D+(_<<17&4294967295|_>>>15),_=E+(v^T&(D^v))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(D^E&(T^D))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(T^v&(E^T))+I[5]+1200080426&4294967295,D=v+(_<<12&4294967295|_>>>20),_=T+(E^D&(v^E))+I[6]+2821735955&4294967295,T=D+(_<<17&4294967295|_>>>15),_=E+(v^T&(D^v))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(D^E&(T^D))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(T^v&(E^T))+I[9]+2336552879&4294967295,D=v+(_<<12&4294967295|_>>>20),_=T+(E^D&(v^E))+I[10]+4294925233&4294967295,T=D+(_<<17&4294967295|_>>>15),_=E+(v^T&(D^v))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(D^E&(T^D))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=D+(T^v&(E^T))+I[13]+4254626195&4294967295,D=v+(_<<12&4294967295|_>>>20),_=T+(E^D&(v^E))+I[14]+2792965006&4294967295,T=D+(_<<17&4294967295|_>>>15),_=E+(v^T&(D^v))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^D&(E^T))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^T&(v^E))+I[6]+3225465664&4294967295,D=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(D^v))+I[11]+643717713&4294967295,T=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(T^D))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^D&(E^T))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^T&(v^E))+I[10]+38016083&4294967295,D=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(D^v))+I[15]+3634488961&4294967295,T=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(T^D))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^D&(E^T))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^T&(v^E))+I[14]+3275163606&4294967295,D=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(D^v))+I[3]+4107603335&4294967295,T=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(T^D))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^D&(E^T))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=D+(E^T&(v^E))+I[2]+4243563512&4294967295,D=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(D^v))+I[7]+1735328473&4294967295,T=D+(_<<14&4294967295|_>>>18),_=E+(D^v&(T^D))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^D)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^T)+I[8]+2272392833&4294967295,D=v+(_<<11&4294967295|_>>>21),_=T+(D^v^E)+I[11]+1839030562&4294967295,T=D+(_<<16&4294967295|_>>>16),_=E+(T^D^v)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^D)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^T)+I[4]+1272893353&4294967295,D=v+(_<<11&4294967295|_>>>21),_=T+(D^v^E)+I[7]+4139469664&4294967295,T=D+(_<<16&4294967295|_>>>16),_=E+(T^D^v)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^D)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^T)+I[0]+3936430074&4294967295,D=v+(_<<11&4294967295|_>>>21),_=T+(D^v^E)+I[3]+3572445317&4294967295,T=D+(_<<16&4294967295|_>>>16),_=E+(T^D^v)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^D)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=D+(v^E^T)+I[12]+3873151461&4294967295,D=v+(_<<11&4294967295|_>>>21),_=T+(D^v^E)+I[15]+530742520&4294967295,T=D+(_<<16&4294967295|_>>>16),_=E+(T^D^v)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~D))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~T))+I[7]+1126891415&4294967295,D=v+(_<<10&4294967295|_>>>22),_=T+(v^(D|~E))+I[14]+2878612391&4294967295,T=D+(_<<15&4294967295|_>>>17),_=E+(D^(T|~v))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~D))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~T))+I[3]+2399980690&4294967295,D=v+(_<<10&4294967295|_>>>22),_=T+(v^(D|~E))+I[10]+4293915773&4294967295,T=D+(_<<15&4294967295|_>>>17),_=E+(D^(T|~v))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~D))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~T))+I[15]+4264355552&4294967295,D=v+(_<<10&4294967295|_>>>22),_=T+(v^(D|~E))+I[6]+2734768916&4294967295,T=D+(_<<15&4294967295|_>>>17),_=E+(D^(T|~v))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~D))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=D+(E^(v|~T))+I[11]+3174756917&4294967295,D=v+(_<<10&4294967295|_>>>22),_=T+(v^(D|~E))+I[2]+718787259&4294967295,T=D+(_<<15&4294967295|_>>>17),_=E+(D^(T|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,T=this.h,D=0;D<v;){if(T==0)for(;D<=E;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<v;)if(I[T++]=w.charCodeAt(D++),T==this.blockSize){i(this,I),T=0;break}}else for(;D<v;)if(I[T++]=w[D++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,T=w.length-1;0<=T;T--){var D=w[T]|0;I&&D==v||(E[T]=D,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,T=0;T<w.length;T+=8){var D=Math.min(8,w.length-T),_=parseInt(w.substring(T,T+D),v);8>D?(D=l(Math.pow(v,D)),I=I.j(D).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-R(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(M(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var T=_e(E,v).g;E=k(E,T.j(v));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=T,b(E))return D+I;for(;6>D.length;)D="0"+D;I=D+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}t.l=function(w){return w=k(this,w),M(w)?-1:b(w)?0:1};function R(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}t.abs=function(){return M(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,T=0;T<=v;T++){var D=I+(this.i(T)&65535)+(w.i(T)&65535),_=(D>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);I=_>>>16,D&=65535,_&=65535,E[T]=_<<16|D}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(R(v))}t.j=function(w){if(b(this)||b(w))return p;if(M(this))return M(w)?R(this).j(R(w)):R(R(this).j(w));if(M(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<w.g.length;T++){var D=this.i(I)>>>16,_=this.i(I)&65535,pr=w.i(T)>>>16,Ka=w.i(T)&65535;E[2*I+2*T]+=_*Ka,W(E,2*I+2*T),E[2*I+2*T+1]+=D*Ka,W(E,2*I+2*T+1),E[2*I+2*T+1]+=_*pr,W(E,2*I+2*T+1),E[2*I+2*T+2]+=D*pr,W(E,2*I+2*T+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function W(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Q(w,v){this.g=w,this.h=v}function _e(w,v){if(b(v))throw Error("division by zero");if(b(w))return new Q(p,p);if(M(w))return v=_e(R(w),v),new Q(R(v.g),R(v.h));if(M(v))return v=_e(w,R(v)),new Q(R(v.g),v.h);if(30<w.g.length){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=pt(E),I=pt(I);var T=Ce(E,1),D=Ce(I,1);for(I=Ce(I,2),E=Ce(E,2);!b(I);){var _=D.add(I);0>=_.l(w)&&(T=T.add(E),D=_),I=Ce(I,1),E=Ce(E,1)}return v=k(w,T.j(v)),new Q(T,v)}for(T=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),D=l(E),_=D.j(v);M(_)||0<_.l(w);)E-=I,D=l(E),_=D.j(v);b(D)&&(D=m),T=T.add(D),w=k(w,_)}return new Q(T,w)}t.A=function(w){return _e(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function pt(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function Ce(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,T=[],D=0;D<I;D++)T[D]=0<v?w.i(D+E)>>>v|w.i(D+E+1)<<32-v:w.i(D+E);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,II=FP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Lr=FP.Integer=s}).apply(typeof kP<"u"?kP:typeof self<"u"?self:typeof window<"u"?window:{});var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={};var wI,Q6,wa,TI,Ju,wp,bI,CI,DI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ip=="object"&&Ip];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var x=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)x[Re-2]=arguments[Re];return d.prototype[C].apply(g,x)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let x=0;x<A;x++)c[C+x]=g[x]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function W(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var pt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Ce(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function D(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Cg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class pr{constructor(){this.h=this.g=null}add(d,f){let g=Ka.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ka=new k(()=>new xk,c=>c.reset());class xk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qa,Ya=!1,Cg=new pr,QT=()=>{let c=a.Promise.resolve(void 0);Qa=()=>{c.then(kk)}};var kk=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){D(f)}var d=Ka;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ya=!1};function Gr(){this.s=this.s,this.C=this.C}Gr.prototype.s=!1,Gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var Fk=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Za(c,d){if(bt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(pt){e:{try{_e(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Lk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Za.aa.h.call(this)}}b(Za,bt);var Lk={2:"touch",3:"pen",4:"mouse"};Za.prototype.h=function(){Za.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ja="closure_listenable_"+(1e6*Math.random()|0),Vk=0;function jk(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++Vk,this.da=this.fa=!1}function wl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Tl(c){this.src=c,this.g={},this.h=0}Tl.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var x=Sg(c,d,g,C);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new jk(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function Dg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(wl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Sg(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Ag="closure_lm_"+(1e6*Math.random()|0),Rg={};function YT(c,d,f,g,C){if(g&&g.once)return JT(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)YT(c,d[A],f,g,C);return null}return f=Og(f),c&&c[Ja]?c.K(d,f,l(g)?!!g.capture:!!g,C):ZT(c,d,f,!1,g,C)}function ZT(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var x=l(C)?!!C.capture:!!C,Re=Ng(c);if(Re||(c[Ag]=Re=new Tl(c)),f=Re.add(d,f,g,x,A),f.proxy)return f;if(g=Uk(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)Fk||(C=x),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(eb(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Uk(){function c(f){return d.call(c.src,c.listener,f)}let d=Bk;return c}function JT(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)JT(c,d[A],f,g,C);return null}return f=Og(f),c&&c[Ja]?c.L(d,f,l(g)?!!g.capture:!!g,C):ZT(c,d,f,!0,g,C)}function XT(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)XT(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Og(f),c&&c[Ja]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Sg(A,f,g,C),-1<f&&(wl(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Ng(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Sg(d,f,g,C)),(f=-1<c?d[c]:null)&&Mg(f))}function Mg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ja])Dg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(eb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ng(d))?(Dg(f,c),f.h==0&&(f.src=null,d[Ag]=null)):wl(c)}}}function eb(c){return c in Rg?Rg[c]:Rg[c]="on"+c}function Bk(c,d){if(c.da)c=!0;else{d=new Za(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Mg(c),c=f.call(g,d)}return c}function Ng(c){return c=c[Ag],c instanceof Tl?c:null}var Pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Og(c){return typeof c=="function"?c:(c[Pg]||(c[Pg]=function(d){return c.handleEvent(d)}),c[Pg])}function Ct(){Gr.call(this),this.i=new Tl(this),this.M=this,this.F=null}b(Ct,Gr),Ct.prototype[Ja]=!0,Ct.prototype.removeEventListener=function(c,d,f,g){XT(this,c,d,f,g)};function Ot(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new bt(d,c);else if(d instanceof bt)d.target=d.target||c;else{var C=d;d=new bt(g,c),I(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var x=d.g=f[A];C=bl(x,g,!0,d)&&C}if(x=d.g=c,C=bl(x,g,!0,d)&&C,C=bl(x,g,!1,d)&&C,f)for(A=0;A<f.length;A++)x=d.g=f[A],C=bl(x,g,!1,d)&&C}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)wl(f[g]);delete c.g[d],c.h--}}this.F=null},Ct.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ct.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function bl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var x=d[A];if(x&&!x.da&&x.capture==f){var Re=x.listener,gt=x.ha||x.src;x.fa&&Dg(c.i,x),C=Re.call(gt,g)!==!1&&C}}return C&&!g.defaultPrevented}function tb(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nb(c){c.g=tb(()=>{c.g=null,c.i&&(c.i=!1,nb(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class $k extends Gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xa(c){Gr.call(this),this.h=c,this.g={}}b(Xa,Gr);var rb=[];function ib(c){Ce(c.g,function(d,f){this.g.hasOwnProperty(f)&&Mg(d)},c),c.g={}}Xa.prototype.N=function(){Xa.aa.N.call(this),ib(this)},Xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xg=a.JSON.stringify,Hk=a.JSON.parse,zk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function kg(){}kg.prototype.h=null;function ob(c){return c.h||(c.h=c.i())}function sb(){}var ec={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fg(){bt.call(this,"d")}b(Fg,bt);function Lg(){bt.call(this,"c")}b(Lg,bt);var ji={},ab=null;function Cl(){return ab=ab||new Ct}ji.La="serverreachability";function cb(c){bt.call(this,ji.La,c)}b(cb,bt);function tc(c){let d=Cl();Ot(d,new cb(d))}ji.STAT_EVENT="statevent";function ub(c,d){bt.call(this,ji.STAT_EVENT,c),this.stat=d}b(ub,bt);function xt(c){let d=Cl();Ot(d,new ub(d,c))}ji.Ma="timingevent";function lb(c,d){bt.call(this,ji.Ma,c),this.size=d}b(lb,bt);function nc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function rc(){this.g=!0}rc.prototype.xa=function(){this.g=!1};function qk(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var x="",Re=A.split("&"),gt=0;gt<Re.length;gt++){var me=Re[gt].split("=");if(1<me.length){var Dt=me[0];me=me[1];var St=Dt.split("_");x=2<=St.length&&St[1]=="type"?x+(Dt+"="+me+"&"):x+(Dt+"=redacted&")}}else x=null;else x=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+x})}function Gk(c,d,f,g,C,A,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+x})}function ns(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Kk(c,f)+(g?" "+g:"")})}function Wk(c,d){c.info(function(){return"TIMEOUT: "+d})}rc.prototype.info=function(){};function Kk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var x=1;x<C.length;x++)C[x]=""}}}}return xg(f)}catch{return d}}var Dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},db={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vg;function Sl(){}b(Sl,kg),Sl.prototype.g=function(){return new XMLHttpRequest},Sl.prototype.i=function(){return{}},Vg=new Sl;function Wr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hb}function hb(){this.i=null,this.g="",this.h=!1}var fb={},jg={};function Ug(c,d,f){c.L=1,c.v=Nl(gr(d)),c.m=f,c.P=!0,pb(c,null)}function pb(c,d){c.F=Date.now(),Al(c),c.A=gr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Ab(f.i,"t",g),c.C=0,f=c.j.J,c.h=new hb,c.g=Gb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new $k(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(rb[0]=C.toString()),C=rb);for(var A=0;A<C.length;A++){var x=YT(f,C[A],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),tc(),qk(c.i,c.u,c.A,c.l,c.R,c.m)}Wr.prototype.ca=function(c){c=c.target;let d=this.M;d&&mr(c)==3?d.j():this.Y(c)},Wr.prototype.Y=function(c){try{if(c==this.g)e:{let St=mr(this.g);var d=this.g.Ba();let os=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||kb(this.g)))){this.J||St!=4||d==7||(d==8||0>=os?tc(3):tc(2)),Bg(this);var f=this.g.Z();this.X=f;t:if(gb(this)){var g=kb(this.g);c="";var C=g.length,A=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),ic(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,Gk(this.i,this.u,this.A,this.l,this.R,St,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,gt=this.g;if((Re=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Re)){var me=Re;break t}}me=null}if(f=me)ns(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$g(this,f);else{this.o=!1,this.s=3,xt(12),Ui(this),ic(this);break e}}if(this.P){f=!0;let wn;for(;!this.J&&this.C<x.length;)if(wn=Qk(this,x),wn==jg){St==4&&(this.s=4,xt(14),f=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==fb){this.s=4,xt(15),ns(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else ns(this.i,this.l,wn,null),$g(this,wn);if(gb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||x.length!=0||this.h.h||(this.s=1,xt(16),f=!1),this.o=this.o&&f,!f)ns(this.i,this.l,x,"[Invalid Chunked Response]"),Ui(this),ic(this);else if(0<x.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Kg(Dt),Dt.M=!0,xt(11))}}else ns(this.i,this.l,x,null),$g(this,x);St==4&&Ui(this),this.o&&!this.J&&(St==4?$b(this.j,this):(this.o=!1,Al(this)))}else h1(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Ui(this),ic(this)}}}catch{}finally{}};function gb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Qk(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?jg:(f=Number(d.substring(f,g)),isNaN(f)?fb:(g+=1,g+f>d.length?jg:(d=d.slice(g,g+f),c.C=g+f,d)))}Wr.prototype.cancel=function(){this.J=!0,Ui(this)};function Al(c){c.S=Date.now()+c.I,mb(c,c.I)}function mb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=nc(m(c.ba,c),d)}function Bg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Wr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Wk(this.i,this.A),this.L!=2&&(tc(),xt(17)),Ui(this),this.s=2,ic(this)):mb(this,this.S-c)};function ic(c){c.j.G==0||c.J||$b(c.j,c)}function Ui(c){Bg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,ib(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function $g(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Hg(f.h,c))){if(!c.K&&Hg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Fl(f),xl(f);else break e;Wg(f),xt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=nc(m(f.Za,f),6e3));if(1>=_b(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $i(f,11)}else if((c.K||f.g==c)&&Fl(f),!W(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let me=C[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let Dt=me[3];Dt!=null&&(f.la=Dt,f.j.info("VER="+f.la));let St=me[4];St!=null&&(f.Aa=St,f.j.info("SVER="+f.Aa));let os=me[5];os!=null&&typeof os=="number"&&0<os&&(g=1.5*os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let wn=c.g;if(wn){let Vl=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vl){var A=g.h;A.g||Vl.indexOf("spdy")==-1&&Vl.indexOf("quic")==-1&&Vl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(zg(A,A.h),A.h=null))}if(g.D){let Qg=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qg&&(g.ya=Qg,Me(g.I,g.D,Qg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=qb(g,g.J?g.ia:null,g.W),x.K){Eb(g.h,x);var Re=x,gt=g.L;gt&&(Re.I=gt),Re.B&&(Bg(Re),Al(Re)),g.g=x}else Ub(g);0<f.i.length&&kl(f)}else me[0]!="stop"&&me[0]!="close"||$i(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?$i(f,7):Gg(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}tc(4)}catch{}}var Yk=class{constructor(c,d){this.g=c,this.map=d}};function yb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _b(c){return c.h?1:c.g?c.g.size:0}function Hg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function zg(c,d){c.g?c.g.add(d):c.h=d}function Eb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yb.prototype.cancel=function(){if(this.i=Ib(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ib(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function Zk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Jk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function wb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Jk(c),g=Zk(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var Tb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bi){this.h=c.h,Rl(this,c.j),this.o=c.o,this.g=c.g,Ml(this,c.s),this.l=c.l;var d=c.i,f=new ac;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bb(this,f),this.m=c.m}else c&&(d=String(c).match(Tb))?(this.h=!1,Rl(this,d[1]||"",!0),this.o=oc(d[2]||""),this.g=oc(d[3]||"",!0),Ml(this,d[4]),this.l=oc(d[5]||"",!0),bb(this,d[6]||"",!0),this.m=oc(d[7]||"")):(this.h=!1,this.i=new ac(null,this.h))}Bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(sc(d,Cb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(sc(d,Cb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(sc(f,f.charAt(0)=="/"?n1:t1,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",sc(f,i1)),c.join("")};function gr(c){return new Bi(c)}function Rl(c,d,f){c.j=f?oc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ml(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function bb(c,d,f){d instanceof ac?(c.i=d,o1(c.i,c.h)):(f||(d=sc(d,r1)),c.i=new ac(d,c.h))}function Me(c,d,f){c.i.set(d,f)}function Nl(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function oc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function sc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,e1),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function e1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cb=/[#\/\?@]/g,t1=/[#\?:]/g,n1=/[#\?]/g,r1=/[#\?@]/g,i1=/#/g;function ac(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Kr(c){c.g||(c.g=new Map,c.h=0,c.i&&Xk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ac.prototype,t.add=function(c,d){Kr(this),this.i=null,c=rs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Db(c,d){Kr(c),d=rs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Sb(c,d){return Kr(c),d=rs(c,d),c.g.has(d)}t.forEach=function(c,d){Kr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){Kr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){Kr(this);let d=[];if(typeof c=="string")Sb(this,c)&&(d=d.concat(this.g.get(rs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Kr(this),this.i=null,c=rs(this,c),Sb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Ab(c,d,f){Db(c,d),0<f.length&&(c.i=null,c.g.set(rs(c,d),M(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var C=A;x[g]!==""&&(C+="="+encodeURIComponent(String(x[g]))),c.push(C)}}return this.i=c.join("&")};function rs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function o1(c,d){d&&!c.j&&(Kr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Db(this,g),Ab(this,C,f))},c)),c.j=d}function s1(c,d){let f=new rc;if(a.Image){let g=new Image;g.onload=y(Qr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Qr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Qr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Qr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function a1(c,d){let f=new rc,g=new AbortController,C=setTimeout(()=>{g.abort(),Qr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?Qr(f,"TestPingServer: ok",!0,d):Qr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Qr(f,"TestPingServer: error",!1,d)})}function Qr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function c1(){this.g=new zk}function u1(c,d,f){let g=f||"";try{wb(c,function(C,A){let x=C;l(C)&&(x=xg(C)),d.push(g+A+"="+encodeURIComponent(x))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function cc(c){this.l=c.Ub||null,this.j=c.eb||!1}b(cc,kg),cc.prototype.g=function(){return new Pl(this.l,this.j)},cc.prototype.i=(function(c){return function(){return c}})({});function Pl(c,d){Ct.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Pl,Ct),t=Pl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,lc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,lc(this)),this.g&&(this.readyState=3,lc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?uc(this):lc(this),this.readyState==3&&Rb(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,uc(this))},t.Qa=function(c){this.g&&(this.response=c,uc(this))},t.ga=function(){this.g&&uc(this)};function uc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,lc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function lc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mb(c){let d="";return Ce(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function qg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Mb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Me(c,d,f))}function Le(c){Ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Le,Ct);var l1=/^https?$/i,d1=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vg.g(),this.v=this.o?ob(this.o):ob(Vg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Nb(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(d1,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,x]of f)this.g.setRequestHeader(A,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xb(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Nb(this,A)}};function Nb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Pb(c),Ol(c)}function Pb(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),Ol(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ol(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ob(this):this.bb())},t.bb=function(){Ob(this)};function Ob(c){if(c.h&&typeof s<"u"&&(!c.v[1]||mr(c)!=4||c.Z()!=2)){if(c.u&&mr(c)==4)tb(c.Ea,0,c);else if(Ot(c,"readystatechange"),mr(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var C=String(c.D).match(Tb)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!l1.test(C?C.toLowerCase():"")}f=g}if(f)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var A=2<mr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Pb(c)}}finally{Ol(c)}}}}function Ol(c,d){if(c.g){xb(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ot(c,"ready");try{f.onreadystatechange=g}catch{}}}function xb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Hk(d)}};function kb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function h1(c){let d={};c=(c.g&&2<=mr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(W(c[g]))continue;var f=T(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Fb(c){this.Aa=0,this.i=[],this.j=new rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dc("baseRetryDelayMs",5e3,c),this.cb=dc("retryDelaySeedMs",1e4,c),this.Wa=dc("forwardChannelMaxRetries",2,c),this.wa=dc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yb(c&&c.concurrentRequestLimit),this.Da=new c1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fb.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){xt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=qb(this,null,this.W),kl(this)};function Gg(c){if(Lb(c),c.G==3){var d=c.U++,f=gr(c.I);if(Me(f,"SID",c.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),hc(c,f),d=new Wr(c,c.j,d),d.L=2,d.v=Nl(gr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Gb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Al(d)}zb(c)}function xl(c){c.g&&(Kg(c),c.g.cancel(),c.g=null)}function Lb(c){xl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Fl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function kl(c){if(!vb(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qa||QT(),Ya||(Qa(),Ya=!0),Cg.add(d,c),c.B=0}}function f1(c,d){return _b(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=nc(m(c.Ga,c,d),Hb(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Wr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=jb(this,C,d),f=gr(this.I),Me(f,"RID",c),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),hc(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Mb(A)))+"&"+d:this.m&&qg(f,this.m,A)),zg(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),C.T=!0,Ug(C,f,null)):Ug(C,f,d),this.G=2}}else this.G==3&&(c?Vb(this,c):this.i.length==0||vb(this.h)||Vb(this))};function Vb(c,d){var f;d?f=d.l:f=c.U++;let g=gr(c.I);Me(g,"SID",c.K),Me(g,"RID",f),Me(g,"AID",c.T),hc(c,g),c.m&&c.o&&qg(g,c.m,c.o),f=new Wr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=jb(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),zg(c.h,f),Ug(f,g,d)}function hc(c,d){c.H&&Ce(c.H,function(f,g){Me(d,g,f)}),c.l&&wb({},function(f,g){Me(d,g,f)})}function jb(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let x=["count="+f];A==-1?0<f?(A=C[0].g,x.push("ofs="+A)):A=0:x.push("ofs="+A);let Re=!0;for(let gt=0;gt<f;gt++){let me=C[gt].g,Dt=C[gt].map;if(me-=A,0>me)A=Math.max(0,C[gt].g-100),Re=!1;else try{u1(Dt,x,"req"+me+"_")}catch{g&&g(Dt)}}if(Re){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Ub(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qa||QT(),Ya||(Qa(),Ya=!0),Cg.add(d,c),c.v=0}}function Wg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=nc(m(c.Fa,c),Hb(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Bb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=nc(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),xl(this),Bb(this))};function Kg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Bb(c){c.g=new Wr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=gr(c.qa);Me(d,"RID","rpc"),Me(d,"SID",c.K),Me(d,"AID",c.T),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(d,"TO",c.ja),Me(d,"TYPE","xmlhttp"),hc(c,d),c.m&&c.o&&qg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Nl(gr(d)),f.m=null,f.P=!0,pb(f,c)}t.Za=function(){this.C!=null&&(this.C=null,xl(this),Wg(this),xt(19))};function Fl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $b(c,d){var f=null;if(c.g==d){Fl(c),Kg(c),c.g=null;var g=2}else if(Hg(c.h,d))f=d.D,Eb(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Cl(),Ot(g,new lb(g,f)),kl(c)}else Ub(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&f1(c,d)||g==2&&Wg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:$i(c,5);break;case 4:$i(c,10);break;case 3:$i(c,6);break;default:$i(c,2)}}}function Hb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function $i(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Bi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rl(g,"https"),Nl(g),C?s1(g.toString(),f):a1(g.toString(),f)}else xt(2);c.G=0,c.l&&c.l.sa(d),zb(c),Lb(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function zb(c){if(c.G=0,c.ka=[],c.l){let d=Ib(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function qb(c,d,f){var g=f instanceof Bi?gr(f):new Bi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Ml(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Bi(null);g&&Rl(A,g),d&&(A.g=d),C&&Ml(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Me(g,f,d),Me(g,"VER",c.la),hc(c,g),g}function Gb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Le(new cc({eb:f})):new Le(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wb(){}t=Wb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ll(){}Ll.prototype.g=function(c,d){return new Gt(c,d)};function Gt(c,d){Ct.call(this),this.g=new Fb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!W(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!W(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new is(this)}b(Gt,Ct),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Gg(this.g)},Gt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=xg(c),c=f);d.i.push(new Yk(d.Ya++,c)),d.G==3&&kl(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Gg(this.g),delete this.g,Gt.aa.N.call(this)};function Kb(c){Fg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Kb,Fg);function Qb(){Lg.call(this),this.status=1}b(Qb,Lg);function is(c){this.g=c}b(is,Wb),is.prototype.ua=function(){Ot(this.g,"a")},is.prototype.ta=function(c){Ot(this.g,new Kb(c))},is.prototype.sa=function(c){Ot(this.g,new Qb)},is.prototype.ra=function(){Ot(this.g,"b")},Ll.prototype.createWebChannel=Ll.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,DI=Vr.createWebChannelTransport=function(){return new Ll},CI=Vr.getStatEventTarget=function(){return Cl()},bI=Vr.Event=ji,wp=Vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dl.NO_ERROR=0,Dl.TIMEOUT=8,Dl.HTTP_ERROR=6,Ju=Vr.ErrorCode=Dl,db.COMPLETE="complete",TI=Vr.EventType=db,sb.EventType=ec,ec.OPEN="a",ec.CLOSE="b",ec.ERROR="c",ec.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,wa=Vr.WebChannel=sb,Q6=Vr.FetchXmlHttpFactory=cc,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,wI=Vr.XhrIo=Le}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var LP="@firebase/firestore",VP="4.8.0";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var Ha="11.10.0";var Go=new ir("@firebase/firestore");function Ta(){return Go.logLevel}function j(t,...e){if(Go.logLevel<=ce.DEBUG){let n=e.map(gT);Go.debug(`Firestore (${Ha}): ${t}`,...n)}}function Ur(t,...e){if(Go.logLevel<=ce.ERROR){let n=e.map(gT);Go.error(`Firestore (${Ha}): ${t}`,...n)}}function Oi(t,...e){if(Go.logLevel<=ce.WARN){let n=e.map(gT);Go.warn(`Firestore (${Ha}): ${t}`,...n)}}function gT(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,MO(t,r,n)}function MO(t,e,n){let r=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ur(r),new Error(r)}function be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||MO(e,i,r)}function te(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends an{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ar=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Rp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},NI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}},PI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},OI=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ar,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ar)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new Rp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new ht(e)}},xI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},kI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new xI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},FI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Y6(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function NO(){return new TextEncoder}var il=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Y6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ae(t,e){return t<e?-1:t>e?1:0}function LI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ae(r,i);{let o=NO(),s=Z6(o.encode(jP(t,n)),o.encode(jP(e,n)));return s!==0?s:ae(r,i)}}n+=r>65535?2:1}return ae(t.length,e.length)}function jP(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Z6(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function Ma(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var UP="__name__",Np=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ae(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):LI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}},Fe=class t extends Np{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},J6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,un=class t extends Np{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return J6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UP}static keyField(){return new t([UP])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Fe.fromString(e))}static fromName(e){return new t(Fe.fromString(e).popFirst(5))}static empty(){return new t(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Fe(e.slice()))}};function PO(t,e,n){if(!n)throw new V(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X6(t,e,n,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function BP(t){if(!z.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $P(t){if(z.isDocumentKey(t))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ug(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ug(t);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tt(t,e){let n={typeString:t};return e&&(n.value=e),n}function yl(t,e){if(!OO(t))throw new V(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new V(N.INVALID_ARGUMENT,n);return!0}var HP=-62135596800,zP=1e6,nt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zP);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HP)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zP}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-HP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:tt("string",nt._jsonSchemaVersion),seconds:tt("number"),nanoseconds:tt("number")};var ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new nt(0,0))}static max(){return new t(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ol=-1,VI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};VI.UNKNOWN_ID=-1;function eG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new Wo(i,z.empty(),e)}function tG(t){return new Wo(t.readTime,t.key,ol)}var Wo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ie.min(),z.empty(),ol)}static max(){return new t(ie.max(),z.empty(),ol)}};function nG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}var rG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function za(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==rG)throw t;j("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function iG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qa(t){return t.name==="IndexedDbTransactionError"}var mT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),yT=-1;function lg(t){return t==null}function sl(t){return t===0&&1/t==-1/0}function oG(t){return typeof t=="number"&&Number.isInteger(t)&&!sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var xO="";function sG(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qP(e)),e=aG(t.get(n),e);return qP(e)}function aG(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case xO:n+="";break;default:n+=o}}return n}function qP(t){return t+xO+""}var cG="remoteDocuments",kO="owner";var FO="mutationQueues";var LO="mutations";var VO="documentMutations",uG="remoteDocumentsV14";var jO="remoteDocumentGlobal";var UO="targets";var BO="targetDocuments";var $O="targetGlobal",HO="collectionParents";var zO="clientMetadata";var qO="bundles";var GO="namedQueries";var lG="indexConfiguration";var dG="indexState";var hG="indexEntries";var WO="documentOverlays";var fG="globals";var pG=[FO,LO,VO,cG,UO,kO,$O,BO,zO,jO,HO,qO,GO],wle=[...pG,WO],gG=[FO,LO,VO,uG,UO,kO,$O,BO,zO,jO,HO,qO,GO,WO],mG=gG,yG=[...mG,lG,dG,hG];var Tle=[...yG,fG];function GP(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Li(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KO(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ue=class t{constructor(e,n){this.comparator=e,this.root=n||ur.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sa(this.root,e,this.comparator,!0)}},Sa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ur=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class t{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pp(this.data.getIterator())}getIteratorFrom(e){return new Pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Pp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var In=class t{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new t([])}unionWith(e){let n=new ft(un.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Op=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Op("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var vG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(be(!!t,39018),typeof t=="string"){let e=0,n=vG.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}var QO="server_timestamp",YO="__type__",ZO="__previous_value__",JO="__local_write_time__";function vT(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YO])===null||n===void 0?void 0:n.stringValue)===QO}function dg(t){let e=t.mapValue.fields[ZO];return vT(e)?dg(e):e}function al(t){let e=Br(t.mapValue.fields[JO].timestampValue);return new nt(e.seconds,e.nanos)}var UI=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},xp="(default)",kp=class t{constructor(e,n){this.projectId=e,this.database=n||xp}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===xp}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var _T="__type__",XO="__max__",Tp={mapValue:{fields:{__type__:{stringValue:XO}}}},ET="__vector__",Na="value";function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vT(t)?4:tx(t)?9007199254740991:ex(t)?10:11:G(28295,{value:t})}function hr(t,e){if(t===e)return!0;let n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return al(t).isEqual(al(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Br(i.timestampValue),a=Br(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return $r(i.bytesValue).isEqual($r(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?sl(s)===sl(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(GP(s)!==GP(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!hr(s[u],a[u])))return!1;return!0})(t,e);default:return G(52216,{left:t})}}function cl(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function Pa(t,e){if(t===e)return 0;let n=xi(t),r=xi(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return WP(t.timestampValue,e.timestampValue);case 4:return WP(al(t),al(e));case 5:return LI(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=$r(o),u=$r(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ae(ke(o.latitude),ke(s.latitude));return a!==0?a:ae(ke(o.longitude),ke(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return KP(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Na])===null||a===void 0?void 0:a.arrayValue,b=(u=m[Na])===null||u===void 0?void 0:u.arrayValue,M=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:KP(y,b)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Tp.mapValue&&s===Tp.mapValue)return 0;if(o===Tp.mapValue)return 1;if(s===Tp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=LI(u[p],h[p]);if(m!==0)return m;let y=Pa(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)})(t.mapValue,e.mapValue);default:throw G(23264,{le:n})}}function WP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);let n=Br(t),r=Br(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function KP(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Pa(n[i],r[i]);if(o)return o}return ae(n.length,r.length)}function Oa(t){return BI(t)}function BI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Br(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $r(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return z.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=BI(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${BI(n.fields[s])}`;return i+"}"})(t.mapValue):G(61005,{value:t})}function Dp(t){switch(xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=dg(t);return e?16+Dp(e):16;case 5:return 2*t.stringValue.length;case 6:return $r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Dp(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Li(r.fields,(o,s)=>{i+=o.length+Dp(s)}),i})(t.mapValue);default:throw G(13486,{value:t})}}function QP(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $I(t){return!!t&&"integerValue"in t}function IT(t){return!!t&&"arrayValue"in t}function YP(t){return!!t&&"nullValue"in t}function ZP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sp(t){return!!t&&"mapValue"in t}function ex(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[_T])===null||n===void 0?void 0:n.stringValue)===ET}function el(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Li(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=el(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=el(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XO}var Cle={mapValue:{fields:{[_T]:{stringValue:ET},[Na]:{arrayValue:{}}}}};var cn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=el(n)}setAll(e){let n=un.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=el(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Sp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Li(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(el(this.value))}};function nx(t){let e=[];return Li(t.fields,(n,r)=>{let i=new un([n]);if(Sp(r)){let o=nx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new In(e)}var Fn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ie.min(),ie.min(),ie.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ie.min(),ie.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ie.min(),ie.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xa=class{constructor(e,n){this.position=e,this.inclusive=n}};function JP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),n.key):r=Pa(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function XP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}var ka=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function _G(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Fp=class{},et=class t extends Fp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zI(e,n,r):n==="array-contains"?new WI(e,r):n==="in"?new KI(e,r):n==="not-in"?new QI(e,r):n==="array-contains-any"?new YI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qI(e,r):new GI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pa(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(Pa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ln=class t extends Fp{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return rx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function rx(t){return t.op==="and"}function ix(t){return EG(t)&&rx(t)}function EG(t){for(let e of t.filters)if(e instanceof Ln)return!1;return!0}function HI(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Oa(t.value);if(ix(t))return t.filters.map(e=>HI(e)).join(",");{let e=t.filters.map(n=>HI(n)).join(",");return`${t.op}(${e})`}}function ox(t,e){return t instanceof et?(function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)})(t,e):t instanceof Ln?(function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ox(s,i.filters[a]),!0):!1})(t,e):void G(19439)}function sx(t){return t instanceof et?(function(n){return`${n.field.canonicalString()} ${n.op} ${Oa(n.value)}`})(t):t instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(sx).join(" ,")+"}"})(t):"Filter"}var zI=class extends et{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},qI=class extends et{constructor(e,n){super(e,"in",n),this.keys=ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},GI=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var WI=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return IT(n)&&cl(n.arrayValue,this.value)}},KI=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&cl(this.value.arrayValue,n)}},QI=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cl(this.value.arrayValue,n)}},YI=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!IT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cl(this.value.arrayValue,r))}};var ZI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function eO(t,e=null,n=[],r=[],i=null,o=null,s=null){return new ZI(t,e,n,r,i,o,s)}function wT(t){let e=te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>HI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),lg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oa(r)).join(",")),e.Pe=n}return e.Pe}function TT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_G(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ox(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XP(t.startAt,e.startAt)&&XP(t.endAt,e.endAt)}function JI(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ko=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function IG(t,e,n,r,i,o,s,a){return new Ko(t,e,n,r,i,o,s,a)}function bT(t){return new Ko(t)}function tO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cx(t){return t.collectionGroup!==null}function tl(t){let e=te(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ft(un.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ka(o,r))}),n.has(un.keyField().canonicalString())||e.Te.push(new ka(un.keyField(),r))}return e.Te}function lr(t){let e=te(t);return e.Ie||(e.Ie=wG(e,tl(t))),e.Ie}function wG(t,e){if(t.limitType==="F")return eO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ka(i.field,o)});let n=t.endAt?new xa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xa(t.startAt.position,t.startAt.inclusive):null;return eO(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function XI(t,e){let n=t.filters.concat([e]);return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ew(t,e,n){return new Ko(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hg(t,e){return TT(lr(t),lr(e))&&t.limitType===e.limitType}function ux(t){return`${wT(lr(t))}|lt:${t.limitType}`}function ba(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sx(i)).join(", ")}]`),lg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oa(i)).join(",")),`Target(${r})`})(lr(t))}; limitType=${t.limitType})`}function fg(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of tl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=JP(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,tl(r),i)||r.endAt&&!(function(s,a,u){let l=JP(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,tl(r),i))})(t,e)}function TG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lx(t){return(e,n)=>{let r=!1;for(let i of tl(t)){let o=bG(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bG(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Pa(u,l):G(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}var Hr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return KO(this.inner)}size(){return this.innerSize}};var CG=new Ue(z.comparator);function zr(){return CG}var dx=new Ue(z.comparator);function Xu(...t){let e=dx;for(let n of t)e=e.insert(n.key,n);return e}function hx(t){let e=dx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bo(){return nl()}function fx(){return nl()}function nl(){return new Hr(t=>t.toString(),(t,e)=>t.isEqual(e))}var DG=new Ue(z.comparator),SG=new ft(z.comparator);function le(...t){let e=SG;for(let n of t)e=e.add(n);return e}var AG=new ft(ae);function RG(){return AG}function CT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sl(e)?"-0":e}}function px(t){return{integerValue:""+t}}function MG(t,e){return oG(e)?px(e):CT(t,e)}var Fa=class{constructor(){this._=void 0}};function NG(t,e,n){return t instanceof La?(function(i,o){let s={fields:{[YO]:{stringValue:QO},[JO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vT(o)&&(o=dg(o)),o&&(s.fields[ZO]=o),{mapValue:s}})(n,e):t instanceof Qo?mx(t,e):t instanceof Yo?yx(t,e):(function(i,o){let s=gx(i,o),a=nO(s)+nO(i.Ee);return $I(s)&&$I(i.Ee)?px(a):CT(i.serializer,a)})(t,e)}function PG(t,e,n){return t instanceof Qo?mx(t,e):t instanceof Yo?yx(t,e):n}function gx(t,e){return t instanceof Va?(function(r){return $I(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var La=class extends Fa{},Qo=class extends Fa{constructor(e){super(),this.elements=e}};function mx(t,e){let n=vx(e);for(let r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Yo=class extends Fa{constructor(e){super(),this.elements=e}};function yx(t,e){let n=vx(e);for(let r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}var Va=class extends Fa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function nO(t){return ke(t.integerValue||t.doubleValue)}function vx(t){return IT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function OG(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Qo&&i instanceof Qo||r instanceof Yo&&i instanceof Yo?Ma(r.elements,i.elements,hr):r instanceof Va&&i instanceof Va?hr(r.Ee,i.Ee):r instanceof La&&i instanceof La})(t.transform,e.transform)}var tw=class{constructor(e,n){this.version=e,this.transformResults=n}},jr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ap(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ja=class{};function _x(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ul(t.key,jr.none()):new Zo(t.key,t.data,jr.none());{let n=t.data,r=cn.empty(),i=new ft(un.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fr(t.key,r,new In(i.toArray()),jr.none())}}function xG(t,e,n){t instanceof Zo?(function(i,o,s){let a=i.value.clone(),u=iO(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof fr?(function(i,o,s){if(!Ap(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=iO(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Ex(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function rl(t,e,n,r){return t instanceof Zo?(function(o,s,a,u){if(!Ap(o.precondition,s))return a;let l=o.value.clone(),h=oO(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof fr?(function(o,s,a,u){if(!Ap(o.precondition,s))return a;let l=oO(o.fieldTransforms,u,s),h=s.data;return h.setAll(Ex(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Ap(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function kG(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=gx(r.transform,i||null);o!=null&&(n===null&&(n=cn.empty()),n.set(r.field,o))}return n||null}function rO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ma(r,i,(o,s)=>OG(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zo=class extends ja{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fr=class extends ja{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Ex(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function iO(t,e,n){let r=new Map;be(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,PG(s,a,n[i]))}return r}function oO(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,NG(o,s,e))}return r}var ul=class extends ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},nw=class extends ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&xG(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=rl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=fx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=_x(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,r)=>rO(n,r))&&Ma(this.baseMutations,e.baseMutations,(n,r)=>rO(n,r))}},iw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return DG})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ow=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Je,pe;function FG(t){switch(t){case N.OK:return G(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function Ix(t){if(t===void 0)return Ur("GRPC error has no .code"),N.UNKNOWN;switch(t){case Je.OK:return N.OK;case Je.CANCELLED:return N.CANCELLED;case Je.UNKNOWN:return N.UNKNOWN;case Je.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Je.INTERNAL:return N.INTERNAL;case Je.UNAVAILABLE:return N.UNAVAILABLE;case Je.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Je.NOT_FOUND:return N.NOT_FOUND;case Je.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Je.ABORTED:return N.ABORTED;case Je.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Je.DATA_LOSS:return N.DATA_LOSS;default:return G(39323,{code:t})}}(pe=Je||(Je={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var sO=null;var LG=new Lr([4294967295,4294967295],0);function aO(t){let e=NO().encode(t),n=new II;return n.update(e),new Uint8Array(n.digest())}function cO(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([i,o],0)]}var aw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Lr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Lr.fromNumber(r)));return i.compare(LG)===1&&(i=new Lr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=aO(e),[r,i]=cO(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=aO(e),[r,i]=cO(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$o=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ll.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ie.min(),i,new Ue(ae),zr(),le())}},ll=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Aa=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Vp=class{constructor(e,n){this.targetId=e,this.De=n}},jp=class{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Up=class{constructor(){this.ve=0,this.Ce=uO(),this.Fe=Pt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:o})}}),new ll(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=uO()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},cw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=zr(),this.je=bp(),this.Je=bp(),this.He=new Ue(ae)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(JI(o))if(r===0){let s=new z(o.path);this.Xe(n,s,Fn.newNoDocument(s,ie.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}sO?.ct((function(h,p,m,y,b){var M,R,k,W,Q,_e;let pt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Ce=p.unchangedNames;return Ce&&(pt.bloomFilter={applied:b===0,hashCount:(M=Ce?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(W=(k=(R=Ce?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&W!==void 0?W:0,padding:(_e=(Q=Ce?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&_e!==void 0?_e:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),pt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=$r(r).toUint8Array()}catch(u){if(u instanceof Op)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new aw(s,i,o)}catch(u){return Oi(u instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&JI(a.target)){let u=new z(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Fn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Lp(e,n,this.He,this.ze,r);return this.ze=zr(),this.je=bp(),this.Je=bp(),this.He=new Ue(ae),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Up,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ft(ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ft(ae),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Up),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function bp(){return new Ue(z.comparator)}function uO(){return new Ue(z.comparator)}var VG={asc:"ASCENDING",desc:"DESCENDING"},jG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UG={and:"AND",or:"OR"},uw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function lw(t,e){return t.useProto3Json||lg(e)?e:{value:e}}function Bp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BG(t,e){return Bp(t,e.toTimestamp())}function dr(t){return be(!!t,49232),ie.fromTimestamp((function(n){let r=Br(n);return new nt(r.seconds,r.nanos)})(t))}function DT(t,e){return dw(t,e).canonicalString()}function dw(t,e){let n=(function(i){return new Fe(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Tx(t){let e=Fe.fromString(t);return be(Ax(e),10190,{key:e.toString()}),e}function hw(t,e){return DT(t.databaseId,e.path)}function SI(t,e){let n=Tx(e);if(n.get(1)!==t.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(Cx(n))}function bx(t,e){return DT(t.databaseId,e)}function $G(t){let e=Tx(t);return e.length===4?Fe.emptyPath():Cx(e)}function fw(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cx(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lO(t,e,n){return{name:hw(t,e),fields:n.value.mapValue.fields}}function HG(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:Ix(l.code);return new V(h,l.message||"")})(s);n=new jp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=SI(t,r.document.name),o=dr(r.document.updateTime),s=r.document.createTime?dr(r.document.createTime):ie.min(),a=new cn({mapValue:{fields:r.document.fields}}),u=Fn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Aa(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=SI(t,r.document),o=r.readTime?dr(r.readTime):ie.min(),s=Fn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Aa([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=SI(t,r.document),o=r.removedTargetIds||[];n=new Aa([],o,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new sw(i,o),a=r.targetId;n=new Vp(a,s)}}return n}function zG(t,e){let n;if(e instanceof Zo)n={update:lO(t,e.key,e.value)};else if(e instanceof ul)n={delete:hw(t,e.key)};else if(e instanceof fr)n={update:lO(t,e.key,e.data),updateMask:XG(e.fieldMask)};else{if(!(e instanceof nw))return G(16599,{Rt:e.type});n={verify:hw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof La)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Va)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:BG(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G(27497)})(t,e.precondition)),n}function qG(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?dr(i.updateTime):dr(o);return s.isEqual(ie.min())&&(s=dr(o)),new tw(s,i.transformResults||[])})(n,e))):[]}function GG(t,e){return{documents:[bx(t,e.path)]}}function WG(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bx(t,i);let o=(function(l){if(l.length!==0)return Sx(Ln.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Ca(m.field),direction:YG(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=lw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function KG(t){let e=$G(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=Dx(p);return m instanceof Ln&&ix(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(b){return new ka(Da(b.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,lg(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new xa(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new xa(y,m)})(n.endAt)),IG(e,i,s,o,a,"F",u,l)}function QG(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dx(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Da(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Da(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Da(n.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Da(n.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(t):t.fieldFilter!==void 0?(function(n){return et.create(Da(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map(r=>Dx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(n.compositeFilter.op))})(t):G(30097,{filter:t})}function YG(t){return VG[t]}function ZG(t){return jG[t]}function JG(t){return UG[t]}function Ca(t){return{fieldPath:t.canonicalString()}}function Da(t){return un.fromServerFormat(t.fieldPath)}function Sx(t){return t instanceof et?(function(n){if(n.op==="=="){if(ZP(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NAN"}};if(YP(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZP(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NAN"}};if(YP(n.value))return{unaryFilter:{field:Ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(n.field),op:ZG(n.op),value:n.value}}})(t):t instanceof Ln?(function(n){let r=n.getFilters().map(i=>Sx(i));return r.length===1?r[0]:{compositeFilter:{op:JG(n.op),filters:r}}})(t):G(54877,{filter:t})}function XG(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ax(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var dl=class t{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=Pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var pw=class{constructor(e){this.gt=e}};function eW(t){let e=KG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ew(e,e.limit,"L"):e}var $p=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),sl(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Br(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt($r(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?tx(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):ex(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):G(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Na,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(ke(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),z.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};$p.Ut=new $p;var gw=class{constructor(){this.Dn=new mw}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Wo.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},mw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(Fe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(Fe.comparator)).toArray()}};var Dle=new Uint8Array(0);var dO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rx=41943040,En=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(Rx,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);var hl=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var hO="LruGarbageCollector",tW=1048576;function fO([t,e],[n,r]){let i=ae(t,n);return i===0?ae(e,r):i}var yw=class{constructor(e){this.Tr=e,this.buffer=new ft(fO),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();fO(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},vw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){j(hO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qa(n)?j(hO,"Ignoring IndexedDB error during garbage collection: ",n):await za(n)}await this.Rr(3e5)})}},_w=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(mT.ue);let r=new yw(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(dO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dO):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ta()<=ce.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function nW(t,e){return new _w(t,e)}var Ew=class{constructor(){this.changes=new Hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Iw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ww=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rl(r.mutation,i,In.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=Bo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Xu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Bo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=zr(),s=nl(),a=(function(){return nl()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof fr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),rl(h.mutation,l,h.mutation.getFieldMask(),nt.now())):s.set(l.key,In.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Iw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=nl(),i=new Ue((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||In.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=fx();h.forEach(m=>{if(!o.has(m)){let y=_x(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Bo()),a=ol,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:hx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=Xu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Xu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new Ko(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Fn.newInvalidDocument(h)))});let a=Xu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&rl(h.mutation,l,In.empty(),nt.now()),fg(n,l)&&(a=a.insert(u,l))}),a})}};var Tw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:eW(i.bundledQuery),readTime:dr(i.readTime)}})(n)),P.resolve()}};var bw=class{constructor(){this.overlays=new Ue(z.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Bo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Bo(),o=n.length+1,s=new z(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Bo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Bo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ow(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var Cw=class{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var fl=class{constructor(){this.qr=new ft(Xe.Qr),this.$r=new ft(Xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Xe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new z(new Fe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new z(new Fe([])),r=new Xe(n,e),i=new Xe(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Xe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return z.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||z.comparator(e.key,n.key)}};var Dw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ft(Xe.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new rw(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?yT:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(ae);return n.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new z(o),0),a=new ft(ae);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Xe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Xe(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Sw=class{constructor(e){this.ni=e,this.docs=(function(){return new Ue(z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Fn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=zr(),s=n.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||nG(tG(h),r)<=0||(i.has(h.key)||fg(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Aw(this)}getSize(e){return P.resolve(this.size)}},Aw=class extends Ew{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var Rw=class{constructor(e){this.persistence=e,this.ii=new Hr(n=>wT(n),TT),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.si=0,this.oi=new fl,this.targetCount=0,this._i=hl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new hl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var Hp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new mT(0),this.ci=!1,this.ci=!0,this.li=new Cw,this.referenceDelegate=e(this),this.hi=new Rw(this),this.indexManager=new gw,this.remoteDocumentCache=(function(i){return new Sw(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new pw(n),this.Ti=new Tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Dw(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Mw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},Mw=class extends jI{constructor(e){super(),this.currentSequenceNumber=e}},Nw=class t{constructor(e){this.persistence=e,this.Ai=new fl,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=z.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},zp=class t{constructor(e,n){this.persistence=e,this.gi=new Hr(r=>sG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=nW(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dp(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Pw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Ow=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return hN()?8:iG(dt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Ow;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ta()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Ta()<=ce.DEBUG&&j("QueryEngine","Query:",ba(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ta()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):P.resolve())}ps(e,n){if(tO(n))return P.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ew(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,ew(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return tO(n)||i.isEqual(ie.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Ta()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ba(n)),this.vs(e,s,n,eG(i,ol)).next(a=>a))})}bs(e,n){let r=new ft(lx(e));return n.forEach((i,o)=>{fg(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ta()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ba(n)),this.gs.getDocumentsMatchingQuery(e,n,Wo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ST="LocalStore",rW=3e8,kw=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ue(ae),this.Ms=new Hr(o=>wT(o),TT),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ww(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function iW(t,e,n,r){return new kw(t,e,n,r)}async function Mx(t,e){let n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function oW(t,e){let n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(M=>{let R=l.docVersions.get(b);be(R!==null,48541),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Nx(t){let e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function sW(t,e){let n=te(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(M,R,k){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=rW?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=zr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(aW(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function aW(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=zr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):j(ST,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function cW(t,e){let n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yT),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uW(t,e){let n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new dl(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Fw(t,e,n){let r=te(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!qa(s))throw s;j(ST,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function pO(t,e,n){let r=te(t),i=ie.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=te(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:le())).next(a=>(lW(r,TG(e),a),{documents:a,qs:o})))}function lW(t,e,n){let r=t.xs.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var qp=class{constructor(){this.activeTargetIds=RG()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Lw=class{constructor(){this.Fo=new qp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vw=class{xo(e){}shutdown(){}};var gO="ConnectivityMonitor",Gp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){j(gO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){j(gO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cp=null;function jw(){return Cp===null?Cp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cp++,"0x"+Cp.toString(16)}var AI="RestConnection",dW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Uw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=jw(),a=this.Go(e,n.toUriEncodedString());j(AI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=_i(l);return this.jo(e,a,u,r,h).then(p=>(j(AI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Oi(AI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ha})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=dW[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Bw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Nt="WebChannelConnection",$w=class extends Uw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=jw();return new Promise((a,u)=>{let l=new wI;l.setWithCredentials(!0),l.listenOnce(TI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ju.NO_ERROR:let p=l.getResponseJson();j(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ju.TIMEOUT:j(Nt,`RPC '${e}' ${s} timed out`),u(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:let m=l.getStatus();if(j(Nt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let b=y?.error;if(b&&b.status&&b.message){let M=(function(k){let W=k.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(W)>=0?W:N.UNKNOWN})(b.status);u(new V(M,b.message))}else u(new V(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(N.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{j(Nt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(Nt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=jw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=DI(),a=CI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");j(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,b=new Bw({Ho:R=>{y?j(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(Nt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),M=(R,k,W)=>{R.listen(k,Q=>{try{W(Q)}catch(_e){setTimeout(()=>{throw _e},0)}})};return M(p,wa.EventType.OPEN,()=>{y||(j(Nt,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),M(p,wa.EventType.CLOSE,()=>{y||(y=!0,j(Nt,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(p))}),M(p,wa.EventType.ERROR,R=>{y||(y=!0,Oi(Nt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),b.__(new V(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,wa.EventType.MESSAGE,R=>{var k;if(!y){let W=R.data[0];be(!!W,16349);let Q=W,_e=Q?.error||((k=Q[0])===null||k===void 0?void 0:k.error);if(_e){j(Nt,`RPC '${e}' stream ${i} received error:`,_e);let pt=_e.status,Ce=(function(E){let I=Je[E];if(I!==void 0)return Ix(I)})(pt),w=_e.message;Ce===void 0&&(Ce=N.INTERNAL,w="Unknown error status: "+pt+" with message "+_e.message),y=!0,b.__(new V(Ce,w)),p.close()}else j(Nt,`RPC '${e}' stream ${i} received:`,W),b.a_(W)}}),M(a,bI.STAT_EVENT,R=>{R.stat===wp.PROXY?j(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===wp.NOPROXY&&j(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function RI(){return typeof document<"u"?document:null}function pg(t){return new uw(t,!0)}var Wp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var mO="PersistentStream",Kp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Wp(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return j(mO,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(j(mO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Hw=class extends Kp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=HG(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?dr(s.readTime):ie.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=fw(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=JI(u)?{documents:GG(o,u)}:{query:WG(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wx(o,s.resumeToken);let l=lw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Bp(o,s.snapshotVersion.toTimestamp());let l=lw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=QG(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=fw(this.serializer),n.removeTarget=e,this.k_(n)}},zw=class extends Kp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=qG(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=fw(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zG(this.serializer,r))};this.k_(n)}};var qw=class{},Gw=class extends qw{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,dw(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,dw(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Ww=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ur(n),this._a=!1):j("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Jo="RemoteStore",Kw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{es(this)&&(j(Jo,"Restarting streams for network reachability change."),await(async function(u){let l=te(u);l.Ia.add(4),await vl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await gg(l)})(this))})}),this.Aa=new Ww(r,i)}};async function gg(t){if(es(t))for(let e of t.da)await e(!0)}async function vl(t){for(let e of t.da)await e(!1)}function Px(t,e){let n=te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),NT(n)?MT(n):Ga(n).x_()&&RT(n,e))}function AT(t,e){let n=te(t),r=Ga(n);n.Ta.delete(e),r.x_()&&Ox(n,e),n.Ta.size===0&&(r.x_()?r.B_():es(n)&&n.Aa.set("Unknown"))}function RT(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ga(t).H_(e)}function Ox(t,e){t.Ra.$e(e),Ga(t).Y_(e)}function MT(t){t.Ra=new cw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.Aa.aa()}function NT(t){return es(t)&&!Ga(t).M_()&&t.Ta.size>0}function es(t){return te(t).Ia.size===0}function xx(t){t.Ra=void 0}async function hW(t){t.Aa.set("Online")}async function fW(t){t.Ta.forEach((e,n)=>{RT(t,e)})}async function pW(t,e){xx(t),NT(t)?(t.Aa.la(e),MT(t)):t.Aa.set("Unknown")}async function gW(t,e,n){if(t.Aa.set("Online"),e instanceof jp&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){j(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qp(t,r)}else if(e instanceof Aa?t.Ra.Ye(e):e instanceof Vp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ie.min()))try{let r=await Nx(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),Ox(o,u);let p=new dl(h.target,u,l,h.sequenceNumber);RT(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){j(Jo,"Failed to raise snapshot:",r),await Qp(t,r)}}async function Qp(t,e,n){if(!qa(e))throw e;t.Ia.add(1),await vl(t),t.Aa.set("Offline"),n||(n=()=>Nx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j(Jo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await gg(t)})}function kx(t,e){return e().catch(n=>Qp(t,n,e))}async function mg(t){let e=te(t),n=ki(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:yT;for(;mW(e);)try{let i=await cW(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,yW(e,i)}catch(i){await Qp(e,i)}Fx(e)&&Lx(e)}function mW(t){return es(t)&&t.Pa.length<10}function yW(t,e){t.Pa.push(e);let n=ki(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Fx(t){return es(t)&&!ki(t).M_()&&t.Pa.length>0}function Lx(t){ki(t).start()}async function vW(t){ki(t).na()}async function _W(t){let e=ki(t);for(let n of t.Pa)e.X_(n.mutations)}async function EW(t,e,n){let r=t.Pa.shift(),i=iw.from(r,e,n);await kx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mg(t)}async function IW(t,e){e&&ki(t).Z_&&await(async function(r,i){if((function(s){return FG(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();ki(r).N_(),await kx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await mg(r)}})(t,e),Fx(t)&&Lx(t)}async function yO(t,e){let n=te(t);n.asyncQueue.verifyOperationInProgress(),j(Jo,"RemoteStore received new credentials");let r=es(n);n.Ia.add(3),await vl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await gg(n)}async function wW(t,e){let n=te(t);e?(n.Ia.delete(2),await gg(n)):e||(n.Ia.add(2),await vl(n),n.Aa.set("Unknown"))}function Ga(t){return t.Va||(t.Va=(function(n,r,i){let o=te(n);return o.ia(),new Hw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:hW.bind(null,t),e_:fW.bind(null,t),n_:pW.bind(null,t),J_:gW.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),NT(t)?MT(t):t.Aa.set("Unknown")):(await t.Va.stop(),xx(t))})),t.Va}function ki(t){return t.ma||(t.ma=(function(n,r,i){let o=te(n);return o.ia(),new zw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:vW.bind(null,t),n_:IW.bind(null,t),ea:_W.bind(null,t),ta:EW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await mg(t)):(await t.ma.stop(),t.Pa.length>0&&(j(Jo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var Qw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function PT(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),qa(t))return new V(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Yp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Xu(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Zp=class{constructor(){this.fa=new Ue(z.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ua=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Yp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Yw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},Zw=class{constructor(){this.queries=vO(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=te(n),o=i.queries;i.queries=vO(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function vO(){return new Hr(t=>ux(t),hg)}async function Vx(t,e){let n=te(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new Yw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=PT(s,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&OT(n)}async function jx(t,e){let n=te(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TW(t,e){let n=te(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&OT(n)}function bW(t,e,n){let r=te(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function OT(t){t.Da.forEach(e=>{e.next()})}var Jw,_O;(_O=Jw||(Jw={})).Fa="default",_O.Cache="cache";var Jp=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Jw.Cache}};var Xp=class{constructor(e){this.key=e}},eg=class{constructor(e){this.key=e}},Xw=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=lx(e),this.eu=new Yp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Zp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=fg(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?b!==M&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,b){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:R})}};return M(y)-M(b)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ua(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Zp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new eg(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Xp(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ua.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},xT="SyncEngine",eT=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},tT=class{constructor(e){this.key=e,this.lu=!1}},nT=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Hr(a=>ux(a),hg),this.Tu=new Map,this.Iu=new Set,this.du=new Ue(z.comparator),this.Eu=new Map,this.Au=new fl,this.Ru={},this.Vu=new Map,this.mu=hl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function CW(t,e,n=!0){let r=qx(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await Ux(r,e,n,!0),i}async function DW(t,e){let n=qx(t);await Ux(n,e,!0,!1)}async function Ux(t,e,n,r){let i=await uW(t.localStore,lr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await SW(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Px(t.remoteStore,i),a}async function SW(t,e,n,r,i){t.gu=(p,m,y)=>(async function(M,R,k,W){let Q=R.view.nu(k);Q.Ds&&(Q=await pO(M.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,Q)));let _e=W&&W.targetChanges.get(R.targetId),pt=W&&W.targetMismatches.get(R.targetId)!=null,Ce=R.view.applyChanges(Q,M.isPrimaryClient,_e,pt);return IO(M,R.targetId,Ce._u),Ce.snapshot})(t,p,m,y);let o=await pO(t.localStore,e,!0),s=new Xw(e,o.qs),a=s.nu(o.documents),u=ll.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);IO(t,n,l._u);let h=new eT(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function AW(t,e,n){let r=te(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!hg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&AT(r.remoteStore,i.targetId),rT(r,i.targetId)}).catch(za)):(rT(r,i.targetId),await Fw(r.localStore,i.targetId,!0))}async function RW(t,e){let n=te(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),AT(n.remoteStore,r.targetId))}async function MW(t,e,n){let r=LW(t);try{let i=await(function(s,a){let u=te(s),l=nt.now(),h=a.reduce((y,b)=>y.add(b.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=zr(),M=le();return u.Os.getEntries(y,h).next(R=>{b=R,b.forEach((k,W)=>{W.isValidDocument()||(M=M.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(R=>{p=R;let k=[];for(let W of a){let Q=kG(W,p.get(W.key).overlayedDocument);Q!=null&&k.push(new fr(W.key,Q,nx(Q.value.mapValue),jr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:hx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ue(ae)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await _l(r,i.changes),await mg(r.remoteStore)}catch(i){let o=PT(i,"Failed to persist write");n.reject(o)}}async function Bx(t,e){let n=te(t);try{let r=await sW(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?be(s.lu,14607):i.removedDocuments.size>0&&(be(s.lu,42227),s.lu=!1))}),await _l(n,r,e)}catch(r){await za(r)}}function EO(t,e,n){let r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=te(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&OT(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NW(t,e,n){let r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ue(z.comparator);s=s.insert(o,Fn.newNoDocument(o,ie.min()));let a=le().add(o),u=new Lp(ie.min(),new Map,new Ue(ae),s,a);await Bx(r,u),r.du=r.du.remove(o),r.Eu.delete(e),kT(r)}else await Fw(r.localStore,e,!1).then(()=>rT(r,e,n)).catch(za)}async function PW(t,e){let n=te(t),r=e.batch.batchId;try{let i=await oW(n.localStore,e);Hx(n,r,null),$x(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _l(n,i)}catch(i){await za(i)}}async function OW(t,e,n){let r=te(t);try{let i=await(function(s,a){let u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);Hx(r,e,n),$x(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _l(r,i)}catch(i){await za(i)}}function $x(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Hx(t,e,n){let r=te(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function rT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||zx(t,r)})}function zx(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(AT(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),kT(t))}function IO(t,e,n){for(let r of n)r instanceof Xp?(t.Au.addReference(r.key,e),xW(t,r)):r instanceof eg?(j(xT,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||zx(t,r.key)):G(19791,{yu:r})}function xW(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(j(xT,"New document in limbo: "+n),t.Iu.add(r),kT(t))}function kT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new z(Fe.fromString(e)),r=t.mu.next();t.Eu.set(r,new tT(n)),t.du=t.du.insert(n,r),Px(t.remoteStore,new dl(lr(bT(n.path)),r,"TargetPurposeLimboResolution",mT.ue))}}async function _l(t,e,n){let r=te(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Pw.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=te(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!qa(p))throw p;j(ST,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),b=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(b);h.Fs=h.Fs.insert(m,M)}}})(r.localStore,o))}async function kW(t,e){let n=te(t);if(!n.currentUser.isEqual(e)){j(xT,"User change. New user:",e.toKey());let r=await Mx(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new V(N.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _l(n,r.Bs)}}function FW(t,e){let n=te(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function qx(t){let e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NW.bind(null,e),e.hu.J_=TW.bind(null,e.eventManager),e.hu.pu=bW.bind(null,e.eventManager),e}function LW(t){let e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OW.bind(null,e),e}var Gx=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=pg(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return iW(this.persistence,new xw,n.initialUser,this.serializer)}Du(n){return new Hp(Nw.Vi,this.serializer)}bu(n){return new Lw}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),iT=class extends Gx{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){be(this.persistence.referenceDelegate instanceof zp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new vw(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Hp(r=>zp.Vi(r,n),this.serializer)}};var VW=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>EO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kW.bind(null,this.syncEngine),await wW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new Zw})()}createDatastore(n){let r=pg(n.databaseInfo.databaseId),i=(function(s){return new $w(s)})(n.databaseInfo);return(function(s,a,u,l){return new Gw(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new Kw(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>EO(this.syncEngine,r,0),(function(){return Gp.C()?new Gp:new Vw})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new nT(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=te(o);j(Jo,"RemoteStore shutting down."),s.Ia.add(5),await vl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var tg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Fi="FirestoreClient",oT=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=il.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{j(Fi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j(Fi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=PT(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function MI(t,e){t.asyncQueue.verifyOperationInProgress(),j(Fi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Mx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Oi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{j("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Oi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function wO(t,e){t.asyncQueue.verifyOperationInProgress();let n=await jW(t);j(Fi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yO(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yO(e.remoteStore,i)),t._onlineComponents=e}async function jW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Fi,"Using user provided OfflineComponentProvider");try{await MI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await MI(t,new Gx)}}else j(Fi,"Using default OfflineComponentProvider"),await MI(t,new iT(void 0));return t._offlineComponents}async function Wx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Fi,"Using user provided OnlineComponentProvider"),await wO(t,t._uninitializedComponentsProvider._online)):(j(Fi,"Using default OnlineComponentProvider"),await wO(t,new VW))),t._onlineComponents}function UW(t){return Wx(t).then(e=>e.syncEngine)}async function sT(t){let e=await Wx(t),n=e.eventManager;return n.onListen=CW.bind(null,e.syncEngine),n.onUnlisten=AW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RW.bind(null,e.syncEngine),n}function BW(t,e,n={}){let r=new ar;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new tg({next:m=>{h.Ou(),s.enqueueAndForget(()=>jx(o,p)),m.fromCache&&u.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Jp(a,h,{includeMetadataChanges:!0,ka:!0});return Vx(o,p)})(await sT(t),t.asyncQueue,e,n,r)),r.promise}function Kx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var TO=new Map;var Qx="firestore.googleapis.com",bO=!0,ng=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qx,this.ssl=bO}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tW)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ba=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ng({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ng(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new NI;switch(r.type){case"firstParty":return new kI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=TO.get(n);r&&(j("ComponentProvider","Removing Datastore"),TO.delete(n),r.terminate())})(this),Promise.resolve()}};function Yx(t,e,n,r={}){var i;t=cr(t,Ba);let o=_i(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Yf(`https://${u}`),Zf("Firestore",!0)),s.host!==Qx&&s.host!==u&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!rr(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=sN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(m)}t._authCredentials=new PI(new Rp(h,p))}}var Xo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Tt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yl(n,t._jsonSchema))return new t(e,r||null,new z(Fe.fromString(n.referencePath)))}};Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:tt("string",Tt._jsonSchemaVersion),referencePath:tt("string")};var Ri=class t extends Xo{constructor(e,n,r){super(e,n,bT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Zx(t,e,...n){if(t=at(t),PO("collection","path",e),t instanceof Ba){let r=Fe.fromString(e,...n);return $P(r),new Ri(t,null,r)}{if(!(t instanceof Tt||t instanceof Ri))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Fe.fromString(e,...n));return $P(r),new Ri(t.firestore,null,r)}}function FT(t,e,...n){if(t=at(t),arguments.length===1&&(e=il.newId()),PO("doc","path",e),t instanceof Ba){let r=Fe.fromString(e,...n);return BP(r),new Tt(t,null,new z(r))}{if(!(t instanceof Tt||t instanceof Ri))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Fe.fromString(e,...n));return BP(r),new Tt(t.firestore,t instanceof Ri?t.converter:null,new z(r))}}var CO="AsyncQueue",rg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Wp(this,"async_queue_retry"),this.oc=()=>{let r=RI();r&&j(CO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=RI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=RI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new ar;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qa(e))throw e;j(CO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ur("INTERNAL UNHANDLED ERROR: ",DO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=Qw.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:DO(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function DO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function SO(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var qr=class extends Ba{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new rg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rg(e),this._firestoreClient=void 0,await e}}};function Jx(t,e){let n=typeof t=="object"?t:xo(),r=typeof t=="string"?t:e||xp,i=ya(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=oN("firestore");o&&Yx(i,...o)}return i}function LT(t){if(t._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$W(t),t._firestoreClient}function $W(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new UI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Kx(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new oT(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Mi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Pt.fromBase64String(e))}catch(n){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:tt("string",Mi._jsonSchemaVersion),bytes:tt("string")};var $a=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pl=class{constructor(e){this._methodName=e}};var Ni=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(yl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:tt("string",Ni._jsonSchemaVersion),latitude:tt("number"),longitude:tt("number")};var Pi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new V(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:tt("string",Pi._jsonSchemaVersion),vectorValues:tt("object")};var HW=/^__.*__$/,aT=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zo(e,this.data,n,this.fieldTransforms)}},ig=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Xx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:t})}}var cT=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return sg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Xx(this.Ec)&&HW.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},uT=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pg(e)}Dc(e,n,r,i=!1){return new cT({Ec:e,methodName:n,bc:r,path:un.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function VT(t){let e=t._freezeSettings(),n=pg(t._databaseId);return new uT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zW(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);jT("Data must be an object, but it was:",s,r);let a=ek(r,s),u,l;if(o.merge)u=new In(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=lT(e,p,n);if(!s.contains(m))throw new V(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);nk(h,m)||h.push(m)}u=new In(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new aT(new cn(a),u,l)}var og=class t extends pl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function qW(t,e,n,r){let i=t.Dc(1,e,n);jT("Data must be an object, but it was:",i,r);let o=[],s=cn.empty();Li(r,(u,l)=>{let h=UT(e,u,n);l=at(l);let p=i.gc(h);if(l instanceof og)o.push(h);else{let m=El(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new In(o);return new ig(s,a,i.fieldTransforms)}function GW(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[lT(e,r,n)],u=[i];if(o.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(lT(e,o[m])),u.push(o[m+1]);let l=[],h=cn.empty();for(let m=a.length-1;m>=0;--m)if(!nk(l,a[m])){let y=a[m],b=u[m];b=at(b);let M=s.gc(y);if(b instanceof og)l.push(y);else{let R=El(b,M);R!=null&&(l.push(y),h.set(y,R))}}let p=new In(l);return new ig(h,p,s.fieldTransforms)}function WW(t,e,n,r=!1){return El(n,t.Dc(r?4:3,e))}function El(t,e){if(tk(t=at(t)))return jT("Unsupported field value:",e,t),ek(t,e);if(t instanceof pl)return(function(r,i){if(!Xx(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=El(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=nt.fromDate(r);return{timestampValue:Bp(i.serializer,o)}}if(r instanceof nt){let o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bp(i.serializer,o)}}if(r instanceof Ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mi)return{bytesValue:wx(i.serializer,r._byteString)};if(r instanceof Tt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:DT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pi)return(function(s,a){return{mapValue:{fields:{[_T]:{stringValue:ET},[Na]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return CT(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${ug(r)}`)})(t,e)}function ek(t,e){let n={};return KO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(t,(r,i)=>{let o=El(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function tk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Ni||t instanceof Mi||t instanceof Tt||t instanceof pl||t instanceof Pi)}function jT(t,e,n){if(!tk(n)||!OO(n)){let r=ug(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function lT(t,e,n){if((e=at(e))instanceof $a)return e._internalPath;if(typeof e=="string")return UT(t,e);throw sg("Field path arguments must be of type string or ",t,!1,void 0,n)}var KW=new RegExp("[~\\*/\\[\\]]");function UT(t,e,n){if(e.search(KW)>=0)throw sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $a(...e.split("."))._internalPath}catch{throw sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(N.INVALID_ARGUMENT,a+t+u)}function nk(t,e){return t.some(n=>n.isEqual(e))}var ag=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(BT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},dT=class extends ag{data(){return super.data()}};function BT(t,e){return typeof e=="string"?UT(t,e):e instanceof $a?e._internalPath:e._delegate._internalPath}function rk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gl=class{},hT=class extends gl{};function ik(t,e,...n){let r=[];e instanceof gl&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof fT).length,a=o.filter(u=>u instanceof cg).length;if(s>1||s>0&&a>0)throw new V(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var cg=class t extends hT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return sk(e._query,n),new Xo(e.firestore,e.converter,XI(e._query,n))}_parse(e){let n=VT(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){RO(p,h);let b=[];for(let M of p)b.push(AO(u,o,M));m={arrayValue:{values:b}}}else m=AO(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||RO(p,h),m=WW(a,s,p,h==="in"||h==="not-in");return et.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ok(t,e,n){let r=e,i=BT("where",t);return cg._create(i,r,n)}var fT=class t extends gl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)sk(s,u),s=XI(s,u)})(e._query,n),new Xo(e.firestore,e.converter,XI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function AO(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new V(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cx(e)&&n.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Fe.fromString(n));if(!z.isDocumentKey(r))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QP(t,new z(r))}if(n instanceof Tt)return QP(t,n._key);throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(n)}.`)}function RO(t,e){if(!Array.isArray(t)||t.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sk(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var pT=class{convertValue(e,n="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Li(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Na].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Pi(o)}convertGeoPoint(e){return new Ni(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=dg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){let n=Br(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Fe.fromString(e);be(Ax(r),9688,{name:e});let i=new kp(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(n)||Ur(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function QW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ho=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zo=class t extends ag{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(BT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",zo._jsonSchema={type:tt("string",zo._jsonSchemaVersion),bundleSource:tt("string","DocumentSnapshot"),bundleName:tt("string"),bundle:tt("string")};var Ra=class extends zo{data(e={}){return super.data(e)}},qo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ho(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ra(this._firestore,this._userDataWriter,r.key,r,new Ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ho(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ho(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:YW(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=il.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function YW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}qo._jsonSchemaVersion="firestore/querySnapshot/1.0",qo._jsonSchema={type:tt("string",qo._jsonSchemaVersion),bundleSource:tt("string","QuerySnapshot"),bundleName:tt("string"),bundle:tt("string")};var ml=class extends pT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}};function ak(t){t=cr(t,Xo);let e=cr(t.firestore,qr),n=LT(e),r=new ml(e);return rk(t._query),BW(n,t._query).then(i=>new qo(e,r,t,i))}function ck(t,e,n,...r){t=cr(t,Tt);let i=cr(t.firestore,qr),o=VT(i),s;return s=typeof(e=at(e))=="string"||e instanceof $a?GW(o,"updateDoc",t._key,e,n,r):qW(o,"updateDoc",t._key,e),HT(i,[s.toMutation(t._key,jr.exists(!0))])}function uk(t){return HT(cr(t.firestore,qr),[new ul(t._key,jr.none())])}function lk(t,e){let n=cr(t.firestore,qr),r=FT(t),i=QW(t.converter,e);return HT(n,[zW(VT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}function $T(t,...e){var n,r,i;t=at(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||SO(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(SO(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Tt)l=cr(t.firestore,qr),h=bT(t._key.path),u={next:p=>{e[s]&&e[s](ZW(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=cr(t,Xo);l=cr(p.firestore,qr),h=p._query;let m=new ml(l);u={next:y=>{e[s]&&e[s](new qo(l,m,p,y))},error:e[s+1],complete:e[s+2]},rk(t._query)}return(function(m,y,b,M){let R=new tg(M),k=new Jp(y,R,b);return m.asyncQueue.enqueueAndForget(async()=>Vx(await sT(m),k)),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(async()=>jx(await sT(m),k))}})(LT(l),h,a,u)}function HT(t,e){return(function(r,i){let o=new ar;return r.asyncQueue.enqueueAndForget(async()=>MW(await UW(r),i,o)),o.promise})(LT(t),e)}function ZW(t,e,n){let r=n.docs.get(e._key),i=new ml(t);return new zo(t,i,e._key,r,new Ho(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ha=i})(Ii),xn(new Vt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new qr(new OI(r.getProvider("auth-internal")),new FI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kp(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),je(LP,VP,e),je(LP,VP,"esm2017")})();var yg=function(){return yg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yg.apply(this,arguments)};var e5={includeMetadataChanges:!1};function zT(t,e){return e===void 0&&(e=e5),new K(function(n){var r=$T(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function dk(t){return zT(t,{includeMetadataChanges:!0})}function hk(t,e){return e===void 0&&(e={}),dk(t).pipe(B(function(n){return qT(n,e)}))}function qT(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:yg(yg({},r),(n={},n[e.idField]=t.id,n))}function fk(t){return zT(t,{includeMetadataChanges:!0}).pipe(B(function(e){return e.docs}))}function pk(t,e){return e===void 0&&(e={}),fk(t).pipe(B(function(n){return n.map(function(r){return qT(r,e)})}))}var ts=class{constructor(e){return e}},gk="firestore",GT=class{constructor(){return _a(gk)}};var WT=new F("angularfire2.firestore-instances");function t5(t,e){let n=Bu(gk,t,e);return n&&new ts(n)}function n5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ts(r)}}var r5={provide:GT,deps:[[new zt,WT]]},i5={provide:ts,useFactory:t5,deps:[[new zt,WT],xr]};function mk(t,...e){return je("angularfire",wi.full,"fst"),Ke([i5,r5,{provide:WT,useFactory:n5(t),multi:!0,deps:[fe,xe,Ti,Fo,[new zt,Zu],[new zt,Ea],...e]}])}var yk=wt(pk,!0);var vk=wt(hk,!0);var _k=wt(lk,!0,2);var Ek=wt(Zx,!0,2);var Ik=wt(uk,!0,2);var vg=wt(FT,!0,2);var wk=wt(ak,!0);var Tk=wt(Jx,!0);var bk=wt(ik,!0,2);var Ck=wt(ck,!0,2);var Dk=wt(ok,!0,2);var _g=class t{firestore=S(ts);usersCollection=Ek(this.firestore,"utenti");getAll(){return yk(this.usersCollection,{idField:"id"})}getById(e){let n=vg(this.firestore,`utenti/${e}`);return vk(n,{idField:"id"})}getByCodiceFiscale(e){let n=bk(this.usersCollection,Dk("codiceFiscale","==",e.toUpperCase()));return De(wk(n)).pipe(B(r=>{if(r.empty)return null;let i=r.docs[0];return O({id:i.id},i.data())}))}create(e){let n=J(O({},e),{codiceFiscale:e.codiceFiscale.toUpperCase()});return De(_k(this.usersCollection,n)).pipe(B(r=>r.id))}update(e,n){let r=vg(this.firestore,`utenti/${e}`),i=n.codiceFiscale?J(O({},n),{codiceFiscale:n.codiceFiscale.toUpperCase()}):n;return De(Ck(r,i))}delete(e){let n=vg(this.firestore,`utenti/${e}`);return De(Ik(n))}checkCodiceFiscaleExists(e){return this.getByCodiceFiscale(e).pipe(B(n=>n!==null))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var Vi=class t{userService=S(_g);router=S(qt);platformId=S(Sr);currentUserSignal=Oe(null);currentUser=this.currentUserSignal.asReadonly();STORAGE_KEY="currentUser";isBrowser;constructor(){this.isBrowser=TR(this.platformId),this.isBrowser&&this.loadUserFromStorage()}login(e,n,r){return this.userService.getByCodiceFiscale(r).pipe(B(i=>i?i.nome.toLowerCase()!==e.toLowerCase()||i.cognome.toLowerCase()!==n.toLowerCase()?{success:!1,message:"Nome o cognome non corrispondono al codice fiscale."}:(this.setCurrentUser(i),{success:!0,user:i}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),Bt(i=>(console.error("Errore durante il login:",i),H({success:!1,message:"Errore durante il login. Riprova."}))))}loginByCodiceFiscale(e){return this.userService.getByCodiceFiscale(e).pipe(B(n=>n?(this.setCurrentUser(n),{success:!0,user:n}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),Bt(n=>(console.error("Errore durante il login:",n),H({success:!1,message:"Errore durante il login. Riprova."}))))}register(e){return this.userService.checkCodiceFiscaleExists(e.codiceFiscale).pipe(B(n=>{if(n)throw new Error("Codice fiscale gi\xE0 registrato. Usa il login per accedere.");return n}),Be(()=>{}),B(()=>(this.userService.create(e).subscribe({next:n=>{let r=J(O({},e),{id:n});this.setCurrentUser(r)},error:n=>{console.error("Errore durante la registrazione:",n)}}),{success:!0})),Bt(n=>(console.error("Errore durante la registrazione:",n),H({success:!1,message:n.message||"Errore durante la registrazione. Riprova."}))))}logout(){this.currentUserSignal.set(null),this.isBrowser&&localStorage.removeItem(this.STORAGE_KEY),this.router.navigate(["/login"])}isAuthenticated(){return this.currentUserSignal()!==null}setCurrentUser(e){this.currentUserSignal.set(e),this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadUserFromStorage(){if(!this.isBrowser)return;let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let n=JSON.parse(e);this.currentUserSignal.set(n)}catch(n){console.error("Errore nel parsing dell'utente salvato:",n),localStorage.removeItem(this.STORAGE_KEY)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};function o5(t,e){if(t&1){let n=Zc();oe(0,"div",8),Te(1,"i",20),ve(2),oe(3,"button",21),Ze("click",function(){ao(n);let i=Nn();return co(i.errorMessage.set(null))}),ye()()}if(t&2){let n=Nn();Ae(2),Xn(" ",n.errorMessage()," ")}}function s5(t,e){if(t&1){let n=Zc();oe(0,"div",9),Te(1,"i",22),ve(2),oe(3,"button",21),Ze("click",function(){ao(n);let i=Nn();return co(i.successMessage.set(null))}),ye()()}if(t&2){let n=Nn();Ae(2),Xn(" ",n.successMessage()," ")}}function a5(t,e){if(t&1){let n=Zc();oe(0,"div",11)(1,"div",12)(2,"input",23),Js("ngModelChange",function(i){ao(n);let o=Nn();return eu(o.nome,i)||(o.nome=i),co(i)}),ye(),oe(3,"label",24),Te(4,"i",25),ve(5,"Nome "),ye()(),oe(6,"div",12)(7,"input",26),Js("ngModelChange",function(i){ao(n);let o=Nn();return eu(o.cognome,i)||(o.cognome=i),co(i)}),ye(),oe(8,"label",27),Te(9,"i",25),ve(10,"Cognome "),ye()()()}if(t&2){let n=Nn();Ae(2),Zs("ngModel",n.nome),Ae(5),Zs("ngModel",n.cognome)}}function c5(t,e){if(t&1&&(Te(0,"span",28),ve(1)),t&2){let n=Nn();Ae(),Xn(" ",n.isRegisterMode()?"Registrazione...":"Accesso..."," ")}}function u5(t,e){if(t&1&&(Te(0,"i",29),ve(1)),t&2){let n=Nn();nn("bi-box-arrow-in-right",!n.isRegisterMode())("bi-person-plus-fill",n.isRegisterMode()),Ae(),Xn(" ",n.isRegisterMode()?"Registrati":"Accedi"," ")}}var Eg=class t{authService=S(Vi);router=S(qt);isRegisterMode=Oe(!1);isLoading=Oe(!1);errorMessage=Oe(null);successMessage=Oe(null);currentYear=new Date().getFullYear();nome="";cognome="";codiceFiscale="";toggleMode(){this.isRegisterMode.update(e=>!e),this.clearMessages(),this.nome="",this.cognome="",this.codiceFiscale=""}onSubmit(){if(this.clearMessages(),!this.codiceFiscale.trim()){this.errorMessage.set("Inserisci il codice fiscale.");return}if(this.codiceFiscale.length!==16){this.errorMessage.set("Il codice fiscale deve essere di 16 caratteri.");return}if(this.isRegisterMode()&&(!this.nome.trim()||!this.cognome.trim())){this.errorMessage.set("Inserisci nome e cognome.");return}this.isLoading.set(!0),this.isRegisterMode()?this.handleRegister():this.handleLogin()}handleLogin(){this.authService.loginByCodiceFiscale(this.codiceFiscale.toUpperCase()).subscribe({next:e=>{this.isLoading.set(!1),e.success?(this.successMessage.set("Login effettuato con successo!"),setTimeout(()=>{this.router.navigate(["/"])},500)):this.errorMessage.set(e.message||"Errore durante il login.")},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante il login. Riprova."),console.error("Errore login:",e)}})}handleRegister(){let e={nome:this.nome.trim().toUpperCase(),cognome:this.cognome.trim().toUpperCase(),codiceFiscale:this.codiceFiscale.trim().toUpperCase(),email:"",dataDiNascita:new Date,annoConseguimentoPatente:this.currentYear};this.authService.register(e).subscribe({next:n=>{this.isLoading.set(!1),n.success?(this.successMessage.set("Registrazione completata! Accesso in corso..."),setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage.set(n.message||"Errore durante la registrazione.")},error:n=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante la registrazione. Riprova."),console.error("Errore registrazione:",n)}})}clearMessages(){this.errorMessage.set(null),this.successMessage.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"card-header"],[1,"logo"],[1,"bi","bi-car-front-fill"],[1,"title"],[1,"subtitle"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[3,"ngSubmit"],[1,"register-fields"],[1,"form-floating","mb-3"],["type","text","id","codiceFiscale","placeholder","Codice Fiscale","name","codiceFiscale","maxlength","16","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","codiceFiscale"],[1,"bi","bi-credit-card-fill","me-2"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"toggle-text"],["type","button",1,"btn","btn-link",3,"click","disabled"],[1,"bi","bi-exclamation-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-check-circle-fill","me-2"],["type","text","id","nome","placeholder","Nome","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","nome"],[1,"bi","bi-person-fill","me-2"],["type","text","id","cognome","placeholder","Cognome","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","cognome"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"me-2"]],template:function(n,r){n&1&&(oe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Te(4,"i",4),ye(),oe(5,"h2",5),ve(6),ye(),oe(7,"p",6),ve(8),ye()(),oe(9,"div",7),Ar(10,o5,4,1,"div",8),Ar(11,s5,4,1,"div",9),oe(12,"form",10),Ze("ngSubmit",function(){return r.onSubmit()}),Ar(13,a5,11,2,"div",11),oe(14,"div",12)(15,"input",13),Js("ngModelChange",function(o){return eu(r.codiceFiscale,o)||(r.codiceFiscale=o),o}),ye(),oe(16,"label",14),Te(17,"i",15),ve(18,"Codice Fiscale "),ye()(),oe(19,"button",16),Ar(20,c5,2,1)(21,u5,2,5),ye()(),oe(22,"div",17)(23,"p",18),ve(24),oe(25,"button",19),Ze("click",function(){return r.toggleMode()}),ve(26),ye()()()()()()),n&2&&(Ae(6),Xc(r.isRegisterMode()?"Registrati":"Benvenuto"),Ae(2),Xc(r.isRegisterMode()?"Crea il tuo account":"Accedi al tuo account"),Ae(2),Rr(r.errorMessage()?10:-1),Ae(),Rr(r.successMessage()?11:-1),Ae(2),Rr(r.isRegisterMode()?13:-1),Ae(2),Zs("ngModel",r.codiceFiscale),Ae(4),hi("disabled",r.isLoading()),Ae(),Rr(r.isLoading()?20:21),Ae(4),Xn(" ",r.isRegisterMode()?"Hai gi\xE0 un account?":"Non hai un account?"," "),Ae(),hi("disabled",r.isLoading()),Ae(),Xn(" ",r.isRegisterMode()?"Accedi":"Registrati"," "))},dependencies:[eN,JM,zf,qM,GM,uE,lE,cE,aE,gi],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:3rem 2rem 2rem;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.2))}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:1.5rem .75rem .5rem;height:auto;min-height:58px;font-size:1rem;line-height:1.5;transition:all .3s ease;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-.75rem) translate(.15rem)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem .75rem;color:#64748b;transform-origin:0 0;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-fields[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:1rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:#64748b;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;padding:0 .25rem;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:3rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Ig=(t,e)=>{let n=S(Vi),r=S(qt);return n.isAuthenticated()?!0:r.createUrlTree(["/login"])};var Sk=[{path:"login",component:Eg},{path:"",component:Of,canActivate:[Ig]},{path:"elenco-auto",component:xf,canActivate:[Ig]},{path:"nuova-auto",component:kf,canActivate:[Ig]},{path:"**",redirectTo:"login"}];var KT="Service workers are disabled or not supported by this browser",Wa=class{serviceWorker;worker;registration;events;constructor(e,n){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new K(r=>r.error(new L(5601,!1)));else{let r=null,i=new Ne;this.worker=new K(l=>(r!==null&&l.next(r),i.subscribe(h=>l.next(h))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(rt(()=>e.getRegistration().then(l=>{if(!l)throw new L(5601,!1);return l})));let s=new Ne;this.events=s.asObservable();let a=l=>{let{data:h}=l;h?.type&&s.next(h)};e.addEventListener("message",a),n?.get(ut,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,n){return new Promise(r=>{this.worker.pipe(kt(1)).subscribe(i=>{i.postMessage(O({action:e},n)),r()})})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(We(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(kt(1))}waitForOperationCompleted(e){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(We(i=>i.nonce===e),kt(1),B(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},l5=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Ne;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=vr,this.notificationClicks=vr,this.notificationCloses=vr,this.pushSubscriptionChanges=vr,this.subscription=vr;return}this.messages=this.sw.eventsOfType("PUSH").pipe(B(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(B(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(B(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(B(i=>i.data)),this.pushManager=this.sw.registration.pipe(B(i=>i.pushManager));let r=this.pushManager.pipe(rt(i=>i.getSubscription()));this.subscription=new K(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(KT));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(rt(u=>u.subscribe(r)),kt(1)).subscribe({next:u=>{this.subscriptionChanges.next(u),s(u)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(KT));let n=r=>{if(r===null)throw new L(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new L(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(kt(1),rt(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||t)(X(Wa))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),d5=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=vr,this.unrecoverable=vr;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(KT));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new L(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||t)(X(Wa))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();var Rk=new F("");function h5(){let t=S(Il);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let e=S(Rk),n=S(fe),r=S(ut);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=t;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=Ak(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),Ak(+a[0])]);break;default:throw new L(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(Un(5604,!1)))})})}function Ak(t){return new Promise(e=>setTimeout(e,t))}function f5(t,e){return new Wa(t.enabled!==!1?navigator.serviceWorker:void 0,e)}var Il=class{enabled;updateViaCache;type;scope;registrationStrategy};function Mk(t,e={}){return Ke([l5,d5,{provide:Rk,useValue:t},{provide:Il,useValue:e},{provide:Wa,useFactory:f5,deps:[Il,xe]},Hh(h5)])}var Nk={production:!0,firebase:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}};var Pk={providers:[yy(),n_(),eE(Sk),FR(kR()),Mk("ngsw-worker.js",{enabled:!nu(),registrationStrategy:"registerWhenStable:30000"}),ON(()=>xN(Nk.firebase)),mk(()=>Tk()),OP(()=>xP())]};var Ok=()=>({exact:!0}),wg=class t{authService=S(Vi);isMobileMenuOpen=Oe(!1);toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}logout(){this.closeMobileMenu(),this.authService.logout()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-header"]],decls:48,vars:12,consts:[[1,"mobile-navbar","d-lg-none"],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","py-3"],[1,"app-title","mb-0"],[1,"bi","bi-car-front-fill","me-2"],["type","button",1,"btn","btn-link","menu-toggle",3,"click"],[1,"bi"],[1,"mobile-menu-overlay",3,"click"],[1,"mobile-menu"],[1,"nav","flex-column"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"click","routerLinkActiveOptions"],[1,"bi","bi-house-fill","me-2"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link",3,"click"],[1,"bi","bi-card-list","me-2"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link",3,"click"],[1,"bi","bi-plus-circle-fill","me-2"],[1,"nav-divider"],["type","button",1,"nav-link","logout-link",3,"click"],[1,"bi","bi-box-arrow-right","me-2"],[1,"sidebar","d-none","d-lg-flex"],[1,"sidebar-header"],[1,"app-title"],[1,"bi","bi-car-front-fill"],[1,"ms-2"],[1,"sidebar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"ms-3"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-plus-circle-fill"],[1,"sidebar-footer"],["type","button",1,"logout-btn",3,"click"],[1,"bi","bi-box-arrow-right"]],template:function(n,r){n&1&&(oe(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3),Te(4,"i",4),ve(5," Car Handler "),ye(),oe(6,"button",5),Ze("click",function(){return r.toggleMobileMenu()}),Te(7,"i",6),ye()()()(),oe(8,"div",7),Ze("click",function(){return r.closeMobileMenu()}),ye(),oe(9,"div",8)(10,"nav",9)(11,"a",10),Ze("click",function(){return r.closeMobileMenu()}),Te(12,"i",11),ve(13," Homepage "),ye(),oe(14,"a",12),Ze("click",function(){return r.closeMobileMenu()}),Te(15,"i",13),ve(16," Elenco Auto "),ye(),oe(17,"a",14),Ze("click",function(){return r.closeMobileMenu()}),Te(18,"i",15),ve(19," Nuova Auto "),ye(),Te(20,"div",16),oe(21,"button",17),Ze("click",function(){return r.logout()}),Te(22,"i",18),ve(23," Logout "),ye()()(),oe(24,"aside",19)(25,"div",20)(26,"h1",21),Te(27,"i",22),oe(28,"span",23),ve(29,"Car Handler"),ye()()(),oe(30,"nav",24)(31,"a",25),Te(32,"i",26),oe(33,"span",27),ve(34,"Homepage"),ye()(),oe(35,"a",28),Te(36,"i",29),oe(37,"span",27),ve(38,"Elenco Auto"),ye()(),oe(39,"a",30),Te(40,"i",31),oe(41,"span",27),ve(42,"Nuova Auto"),ye()()(),oe(43,"div",32)(44,"button",33),Ze("click",function(){return r.logout()}),Te(45,"i",34),oe(46,"span",23),ve(47,"Logout"),ye()()()()),n&2&&(Ae(7),nn("bi-list",!r.isMobileMenuOpen())("bi-x-lg",r.isMobileMenuOpen()),Ae(),nn("show",r.isMobileMenuOpen()),Ae(),nn("show",r.isMobileMenuOpen()),Ae(2),hi("routerLinkActiveOptions",zh(10,Ok)),Ae(20),hi("routerLinkActiveOptions",zh(11,Ok)))},dependencies:[fa,X_,gi],styles:['.mobile-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 10px #0000001a;z-index:1030}.mobile-navbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.5px}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;padding:0;border:none;transition:transform .3s ease}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.mobile-menu-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease;z-index:1031}.mobile-menu-overlay.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:0;right:-280px;width:280px;height:100vh;background:#fff;box-shadow:-2px 0 10px #0000001a;transition:right .3s cubic-bezier(.4,0,.2,1);z-index:1032;padding-top:80px}.mobile-menu.show[_ngcontent-%COMP%]{right:0}.mobile-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#4a5568;font-weight:500;text-decoration:none;transition:all .3s ease;border-left:3px solid transparent}.mobile-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease}.mobile-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background:#667eea1a;color:#667eea;transform:translate(5px)}.mobile-menu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.mobile-menu[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea26,#667eea0d);color:#667eea;border-left-color:#667eea;font-weight:600}.mobile-menu[_ngcontent-%COMP%]   .nav-divider[_ngcontent-%COMP%]{height:1px;background:#0000001a;margin:.5rem 1.5rem}.mobile-menu[_ngcontent-%COMP%]   .logout-link[_ngcontent-%COMP%]{color:#dc3545!important;border:none;background:transparent;text-align:left;width:100%}.mobile-menu[_ngcontent-%COMP%]   .logout-link[_ngcontent-%COMP%]:hover{background:#dc35451a!important;color:#dc3545!important}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background:linear-gradient(180deg,#667eea,#764ba2);box-shadow:2px 0 15px #0000001a;flex-direction:column;z-index:1000;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;letter-spacing:-.5px;margin:0}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#fffc;font-weight:500;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border-left:3px solid transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:0;height:100%;background:#ffffff1a;transition:width .3s ease;z-index:0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background:#ffffff26;border-left-color:#fff;font-weight:600;box-shadow:inset 0 0 15px #0000001a}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 10px #ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:.875rem 1rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}']})};var Tg=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-footer"]],decls:2,vars:0,template:function(n,r){n&1&&(Zn(0,"p"),ve(1,"footer works!"),Jn())},encapsulation:2})};function p5(t,e){t&1&&Te(0,"app-header")}function g5(t,e){t&1&&Te(0,"app-footer")}var bg=class t{router=S(qt);title=Oe("car-handler-pwa");isLoginPage=Oe(!1);constructor(){this.checkRoute(this.router.url),this.router.events.pipe(We(e=>e instanceof sn)).subscribe(e=>{this.checkRoute(e.url)})}checkRoute(e){this.isLoginPage.set(e.includes("/login"))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Et({type:t,selectors:[["app-root"]],decls:4,vars:4,template:function(n,r){n&1&&(Ar(0,p5,1,0,"app-header"),oe(1,"main"),Te(2,"router-outlet"),ye(),Ar(3,g5,1,0,"app-footer")),n&2&&(Rr(r.isLoginPage()?-1:0),Ae(),nn("login-main",r.isLoginPage()),Ae(2),Rr(r.isLoginPage()?-1:3))},dependencies:[Du,wg,Tg,gi],styles:["main[_ngcontent-%COMP%]{padding:2rem 0}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-left:280px;min-height:100vh}}@media (max-width: 991.98px){main[_ngcontent-%COMP%]{margin-top:70px;min-height:calc(100vh - 70px)}}main.login-main[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh}"]})};D_(bg,Pk).catch(t=>console.error(t));
