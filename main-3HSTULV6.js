var R2=Object.defineProperty,P2=Object.defineProperties;var x2=Object.getOwnPropertyDescriptors;var rh=Object.getOwnPropertySymbols;var fD=Object.prototype.hasOwnProperty,pD=Object.prototype.propertyIsEnumerable;var hD=(t,e,n)=>e in t?R2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})fD.call(e,n)&&hD(t,n,e[n]);if(rh)for(var n of rh(e))pD.call(e,n)&&hD(t,n,e[n]);return t},re=(t,e)=>P2(t,x2(e));var gD=(t,e)=>{var n={};for(var r in t)fD.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rh)for(var r of rh(t))e.indexOf(r)<0&&pD.call(t,r)&&(n[r]=t[r]);return n};var H_;function ih(){return H_}function Mr(t){let e=H_;return H_=t,e}var mD=Symbol("NotFound");function oa(t){return t===mD||t?.name==="\u0275NotFound"}var nn=null,oh=!1,q_=1,O2=null,rn=Symbol("SIGNAL");function me(t){let e=nn;return nn=t,e}function lh(){return nn}var sa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function aa(t){if(oh)throw new Error("");if(nn===null)return;nn.consumerOnSignalRead(t);let e=nn.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=nn.recomputing;if(r&&(n=e!==void 0?e.nextProducer:nn.producers,n!==void 0&&n.producer===t)){nn.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===nn&&(!r||k2(i,nn)))return;let o=la(nn),s={producer:t,consumer:nn,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};nn.producersTail=s,e!==void 0?e.nextProducer=s:nn.producers=s,o&&ED(t,s)}function _D(){q_++}function uh(t){if(!(la(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===q_)){if(!t.producerMustRecompute(t)&&!gl(t)){ch(t);return}t.producerRecomputeValue(t),ch(t)}}function W_(t){if(t.consumers===void 0)return;let e=oh;oh=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||N2(r)}}finally{oh=e}}function G_(){return nn?.consumerAllowSignalWrites!==!1}function N2(t){t.dirty=!0,W_(t),t.consumerMarkedDirty?.(t)}function ch(t){t.dirty=!1,t.lastCleanEpoch=q_}function ca(t){return t&&vD(t),me(t)}function vD(t){t.producersTail=void 0,t.recomputing=!0}function pl(t,e){me(e),t&&yD(t)}function yD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(la(t))do n=K_(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function gl(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(uh(n),r!==n.version))return!0}return!1}function ml(t){if(la(t)){let e=t.producers;for(;e!==void 0;)e=K_(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function ED(t,e){let n=t.consumersTail,r=la(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)ED(i.producer,i)}function K_(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!la(e)){let o=e.producers;for(;o!==void 0;)o=K_(o)}return n}function la(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function dh(t){O2?.(t)}function k2(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function hh(t,e){return Object.is(t,e)}function fh(t,e){let n=Object.create(F2);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(uh(n),aa(n),n.value===fl)throw n.error;return n.value};return r[rn]=n,dh(n),r}var sh=Symbol("UNSET"),ah=Symbol("COMPUTING"),fl=Symbol("ERRORED"),F2=re(L({},sa),{value:sh,dirty:!0,error:null,equal:hh,kind:"computed",producerMustRecompute(t){return t.value===sh||t.value===ah},producerRecomputeValue(t){if(t.value===ah)throw new Error("");let e=t.value;t.value=ah;let n=ca(t),r,i=!1;try{r=t.computation(),me(null),i=e!==sh&&e!==fl&&r!==fl&&t.equal(e,r)}catch(o){r=fl,t.error=o}finally{pl(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function L2(){throw new Error}var CD=L2;function wD(t){CD(t)}function Y_(t){CD=t}var V2=null;function Q_(t,e){let n=Object.create(ph);n.value=t,e!==void 0&&(n.equal=e);let r=()=>bD(n);return r[rn]=n,dh(n),[r,s=>ua(n,s),s=>Z_(n,s)]}function bD(t){return aa(t),t.value}function ua(t,e){G_()||wD(t),t.equal(t.value,e)||(t.value=e,U2(t))}function Z_(t,e){G_()||wD(t),ua(t,e(t.value))}var ph=re(L({},sa),{equal:hh,value:void 0,kind:"signal"});function U2(t){t.version++,_D(),W_(t),V2?.(t)}function we(t){return typeof t=="function"}function da(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gh=da(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ho(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var dt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(we(r))try{r()}catch(o){e=o instanceof gh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ID(o)}catch(s){e=e??[],s instanceof gh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ID(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ho(n,e)}remove(e){let{_finalizers:n}=this;n&&Ho(n,e),e instanceof t&&e._removeParent(this)}};dt.EMPTY=(()=>{let t=new dt;return t.closed=!0,t})();var J_=dt.EMPTY;function mh(t){return t instanceof dt||t&&"closed"in t&&we(t.remove)&&we(t.add)&&we(t.unsubscribe)}function ID(t){we(t)?t():t.unsubscribe()}var hr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ha={setTimeout(t,e,...n){let{delegate:r}=ha;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ha;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function _h(t){ha.setTimeout(()=>{let{onUnhandledError:e}=hr;if(e)e(t);else throw t})}function qo(){}var TD=X_("C",void 0,void 0);function DD(t){return X_("E",void 0,t)}function SD(t){return X_("N",t,void 0)}function X_(t,e,n){return{kind:t,value:e,error:n}}var Wo=null;function fa(t){if(hr.useDeprecatedSynchronousErrorHandling){let e=!Wo;if(e&&(Wo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Wo;if(Wo=null,n)throw r}}else t()}function AD(t){hr.useDeprecatedSynchronousErrorHandling&&Wo&&(Wo.errorThrown=!0,Wo.error=t)}var Go=class extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mh(e)&&e.add(this)):this.destination=B2}static create(e,n,r){return new pa(e,n,r)}next(e){this.isStopped?tv(SD(e),this):this._next(e)}error(e){this.isStopped?tv(DD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tv(TD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j2=Function.prototype.bind;function ev(t,e){return j2.call(t,e)}var nv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vh(r)}else vh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vh(n)}}},pa=class extends Go{constructor(e,n,r){super();let i;if(we(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&hr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ev(e.next,o),error:e.error&&ev(e.error,o),complete:e.complete&&ev(e.complete,o)}):i=e}this.destination=new nv(i)}};function vh(t){hr.useDeprecatedSynchronousErrorHandling?AD(t):_h(t)}function z2(t){throw t}function tv(t,e){let{onStoppedNotification:n}=hr;n&&ha.setTimeout(()=>n(t,e))}var B2={closed:!0,next:qo,error:z2,complete:qo};var ga=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(t){return t}function yh(...t){return rv(t)}function rv(t){return t.length===0?Rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=H2(n)?n:new pa(n,r,i);return fa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=MD(r),new r((i,o)=>{let s=new pa({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ga](){return this}pipe(...n){return rv(n)(this)}toPromise(n){return n=MD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function MD(t){var e;return(e=t??hr.Promise)!==null&&e!==void 0?e:Promise}function $2(t){return t&&we(t.next)&&we(t.error)&&we(t.complete)}function H2(t){return t&&t instanceof Go||$2(t)&&mh(t)}function iv(t){return we(t?.lift)}function Ne(t){return e=>{if(iv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pe(t,e,n,r,i){return new ov(t,e,n,r,i)}var ov=class extends Go{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ma(){return Ne((t,e)=>{let n=null;t._refCount++;let r=Pe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _a=class extends fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,iv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;let n=this.getSubject();e.add(this.source.subscribe(Pe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return ma()(this)}};var RD=da(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Eh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new RD}next(n){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?J_:(this.currentObservers=null,o.push(n),new dt(()=>{this.currentObservers=null,Ho(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new fe;return n.source=this,n}}return t.create=(e,n)=>new Eh(e,n),t})(),Eh=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:J_}};var qt=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sv={now(){return(sv.delegate||Date).now()},delegate:void 0};var Ch=class extends dt{constructor(e,n){super()}schedule(e,n=0){return this}};var _l={setInterval(t,e,...n){let{delegate:r}=_l;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=_l;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var va=class extends Ch{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return _l.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&_l.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ho(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ya=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ya.now=sv.now;var Ea=class extends ya{constructor(e,n=ya.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var av=new Ea(va);var wh=class extends va{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var bh=class extends Ea{};var cv=new bh(wh);var bn=new fe(t=>t.complete());function PD(t){return t&&we(t.schedule)}function xD(t){return t[t.length-1]}function Ih(t){return we(xD(t))?t.pop():void 0}function Qi(t){return PD(xD(t))?t.pop():void 0}function lv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ND(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function c(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function OD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(t){return this instanceof Ko?(this.v=t,this):new Ko(t)}function kD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(k){return new Promise(function(N,B){o.push([y,k,N,B])>1||c(y,k)})},T&&(i[y]=T(i[y])))}function c(y,T){try{u(r[y](T))}catch(k){_(o[0][3],k)}}function u(y){y.value instanceof Ko?Promise.resolve(y.value.v).then(h,p):_(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function _(y,T){y(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function FD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OD=="function"?OD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Th=t=>t&&typeof t.length=="number"&&typeof t!="function";function Dh(t){return we(t?.then)}function Sh(t){return we(t[ga])}function Ah(t){return Symbol.asyncIterator&&we(t?.[Symbol.asyncIterator])}function Mh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function q2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rh=q2();function Ph(t){return we(t?.[Rh])}function xh(t){return kD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ko(n.read());if(i)return yield Ko(void 0);yield yield Ko(r)}}finally{n.releaseLock()}})}function Oh(t){return we(t?.getReader)}function Et(t){if(t instanceof fe)return t;if(t!=null){if(Sh(t))return W2(t);if(Th(t))return G2(t);if(Dh(t))return K2(t);if(Ah(t))return LD(t);if(Ph(t))return Y2(t);if(Oh(t))return Q2(t)}throw Mh(t)}function W2(t){return new fe(e=>{let n=t[ga]();if(we(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function G2(t){return new fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function K2(t){return new fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_h)})}function Y2(t){return new fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function LD(t){return new fe(e=>{Z2(t,e).catch(n=>e.error(n))})}function Q2(t){return LD(xh(t))}function Z2(t,e){var n,r,i,o;return ND(this,void 0,void 0,function*(){try{for(n=FD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function In(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Zi(t,e=0){return Ne((n,r)=>{n.subscribe(Pe(r,i=>In(r,t,()=>r.next(i),e),()=>In(r,t,()=>r.complete(),e),i=>In(r,t,()=>r.error(i),e)))})}function Ji(t,e=0){return Ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function VD(t,e){return Et(t).pipe(Ji(e),Zi(e))}function UD(t,e){return Et(t).pipe(Ji(e),Zi(e))}function jD(t,e){return new fe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zD(t,e){return new fe(n=>{let r;return In(n,e,()=>{r=t[Rh](),In(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>we(r?.return)&&r.return()})}function Nh(t,e){if(!t)throw new Error("Iterable cannot be null");return new fe(n=>{In(n,e,()=>{let r=t[Symbol.asyncIterator]();In(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function BD(t,e){return Nh(xh(t),e)}function $D(t,e){if(t!=null){if(Sh(t))return VD(t,e);if(Th(t))return jD(t,e);if(Dh(t))return UD(t,e);if(Ah(t))return Nh(t,e);if(Ph(t))return zD(t,e);if(Oh(t))return BD(t,e)}throw Mh(t)}function Te(t,e){return e?$D(t,e):Et(t)}function oe(...t){let e=Qi(t);return Te(t,e)}function Ca(t,e){let n=we(t)?t:()=>t,r=i=>i.error(n());return new fe(e?i=>e.schedule(r,0,i):r)}function uv(t){return!!t&&(t instanceof fe||we(t.lift)&&we(t.subscribe))}var pi=da(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(t,e){return Ne((n,r)=>{let i=0;n.subscribe(Pe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:J2}=Array;function X2(t,e){return J2(e)?t(...e):t(e)}function kh(t){return ie(e=>X2(t,e))}var{isArray:eV}=Array,{getPrototypeOf:tV,prototype:nV,keys:rV}=Object;function Fh(t){if(t.length===1){let e=t[0];if(eV(e))return{args:e,keys:null};if(iV(e)){let n=rV(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function iV(t){return t&&typeof t=="object"&&tV(t)===nV}function Lh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Vh(...t){let e=Qi(t),n=Ih(t),{args:r,keys:i}=Fh(t);if(r.length===0)return Te([],e);let o=new fe(oV(r,e,i?s=>Lh(i,s):Rn));return n?o.pipe(kh(n)):o}function oV(t,e,n=Rn){return r=>{HD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)HD(e,()=>{let u=Te(t[c],e),h=!1;u.subscribe(Pe(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function HD(t,e,n){t?In(n,t,e):e()}function qD(t,e,n,r,i,o,s,a){let c=[],u=0,h=0,p=!1,_=()=>{p&&!c.length&&!u&&e.complete()},y=k=>u<r?T(k):c.push(k),T=k=>{o&&e.next(k),u++;let N=!1;Et(n(k,h++)).subscribe(Pe(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let B=c.shift();s?In(e,s,()=>T(B)):T(B)}_()}catch(B){e.error(B)}}))};return t.subscribe(Pe(e,y,()=>{p=!0,_()})),()=>{a?.()}}function Ct(t,e,n=1/0){return we(e)?Ct((r,i)=>ie((o,s)=>e(r,o,i,s))(Et(t(r,i))),n):(typeof e=="number"&&(n=e),Ne((r,i)=>qD(r,i,t,n)))}function wa(t=1/0){return Ct(Rn,t)}function WD(){return wa(1)}function ba(...t){return WD()(Te(t,Qi(t)))}function vl(t){return new fe(e=>{Et(t()).subscribe(e)})}function dv(...t){let e=Ih(t),{args:n,keys:r}=Fh(t),i=new fe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let p=!1;Et(n[h]).subscribe(Pe(o,_=>{p||(p=!0,u--),a[h]=_},()=>c--,void 0,()=>{(!c||!p)&&(u||o.next(r?Lh(r,a):a),o.complete())}))}});return e?i.pipe(kh(e)):i}var gi=new fe(qo);function wt(t,e){return Ne((n,r)=>{let i=0;n.subscribe(Pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Wt(t){return Ne((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Pe(n,void 0,void 0,s=>{o=Et(t(s,Wt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function GD(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Pe(s,h=>{let p=u++;c=a?t(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Yo(t,e){return we(e)?Ct(t,e,1):Ct(t,1)}function Xi(t){return Ne((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function gn(t){return t<=0?()=>bn:Ne((e,n)=>{let r=0;e.subscribe(Pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Uh(t=sV){return Ne((e,n)=>{let r=!1;e.subscribe(Pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sV(){return new pi}function yl(t){return Ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mi(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,o)=>t(i,o,r)):Rn,gn(1),n?Xi(e):Uh(()=>new pi))}function Ia(t){return t<=0?()=>bn:Ne((e,n)=>{let r=[];e.subscribe(Pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function hv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,o)=>t(i,o,r)):Rn,Ia(1),n?Xi(e):Uh(()=>new pi))}function jh(t,e){return Ne(GD(t,e,arguments.length>=2,!0))}function zh(...t){let e=Qi(t);return Ne((n,r)=>{(e?ba(t,n,e):ba(t,n)).subscribe(r)})}function ot(t,e){return Ne((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Pe(r,c=>{i?.unsubscribe();let u=0,h=o++;Et(t(c,h)).subscribe(i=Pe(r,p=>r.next(e?e(c,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bh(t){return Ne((e,n)=>{Et(t).subscribe(Pe(n,()=>n.complete(),qo)),!n.closed&&e.subscribe(n)})}function kt(t,e,n){let r=we(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Pe(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Rn}function KD(t){let e=me(null);try{return t()}finally{me(e)}}var eo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Tv=new eo("20.3.15");var Wh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",G=class extends Error{code;constructor(e,n){super(pr(e,n)),this.code=e}};function aV(t){return`NG0${Math.abs(t)}`}function pr(t,e){return`${aV(t)}${e?": "+e:""}`}var Pr=globalThis;function Be(t){for(let e in t)if(t[e]===Be)return e;throw Error("")}function ZD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vi(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(vi).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Dv(t,e){return t?e?`${t} ${e}`:t:e||""}var cV=Be({__forward_ref__:Be});function _n(t){return t.__forward_ref__=_n,t.toString=function(){return vi(this())},t}function Gt(t){return Sv(t)?t():t}function Sv(t){return typeof t=="function"&&t.hasOwnProperty(cV)&&t.__forward_ref__===_n}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gr(t){return{providers:t.providers||[],imports:t.imports||[]}}function bl(t){return lV(t,Gh)}function Av(t){return bl(t)!==null}function lV(t,e){return t.hasOwnProperty(e)&&t[e]||null}function uV(t){let e=t?.[Gh]??null;return e||null}function pv(t){return t&&t.hasOwnProperty(Hh)?t[Hh]:null}var Gh=Be({\u0275prov:Be}),Hh=Be({\u0275inj:Be}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Mv(t){return t&&!!t.\u0275providers}var Rv=Be({\u0275cmp:Be}),Pv=Be({\u0275dir:Be}),xv=Be({\u0275pipe:Be}),Ov=Be({\u0275mod:Be}),Cl=Be({\u0275fac:Be}),es=Be({__NG_ELEMENT_ID__:Be}),YD=Be({__NG_ENV_ID__:Be});function ts(t){return typeof t=="string"?t:t==null?"":String(t)}function JD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ts(t)}var XD=Be({ngErrorCode:Be}),dV=Be({ngErrorMessage:Be}),hV=Be({ngTokenPath:Be});function Nv(t,e){return eS("",-200,e)}function Kh(t,e){throw new G(-201,!1)}function eS(t,e,n){let r=new G(e,t);return r[XD]=e,r[dV]=t,n&&(r[hV]=n),r}function fV(t){return t[XD]}var gv;function tS(){return gv}function mn(t){let e=gv;return gv=t,e}function kv(t,e,n){let r=bl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Kh(t,"Injector")}var pV={},Qo=pV,mv="__NG_DI_FLAG__",_v=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Zo(n)||0;try{return this.injector.get(e,r&8?null:Qo,r)}catch(i){if(oa(i))return i;throw i}}};function gV(t,e=0){let n=ih();if(n===void 0)throw new G(-203,!1);if(n===null)return kv(t,void 0,e);{let r=mV(e),i=n.retrieve(t,r);if(oa(i)){if(r.optional)return null;throw i}return i}}function ve(t,e=0){return(tS()||gV)(Gt(t),e)}function R(t,e){return ve(t,Zo(e))}function Zo(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mV(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function vv(t){let e=[];for(let n=0;n<t.length;n++){let r=Gt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=_V(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ve(i,o))}else e.push(ve(r))}return e}function nS(t,e){return t[mv]=e,t.prototype[mv]=e,t}function _V(t){return t[mv]}function to(t,e){let n=t.hasOwnProperty(Cl);return n?t[Cl]:null}function rS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function iS(t){return t.flat(Number.POSITIVE_INFINITY)}function Yh(t,e){t.forEach(n=>Array.isArray(n)?Yh(n,e):e(n))}function Fv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Il(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function sS(t,e,n){let r=Da(t,e);return r>=0?t[r|1]=n:(r=~r,oS(t,r,e,n)),r}function Qh(t,e){let n=Da(t,e);if(n>=0)return t[n|1]}function Da(t,e){return vV(t,e,1)}function vV(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ro={},Pn=[],Jn=new K(""),Lv=new K("",-1),Vv=new K(""),wl=class{get(e,n=Qo){if(n===Qo){let i=eS("",-201);throw i.name="\u0275NotFound",i}return n}};function Uv(t){return t[Ov]||null}function yi(t){return t[Rv]||null}function Zh(t){return t[Pv]||null}function jv(t){return t[xv]||null}function ht(t){return{\u0275providers:t}}function aS(t){return ht([{provide:Jn,multi:!0,useValue:t}])}function cS(...t){return{\u0275providers:Jh(!0,t),\u0275fromNgModule:!0}}function Jh(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Yh(e,s=>{let a=s;qh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lS(i,o),n}function lS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zv(i,o=>{e(o,r)})}}function qh(t,e,n,r){if(t=Gt(t),!t)return!1;let i=null,o=pv(t),s=!o&&yi(t);if(!o&&!s){let c=t.ngModule;if(o=pv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)qh(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Yh(o.imports,h=>{qh(h,e,n,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&lS(u,e)}if(!a){let u=to(i)||(()=>new i);e({provide:i,useFactory:u,deps:Pn},i),e({provide:Vv,useValue:i,multi:!0},i),e({provide:Jn,useValue:()=>ve(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;zv(c,h=>{e(h,u)})}}else return!1;return i!==t&&t.providers!==void 0}function zv(t,e){for(let n of t)Mv(n)&&(n=n.\u0275providers),Array.isArray(n)?zv(n,e):e(n)}var yV=Be({provide:String,useValue:Be});function uS(t){return t!==null&&typeof t=="object"&&yV in t}function EV(t){return!!(t&&t.useExisting)}function CV(t){return!!(t&&t.useFactory)}function Jo(t){return typeof t=="function"}function dS(t){return!!t.useClass}var Tl=new K(""),$h={},QD={},fv;function Dl(){return fv===void 0&&(fv=new wl),fv}var gt=class{},Xo=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ev(e,s=>this.processProvider(s)),this.records.set(Lv,Ta(void 0,this)),i.has("environment")&&this.records.set(gt,Ta(void 0,this));let o=this.records.get(Tl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Vv,Pn,{self:!0}))}retrieve(e,n){let r=Zo(n)||0;try{return this.get(e,Qo,r)}catch(i){if(oa(i))return i;throw i}}destroy(){El(this),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return El(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){El(this);let n=Mr(this),r=mn(void 0),i;try{return e()}finally{Mr(n),mn(r)}}get(e,n=Qo,r){if(El(this),e.hasOwnProperty(YD))return e[YD](this);let i=Zo(r),o,s=Mr(this),a=mn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=DV(e)&&bl(e);h&&this.injectableDefInScope(h)?u=Ta(yv(e),$h):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Dl():this.parent;return n=i&8&&n===Qo?null:n,c.get(e,n)}catch(c){let u=fV(c);throw u===-200||u===-201?new G(u,null):c}finally{mn(a),Mr(s)}}resolveInjectorInitializers(){let e=me(null),n=Mr(this),r=mn(void 0),i;try{let o=this.get(Jn,Pn,{self:!0});for(let s of o)s()}finally{Mr(n),mn(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(vi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Gt(e);let n=Jo(e)?e:Gt(e&&e.provide),r=bV(e);if(!Jo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ta(void 0,$h,!0),i.factory=()=>vv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=me(null);try{if(n.value===QD)throw Nv(vi(e));return n.value===$h&&(n.value=QD,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&TV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Gt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function yv(t){let e=bl(t),n=e!==null?e.factory:to(t);if(n!==null)return n;if(t instanceof K)throw new G(204,!1);if(t instanceof Function)return wV(t);throw new G(204,!1)}function wV(t){if(t.length>0)throw new G(204,!1);let n=uV(t);return n!==null?()=>n.factory(t):()=>new t}function bV(t){if(uS(t))return Ta(void 0,t.useValue);{let e=Bv(t);return Ta(e,$h)}}function Bv(t,e,n){let r;if(Jo(t)){let i=Gt(t);return to(i)||yv(i)}else if(uS(t))r=()=>Gt(t.useValue);else if(CV(t))r=()=>t.useFactory(...vv(t.deps||[]));else if(EV(t))r=(i,o)=>ve(Gt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Gt(t&&(t.useClass||t.provide));if(IV(t))r=()=>new i(...vv(t.deps));else return to(i)||yv(i)}return r}function El(t){if(t.destroyed)throw new G(205,!1)}function Ta(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function IV(t){return!!t.deps}function TV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function DV(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Ev(t,e){for(let n of t)Array.isArray(n)?Ev(n,e):n&&Mv(n)?Ev(n.\u0275providers,e):e(n)}function bt(t,e){let n;t instanceof Xo?(El(t),n=t):n=new _v(t);let r,i=Mr(n),o=mn(void 0);try{return e()}finally{Mr(i),mn(o)}}function hS(){return tS()!==void 0||ih()!=null}var vn=0,se=1,_e=2,mt=3,Xn=4,er=5,Tn=6,Sa=7,_t=8,xn=9,xr=10,He=11,Aa=12,$v=13,ns=14,yn=15,io=16,rs=17,Or=18,Sl=19,Hv=20,_i=21,Xh=22,Al=23,On=24,is=25,os=26,Qe=27,fS=1,mr=6,Nr=7,Ml=8,ss=9,ct=10;function Nn(t){return Array.isArray(t)&&typeof t[fS]=="object"}function kn(t){return Array.isArray(t)&&t[fS]===!0}function qv(t){return(t.flags&4)!==0}function Ei(t){return t.componentOffset>-1}function ef(t){return(t.flags&1)===1}function kr(t){return!!t.template}function as(t){return(t[_e]&512)!==0}function oo(t){return(t[_e]&256)===256}var pS="svg",gS="math";function Fn(t){for(;Array.isArray(t);)t=t[vn];return t}function Wv(t,e){return Fn(e[t])}function tr(t,e){return Fn(e[t.index])}function cs(t,e){return t.data[e]}function mS(t,e){return t[e]}function Gv(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function nr(t,e){let n=e[t];return Nn(n)?n:n[vn]}function _S(t){return(t[_e]&4)===4}function tf(t){return(t[_e]&128)===128}function vS(t){return kn(t[mt])}function so(t,e){return e==null?null:t[e]}function Kv(t){t[rs]=0}function Yv(t){t[_e]&1024||(t[_e]|=1024,tf(t)&&Ma(t))}function yS(t,e){for(;t>0;)e=e[ns],t--;return e}function Rl(t){return!!(t[_e]&9216||t[On]?.dirty)}function nf(t){t[xr].changeDetectionScheduler?.notify(8),t[_e]&64&&(t[_e]|=1024),Rl(t)&&Ma(t)}function Ma(t){t[xr].changeDetectionScheduler?.notify(0);let e=no(t);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!tf(e)));)e=no(e)}function Qv(t,e){if(oo(t))throw new G(911,!1);t[_i]===null&&(t[_i]=[]),t[_i].push(e)}function ES(t,e){if(t[_i]===null)return;let n=t[_i].indexOf(e);n!==-1&&t[_i].splice(n,1)}function no(t){let e=t[mt];return kn(e)?e[mt]:e}function Zv(t){return t[Sa]??=[]}function Jv(t){return t.cleanup??=[]}function CS(t,e,n,r){let i=Zv(e);i.push(n),t.firstCreatePass&&Jv(t).push(r,i.length-1)}var De={lFrame:VS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Cv=!1;function wS(){return De.lFrame.elementDepthCount}function bS(){De.lFrame.elementDepthCount++}function IS(){De.lFrame.elementDepthCount--}function TS(){return De.bindingsEnabled}function Xv(){return De.skipHydrationRootTNode!==null}function DS(t){return De.skipHydrationRootTNode===t}function SS(t){De.skipHydrationRootTNode=t}function AS(){De.skipHydrationRootTNode=null}function Se(){return De.lFrame.lView}function Ft(){return De.lFrame.tView}function U(t){return De.lFrame.contextLView=t,t[_t]}function j(t){return De.lFrame.contextLView=null,t}function Kt(){let t=ey();for(;t!==null&&t.type===64;)t=t.parent;return t}function ey(){return De.lFrame.currentTNode}function MS(){let t=De.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ra(t,e){let n=De.lFrame;n.currentTNode=t,n.isParent=e}function ty(){return De.lFrame.isParent}function RS(){De.lFrame.isParent=!1}function ny(){return Cv}function ry(t){let e=Cv;return Cv=t,e}function rf(){let t=De.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function PS(){return De.lFrame.bindingIndex}function xS(t){return De.lFrame.bindingIndex=t}function ls(){return De.lFrame.bindingIndex++}function iy(t){let e=De.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function OS(){return De.lFrame.inI18n}function NS(t,e){let n=De.lFrame;n.bindingIndex=n.bindingRootIndex=t,of(e)}function kS(){return De.lFrame.currentDirectiveIndex}function of(t){De.lFrame.currentDirectiveIndex=t}function FS(t){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function oy(){return De.lFrame.currentQueryIndex}function sf(t){De.lFrame.currentQueryIndex=t}function SV(t){let e=t[se];return e.type===2?e.declTNode:e.type===1?t[er]:null}function sy(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=SV(o),i===null||(o=o[ns],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=De.lFrame=LS();return r.currentTNode=e,r.lView=t,!0}function af(t){let e=LS(),n=t[se];De.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function LS(){let t=De.lFrame,e=t===null?null:t.child;return e===null?VS(t):e}function VS(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function US(){let t=De.lFrame;return De.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ay=US;function cf(){let t=US();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function jS(t){return(De.lFrame.contextLView=yS(t,De.lFrame.contextLView))[_t]}function Ci(){return De.lFrame.selectedIndex}function ao(t){De.lFrame.selectedIndex=t}function lf(){let t=De.lFrame;return cs(t.tView,t.selectedIndex)}function cy(){return De.lFrame.currentNamespace}var zS=!0;function uf(){return zS}function wi(t){zS=t}function wv(t,e=null,n=null,r){let i=ly(t,e,n,r);return i.resolveInjectorInitializers(),i}function ly(t,e=null,n=null,r,i=new Set){let o=[n||Pn,cS(t)];return r=r||(typeof t=="object"?void 0:vi(t)),new Xo(o,e||Dl(),r||null,i)}var We=class t{static THROW_IF_NOT_FOUND=Qo;static NULL=new wl;static create(e,n){if(Array.isArray(e))return wv({name:""},n,e,"");{let r=e.name??"";return wv({name:r},e.parent,e.providers,r)}}static \u0275prov=ee({token:t,providedIn:"any",factory:()=>ve(Lv)});static __NG_ELEMENT_ID__=-1},Pt=new K(""),rr=(()=>{class t{static __NG_ELEMENT_ID__=AV;static __NG_ENV_ID__=n=>n}return t})(),bv=class extends rr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return oo(this._lView)}onDestroy(e){let n=this._lView;return Qv(n,e),()=>ES(n,e)}};function AV(){return new bv(Se())}var fr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},En=new K("",{providedIn:"root",factory:()=>{let t=R(gt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(fr),e.handleError(n))}}}),BS={provide:Jn,useValue:()=>void R(fr),multi:!0},MV=new K("",{providedIn:"root",factory:()=>{let t=R(Pt).defaultView;if(!t)return;let e=R(En),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(rr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function uy(){return ht([aS(()=>void R(MV))])}function dy(t){return typeof t=="function"&&t[rn]!==void 0}function te(t,e){let[n,r,i]=Q_(t,e?.equal),o=n,s=o[rn];return o.set=r,o.update=i,o.asReadonly=$S.bind(o),o}function $S(){let t=this[rn];if(t.readonlyFn===void 0){let e=()=>this();e[rn]=t,t.readonlyFn=e}return t.readonlyFn}function hy(t){return dy(t)&&typeof t.set=="function"}var df=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=RV}return t})();function RV(){return new df(Se(),Kt())}var Rr=class{},Pa=new K("",{providedIn:"root",factory:()=>!1});var fy=new K(""),hf=new K(""),_r=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new qt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),co=(()=>{class t{internalPendingTasks=R(_r);scheduler=R(Rr);errorHandler=R(En);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})();function Pl(...t){}var py=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new Iv})}return t})(),Iv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};var ff={JSACTION:"jsaction"};function za(t){return{toString:t}.toString()}var pf="__parameters__";function VV(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function UV(t,e,n){return za(()=>{let r=VV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,h){let p=c.hasOwnProperty(pf)?c[pf]:Object.defineProperty(c,pf,{value:[]})[pf];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var xt=nS(UV("Optional"),8);function jV(t){return typeof t=="function"}var If=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function xA(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Ur=(()=>{let t=()=>OA;return t.ngInherit=!0,t})();function OA(t){return t.type.prototype.ngOnChanges&&(t.setInput=BV),zV}function zV(){let t=kA(this),e=t?.current;if(e){let n=t.previous;if(n===ro)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function BV(t,e,n,r,i){let o=this.declaredInputs[r],s=kA(t)||$V(t,{previous:ro,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new If(u&&u.currentValue,n,c===ro),xA(t,e,i,n)}var NA="__ngSimpleChanges__";function kA(t){return t[NA]||null}function $V(t,e){return t[NA]=e}var HS=[];var Ue=function(t,e=null,n){for(let r=0;r<HS.length;r++){let i=HS[r];i(t,e,n)}};function HV(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=OA(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function qV(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function vf(t,e,n){FA(t,e,3,n)}function yf(t,e,n,r){(t[_e]&3)===n&&FA(t,e,n,r)}function gy(t,e){let n=t[_e];(n&3)===e&&(n&=16383,n+=1,t[_e]=n)}function FA(t,e,n,r){let i=r!==void 0?t[rs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[rs]+=65536),(a<o||o==-1)&&(WV(t,n,e,c),t[rs]=(t[rs]&4294901760)+c+2),c++}function qS(t,e){Ue(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),Ue(5,t,e)}}function WV(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[_e]>>14<t[rs]>>16&&(t[_e]&3)===e&&(t[_e]+=16384,qS(a,o)):qS(a,o)}var Oa=-1,hs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function GV(t){return(t.flags&8)!==0}function KV(t){return(t.flags&16)!==0}function YV(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];QV(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function LA(t){return t===3||t===4||t===6}function QV(t){return t.charCodeAt(0)===64}function Nl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?WS(t,n,i,null,e[++r]):WS(t,n,i,null,null))}}return t}function WS(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function VA(t){return t!==Oa}function Tf(t){return t&32767}function ZV(t){return t>>16}function Df(t,e){let n=ZV(t),r=e;for(;n>0;)r=r[ns],n--;return r}var Ry=!0;function Sf(t){let e=Ry;return Ry=t,e}var JV=256,UA=JV-1,jA=5,XV=0,Fr={};function eU(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(es)&&(r=n[es]),r==null&&(r=n[es]=XV++);let i=r&UA,o=1<<i;e.data[t+(i>>jA)]|=o}function Af(t,e){let n=zA(t,e);if(n!==-1)return n;let r=e[se];r.firstCreatePass&&(t.injectorIndex=e.length,my(r.data,t),my(e,null),my(r.blueprint,null));let i=a0(t,e),o=t.injectorIndex;if(VA(i)){let s=Tf(i),a=Df(i,e),c=a[se].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function my(t,e){t.push(0,0,0,0,0,0,0,0,e)}function zA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function a0(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=WA(i),r===null)return Oa;if(n++,i=i[ns],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oa}function Py(t,e,n){eU(t,e,n)}function tU(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(LA(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function BA(t,e,n){if(n&8||t!==void 0)return t;Kh(e,"NodeInjector")}function $A(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[xn],o=mn(void 0);try{return i?i.get(e,r,n&8):kv(e,r,n&8)}finally{mn(o)}}return BA(r,e,n)}function HA(t,e,n,r=0,i){if(t!==null){if(e[_e]&2048&&!(r&2)){let s=oU(t,e,n,r,Fr);if(s!==Fr)return s}let o=qA(t,e,n,r,Fr);if(o!==Fr)return o}return $A(e,n,r,i)}function qA(t,e,n,r,i){let o=rU(n);if(typeof o=="function"){if(!sy(e,t,r))return r&1?BA(i,n,r):$A(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Kh(n);else return s}finally{ay()}}else if(typeof o=="number"){let s=null,a=zA(t,e),c=Oa,u=r&1?e[yn][er]:null;for((a===-1||r&4)&&(c=a===-1?a0(t,e):e[a+8],c===Oa||!KS(r,!1)?a=-1:(s=e[se],a=Tf(c),e=Df(c,e)));a!==-1;){let h=e[se];if(GS(o,a,h.data)){let p=nU(a,e,n,s,r,u);if(p!==Fr)return p}c=e[a+8],c!==Oa&&KS(r,e[se].data[a+8]===u)&&GS(o,a,e)?(s=h,a=Tf(c),e=Df(c,e)):a=-1}}return i}function nU(t,e,n,r,i,o){let s=e[se],a=s.data[t+8],c=r==null?Ei(a)&&Ry:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=Ef(a,s,n,c,u);return h!==null?kl(e,s,h,a,i):Fr}function Ef(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,h=o>>20,p=r?a:a+h,_=i?a+h:u;for(let y=p;y<_;y++){let T=s[y];if(y<c&&n===T||y>=c&&T.type===n)return y}if(i){let y=s[c];if(y&&kr(y)&&y.type===n)return c}return null}function kl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof hs){let a=o;if(a.resolving){let y=JD(s[n]);throw Nv(y)}let c=Sf(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],h,p=a.injectImpl?mn(a.injectImpl):null,_=sy(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&HV(n,s[n],e)}finally{p!==null&&mn(p),Sf(c),a.resolving=!1,ay()}}return o}function rU(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(es)?t[es]:void 0;return typeof e=="number"?e>=0?e&UA:iU:e}function GS(t,e,n){let r=1<<t;return!!(n[e+(t>>jA)]&r)}function KS(t,e){return!(t&2)&&!(t&1&&e)}var ds=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HA(this._tNode,this._lView,e,Zo(r),n)}};function iU(){return new ds(Kt(),Se())}function Vn(t){return za(()=>{let e=t.prototype.constructor,n=e[Cl]||xy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Cl]||xy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function xy(t){return Sv(t)?()=>{let e=xy(Gt(t));return e&&e()}:to(t)}function oU(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[_e]&2048&&!as(s);){let a=qA(o,s,n,r|2,Fr);if(a!==Fr)return a;let c=o.parent;if(!c){let u=s[Hv];if(u){let h=u.get(n,Fr,r);if(h!==Fr)return h}c=WA(s),s=s[ns]}o=c}return i}function WA(t){let e=t[se],n=e.type;return n===2?e.declTNode:n===1?t[er]:null}function Bl(t){return tU(Kt(),t)}function sU(){return Ba(Kt(),Se())}function Ba(t,e){return new Dn(tr(t,e))}var Dn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=sU}return t})();function aU(t){return t instanceof Dn?t.nativeElement:t}function cU(){return this._results[Symbol.iterator]()}var Mf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new it}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=iS(e);(this._changesDetected=!rS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=cU},GA="ngSkipHydration",lU="ngskiphydration";function KA(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===lU)return!0}return!1}function YA(t){return t.hasAttribute(GA)}function Rf(t){return(t.flags&128)===128}function QA(t){if(Rf(t))return!0;let e=t.parent;for(;e;){if(Rf(t)||KA(e))return!0;e=e.parent}return!1}var c0=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(c0||{}),ZA=new Map,uU=0;function dU(){return uU++}function hU(t){ZA.set(t[Sl],t)}function Oy(t){ZA.delete(t[Sl])}var YS="__ngContext__";function Fa(t,e){Nn(e)?(t[YS]=e[Sl],hU(e)):t[YS]=e}function JA(t){return eM(t[Aa])}function XA(t){return eM(t[Xn])}function eM(t){for(;t!==null&&!kn(t);)t=t[Xn];return t}var Ny;function l0(t){Ny=t}function $l(){if(Ny!==void 0)return Ny;if(typeof document<"u")return document;throw new G(210,!1)}var jr=new K("",{providedIn:"root",factory:()=>fU}),fU="ng",Wf=new K(""),Ii=new K("",{providedIn:"platform",factory:()=>"unknown"});var Gf=new K("",{providedIn:"root",factory:()=>$l().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function pU(){let t=new _s;return t.store=gU($l(),R(jr)),t}var _s=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:pU});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function gU(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var tM="h",nM="b",mU="f",_U="n",rM="e",iM="t",Kf="c",u0="x",Fl="r",oM="i",sM="n",d0="d";var aM="di",cM="s",lM="p";var Hl=new K(""),uM=!1,h0=new K("",{providedIn:"root",factory:()=>uM});var f0=new K(""),dM=!1,hM=new K(""),p0=new K("",{providedIn:"root",factory:()=>new Map});var ql="ngb";var fM=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},pM=(t,e)=>{let n=t,r=n.getAttribute(ql)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var gM=t=>{t.removeAttribute(ff.JSACTION),t.removeAttribute(ql),t.__jsaction_fns=void 0},mM=new K("",{providedIn:"root",factory:()=>({})});function g0(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var ky=new Map;function _M(t,e){return ky.set(t,e),()=>ky.delete(t)}var QS=!1,vM=(t,e,n,r)=>{};function vU(t,e,n,r){vM(t,e,n,r)}function yM(){QS||(vM=(t,e,n,r)=>{let i=t[xn].get(jr);ky.get(i)?.(e,n,r)},QS=!0)}var Yf=new K("");function Qf(t){return(t.flags&32)===32}var yU="__nghData__",m0=yU,EU="__nghDeferData__",EM=EU;var Cf="ngh",CM="nghm",wM=()=>null;function CU(t,e,n=!1){let r=t.getAttribute(Cf);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let h=e.get(_s,null,{optional:!0});h!==null&&(c=h.get(m0,[])[Number(r)])}let u={data:c,firstChild:t.firstChild??null};return n&&(u.firstChild=t,Zf(u,0,t.nextSibling)),a?t.setAttribute(Cf,a):t.removeAttribute(Cf),u}function bM(){wM=CU}function IM(t,e,n=!1){return wM(t,e,n)}function TM(t){let e=t._lView;return e[se].type===2?null:(as(e)&&(e=e[Qe]),e)}function wU(t){return t.textContent?.replace(/\s/gm,"")}function bU(t){let e=$l(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=wU(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Zf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Fy(t,e){return t.segmentHeads?.[e]??null}function DM(t){return t.get(hM,!1,{optional:!0})}function IU(t,e){let n=t.data,r=n[rM]?.[e]??null;return r===null&&n[Kf]?.[e]&&(r=_0(t,e)),r}function SM(t,e){return t.data[Kf]?.[e]??null}function _0(t,e){let n=SM(t,e)??[],r=0;for(let i of n)r+=i[Fl]*(i[u0]??1);return r}function TU(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[d0];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function AM(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[d0];t.disconnectedNodes=n?new Set(n):null}return!!TU(t)?.has(e)}function Jf(t,e){let n=t[Tn];return n!==null&&!Xv()&&!Qf(e)&&!AM(n,e.index-Qe)}function DU(t,e){let n=e.get(Yf),i=e.get(_s).get(EM,{}),o=!1,s=t,a=null,c=[];for(;!o&&s;){o=n.has(s);let u=n.hydrating.get(s);if(a===null&&u!=null){a=u.promise;break}c.unshift(s),s=i[s][lM]}return{parentBlockPromise:a,hydrationQueue:c}}function _y(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===CM}function ZS(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function MM(t){for(let r of t.body.childNodes)if(_y(r))return;let e=ZS(t.body.previousSibling);if(_y(e))return;let n=ZS(t.head.lastChild);if(!_y(n))throw new G(-507,!1)}function RM(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];sf(o),a.contentQueries(2,e[s],s)}}}finally{me(r)}}}function Ly(t,e,n){sf(0);let r=me(null);try{e(t,n)}finally{me(r)}}function PM(t,e,n){if(qv(e)){let r=me(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{me(r)}}}var bi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(bi||{});var gf;function SU(){if(gf===void 0&&(gf=null,Pr.trustedTypes))try{gf=Pr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gf}function JS(t){return SU()?.createScriptURL(t)||t}var Pf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wh})`}};function Wl(t){return t instanceof Pf?t.changingThisBreaksApplicationSecurity:t}function Xf(t,e){let n=xM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Wh})`)}return n===e}function xM(t){return t instanceof Pf&&t.getTypeName()||null}var AU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v0(t){return t=String(t),t.match(AU)?t:"unsafe:"+t}var MU=/^>|^->|<!--|-->|--!>|<!-$/g,RU=/(<|>)/g,PU="\u200B$1\u200B";function xU(t){return t.replace(MU,e=>e.replace(RU,PU))}function OM(t,e){return t.createText(e)}function OU(t,e,n){t.setValue(e,n)}function NM(t,e){return t.createComment(xU(e))}function y0(t,e,n){return t.createElement(e,n)}function xf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function kM(t,e,n){t.appendChild(e,n)}function XS(t,e,n,r,i){r!==null?xf(t,e,n,r,i):kM(t,e,n)}function E0(t,e,n,r){t.removeChild(null,e,n,r)}function FM(t){t.textContent=""}function NU(t,e,n){t.setAttribute(e,"style",n)}function kU(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function LM(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&YV(t,e,r),i!==null&&kU(t,e,i),o!==null&&NU(t,e,o)}var Gl=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Gl||{});function Kl(t){let e=UM();return e?e.sanitize(Gl.URL,t)||"":Xf(t,"URL")?Wl(t):v0(ts(t))}function VM(t){let e=UM();if(e)return JS(e.sanitize(Gl.RESOURCE_URL,t)||"");if(Xf(t,"ResourceURL"))return JS(Wl(t));throw new G(904,!1)}function FU(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?VM:Kl}function C0(t,e,n){return FU(e,n)(t)}function UM(){let t=Se();return t&&t[xr].sanitizer}function jM(t){return t.ownerDocument.body}function zM(t){return t instanceof Function?t():t}function LU(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var BM="ng-template";function VU(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LU(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(w0(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function w0(t){return t.type===4&&t.value!==BM}function UU(t,e,n){let r=t.type===4&&!n?BM:t.value;return e===r}function jU(t,e,n){let r=4,i=t.attrs,o=i!==null?$U(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!vr(r)&&!vr(c))return!1;if(s&&vr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!UU(t,c,n)||c===""&&e.length===1){if(vr(r))return!1;s=!0}}else if(r&8){if(i===null||!VU(t,i,c,n)){if(vr(r))return!1;s=!0}}else{let u=e[++a],h=zU(c,i,w0(t),n);if(h===-1){if(vr(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(vr(r))return!1;s=!0}}}}return vr(r)||s}function vr(t){return(t&1)===0}function zU(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return HU(e,t)}function BU(t,e,n=!1){for(let r=0;r<e.length;r++)if(jU(t,e[r],n))return!0;return!1}function $U(t){for(let e=0;e<t.length;e++){let n=t[e];if(LA(n))return e}return t.length}function HU(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function eA(t,e){return t?":not("+e.trim()+")":e}function qU(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vr(s)&&(e+=eA(o,i),i=""),r=s,o=o||!vr(r);n++}return i!==""&&(e+=eA(o,i)),e}function WU(t){return t.map(qU).join(",")}function GU(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!vr(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Un={};function b0(t,e,n,r,i,o,s,a,c,u,h){let p=Qe+r,_=p+i,y=KU(p,_),T=typeof u=="function"?u():u;return y[se]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function KU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Un);return n}function YU(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=b0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function I0(t,e,n,r,i,o,s,a,c,u,h){let p=e.blueprint.slice();return p[vn]=i,p[_e]=r|4|128|8|64|1024,(u!==null||t&&t[_e]&2048)&&(p[_e]|=2048),Kv(p),p[mt]=p[ns]=t,p[_t]=n,p[xr]=s||t&&t[xr],p[He]=a||t&&t[He],p[xn]=c||t&&t[xn]||null,p[er]=o,p[Sl]=dU(),p[Tn]=h,p[Hv]=u,p[yn]=e.type==2?t[yn]:p,p}function QU(t,e,n){let r=tr(e,t),i=YU(n),o=t[xr].rendererFactory,s=T0(t,I0(t,i,null,$M(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function $M(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function HM(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function T0(t,e){return t[Aa]?t[$v][Xn]=e:t[Aa]=e,t[$v]=e,e}function C(t=1){qM(Ft(),Se(),Ci()+t,!1)}function qM(t,e,n,r){if(!r)if((e[_e]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&yf(e,o,0,n)}ao(n)}var ep=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(ep||{});function Vy(t,e,n,r){let i=me(null);try{let[o,s,a]=t.inputs[n],c=null;(s&ep.SignalBased)!==0&&(c=e[o][rn]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):xA(e,c,o,r)}finally{me(i)}}var Lr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Lr||{}),ZU;function D0(t,e){return ZU(t,e)}var fs=new Set,tp=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(tp||{}),vs=new K(""),tA=new Set;function jn(t){tA.has(t)||(tA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var WM=!1,Uy=class extends it{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,hS()&&(this.destroyRef=R(rr,{optional:!0})??void 0,this.pendingTasks=R(_r,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof dt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},je=Uy;function GM(t){let e,n;function r(){t=Pl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function nA(t){return queueMicrotask(()=>t()),()=>{t=Pl}}var S0="isAngularZone",Of=S0+"_ID",JU=0,xe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=WM}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(S0)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XU,Pl,Pl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XU={};function A0(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ej(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){GM(()=>{t.callbackScheduled=!1,jy(t),t.isCheckStableRunning=!0,A0(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),jy(t)}function tj(t){let e=()=>{ej(t)},n=JU++;t._inner=t._inner.fork({name:"angular",properties:{[S0]:!0,[Of]:n,[Of+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(nj(c))return r.invokeTask(o,s,a,c);try{return rA(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),iA(t)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return rA(t),r.invoke(o,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rj(c)&&e(),iA(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,jy(t),A0(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function jy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function rA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function iA(t){t._nesting--,A0(t)}var Ll=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nj(t){return KM(t,"__ignore_ng_zone__")}function rj(t){return KM(t,"__scheduler_tick__")}function KM(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var M0=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),YM=[0,1,2,3],QM=(()=>{class t{ngZone=R(xe);scheduler=R(Rr);errorHandler=R(fr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(vs,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Ue(16),this.executing=!0;for(let r of YM)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Ue(17)}register(n){let{view:r}=n;r!==void 0?((r[is]??=[]).push(n),Ma(r),r[_e]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(tp.AFTER_NEXT_RENDER,n):n()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})(),Nf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[is];e&&(this.view[is]=e.filter(n=>n!==this))}};function Yl(t,e){let n=e?.injector??R(We);return jn("NgAfterNextRender"),oj(t,n,e,!0)}function ij(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function oj(t,e,n,r){let i=e.get(M0);i.impl??=e.get(QM);let o=e.get(vs,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(rr):null,a=e.get(df,null,{optional:!0}),c=new Nf(i.impl,ij(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var ZM=new K("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function JM(t,e,n){let r=t.get(ZM);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function sj(t,e){let n=t.get(ZM);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function aj(t,e){for(let[n,r]of e)JM(t,r.animateFns)}function oA(t,e,n,r){let i=t?.[os]?.enter;e!==null&&i&&i.has(n.index)&&aj(r,i)}function xa(t,e,n,r,i,o,s,a){if(i!=null){let c,u=!1;kn(i)?c=i:Nn(i)&&(u=!0,i=i[vn]);let h=Fn(i);t===0&&r!==null?(oA(a,r,o,n),s==null?kM(e,r,h):xf(e,r,h,s||null,!0)):t===1&&r!==null?(oA(a,r,o,n),xf(e,r,h,s||null,!0)):t===2?sA(a,o,n,p=>{E0(e,h,u,p)}):t===3&&sA(a,o,n,()=>{e.destroyNode(h)}),c!=null&&Ej(e,t,n,c,o,r,s)}}function cj(t,e){XM(t,e),e[vn]=null,e[er]=null}function lj(t,e,n,r,i,o){r[vn]=i,r[er]=e,rp(t,r,n,1,i,o)}function XM(t,e){e[xr].changeDetectionScheduler?.notify(9),rp(t,e,e[He],2,null,null)}function uj(t){let e=t[Aa];if(!e)return vy(t[se],t);for(;e;){let n=null;if(Nn(e))n=e[Aa];else{let r=e[ct];r&&(n=r)}if(!n){for(;e&&!e[Xn]&&e!==t;)Nn(e)&&vy(e[se],e),e=e[mt];e===null&&(e=t),Nn(e)&&vy(e[se],e),n=e&&e[Xn]}e=n}}function R0(t,e){let n=t[ss],r=n.indexOf(e);n.splice(r,1)}function np(t,e){if(oo(e))return;let n=e[He];n.destroyNode&&rp(t,e,n,3,null,null),uj(e)}function vy(t,e){if(oo(e))return;let n=me(null);try{e[_e]&=-129,e[_e]|=256,e[On]&&ml(e[On]),fj(t,e),hj(t,e),e[se].type===1&&e[He].destroy();let r=e[io];if(r!==null&&kn(e[mt])){r!==e[mt]&&R0(r,e);let i=e[Or];i!==null&&i.detachView(t)}Oy(e)}finally{me(n)}}function sA(t,e,n,r){let i=t?.[os];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&fs.add(t),JM(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:h}=u();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),dj(t,r)}else t&&fs.delete(t),r(!1)},i)}function dj(t,e){let n=t[os]?.running;if(n){n.then(()=>{t[os].running=void 0,fs.delete(t),e(!0)});return}e(!1)}function hj(t,e){let n=t.cleanup,r=e[Sa];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Sa]=null);let i=e[_i];if(i!==null){e[_i]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Al];if(o!==null){e[Al]=null;for(let s of o)s.destroy()}}function fj(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof hs)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ue(4,a,c);try{c.call(a)}finally{Ue(5,a,c)}}else{Ue(4,i,o);try{o.call(i)}finally{Ue(5,i,o)}}}}}function pj(t,e,n){return gj(t,e.parent,n)}function gj(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[vn];if(Ei(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===bi.None||i===bi.Emulated)return null}return tr(r,n)}function mj(t,e,n){return vj(t,e,n)}function _j(t,e,n){return t.type&40?tr(t,n):null}var vj=_j,aA;function P0(t,e,n,r){let i=pj(t,r,e),o=e[He],s=r.parent||e[er],a=mj(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)XS(o,i,n[c],a,!1);else XS(o,i,n,a,!1);aA!==void 0&&aA(o,r,e,n,i)}function xl(t,e){if(e!==null){let n=e.type;if(n&3)return tr(e,t);if(n&4)return zy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return xl(t,r);{let i=t[e.index];return kn(i)?zy(-1,i):Fn(i)}}else{if(n&128)return xl(t,e.next);if(n&32)return D0(e,t)()||Fn(t[e.index]);{let r=e1(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=no(t[yn]);return xl(i,r)}else return xl(t,e.next)}}}return null}function e1(t,e){if(e!==null){let r=t[yn][er],i=e.projection;return r.projection[i]}return null}function zy(t,e){let n=ct+t+1;if(n<e.length){let r=e[n],i=r[se].firstChild;if(i!==null)return xl(r,i)}return e[Nr]}function x0(t,e,n,r,i,o,s){for(;n!=null;){let a=r[xn];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&Fa(Fn(c),r),n.flags|=2),!Qf(n))if(u&8)x0(t,e,n.child,r,i,o,!1),xa(e,t,a,i,c,n,o,r);else if(u&32){let h=D0(n,r),p;for(;p=h();)xa(e,t,a,i,p,n,o,r);xa(e,t,a,i,c,n,o,r)}else u&16?yj(t,e,r,n,i,o):xa(e,t,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function rp(t,e,n,r,i,o){x0(n,r,t.firstChild,e,i,o,!1)}function yj(t,e,n,r,i,o){let s=n[yn],c=s[er].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];xa(e,t,n[xn],i,h,r,o,n)}else{let u=c,h=s[mt];Rf(r)&&(u.flags|=128),x0(t,e,u,h,i,o,!0)}}function Ej(t,e,n,r,i,o,s){let a=r[Nr],c=Fn(r);a!==c&&xa(e,t,n,o,a,i,s);for(let u=ct;u<r.length;u++){let h=r[u];rp(h[se],h,t,e,o,a)}}function Cj(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Lr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Lr.Important),t.setStyle(n,r,i,o))}}function t1(t,e,n,r,i){let o=Ci(),s=r&2;try{ao(-1),s&&e.length>Qe&&qM(t,e,Qe,!1),Ue(s?2:0,i,n),n(r,i)}finally{ao(o),Ue(s?3:1,i,n)}}function n1(t,e,n){Aj(t,e,n),(n.flags&64)===64&&Mj(t,e,n)}function r1(t,e,n=tr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function wj(t,e,n,r){let o=r.get(h0,uM)||n===bi.ShadowDom,s=t.selectRootElement(e,o);return bj(s),s}function bj(t){i1(t)}var i1=()=>null;function Ij(t){YA(t)?FM(t):bU(t)}function o1(){i1=Ij}function Tj(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function s1(t,e,n,r,i,o){let s=e[se];if(N0(t,s,e,n,r)){Ei(t)&&Sj(e,t.index);return}t.type&3&&(n=Tj(n)),Dj(t,e,n,r,i,o)}function Dj(t,e,n,r,i,o){if(t.type&3){let s=tr(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function Sj(t,e){let n=nr(e,t);n[_e]&16||(n[_e]|=64)}function Aj(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ei(n)&&QU(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Af(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=kl(e,t,s,n);if(Fa(c,e),o!==null&&Nj(e,s-r,c,a,n,o),kr(a)){let u=nr(n.index,e);u[_t]=kl(e,t,s,n)}}}function Mj(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=kS();try{ao(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];of(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Rj(c,u)}}finally{ao(-1),of(s)}}function Rj(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Pj(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];BU(e,o.selectors,!1)&&(r??=[],kr(o)?r.unshift(o):r.push(o))}return r}function xj(t,e,n,r,i,o){let s=tr(t,e);Oj(e[He],s,o,t.value,n,r,i)}function Oj(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ts(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Nj(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Vy(r,n,c,u)}}function kj(t,e,n,r,i){let o=Qe+n,s=e[se],a=i(s,e,t,r,n);e[o]=a,Ra(t,!0);let c=t.type===2;return c?(LM(e[He],a,t),(wS()===0||ef(t))&&Fa(a,e),bS()):Fa(a,e),uf()&&(!c||!Qf(t))&&P0(s,e,a,t),t}function Fj(t){let e=t;return ty()?RS():(e=e.parent,Ra(e,!1)),e}function O0(t,e){let n=t[xn];if(!n)return;let r;try{r=n.get(En,null)}catch{r=null}r?.(e)}function N0(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],p=e.data[u];Vy(p,n[u],h,i),a=!0}if(o)for(let c of o){let u=n[c],h=e.data[c];Vy(h,u,r,i),a=!0}return a}function Lj(t,e){let n=nr(e,t),r=n[se];Vj(r,n);let i=n[vn];i!==null&&n[Tn]===null&&(n[Tn]=IM(i,n[xn])),Ue(18),k0(r,n,n[_t]),Ue(19,n[_t])}function Vj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function k0(t,e,n){af(e);try{let r=t.viewQuery;r!==null&&Ly(1,r,n);let i=t.template;i!==null&&t1(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Or]?.finishViewCreation(t),t.staticContentQueries&&RM(t,e),t.staticViewQueries&&Ly(2,t.viewQuery,n);let o=t.components;o!==null&&Uj(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_e]&=-5,cf()}}function Uj(t,e){for(let n=0;n<e.length;n++)Lj(t,e[n])}function Ql(t,e,n,r){let i=me(null);try{let o=e.tView,a=t[_e]&4096?4096:16,c=I0(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[io]=u;let h=t[Or];return h!==null&&(c[Or]=h.createEmbeddedView(o)),k0(o,c,n),c}finally{me(i)}}function La(t,e){return!e||e.firstChild===null||Rf(t)}function Vl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Fn(o)),kn(o)&&a1(o,r);let s=n.type;if(s&8)Vl(t,e,n.child,r);else if(s&32){let a=D0(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=e1(e,n);if(Array.isArray(a))r.push(...a);else{let c=no(e[yn]);Vl(c[se],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function a1(t,e){for(let n=ct;n<t.length;n++){let r=t[n],i=r[se].firstChild;i!==null&&Vl(r[se],r,i,e)}t[Nr]!==t[vn]&&e.push(t[Nr])}function c1(t){if(t[is]!==null){for(let e of t[is])e.impl.addSequence(e);t[is].length=0}}var l1=[];function jj(t){return t[On]??zj(t)}function zj(t){let e=l1.pop()??Object.create($j);return e.lView=t,e}function Bj(t){t.lView[On]!==t&&(t.lView=null,l1.push(t))}var $j=re(L({},sa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ma(t.lView)},consumerOnSignalRead(){this.lView[On]=this}});function Hj(t){let e=t[On]??Object.create(qj);return e.lView=t,e}var qj=re(L({},sa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=no(t.lView);for(;e&&!u1(e[se]);)e=no(e);e&&Yv(e)},consumerOnSignalRead(){this.lView[On]=this}});function u1(t){return t.type!==2}function d1(t){if(t[Al]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Al])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[_e]&8192)}}var Wj=100;function h1(t,e=0){let r=t[xr].rendererFactory,i=!1;i||r.begin?.();try{Gj(t,e)}finally{i||r.end?.()}}function Gj(t,e){let n=ny();try{ry(!0),By(t,e);let r=0;for(;Rl(t);){if(r===Wj)throw new G(103,!1);r++,By(t,1)}}finally{ry(n)}}function Kj(t,e,n,r){if(oo(e))return;let i=e[_e],o=!1,s=!1;af(e);let a=!0,c=null,u=null;o||(u1(t)?(u=jj(e),c=ca(u)):lh()===null?(a=!1,u=Hj(e),c=ca(u)):e[On]&&(ml(e[On]),e[On]=null));try{Kv(e),xS(t.bindingStartIndex),n!==null&&t1(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&vf(e,y,null)}else{let y=t.preOrderHooks;y!==null&&yf(e,y,0,null),gy(e,0)}if(s||Yj(e),d1(e),f1(e,0),t.contentQueries!==null&&RM(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&vf(e,y)}else{let y=t.contentHooks;y!==null&&yf(e,y,1),gy(e,1)}Zj(t,e);let p=t.components;p!==null&&g1(e,p,0);let _=t.viewQuery;if(_!==null&&Ly(2,_,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&vf(e,y)}else{let y=t.viewHooks;y!==null&&yf(e,y,2),gy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xh]){for(let y of e[Xh])y();e[Xh]=null}o||(c1(e),e[_e]&=-73)}catch(h){throw o||Ma(e),h}finally{u!==null&&(pl(u,c),a&&Bj(u)),cf()}}function f1(t,e){for(let n=JA(t);n!==null;n=XA(n))for(let r=ct;r<n.length;r++){let i=n[r];p1(i,e)}}function Yj(t){for(let e=JA(t);e!==null;e=XA(e)){if(!(e[_e]&2))continue;let n=e[ss];for(let r=0;r<n.length;r++){let i=n[r];Yv(i)}}}function Qj(t,e,n){Ue(18);let r=nr(e,t);p1(r,n),Ue(19,r[_t])}function p1(t,e){tf(t)&&By(t,e)}function By(t,e){let r=t[se],i=t[_e],o=t[On],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&gl(o)),s||=!1,o&&(o.dirty=!1),t[_e]&=-9217,s)Kj(r,t,r.template,t[_t]);else if(i&8192){let a=me(null);try{d1(t),f1(t,1);let c=r.components;c!==null&&g1(t,c,1),c1(t)}finally{me(a)}}}function g1(t,e,n){for(let r=0;r<e.length;r++)Qj(t,e[r],n)}function Zj(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ao(~i);else{let o=i,s=n[++r],a=n[++r];NS(s,o);let c=e[o];Ue(24,c),a(2,c),Ue(25,c)}}}finally{ao(-1)}}function ip(t,e){let n=ny()?64:1088;for(t[xr].changeDetectionScheduler?.notify(e);t;){t[_e]|=n;let r=no(t);if(as(t)&&!r)return t;t=r}return null}function m1(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function _1(t,e){let n=ct+e;if(n<t.length)return t[n]}function Zl(t,e,n,r=!0){let i=e[se];if(Jj(i,e,t,n),r){let s=zy(n,t),a=e[He],c=a.parentNode(t[Nr]);c!==null&&lj(i,t[er],a,e,c,s)}let o=e[Tn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function F0(t,e){let n=Ul(t,e);return n!==void 0&&np(n[se],n),n}function Ul(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n];if(r){let i=r[io];i!==null&&i!==t&&R0(i,r),e>0&&(t[n-1][Xn]=r[Xn]);let o=Il(t,ct+e);cj(r[se],r);let s=o[Or];s!==null&&s.detachView(o[se]),r[mt]=null,r[Xn]=null,r[_e]&=-129}return r}function Jj(t,e,n,r){let i=ct+r,o=n.length;r>0&&(n[i-1][Xn]=e),r<o-ct?(e[Xn]=n[i],Fv(n,ct+r,e)):(n.push(e),e[Xn]=null),e[mt]=n;let s=e[io];s!==null&&n!==s&&v1(s,e);let a=e[Or];a!==null&&a.insertView(t),nf(e),e[_e]|=128}function v1(t,e){let n=t[ss],r=e[mt];if(Nn(r))t[_e]|=2;else{let i=r[mt][yn];e[yn]!==i&&(t[_e]|=2)}n===null?t[ss]=[e]:n.push(e)}var lo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[se];return Vl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[_t]}set context(e){this._lView[_t]=e}get destroyed(){return oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(kn(e)){let n=e[Ml],r=n?n.indexOf(this):-1;r>-1&&(Ul(e,r),Il(n,r))}this._attachedToViewContainer=!1}np(this._lView[se],this._lView)}onDestroy(e){Qv(this._lView,e)}markForCheck(){ip(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){nf(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,h1(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=as(this._lView),n=this._lView[io];n!==null&&!e&&R0(n,this._lView),XM(this._lView[se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=as(this._lView),r=this._lView[io];r!==null&&!n&&v1(r,this._lView),nf(this._lView)}};var Va=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Xj;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Ql(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new lo(o)}}return t})();function Xj(){return L0(Kt(),Se())}function L0(t,e){return t.type&4?new Va(e,t,Ba(t,e)):null}function V0(t,e,n,r,i){let o=t.data[e];if(o===null)o=ez(t,e,n,r,i),OS()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=MS();o.injectorIndex=s===null?-1:s.injectorIndex}return Ra(o,!0),o}function ez(t,e,n,r,i){let o=ey(),s=ty(),a=s?o:o&&o.parent,c=t.data[e]=nz(t,a,n,e,r,i);return tz(t,c,o,s),c}function tz(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function nz(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Xv()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var rz=new RegExp(`^(\\d+)*(${nM}|${tM})*(.*)`);function iz(t){let e=t.match(rz),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,u,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(u,p)}return[s,...a]}function oz(t){return!t.prev&&t.parent?.type===8}function yy(t){return t.index-Qe}function sz(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function op(t,e,n,r){let i=yy(r),o=sz(t,i);if(o===void 0){let s=t.data[sM];if(s?.[i])o=cz(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(oz(r)){let u=yy(r.parent);o=Fy(t,u)}else{let u=tr(c,n);if(a)o=u.firstChild;else{let h=yy(c),p=Fy(t,h);if(c.type===2&&p){let y=_0(t,h)+1;o=sp(y,p)}else o=u.nextSibling}}}}return o}function sp(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function az(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case mU:n=n.firstChild;break;case _U:n=n.nextSibling;break}}return n}function cz(t,e){let[n,...r]=iz(t),i;if(n===tM)i=e[yn][vn];else if(n===nM)i=jM(e[yn][vn]);else{let o=Number(n);i=Fn(e[o+Qe])}return az(i,r)}var lz=!1;function y1(t){lz=t}function uz(t){let e=t[Tn];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[He];for(let o of r.values())dz(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function dz(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Qe);i&&E0(t,i,!1)}}function ap(t){let e=t[mr]??[],r=t[mt][He],i=[];for(let o of e)o.data[aM]!==void 0?i.push(o):E1(o,r);t[mr]=i}function hz(t){let{lContainer:e}=t,n=e[mr];if(n===null)return;let i=e[mt][He];for(let o of n)E1(o,i)}function E1(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Fl];for(;n<i;){let o=r.nextSibling;E0(e,r,!1),r=o,n++}}}function cp(t){ap(t);let e=t[vn];Nn(e)&&kf(e);for(let n=ct;n<t.length;n++)kf(t[n])}function kf(t){uz(t);let e=t[se];for(let n=Qe;n<e.bindingStartIndex;n++)if(kn(t[n])){let r=t[n];cp(r)}else Nn(t[n])&&kf(t[n])}function U0(t){let e=t._views;for(let n of e){let r=TM(n);r!==null&&r[vn]!==null&&(Nn(r)?kf(r):cp(r))}}function fz(t,e,n,r){t!==null&&(n.cleanup(e),cp(t.lContainer),U0(r))}function pz(t,e){let n=[];for(let r of e)for(let i=0;i<(r[u0]??1);i++){let o={data:r,firstChild:null};r[Fl]>0&&(o.firstChild=t,t=sp(r[Fl],t)),n.push(o)}return[t,n]}var C1=()=>null,w1=()=>null;function b1(){C1=gz,w1=mz}function gz(t,e){return T1(t,e)?t[mr].shift():(ap(t),null)}function Ff(t,e){return C1(t,e)}function mz(t,e,n){if(e.tView.ssrId===null)return null;let r=Ff(t,e.tView.ssrId);return n[se].firstUpdatePass&&r===null&&_z(n,e),r}function I1(t,e,n){return w1(t,e,n)}function _z(t,e){let n=e;for(;n;){if(cA(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(cA(t,n))return;n=n.next}}function T1(t,e){let n=t[mr];return!e||n===null||n.length===0?!1:n[0].data[oM]===e}function cA(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return kn(r)&&T1(r,n)?(ap(r),!0):!1}var D1=class{},lp=class{},$y=class{resolveComponentFactory(e){throw new G(917,!1)}},Jl=class{static NULL=new $y},ps=class{},zr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>vz()}return t})();function vz(){let t=Se(),e=Kt(),n=nr(e.index,t);return(Nn(n)?n:t)[He]}var S1=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>null})}return t})();var wf={},Na=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,wf,r);return i!==wf||n===wf?i:this.parentInjector.get(e,n,r)}};function lA(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Dv(i,a);else if(o==2){let c=a,u=e[++s];r=Dv(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function be(t,e=0){let n=Se();if(n===null)return ve(t,e);let r=Kt();return HA(r,n,Gt(t),e)}function yz(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,u]=h.resolveHostDirectives(s);break}wz(t,e,n,a,o,c,u)}o!==null&&r!==null&&Ez(n,r,o)}function Ez(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new G(-301,!1);r.push(e[i],o)}}function Cz(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function wz(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let _=0;_<a;_++){let y=r[_];!c&&kr(y)&&(c=!0,Cz(t,n,_)),Py(Af(n,e),t,y.type)}Az(n,t.data.length,a);for(let _=0;_<a;_++){let y=r[_];y.providersResolver&&y.providersResolver(y)}let u=!1,h=!1,p=HM(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let _=0;_<a;_++){let y=r[_];if(n.mergedAttrs=Nl(n.mergedAttrs,y.hostAttrs),Iz(t,n,e,p,y),Sz(p,y,i),s!==null&&s.has(y)){let[k,N]=s.get(y);n.directiveToIndex.set(y.type,[p,k+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!u&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}bz(t,n,o)}function bz(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))uA(0,e,i,r),uA(1,e,i,r),hA(e,r,!1);else{let o=n.get(i);dA(0,e,o,r),dA(1,e,o,r),hA(e,r,!0)}}}function uA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),A1(e,o)}}function dA(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),A1(e,s)}}function A1(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function hA(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||w0(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Iz(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=to(i.type,!0)),s=new hs(o,kr(i),be,null);t.blueprint[r]=s,n[r]=s,Tz(t,e,r,HM(t,n,i.hostVars,Un),i)}function Tz(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Dz(s)!=a&&s.push(a),s.push(n,r,o)}}function Dz(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Sz(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kr(e)&&(n[""]=t)}}function Az(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function M1(t,e,n,r,i,o,s,a){let c=e[se],u=c.consts,h=so(u,s),p=V0(c,t,n,r,h);return o&&yz(c,e,p,so(u,a),i),p.mergedAttrs=Nl(p.mergedAttrs,p.attrs),p.attrs!==null&&lA(p,p.attrs,!1),p.mergedAttrs!==null&&lA(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function R1(t,e){qV(t,e),qv(e)&&t.queries.elementEnd(e)}function j0(t,e,n){return t[e]=n}function Mz(t,e){return t[e]}function Vr(t,e,n){if(n===Un)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function P1(t,e,n,r){let i=Vr(t,e,n);return Vr(t,e+1,r)||i}function Ey(t,e,n){return function r(i){let o=Ei(t)?nr(t.index,e):e;ip(o,5);let s=e[_t],a=fA(e,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=fA(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function fA(t,e,n,r){let i=me(null);try{return Ue(6,e,n),n(r)!==!1}catch(o){return O0(t,o),!1}finally{Ue(7,e,n),me(i)}}function Rz(t,e,n,r,i,o,s,a){let c=ef(t),u=!1,h=null;if(!r&&c&&(h=xz(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=tr(t,n),_=r?r(p):p;vU(n,_,o,a);let y=i.listen(_,o,a);if(!Pz(o)){let T=r?k=>r(Fn(k[t.index])):t.index;x1(T,e,n,o,a,y,!1)}}return u}function Pz(t){return t.startsWith("animation")||t.startsWith("transition")}function xz(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Sa],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function x1(t,e,n,r,i,o,s){let a=e.firstCreatePass?Jv(e):null,c=Zv(n),u=c.length;c.push(i,o),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function pA(t,e,n,r,i,o){let s=e[n],a=e[se],u=a.data[n].outputs[r],p=s[u].subscribe(o);x1(t.index,a,e,i,o,p,!0)}var Hy=Symbol("BINDING");var Lf=class extends Jl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=yi(e);return new Ua(n,this.ngModule)}};function Oz(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&ep.SignalBased)!==0};return i&&(o.transform=i),o})}function Nz(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function kz(t,e,n){let r=e instanceof gt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Na(n,r):n}function Fz(t){let e=t.get(ps,null);if(e===null)throw new G(407,!1);let n=t.get(S1,null),r=t.get(Rr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Lz(t,e){let n=O1(t);return y0(e,n,n==="svg"?pS:n==="math"?gS:null)}function O1(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ua=class extends lp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Oz(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Nz(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=WU(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ue(22);let a=me(null);try{let c=this.componentDef,u=Vz(r,c,s,o),h=kz(c,i||this.ngModule,e),p=Fz(h),_=p.rendererFactory.createRenderer(null,c),y=r?wj(_,r,c.encapsulation,h):Lz(c,_),T=s?.some(gA)||o?.some(B=>typeof B!="function"&&B.bindings.some(gA)),k=I0(null,u,null,512|$M(c),null,null,p,_,h,null,IM(y,h,!0));k[Qe]=y,af(k);let N=null;try{let B=M1(Qe,k,2,"#host",()=>u.directiveRegistry,!0,0);LM(_,y,B),Fa(y,k),n1(u,k,B),PM(u,B,k),R1(u,B),n!==void 0&&jz(B,this.ngContentSelectors,n),N=nr(B.index,k),k[_t]=N[_t],k0(u,k,null)}catch(B){throw N!==null&&Oy(N),Oy(k),B}finally{Ue(23),cf()}return new Vf(this.componentType,k,!!T)}finally{me(a)}}};function Vz(t,e,n,r){let i=t?["ng-version","20.3.15"]:GU(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Hy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let _ of p.bindings){a+=_[Hy].requiredVars;let y=h+1;_.create&&(_.targetIdx=y,(o??=[]).push(_)),_.update&&(_.targetIdx=y,(s??=[]).push(_))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,_=Zh(p);c.push(_)}return b0(0,null,Uz(o,s),1,a,c,null,null,null,[i],null)}function Uz(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function gA(t){let e=t[Hy].kind;return e==="input"||e==="twoWay"}var Vf=class extends D1{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=cs(n[se],Qe),this.location=Ba(this._tNode,n),this.instance=nr(this._tNode.index,n)[_t],this.hostView=this.changeDetectorRef=new lo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=N0(r,i[se],i,e,n);this.previousInputValues.set(e,n);let s=nr(r.index,i);ip(s,1)}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jz(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ys=(()=>{class t{static __NG_ELEMENT_ID__=zz}return t})();function zz(){let t=Kt();return k1(t,Se())}var Bz=ys,N1=class extends Bz{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ba(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=a0(this._hostTNode,this._hostLView);if(VA(e)){let n=Df(e,this._hostLView),r=Tf(e),i=n[se].data[r+8];return new ds(i,n)}else return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mA(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ff(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,La(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!jV(e),u;if(c)u=n;else{let N=n||{};u=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=c?e:new Ua(yi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let B=(c?p:this.parentInjector).get(gt,null);B&&(o=B)}let _=yi(h.componentType??{}),y=Ff(this._lContainer,_?.id??null),T=y?.firstChild??null,k=h.create(p,i,T,o,s,a);return this.insertImpl(k.hostView,u,La(this._hostTNode,y)),k}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[mt],u=new N1(c,c[er],c[mt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Zl(s,i,o,r),e.attachToViewContainerRef(),Fv(Cy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mA(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ul(this._lContainer,n);r&&(Il(Cy(this._lContainer),n),np(r[se],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ul(this._lContainer,n);return r&&Il(Cy(this._lContainer),n)!=null?new lo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mA(t){return t[Ml]}function Cy(t){return t[Ml]||(t[Ml]=[])}function k1(t,e){let n,r=e[t.index];return kn(r)?n=r:(n=m1(r,e,null,t),e[t.index]=n,T0(e,n)),F1(n,e,t,r),new N1(n,t,e)}function $z(t,e){let n=t[He],r=n.createComment(""),i=tr(e,t),o=n.parentNode(i);return xf(n,o,r,n.nextSibling(i),!1),r}var F1=L1,z0=()=>!1;function Hz(t,e,n){return z0(t,e,n)}function L1(t,e,n,r){if(t[Nr])return;let i;n.type&8?i=Fn(r):i=$z(e,n),t[Nr]=i}function qz(t,e,n){if(t[Nr]&&t[mr])return!0;let r=n[Tn],i=e.index-Qe;if(!r||QA(e)||AM(r,i))return!1;let s=Fy(r,i),a=r.data[Kf]?.[i],[c,u]=pz(s,a);return t[Nr]=c,t[mr]=u,!0}function Wz(t,e,n,r){z0(t,n,e)||L1(t,e,n,r)}function V1(){F1=Wz,z0=qz}var qy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Wy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)B0(e,n).matches!==null&&this.queries[n].setDirty()}},Gy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=eB(e):this.predicate=e}},Ky=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Gz(n,o)),this.matchTNodeWithReadOption(e,n,Ef(n,e,o,!1,!1))}else r===Va?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ef(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Dn||i===ys||i===Va&&n.type&4)this.addMatch(n.index,-2);else{let o=Ef(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Gz(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function Kz(t,e){return t.type&11?Ba(t,e):t.type&4?L0(t,e):null}function Yz(t,e,n,r){return n===-1?Kz(e,t):n===-2?Qz(t,e,r):kl(t,t[se],n,e)}function Qz(t,e,n){if(n===Dn)return Ba(e,t);if(n===Va)return L0(e,t);if(n===ys)return k1(e,t)}function U1(t,e,n,r){let i=e[Or].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let h=o[u];a.push(Yz(e,h,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Qy(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=U1(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-c];for(let p=ct;p<h.length;p++){let _=h[p];_[io]===_[mt]&&Qy(_[se],_,u,r)}if(h[ss]!==null){let p=h[ss];for(let _=0;_<p.length;_++){let y=p[_];Qy(y[se],y,u,r)}}}}}return r}function Zz(t,e){return t[Or].queries[e].queryList}function Jz(t,e,n){let r=new Mf((n&4)===4);return CS(t,e,r,r.destroy),(e[Or]??=new Wy).queries.push(new qy(r))-1}function Xz(t,e,n,r){let i=Ft();if(i.firstCreatePass){let o=Kt();tB(i,new Gy(e,n,r),o.index),nB(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return Jz(i,Se(),n)}function eB(t){return t.split(",").map(e=>e.trim())}function tB(t,e,n){t.queries===null&&(t.queries=new Ky),t.queries.track(new Yy(e,n))}function nB(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function B0(t,e){return t.queries.getByIndex(e)}function rB(t,e){let n=t[se],r=B0(n,e);return r.crossesNgTemplate?Qy(n,t,e,[]):U1(n,t,r,e)}var gs=class{},up=class{};var Uf=class extends gs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Lf(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Uv(e);this._bootstrapComponents=zM(o.bootstrap),this._r3Injector=ly(e,n,[{provide:gs,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver},...r],vi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},jf=class extends up{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Uf(this.moduleType,e,[])}};var jl=class extends gs{injector;componentFactoryResolver=new Lf(this);instance=null;constructor(e){super();let n=new Xo([...e.providers,{provide:gs,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],e.parent||Dl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $a(t,e,n=null){return new jl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var iB=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Jh(!1,n.type),i=r.length>0?$a([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t(ve(gt))})}return t})();function qe(t){return za(()=>{let e=j1(t),n=re(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===c0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(iB).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||bi.Emulated,styles:t.styles||Pn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&jn("NgStandalone"),z1(n);let r=t.dependencies;return n.directiveDefs=_A(r,oB),n.pipeDefs=_A(r,jv),n.id=cB(n),n})}function oB(t){return yi(t)||Zh(t)}function Br(t){return za(()=>({type:t.type,bootstrap:t.bootstrap||Pn,declarations:t.declarations||Pn,imports:t.imports||Pn,exports:t.exports||Pn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sB(t,e){if(t==null)return ro;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=ep.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function aB(t){if(t==null)return ro;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function tt(t){return za(()=>{let e=j1(t);return z1(e),e})}function $0(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function j1(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ro,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Pn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:sB(t.inputs,e),outputs:aB(t.outputs),debugInfo:null}}function z1(t){t.features?.forEach(e=>e(t))}function _A(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function cB(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lB(t){return Object.getPrototypeOf(t.prototype).constructor}function on(t){let e=lB(t.type),n=!0,r=[t];for(;e;){let i;if(kr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=wy(t.inputs),s.declaredInputs=wy(t.declaredInputs),s.outputs=wy(t.outputs);let a=i.hostBindings;a&&pB(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&hB(t,c),u&&fB(t,u),uB(t,i),ZD(t.outputs,i.outputs),kr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===on&&(n=!1)}}e=Object.getPrototypeOf(e)}dB(r)}function uB(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function dB(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Nl(i.hostAttrs,n=Nl(n,i.hostAttrs))}}function wy(t){return t===ro?{}:t===Pn?[]:t}function hB(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function fB(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function pB(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gB(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Nl(t.mergedAttrs,t.attrs);let h=t.tView=b0(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ra(t,!1);let c=B1(n,e,t,r);uf()&&P0(n,e,c,t),Fa(c,e);let u=m1(c,e,c,t);e[r+Qe]=u,T0(e,u),Hz(u,t,e)}function zf(t,e,n,r,i,o,s,a,c,u,h){let p=n+Qe,_;if(e.firstCreatePass){if(_=V0(e,p,4,s||null,a||null),u!=null){let y=so(e.consts,u);_.localNames=[];for(let T=0;T<y.length;T+=2)_.localNames.push(y[T],-1)}}else _=e.data[p];return gB(_,t,e,n,r,i,o,c),u!=null&&r1(t,_,h),_}var B1=$1;function $1(t,e,n,r){return wi(!0),e[He].createComment("")}function mB(t,e,n,r){let i=!Jf(e,n);wi(i);let o=e[Tn]?.data[iM]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return $1(t,e);let s=e[Tn],a=op(s,t,e,n);Zf(s,r,a);let c=_0(s,r);return sp(c,a)}function H1(){B1=mB}var Ln=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(Ln||{}),vA=0,_B=1,It=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(It||{});var vB=0,Xl=1;var yB=4,EB=5;var CB=7,ka=8,wB=9,H0=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(H0||{});function bf(t,e){let n=IB(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function bB(t){bf(1,t),bf(0,t),bf(2,t)}function IB(t){let e=yB;return t===1?e=EB:t===2&&(e=wB),e}function q1(t){return t+1}function Ha(t,e){let n=t[se],r=q1(e.index);return t[r]}function eu(t,e){let n=q1(e.index);return t.data[n]}function TB(t,e,n){let r=e[se],i=eu(r,n);switch(t){case It.Complete:return i.primaryTmplIndex;case It.Loading:return i.loadingTmplIndex;case It.Error:return i.errorTmplIndex;case It.Placeholder:return i.placeholderTmplIndex;default:return null}}function yA(t,e){return e===It.Placeholder?t.placeholderBlockConfig?.[vA]??null:e===It.Loading?t.loadingBlockConfig?.[vA]??null:null}function DB(t){return t.loadingBlockConfig?.[_B]??null}function EA(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function SB(t,e){let n=e.primaryTmplIndex+Qe;return cs(t,n)}var AB=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?$a(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t})}return t})();var W1=new K("");function by(t,e,n){return t.get(AB).getOrCreateInjector(e,t,n,"")}function MB(t,e,n){if(t instanceof Na){let i=t.injector,o=t.parentInjector,s=by(o,e,n);return new Na(i,s)}let r=t.get(gt);if(r!==t){let i=by(r,e,n);return new Na(t,i)}return by(t,e,n)}function us(t,e,n,r=!1){let i=n[mt],o=i[se];if(oo(i))return;let s=Ha(i,e),a=s[Xl],c=s[CB];if(!(c!==null&&t<c)&&CA(a,t)&&CA(s[vB]??-1,t)){let u=eu(o,e),p=!r&&!0&&(DB(u)!==null||yA(u,It.Loading)!==null||yA(u,It.Placeholder))?xB:PB;try{p(t,s,n,e,i)}catch(_){O0(i,_)}}}function RB(t,e){let n=t[mr]?.findIndex(i=>i.data[cM]===e[Xl])??-1;return{dehydratedView:n>-1?t[mr][n]:null,dehydratedViewIx:n}}function PB(t,e,n,r,i){Ue(20);let o=TB(t,i,r);if(o!==null){e[Xl]=t;let s=i[se],a=o+Qe,c=cs(s,a),u=0;F0(n,u);let h;if(t===It.Complete){let T=eu(s,r),k=T.providers;k&&k.length>0&&(h=MB(i[xn],T,k))}let{dehydratedView:p,dehydratedViewIx:_}=RB(n,e),y=Ql(i,c,null,{injector:h,dehydratedView:p});if(Zl(n,y,u,La(c,p)),ip(y,2),_>-1&&n[mr]?.splice(_,1),(t===It.Complete||t===It.Error)&&Array.isArray(e[ka])){for(let T of e[ka])T();e[ka]=null}}Ue(21)}function CA(t,e){return t<e}function wA(t,e,n){t.loadingPromise.then(()=>{t.loadingState===Ln.COMPLETE?us(It.Complete,e,n):t.loadingState===Ln.FAILED&&us(It.Error,e,n)})}var xB=null;var dp=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var q0=new K("");function uo(t){return!!t&&typeof t.then=="function"}function W0(t){return!!t&&typeof t.subscribe=="function"}var G0=new K("");function hp(t){return ht([{provide:G0,multi:!0,useValue:t}])}var K0=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=R(G0,{optional:!0})??[];injector=R(We);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=bt(this.injector,i);if(uo(o))n.push(o);else if(W0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ho=new K("");function G1(){Y_(()=>{let t="";throw new G(600,t)})}function K1(t){return t.isBoundToModule}var OB=10;var Ot=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(En);afterRenderManager=R(M0);zonelessEnabled=R(Pa);rootEffectScheduler=R(py);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new it;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(_r);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(n=>!n))}constructor(){R(vs,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=R(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=We.NULL){return this._injector.get(xe).run(()=>{Ue(10);let s=n instanceof lp;if(!this._injector.get(K0).done){let T="";throw new G(405,T)}let c;s?c=n:c=this._injector.get(Jl).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=K1(c)?void 0:this._injector.get(gs),h=r||c.selector,p=c.create(i,[],h,u),_=p.location.nativeElement,y=p.injector.get(q0,null);return y?.registerApplication(_),p.onDestroy(()=>{this.detachView(p.hostView),Ol(this.components,p),y?.unregisterApplication(_)}),this._loadComponent(p),Ue(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ue(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(tp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new G(101,!1);let n=me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(n),this.afterTick.next(),Ue(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ps,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<OB;)Ue(14),this.synchronizeOnce(),Ue(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Rl(i))continue;let o=r&&!this.zonelessEnabled?0:1;h1(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Rl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Ol(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ho,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ol(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ol(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function NB(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function Y1(t,e,n){let r=e[xn],i=e[se];if(t.loadingState!==Ln.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=Ha(e,n),s=SB(i,t);t.loadingState=Ln.IN_PROGRESS,bf(1,o);let a=t.dependencyResolverFn,c=r.get(co).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(u=>{let h=!1,p=[],_=[];for(let y of u)if(y.status==="fulfilled"){let T=y.value,k=yi(T)||Zh(T);if(k)p.push(k);else{let N=jv(T);N&&_.push(N)}}else{h=!0;break}if(h){if(t.loadingState=Ln.FAILED,t.errorTmplIndex===null){let T=new G(-750,!1);O0(e,T)}}else{t.loadingState=Ln.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=EA(y.directiveRegistry,p);let T=p.map(N=>N.type),k=Jh(!1,...T);t.providers=k}_.length>0&&(y.pipeRegistry=EA(y.pipeRegistry,_))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,c()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=Ln.COMPLETE,c()}),t.loadingPromise)}function kB(t,e){return e[xn].get(W1,null,{optional:!0})?.behavior!==H0.Manual}function FB(t,e,n){let r=e[se],i=e[n.index];if(!kB(t,e))return;let o=Ha(e,n),s=eu(r,n);switch(bB(o),s.loadingState){case Ln.NOT_STARTED:us(It.Loading,n,i),Y1(s,e,n),s.loadingState===Ln.IN_PROGRESS&&wA(s,n,i);break;case Ln.IN_PROGRESS:us(It.Loading,n,i),wA(s,n,i);break;case Ln.COMPLETE:us(It.Complete,n,i);break;case Ln.FAILED:us(It.Error,n,i);break;default:}}async function Q1(t,e,n){let r=t.get(Yf);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=DU(e,t);if(s.length===0)return;o!==null&&s.shift(),UB(r,s),o!==null&&await o;let a=s[0];r.has(a)?await bA(t,s,n):r.awaitParentBlock(a,async()=>await bA(t,s,n))}async function bA(t,e,n){let r=t.get(Yf),i=r.hydrating,o=t.get(_r),s=o.add();for(let c=0;c<e.length;c++){let u=e[c],h=r.get(u);if(h!=null){if(await zB(h),await jB(t),LB(h)){hz(h),IA(e.slice(c),r);break}i.get(u).resolve()}else{VB(c,e,r),IA(e.slice(c),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),n&&n(e),fz(r.get(a),e,r,t.get(Ot))}function LB(t){return Ha(t.lView,t.tNode)[Xl]===It.Error}function VB(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&cp(i.lContainer)}function IA(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function UB(t,e){for(let n of e)t.hydrating.set(n,NB())}function jB(t){return new Promise(e=>Yl(e,{injector:t}))}async function zB(t){let{tNode:e,lView:n}=t,r=Ha(n,e);return new Promise(i=>{BB(r,i),FB(2,n,e)})}function BB(t,e){Array.isArray(t[ka])||(t[ka]=[]),t[ka].push(e)}function Ti(t,e,n,r){let i=Se(),o=ls();if(Vr(i,o,e)){let s=Ft(),a=lf();xj(a,i,t,e,n,r)}return Ti}var Eoe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Zy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Iy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function $B(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),h=e[o],p=Iy(o,u,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let _=t.at(s),y=e[c],T=Iy(s,_,c,y,n);if(T!==0){T<0&&t.updateValue(s,y),s--,c--;continue}let k=n(o,u),N=n(s,_),B=n(o,h);if(Object.is(B,N)){let ne=n(c,y);Object.is(ne,k)?(t.swap(o,s),t.updateValue(s,y),c--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Bf,i??=DA(t,o,s,n),Jy(t,r,o,B))t.updateValue(o,h),o++,s++;else if(i.has(B))r.set(k,t.detach(o)),s--;else{let ne=t.create(o,e[o]);t.attach(o,ne),o++,s++}}for(;o<=c;)TA(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let h=t.at(o),p=u.value,_=Iy(o,h,o,p,n);if(_!==0)_<0&&t.updateValue(o,p),o++,u=c.next();else{r??=new Bf,i??=DA(t,o,s,n);let y=n(o,p);if(Jy(t,r,o,y))t.updateValue(o,p),o++,s++,u=c.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,u=c.next();else{let T=n(o,h);r.set(T,t.detach(o)),s--}}}for(;!u.done;)TA(t,r,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Jy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function TA(t,e,n,r,i){if(Jy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function DA(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Bf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function $(t,e,n,r,i,o,s,a){jn("NgControlFlow");let c=Se(),u=Ft(),h=so(u.consts,o);return zf(c,u,t,e,n,r,i,h,256,s,a),Y0}function Y0(t,e,n,r,i,o,s,a){jn("NgControlFlow");let c=Se(),u=Ft(),h=so(u.consts,o);return zf(c,u,t,e,n,r,i,h,512,s,a),Y0}function H(t,e){jn("NgControlFlow");let n=Se(),r=ls(),i=n[r]!==Un?n[r]:-1,o=i!==-1?$f(n,Qe+i):void 0,s=0;if(Vr(n,r,t)){let a=me(null);try{if(o!==void 0&&F0(o,s),t!==-1){let c=Qe+t,u=$f(n,c),h=n0(n[se],c),p=I1(u,h,n),_=Ql(n,h,e,{dehydratedView:p});Zl(u,_,s,La(h,p))}}finally{me(a)}}else if(o!==void 0){let a=_1(o,s);a!==void 0&&(a[_t]=e)}}var Xy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ct}};function fp(t,e){return e}var e0=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function zn(t,e,n,r,i,o,s,a,c,u,h,p,_){jn("NgControlFlow");let y=Se(),T=Ft(),k=c!==void 0,N=Se(),B=a?s.bind(N[yn][_t]):s,ne=new e0(k,B);N[Qe+t]=ne,zf(y,T,t+1,e,n,r,i,so(T.consts,o),256),k&&zf(y,T,t+2,c,u,h,p,so(T.consts,_),512)}var t0=class extends Zy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ct}at(e){return this.getLView(e)[_t].$implicit}attach(e,n){let r=n[Tn];this.needsIndexUpdate||=e!==this.length,Zl(this.lContainer,n,e,La(this.templateTNode,r)),HB(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,qB(this.lContainer,e),WB(this.lContainer,e)}create(e,n){let r=Ff(this.lContainer,this.templateTNode.tView.ssrId),i=Ql(this.hostLView,this.templateTNode,new Xy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){np(e[se],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[_t].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[_t].$index=e}getLView(e){return GB(this.lContainer,e)}};function Bn(t){let e=me(null),n=Ci();try{let r=Se(),i=r[se],o=r[n],s=n+1,a=$f(r,s);if(o.liveCollection===void 0){let u=n0(i,s);o.liveCollection=new t0(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if($B(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=ls(),h=c.length===0;if(Vr(r,u,h)){let p=n+2,_=$f(r,p);if(h){let y=n0(i,p),T=I1(_,y,r),k=Ql(r,y,void 0,{dehydratedView:T});Zl(_,k,0,La(y,T))}else i.firstUpdatePass&&ap(_),F0(_,0)}}}finally{me(e)}}function $f(t,e){return t[e]}function HB(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n],i=r?r[os]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[xn];sj(o,i),fs.delete(r),i.detachedLeaveAnimationFns=void 0}}function qB(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n],i=r?r[os]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function WB(t,e){return Ul(t,e)}function GB(t,e){return _1(t,e)}function n0(t,e){return cs(t,e)}function ye(t,e,n){let r=Se(),i=ls();if(Vr(r,i,e)){let o=Ft(),s=lf();s1(s,r,t,e,r[He],n)}return ye}function SA(t,e,n,r,i){N0(e,t,n,i?"class":"style",r)}function m(t,e,n,r){let i=Se(),o=i[se],s=t+Qe,a=o.firstCreatePass?M1(s,i,2,e,Pj,TS(),n,r):o.data[s];if(kj(a,i,t,e,Z1),ef(a)){let c=i[se];n1(c,i,a),PM(c,a,i)}return r!=null&&r1(i,a),m}function g(){let t=Ft(),e=Kt(),n=Fj(e);return t.firstCreatePass&&R1(t,n),DS(n)&&AS(),IS(),n.classesWithoutHost!=null&&GV(n)&&SA(t,n,Se(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&KV(n)&&SA(t,n,Se(),n.stylesWithoutHost,!1),g}function O(t,e,n,r){return m(t,e,n,r),g(),O}var Z1=(t,e,n,r,i)=>(wi(!0),y0(e[He],r,cy()));function KB(t,e,n,r,i){let o=!Jf(e,n);if(wi(o),o)return y0(e[He],r,cy());let s=e[Tn],a=op(s,t,e,n);return SM(s,i)&&Zf(s,i,a.nextSibling),s&&(KA(n)||YA(a))&&Ei(n)&&(SS(n),FM(a)),a}function J1(){Z1=KB}var YB=(t,e,n,r,i)=>(wi(!0),NM(e[He],""));function QB(t,e,n,r,i){let o,s=!Jf(e,n);if(wi(s),s)return NM(e[He],"");let a=e[Tn],c=op(a,t,e,n),u=IU(a,i);return Zf(a,i,c),o=sp(u,c),o}function X1(){YB=QB}function ce(){return Se()}var mf=void 0;function ZB(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var JB=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mf,"{1} 'at' {0}",mf],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",ZB],Ty={};function $n(t){let e=XB(t),n=AA(e);if(n)return n;let r=e.split("-")[0];if(n=AA(r),n)return n;if(r==="en")return JB;throw new G(701,!1)}function AA(t){return t in Ty||(Ty[t]=Pr.ng&&Pr.ng.common&&Pr.ng.common.locales&&Pr.ng.common.locales[t]),Ty[t]}var vt=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(vt||{});function XB(t){return t.toLowerCase().replace(/_/g,"-")}var tu="en-US";var e3=tu;function eR(t){typeof t=="string"&&(e3=t.toLowerCase().replace(/_/g,"-"))}function q(t,e,n){let r=Se(),i=Ft(),o=Kt();return tR(i,r,r[He],o,t,e,n),q}function tR(t,e,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ey(r,e,o),Rz(r,t,e,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let _=h[p],y=h[p+1];c??=Ey(r,e,o),pA(r,e,_,y,i,c)}if(u&&u.length)for(let p of u)c??=Ey(r,e,o),pA(r,e,p,i,i,c)}}function D(t=1){return jS(t)}function Q0(t,e,n,r){Xz(t,e,n,r)}function Z0(t){let e=Se(),n=Ft(),r=oy();sf(r+1);let i=B0(n,r);if(t.dirty&&_S(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=rB(e,r);t.reset(o,aU),t.notifyOnChanges()}return!0}return!1}function J0(){return Zz(Se(),oy())}function _f(t,e){return t<<17|e<<2}function ms(t){return t>>17&32767}function t3(t){return(t&2)==2}function n3(t,e){return t&131071|e<<17}function r0(t){return t|2}function ja(t){return(t&131068)>>2}function Dy(t,e){return t&-131069|e<<2}function r3(t){return(t&1)===1}function i0(t){return t|1}function i3(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ms(s),c=ja(s);t[r]=n;let u=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Da(p,h)>0)&&(u=!0)}else h=n;if(i)if(c!==0){let _=ms(t[a+1]);t[r+1]=_f(_,a),_!==0&&(t[_+1]=Dy(t[_+1],r)),t[a+1]=n3(t[a+1],r)}else t[r+1]=_f(a,0),a!==0&&(t[a+1]=Dy(t[a+1],r)),a=r;else t[r+1]=_f(c,0),a===0?a=r:t[c+1]=Dy(t[c+1],r),c=r;u&&(t[r+1]=r0(t[r+1])),MA(t,h,r,!0),MA(t,h,r,!1),o3(e,h,t,r,o),s=_f(a,c),o?e.classBindings=s:e.styleBindings=s}function o3(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Da(o,e)>=0&&(n[r+1]=i0(n[r+1]))}function MA(t,e,n,r){let i=t[n+1],o=e===null,s=r?ms(i):ja(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];s3(c,e)&&(a=!0,t[s+1]=r?i0(u):r0(u)),s=r?ms(u):ja(u)}a&&(t[n+1]=r?r0(i):i0(i))}function s3(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Da(t,e)>=0:!1}function Ae(t,e){return a3(t,e,null,!0),Ae}function a3(t,e,n,r){let i=Se(),o=Ft(),s=iy(2);if(o.firstUpdatePass&&l3(o,t,s,r),e!==Un&&Vr(i,s,e)){let a=o.data[Ci()];p3(o,a,i,i[He],t,i[s+1]=g3(e,n),r,s)}}function c3(t,e){return e>=t.expandoStartIndex}function l3(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ci()],s=c3(t,n);m3(o,r)&&e===null&&!s&&(e=!1),e=u3(i,o,e,r),i3(i,o,e,n,s,r)}}function u3(t,e,n,r){let i=FS(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Sy(null,t,e,n,r),n=zl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Sy(i,t,e,n,r),o===null){let c=d3(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Sy(null,t,e,c[1],r),c=zl(c,e.attrs,r),h3(t,e,r,c))}else o=f3(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function d3(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ja(r)!==0)return t[ms(r)]}function h3(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ms(i)]=r}function f3(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=zl(r,s,n)}return zl(r,e.attrs,n)}function Sy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=zl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sS(t,s,n?!0:e[++o]))}return t===void 0?null:t}function p3(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],h=r3(u)?RA(c,e,n,i,ja(u),s):void 0;if(!Hf(h)){Hf(o)||t3(u)&&(o=RA(c,null,n,i,a,s));let p=Wv(Ci(),n);Cj(r,s,p,i,o)}}function RA(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),h=u?c[1]:c,p=h===null,_=n[i+1];_===Un&&(_=p?Pn:void 0);let y=p?Qh(_,r):h===r?_:void 0;if(u&&!Hf(y)&&(y=Qh(c,r)),Hf(y)&&(a=y,s))return a;let T=t[i+1];i=s?ms(T):ja(T)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Qh(c,r))}return a}function Hf(t){return t!==void 0}function g3(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=vi(Wl(t)))),t}function m3(t,e){return(t.flags&(e?8:16))!==0}function E(t,e=""){let n=Se(),r=Ft(),i=t+Qe,o=r.firstCreatePass?V0(r,i,1,e,null):r.data[i],s=nR(r,n,o,e,t);n[i]=s,uf()&&P0(r,n,s,o),Ra(o,!1)}var nR=(t,e,n,r,i)=>(wi(!0),OM(e[He],r));function _3(t,e,n,r,i){let o=!Jf(e,n);if(wi(o),o)return OM(e[He],r);let s=e[Tn];return op(s,t,e,n)}function rR(){nR=_3}function v3(t,e,n,r=""){return Vr(t,ls(),n)?e+ts(n)+r:Un}function y3(t,e,n,r,i,o=""){let s=PS(),a=P1(t,s,n,i);return iy(2),a?e+ts(n)+r+ts(i)+o:Un}function ke(t){return ue("",t),ke}function ue(t,e,n){let r=Se(),i=v3(r,t,e,n);return i!==Un&&iR(r,Ci(),i),ue}function sn(t,e,n,r,i){let o=Se(),s=y3(o,t,e,n,r,i);return s!==Un&&iR(o,Ci(),s),sn}function iR(t,e,n){let r=Wv(e,t);OU(t[He],r,n)}function Q(t,e,n){hy(e)&&(e=e());let r=Se(),i=ls();if(Vr(r,i,e)){let o=Ft(),s=lf();s1(s,r,t,e,r[He],n)}return Q}function X(t,e){let n=hy(t);return n&&t.set(e),n}function Z(t,e){let n=Se(),r=Ft(),i=Kt();return tR(r,n,n[He],i,t,e),Z}function E3(t,e,n){let r=Ft();if(r.firstCreatePass){let i=kr(t);o0(n,r.data,r.blueprint,i,!0),o0(e,r.data,r.blueprint,i,!1)}}function o0(t,e,n,r,i){if(t=Gt(t),Array.isArray(t))for(let o=0;o<t.length;o++)o0(t[o],e,n,r,i);else{let o=Ft(),s=Se(),a=Kt(),c=Jo(t)?t:Gt(t.provide),u=Bv(t),h=a.providerIndexes&1048575,p=a.directiveStart,_=a.providerIndexes>>20;if(Jo(t)||!t.multi){let y=new hs(u,i,be,null),T=My(c,e,i?h:h+_,p);T===-1?(Py(Af(a,s),o,c),Ay(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=My(c,e,h+_,p),T=My(c,e,h,h+_),k=y>=0&&n[y],N=T>=0&&n[T];if(i&&!N||!i&&!k){Py(Af(a,s),o,c);let B=b3(i?w3:C3,n.length,i,r,u,t);!i&&N&&(n[T].providerFactory=B),Ay(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),s.push(B)}else{let B=oR(n[i?T:y],u,!i&&r);Ay(o,t,y>-1?y:T,B)}!i&&r&&N&&n[T].componentProviders++}}}function Ay(t,e,n,r){let i=Jo(e),o=dS(e);if(i||o){let c=(o?Gt(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(n);h===-1?u.push(n,[r,c]):u[h+1].push(r,c)}else u.push(n,c)}}}function oR(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function My(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function C3(t,e,n,r,i){return s0(this.multi,[])}function w3(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=kl(r,r[se],this.providerFactory.index,i);s=c.slice(0,a),s0(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],s0(o,s);return s}function s0(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function b3(t,e,n,r,i,o){let s=new hs(t,n,be,null);return s.multi=[],s.index=e,s.componentProviders=0,oR(s,i,r&&!n),s}function ir(t,e=[]){return n=>{n.providersResolver=(r,i)=>E3(r,i?i(t):t,e)}}function nu(t,e,n){let r=rf()+t,i=Se();return i[r]===Un?j0(i,r,n?e.call(n):e()):Mz(i,r)}function X0(t,e,n,r){return I3(Se(),rf(),t,e,n,r)}function sR(t,e){let n=t[e];return n===Un?void 0:n}function I3(t,e,n,r,i,o){let s=e+n;return Vr(t,s,i)?j0(t,s+1,o?r.call(o,i):r(i)):sR(t,s+1)}function T3(t,e,n,r,i,o,s){let a=e+n;return P1(t,a,i,o)?j0(t,a+2,s?r.call(s,i,o):r(i,o)):sR(t,a+2)}function pp(t,e){let n=Ft(),r,i=t+Qe;n.firstCreatePass?(r=D3(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=to(r.type,!0)),s,a=mn(be);try{let c=Sf(!1),u=o();return Sf(c),Gv(n,Se(),i,u),u}finally{mn(a)}}function D3(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function gp(t,e,n,r){let i=t+Qe,o=Se(),s=mS(o,i);return S3(o,i)?T3(o,rf(),e,s.transform,n,r,s):s.transform(n,r)}function S3(t,e){return t[se].data[e].pure}var qf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},eE=(()=>{class t{compileModuleSync(n){return new jf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Uv(n),o=zM(i.declarations).reduce((s,a)=>{let c=yi(a);return c&&s.push(new Ua(c)),s},[]);return new qf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var A3=(()=>{class t{zone=R(xe);changeDetectionScheduler=R(Rr);applicationRef=R(Ot);applicationErrorHandler=R(En);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aR({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new xe(re(L({},cR()),{scheduleInRootZone:n})),[{provide:xe,useFactory:t},{provide:Jn,multi:!0,useFactory:()=>{let r=R(A3,{optional:!0});return()=>r.initialize()}},{provide:Jn,multi:!0,useFactory:()=>{let r=R(M3);return()=>{r.initialize()}}},e===!0?{provide:fy,useValue:!0}:[],{provide:hf,useValue:n??WM},{provide:En,useFactory:()=>{let r=R(xe),i=R(gt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(fr),o.handleError(s))})}}}]}function cR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var M3=(()=>{class t{subscription=new dt;initialized=!1;zone=R(xe);pendingTasks=R(_r);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var tE=(()=>{class t{applicationErrorHandler=R(En);appRef=R(Ot);taskService=R(_r);ngZone=R(xe);zonelessEnabled=R(Pa);tracing=R(vs,{optional:!0});disableScheduling=R(fy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Of):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(hf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ll||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?nA:GM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Of+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,nA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nE(){return jn("NgZoneless"),ht([{provide:Rr,useExisting:tE},{provide:xe,useClass:Ll},{provide:Pa,useValue:!0},{provide:hf,useValue:!1},[]])}function R3(){return typeof $localize<"u"&&$localize.locale||tu}var ru=new K("",{providedIn:"root",factory:()=>R(ru,{optional:!0,skipSelf:!0})||R3()});function Lt(t){return KD(t)}function Es(t,e){return fh(t,e?.equal)}var lR=class{[rn];constructor(e){this[rn]=e}destroy(){this[rn].destroy()}};var aE={JSACTION:"__jsaction",OWNER:"__owner"},fR={};function P3(t){return t[aE.JSACTION]}function uR(t,e){t[aE.JSACTION]=e}function x3(t){return fR[t]}function O3(t,e){fR[t]=e}var de={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},N3=[de.MOUSEENTER,de.MOUSELEAVE,"pointerenter","pointerleave"],Noe=[de.CLICK,de.DBLCLICK,de.FOCUSIN,de.FOCUSOUT,de.KEYDOWN,de.KEYUP,de.KEYPRESS,de.MOUSEOVER,de.MOUSEOUT,de.SUBMIT,de.TOUCHSTART,de.TOUCHEND,de.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],k3=[de.FOCUS,de.BLUR,de.ERROR,de.LOAD,de.TOGGLE],cE=t=>k3.indexOf(t)>=0;function F3(t){return t===de.MOUSEENTER?de.MOUSEOVER:t===de.MOUSELEAVE?de.MOUSEOUT:t===de.POINTERENTER?de.POINTEROVER:t===de.POINTERLEAVE?de.POINTEROUT:t}function L3(t,e,n,r){let i=!1;cE(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function V3(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function U3(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var dR=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function j3(t){return t.which===2||t.which==null&&t.button===4}function z3(t){return dR&&t.metaKey||!dR&&t.ctrlKey||j3(t)||t.shiftKey}function B3(t,e,n){let r=t.relatedTarget;return(t.type===de.MOUSEOVER&&e===de.MOUSEENTER||t.type===de.MOUSEOUT&&e===de.MOUSELEAVE||t.type===de.POINTEROVER&&e===de.POINTERENTER||t.type===de.POINTEROUT&&e===de.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function $3(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===de.MOUSEOVER?n.type=de.MOUSEENTER:t.type===de.MOUSEOUT?n.type=de.MOUSELEAVE:t.type===de.POINTEROVER?n.type=de.POINTERENTER:n.type=de.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var H3=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),yp=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){H3&&(this.element.style.cursor="pointer"),this.handlerInfos.push(L3(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)V3(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},q3={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function fo(t){return t.eventType}function lE(t,e){t.eventType=e}function _p(t){return t.event}function pR(t,e){t.event=e}function gR(t){return t.targetElement}function mR(t,e){t.targetElement=e}function _R(t){return t.eic}function W3(t,e){t.eic=e}function G3(t){return t.timeStamp}function K3(t,e){t.timeStamp=e}function vp(t){return t.eia}function vR(t,e,n){t.eia=[e,n]}function rE(t){t.eia=void 0}function mp(t){return t[1]}function Y3(t){return t.eirp}function yR(t,e){t.eirp=e}function ER(t){return t.eir}function CR(t,e){t.eir=e}function wR(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function Q3(t,e,n,r,i,o,s,a){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var iE=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return fo(this.eventInfo)}setEventType(e){lE(this.eventInfo,e)}getEvent(){return _p(this.eventInfo)}setEvent(e){pR(this.eventInfo,e)}getTargetElement(){return gR(this.eventInfo)}setTargetElement(e){mR(this.eventInfo,e)}getContainer(){return _R(this.eventInfo)}setContainer(e){W3(this.eventInfo,e)}getTimestamp(){return G3(this.eventInfo)}setTimestamp(e){K3(this.eventInfo,e)}getAction(){let e=vp(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){rE(this.eventInfo);return}vR(this.eventInfo,e.name,e.element)}getIsReplay(){return Y3(this.eventInfo)}setIsReplay(e){yR(this.eventInfo,e)}getResolved(){return ER(this.eventInfo)}setResolved(e){CR(this.eventInfo,e)}clone(){return new t(wR(this.eventInfo))}},Z3={},J3=/\s*;\s*/,X3=de.CLICK,oE=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&fo(e)===de.CLICK&&z3(_p(e))?lE(e,de.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){ER(e)||(this.populateAction(e,gR(e)),CR(e,!0))}resolveParentAction(e){let n=vp(e),r=n&&mp(n);rE(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==_R(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!vp(e));)r=this.getParentNode(r);let i=vp(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(fo(e)===de.MOUSEENTER||fo(e)===de.MOUSELEAVE||fo(e)===de.POINTERENTER||fo(e)===de.POINTERLEAVE)))if(B3(_p(e),fo(e),mp(i))){let o=$3(_p(e),mp(i));pR(e,o),mR(e,mp(i))}else rE(e)}getParentNode(e){let n=e[aE.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[fo(n)];i!==void 0&&vR(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=P3(e);if(!n){let r=e.getAttribute(ff.JSACTION);if(!r)n=Z3,uR(e,n);else{if(n=x3(r),!n){n={};let i=r.split(J3);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(q3.EVENT_ACTION_SEPARATOR),c=a!==-1,u=c?s.substr(0,a).trim():X3,h=c?s.substr(a+1).trim():s;n[u]=h}O3(r,n)}uR(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},bR=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(bR||{}),sE=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new iE(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&e4(r.element,n)&&U3(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function e4(t,e){return t.tagName==="A"&&(e.getEventType()===de.CLICK||e.getEventType()===de.CLICKMOD)}var IR=Symbol.for("propagationStopped"),uE={REPLAY:101};var t4="`preventDefault` called during event replay.";var n4="`composedPath` called during event replay.",Ep=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new oE({clickModSupport:n}),this.dispatcher=new sE(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&o4(e),r4(e);e.getAction();){if(s4(e),cE(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),i4(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function r4(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[IR]=!0,n()};Cs(e,"stopPropagation",r),Cs(e,"stopImmediatePropagation",r)}function i4(t){return!!t.getEvent()[IR]}function o4(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);Cs(e,"target",n),Cs(e,"eventPhase",uE.REPLAY),Cs(e,"preventDefault",()=>{throw r(),new Error(t4+"")}),Cs(e,"composedPath",()=>{throw new Error(n4+"")})}function s4(t){let e=t.getEvent(),n=t.getAction()?.element;n&&Cs(e,"currentTarget",n,{configurable:!0})}function Cs(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function TR(t,e){t.ecrd(n=>{e.dispatch(n)},bR.I_AM_THE_JSACTION_FRAMEWORK)}function a4(t){return t?.q??[]}function c4(t){t&&(hR(t.c,t.et,t.h),hR(t.c,t.etc,t.h,!0))}function hR(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var l4=!1,DR=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=l4;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=Q3(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){yR(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&N3.indexOf(n)>=0)return;let o=(a,c,u)=>{this.handleEvent(a,c,u)};this.eventHandlers[n]=o;let s=F3(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{o(n,c,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),c4(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=wR(i);lE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function SR(t,e=window){return a4(e._ejsas?.[t])}function dE(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var OR=Symbol("InputSignalNode#UNSET"),x4=re(L({},ph),{transformFn:void 0,applyValueToInputSignal(t,e){ua(t,e)}});function NR(t,e){let n=Object.create(x4);n.value=t,n.transformFn=e?.transform;function r(){if(aa(n),n.value===OR){let i=null;throw new G(-950,i)}return n.value}return r[rn]=n,r}var Ip=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Bl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},O4=new K("");O4.__NG_ELEMENT_ID__=t=>{let e=Kt();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new G(204,!1)};function AR(t,e){return NR(t,e)}function N4(t){return NR(OR,t)}var kR=(AR.required=N4,AR);var hE=new K(""),k4=new K("");function iu(t){return!t.moduleRef}function F4(t){let e=iu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(xe);return n.run(()=>{iu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(En),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),iu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(hE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(hE);s.add(o),t.moduleRef.onDestroy(()=>{Ol(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return V4(r,n,()=>{let o=e.get(_r),s=o.add(),a=e.get(K0);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(ru,tu);if(eR(c||tu),!e.get(k4,!0))return iu(t)?e.get(Ot):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(iu(t)){let h=e.get(Ot);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return L4?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var L4;function V4(t,e,n){try{let r=n();return uo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var wp=null;function U4(t=[],e){return We.create({name:e,providers:[{provide:Tl,useValue:"platform"},{provide:hE,useValue:new Set([()=>wp=null])},...t]})}function j4(t=[]){if(wp)return wp;let e=U4(t);return wp=e,G1(),z4(e),e}function z4(t){let e=t.get(Wf,null);bt(t,()=>{e?.forEach(n=>n())})}function ou(){return!1}var po=(()=>{class t{static __NG_ELEMENT_ID__=B4}return t})();function B4(t){return $4(Kt(),Se(),(t&16)===16)}function $4(t,e,n){if(Ei(t)&&!n){let r=nr(t.index,e);return new lo(r,r)}else if(t.type&175){let r=e[yn];return new lo(r,e)}return null}function FR(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Ue(8);try{let o=i?.injector??j4(r),s=[aR({}),{provide:Rr,useExisting:tE},BS,...n||[]],a=new jl({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return F4({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ue(9)}}var Cp=new WeakSet,MR="",bp=[];function RR(t){return t.get(f0,dM)}function LR(){let t=[{provide:f0,useFactory:()=>{let e=!0;{let n=R(jr);e=!!window._ejsas?.[n]}return e&&jn("NgEventReplay"),e}}];return t.push({provide:Jn,useValue:()=>{let e=R(Ot),{injector:n}=e;if(!Cp.has(e)){let r=R(p0);if(RR(n)){yM();let i=n.get(jr),o=_M(i,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(fM(s,a,c),pM(s,r))});e.onDestroy(o)}}},multi:!0},{provide:ho,useFactory:()=>{let e=R(Ot),{injector:n}=e;return()=>{if(!RR(n)||Cp.has(e))return;Cp.add(e);let r=n.get(jr);e.onDestroy(()=>{Cp.delete(e),dE(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(mM);H4(i,n);let o=n.get(p0);o.get(MR)?.forEach(gM),o.delete(MR);let s=i.instance;DM(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var H4=(t,e)=>{let n=e.get(jr),r=window._ejsas[n],i=t.instance=new DR(new yp(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=SR(n);i.replayEarlyEventInfos(o),dE(n);let s=new Ep(a=>{q4(e,a,a.currentTarget)});TR(i,s)};function q4(t,e,n){let r=(n&&n.getAttribute(ql))??"";/d\d+/.test(r)?W4(r,t,e,n):e.eventPhase===uE.REPLAY&&g0(e,n)}function W4(t,e,n,r){bp.push({event:n,currentTarget:r}),Q1(e,t,G4)}function G4(t){let e=[...bp],n=new Set(t);bp=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(ql);n.has(o)?g0(r,i):bp.push({event:r,currentTarget:i})}}var PR=!1;function K4(){PR||(PR=!0,bM(),J1(),rR(),X1(),H1(),V1(),b1(),o1())}function Y4(t){return t.whenStable()}function VR(){let t=[{provide:Hl,useFactory:()=>{let e=!0;return e=!!R(_s,{optional:!0})?.get(m0,null),e&&jn("NgHydration"),e}},{provide:Jn,useValue:()=>{y1(!1),R(Hl)&&(MM($l()),K4())},multi:!0}];return t.push({provide:h0,useFactory:()=>R(Hl)},{provide:ho,useFactory:()=>{if(R(Hl)){let e=R(Ot);return()=>{Y4(e).then(()=>{e.destroyed||U0(e)})}}return()=>{}},multi:!0}),ht(t)}function ws(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var zR=null;function or(){return zR}function fE(t){zR??=t}var su=class{},pE=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(BR),providedIn:"platform"})}return t})();var BR=(()=>{class t extends pE{_location;_history;_doc=R(Pt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return or().getBaseHref(this._doc)}onPopState(n){let r=or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=or().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function $R(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function UR(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function go(t){return t&&t[0]!=="?"?`?${t}`:t}var qa=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(qR),providedIn:"root"})}return t})(),HR=new K(""),qR=(()=>{class t extends qa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return $R(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+go(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+go(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+go(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ve(pE),ve(HR,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wa=(()=>{class t{_subject=new it;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=J4(UR(jR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+go(r))}normalize(n){return t.stripTrailingSlash(Z4(this._basePath,jR(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+go(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+go(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=go;static joinWithSlash=$R;static stripTrailingSlash=UR;static \u0275fac=function(r){return new(r||t)(ve(qa))};static \u0275prov=ee({token:t,factory:()=>Q4(),providedIn:"root"})}return t})();function Q4(){return new Wa(ve(qa))}function Z4(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jR(t){return t.replace(/\/index.html$/,"")}function J4(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var an=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(an||{}),Ge=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(Ge||{}),Sn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Sn||{}),Si={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function GR(t){return $n(t)[vt.LocaleId]}function KR(t,e,n){let r=$n(t),i=[r[vt.DayPeriodsFormat],r[vt.DayPeriodsStandalone]],o=sr(i,e);return sr(o,n)}function YR(t,e,n){let r=$n(t),i=[r[vt.DaysFormat],r[vt.DaysStandalone]],o=sr(i,e);return sr(o,n)}function QR(t,e,n){let r=$n(t),i=[r[vt.MonthsFormat],r[vt.MonthsStandalone]],o=sr(i,e);return sr(o,n)}function ZR(t,e){let r=$n(t)[vt.Eras];return sr(r,e)}function au(t,e){let n=$n(t);return sr(n[vt.DateFormat],e)}function cu(t,e){let n=$n(t);return sr(n[vt.TimeFormat],e)}function lu(t,e){let r=$n(t)[vt.DateTimeFormat];return sr(r,e)}function uu(t,e){let n=$n(t),r=n[vt.NumberSymbols][e];if(typeof r>"u"){if(e===Si.CurrencyDecimal)return n[vt.NumberSymbols][Si.Decimal];if(e===Si.CurrencyGroup)return n[vt.NumberSymbols][Si.Group]}return r}function JR(t){if(!t[vt.ExtraData])throw new G(2303,!1)}function XR(t){let e=$n(t);return JR(e),(e[vt.ExtraData][2]||[]).map(r=>typeof r=="string"?gE(r):[gE(r[0]),gE(r[1])])}function eP(t,e,n){let r=$n(t);JR(r);let i=[r[vt.ExtraData][0],r[vt.ExtraData][1]],o=sr(i,e)||[];return sr(o,n)||[]}function sr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new G(2304,!1)}function gE(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var X4=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tp={},e$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function tP(t,e,n,r){let i=l$(t);e=Di(n,e)||e;let s=[],a;for(;e;)if(a=e$.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=rP(r,c),i=c$(i,r));let u="";return s.forEach(h=>{let p=s$(h);u+=p?p(i,n,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Rp(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Di(t,e){let n=GR(t);if(Tp[n]??={},Tp[n][e])return Tp[n][e];let r="";switch(e){case"shortDate":r=au(t,Sn.Short);break;case"mediumDate":r=au(t,Sn.Medium);break;case"longDate":r=au(t,Sn.Long);break;case"fullDate":r=au(t,Sn.Full);break;case"shortTime":r=cu(t,Sn.Short);break;case"mediumTime":r=cu(t,Sn.Medium);break;case"longTime":r=cu(t,Sn.Long);break;case"fullTime":r=cu(t,Sn.Full);break;case"short":let i=Di(t,"shortTime"),o=Di(t,"shortDate");r=Dp(lu(t,Sn.Short),[i,o]);break;case"medium":let s=Di(t,"mediumTime"),a=Di(t,"mediumDate");r=Dp(lu(t,Sn.Medium),[s,a]);break;case"long":let c=Di(t,"longTime"),u=Di(t,"longDate");r=Dp(lu(t,Sn.Long),[c,u]);break;case"full":let h=Di(t,"fullTime"),p=Di(t,"fullDate");r=Dp(lu(t,Sn.Full),[h,p]);break}return r&&(Tp[n][e]=r),r}function Dp(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function yr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function t$(t,e){return yr(t,3).substring(0,e)}function Tt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=n$(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return t$(a,e);let c=uu(s,Si.MinusSign);return yr(a,e,c,r,i)}}function n$(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new G(2301,!1)}}function nt(t,e,n=an.Format,r=!1){return function(i,o){return r$(i,o,t,e,n,r)}}function r$(t,e,n,r,i,o){switch(n){case 2:return QR(e,i,r)[t.getMonth()];case 1:return YR(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let u=XR(e),h=eP(e,i,r),p=u.findIndex(_=>{if(Array.isArray(_)){let[y,T]=_,k=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(k&&N)return!0}else if(k||N)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return KR(e,i,r)[s<12?0:1];case 3:return ZR(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new G(2302,!1)}}function Sp(t){return function(e,n,r){let i=-1*r,o=uu(n,Si.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+yr(s,2,o)+yr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+yr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+yr(s,2,o)+":"+yr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+yr(s,2,o)+":"+yr(Math.abs(i%60),2,o);default:throw new G(2310,!1)}}}var i$=0,Mp=4;function o$(t){let e=Rp(t,i$,1).getDay();return Rp(t,0,1+(e<=Mp?Mp:Mp+7)-e)}function nP(t){let e=t.getDay(),n=e===0?-3:Mp-e;return Rp(t.getFullYear(),t.getMonth(),t.getDate()+n)}function mE(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=nP(n),s=o$(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return yr(i,t,uu(r,Si.MinusSign))}}function Ap(t,e=!1){return function(n,r){let o=nP(n).getFullYear();return yr(o,t,uu(r,Si.MinusSign),e)}}var _E={};function s$(t){if(_E[t])return _E[t];let e;switch(t){case"G":case"GG":case"GGG":e=nt(3,Ge.Abbreviated);break;case"GGGG":e=nt(3,Ge.Wide);break;case"GGGGG":e=nt(3,Ge.Narrow);break;case"y":e=Tt(0,1,0,!1,!0);break;case"yy":e=Tt(0,2,0,!0,!0);break;case"yyy":e=Tt(0,3,0,!1,!0);break;case"yyyy":e=Tt(0,4,0,!1,!0);break;case"Y":e=Ap(1);break;case"YY":e=Ap(2,!0);break;case"YYY":e=Ap(3);break;case"YYYY":e=Ap(4);break;case"M":case"L":e=Tt(1,1,1);break;case"MM":case"LL":e=Tt(1,2,1);break;case"MMM":e=nt(2,Ge.Abbreviated);break;case"MMMM":e=nt(2,Ge.Wide);break;case"MMMMM":e=nt(2,Ge.Narrow);break;case"LLL":e=nt(2,Ge.Abbreviated,an.Standalone);break;case"LLLL":e=nt(2,Ge.Wide,an.Standalone);break;case"LLLLL":e=nt(2,Ge.Narrow,an.Standalone);break;case"w":e=mE(1);break;case"ww":e=mE(2);break;case"W":e=mE(1,!0);break;case"d":e=Tt(2,1);break;case"dd":e=Tt(2,2);break;case"c":case"cc":e=Tt(7,1);break;case"ccc":e=nt(1,Ge.Abbreviated,an.Standalone);break;case"cccc":e=nt(1,Ge.Wide,an.Standalone);break;case"ccccc":e=nt(1,Ge.Narrow,an.Standalone);break;case"cccccc":e=nt(1,Ge.Short,an.Standalone);break;case"E":case"EE":case"EEE":e=nt(1,Ge.Abbreviated);break;case"EEEE":e=nt(1,Ge.Wide);break;case"EEEEE":e=nt(1,Ge.Narrow);break;case"EEEEEE":e=nt(1,Ge.Short);break;case"a":case"aa":case"aaa":e=nt(0,Ge.Abbreviated);break;case"aaaa":e=nt(0,Ge.Wide);break;case"aaaaa":e=nt(0,Ge.Narrow);break;case"b":case"bb":case"bbb":e=nt(0,Ge.Abbreviated,an.Standalone,!0);break;case"bbbb":e=nt(0,Ge.Wide,an.Standalone,!0);break;case"bbbbb":e=nt(0,Ge.Narrow,an.Standalone,!0);break;case"B":case"BB":case"BBB":e=nt(0,Ge.Abbreviated,an.Format,!0);break;case"BBBB":e=nt(0,Ge.Wide,an.Format,!0);break;case"BBBBB":e=nt(0,Ge.Narrow,an.Format,!0);break;case"h":e=Tt(3,1,-12);break;case"hh":e=Tt(3,2,-12);break;case"H":e=Tt(3,1);break;case"HH":e=Tt(3,2);break;case"m":e=Tt(4,1);break;case"mm":e=Tt(4,2);break;case"s":e=Tt(5,1);break;case"ss":e=Tt(5,2);break;case"S":e=Tt(6,1);break;case"SS":e=Tt(6,2);break;case"SSS":e=Tt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Sp(0);break;case"ZZZZZ":e=Sp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Sp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Sp(2);break;default:return null}return _E[t]=e,e}function rP(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function a$(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function c$(t,e,n){let i=t.getTimezoneOffset(),o=rP(e,i);return a$(t,-1*(o-i))}function l$(t){if(WR(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Rp(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(X4))return u$(r)}let e=new Date(t);if(!WR(e))throw new G(2311,!1);return e}function u$(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),u=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,u),e}function WR(t){return t instanceof Date&&!isNaN(t.valueOf())}function d$(t,e){return new G(2100,!1)}var h$="mediumDate",iP=new K(""),oP=new K(""),vE=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??h$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tP(n,s,o||this.locale,a)}catch(s){throw d$(t,s.message)}}static \u0275fac=function(r){return new(r||t)(be(ru,16),be(iP,24),be(oP,24))};static \u0275pipe=$0({name:"date",type:t,pure:!0})}return t})();var Ke=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Br({type:t});static \u0275inj=gr({})}return t})();function yE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var du=class{};var EE="browser";function sP(t){return t===EE}var hu=class{_doc;constructor(e){this._doc=e}manager},Pp=(()=>{class t extends hu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ve(Pt))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Op=new K(""),TE=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Pp));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Pp);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ve(Op),ve(xe))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),CE="ng-app-id";function cP(t){for(let e of t)e.remove()}function lP(t,e){let n=e.createElement("style");return n.textContent=t,n}function p$(t,e,n,r){let i=t.head?.querySelectorAll(`style[${CE}="${e}"],link[${CE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(CE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function bE(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var DE=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,p$(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,lP);r?.forEach(i=>this.addUsage(i,this.external,bE))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(cP(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])cP(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,lP(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,bE(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ve(Pt),ve(jr),ve(Gf,8),ve(Ii))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),wE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},SE=/%COMP%/g;var dP="%COMP%",g$=`_nghost-${dP}`,m$=`_ngcontent-${dP}`,_$=!0,v$=new K("",{providedIn:"root",factory:()=>_$});function y$(t){return m$.replace(SE,t)}function E$(t){return g$.replace(SE,t)}function hP(t,e){return e.map(n=>n.replace(SE,t))}var AE=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new fu(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof xp?i.applyToHost(n):i instanceof pu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case bi.Emulated:o=new xp(c,u,r,this.appId,h,s,a,p,_);break;case bi.ShadowDom:return new IE(c,u,n,r,s,a,this.nonce,p,_);default:o=new pu(c,u,r,h,s,a,p,_);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ve(TE),ve(DE),ve(jr),ve(v$),ve(Pt),ve(xe),ve(Gf),ve(vs,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),fu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(wE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(uP(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(uP(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=wE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Lr.DashCase|Lr.Important)?e.style.setProperty(n,r,i&Lr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Lr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=or().getGlobalEventTarget(this.doc,e),!e))throw new G(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function uP(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var IE=class extends fu{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=hP(i.id,h);for(let _ of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=_,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let _ of p){let y=bE(_,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},pu=class extends fu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?hP(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&fs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},xp=class extends pu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,u,h),this.contentAttr=y$(h),this.hostAttr=E$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Np=class t extends su{supportsDOMEvents=!0;static makeCurrent(){fE(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=C$();return n==null?null:w$(n)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yE(document.cookie,e)}},gu=null;function C$(){return gu=gu||document.head.querySelector("base"),gu?gu.getAttribute("href"):null}function w$(t){return new URL(t,document.baseURI).pathname}var b$=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),fP=["alt","control","meta","shift"],I$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},T$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},pP=(()=>{class t extends hu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>or().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),fP.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=I$[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fP.forEach(s=>{if(s!==i){let a=T$[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ve(Pt))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();function ME(t,e,n){let r=L({rootComponent:t,platformRef:n?.platformRef},D$(e));return FR(r)}function D$(t){return{appProviders:[...P$,...t?.providers??[]],platformProviders:R$}}function S$(){Np.makeCurrent()}function A$(){return new fr}function M$(){return l0(document),document}var R$=[{provide:Ii,useValue:EE},{provide:Wf,useValue:S$,multi:!0},{provide:Pt,useFactory:M$}];var P$=[{provide:Tl,useValue:"root"},{provide:fr,useFactory:A$},{provide:Op,useClass:Pp,multi:!0,deps:[Pt]},{provide:Op,useClass:pP,multi:!0,deps:[Pt]},AE,DE,TE,{provide:ps,useExisting:AE},{provide:du,useClass:b$},[]];var mu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var x$="X-Request-URL",O$="text/plain",N$="application/json",She=`${N$}, ${O$}, */*`;var PE=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(PE||{}),RE=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new mu,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var kp=class t extends RE{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=PE.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var gP=new K("");var Ahe=RegExp(`^${x$}:`,"m");var k$=new K(""),F$="b",L$="h",V$="s",U$="st",j$="u",z$="rt",xE=new K(""),B$=["GET","HEAD"];function $$(t,e){let y=R(xE),{isCacheActive:n}=y,r=gD(y,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!B$.includes(o)||!r.includeRequestsWithAuthHeaders&&H$(t)||r.filter?.(t)===!1)return e(t);let s=R(_s);if(R(k$,{optional:!0}))throw new G(2803,!1);let c=t.url,u=q$(t,c),h=s.get(u,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[F$]:T,[z$]:k,[L$]:N,[V$]:B,[U$]:ne,[j$]:ae}=h,ge=T;switch(k){case"arraybuffer":ge=new TextEncoder().encode(T).buffer;break;case"blob":ge=new Blob([T]);break}let lt=new mu(N);return oe(new kp({body:ge,headers:lt,status:B,statusText:ne,url:ae}))}return e(t)}function H$(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function mP(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function q$(t,e){let{params:n,method:r,responseType:i}=t,o=mP(n),s=t.serializeBody();s instanceof URLSearchParams?s=mP(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),c=W$(a);return c}function W$(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function _P(t){return[{provide:xE,useFactory:()=>(jn("NgHttpTransferCache"),L({isCacheActive:!0},t))},{provide:gP,useValue:$$,multi:!0},{provide:ho,multi:!0,useFactory:()=>{let e=R(Ot),n=R(xE);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var vP=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ve(Pt))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fp=(function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t})(Fp||{});function G$(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function yP(){return G$(Fp.EventReplay,LR())}function EP(...t){let e=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);let r=n.has(Fp.HttpTransferCacheOptions);return ht([[],[],VR(),n.has(Fp.NoHttpTransferCache)||r?[]:_P({}),e])}var Ee="primary",Pu=Symbol("RouteTitle"),LE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ts(t){return new LE(t)}function AP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Y$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$r(t[n],e[n]))return!1;return!0}function $r(t,e){let n=t?VE(t):void 0,r=e?VE(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!MP(t[i],e[i]))return!1;return!0}function VE(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function MP(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function RP(t){return t.length>0?t[t.length-1]:null}function Mi(t){return uv(t)?t:uo(t)?Te(Promise.resolve(t)):oe(t)}var Q$={exact:xP,subset:OP},PP={exact:Z$,subset:J$,ignored:()=>!0};function CP(t,e,n){return Q$[n.paths](t.root,e.root,n.matrixParams)&&PP[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Z$(t,e){return $r(t,e)}function xP(t,e,n){if(!bs(t.segments,e.segments)||!Up(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!xP(t.children[r],e.children[r],n))return!1;return!0}function J$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MP(t[n],e[n]))}function OP(t,e,n){return NP(t,e,e.segments,n)}function NP(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!bs(i,n)||e.hasChildren()||!Up(i,n,r))}else if(t.segments.length===n.length){if(!bs(t.segments,n)||!Up(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!OP(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!bs(t.segments,i)||!Up(t.segments,i,r)||!t.children[Ee]?!1:NP(t.children[Ee],e,o,r)}}function Up(t,e,n){return e.every((r,i)=>PP[n](t[i].parameters,r.parameters))}var qr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ts(this.queryParams),this._queryParamMap}toString(){return t6.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jp(this)}},mo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ts(this.parameters),this._parameterMap}toString(){return FP(this)}};function X$(t,e){return bs(t,e)&&t.every((n,r)=>$r(n.parameters,e[r].parameters))}function bs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function e6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ee&&(n=n.concat(e(i,r)))}),n}var xu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>new Ds,providedIn:"root"})}return t})(),Ds=class{parse(e){let n=new jE(e);return new qr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${_u(e.root,!0)}`,r=i6(e.queryParams),i=typeof e.fragment=="string"?`#${n6(e.fragment)}`:"";return`${n}${r}${i}`}},t6=new Ds;function jp(t){return t.segments.map(e=>FP(e)).join("/")}function _u(t,e){if(!t.hasChildren())return jp(t);if(e){let n=t.children[Ee]?_u(t.children[Ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ee&&r.push(`${i}:${_u(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=e6(t,(r,i)=>i===Ee?[_u(t.children[Ee],!1)]:[`${i}:${_u(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ee]!=null?`${jp(t)}/${n[0]}`:`${jp(t)}/(${n.join("//")})`}}function kP(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lp(t){return kP(t).replace(/%3B/gi,";")}function n6(t){return encodeURI(t)}function UE(t){return kP(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zp(t){return decodeURIComponent(t)}function wP(t){return zp(t.replace(/\+/g,"%20"))}function FP(t){return`${UE(t.path)}${r6(t.parameters)}`}function r6(t){return Object.entries(t).map(([e,n])=>`;${UE(e)}=${UE(n)}`).join("")}function i6(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Lp(n)}=${Lp(i)}`).join("&"):`${Lp(n)}=${Lp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var o6=/^[^\/()?;#]+/;function OE(t){let e=t.match(o6);return e?e[0]:""}var s6=/^[^\/()?;=#]+/;function a6(t){let e=t.match(s6);return e?e[0]:""}var c6=/^[^=?&#]+/;function l6(t){let e=t.match(c6);return e?e[0]:""}var u6=/^[^&#]+/;function d6(t){let e=t.match(u6);return e?e[0]:""}var jE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ee]=new ze(e,n)),r}parseSegment(){let e=OE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new mo(zp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=a6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=OE(this.remaining);i&&(r=i,this.capture(r))}e[zp(n)]=zp(r)}parseQueryParam(e){let n=l6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=d6(this.remaining);s&&(r=s,this.capture(r))}let i=wP(n),o=wP(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=OE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ee);let s=this.parseChildren();n[o??Ee]=Object.keys(s).length===1&&s[Ee]?s[Ee]:new ze([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function LP(t){return t.segments.length>0?new ze([],{[Ee]:t}):t}function VP(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=VP(i);if(r===Ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ze(t.segments,e);return h6(n)}function h6(t){if(t.numberOfChildren===1&&t.children[Ee]){let e=t.children[Ee];return new ze(t.segments.concat(e.segments),e.children)}return t}function _o(t){return t instanceof qr}function UP(t,e,n=null,r=null){let i=jP(t);return zP(i,e,n,r)}function jP(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new ze(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=LP(r);return e??i}function zP(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return NE(i,i,i,n,r);let o=f6(e);if(o.toRoot())return NE(i,i,new ze([],{}),n,r);let s=p6(o,i,t),a=s.processChildren?yu(s.segmentGroup,s.index,o.commands):$P(s.segmentGroup,s.index,o.commands);return NE(i,s.segmentGroup,a,n,r)}function Bp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function wu(t){return typeof t=="object"&&t!=null&&t.outlets}function NE(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;t===e?s=n:s=BP(t,e,n);let a=LP(VP(s));return new qr(a,o,i)}function BP(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=BP(o,e,n)}),new ze(t.segments,r)}var $p=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Bp(r[0]))throw new G(4003,!1);let i=r.find(wu);if(i&&i!==RP(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function f6(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new $p(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new $p(n,e,r)}var Ya=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function p6(t,e,n){if(t.isAbsolute)return new Ya(e,!0,0);if(!n)return new Ya(e,!1,NaN);if(n.parent===null)return new Ya(n,!0,0);let r=Bp(t.commands[0])?0:1,i=n.segments.length-1+r;return g6(n,i,t.numberOfDoubleDots)}function g6(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new Ya(r,!1,i-o)}function m6(t){return wu(t[0])?t[0].outlets:{[Ee]:t}}function $P(t,e,n){if(t??=new ze([],{}),t.segments.length===0&&t.hasChildren())return yu(t,e,n);let r=_6(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ze(t.segments.slice(0,r.pathIndex),{});return o.children[Ee]=new ze(t.segments.slice(r.pathIndex),t.children),yu(o,0,i)}else return r.match&&i.length===0?new ze(t.segments,{}):r.match&&!t.hasChildren()?zE(t,e,n):r.match?yu(t,0,i):zE(t,e,n)}function yu(t,e,n){if(n.length===0)return new ze(t.segments,{});{let r=m6(n),i={};if(Object.keys(r).some(o=>o!==Ee)&&t.children[Ee]&&t.numberOfChildren===1&&t.children[Ee].segments.length===0){let o=yu(t.children[Ee],e,n);return new ze(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=$P(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ze(t.segments,i)}}function _6(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(wu(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!IP(c,u,s))return o;r+=2}else{if(!IP(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zE(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(wu(o)){let c=v6(o.outlets);return new ze(r,c)}if(i===0&&Bp(n[0])){let c=t.segments[e];r.push(new mo(c.path,bP(n[0]))),i++;continue}let s=wu(o)?o.outlets[Ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Bp(a)?(r.push(new mo(s,bP(a))),i+=2):(r.push(new mo(s,{})),i++)}return new ze(r,{})}function v6(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=zE(new ze([],{}),0,r))}),e}function bP(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function IP(t,e,n){return t==n.path&&$r(e,n.parameters)}var Eu="imperative",Vt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Vt||{}),Wn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Ss=class extends Wn{type=Vt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gn=class extends Wn{urlAfterRedirects;type=Vt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Cn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Cn||{}),bu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(bu||{}),Hr=class extends Wn{reason;code;type=Vt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ai=class extends Wn{reason;code;type=Vt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Za=class extends Wn{error;target;type=Vt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Iu=class extends Wn{urlAfterRedirects;state;type=Vt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hp=class extends Wn{urlAfterRedirects;state;type=Vt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qp=class extends Wn{urlAfterRedirects;state;shouldActivate;type=Vt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wp=class extends Wn{urlAfterRedirects;state;type=Vt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gp=class extends Wn{urlAfterRedirects;state;type=Vt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kp=class{route;type=Vt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yp=class{route;type=Vt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qp=class{snapshot;type=Vt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zp=class{snapshot;type=Vt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jp=class{snapshot;type=Vt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xp=class{snapshot;type=Vt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Tu=class{},Ja=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function y6(t){return!(t instanceof Tu)&&!(t instanceof Ja)}function E6(t,e){return t.providers&&!t._injector&&(t._injector=$a(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Er(t){return t.outlet||Ee}function C6(t,e){let n=t.filter(r=>Er(r)===e);return n.push(...t.filter(r=>Er(r)!==e)),n}function tc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var eg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new nc(this.rootInjector)}},nc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new eg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ve(gt))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=BE(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=BE(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=$E(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $E(e,this._root).map(n=>n.value)}};function BE(t,e){if(t===e.value)return e;for(let n of e.children){let r=BE(t,n);if(r)return r}return null}function $E(t,e){if(t===e.value)return[e];for(let n of e.children){let r=$E(t,n);if(r.length)return r.unshift(e),r}return[]}var qn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ka(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Du=class extends tg{snapshot;constructor(e,n){super(e),this.snapshot=n,ZE(this,e)}toString(){return this.snapshot.toString()}};function HP(t){let e=w6(t),n=new qt([new mo("",{})]),r=new qt({}),i=new qt({}),o=new qt({}),s=new qt(""),a=new Cr(n,r,o,s,i,Ee,t,e.root);return a.snapshot=e.root,new Du(new qn(a,[]),e)}function w6(t){let e={},n={},r={},o=new Is([],e,r,"",n,Ee,t,null,{});return new Su("",new qn(o,[]))}var Cr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(u=>u[Pu]))??oe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Ts(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Ts(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ng(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&WP(i)&&(r.resolve[Pu]=i.title),r}var Is=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Pu]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ts(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ts(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Su=class extends tg{url;constructor(e,n){super(n),this.url=e,ZE(this,n)}toString(){return qP(this._root)}};function ZE(t,e){e.value._routerState=t,e.children.forEach(n=>ZE(t,n))}function qP(t){let e=t.children.length>0?` { ${t.children.map(qP).join(", ")} } `:"";return`${t.value}${e}`}function kE(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$r(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),$r(e.params,n.params)||t.paramsSubject.next(n.params),Y$(e.url,n.url)||t.urlSubject.next(n.url),$r(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function HE(t,e){let n=$r(t.params,e.params)&&X$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||HE(t.parent,e.parent))}function WP(t){return typeof t.title=="string"||t.title===null}var GP=new K(""),Ou=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ee;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=kR();parentContexts=R(nc);location=R(ys);changeDetector=R(po);inputBinder=R(sg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new qE(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=tt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ur]})}return t})(),qE=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Cr?this.route:e===nc?this.childContexts:e===GP?this.outletData:this.parent.get(e,n)}},sg=new K("");var JE=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=qe({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&O(0,"router-outlet")},dependencies:[Ou],encapsulation:2})}return t})();function XE(t){let e=t.children&&t.children.map(XE),n=e?re(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ee&&(n.component=JE),n}function b6(t,e,n){let r=Au(t,e._root,n?n._root:void 0);return new Du(r,e)}function Au(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=I6(t,e,n);return new qn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Au(t,a)),s}}let r=T6(e.value),i=e.children.map(o=>Au(t,o));return new qn(r,i)}}function I6(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Au(t,r,i);return Au(t,r)})}function T6(t){return new Cr(new qt(t.url),new qt(t.params),new qt(t.queryParams),new qt(t.fragment),new qt(t.data),t.outlet,t.component,t)}var Xa=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},KP="ngNavigationCancelingError";function rg(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YP(!1,Cn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function YP(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[KP]=!0,n.cancellationCode=e,n}function D6(t){return QP(t)&&_o(t.url)}function QP(t){return!!t&&t[KP]}var S6=(t,e,n,r)=>ie(i=>(new WE(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),WE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),kE(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ka(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ka(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ka(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ka(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(kE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),kE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ig=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qa=class{component;route;constructor(e,n){this.component=e,this.route=n}};function A6(t,e,n){let r=t._root,i=e?e._root:null;return vu(r,i,n,[r.value])}function M6(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function rc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Av(t)?t:e.get(t):r}function vu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ka(e);return t.children.forEach(s=>{R6(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Cu(a,n.getContext(s),i)),i}function R6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=P6(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ig(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?vu(t,e,a?a.children:null,r,i):vu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qa(a.outlet.component,s))}else s&&Cu(e,a,i),i.canActivateChecks.push(new ig(r)),o.component?vu(t,null,a?a.children:null,r,i):vu(t,null,n,r,i);return i}function P6(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!bs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!bs(t.url,e.url)||!$r(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!HE(t,e)||!$r(t.queryParams,e.queryParams);case"paramsChange":default:return!HE(t,e)}}function Cu(t,e,n){let r=Ka(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Cu(s,e.children.getContext(o),n):Cu(s,null,n):Cu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Qa(e.outlet.component,i)):n.canDeactivateChecks.push(new Qa(null,i)):n.canDeactivateChecks.push(new Qa(null,i))}function Nu(t){return typeof t=="function"}function x6(t){return typeof t=="boolean"}function O6(t){return t&&Nu(t.canLoad)}function N6(t){return t&&Nu(t.canActivate)}function k6(t){return t&&Nu(t.canActivateChild)}function F6(t){return t&&Nu(t.canDeactivate)}function L6(t){return t&&Nu(t.canMatch)}function ZP(t){return t instanceof pi||t?.name==="EmptyError"}var Vp=Symbol("INITIAL_VALUE");function ec(){return ot(t=>Vh(t.map(e=>e.pipe(gn(1),zh(Vp)))).pipe(ie(e=>{for(let n of e)if(n!==!0){if(n===Vp)return Vp;if(n===!1||V6(n))return n}return!0}),wt(e=>e!==Vp),gn(1)))}function V6(t){return _o(t)||t instanceof Xa}function U6(t,e){return Ct(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?oe(re(L({},n),{guardsResult:!0})):j6(s,r,i,t).pipe(Ct(a=>a&&x6(a)?z6(r,o,t,e):oe(a)),ie(a=>re(L({},n),{guardsResult:a})))})}function j6(t,e,n,r){return Te(t).pipe(Ct(i=>W6(i.component,i.route,n,e,r)),mi(i=>i!==!0,!0))}function z6(t,e,n,r){return Te(e).pipe(Yo(i=>ba($6(i.route.parent,r),B6(i.route,r),q6(t,i.path,n),H6(t,i.route,n))),mi(i=>i!==!0,!0))}function B6(t,e){return t!==null&&e&&e(new Jp(t)),oe(!0)}function $6(t,e){return t!==null&&e&&e(new Qp(t)),oe(!0)}function H6(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>vl(()=>{let s=tc(e)??n,a=rc(o,s),c=N6(a)?a.canActivate(e,t):bt(s,()=>a(e,t));return Mi(c).pipe(mi())}));return oe(i).pipe(ec())}function q6(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>M6(s)).filter(s=>s!==null).map(s=>vl(()=>{let a=s.guards.map(c=>{let u=tc(s.node)??n,h=rc(c,u),p=k6(h)?h.canActivateChild(r,t):bt(u,()=>h(r,t));return Mi(p).pipe(mi())});return oe(a).pipe(ec())}));return oe(o).pipe(ec())}function W6(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let c=tc(e)??i,u=rc(a,c),h=F6(u)?u.canDeactivate(t,e,n,r):bt(c,()=>u(t,e,n,r));return Mi(h).pipe(mi())});return oe(s).pipe(ec())}function G6(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let o=i.map(s=>{let a=rc(s,t),c=O6(a)?a.canLoad(e,n):bt(t,()=>a(e,n));return Mi(c)});return oe(o).pipe(ec(),JP(r))}function JP(t){return yh(kt(e=>{if(typeof e!="boolean")throw rg(t,e)}),ie(e=>e===!0))}function K6(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let o=i.map(s=>{let a=rc(s,t),c=L6(a)?a.canMatch(e,n):bt(t,()=>a(e,n));return Mi(c)});return oe(o).pipe(ec(),JP(r))}var Mu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ru=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ga(t){return Ca(new Mu(t))}function Y6(t){return Ca(new G(4e3,!1))}function Q6(t){return Ca(YP(!1,Cn.GuardRejected))}var GE=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[Ee])return Y6(`${e.redirectTo}`);i=i.children[Ee]}}applyRedirectCommands(e,n,r,i,o){return Z6(n,i,o).pipe(ie(s=>{if(s instanceof qr)throw new Ru(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ru(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new qr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ze(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Z6(t,e,n){if(typeof t=="string")return oe(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:h,title:p}=e;return Mi(bt(n,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var KE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J6(t,e,n,r,i){let o=XP(t,e,n);return o.matched?(r=E6(e,r),K6(r,e,n,i).pipe(ie(s=>s===!0?o:L({},KE)))):oe(o)}function XP(t,e,n){if(e.path==="**")return X6(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},KE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AP)(n,t,e);if(!i)return L({},KE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function X6(t){return{matched:!0,parameters:t.length>0?RP(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function TP(t,e,n,r){return n.length>0&&nH(t,n,r)?{segmentGroup:new ze(e,tH(r,new ze(n,t.children))),slicedSegments:[]}:n.length===0&&rH(t,n,r)?{segmentGroup:new ze(t.segments,eH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ze(t.segments,t.children),slicedSegments:n}}function eH(t,e,n,r){let i={};for(let o of n)if(ag(t,e,o)&&!r[Er(o)]){let s=new ze([],{});i[Er(o)]=s}return L(L({},r),i)}function tH(t,e){let n={};n[Ee]=e;for(let r of t)if(r.path===""&&Er(r)!==Ee){let i=new ze([],{});n[Er(r)]=i}return n}function nH(t,e,n){return n.some(r=>ag(t,e,r)&&Er(r)!==Ee)}function rH(t,e,n){return n.some(r=>ag(t,e,r))}function ag(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function iH(t,e,n){return e.length===0&&!t.children[n]}var YE=class{};function oH(t,e,n,r,i,o,s="emptyOnly"){return new QE(t,e,n,r,i,s,o).recognize()}var sH=31,QE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new GE(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=TP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:n,rootSnapshot:r})=>{let i=new qn(r,n),o=new Su("",i),s=UP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Is([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ee,n).pipe(ie(r=>({children:r,rootSnapshot:n})),Wt(r=>{if(r instanceof Ru)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof qn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(Yo(s=>{let a=r.children[s],c=C6(n,s);return this.processSegmentGroup(e,c,a,s,i)}),jh((s,a)=>(s.push(...a),s)),Xi(null),hv(),Ct(s=>{if(s===null)return Ga(r);let a=ex(s);return aH(a),oe(a)}))}processSegment(e,n,r,i,o,s,a){return Te(n).pipe(Yo(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Wt(u=>{if(u instanceof Mu)return oe(null);throw u}))),mi(c=>!!c),Wt(c=>{if(ZP(c))return iH(r,i,o)?oe(new YE):Ga(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return Er(r)!==s&&(s===Ee||!ag(i,o,r))?Ga(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Ga(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=XP(n,i,o);if(!c)return Ga(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sH&&(this.allowRedirects=!1));let y=new Is(o,u,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,DP(i),Er(i),i.component??i._loadedComponent??null,i,SP(i)),T=ng(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(ot(N=>this.applyRedirects.lineralizeSegments(i,N)),Ct(N=>this.processSegment(e,r,n,N.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=J6(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ot(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ot(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:y}=c,T=new Is(_,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,DP(r),Er(r),r.component??r._loadedComponent??null,r,SP(r)),k=ng(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(k.params),T.data=Object.freeze(k.data);let{segmentGroup:N,slicedSegments:B}=TP(n,_,y,u);if(B.length===0&&N.hasChildren())return this.processChildren(h,u,N,T).pipe(ie(ae=>new qn(T,ae)));if(u.length===0&&B.length===0)return oe(new qn(T,[]));let ne=Er(r)===o;return this.processSegment(h,u,N,B,ne?Ee:o,!0,T).pipe(ie(ae=>new qn(T,ae instanceof qn?[ae]:[])))}))):Ga(n)))}getChildConfig(e,n,r){return n.children?oe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?oe({routes:n._loadedRoutes,injector:n._loadedInjector}):G6(e,n,r,this.urlSerializer).pipe(Ct(i=>i?this.configLoader.loadChildren(e,n).pipe(kt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Q6(n))):oe({routes:[],injector:e})}};function aH(t){t.sort((e,n)=>e.value.outlet===Ee?-1:n.value.outlet===Ee?1:e.value.outlet.localeCompare(n.value.outlet))}function cH(t){let e=t.value.routeConfig;return e&&e.path===""}function ex(t){let e=[],n=new Set;for(let r of t){if(!cH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ex(r.children);e.push(new qn(r.value,i))}return e.filter(r=>!n.has(r))}function DP(t){return t.data||{}}function SP(t){return t.resolve||{}}function lH(t,e,n,r,i,o){return Ct(s=>oH(t,e,n,r,s.extractedUrl,i,o).pipe(ie(({state:a,tree:c})=>re(L({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function uH(t,e){return Ct(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return oe(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of tx(c))s.add(u);let a=0;return Te(s).pipe(Yo(c=>o.has(c)?dH(c,r,t,e):(c.data=ng(c,c.parent,t).resolve,oe(void 0))),kt(()=>a++),Ia(1),Ct(c=>a===s.size?oe(n):bn))})}function tx(t){let e=t.children.map(n=>tx(n)).flat();return[t,...e]}function dH(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!WP(i)&&(o[Pu]=i.title),vl(()=>(t.data=ng(t,t.parent,n).resolve,hH(o,t,e,r).pipe(ie(s=>(t._resolvedData=s,t.data=L(L({},t.data),s),null)))))}function hH(t,e,n,r){let i=VE(t);if(i.length===0)return oe({});let o={};return Te(i).pipe(Ct(s=>fH(t[s],e,n,r).pipe(mi(),kt(a=>{if(a instanceof Xa)throw rg(new Ds,a);o[s]=a}))),Ia(1),ie(()=>o),Wt(s=>ZP(s)?bn:Ca(s)))}function fH(t,e,n,r){let i=tc(e)??r,o=rc(t,i),s=o.resolve?o.resolve(e,n):bt(i,()=>o(e,n));return Mi(s)}function FE(t){return ot(e=>{let n=t(e);return n?Te(n).pipe(ie(()=>e)):oe(e)})}var eC=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ee);return r}getResolvedTitleForRoute(n){return n.data[Pu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(nx),providedIn:"root"})}return t})(),nx=(()=>{class t extends eC{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ve(vP))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ic=new K("",{providedIn:"root",factory:()=>({})}),ku=new K(""),rx=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(eE);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return oe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Mi(bt(n,()=>r.loadComponent())).pipe(ie(ox),ot(sx),kt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),yl(()=>{this.componentLoaders.delete(r)})),o=new _a(i,()=>new it).pipe(ma());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=ix(r,this.compiler,n,this.onLoadEndListener).pipe(yl(()=>{this.childrenLoaders.delete(r)})),s=new _a(o,()=>new it).pipe(ma());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ix(t,e,n,r){return Mi(bt(n,()=>t.loadChildren())).pipe(ie(ox),ot(sx),Ct(i=>i instanceof up||Array.isArray(i)?oe(i):Te(e.compileModuleAsync(i))),ie(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ku,[],{optional:!0,self:!0}).flat()),{routes:s.map(XE),injector:o}}))}function pH(t){return t&&typeof t=="object"&&"default"in t}function ox(t){return pH(t)?t.default:t}function sx(t){return oe(t)}var cg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(gH),providedIn:"root"})}return t})(),gH=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ax=new K("");var cx=new K(""),lx=(()=>{class t{currentNavigation=te(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new it;transitionAbortWithErrorSubject=new it;configLoader=R(rx);environmentInjector=R(gt);destroyRef=R(rr);urlSerializer=R(xu);rootContexts=R(nc);location=R(Wa);inputBindingEnabled=R(sg,{optional:!0})!==null;titleStrategy=R(eC);options=R(ic,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(cg);createViewTransition=R(ax,{optional:!0});navigationErrorHandler=R(cx,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>oe(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Kp(i)),r=i=>this.events.next(new Yp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Lt(()=>{this.transitions?.next(re(L({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new qt(null),this.transitions.pipe(wt(r=>r!==null),ot(r=>{let i=!1;return oe(r).pipe(ot(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Cn.SupersededByNewNavigation),bn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?re(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.rawUrl),"",bu.IgnoredSameUrlNavigation)),o.resolve(!1),bn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return oe(o).pipe(ot(c=>(this.events.next(new Ss(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?bn:Promise.resolve(c))),lH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),kt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let u=new Iu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:h,restoredState:p,extras:_}=o,y=new Ss(c,this.urlSerializer.serialize(u),h,p);this.events.next(y);let T=HP(this.rootComponentType).snapshot;return this.currentTransition=r=re(L({},o),{targetSnapshot:T,urlAfterRedirects:u,extras:re(L({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=u,k)),oe(r)}else return this.events.next(new Ai(o.id,this.urlSerializer.serialize(o.extractedUrl),"",bu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),bn}),kt(o=>{let s=new Hp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ie(o=>(this.currentTransition=r=re(L({},o),{guards:A6(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),U6(this.environmentInjector,o=>this.events.next(o)),kt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw rg(this.urlSerializer,o.guardsResult);let s=new qp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),wt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Cn.GuardRejected),!1)),FE(o=>{if(o.guards.canActivateChecks.length!==0)return oe(o).pipe(kt(s=>{let a=new Wp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ot(s=>{let a=!1;return oe(s).pipe(uH(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Cn.NoDataFromResolver)}}))}),kt(s=>{let a=new Gp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),FE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=tc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(kt(h=>{a.component=h}),ie(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Vh(s(o.targetSnapshot.root)).pipe(Xi(null),gn(1))}),FE(()=>this.afterPreactivation()),ot(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Te(a).pipe(ie(()=>r)):oe(r)}),ie(o=>{let s=b6(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=re(L({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),kt(()=>{this.events.next(new Tu)}),S6(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),gn(1),Bh(new fe(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(wt(()=>!i&&!r.targetRouterState),kt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Cn.Aborted)}))),kt({next:o=>{i=!0,this.lastSuccessfulNavigation=Lt(this.currentNavigation),this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Bh(this.transitionAbortWithErrorSubject.pipe(kt(o=>{throw o}))),yl(()=>{i||this.cancelNavigationTransition(r,"",Cn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Wt(o=>{if(this.destroyed)return r.resolve(!1),bn;if(i=!0,QP(o))this.events.next(new Hr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),D6(o)?this.events.next(new Ja(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Za(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=bt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Xa){let{message:c,cancellationCode:u}=rg(this.urlSerializer,a);this.events.next(new Hr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Ja(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return bn}))}))}cancelNavigationTransition(n,r,i){let o=new Hr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Lt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mH(t){return t!==Eu}var ux=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(_H),providedIn:"root"})}return t})(),og=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},_H=(()=>{class t extends og{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dx=(()=>{class t{urlSerializer=R(xu);options=R(ic,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(Wa);urlHandlingStrategy=R(cg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new qr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof qr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=HP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:()=>R(vH),providedIn:"root"})}return t})(),vH=(()=>{class t extends dx{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Ss?this.updateStateMemento():n instanceof Ai?this.commitTransition(r):n instanceof Iu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Tu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Hr&&n.code!==Cn.SupersededByNewNavigation&&n.code!==Cn.Redirect?this.restoreHistory(r):n instanceof Za?this.restoreHistory(r,!0):n instanceof Gn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tC(t,e){t.events.pipe(wt(n=>n instanceof Gn||n instanceof Hr||n instanceof Za||n instanceof Ai),ie(n=>n instanceof Gn||n instanceof Ai?0:(n instanceof Hr?n.code===Cn.Redirect||n.code===Cn.SupersededByNewNavigation:!1)?2:1),wt(n=>n!==2),gn(1)).subscribe(()=>{e()})}var yH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},EH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(dp);stateManager=R(dx);options=R(ic,{optional:!0})||{};pendingTasks=R(_r);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(lx);urlSerializer=R(xu);location=R(Wa);urlHandlingStrategy=R(cg);injector=R(gt);_events=new it;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(ux);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(ku,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(sg,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Lt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hr&&r.code!==Cn.Redirect&&r.code!==Cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gn)this.navigated=!0;else if(r instanceof Ja){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mH(i.source)},s);this.scheduleNavigation(a,Eu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}y6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Eu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=L({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(En)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Lt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(XE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let _=i?i.snapshot:this.routerState.snapshot.root;p=jP(_)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return zP(p,n,h,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=_o(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Eu,null,r)}navigate(n,r={skipLocationChange:!1}){return CH(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(pr(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},yH):r===!1?i=L({},EH):i=r,_o(n))return CP(this.currentUrlTree,n,i);let o=this.parseUrl(n);return CP(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((p,_)=>{a=p,c=_});let h=this.pendingTasks.add();return tC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CH(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}var Wr=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=te(null);get href(){return Lt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new it;applicationErrorHandler=R(En);options=R(ic,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new Ip("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Gn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_o(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:_o(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(be(Nt),be(Cr),Bl("tabindex"),be(zr),be(Dn),be(qa))};static \u0275dir=tt({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&q("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ti("href",i.reactiveHref(),C0)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ws],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ws],replaceUrl:[2,"replaceUrl","replaceUrl",ws],routerLink:"routerLink"},features:[Ur]})}return t})(),Fu=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new je;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Gn&&this.update()})}ngAfterContentInit(){oe(this.links.changes,oe(null)).pipe(wa()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(n).pipe(wa()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=bH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(be(Nt),be(Dn),be(zr),be(po),be(Wr,8))};static \u0275dir=tt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Q0(o,Wr,5),r&2){let s;Z0(s=J0())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ur]})}return t})();function bH(t){return!!t.paths}var IH=new K("");function nC(t,...e){return ht([{provide:ku,multi:!0,useValue:t},[],{provide:Cr,useFactory:TH,deps:[Nt]},{provide:ho,multi:!0,useFactory:DH},e.map(n=>n.\u0275providers)])}function TH(t){return t.routerState.root}function DH(){let t=R(We);return e=>{let n=t.get(Ot);if(e!==n.components[0])return;let r=t.get(Nt),i=t.get(SH);t.get(AH)===1&&r.initialNavigation(),t.get(MH,null,{optional:!0})?.setUpPreloading(),t.get(IH,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var SH=new K("",{factory:()=>new it}),AH=new K("",{providedIn:"root",factory:()=>1});var MH=new K("");var Cx=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(be(zr),be(Dn))};static \u0275dir=tt({type:t})}return t})(),_g=(()=>{class t extends Cx{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,features:[on]})}return t})(),$u=new K("");var RH={provide:$u,useExisting:_n(()=>Ut),multi:!0};function PH(){let t=or()?or().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var xH=new K(""),Ut=(()=>{class t extends Cx{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!PH())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(be(zr),be(Dn),be(xH,8))};static \u0275dir=tt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&q("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ir([RH]),on]})}return t})();function OH(t){return t==null||wx(t)===0}function wx(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var cc=new K(""),bx=new K("");function NH(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function kH(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function FH(t){return OH(t.value)?{required:!0}:null}function LH(t){return e=>{let n=e.value?.length??wx(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function hx(t){return null}function Ix(t){return t!=null}function Tx(t){return uo(t)?Te(t):t}function Dx(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function Sx(t,e){return e.map(n=>n(t))}function VH(t){return!t.validate}function Ax(t){return t.map(e=>VH(e)?e:n=>e.validate(n))}function UH(t){if(!t)return null;let e=t.filter(Ix);return e.length==0?null:function(n){return Dx(Sx(n,e))}}function oC(t){return t!=null?UH(Ax(t)):null}function jH(t){if(!t)return null;let e=t.filter(Ix);return e.length==0?null:function(n){let r=Sx(n,e).map(Tx);return dv(r).pipe(ie(Dx))}}function sC(t){return t!=null?jH(Ax(t)):null}function fx(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zH(t){return t._rawValidators}function BH(t){return t._rawAsyncValidators}function rC(t){return t?Array.isArray(t)?t:[t]:[]}function ug(t,e){return Array.isArray(t)?t.includes(e):t===e}function px(t,e){let n=rC(e);return rC(t).forEach(i=>{ug(n,i)||n.push(i)}),n}function gx(t,e){return rC(e).filter(n=>!ug(t,n))}var dg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ac=class extends dg{name;get formDirective(){return null}get path(){return null}},Bu=class extends dg{_parent=null;name=null;valueAccessor=null},hg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$H={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Epe=re(L({},$H),{"[class.ng-submitted]":"isSubmitted"}),cn=(()=>{class t extends hg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(be(Bu,2))};static \u0275dir=tt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[on]})}return t})(),lc=(()=>{class t extends hg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(be(ac,10))};static \u0275dir=tt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ae("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[on]})}return t})();var Lu="VALID",lg="INVALID",oc="PENDING",Vu="DISABLED",vo=class{},fg=class extends vo{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ju=class extends vo{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},zu=class extends vo{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},sc=class extends vo{status;source;constructor(e,n){super(),this.status=e,this.source=n}},iC=class extends vo{source;constructor(e){super(),this.source=e}},pg=class extends vo{source;constructor(e){super(),this.source=e}};function Mx(t){return(vg(t)?t.validators:t)||null}function HH(t){return Array.isArray(t)?oC(t):t||null}function Rx(t,e){return(vg(e)?e.asyncValidators:t)||null}function qH(t){return Array.isArray(t)?sC(t):t||null}function vg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function WH(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function GH(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var gg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Lt(this.statusReactive)}set status(e){Lt(()=>this.statusReactive.set(e))}_status=Es(()=>this.statusReactive());statusReactive=te(void 0);get valid(){return this.status===Lu}get invalid(){return this.status===lg}get pending(){return this.status==oc}get disabled(){return this.status===Vu}get enabled(){return this.status!==Vu}errors;get pristine(){return Lt(this.pristineReactive)}set pristine(e){Lt(()=>this.pristineReactive.set(e))}_pristine=Es(()=>this.pristineReactive());pristineReactive=te(!0);get dirty(){return!this.pristine}get touched(){return Lt(this.touchedReactive)}set touched(e){Lt(()=>this.touchedReactive.set(e))}_touched=Es(()=>this.touchedReactive());touchedReactive=te(!1);get untouched(){return!this.touched}_events=new it;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(px(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(px(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gx(e,this._rawAsyncValidators))}hasValidator(e){return ug(this._rawValidators,e)}hasAsyncValidator(e){return ug(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new zu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new zu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(L({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ju(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ju(!0,r))}markAsPending(e={}){this.status=oc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(L({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this.errors=null,this._forEachChild(i=>{i.disable(re(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fg(this.value,r)),this._events.next(new sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Lu,this._forEachChild(r=>{r.enable(re(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(L({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lu||this.status===oc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fg(this.value,n)),this._events.next(new sc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(L({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vu:Lu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=oc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Tx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?Vu:this.errors?lg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oc)?oc:this._anyControlsHaveStatus(lg)?lg:Lu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ju(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new zu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=HH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qH(this._rawAsyncValidators)}},mg=class extends gg{constructor(e,n,r){super(Mx(n),Rx(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){GH(this,!0,e),Object.keys(e).forEach(r=>{WH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new pg(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var aC=new K("",{providedIn:"root",factory:()=>cC}),cC="always";function KH(t,e){return[...e.path,t]}function Px(t,e,n=cC){xx(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),QH(t,e),JH(t,e),ZH(t,e),YH(t,e)}function mx(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function xx(t,e){let n=zH(t);e.validator!==null?t.setValidators(fx(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=BH(t);e.asyncValidator!==null?t.setAsyncValidators(fx(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();mx(e._rawValidators,i),mx(e._rawAsyncValidators,i)}function QH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Ox(t,e)})}function ZH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Ox(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Ox(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function JH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function XH(t,e){t==null,xx(t,e)}function e5(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function t5(t){return Object.getPrototypeOf(t.constructor)===_g}function n5(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function r5(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Ut?n=o:t5(o)?r=o:i=o}),i||r||n||null}var i5={provide:ac,useExisting:_n(()=>As)},Uu=Promise.resolve(),As=(()=>{class t extends ac{callSetDisabledState;get submitted(){return Lt(this.submittedReactive)}_submitted=Es(()=>this.submittedReactive());submittedReactive=te(!1);_directives=new Set;form;ngSubmit=new je;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new mg({},oC(n),sC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Uu.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Px(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Uu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Uu.then(()=>{let r=this._findContainer(n.path),i=new mg({});XH(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Uu.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Uu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),n5(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new iC(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(be(cc,10),be(bx,10),be(aC,8))};static \u0275dir=tt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ir([i5]),on]})}return t})();function _x(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function vx(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var o5=class extends gg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Mx(n),Rx(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(vx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new pg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_x(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_x(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){vx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var s5={provide:Bu,useExisting:_n(()=>Yt)},yx=Promise.resolve(),Yt=(()=>{class t extends Bu{_changeDetectorRef;callSetDisabledState;control=new o5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new je;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=r5(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),e5(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Px(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){yx.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ws(r);yx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?KH(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(be(ac,9),be(cc,10),be(bx,10),be($u,10),be(po,8),be(aC,8))};static \u0275dir=tt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ir([s5]),on,Ur]})}return t})();var uc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=tt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),a5={provide:$u,useExisting:_n(()=>Kn),multi:!0},Kn=(()=>{class t extends _g{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&q("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ir([a5]),on]})}return t})();var c5={provide:$u,useExisting:_n(()=>dc),multi:!0};function Nx(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function l5(t){return t.split(":")[0]}var dc=(()=>{class t extends _g{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=R(Ot).injector;destroyRef=R(rr);cdr=R(po);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Yl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Nx(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=l5(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&q("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ir([c5]),on]})}return t})(),yg=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Nx(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(be(Dn),be(zr),be(dc,9))};static \u0275dir=tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),u5={provide:$u,useExisting:_n(()=>kx),multi:!0};function Ex(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function d5(t){return t.split(":")[0]}var kx=(()=>{class t extends _g{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=d5(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&q("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ir([u5]),on]})}return t})(),Eg=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(Ex(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Ex(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(be(Dn),be(zr),be(kx,9))};static \u0275dir=tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function h5(t){return typeof t=="number"?t:parseInt(t,10)}function Fx(t){return typeof t=="number"?t:parseFloat(t)}var Cg=(()=>{class t{_validator=hx;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):hx,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=tt({type:t,features:[Ur]})}return t})(),f5={provide:cc,useExisting:_n(()=>Hu),multi:!0},Hu=(()=>{class t extends Cg{max;inputName="max";normalizeInput=n=>Fx(n);createValidator=n=>kH(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ti("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[ir([f5]),on]})}return t})(),p5={provide:cc,useExisting:_n(()=>Ri),multi:!0},Ri=(()=>{class t extends Cg{min;inputName="min";normalizeInput=n=>Fx(n);createValidator=n=>NH(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ti("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ir([p5]),on]})}return t})(),g5={provide:cc,useExisting:_n(()=>Ms),multi:!0};var Ms=(()=>{class t extends Cg{required;inputName="required";normalizeInput=ws;createValidator=n=>FH;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ti("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ir([g5]),on]})}return t})();var m5={provide:cc,useExisting:_n(()=>Rs),multi:!0},Rs=(()=>{class t extends Cg{maxlength;inputName="maxlength";normalizeInput=n=>h5(n);createValidator=n=>LH(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Vn(t)))(i||t)}})();static \u0275dir=tt({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ti("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[ir([m5]),on]})}return t})();var _5=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Br({type:t});static \u0275inj=gr({})}return t})();var ln=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:aC,useValue:n.callSetDisabledState??cC}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Br({type:t});static \u0275inj=gr({imports:[_5]})}return t})();var Lx=()=>{};var jx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},v5=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},wg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,y=u&63;c||(y=64,s||(_=64)),r.push(n[h],n[p],n[_],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v5(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new uC;let _=o<<2|a>>4;if(r.push(_),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let T=u<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},y5=function(t){let e=jx(t);return wg.encodeByteArray(e,!0)},Wu=function(t){return y5(t).replace(/\./g,"")},bg=function(t){try{return wg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var E5=()=>hC().__FIREBASE_DEFAULTS__,C5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},w5=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&bg(t[1]);return e&&JSON.parse(e)},Ig=()=>{try{return Lx()||E5()||C5()||w5()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fC=t=>{var e,n;return(n=(e=Ig())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tg=t=>{let e=fC(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},pC=()=>{var t;return(t=Ig())===null||t===void 0?void 0:t.config},gC=t=>{var e;return(e=Ig())===null||e===void 0?void 0:e[`_${t}`]};var Ps=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function br(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hc(t){return(await fetch(t,{credentials:"include"})).ok}function Dg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wu(JSON.stringify(n)),Wu(JSON.stringify(s)),""].join(".")}var qu={};function b5(){let t={prod:[],emulator:[]};for(let e of Object.keys(qu))qu[e]?t.emulator.push(e):t.prod.push(e);return t}function I5(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var Vx=!1;function fc(t,e){if(typeof window>"u"||typeof document>"u"||!br(window.location.host)||qu[t]===e||qu[t]||Vx)return;qu[t]=e;function n(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=b5().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,y){_.setAttribute("width","24"),_.setAttribute("id",y),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Vx=!0,s()},_}function h(_,y){_.setAttribute("id",y),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){let _=I5(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),B=n("preprendIcon"),ne=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let ae=_.element;a(ae),h(N,k);let ge=u();c(ne,B),ae.append(ne,T,N,ge),document.body.appendChild(ae)}o?(T.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function T5(){var t;let e=(t=Ig())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $x(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qx(){let t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wx(){return!T5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gu(){try{return typeof indexedDB=="object"}catch{return!1}}function Gx(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var D5="FirebaseError",wn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=D5,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wr.prototype.create)}},wr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?S5(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new wn(i,a,r)}};function S5(t,e){return t.replace(A5,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var A5=/\{\$([^}]+)}/g;function Kx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(Ux(o)&&Ux(s)){if(!Gr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Ux(t){return t!==null&&typeof t=="object"}function Ku(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pc(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function gc(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Yx(t,e){let n=new dC(t,e);return n.subscribe.bind(n)}var dC=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M5(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=lC),i.error===void 0&&(i.error=lC),i.complete===void 0&&(i.complete=lC);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function M5(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function lC(){}var Tpe=14400*1e3;function Je(t){return t&&t._delegate?t._delegate:t}var Qt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xs="[DEFAULT]";var mC=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ps;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P5(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xs){return this.instances.has(e)}getOptions(e=xs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xs){return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function R5(t){return t===xs?void 0:t}function P5(t){return t.instantiationMode==="EAGER"}var Sg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new mC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var x5=[],Re=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Re||{}),O5={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},N5=Re.INFO,k5={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},F5=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=k5[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kr=class{constructor(e){this.name=e,this._logLevel=N5,this._logHandler=F5,this._userLogHandler=null,x5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}};var L5=(t,e)=>e.some(n=>t instanceof n),Qx,Zx;function V5(){return Qx||(Qx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U5(){return Zx||(Zx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Jx=new WeakMap,vC=new WeakMap,Xx=new WeakMap,_C=new WeakMap,EC=new WeakMap;function j5(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Yr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Jx.set(n,t)}).catch(()=>{}),EC.set(e,t),e}function z5(t){if(vC.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});vC.set(t,e)}var yC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eO(t){yC=t(yC)}function B5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ag(this),e,...n);return Xx.set(r,e.sort?e.sort():[e]),Yr(r)}:U5().includes(t)?function(...e){return t.apply(Ag(this),e),Yr(Jx.get(this))}:function(...e){return Yr(t.apply(Ag(this),e))}}function $5(t){return typeof t=="function"?B5(t):(t instanceof IDBTransaction&&z5(t),L5(t,V5())?new Proxy(t,yC):t)}function Yr(t){if(t instanceof IDBRequest)return j5(t);if(_C.has(t))return _C.get(t);let e=$5(t);return e!==t&&(_C.set(t,e),EC.set(e,t)),e}var Ag=t=>EC.get(t);function nO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Yr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Yr(s.result),c.oldVersion,c.newVersion,Yr(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var H5=["get","getKey","getAll","getAllKeys","count"],q5=["put","add","delete","clear"],CC=new Map;function tO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(CC.get(e))return CC.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=q5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||H5.includes(n)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return CC.set(e,o),o}eO(t=>re(L({},t),{get:(e,n,r)=>tO(e,n)||t.get(e,n,r),has:(e,n)=>!!tO(e,n)||t.has(e,n)}));var bC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W5(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function W5(t){let e=t.getComponent();return e?.type==="VERSION"}var IC="@firebase/app",rO="0.13.2";var Pi=new Kr("@firebase/app"),G5="@firebase/app-compat",K5="@firebase/analytics-compat",Y5="@firebase/analytics",Q5="@firebase/app-check-compat",Z5="@firebase/app-check",J5="@firebase/auth",X5="@firebase/auth-compat",eq="@firebase/database",tq="@firebase/data-connect",nq="@firebase/database-compat",rq="@firebase/functions",iq="@firebase/functions-compat",oq="@firebase/installations",sq="@firebase/installations-compat",aq="@firebase/messaging",cq="@firebase/messaging-compat",lq="@firebase/performance",uq="@firebase/performance-compat",dq="@firebase/remote-config",hq="@firebase/remote-config-compat",fq="@firebase/storage",pq="@firebase/storage-compat",gq="@firebase/firestore",mq="@firebase/ai",_q="@firebase/firestore-compat",vq="firebase",yq="11.10.0";var TC="[DEFAULT]",Eq={[IC]:"fire-core",[G5]:"fire-core-compat",[Y5]:"fire-analytics",[K5]:"fire-analytics-compat",[Z5]:"fire-app-check",[Q5]:"fire-app-check-compat",[J5]:"fire-auth",[X5]:"fire-auth-compat",[eq]:"fire-rtdb",[tq]:"fire-data-connect",[nq]:"fire-rtdb-compat",[rq]:"fire-fn",[iq]:"fire-fn-compat",[oq]:"fire-iid",[sq]:"fire-iid-compat",[aq]:"fire-fcm",[cq]:"fire-fcm-compat",[lq]:"fire-perf",[uq]:"fire-perf-compat",[dq]:"fire-rc",[hq]:"fire-rc-compat",[fq]:"fire-gcs",[pq]:"fire-gcs-compat",[gq]:"fire-fst",[_q]:"fire-fst-compat",[mq]:"fire-vertex","fire-js":"fire-js",[vq]:"fire-js-all"};var Yu=new Map,Cq=new Map,DC=new Map;function iO(t,e){try{t.container.addComponent(e)}catch(n){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yn(t){let e=t.name;if(DC.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;DC.set(e,t);for(let n of Yu.values())iO(n,t);for(let n of Cq.values())iO(n,t);return!0}function Co(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}var wq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new wr("app","Firebase",wq);var SC=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}};var Qr=yq;function RC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:TC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Eo.create("bad-app-name",{appName:String(i)});if(n||(n=pC()),!n)throw Eo.create("no-options");let o=Yu.get(i);if(o){if(Gr(n,o.options)&&Gr(r,o.config))return o;throw Eo.create("duplicate-app",{appName:i})}let s=new Sg(i);for(let c of DC.values())s.addComponent(c);let a=new SC(n,r,s);return Yu.set(i,a),a}function xi(t=TC){let e=Yu.get(t);if(!e&&t===TC&&pC())return RC();if(!e)throw Eo.create("no-app",{appName:t});return e}function Mg(){return Array.from(Yu.values())}function Xe(t,e,n){var r;let i=(r=Eq[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(a.join(" "));return}Yn(new Qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bq="firebase-heartbeat-database",Iq=1,Qu="firebase-heartbeat-store",wC=null;function cO(){return wC||(wC=nO(bq,Iq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Eo.create("idb-open",{originalErrorMessage:t.message})})),wC}async function Tq(t){try{let n=(await cO()).transaction(Qu),r=await n.objectStore(Qu).get(lO(t));return await n.done,r}catch(e){if(e instanceof wn)Pi.warn(e.message);else{let n=Eo.create("idb-get",{originalErrorMessage:e?.message});Pi.warn(n.message)}}}async function oO(t,e){try{let r=(await cO()).transaction(Qu,"readwrite");await r.objectStore(Qu).put(e,lO(t)),await r.done}catch(n){if(n instanceof wn)Pi.warn(n.message);else{let r=Eo.create("idb-set",{originalErrorMessage:n?.message});Pi.warn(r.message)}}}function lO(t){return`${t.name}!${t.options.appId}`}var Dq=1024,Sq=30,AC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new MC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Sq){let s=Mq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=sO(),{heartbeatsToSend:r,unsentEntries:i}=Aq(this._heartbeatsCache.heartbeats),o=Wu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Pi.warn(n),""}}};function sO(){return new Date().toISOString().substring(0,10)}function Aq(t,e=Dq){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),aO(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),aO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var MC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gu()?Gx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await Tq(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return oO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return oO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function aO(t){return Wu(JSON.stringify({version:2,heartbeats:t})).length}function Mq(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Rq(t){Yn(new Qt("platform-logger",e=>new bC(e),"PRIVATE")),Yn(new Qt("heartbeat",e=>new AC(e),"PRIVATE")),Xe(IC,rO,t),Xe(IC,rO,"esm2017"),Xe("fire-js","")}Rq("");var Pq="firebase",xq="11.10.0";Xe(Pq,xq,"app");function uO(t){t===void 0&&(t=R(We));let e=t.get(co);return n=>new fe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Zr=new eo("ANGULARFIRE2_VERSION");function Ns(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var wo=(t,e)=>{let n=e?[e]:Mg(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},mc=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(mc||{}),dO=ou()&&typeof Zone<"u"?mc.WARN:mc.SILENT;var Rg=class{zone;delegate;constructor(e,n=cv){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Jr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=R(xe);this.outsideAngular=n.runOutsideAngular(()=>new Rg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Rg(typeof Zone>"u"?void 0:Zone.current,av))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hO=!1;function Oq(t,e){!hO&&(dO>mc.SILENT||ou())&&(hO=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),dO>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function Nq(t){let e=R(xe,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Os(t){let e=R(xe,{optional:!0});return e?e.run(()=>t()):t()}var kq=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),bt(n,()=>Os(()=>t.apply(void 0,r)))),et=(t,e,n)=>(n||=e?mc.WARN:mc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(Jr),s=R(co),a=R(gt)}catch{return Oq(t,n),t.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Os(()=>s.add())),i[u]=kq(i[u],r,a));let c=Nq(()=>t.apply(this,i));return e?c instanceof fe?c.pipe(Ji(o.outsideAngular),Zi(o.insideAngular),uO(a)):c instanceof Promise?Os(()=>{let u=s.add();return new Promise((h,p)=>{c.then(_=>bt(a,()=>Os(()=>h(_))),_=>bt(a,()=>Os(()=>p(_)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Os(()=>c):c instanceof fe?c.pipe(Ji(o.outsideAngular),Zi(o.insideAngular)):Os(()=>c)});var Ir=class{constructor(e){return e}},Oi=class{constructor(){return Mg()}};function Fq(t){return t&&t.length===1?t[0]:new Ir(xi())}var PC=new K("angularfire2._apps"),Lq={provide:Ir,useFactory:Fq,deps:[[new xt,PC]]},Vq={provide:Oi,deps:[[new xt,PC]]};function Uq(t){return(e,n)=>{let r=n.get(Ii);Xe("angularfire",Zr.full,"core"),Xe("angularfire",Zr.full,"app"),Xe("angular",Tv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ir(i)}}function fO(t,...e){return ht([Lq,Vq,{provide:PC,useFactory:Uq(t),multi:!0,deps:[xe,We,Jr,...e]}])}var pO=et(RC,!0);var jq=new Map,zq={activated:!1,tokenObservers:[]},Bq={initialized:!1,enabled:!1};function Tr(t){return jq.get(t)||Object.assign({},zq)}function vO(){return Bq}var $q="https://content-firebaseappcheck.googleapis.com/v1";var Hq="exchangeDebugToken",gO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Tge=1440*60*1e3;var NC=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ps,this.pending.promise.catch(n=>{}),await qq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ps,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function qq(t){return new Promise(e=>{setTimeout(e,t)})}var Wq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},bo=new wr("appCheck","AppCheck",Wq);function yO(t){if(!Tr(t).activated)throw bo.create("use-before-activation",{appName:t.name})}async function EO({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw bo.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw bo.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw bo.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw bo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}}function CO(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${$q}/projects/${n}/apps/${r}:${Hq}?key=${i}`,body:{debug_token:e}}}var Gq="firebase-app-check-database",Kq=1,kC="firebase-app-check-store";var Pg=null;function Yq(){return Pg||(Pg=new Promise((t,e)=>{try{let n=indexedDB.open(Gq,Kq);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(bo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(kC,{keyPath:"compositeKey"})}}}catch(n){e(bo.create("storage-open",{originalErrorMessage:n?.message}))}}),Pg)}function Qq(t,e){return Zq(Jq(t),e)}async function Zq(t,e){let r=(await Yq()).transaction(kC,"readwrite"),o=r.objectStore(kC).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(bo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function Jq(t){return`${t.options.appId}-${t.name}`}var Zu=new Kr("@firebase/app-check");function xC(t,e){return Gu()?Qq(t,e).catch(n=>{Zu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function wO(){return vO().enabled}async function bO(){let t=vO();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Xq={error:"UNKNOWN_ERROR"};function e8(t){return wg.encodeString(JSON.stringify(t),!1)}async function FC(t,e=!1,n=!1){let r=t.app;yO(r);let i=Tr(r),o=i.token,s;if(o&&!Ju(o)&&(i.token=void 0,o=void 0),!o){let u=await i.cachedTokenPromise;u&&(Ju(u)?o=u:await xC(r,void 0))}if(!e&&o&&Ju(o))return{token:o.token};let a=!1;if(wO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=EO(CO(r,await bO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await xC(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Zu.warn(u.message):n&&Zu.error(u),OC(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Tr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Zu.warn(u.message):n&&Zu.error(u),s=u}let c;return o?s?Ju(o)?c={token:o.token,internalError:s}:c=OC(s):(c={token:o.token},i.token=o,await xC(r,o)):c=OC(s),a&&i8(r,c),c}async function t8(t){let e=t.app;yO(e);let{provider:n}=Tr(e);if(wO()){let r=await bO(),{token:i}=await EO(CO(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function n8(t,e,n,r){let{app:i}=t,o=Tr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ju(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),mO(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>mO(t))}function IO(t,e){let n=Tr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function mO(t){let{app:e}=t,n=Tr(e),r=n.tokenRefresher;r||(r=r8(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function r8(t){let{app:e}=t;return new NC(async()=>{let n=Tr(e),r;if(n.token?r=await FC(t,!0):r=await FC(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Tr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gO.RETRIAL_MIN_WAIT,gO.RETRIAL_MAX_WAIT)}function i8(t,e){let n=Tr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ju(t){return t.expireTimeMillis-Date.now()>0}function OC(t){return{token:e8(Xq),error:t}}var LC=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Tr(this.app);for(let n of e)IO(this.app,n.next);return Promise.resolve()}};function o8(t,e){return new LC(t,e)}function s8(t){return{getToken:e=>FC(t,e),getLimitedUseToken:()=>t8(t),addTokenListener:e=>n8(t,"INTERNAL",e),removeTokenListener:e=>IO(t.app,e)}}var a8="@firebase/app-check",c8="0.10.1";var l8="app-check",_O="app-check-internal";function u8(){Yn(new Qt(l8,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return o8(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(_O).initialize()})),Yn(new Qt(_O,t=>{let e=t.getProvider("app-check").getImmediate();return s8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xe(a8,c8)}u8();var d8="app-check";var Io=class{constructor(){return wo(d8)}};var h8=["localhost","0.0.0.0","127.0.0.1"],Lge=typeof window<"u"&&h8.includes(window.location.hostname);function jO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zO=jO,BO=new wr("auth","Firebase",jO());var Lg=new Kr("@firebase/auth");function f8(t,...e){Lg.logLevel<=Re.WARN&&Lg.warn(`Auth (${Qr}): ${t}`,...e)}function Og(t,...e){Lg.logLevel<=Re.ERROR&&Lg.error(`Auth (${Qr}): ${t}`,...e)}function ei(t,...e){throw cw(t,...e)}function ks(t,...e){return cw(t,...e)}function $O(t,e,n){let r=Object.assign(Object.assign({},zO()),{[e]:n});return new wr("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return $O(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cw(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BO.create(t,...e)}function pe(t,e,...n){if(!t)throw cw(e,...n)}function Ni(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Og(e),new Error(e)}function So(t,e){t||Ni(e)}function zC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function p8(){return TO()==="http:"||TO()==="https:"}function TO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function g8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p8()||$x()||"connection"in navigator)?navigator.onLine:!0}function m8(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Fs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,So(n>e,"Short delay should be less than long delay!"),this.isMobile=zx()||Hx()}get(){return g8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lw(t,e){So(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vg=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var v8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y8=new Fs(3e4,6e4);function Ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mo(t,e,n,r,i={}){return HO(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ku(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);let u=Object.assign({method:e,headers:c},o);return Bx()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&br(t.emulatorConfig.host)&&(u.credentials="include"),Vg.fetch()(await qO(t,t.config.apiHost,n,a),u)})}async function HO(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},_8),e);try{let i=new BC(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw xg(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xg(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw xg(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw xg(t,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $O(t,h,u);ei(t,h)}}catch(i){if(i instanceof wn)throw i;ei(t,"network-request-failed",{message:String(i)})}}async function ad(t,e,n,r,i={}){let o=await Mo(t,e,n,r,i);return"mfaPendingCredential"in o&&ei(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function qO(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?lw(t.config,i):`${t.config.apiScheme}://${i}`;return v8.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function E8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var BC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),y8.get())})}};function xg(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ks(t,e,r);return i.customData._tokenResponse=n,i}function DO(t){return t!==void 0&&t.enterprise!==void 0}var $C=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function C8(t,e){return Mo(t,"GET","/v2/recaptchaConfig",Ao(t,e))}async function w8(t,e){return Mo(t,"POST","/v1/accounts:delete",e)}async function Ug(t,e){return Mo(t,"POST","/v1/accounts:lookup",e)}function ed(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uw(t,e=!1){let n=Je(t),r=await n.getIdToken(e),i=dw(r);pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ed(VC(i.auth_time)),issuedAtTime:ed(VC(i.iat)),expirationTime:ed(VC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function VC(t){return Number(t)*1e3}function dw(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Og("JWT malformed, contained fewer than 3 sections"),null;try{let i=bg(n);return i?JSON.parse(i):(Og("Failed to decode base64 JWT payload"),null)}catch(i){return Og("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SO(t){let e=dw(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wn&&b8(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function b8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var HC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var rd=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ed(this.lastLoginAt),this.creationTime=ed(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function jg(t){var e;let n=t.auth,r=await t.getIdToken(),i=await nd(t,Ug(n,{idToken:r}));pe(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?WO(o.providerUserInfo):[],a=I8(t.providerData,s),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,h=c?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new rd(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function hw(t){let e=Je(t);await jg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I8(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WO(t){return t.map(e=>{var{providerId:n}=e,r=lv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function T8(t,e){let n=await HO(t,{},async()=>{let r=Ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await qO(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return t.emulatorConfig&&br(t.emulatorConfig.host)&&(c.credentials="include"),Vg.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D8(t,e){return Mo(t,"POST","/v2/accounts:revokeToken",Ao(t,e))}var td=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let n=SO(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await T8(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(pe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(pe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ni("not implemented")}};function To(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Do=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await nd(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uw(this,e)}reload(){return hw(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(Fi(this.auth));let e=await this.getIdToken();return await nd(this,w8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,B=(u=n.createdAt)!==null&&u!==void 0?u:void 0,ne=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ae,emailVerified:ge,isAnonymous:lt,providerData:Le,stsTokenManager:A}=n;pe(ae&&A,e,"internal-error");let w=td.fromJSON(this.name,A);pe(typeof ae=="string",e,"internal-error"),To(p,e.name),To(_,e.name),pe(typeof ge=="boolean",e,"internal-error"),pe(typeof lt=="boolean",e,"internal-error"),To(y,e.name),To(T,e.name),To(k,e.name),To(N,e.name),To(B,e.name),To(ne,e.name);let I=new t({uid:ae,auth:e,email:_,emailVerified:ge,displayName:p,isAnonymous:lt,photoURL:T,phoneNumber:y,tenantId:k,stsTokenManager:w,createdAt:B,lastLoginAt:ne});return Le&&Array.isArray(Le)&&(I.providerData=Le.map(S=>Object.assign({},S))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,n,r=!1){let i=new td;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jg(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];pe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?WO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new td;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}};var AO=new Map;function ki(t){So(t instanceof Function,"Expected a class definition");let e=AO.get(t);return e?(So(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AO.set(t,e),e)}var S8=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),qC=S8;function Ng(t,e,n){return`firebase:${t}:${e}:${n}`}var zg=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ng(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ng("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Ug(this.auth,{idToken:e}).catch(()=>{});return n?Do._fromGetAccountInfoResponse(this.auth,n,e):null}return Do._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(ki(qC),e,r);let i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),o=i[0]||ki(qC),s=Ng(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let h=await u._get(s);if(h){let p;if(typeof h=="string"){let _=await Ug(e,{idToken:h}).catch(()=>{});if(!_)break;p=await Do._fromGetAccountInfoResponse(e,_,h)}else p=Do._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new t(o,e,r))}};function MO(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JO(e))return"Blackberry";if(XO(e))return"Webos";if(KO(e))return"Safari";if((e.includes("chrome/")||YO(e))&&!e.includes("edge/"))return"Chrome";if(ZO(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function GO(t=jt()){return/firefox\//i.test(t)}function KO(t=jt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YO(t=jt()){return/crios\//i.test(t)}function QO(t=jt()){return/iemobile/i.test(t)}function ZO(t=jt()){return/android/i.test(t)}function JO(t=jt()){return/blackberry/i.test(t)}function XO(t=jt()){return/webos/i.test(t)}function fw(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A8(t=jt()){var e;return fw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M8(){return qx()&&document.documentMode===10}function eN(t=jt()){return fw(t)||ZO(t)||XO(t)||JO(t)||/windows phone/i.test(t)||QO(t)}function tN(t,e=[]){let n;switch(t){case"Browser":n=MO(jt());break;case"Worker":n=`${MO(jt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qr}/${r}`}var WC=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function R8(t,e={}){return Mo(t,"GET","/v2/passwordPolicy",Ao(t,e))}var P8=6,GC=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:P8,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var KC=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ki(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await zg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Ug(this,{idToken:e}),r=await Do._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(un(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(Fi(this));let n=e?Je(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await R8(this),n=new GC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&ki(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await zg.create(this,[ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&f8(`Error while retrieving App Check token: ${n.error}`),n?.token}};function Vs(t){return Je(t)}var Bg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yx(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x8(t){Yg=t}function nN(t){return Yg.loadJS(t)}function O8(){return Yg.recaptchaEnterpriseScript}function N8(){return Yg.gapiScript}function rN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var YC=class{constructor(){this.enterprise=new QC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},QC=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var k8="recaptcha-enterprise",iN="NO_RECAPTCHA",ZC=class{constructor(e){this.type=k8,this.auth=Vs(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{C8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new $C(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})})}function i(o,s,a){let c=window.grecaptcha;DO(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(iN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new YC().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&DO(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=O8();c.length!==0&&(c+=a),nN(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}};async function Xu(t,e,n,r=!1,i=!1){let o=new ZC(t),s;if(i)s=iN;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function JC(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Xu(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=await Xu(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await Xu(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=await Xu(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{let a=await Xu(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}function pw(t,e){let n=Co(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Gr(o,e??{}))return i;ei(i,"already-initialized")}return n.initialize({options:e})}function F8(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ki);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function gw(t,e,n){let r=Vs(t);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=oN(e),{host:s,port:a}=L8(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(Gr(u,r.config.emulator)&&Gr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,br(s)?(hc(`${o}//${s}${c}`),fc("Auth",!0)):i||V8()}function oN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function L8(t){let e=oN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:RO(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:RO(s)}}}function RO(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function V8(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var id=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,n){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}};async function U8(t,e){return Mo(t,"POST","/v1/accounts:signUp",e)}async function j8(t,e){return ad(t,"POST","/v1/accounts:signInWithPassword",Ao(t,e))}async function z8(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",Ao(t,e))}async function B8(t,e){return ad(t,"POST","/v1/accounts:signInWithEmailLink",Ao(t,e))}var od=class t extends id{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JC(e,n,"signInWithPassword",j8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return z8(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return JC(e,r,"signUpPassword",U8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return B8(e,{idToken:n,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function UC(t,e){return ad(t,"POST","/v1/accounts:signInWithIdp",Ao(t,e))}function $8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function H8(t){let e=pc(gc(t)).link,n=e?pc(gc(e)).deep_link_id:null,r=pc(gc(t)).deep_link_id;return(r?pc(gc(r)).link:null)||r||n||e||t}var $g=class t{constructor(e){var n,r,i,o,s,a;let c=pc(gc(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,p=$8((i=c.mode)!==null&&i!==void 0?i:null);pe(u&&h&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=H8(e);try{return new t(n)}catch{return null}}};var sN=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return od._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=$g.parseLink(r);return pe(i,"argument-error"),od._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Hg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var XC=class extends Hg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function q8(t,e){return ad(t,"POST","/v1/accounts:signUp",Ao(t,e))}var _c=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Do._fromIdTokenResponse(e,r,i),s=PO(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=PO(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function PO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ew=class t extends wn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function aN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ew._fromErrorAndOperation(t,o,e,r):o})}async function W8(t,e,n=!1){let r=await nd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _c._forOperation(t,"link",r)}async function G8(t,e,n=!1){let{auth:r}=t;if(un(r.app))return Promise.reject(Fi(r));let i="reauthenticate";try{let o=await nd(t,aN(r,i,e,t),n);pe(o.idToken,r,"internal-error");let s=dw(o.idToken);pe(s,r,"internal-error");let{sub:a}=s;return pe(t.uid===a,r,"user-mismatch"),_c._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ei(r,"user-mismatch"),o}}async function cN(t,e,n=!1){if(un(t.app))return Promise.reject(Fi(t));let r="signIn",i=await aN(t,r,e),o=await _c._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function mw(t,e){return cN(Vs(t),e)}async function lN(t){let e=Vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _w(t,e,n){if(un(t.app))return Promise.reject(Fi(t));let r=Vs(t),s=await JC(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q8,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&lN(t),c}),a=await _c._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function vw(t,e,n){return un(t.app)?Promise.reject(Fi(t)):mw(Je(t),sN.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lN(t),r})}function yw(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function Ew(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function Cw(t){return Je(t).signOut()}var qg="__sak";var Wg=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qg,"1"),this.storage.removeItem(qg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var K8=1e3,Y8=10,Q8=(()=>{class t extends Wg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);M8()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Y8):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},K8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),uN=Q8;var Z8=(()=>{class t extends Wg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),ww=Z8;function J8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var X8=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async h=>h(r.origin,s)),u=await J8(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function dN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var tw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=dN("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let _=p;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(_.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Xr(){return window}function eW(t){Xr().location.href=t}function hN(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function tW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nW(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rW(){return hN()?self:null}var fN="firebaseLocalStorageDb",iW=1,Gg="firebaseLocalStorage",pN="fbase_key",Ls=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Qg(t,e){return t.transaction([Gg],e?"readwrite":"readonly").objectStore(Gg)}function oW(){let t=indexedDB.deleteDatabase(fN);return new Ls(t).toPromise()}function nw(){let t=indexedDB.open(fN,iW);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Gg,{keyPath:pN})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Gg)?e(r):(r.close(),await oW(),e(await nw()))})})}async function xO(t,e,n){let r=Qg(t,!0).put({[pN]:e,value:n});return new Ls(r).toPromise()}async function sW(t,e){let n=Qg(t,!1).get(e),r=await new Ls(n).toPromise();return r===void 0?null:r.value}function OO(t,e){let n=Qg(t,!0).delete(e);return new Ls(n).toPromise()}var aW=800,cW=3,lW=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nw(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>cW)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=X8._getInstance(rW()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await tW(),!this.activeServiceWorker)return;this.sender=new tw(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||nW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await nw();return await xO(n,qg,"1"),await OO(n,qg),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>xO(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>sW(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>OO(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Qg(o,!1).getAll();return new Ls(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),gN=lW;var qge=rN("rcb"),Wge=new Fs(3e4,6e4);function uW(t,e){return e?ki(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var sd=class extends id{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return UC(e,this._buildIdpRequest())}_linkToIdToken(e,n){return UC(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return UC(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function dW(t){return cN(t.auth,new sd(t),t.bypassAuthState)}function hW(t){let{auth:e,user:n}=t;return pe(n,e,"internal-error"),G8(n,new sd(t),t.bypassAuthState)}async function fW(t){let{auth:e,user:n}=t;return pe(n,e,"internal-error"),W8(n,new sd(t),t.bypassAuthState)}var rw=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dW;case"linkViaPopup":case"linkViaRedirect":return fW;case"reauthViaPopup":case"reauthViaRedirect":return hW;default:ei(this.auth,"internal-error")}}resolve(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Gge=new Fs(2e3,1e4);var pW="pendingRedirect",kg=new Map,iw=class extends rw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kg.get(this.auth._key());if(!e){try{let r=await gW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kg.set(this.auth._key(),e)}return this.bypassAuthState||kg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function gW(t,e){let n=vW(e),r=_W(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function mW(t,e){kg.set(t._key(),e)}function _W(t){return ki(t._redirectPersistence)}function vW(t){return Ng(pW,t.config.apiKey,t.name)}async function yW(t,e,n=!1){if(un(t.app))return Promise.reject(Fi(t));let r=Vs(t),i=uW(r,e),s=await new iw(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var EW=600*1e3,ow=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EW&&this.cachedEventUids.clear(),this.cachedEventUids.has(NO(e))}saveEventToCache(e){this.cachedEventUids.add(NO(e)),this.lastProcessedEventTime=Date.now()}};function NO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function CW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mN(t);default:return!1}}async function wW(t,e={}){return Mo(t,"GET","/v1/projects",e)}var bW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IW=/^https?/;async function TW(t){if(t.config.emulator)return;let{authorizedDomains:e}=await wW(t);for(let n of e)try{if(DW(n))return}catch{}ei(t,"unauthorized-domain")}function DW(t){let e=zC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!IW.test(n))return!1;if(bW.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var SW=new Fs(3e4,6e4);function kO(){let t=Xr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AW(t){return new Promise((e,n)=>{var r,i,o;function s(){kO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kO(),n(ks(t,"network-request-failed"))},timeout:SW.get()})}if(!((i=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Xr().gapi)===null||o===void 0)&&o.load)s();else{let a=rN("iframefcb");return Xr()[a]=()=>{gapi.load?s():n(ks(t,"network-request-failed"))},nN(`${N8()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Fg=null,e})}var Fg=null;function MW(t){return Fg=Fg||AW(t),Fg}var RW=new Fs(5e3,15e3),PW="__/auth/iframe",xW="emulator/auth/iframe",OW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kW(t){let e=t.config;pe(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?lw(e,xW):`https://${t.config.authDomain}/${PW}`,r={apiKey:e.apiKey,appName:t.name,v:Qr},i=NW.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ku(r).slice(1)}`}async function FW(t){let e=await MW(t),n=Xr().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:kW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OW,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=ks(t,"network-request-failed"),a=Xr().setTimeout(()=>{o(s)},RW.get());function c(){Xr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var LW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VW=500,UW=600,jW="_blank",zW="http://localhost",Kg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function BW(t,e,n,r=VW,i=UW){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},LW),{width:r.toString(),height:i.toString(),top:o,left:s}),u=jt().toLowerCase();n&&(a=YO(u)?jW:n),GO(u)&&(e=e||zW,c.scrollbars="yes");let h=Object.entries(c).reduce((_,[y,T])=>`${_}${y}=${T},`,"");if(A8(u)&&a!=="_self")return $W(e||"",a),new Kg(null);let p=window.open(e||"",a,h);pe(p,t,"popup-blocked");try{p.focus()}catch{}return new Kg(p)}function $W(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var HW="__/auth/handler",qW="emulator/auth/handler",WW=encodeURIComponent("fac");async function FO(t,e,n,r,i,o){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qr,eventId:i};if(e instanceof Hg){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Kx(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof XC){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await t._getAppCheckToken(),u=c?`#${WW}=${encodeURIComponent(c)}`:"";return`${GW(t)}?${Ku(a).slice(1)}${u}`}function GW({config:t}){return t.emulator?lw(t,qW):`https://${t.authDomain}/${HW}`}var jC="webStorageSupport",sw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ww,this._completeRedirectFn=yW,this._overrideRedirectResult=mW}async _openPopup(e,n,r,i){var o;So((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await FO(e,n,r,zC(),i);return BW(e,s,dN())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await FO(e,n,r,zC(),i);return eW(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(So(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await FW(e),r=new ow(e);return n.register("authEvent",i=>(pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jC,{type:jC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[jC];s!==void 0&&n(!!s),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eN()||KO()||fw()}},_N=sw;var LO="@firebase/auth",VO="1.10.8";var aw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function KW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YW(t){Yn(new Qt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;pe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tN(t)},u=new KC(r,i,o,c);return F8(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yn(new Qt("auth-internal",e=>{let n=Vs(e.getProvider("auth").getImmediate());return(r=>new aw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(LO,VO,KW(t)),Xe(LO,VO,"esm2017")}var QW=300,ZW=gC("authIdTokenMaxAge")||QW,UO=null,JW=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZW)return;let i=n?.token;UO!==i&&(UO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bw(t=xi()){let e=Co(t,"auth");if(e.isInitialized())return e.getImmediate();let n=pw(t,{popupRedirectResolver:_N,persistence:[gN,uN,ww]}),r=gC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=JW(o.toString());Ew(n,s,()=>s(n.currentUser)),yw(n,a=>s(a))}}let i=fC("auth");return i&&gw(n,`http://${i}`),n}function XW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}x8({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=ks("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",XW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YW("Browser");var vN="auth",ti=class{constructor(e){return e}},Us=class{constructor(){return wo(vN)}};var Iw=new K("angularfire2.auth-instances");function B7(t,e){let n=Ns(vN,t,e);return n&&new ti(n)}function $7(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ti(r)}}var H7={provide:Us,deps:[[new xt,Iw]]},q7={provide:ti,useFactory:B7,deps:[[new xt,Iw],Ir]};function yN(t,...e){return Xe("angularfire",Zr.full,"auth"),ht([q7,H7,{provide:Iw,useFactory:$7(t),multi:!0,deps:[xe,We,Jr,Oi,[new xt,Io],...e]}])}var Tw=et(_w,!0,2);var EN=et(bw,!0);var CN=et(vw,!0,2);var wN=et(Cw,!0,2);var bN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IN={};var Li,Dw;(function(){var t;function e(A,w){function I(){}I.prototype=w.prototype,A.D=w.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(S,M,x){for(var b=Array(arguments.length-2),di=2;di<arguments.length;di++)b[di-2]=arguments[di];return w.prototype[M].apply(S,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var M=0;16>M;++M)S[M]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(M=0;16>M;++M)S[M]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=A.g[0],I=A.g[1],M=A.g[2];var x=A.g[3],b=w+(x^I&(M^x))+S[0]+3614090360&4294967295;w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[1]+3905402710&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[2]+606105819&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[3]+3250441966&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[4]+4118548399&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[5]+1200080426&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[6]+2821735955&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[7]+4249261313&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[8]+1770035416&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[9]+2336552879&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[10]+4294925233&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[11]+2304563134&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(x^I&(M^x))+S[12]+1804603682&4294967295,w=I+(b<<7&4294967295|b>>>25),b=x+(M^w&(I^M))+S[13]+4254626195&4294967295,x=w+(b<<12&4294967295|b>>>20),b=M+(I^x&(w^I))+S[14]+2792965006&4294967295,M=x+(b<<17&4294967295|b>>>15),b=I+(w^M&(x^w))+S[15]+1236535329&4294967295,I=M+(b<<22&4294967295|b>>>10),b=w+(M^x&(I^M))+S[1]+4129170786&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[6]+3225465664&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[11]+643717713&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[0]+3921069994&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[5]+3593408605&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[10]+38016083&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[15]+3634488961&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[4]+3889429448&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[9]+568446438&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[14]+3275163606&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[3]+4107603335&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[8]+1163531501&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(M^x&(I^M))+S[13]+2850285829&4294967295,w=I+(b<<5&4294967295|b>>>27),b=x+(I^M&(w^I))+S[2]+4243563512&4294967295,x=w+(b<<9&4294967295|b>>>23),b=M+(w^I&(x^w))+S[7]+1735328473&4294967295,M=x+(b<<14&4294967295|b>>>18),b=I+(x^w&(M^x))+S[12]+2368359562&4294967295,I=M+(b<<20&4294967295|b>>>12),b=w+(I^M^x)+S[5]+4294588738&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[8]+2272392833&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[11]+1839030562&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[14]+4259657740&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[1]+2763975236&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[4]+1272893353&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[7]+4139469664&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[10]+3200236656&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[13]+681279174&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[0]+3936430074&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[3]+3572445317&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[6]+76029189&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(I^M^x)+S[9]+3654602809&4294967295,w=I+(b<<4&4294967295|b>>>28),b=x+(w^I^M)+S[12]+3873151461&4294967295,x=w+(b<<11&4294967295|b>>>21),b=M+(x^w^I)+S[15]+530742520&4294967295,M=x+(b<<16&4294967295|b>>>16),b=I+(M^x^w)+S[2]+3299628645&4294967295,I=M+(b<<23&4294967295|b>>>9),b=w+(M^(I|~x))+S[0]+4096336452&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[7]+1126891415&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[14]+2878612391&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[5]+4237533241&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[12]+1700485571&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[3]+2399980690&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[10]+4293915773&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[1]+2240044497&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[8]+1873313359&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[15]+4264355552&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[6]+2734768916&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[13]+1309151649&4294967295,I=M+(b<<21&4294967295|b>>>11),b=w+(M^(I|~x))+S[4]+4149444226&4294967295,w=I+(b<<6&4294967295|b>>>26),b=x+(I^(w|~M))+S[11]+3174756917&4294967295,x=w+(b<<10&4294967295|b>>>22),b=M+(w^(x|~I))+S[2]+718787259&4294967295,M=x+(b<<15&4294967295|b>>>17),b=I+(x^(M|~w))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(M+(b<<21&4294967295|b>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+x&4294967295}r.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var I=w-this.blockSize,S=this.B,M=this.h,x=0;x<w;){if(M==0)for(;x<=I;)i(this,A,x),x+=this.blockSize;if(typeof A=="string"){for(;x<w;)if(S[M++]=A.charCodeAt(x++),M==this.blockSize){i(this,S),M=0;break}}else for(;x<w;)if(S[M++]=A[x++],M==this.blockSize){i(this,S),M=0;break}}this.h=M,this.o+=w},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var I=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=I&255,I/=256;for(this.u(A),A=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)A[I++]=this.g[w]>>>S&255;return A};function o(A,w){var I=a;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=w(A)}function s(A,w){this.h=w;for(var I=[],S=!0,M=A.length-1;0<=M;M--){var x=A[M]|0;S&&x==w||(I[M]=x,S=!1)}this.g=I}var a={};function c(A){return-128<=A&&128>A?o(A,function(w){return new s([w|0],0>w?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return N(u(-A));for(var w=[],I=1,S=0;A>=I;S++)w[S]=A/I|0,I*=4294967296;return new s(w,0)}function h(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return N(h(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(w,8)),S=p,M=0;M<A.length;M+=8){var x=Math.min(8,A.length-M),b=parseInt(A.substring(M,M+x),w);8>x?(x=u(Math.pow(w,x)),S=S.j(x).add(u(b))):(S=S.j(I),S=S.add(u(b)))}return S}var p=c(0),_=c(1),y=c(16777216);t=s.prototype,t.m=function(){if(k(this))return-N(this).m();for(var A=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);A+=(0<=S?S:4294967296+S)*w,w*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(k(this))return"-"+N(this).toString(A);for(var w=u(Math.pow(A,6)),I=this,S="";;){var M=ge(I,w).g;I=B(I,M.j(w));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=M,T(I))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function k(A){return A.h==-1}t.l=function(A){return A=B(this,A),k(A)?-1:T(A)?0:1};function N(A){for(var w=A.g.length,I=[],S=0;S<w;S++)I[S]=~A.g[S];return new s(I,~A.h).add(_)}t.abs=function(){return k(this)?N(this):this},t.add=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0,M=0;M<=w;M++){var x=S+(this.i(M)&65535)+(A.i(M)&65535),b=(x>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);S=b>>>16,x&=65535,b&=65535,I[M]=b<<16|x}return new s(I,I[I.length-1]&-2147483648?-1:0)};function B(A,w){return A.add(N(w))}t.j=function(A){if(T(this)||T(A))return p;if(k(this))return k(A)?N(this).j(N(A)):N(N(this).j(A));if(k(A))return N(this.j(N(A)));if(0>this.l(y)&&0>A.l(y))return u(this.m()*A.m());for(var w=this.g.length+A.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var M=0;M<A.g.length;M++){var x=this.i(S)>>>16,b=this.i(S)&65535,di=A.i(M)>>>16,Kc=A.i(M)&65535;I[2*S+2*M]+=b*Kc,ne(I,2*S+2*M),I[2*S+2*M+1]+=x*Kc,ne(I,2*S+2*M+1),I[2*S+2*M+1]+=b*di,ne(I,2*S+2*M+1),I[2*S+2*M+2]+=x*di,ne(I,2*S+2*M+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new s(I,0)};function ne(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function ae(A,w){this.g=A,this.h=w}function ge(A,w){if(T(w))throw Error("division by zero");if(T(A))return new ae(p,p);if(k(A))return w=ge(N(A),w),new ae(N(w.g),N(w.h));if(k(w))return w=ge(A,N(w)),new ae(N(w.g),w.h);if(30<A.g.length){if(k(A)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var I=_,S=w;0>=S.l(A);)I=lt(I),S=lt(S);var M=Le(I,1),x=Le(S,1);for(S=Le(S,2),I=Le(I,2);!T(S);){var b=x.add(S);0>=b.l(A)&&(M=M.add(I),x=b),S=Le(S,1),I=Le(I,1)}return w=B(A,M.j(w)),new ae(M,w)}for(M=p;0<=A.l(w);){for(I=Math.max(1,Math.floor(A.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),x=u(I),b=x.j(w);k(b)||0<b.l(A);)I-=S,x=u(I),b=x.j(w);T(x)&&(x=_),M=M.add(x),A=B(A,b)}return new ae(M,A)}t.A=function(A){return ge(this,A).h},t.and=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&A.i(S);return new s(I,this.h&A.h)},t.or=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|A.i(S);return new s(I,this.h|A.h)},t.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^A.i(S);return new s(I,this.h^A.h)};function lt(A){for(var w=A.g.length+1,I=[],S=0;S<w;S++)I[S]=A.i(S)<<1|A.i(S-1)>>>31;return new s(I,A.h)}function Le(A,w){var I=w>>5;w%=32;for(var S=A.g.length-I,M=[],x=0;x<S;x++)M[x]=0<w?A.i(x+I)>>>w|A.i(x+I+1)<<32-w:A.i(x+I);return new s(M,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dw=IN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,Li=IN.Integer=s}).apply(typeof bN<"u"?bN:typeof self<"u"?self:typeof window<"u"?window:{});var Zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vi={};var Sw,W7,vc,Aw,cd,Jg,Mw,Rw,Pw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,f){return l==Array.prototype||l==Object.prototype||(l[d]=f.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zg=="object"&&Zg];for(var d=0;d<l.length;++d){var f=l[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var f=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var P=l[v];if(!(P in f))break e;f=f[P]}l=l[l.length-1],v=f[l],d=d(v),d!=v&&d!=null&&e(f,l,{configurable:!0,writable:!0,value:d})}}function o(l,d){l instanceof String&&(l+="");var f=0,v=!1,P={next:function(){if(!v&&f<l.length){var F=f++;return{value:d(F,l[F]),done:!1}}return v=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,f){return l.call.apply(l.bind,arguments)}function p(l,d,f){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,v),l.apply(d,P)}}return function(){return l.apply(d,arguments)}}function _(l,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function y(l,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function T(l,d){function f(){}f.prototype=d.prototype,l.aa=d.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(v,P,F){for(var W=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)W[Ye-2]=arguments[Ye];return d.prototype[P].apply(v,W)}}function k(l){let d=l.length;if(0<d){let f=Array(d);for(let v=0;v<d;v++)f[v]=l[v];return f}return[]}function N(l,d){for(let f=1;f<arguments.length;f++){let v=arguments[f];if(c(v)){let P=l.length||0,F=v.length||0;l.length=P+F;for(let W=0;W<F;W++)l[P+W]=v[W]}else l.push(v)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ne(l){return/^[\s\xa0]*$/.test(l)}function ae(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ge(l){return ge[" "](l),l}ge[" "]=function(){};var lt=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function Le(l,d,f){for(let v in l)d.call(f,l[v],v,l)}function A(l,d){for(let f in l)d.call(void 0,l[f],f,l)}function w(l){let d={};for(let f in l)d[f]=l[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,d){let f,v;for(let P=1;P<arguments.length;P++){v=arguments[P];for(f in v)l[f]=v[f];for(let F=0;F<I.length;F++)f=I[F],Object.prototype.hasOwnProperty.call(v,f)&&(l[f]=v[f])}}function M(l){var d=1;l=l.split(":");let f=[];for(;0<d&&l.length;)f.push(l.shift()),d--;return l.length&&f.push(l.join(":")),f}function x(l){a.setTimeout(()=>{throw l},0)}function b(){var l=y_;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class di{constructor(){this.h=this.g=null}add(d,f){let v=Kc.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Kc=new B(()=>new QL,l=>l.reset());class QL{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Yc,Qc=!1,y_=new di,dT=()=>{let l=a.Promise.resolve(void 0);Yc=()=>{l.then(ZL)}};var ZL=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(f){x(f)}var d=Kc;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Qc=!1};function Wi(){this.s=this.s,this.C=this.C}Wi.prototype.s=!1,Wi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Jt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var JL=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return l})();function Zc(l,d){if(Jt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(lt){e:{try{ge(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=l.fromElement:f=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:XL[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Zc.aa.h.call(this)}}T(Zc,Jt);var XL={2:"touch",3:"pen",4:"mouse"};Zc.prototype.h=function(){Zc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Jc="closure_listenable_"+(1e6*Math.random()|0),e2=0;function t2(l,d,f,v,P){this.listener=l,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=P,this.key=++e2,this.da=this.fa=!1}function jd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function zd(l){this.src=l,this.g={},this.h=0}zd.prototype.add=function(l,d,f,v,P){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var W=C_(l,d,v,P);return-1<W?(d=l[W],f||(d.fa=!1)):(d=new t2(d,this.src,F,!!v,P),d.fa=f,l.push(d)),d};function E_(l,d){var f=d.type;if(f in l.g){var v=l.g[f],P=Array.prototype.indexOf.call(v,d,void 0),F;(F=0<=P)&&Array.prototype.splice.call(v,P,1),F&&(jd(d),l.g[f].length==0&&(delete l.g[f],l.h--))}}function C_(l,d,f,v){for(var P=0;P<l.length;++P){var F=l[P];if(!F.da&&F.listener==d&&F.capture==!!f&&F.ha==v)return P}return-1}var w_="closure_lm_"+(1e6*Math.random()|0),b_={};function hT(l,d,f,v,P){if(v&&v.once)return pT(l,d,f,v,P);if(Array.isArray(d)){for(var F=0;F<d.length;F++)hT(l,d[F],f,v,P);return null}return f=S_(f),l&&l[Jc]?l.K(d,f,u(v)?!!v.capture:!!v,P):fT(l,d,f,!1,v,P)}function fT(l,d,f,v,P,F){if(!d)throw Error("Invalid event type");var W=u(P)?!!P.capture:!!P,Ye=T_(l);if(Ye||(l[w_]=Ye=new zd(l)),f=Ye.add(d,f,v,W,F),f.proxy)return f;if(v=n2(),f.proxy=v,v.src=l,v.listener=f,l.addEventListener)JL||(P=W),P===void 0&&(P=!1),l.addEventListener(d.toString(),v,P);else if(l.attachEvent)l.attachEvent(mT(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function n2(){function l(f){return d.call(l.src,l.listener,f)}let d=r2;return l}function pT(l,d,f,v,P){if(Array.isArray(d)){for(var F=0;F<d.length;F++)pT(l,d[F],f,v,P);return null}return f=S_(f),l&&l[Jc]?l.L(d,f,u(v)?!!v.capture:!!v,P):fT(l,d,f,!0,v,P)}function gT(l,d,f,v,P){if(Array.isArray(d))for(var F=0;F<d.length;F++)gT(l,d[F],f,v,P);else v=u(v)?!!v.capture:!!v,f=S_(f),l&&l[Jc]?(l=l.i,d=String(d).toString(),d in l.g&&(F=l.g[d],f=C_(F,f,v,P),-1<f&&(jd(F[f]),Array.prototype.splice.call(F,f,1),F.length==0&&(delete l.g[d],l.h--)))):l&&(l=T_(l))&&(d=l.g[d.toString()],l=-1,d&&(l=C_(d,f,v,P)),(f=-1<l?d[l]:null)&&I_(f))}function I_(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Jc])E_(d.i,l);else{var f=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(f,v,l.capture):d.detachEvent?d.detachEvent(mT(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=T_(d))?(E_(f,l),f.h==0&&(f.src=null,d[w_]=null)):jd(l)}}}function mT(l){return l in b_?b_[l]:b_[l]="on"+l}function r2(l,d){if(l.da)l=!0;else{d=new Zc(d,this);var f=l.listener,v=l.ha||l.src;l.fa&&I_(l),l=f.call(v,d)}return l}function T_(l){return l=l[w_],l instanceof zd?l:null}var D_="__closure_events_fn_"+(1e9*Math.random()>>>0);function S_(l){return typeof l=="function"?l:(l[D_]||(l[D_]=function(d){return l.handleEvent(d)}),l[D_])}function Xt(){Wi.call(this),this.i=new zd(this),this.M=this,this.F=null}T(Xt,Wi),Xt.prototype[Jc]=!0,Xt.prototype.removeEventListener=function(l,d,f,v){gT(this,l,d,f,v)};function fn(l,d){var f,v=l.F;if(v)for(f=[];v;v=v.F)f.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new Jt(d,l);else if(d instanceof Jt)d.target=d.target||l;else{var P=d;d=new Jt(v,l),S(d,P)}if(P=!0,f)for(var F=f.length-1;0<=F;F--){var W=d.g=f[F];P=Bd(W,v,!0,d)&&P}if(W=d.g=l,P=Bd(W,v,!0,d)&&P,P=Bd(W,v,!1,d)&&P,f)for(F=0;F<f.length;F++)W=d.g=f[F],P=Bd(W,v,!1,d)&&P}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var f=l.g[d],v=0;v<f.length;v++)jd(f[v]);delete l.g[d],l.h--}}this.F=null},Xt.prototype.K=function(l,d,f,v){return this.i.add(String(l),d,!1,f,v)},Xt.prototype.L=function(l,d,f,v){return this.i.add(String(l),d,!0,f,v)};function Bd(l,d,f,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,F=0;F<d.length;++F){var W=d[F];if(W&&!W.da&&W.capture==f){var Ye=W.listener,Ht=W.ha||W.src;W.fa&&E_(l.i,W),P=Ye.call(Ht,v)!==!1&&P}}return P&&!v.defaultPrevented}function _T(l,d,f){if(typeof l=="function")f&&(l=_(l,f));else if(l&&typeof l.handleEvent=="function")l=_(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function vT(l){l.g=_T(()=>{l.g=null,l.i&&(l.i=!1,vT(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class i2 extends Wi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xc(l){Wi.call(this),this.h=l,this.g={}}T(Xc,Wi);var yT=[];function ET(l){Le(l.g,function(d,f){this.g.hasOwnProperty(f)&&I_(d)},l),l.g={}}Xc.prototype.N=function(){Xc.aa.N.call(this),ET(this)},Xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var A_=a.JSON.stringify,o2=a.JSON.parse,s2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function M_(){}M_.prototype.h=null;function CT(l){return l.h||(l.h=l.i())}function wT(){}var el={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function R_(){Jt.call(this,"d")}T(R_,Jt);function P_(){Jt.call(this,"c")}T(P_,Jt);var jo={},bT=null;function $d(){return bT=bT||new Xt}jo.La="serverreachability";function IT(l){Jt.call(this,jo.La,l)}T(IT,Jt);function tl(l){let d=$d();fn(d,new IT(d))}jo.STAT_EVENT="statevent";function TT(l,d){Jt.call(this,jo.STAT_EVENT,l),this.stat=d}T(TT,Jt);function pn(l){let d=$d();fn(d,new TT(d,l))}jo.Ma="timingevent";function DT(l,d){Jt.call(this,jo.Ma,l),this.size=d}T(DT,Jt);function nl(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function rl(){this.g=!0}rl.prototype.xa=function(){this.g=!1};function a2(l,d,f,v,P,F){l.info(function(){if(l.g)if(F)for(var W="",Ye=F.split("&"),Ht=0;Ht<Ye.length;Ht++){var Ve=Ye[Ht].split("=");if(1<Ve.length){var en=Ve[0];Ve=Ve[1];var tn=en.split("_");W=2<=tn.length&&tn[1]=="type"?W+(en+"="+Ve+"&"):W+(en+"=redacted&")}}else W=null;else W=F;return"XMLHTTP REQ ("+v+") [attempt "+P+"]: "+d+`
`+f+`
`+W})}function c2(l,d,f,v,P,F,W){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+P+"]: "+d+`
`+f+`
`+F+" "+W})}function ta(l,d,f,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+u2(l,f)+(v?" "+v:"")})}function l2(l,d){l.info(function(){return"TIMEOUT: "+d})}rl.prototype.info=function(){};function u2(l,d){if(!l.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var v=f[l];if(!(2>v.length)){var P=v[1];if(Array.isArray(P)&&!(1>P.length)){var F=P[0];if(F!="noop"&&F!="stop"&&F!="close")for(var W=1;W<P.length;W++)P[W]=""}}}}return A_(f)}catch{return d}}var Hd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ST={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},x_;function qd(){}T(qd,M_),qd.prototype.g=function(){return new XMLHttpRequest},qd.prototype.i=function(){return{}},x_=new qd;function Gi(l,d,f,v){this.j=l,this.i=d,this.l=f,this.R=v||1,this.U=new Xc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new AT}function AT(){this.i=null,this.g="",this.h=!1}var MT={},O_={};function N_(l,d,f){l.L=1,l.v=Yd(hi(d)),l.m=f,l.P=!0,RT(l,null)}function RT(l,d){l.F=Date.now(),Wd(l),l.A=hi(l.v);var f=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),HT(f.i,"t",v),l.C=0,f=l.j.J,l.h=new AT,l.g=cD(l.j,f?d:null,!l.m),0<l.O&&(l.M=new i2(_(l.Y,l,l.g),l.O)),d=l.U,f=l.g,v=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(yT[0]=P.toString()),P=yT);for(var F=0;F<P.length;F++){var W=hT(f,P[F],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),tl(),a2(l.i,l.u,l.A,l.l,l.R,l.m)}Gi.prototype.ca=function(l){l=l.target;let d=this.M;d&&fi(l)==3?d.j():this.Y(l)},Gi.prototype.Y=function(l){try{if(l==this.g)e:{let tn=fi(this.g);var d=this.g.Ba();let ia=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||ZT(this.g)))){this.J||tn!=4||d==7||(d==8||0>=ia?tl(3):tl(2)),k_(this);var f=this.g.Z();this.X=f;t:if(PT(this)){var v=ZT(this.g);l="";var P=v.length,F=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zo(this),il(this);var W="";break t}this.h.i=new a.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(F&&d==P-1)});v.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,c2(this.i,this.u,this.A,this.l,this.R,tn,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Ht=this.g;if((Ye=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ye)){var Ve=Ye;break t}}Ve=null}if(f=Ve)ta(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,F_(this,f);else{this.o=!1,this.s=3,pn(12),zo(this),il(this);break e}}if(this.P){f=!0;let dr;for(;!this.J&&this.C<W.length;)if(dr=d2(this,W),dr==O_){tn==4&&(this.s=4,pn(14),f=!1),ta(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==MT){this.s=4,pn(15),ta(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else ta(this.i,this.l,dr,null),F_(this,dr);if(PT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||W.length!=0||this.h.h||(this.s=1,pn(16),f=!1),this.o=this.o&&f,!f)ta(this.i,this.l,W,"[Invalid Chunked Response]"),zo(this),il(this);else if(0<W.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),B_(en),en.M=!0,pn(11))}}else ta(this.i,this.l,W,null),F_(this,W);tn==4&&zo(this),this.o&&!this.J&&(tn==4?iD(this.j,this):(this.o=!1,Wd(this)))}else A2(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),zo(this),il(this)}}}catch{}finally{}};function PT(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function d2(l,d){var f=l.C,v=d.indexOf(`
`,f);return v==-1?O_:(f=Number(d.substring(f,v)),isNaN(f)?MT:(v+=1,v+f>d.length?O_:(d=d.slice(v,v+f),l.C=v+f,d)))}Gi.prototype.cancel=function(){this.J=!0,zo(this)};function Wd(l){l.S=Date.now()+l.I,xT(l,l.I)}function xT(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=nl(_(l.ba,l),d)}function k_(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Gi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(l2(this.i,this.A),this.L!=2&&(tl(),pn(17)),zo(this),this.s=2,il(this)):xT(this,this.S-l)};function il(l){l.j.G==0||l.J||iD(l.j,l)}function zo(l){k_(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,ET(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function F_(l,d){try{var f=l.j;if(f.G!=0&&(f.g==l||L_(f.h,l))){if(!l.K&&L_(f.h,l)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var P=v;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)eh(f),Jd(f);else break e;z_(f),pn(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=nl(_(f.Za,f),6e3));if(1>=kT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else $o(f,11)}else if((l.K||f.g==l)&&eh(f),!ne(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let Ve=P[d];if(f.T=Ve[0],Ve=Ve[1],f.G==2)if(Ve[0]=="c"){f.K=Ve[1],f.ia=Ve[2];let en=Ve[3];en!=null&&(f.la=en,f.j.info("VER="+f.la));let tn=Ve[4];tn!=null&&(f.Aa=tn,f.j.info("SVER="+f.Aa));let ia=Ve[5];ia!=null&&typeof ia=="number"&&0<ia&&(v=1.5*ia,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;let dr=l.g;if(dr){let nh=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nh){var F=v.h;F.g||nh.indexOf("spdy")==-1&&nh.indexOf("quic")==-1&&nh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(V_(F,F.h),F.h=null))}if(v.D){let $_=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;$_&&(v.ya=$_,rt(v.I,v.D,$_))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var W=l;if(v.qa=aD(v,v.J?v.ia:null,v.W),W.K){FT(v.h,W);var Ye=W,Ht=v.L;Ht&&(Ye.I=Ht),Ye.B&&(k_(Ye),Wd(Ye)),v.g=W}else nD(v);0<f.i.length&&Xd(f)}else Ve[0]!="stop"&&Ve[0]!="close"||$o(f,7);else f.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?$o(f,7):j_(f):Ve[0]!="noop"&&f.l&&f.l.ta(Ve),f.v=0)}}tl(4)}catch{}}var h2=class{constructor(l,d){this.g=l,this.map=d}};function OT(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NT(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function kT(l){return l.h?1:l.g?l.g.size:0}function L_(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function V_(l,d){l.g?l.g.add(d):l.h=d}function FT(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}OT.prototype.cancel=function(){if(this.i=LT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function LT(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let f of l.g.values())d=d.concat(f.D);return d}return k(l.i)}function f2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],f=l.length,v=0;v<f;v++)d.push(l[v]);return d}d=[],f=0;for(v in l)d[f++]=l[v];return d}function p2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var f=0;f<l;f++)d.push(f);return d}d=[],f=0;for(let v in l)d[f++]=v;return d}}}function VT(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var f=p2(l),v=f2(l),P=v.length,F=0;F<P;F++)d.call(void 0,v[F],f&&f[F],l)}var UT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function g2(l,d){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var v=l[f].indexOf("="),P=null;if(0<=v){var F=l[f].substring(0,v);P=l[f].substring(v+1)}else F=l[f];d(F,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Bo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Bo){this.h=l.h,Gd(this,l.j),this.o=l.o,this.g=l.g,Kd(this,l.s),this.l=l.l;var d=l.i,f=new al;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),jT(this,f),this.m=l.m}else l&&(d=String(l).match(UT))?(this.h=!1,Gd(this,d[1]||"",!0),this.o=ol(d[2]||""),this.g=ol(d[3]||"",!0),Kd(this,d[4]),this.l=ol(d[5]||"",!0),jT(this,d[6]||"",!0),this.m=ol(d[7]||"")):(this.h=!1,this.i=new al(null,this.h))}Bo.prototype.toString=function(){var l=[],d=this.j;d&&l.push(sl(d,zT,!0),":");var f=this.g;return(f||d=="file")&&(l.push("//"),(d=this.o)&&l.push(sl(d,zT,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(sl(f,f.charAt(0)=="/"?v2:_2,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",sl(f,E2)),l.join("")};function hi(l){return new Bo(l)}function Gd(l,d,f){l.j=f?ol(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Kd(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function jT(l,d,f){d instanceof al?(l.i=d,C2(l.i,l.h)):(f||(d=sl(d,y2)),l.i=new al(d,l.h))}function rt(l,d,f){l.i.set(d,f)}function Yd(l){return rt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ol(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function sl(l,d,f){return typeof l=="string"?(l=encodeURI(l).replace(d,m2),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function m2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var zT=/[#\/\?@]/g,_2=/[#\?:]/g,v2=/[#\?]/g,y2=/[#\?@]/g,E2=/#/g;function al(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Ki(l){l.g||(l.g=new Map,l.h=0,l.i&&g2(l.i,function(d,f){l.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=al.prototype,t.add=function(l,d){Ki(this),this.i=null,l=na(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(d),this.h+=1,this};function BT(l,d){Ki(l),d=na(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function $T(l,d){return Ki(l),d=na(l,d),l.g.has(d)}t.forEach=function(l,d){Ki(this),this.g.forEach(function(f,v){f.forEach(function(P){l.call(d,P,v,this)},this)},this)},t.na=function(){Ki(this);let l=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){let P=l[v];for(let F=0;F<P.length;F++)f.push(d[v])}return f},t.V=function(l){Ki(this);let d=[];if(typeof l=="string")$T(this,l)&&(d=d.concat(this.g.get(na(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)d=d.concat(l[f])}return d},t.set=function(l,d){return Ki(this),this.i=null,l=na(this,l),$T(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function HT(l,d,f){BT(l,d),0<f.length&&(l.i=null,l.g.set(na(l,d),k(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];let F=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var P=F;W[v]!==""&&(P+="="+encodeURIComponent(String(W[v]))),l.push(P)}}return this.i=l.join("&")};function na(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function C2(l,d){d&&!l.j&&(Ki(l),l.i=null,l.g.forEach(function(f,v){var P=v.toLowerCase();v!=P&&(BT(this,v),HT(this,P,f))},l)),l.j=d}function w2(l,d){let f=new rl;if(a.Image){let v=new Image;v.onload=y(Yi,f,"TestLoadImage: loaded",!0,d,v),v.onerror=y(Yi,f,"TestLoadImage: error",!1,d,v),v.onabort=y(Yi,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=y(Yi,f,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function b2(l,d){let f=new rl,v=new AbortController,P=setTimeout(()=>{v.abort(),Yi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(F=>{clearTimeout(P),F.ok?Yi(f,"TestPingServer: ok",!0,d):Yi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),Yi(f,"TestPingServer: error",!1,d)})}function Yi(l,d,f,v,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),v(f)}catch{}}function I2(){this.g=new s2}function T2(l,d,f){let v=f||"";try{VT(l,function(P,F){let W=P;u(P)&&(W=A_(P)),d.push(v+F+"="+encodeURIComponent(W))})}catch(P){throw d.push(v+"type="+encodeURIComponent("_badmap")),P}}function cl(l){this.l=l.Ub||null,this.j=l.eb||!1}T(cl,M_),cl.prototype.g=function(){return new Qd(this.l,this.j)},cl.prototype.i=(function(l){return function(){return l}})({});function Qd(l,d){Xt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Qd,Xt),t=Qd.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ul(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ll(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qT(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function qT(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?ll(this):ul(this),this.readyState==3&&qT(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,ll(this))},t.Qa=function(l){this.g&&(this.response=l,ll(this))},t.ga=function(){this.g&&ll(this)};function ll(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ul(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=d.next();return l.join(`\r
`)};function ul(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Qd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function WT(l){let d="";return Le(l,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function U_(l,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=WT(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):rt(l,d,f))}function ut(l){Xt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(ut,Xt);var D2=/^https?$/i,S2=["POST","PUT"];t=ut.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():x_.g(),this.v=this.o?CT(this.o):CT(x_),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(F){GT(this,F);return}if(l=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var P in v)f.set(P,v[P]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let F of v.keys())f.set(F,v.get(F));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(F=>F.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(S2,d,void 0))||v||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,W]of f)this.g.setRequestHeader(F,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QT(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){GT(this,F)}};function GT(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,KT(l),Zd(l)}function KT(l){l.A||(l.A=!0,fn(l,"complete"),fn(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,fn(this,"complete"),fn(this,"abort"),Zd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zd(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?YT(this):this.bb())},t.bb=function(){YT(this)};function YT(l){if(l.h&&typeof s<"u"&&(!l.v[1]||fi(l)!=4||l.Z()!=2)){if(l.u&&fi(l)==4)_T(l.Ea,0,l);else if(fn(l,"readystatechange"),fi(l)==4){l.h=!1;try{let W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=W===0){var P=String(l.D).match(UT)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),v=!D2.test(P?P.toLowerCase():"")}f=v}if(f)fn(l,"complete"),fn(l,"success");else{l.m=6;try{var F=2<fi(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",KT(l)}}finally{Zd(l)}}}}function Zd(l,d){if(l.g){QT(l);let f=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||fn(l,"ready");try{f.onreadystatechange=v}catch{}}}function QT(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function fi(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),o2(d)}};function ZT(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function A2(l){let d={};l=(l.g&&2<=fi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(ne(l[v]))continue;var f=M(l[v]);let P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let F=d[P]||[];d[P]=F,F.push(f)}A(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(l,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||d}function JT(l){this.Aa=0,this.i=[],this.j=new rl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,l),this.cb=dl("retryDelaySeedMs",1e4,l),this.Wa=dl("forwardChannelMaxRetries",2,l),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new OT(l&&l.concurrentRequestLimit),this.Da=new I2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=JT.prototype,t.la=8,t.G=1,t.connect=function(l,d,f,v){pn(0),this.W=l,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=aD(this,null,this.W),Xd(this)};function j_(l){if(XT(l),l.G==3){var d=l.U++,f=hi(l.I);if(rt(f,"SID",l.K),rt(f,"RID",d),rt(f,"TYPE","terminate"),hl(l,f),d=new Gi(l,l.j,d),d.L=2,d.v=Yd(hi(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=cD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Wd(d)}sD(l)}function Jd(l){l.g&&(B_(l),l.g.cancel(),l.g=null)}function XT(l){Jd(l),l.u&&(a.clearTimeout(l.u),l.u=null),eh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Xd(l){if(!NT(l.h)&&!l.s){l.s=!0;var d=l.Ga;Yc||dT(),Qc||(Yc(),Qc=!0),y_.add(d,l),l.B=0}}function M2(l,d){return kT(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=nl(_(l.Ga,l,d),oD(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new Gi(this,this.j,l),F=this.o;if(this.S&&(F?(F=w(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(P.H=F,F=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tD(this,P,d),f=hi(this.I),rt(f,"RID",l),rt(f,"CVER",22),this.D&&rt(f,"X-HTTP-Session-Id",this.D),hl(this,f),F&&(this.O?d="headers="+encodeURIComponent(String(WT(F)))+"&"+d:this.m&&U_(f,this.m,F)),V_(this.h,P),this.Ua&&rt(f,"TYPE","init"),this.P?(rt(f,"$req",d),rt(f,"SID","null"),P.T=!0,N_(P,f,null)):N_(P,f,d),this.G=2}}else this.G==3&&(l?eD(this,l):this.i.length==0||NT(this.h)||eD(this))};function eD(l,d){var f;d?f=d.l:f=l.U++;let v=hi(l.I);rt(v,"SID",l.K),rt(v,"RID",f),rt(v,"AID",l.T),hl(l,v),l.m&&l.o&&U_(v,l.m,l.o),f=new Gi(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),d&&(l.i=d.D.concat(l.i)),d=tD(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),V_(l.h,f),N_(f,v,d)}function hl(l,d){l.H&&Le(l.H,function(f,v){rt(d,v,f)}),l.l&&VT({},function(f,v){rt(d,v,f)})}function tD(l,d,f){f=Math.min(l.i.length,f);var v=l.l?_(l.l.Na,l.l,l):null;e:{var P=l.i;let F=-1;for(;;){let W=["count="+f];F==-1?0<f?(F=P[0].g,W.push("ofs="+F)):F=0:W.push("ofs="+F);let Ye=!0;for(let Ht=0;Ht<f;Ht++){let Ve=P[Ht].g,en=P[Ht].map;if(Ve-=F,0>Ve)F=Math.max(0,P[Ht].g-100),Ye=!1;else try{T2(en,W,"req"+Ve+"_")}catch{v&&v(en)}}if(Ye){v=W.join("&");break e}}}return l=l.i.splice(0,f),d.D=l,v}function nD(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Yc||dT(),Qc||(Yc(),Qc=!0),y_.add(d,l),l.v=0}}function z_(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=nl(_(l.Fa,l),oD(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,rD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=nl(_(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Jd(this),rD(this))};function B_(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function rD(l){l.g=new Gi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=hi(l.qa);rt(d,"RID","rpc"),rt(d,"SID",l.K),rt(d,"AID",l.T),rt(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&rt(d,"TO",l.ja),rt(d,"TYPE","xmlhttp"),hl(l,d),l.m&&l.o&&U_(d,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=Yd(hi(d)),f.m=null,f.P=!0,RT(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Jd(this),z_(this),pn(19))};function eh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function iD(l,d){var f=null;if(l.g==d){eh(l),B_(l),l.g=null;var v=2}else if(L_(l.h,d))f=d.D,FT(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=l.B;v=$d(),fn(v,new DT(v,f)),Xd(l)}else nD(l);else if(P=d.s,P==3||P==0&&0<d.X||!(v==1&&M2(l,d)||v==2&&z_(l)))switch(f&&0<f.length&&(d=l.h,d.i=d.i.concat(f)),P){case 1:$o(l,5);break;case 4:$o(l,10);break;case 3:$o(l,6);break;default:$o(l,2)}}}function oD(l,d){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*d}function $o(l,d){if(l.j.info("Error code "+d),d==2){var f=_(l.fb,l),v=l.Xa;let P=!v;v=new Bo(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gd(v,"https"),Yd(v),P?w2(v.toString(),f):b2(v.toString(),f)}else pn(2);l.G=0,l.l&&l.l.sa(d),sD(l),XT(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function sD(l){if(l.G=0,l.ka=[],l.l){let d=LT(l.h);(d.length!=0||l.i.length!=0)&&(N(l.ka,d),N(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function aD(l,d,f){var v=f instanceof Bo?hi(f):new Bo(f);if(v.g!="")d&&(v.g=d+"."+v.g),Kd(v,v.s);else{var P=a.location;v=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var F=new Bo(null);v&&Gd(F,v),d&&(F.g=d),P&&Kd(F,P),f&&(F.l=f),v=F}return f=l.D,d=l.ya,f&&d&&rt(v,f,d),rt(v,"VER",l.la),hl(l,v),v}function cD(l,d,f){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new ut(new cl({eb:f})):new ut(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lD(){}t=lD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function th(){}th.prototype.g=function(l,d){return new Mn(l,d)};function Mn(l,d){Xt.call(this),this.g=new JT(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ne(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ne(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new ra(this)}T(Mn,Xt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){j_(this.g)},Mn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=A_(l),l=f);d.i.push(new h2(d.Ya++,l)),d.G==3&&Xd(d)},Mn.prototype.N=function(){this.g.l=null,delete this.j,j_(this.g),delete this.g,Mn.aa.N.call(this)};function uD(l){R_.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let f in d){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}T(uD,R_);function dD(){P_.call(this),this.status=1}T(dD,P_);function ra(l){this.g=l}T(ra,lD),ra.prototype.ua=function(){fn(this.g,"a")},ra.prototype.ta=function(l){fn(this.g,new uD(l))},ra.prototype.sa=function(l){fn(this.g,new dD)},ra.prototype.ra=function(){fn(this.g,"b")},th.prototype.createWebChannel=th.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,Pw=Vi.createWebChannelTransport=function(){return new th},Rw=Vi.getStatEventTarget=function(){return $d()},Mw=Vi.Event=jo,Jg=Vi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hd.NO_ERROR=0,Hd.TIMEOUT=8,Hd.HTTP_ERROR=6,cd=Vi.ErrorCode=Hd,ST.COMPLETE="complete",Aw=Vi.EventType=ST,wT.EventType=el,el.OPEN="a",el.CLOSE="b",el.ERROR="c",el.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,vc=Vi.WebChannel=wT,W7=Vi.FetchXmlHttpFactory=cl,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,Sw=Vi.XhrIo=ut}).apply(typeof Zg<"u"?Zg:typeof self<"u"?self:typeof window<"u"?window:{});var TN="@firebase/firestore",DN="4.8.0";var zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");var Uc="11.10.0";var qs=new Kr("@firebase/firestore");function yc(){return qs.logLevel}function J(t,...e){if(qs.logLevel<=Re.DEBUG){let n=e.map(EI);qs.debug(`Firestore (${Uc}): ${t}`,...n)}}function Ui(t,...e){if(qs.logLevel<=Re.ERROR){let n=e.map(EI);qs.error(`Firestore (${Uc}): ${t}`,...n)}}function No(t,...e){if(qs.logLevel<=Re.WARN){let n=e.map(EI);qs.warn(`Firestore (${Uc}): ${t}`,...n)}}function EI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function he(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vk(t,r,n)}function vk(t,e,n){let r=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ui(r),new Error(r)}function $e(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||vk(e,i,r)}function Ce(t,e){return t}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ni=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var om=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}},Lw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Vw=class{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ni,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ni)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new om(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new zt(e)}},Uw=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},jw=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Uw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zw=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function G7(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function yk(){return new TextEncoder}var pd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=G7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function Me(t,e){return t<e?-1:t>e?1:0}function Bw(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Me(r,i);{let o=yk(),s=K7(o.encode(SN(t,n)),o.encode(SN(e,n)));return s!==0?s:Me(r,i)}}n+=r>65535?2:1}return Me(t.length,e.length)}function SN(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function K7(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Me(t[n],e[n]);return Me(t.length,e.length)}function Dc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var AN="__name__",am=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&he(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Bw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}},at=class t extends am{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Y7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zn=class t extends am{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Y7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AN}static keyField(){return new t([AN])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Y(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var le=class t{constructor(e){this.path=e}static fromPath(e){return new t(at.fromString(e))}static fromName(e){return new t(at.fromString(e).popFirst(5))}static empty(){return new t(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new at(e.slice()))}};function Ek(t,e,n){if(!n)throw new Y(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Q7(t,e,n,r){if(e===!0&&r===!0)throw new Y(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function MN(t){if(!le.isDocumentKey(t))throw new Y(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function RN(t){if(le.isDocumentKey(t))throw new Y(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ck(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Um(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he(12329,{type:typeof t})}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Um(t);throw new Y(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Mt(t,e){let n={typeString:t};return e&&(n.value=e),n}function Sd(t,e){if(!Ck(t))throw new Y(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Y(V.INVALID_ARGUMENT,n);return!0}var PN=-62135596800,xN=1e6,Rt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PN)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xN}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sd(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-PN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:Mt("string",Rt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};var Ie=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Rt(0,0))}static max(){return new t(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gd=-1,$w=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};$w.UNKNOWN_ID=-1;function Z7(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new Ws(i,le.empty(),e)}function J7(t){return new Ws(t.readTime,t.key,gd)}var Ws=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Ie.min(),le.empty(),gd)}static max(){return new t(Ie.max(),le.empty(),gd)}};function X7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}var e9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function jc(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==e9)throw t;J("LocalStore","Unexpectedly lost primary lease")}var z=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function t9(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zc(t){return t.name==="IndexedDbTransactionError"}var CI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),wI=-1;function jm(t){return t==null}function md(t){return t===0&&1/t==-1/0}function n9(t){return typeof t=="number"&&Number.isInteger(t)&&!md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var wk="";function r9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ON(e)),e=i9(t.get(n),e);return ON(e)}function i9(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case wk:n+="";break;default:n+=o}}return n}function ON(t){return t+wk+""}var o9="remoteDocuments",bk="owner";var Ik="mutationQueues";var Tk="mutations";var Dk="documentMutations",s9="remoteDocumentsV14";var Sk="remoteDocumentGlobal";var Ak="targets";var Mk="targetDocuments";var Rk="targetGlobal",Pk="collectionParents";var xk="clientMetadata";var Ok="bundles";var Nk="namedQueries";var a9="indexConfiguration";var c9="indexState";var l9="indexEntries";var kk="documentOverlays";var u9="globals";var d9=[Ik,Tk,Dk,o9,Ak,bk,Rk,Mk,xk,Sk,Pk,Ok,Nk],Wme=[...d9,kk],h9=[Ik,Tk,Dk,s9,Ak,bk,Rk,Mk,xk,Sk,Pk,Ok,Nk,kk],f9=h9,p9=[...f9,a9,c9,l9];var Gme=[...p9,u9];function NN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fk(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ft=class t{constructor(e,n){this.comparator=e,this.root=n||ri.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ri.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ri.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bc(this.root,e,this.comparator,!0)}},bc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ri=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};ri.EMPTY=null,ri.RED=!0,ri.BLACK=!1;ri.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new ri(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Bt=class t{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cm(this.data.getIterator())}getIteratorFrom(e){return new cm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},cm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var cr=class t{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Bt(Zn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var lm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var hn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lm("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};hn.EMPTY_BYTE_STRING=new hn("");var g9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if($e(!!t,39018),typeof t=="string"){let e=0,n=g9.exec(t);if($e(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zi(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}var Lk="server_timestamp",Vk="__type__",Uk="__previous_value__",jk="__local_write_time__";function bI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vk])===null||n===void 0?void 0:n.stringValue)===Lk}function zm(t){let e=t.mapValue.fields[Uk];return bI(e)?zm(e):e}function _d(t){let e=ji(t.mapValue.fields[jk].timestampValue);return new Rt(e.seconds,e.nanos)}var qw=class{constructor(e,n,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},um="(default)",dm=class t{constructor(e,n){this.projectId=e,this.database=n||um}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===um}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var II="__type__",zk="__max__",Xg={mapValue:{fields:{__type__:{stringValue:zk}}}},TI="__vector__",Sc="value";function ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bI(t)?4:$k(t)?9007199254740991:Bk(t)?10:11:he(28295,{value:t})}function ai(t,e){if(t===e)return!0;let n=ko(t);if(n!==ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _d(t).isEqual(_d(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ji(i.timestampValue),a=ji(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return zi(i.bytesValue).isEqual(zi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return st(i.geoPointValue.latitude)===st(o.geoPointValue.latitude)&&st(i.geoPointValue.longitude)===st(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return st(i.integerValue)===st(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=st(i.doubleValue),a=st(o.doubleValue);return s===a?md(s)===md(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Dc(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(NN(s)!==NN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ai(s[c],a[c])))return!1;return!0})(t,e);default:return he(52216,{left:t})}}function vd(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function Ac(t,e){if(t===e)return 0;let n=ko(t),r=ko(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=st(o.integerValue||o.doubleValue),c=st(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return kN(t.timestampValue,e.timestampValue);case 4:return kN(_d(t),_d(e));case 5:return Bw(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=zi(o),c=zi(s);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Me(a[u],c[u]);if(h!==0)return h}return Me(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Me(st(o.latitude),st(s.latitude));return a!==0?a:Me(st(o.longitude),st(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return FN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,h;let p=o.fields||{},_=s.fields||{},y=(a=p[Sc])===null||a===void 0?void 0:a.arrayValue,T=(c=_[Sc])===null||c===void 0?void 0:c.arrayValue,k=Me(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:FN(y,T)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Xg.mapValue&&s===Xg.mapValue)return 0;if(o===Xg.mapValue)return 1;if(s===Xg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let _=Bw(c[p],h[p]);if(_!==0)return _;let y=Ac(a[c[p]],u[h[p]]);if(y!==0)return y}return Me(c.length,h.length)})(t.mapValue,e.mapValue);default:throw he(23264,{le:n})}}function kN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);let n=ji(t),r=ji(e),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function FN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ac(n[i],r[i]);if(o)return o}return Me(n.length,r.length)}function Mc(t){return Ww(t)}function Ww(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=ji(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return zi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Ww(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ww(n.fields[s])}`;return i+"}"})(t.mapValue):he(61005,{value:t})}function nm(t){switch(ko(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=zm(t);return e?16+nm(e):16;case 5:return 2*t.stringValue.length;case 6:return zi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+nm(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Vo(r.fields,(o,s)=>{i+=o.length+nm(s)}),i})(t.mapValue);default:throw he(13486,{value:t})}}function LN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gw(t){return!!t&&"integerValue"in t}function DI(t){return!!t&&"arrayValue"in t}function VN(t){return!!t&&"nullValue"in t}function UN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rm(t){return!!t&&"mapValue"in t}function Bk(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[II])===null||n===void 0?void 0:n.stringValue)===TI}function ud(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ud(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ud(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $k(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===zk}var Yme={mapValue:{fields:{[II]:{stringValue:TI},[Sc]:{arrayValue:{}}}}};var Qn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(n)}setAll(e){let n=Zn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=ud(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());rm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ud(this.value))}};function Hk(t){let e=[];return Vo(t.fields,(n,r)=>{let i=new Zn([n]);if(rm(r)){let o=Hk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new cr(e)}var Dr=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Ie.min(),Ie.min(),Ie.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Ie.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Ie.min(),Ie.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Ie.min(),Ie.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Rc=class{constructor(e,n){this.position=e,this.inclusive=n}};function jN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=le.comparator(le.fromName(s.referenceValue),n.key):r=Ac(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}var Pc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function m9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var hm=class{},At=class t extends hm{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Yw(e,n,r):n==="array-contains"?new Jw(e,r):n==="in"?new Xw(e,r):n==="not-in"?new eb(e,r):n==="array-contains-any"?new tb(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qw(e,r):new Zw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ac(n,this.value)):n!==null&&ko(this.value)===ko(n)&&this.matchesComparison(Ac(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Sr=class t extends hm{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return qk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function qk(t){return t.op==="and"}function Wk(t){return _9(t)&&qk(t)}function _9(t){for(let e of t.filters)if(e instanceof Sr)return!1;return!0}function Kw(t){if(t instanceof At)return t.field.canonicalString()+t.op.toString()+Mc(t.value);if(Wk(t))return t.filters.map(e=>Kw(e)).join(",");{let e=t.filters.map(n=>Kw(n)).join(",");return`${t.op}(${e})`}}function Gk(t,e){return t instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&ai(r.value,i.value)})(t,e):t instanceof Sr?(function(r,i){return i instanceof Sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Gk(s,i.filters[a]),!0):!1})(t,e):void he(19439)}function Kk(t){return t instanceof At?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mc(n.value)}`})(t):t instanceof Sr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Kk).join(" ,")+"}"})(t):"Filter"}var Yw=class extends At{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){let n=le.comparator(e.key,this.key);return this.matchesComparison(n)}},Qw=class extends At{constructor(e,n){super(e,"in",n),this.keys=Yk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Zw=class extends At{constructor(e,n){super(e,"not-in",n),this.keys=Yk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Yk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}var Jw=class extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return DI(n)&&vd(n.arrayValue,this.value)}},Xw=class extends At{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&vd(this.value.arrayValue,n)}},eb=class extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vd(this.value.arrayValue,n)}},tb=class extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!DI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vd(this.value.arrayValue,r))}};var nb=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function BN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new nb(t,e,n,r,i,o,s)}function SI(t){let e=Ce(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),jm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mc(r)).join(",")),e.Pe=n}return e.Pe}function AI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!m9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Gk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zN(t.startAt,e.startAt)&&zN(t.endAt,e.endAt)}function rb(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Gs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function v9(t,e,n,r,i,o,s,a){return new Gs(t,e,n,r,i,o,s,a)}function MI(t){return new Gs(t)}function $N(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qk(t){return t.collectionGroup!==null}function dd(t){let e=Ce(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Bt(Zn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Pc(o,r))}),n.has(Zn.keyField().canonicalString())||e.Te.push(new Pc(Zn.keyField(),r))}return e.Te}function ii(t){let e=Ce(t);return e.Ie||(e.Ie=y9(e,dd(t))),e.Ie}function y9(t,e){if(t.limitType==="F")return BN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Pc(i.field,o)});let n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return BN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ib(t,e){let n=t.filters.concat([e]);return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ob(t,e,n){return new Gs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bm(t,e){return AI(ii(t),ii(e))&&t.limitType===e.limitType}function Zk(t){return`${SI(ii(t))}|lt:${t.limitType}`}function Ec(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Kk(i)).join(", ")}]`),jm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mc(i)).join(",")),`Target(${r})`})(ii(t))}; limitType=${t.limitType})`}function $m(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):le.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of dd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=jN(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,dd(r),i)||r.endAt&&!(function(s,a,c){let u=jN(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,dd(r),i))})(t,e)}function E9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jk(t){return(e,n)=>{let r=!1;for(let i of dd(t)){let o=C9(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function C9(t,e,n){let r=t.field.isKeyField()?le.comparator(e.key,n.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Ac(c,u):he(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:t.dir})}}var Bi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Fk(this.inner)}size(){return this.innerSize}};var w9=new ft(le.comparator);function $i(){return w9}var Xk=new ft(le.comparator);function ld(...t){let e=Xk;for(let n of t)e=e.insert(n.key,n);return e}function eF(t){let e=Xk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function js(){return hd()}function tF(){return hd()}function hd(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}var b9=new ft(le.comparator),I9=new Bt(le.comparator);function Oe(...t){let e=I9;for(let n of t)e=e.add(n);return e}var T9=new Bt(Me);function D9(){return T9}function RI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function nF(t){return{integerValue:""+t}}function S9(t,e){return n9(e)?nF(e):RI(t,e)}var xc=class{constructor(){this._=void 0}};function A9(t,e,n){return t instanceof Oc?(function(i,o){let s={fields:{[Vk]:{stringValue:Lk},[jk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&bI(o)&&(o=zm(o)),o&&(s.fields[Uk]=o),{mapValue:s}})(n,e):t instanceof Ks?iF(t,e):t instanceof Ys?oF(t,e):(function(i,o){let s=rF(i,o),a=HN(s)+HN(i.Ee);return Gw(s)&&Gw(i.Ee)?nF(a):RI(i.serializer,a)})(t,e)}function M9(t,e,n){return t instanceof Ks?iF(t,e):t instanceof Ys?oF(t,e):n}function rF(t,e){return t instanceof Nc?(function(r){return Gw(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Oc=class extends xc{},Ks=class extends xc{constructor(e){super(),this.elements=e}};function iF(t,e){let n=sF(e);for(let r of t.elements)n.some(i=>ai(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ys=class extends xc{constructor(e){super(),this.elements=e}};function oF(t,e){let n=sF(e);for(let r of t.elements)n=n.filter(i=>!ai(i,r));return{arrayValue:{values:n}}}var Nc=class extends xc{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function HN(t){return st(t.integerValue||t.doubleValue)}function sF(t){return DI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function R9(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ks&&i instanceof Ks||r instanceof Ys&&i instanceof Ys?Dc(r.elements,i.elements,ai):r instanceof Nc&&i instanceof Nc?ai(r.Ee,i.Ee):r instanceof Oc&&i instanceof Oc})(t.transform,e.transform)}var sb=class{constructor(e,n){this.version=e,this.transformResults=n}},oi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function im(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var kc=class{};function aF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yd(t.key,oi.none()):new Qs(t.key,t.data,oi.none());{let n=t.data,r=Qn.empty(),i=new Bt(Zn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ci(t.key,r,new cr(i.toArray()),oi.none())}}function P9(t,e,n){t instanceof Qs?(function(i,o,s){let a=i.value.clone(),c=WN(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof ci?(function(i,o,s){if(!im(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=WN(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(cF(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function fd(t,e,n,r){return t instanceof Qs?(function(o,s,a,c){if(!im(o.precondition,s))return a;let u=o.value.clone(),h=GN(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof ci?(function(o,s,a,c){if(!im(o.precondition,s))return a;let u=GN(o.fieldTransforms,c,s),h=s.data;return h.setAll(cF(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return im(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function x9(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=rF(r.transform,i||null);o!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,o))}return n||null}function qN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dc(r,i,(o,s)=>R9(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Qs=class extends kc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ci=class extends kc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cF(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function WN(t,e,n){let r=new Map;$e(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,M9(s,a,n[i]))}return r}function GN(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,A9(o,s,e))}return r}var yd=class extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ab=class extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cb=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&P9(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=fd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=tF();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=aF(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(n,r)=>qN(n,r))&&Dc(this.baseMutations,e.baseMutations,(n,r)=>qN(n,r))}},lb=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){$e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return b9})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ub=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var db=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Dt,Fe;function O9(t){switch(t){case V.OK:return he(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return he(15467,{code:t})}}function lF(t){if(t===void 0)return Ui("GRPC error has no .code"),V.UNKNOWN;switch(t){case Dt.OK:return V.OK;case Dt.CANCELLED:return V.CANCELLED;case Dt.UNKNOWN:return V.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return V.INTERNAL;case Dt.UNAVAILABLE:return V.UNAVAILABLE;case Dt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Dt.NOT_FOUND:return V.NOT_FOUND;case Dt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Dt.ABORTED:return V.ABORTED;case Dt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Dt.DATA_LOSS:return V.DATA_LOSS;default:return he(39323,{code:t})}}(Fe=Dt||(Dt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";var KN=null;var N9=new Li([4294967295,4294967295],0);function YN(t){let e=yk().encode(t),n=new Dw;return n.update(e),new Uint8Array(n.digest())}function QN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Li([n,r],0),new Li([i,o],0)]}var hb=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zs(`Invalid padding: ${n}`);if(r<0)throw new zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zs(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Li.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Li.fromNumber(r)));return i.compare(N9)===1&&(i=new Li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=YN(e),[r,i]=QN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=YN(e),[r,i]=QN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fm=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ed.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Ie.min(),i,new ft(Me),$i(),Oe())}},Ed=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Oe(),Oe(),Oe())}};var Ic=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},pm=class{constructor(e,n){this.targetId=e,this.De=n}},gm=class{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},mm=class{constructor(){this.ve=0,this.Ce=ZN(),this.Fe=hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),n=Oe(),r=Oe();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:o})}}),new Ed(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ZN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},fb=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=$i(),this.je=em(),this.Je=em(),this.He=new ft(Me)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(rb(o))if(r===0){let s=new le(o.path);this.Xe(n,s,Dr.newNoDocument(s,Ie.min()))}else $e(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}KN?.ct((function(h,p,_,y,T){var k,N,B,ne,ae,ge;let lt={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},Le=p.unchangedNames;return Le&&(lt.bloomFilter={applied:T===0,hashCount:(k=Le?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ne=(B=(N=Le?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&ne!==void 0?ne:0,padding:(ge=(ae=Le?.bits)===null||ae===void 0?void 0:ae.padding)!==null&&ge!==void 0?ge:0,mightContain:A=>{var w;return(w=y?.mightContain(A))!==null&&w!==void 0&&w}}),lt})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=zi(r).toUint8Array()}catch(c){if(c instanceof lm)return No("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new hb(s,i,o)}catch(c){return No(c instanceof zs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&rb(a.target)){let c=new le(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Dr.newNoDocument(c,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Oe();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new fm(e,n,this.He,this.ze,r);return this.ze=$i(),this.je=em(),this.Je=em(),this.He=new ft(Me),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new mm,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Bt(Me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Bt(Me),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new mm),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function em(){return new ft(le.comparator)}function ZN(){return new ft(le.comparator)}var k9={asc:"ASCENDING",desc:"DESCENDING"},F9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L9={and:"AND",or:"OR"},pb=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function gb(t,e){return t.useProto3Json||jm(e)?e:{value:e}}function _m(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V9(t,e){return _m(t,e.toTimestamp())}function si(t){return $e(!!t,49232),Ie.fromTimestamp((function(n){let r=ji(n);return new Rt(r.seconds,r.nanos)})(t))}function PI(t,e){return mb(t,e).canonicalString()}function mb(t,e){let n=(function(i){return new at(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function dF(t){let e=at.fromString(t);return $e(mF(e),10190,{key:e.toString()}),e}function _b(t,e){return PI(t.databaseId,e.path)}function xw(t,e){let n=dF(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(fF(n))}function hF(t,e){return PI(t.databaseId,e)}function U9(t){let e=dF(t);return e.length===4?at.emptyPath():fF(e)}function vb(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fF(t){return $e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function JN(t,e,n){return{name:_b(t,e),fields:n.value.mapValue.fields}}function j9(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?($e(h===void 0||typeof h=="string",58123),hn.fromBase64String(h||"")):($e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),hn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let h=u.code===void 0?V.UNKNOWN:lF(u.code);return new Y(h,u.message||"")})(s);n=new gm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=xw(t,r.document.name),o=si(r.document.updateTime),s=r.document.createTime?si(r.document.createTime):Ie.min(),a=new Qn({mapValue:{fields:r.document.fields}}),c=Dr.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ic(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=xw(t,r.document),o=r.readTime?si(r.readTime):Ie.min(),s=Dr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ic([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=xw(t,r.document),o=r.removedTargetIds||[];n=new Ic([],o,i,null)}else{if(!("filter"in e))return he(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new db(i,o),a=r.targetId;n=new pm(a,s)}}return n}function z9(t,e){let n;if(e instanceof Qs)n={update:JN(t,e.key,e.value)};else if(e instanceof yd)n={delete:_b(t,e.key)};else if(e instanceof ci)n={update:JN(t,e.key,e.data),updateMask:Q9(e.fieldMask)};else{if(!(e instanceof ab))return he(16599,{Rt:e.type});n={verify:_b(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Oc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ks)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ys)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nc)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw he(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:V9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he(27497)})(t,e.precondition)),n}function B9(t,e){return t&&t.length>0?($e(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?si(i.updateTime):si(o);return s.isEqual(Ie.min())&&(s=si(o)),new sb(s,i.transformResults||[])})(n,e))):[]}function $9(t,e){return{documents:[hF(t,e.path)]}}function H9(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hF(t,i);let o=(function(u){if(u.length!==0)return gF(Sr.create(u,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(h=>(function(_){return{field:Cc(_.field),direction:G9(_.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=gb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:n,parent:i}}function q9(t){let e=U9(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$e(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let _=pF(p);return _ instanceof Sr&&Wk(_)?_.getFilters():[_]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(_=>(function(T){return new Pc(wc(T.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(_))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let _;return _=typeof p=="object"?p.value:p,jm(_)?null:_})(n.limit));let c=null;n.startAt&&(c=(function(p){let _=!!p.before,y=p.values||[];return new Rc(y,_)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){let _=!p.before,y=p.values||[];return new Rc(y,_)})(n.endAt)),v9(e,i,s,o,a,"F",c,u)}function W9(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pF(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=wc(n.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wc(n.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=wc(n.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=wc(n.unaryFilter.field);return At.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(t):t.fieldFilter!==void 0?(function(n){return At.create(wc(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Sr.create(n.compositeFilter.filters.map(r=>pF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(n.compositeFilter.op))})(t):he(30097,{filter:t})}function G9(t){return k9[t]}function K9(t){return F9[t]}function Y9(t){return L9[t]}function Cc(t){return{fieldPath:t.canonicalString()}}function wc(t){return Zn.fromServerFormat(t.fieldPath)}function gF(t){return t instanceof At?(function(n){if(n.op==="=="){if(UN(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NAN"}};if(VN(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UN(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NOT_NAN"}};if(VN(n.value))return{unaryFilter:{field:Cc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cc(n.field),op:K9(n.op),value:n.value}}})(t):t instanceof Sr?(function(n){let r=n.getFilters().map(i=>gF(i));return r.length===1?r[0]:{compositeFilter:{op:Y9(n.op),filters:r}}})(t):he(54877,{filter:t})}function Q9(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Cd=class t{constructor(e,n,r,i,o=Ie.min(),s=Ie.min(),a=hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yb=class{constructor(e){this.gt=e}};function Z9(t){let e=q9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ob(e,e.limit,"L"):e}var vm=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(st(e.integerValue));else if("doubleValue"in e){let r=st(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),md(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=ji(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(zi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?$k(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Bk(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):he(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Sc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(st(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),le.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};vm.Ut=new vm;var Eb=class{constructor(){this.Dn=new Cb}addToCollectionParentIndex(e,n){return this.Dn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ws.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}},Cb=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Bt(at.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(at.comparator)).toArray()}};var Qme=new Uint8Array(0);var XN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_F=41943040,ar=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(_F,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);var wd=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var ek="LruGarbageCollector",J9=1048576;function tk([t,e],[n,r]){let i=Me(t,n);return i===0?Me(e,r):i}var wb=class{constructor(e){this.Tr=e,this.buffer=new Bt(tk),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();tk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},bb=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(ek,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zc(n)?J(ek,"Ignoring IndexedDB error during garbage collection: ",n):await jc(n)}await this.Rr(3e5)})}},Ib=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(CI.ue);let r=new wb(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(XN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),yc()<=Re.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function X9(t,e){return new Ib(t,e)}var Tb=class{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Db=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Sb=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fd(r.mutation,i,cr.empty(),Rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){let i=js();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ld();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=js();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=$i(),s=hd(),a=(function(){return hd()})();return n.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ci)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),fd(h.mutation,u,h.mutation.getFieldMask(),Rt.now())):s.set(u.key,cr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new Db(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=hd(),i=new ft((s,a)=>s-a),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let h=r.get(c)||cr.empty();h=a.applyToLocalView(u,h),r.set(c,h);let p=(i.get(a.batchId)||Oe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,p=tF();h.forEach(_=>{if(!o.has(_)){let y=aF(n.get(_),r.get(_));y!==null&&p.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):z.resolve(js()),a=gd,c=o;return s.next(u=>z.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Oe())).next(h=>({batchId:a,changes:eF(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=ld();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ld();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,c=>{let u=(function(p,_){return new Gs(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,_)=>{s=s.insert(p,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Dr.newInvalidDocument(h)))});let a=ld();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&fd(h.mutation,u,cr.empty(),Rt.now()),$m(n,u)&&(a=a.insert(c,u))}),a})}};var Ab=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:si(i.createTime)}})(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Z9(i.bundledQuery),readTime:si(i.readTime)}})(n)),z.resolve()}};var Mb=class{constructor(){this.overlays=new ft(le.comparator),this.kr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){let r=js();return z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),z.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){let i=js(),o=n.length+1,s=new le(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ft((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=js(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=js(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return z.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ub(n,r));let o=this.kr.get(n);o===void 0&&(o=Oe(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var Rb=class{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}};var bd=class{constructor(){this.qr=new Bt(St.Qr),this.$r=new Bt(St.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new St(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new St(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new le(new at([])),r=new St(n,e),i=new St(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new le(new at([])),r=new St(n,e),i=new St(n,e+1),o=Oe();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new St(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},St=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return le.comparator(e.key,n.key)||Me(e.Hr,n.Hr)}static Ur(e,n){return Me(e.Hr,n.Hr)||le.comparator(e.key,n.key)}};var Pb=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Bt(St.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new cb(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new St(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,n){return z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?wI:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new St(n,0),i=new St(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Bt(Me);return n.forEach(i=>{let o=new St(i,0),s=new St(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;le.isDocumentKey(o)||(o=o.child(""));let s=new St(new le(o),0),a=new Bt(Me);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),z.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){$e(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(n.mutations,i=>{let o=new St(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new St(n,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var xb=class{constructor(e){this.ni=e,this.docs=(function(){return new ft(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Dr.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dr.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=$i(),s=n.path,a=new le(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||X7(J7(h),r)<=0||(i.has(h.key)||$m(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){he(9500)}ri(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ob(this)}getSize(e){return z.resolve(this.size)}},Ob=class extends Tb{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var Nb=class{constructor(e){this.persistence=e,this.ii=new Bi(n=>SI(n),AI),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new bd,this.targetCount=0,this._i=wd.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),z.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new wd(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.hr(n),z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),z.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.oi.containsKey(n))}};var ym=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new CI(0),this.ci=!1,this.ci=!0,this.li=new Rb,this.referenceDelegate=e(this),this.hi=new Nb(this),this.indexManager=new Eb,this.remoteDocumentCache=(function(i){return new xb(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new yb(n),this.Ti=new Ab(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new Pb(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);let i=new kb(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},kb=class extends Hw{constructor(e){super(),this.currentSequenceNumber=e}},Fb=class t{constructor(e){this.persistence=e,this.Ai=new bd,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw he(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=le.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Ie.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return z.or([()=>z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Em=class t{constructor(e,n){this.persistence=e,this.gi=new Bi(r=>r9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=X9(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,Ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nm(e.data.value)),n}Sr(e,n,r){return z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Lb=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Oe(),i=Oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Vb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ub=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Wx()?8:t9(jt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Vb;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(yc()<=Re.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ec(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(yc()<=Re.DEBUG&&J("QueryEngine","Query:",Ec(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(yc()<=Re.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ec(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(n))):z.resolve())}ps(e,n){if($N(n))return z.resolve(null);let r=ii(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ob(n,null,"F"),r=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Oe(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(n,a);return this.Ds(n,u,s,c.readTime)?this.ps(e,ob(n,null,"F")):this.vs(e,u,n,c)}))})))}ys(e,n,r,i){return $N(n)||i.isEqual(Ie.min())?z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?z.resolve(null):(yc()<=Re.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ec(n)),this.vs(e,s,n,Z7(i,gd)).next(a=>a))})}bs(e,n){let r=new Bt(Jk(e));return n.forEach((i,o)=>{$m(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return yc()<=Re.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ec(n)),this.gs.getDocumentsMatchingQuery(e,n,Ws.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xI="LocalStore",eG=3e8,jb=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new ft(Me),this.Ms=new Bi(o=>SI(o),AI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function tG(t,e,n,r){return new jb(t,e,n,r)}async function vF(t,e){let n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Oe();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})}function nG(t,e){let n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){let p=u.batch,_=p.keys(),y=z.resolve();return _.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(k=>{let N=u.docVersions.get(T);$e(N!==null,48541),k.version.compareTo(N)<0&&(p.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Oe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function yF(t){let e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function rG(t,e){let n=Ce(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let _=i.get(p);if(!_)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(hn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,N,B){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=eG?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(_,y,h)&&a.push(n.hi.updateTargetData(o,y))});let c=$i(),u=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(iG(o,s,e.documentUpdates).next(h=>{c=h.Ls,u=h.ks})),!r.isEqual(Ie.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Fs=i,o))}function iG(t,e,n){let r=Oe(),i=Oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=$i();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):J(xI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function oG(t,e){let n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sG(t,e){let n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Cd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function zb(t,e,n){let r=Ce(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!zc(s))throw s;J(xI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function nk(t,e,n){let r=Ce(t),i=Ie.min(),o=Oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,h){let p=Ce(c),_=p.Ms.get(h);return _!==void 0?z.resolve(p.Fs.get(_)):p.hi.getTargetData(u,h)})(r,s,ii(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Ie.min(),n?o:Oe())).next(a=>(aG(r,E9(e),a),{documents:a,qs:o})))}function aG(t,e,n){let r=t.xs.get(e)||Ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Cm=class{constructor(){this.activeTargetIds=D9()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bb=class{constructor(){this.Fo=new Cm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Cm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $b=class{xo(e){}shutdown(){}};var rk="ConnectivityMonitor",wm=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(rk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(rk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tm=null;function Hb(){return tm===null?tm=(function(){return 268435456+Math.round(2147483648*Math.random())})():tm++,"0x"+tm.toString(16)}var Ow="RestConnection",cG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},qb=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===um?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=Hb(),a=this.Go(e,n.toUriEncodedString());J(Ow,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),h=br(u);return this.jo(e,a,c,r,h).then(p=>(J(Ow,`Received RPC '${e}' ${s}: `,p),p),p=>{throw No(Ow,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=cG[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var Wb=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var dn="WebChannelConnection",Gb=class extends qb{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=Hb();return new Promise((a,c)=>{let u=new Sw;u.setWithCredentials(!0),u.listenOnce(Aw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cd.NO_ERROR:let p=u.getResponseJson();J(dn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case cd.TIMEOUT:J(dn,`RPC '${e}' ${s} timed out`),c(new Y(V.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:let _=u.getStatus();if(J(dn,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let k=(function(B){let ne=B.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(ne)>=0?ne:V.UNKNOWN})(T.status);c(new Y(k,T.message))}else c(new Y(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Y(V.UNAVAILABLE,"Connection failed."));break;default:he(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(dn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);J(dn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}P_(e,n,r){let i=Hb(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Pw(),a=Rw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=o.join("");J(dn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.T_(p);let _=!1,y=!1,T=new Wb({Ho:N=>{y?J(dn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(J(dn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),J(dn,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),k=(N,B,ne)=>{N.listen(B,ae=>{try{ne(ae)}catch(ge){setTimeout(()=>{throw ge},0)}})};return k(p,vc.EventType.OPEN,()=>{y||(J(dn,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),k(p,vc.EventType.CLOSE,()=>{y||(y=!0,J(dn,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),k(p,vc.EventType.ERROR,N=>{y||(y=!0,No(dn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.__(new Y(V.UNAVAILABLE,"The operation could not be completed")))}),k(p,vc.EventType.MESSAGE,N=>{var B;if(!y){let ne=N.data[0];$e(!!ne,16349);let ae=ne,ge=ae?.error||((B=ae[0])===null||B===void 0?void 0:B.error);if(ge){J(dn,`RPC '${e}' stream ${i} received error:`,ge);let lt=ge.status,Le=(function(I){let S=Dt[I];if(S!==void 0)return lF(S)})(lt),A=ge.message;Le===void 0&&(Le=V.INTERNAL,A="Unknown error status: "+lt+" with message "+ge.message),y=!0,T.__(new Y(Le,A)),p.close()}else J(dn,`RPC '${e}' stream ${i} received:`,ne),T.a_(ne)}}),k(a,Mw.STAT_EVENT,N=>{N.stat===Jg.PROXY?J(dn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Jg.NOPROXY&&J(dn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Nw(){return typeof document<"u"?document:null}function Hm(t){return new pb(t,!0)}var bm=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ik="PersistentStream",Im=class{constructor(e,n,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new bm(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new Y(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return J(ik,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(J(ik,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kb=class extends Im{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=j9(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ie.min():s.readTime?si(s.readTime):Ie.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=vb(this.serializer),n.addTarget=(function(o,s){let a,c=s.target;if(a=rb(c)?{documents:$9(o,c)}:{query:H9(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=uF(o,s.resumeToken);let u=gb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ie.min())>0){a.readTime=_m(o,s.snapshotVersion.toTimestamp());let u=gb(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=W9(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=vb(this.serializer),n.removeTarget=e,this.k_(n)}},Yb=class extends Im{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=B9(e.writeResults,e.commitTime),r=si(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=vb(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>z9(this.serializer,r))};this.k_(n)}};var Qb=class{},Zb=class extends Qb{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,mb(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(V.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,mb(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(V.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Jb=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ui(n),this._a=!1):J("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Zs="RemoteStore",Xb=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Xs(this)&&(J(Zs,"Restarting streams for network reachability change."),await(async function(c){let u=Ce(c);u.Ia.add(4),await Ad(u),u.Aa.set("Unknown"),u.Ia.delete(4),await qm(u)})(this))})}),this.Aa=new Jb(r,i)}};async function qm(t){if(Xs(t))for(let e of t.da)await e(!0)}async function Ad(t){for(let e of t.da)await e(!1)}function EF(t,e){let n=Ce(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),FI(n)?kI(n):Bc(n).x_()&&NI(n,e))}function OI(t,e){let n=Ce(t),r=Bc(n);n.Ta.delete(e),r.x_()&&CF(n,e),n.Ta.size===0&&(r.x_()?r.B_():Xs(n)&&n.Aa.set("Unknown"))}function NI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bc(t).H_(e)}function CF(t,e){t.Ra.$e(e),Bc(t).Y_(e)}function kI(t){t.Ra=new fb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Bc(t).start(),t.Aa.aa()}function FI(t){return Xs(t)&&!Bc(t).M_()&&t.Ta.size>0}function Xs(t){return Ce(t).Ia.size===0}function wF(t){t.Ra=void 0}async function lG(t){t.Aa.set("Online")}async function uG(t){t.Ta.forEach((e,n)=>{NI(t,e)})}async function dG(t,e){wF(t),FI(t)?(t.Aa.la(e),kI(t)):t.Aa.set("Unknown")}async function hG(t,e,n){if(t.Aa.set("Online"),e instanceof gm&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){J(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tm(t,r)}else if(e instanceof Ic?t.Ra.Ye(e):e instanceof pm?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ie.min()))try{let r=await yF(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),CF(o,c);let p=new Cd(h.target,c,u,h.sequenceNumber);NI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){J(Zs,"Failed to raise snapshot:",r),await Tm(t,r)}}async function Tm(t,e,n){if(!zc(e))throw e;t.Ia.add(1),await Ad(t),t.Aa.set("Offline"),n||(n=()=>yF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Zs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await qm(t)})}function bF(t,e){return e().catch(n=>Tm(t,n,e))}async function Wm(t){let e=Ce(t),n=Fo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wI;for(;fG(e);)try{let i=await oG(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,pG(e,i)}catch(i){await Tm(e,i)}IF(e)&&TF(e)}function fG(t){return Xs(t)&&t.Pa.length<10}function pG(t,e){t.Pa.push(e);let n=Fo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function IF(t){return Xs(t)&&!Fo(t).M_()&&t.Pa.length>0}function TF(t){Fo(t).start()}async function gG(t){Fo(t).na()}async function mG(t){let e=Fo(t);for(let n of t.Pa)e.X_(n.mutations)}async function _G(t,e,n){let r=t.Pa.shift(),i=lb.from(r,e,n);await bF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Wm(t)}async function vG(t,e){e&&Fo(t).Z_&&await(async function(r,i){if((function(s){return O9(s)&&s!==V.ABORTED})(i.code)){let o=r.Pa.shift();Fo(r).N_(),await bF(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Wm(r)}})(t,e),IF(t)&&TF(t)}async function ok(t,e){let n=Ce(t);n.asyncQueue.verifyOperationInProgress(),J(Zs,"RemoteStore received new credentials");let r=Xs(n);n.Ia.add(3),await Ad(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await qm(n)}async function yG(t,e){let n=Ce(t);e?(n.Ia.delete(2),await qm(n)):e||(n.Ia.add(2),await Ad(n),n.Aa.set("Unknown"))}function Bc(t){return t.Va||(t.Va=(function(n,r,i){let o=Ce(n);return o.ia(),new Kb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:lG.bind(null,t),e_:uG.bind(null,t),n_:dG.bind(null,t),J_:hG.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),FI(t)?kI(t):t.Aa.set("Unknown")):(await t.Va.stop(),wF(t))})),t.Va}function Fo(t){return t.ma||(t.ma=(function(n,r,i){let o=Ce(n);return o.ia(),new Yb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:gG.bind(null,t),n_:vG.bind(null,t),ea:mG.bind(null,t),ta:_G.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Wm(t)):(await t.ma.stop(),t.Pa.length>0&&(J(Zs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var eI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LI(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),zc(t))return new Y(V.UNAVAILABLE,`${e}: ${t}`);throw t}var Dm=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=ld(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Sm=class{constructor(){this.fa=new ft(le.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):he(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Fc=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Dm.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var tI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},nI=class{constructor(){this.queries=sk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Ce(n),o=i.queries;i.queries=sk(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Y(V.ABORTED,"Firestore shutting down"))}};function sk(){return new Bi(t=>Zk(t),Bm)}async function DF(t,e){let n=Ce(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new tI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=LI(s,`Initialization of query '${Ec(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&VI(n)}async function SF(t,e){let n=Ce(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EG(t,e){let n=Ce(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&VI(n)}function CG(t,e,n){let r=Ce(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function VI(t){t.Da.forEach(e=>{e.next()})}var rI,ak;(ak=rI||(rI={})).Fa="default",ak.Cache="cache";var Am=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rI.Cache}};var Mm=class{constructor(e){this.key=e}},Rm=class{constructor(e){this.key=e}},iI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=Jk(e),this.eu=new Dm(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Sm,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let _=i.get(h),y=$m(this.query,p)?p:null,T=!!_&&this.mutatedKeys.has(_.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;_&&y?_.data.isEqual(y.data)?T!==k&&(r.track({type:3,doc:y}),N=!0):this.iu(_,y)||(r.track({type:2,doc:y}),N=!0,(c&&this.Xa(y,c)>0||u&&this.Xa(y,u)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),N=!0):_&&!y&&(r.track({type:1,doc:_}),N=!0,(c||u)&&(a=!0)),N&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,T){let k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{At:N})}};return k(y)-k(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new Fc(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Sm,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Rm(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Mm(r))}),n}uu(e){this.Ha=e.qs,this.Za=Oe();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Fc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},UI="SyncEngine",oI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},sI=class{constructor(e){this.key=e,this.lu=!1}},aI=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Bi(a=>Zk(a),Bm),this.Tu=new Map,this.Iu=new Set,this.du=new ft(le.comparator),this.Eu=new Map,this.Au=new bd,this.Ru={},this.Vu=new Map,this.mu=wd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function wG(t,e,n=!0){let r=OF(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await AF(r,e,n,!0),i}async function bG(t,e){let n=OF(t);await AF(n,e,!0,!1)}async function AF(t,e,n,r){let i=await sG(t.localStore,ii(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await IG(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&EF(t.remoteStore,i),a}async function IG(t,e,n,r,i){t.gu=(p,_,y)=>(async function(k,N,B,ne){let ae=N.view.nu(B);ae.Ds&&(ae=await nk(k.localStore,N.query,!1).then(({documents:A})=>N.view.nu(A,ae)));let ge=ne&&ne.targetChanges.get(N.targetId),lt=ne&&ne.targetMismatches.get(N.targetId)!=null,Le=N.view.applyChanges(ae,k.isPrimaryClient,ge,lt);return lk(k,N.targetId,Le._u),Le.snapshot})(t,p,_,y);let o=await nk(t.localStore,e,!0),s=new iI(e,o.qs),a=s.nu(o.documents),c=Ed.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);lk(t,n,u._u);let h=new oI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function TG(t,e,n){let r=Ce(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Bm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&OI(r.remoteStore,i.targetId),cI(r,i.targetId)}).catch(jc)):(cI(r,i.targetId),await zb(r.localStore,i.targetId,!0))}async function DG(t,e){let n=Ce(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OI(n.remoteStore,r.targetId))}async function SG(t,e,n){let r=NG(t);try{let i=await(function(s,a){let c=Ce(s),u=Rt.now(),h=a.reduce((y,T)=>y.add(T.key),Oe()),p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=$i(),k=Oe();return c.Os.getEntries(y,h).next(N=>{T=N,T.forEach((B,ne)=>{ne.isValidDocument()||(k=k.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let B=[];for(let ne of a){let ae=x9(ne,p.get(ne.key).overlayedDocument);ae!=null&&B.push(new ci(ne.key,ae,Hk(ae.value.mapValue),oi.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,B,a)}).next(N=>{_=N;let B=N.applyToLocalDocumentSet(p,k);return c.documentOverlayCache.saveOverlays(y,N.batchId,B)})}).then(()=>({batchId:_.batchId,changes:eF(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new ft(Me)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,n),await Md(r,i.changes),await Wm(r.remoteStore)}catch(i){let o=LI(i,"Failed to persist write");n.reject(o)}}async function MF(t,e){let n=Ce(t);try{let r=await rG(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?$e(s.lu,14607):i.removedDocuments.size>0&&($e(s.lu,42227),s.lu=!1))}),await Md(n,r,e)}catch(r){await jc(r)}}function ck(t,e,n){let r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Ce(s);c.onlineState=a;let u=!1;c.queries.forEach((h,p)=>{for(let _ of p.wa)_.va(a)&&(u=!0)}),u&&VI(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AG(t,e,n){let r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ft(le.comparator);s=s.insert(o,Dr.newNoDocument(o,Ie.min()));let a=Oe().add(o),c=new fm(Ie.min(),new Map,new ft(Me),s,a);await MF(r,c),r.du=r.du.remove(o),r.Eu.delete(e),jI(r)}else await zb(r.localStore,e,!1).then(()=>cI(r,e,n)).catch(jc)}async function MG(t,e){let n=Ce(t),r=e.batch.batchId;try{let i=await nG(n.localStore,e);PF(n,r,null),RF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Md(n,i)}catch(i){await jc(i)}}async function RG(t,e,n){let r=Ce(t);try{let i=await(function(s,a){let c=Ce(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>($e(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})})(r.localStore,e);PF(r,e,n),RF(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Md(r,i)}catch(i){await jc(i)}}function RF(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function PF(t,e,n){let r=Ce(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function cI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||xF(t,r)})}function xF(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(OI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),jI(t))}function lk(t,e,n){for(let r of n)r instanceof Mm?(t.Au.addReference(r.key,e),PG(t,r)):r instanceof Rm?(J(UI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||xF(t,r.key)):he(19791,{yu:r})}function PG(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(J(UI,"New document in limbo: "+n),t.Iu.add(r),jI(t))}function jI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new le(at.fromString(e)),r=t.mu.next();t.Eu.set(r,new sI(n)),t.du=t.du.insert(n,r),EF(t.remoteStore,new Cd(ii(MI(n.path)),r,"TargetPurposeLimboResolution",CI.ue))}}async function Md(t,e,n){let r=Ce(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=Lb.Es(c.targetId,u);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(c,u){let h=Ce(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(u,_=>z.forEach(_.Is,y=>h.persistence.referenceDelegate.addReference(p,_.targetId,y)).next(()=>z.forEach(_.ds,y=>h.persistence.referenceDelegate.removeReference(p,_.targetId,y)))))}catch(p){if(!zc(p))throw p;J(xI,"Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let y=h.Fs.get(_),T=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(_,k)}}})(r.localStore,o))}async function xG(t,e){let n=Ce(t);if(!n.currentUser.isEqual(e)){J(UI,"User change. New user:",e.toKey());let r=await vF(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Y(V.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Md(n,r.Bs)}}function OG(t,e){let n=Ce(t),r=n.Eu.get(e);if(r&&r.lu)return Oe().add(r.key);{let i=Oe(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function OF(t){let e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=MF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AG.bind(null,e),e.hu.J_=EG.bind(null,e.eventManager),e.hu.pu=CG.bind(null,e.eventManager),e}function NG(t){let e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RG.bind(null,e),e}var NF=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Hm(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return tG(this.persistence,new Ub,n.initialUser,this.serializer)}Du(n){return new ym(Fb.Vi,this.serializer)}bu(n){return new Bb}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),lI=class extends NF{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){$e(this.persistence.referenceDelegate instanceof Em,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new bb(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new ym(r=>Em.Vi(r,n),this.serializer)}};var kG=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ck(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xG.bind(null,this.syncEngine),await yG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new nI})()}createDatastore(n){let r=Hm(n.databaseInfo.databaseId),i=(function(s){return new Gb(s)})(n.databaseInfo);return(function(s,a,c,u){return new Zb(s,a,c,u)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,c){return new Xb(i,o,s,a,c)})(this.localStore,this.datastore,n.asyncQueue,r=>ck(this.syncEngine,r,0),(function(){return wm.C()?new wm:new $b})())}createSyncEngine(n,r){return(function(o,s,a,c,u,h,p){let _=new aI(o,s,a,c,u,h);return p&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=Ce(o);J(Zs,"RemoteStore shutting down."),s.Ia.add(5),await Ad(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var Pm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Lo="FirestoreClient",uI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{J(Lo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J(Lo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=LI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function kw(t,e){t.asyncQueue.verifyOperationInProgress(),J(Lo,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{No("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{No("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function uk(t,e){t.asyncQueue.verifyOperationInProgress();let n=await FG(t);J(Lo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ok(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ok(e.remoteStore,i)),t._onlineComponents=e}async function FG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Lo,"Using user provided OfflineComponentProvider");try{await kw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await kw(t,new NF)}}else J(Lo,"Using default OfflineComponentProvider"),await kw(t,new lI(void 0));return t._offlineComponents}async function kF(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Lo,"Using user provided OnlineComponentProvider"),await uk(t,t._uninitializedComponentsProvider._online)):(J(Lo,"Using default OnlineComponentProvider"),await uk(t,new kG))),t._onlineComponents}function LG(t){return kF(t).then(e=>e.syncEngine)}async function dI(t){let e=await kF(t),n=e.eventManager;return n.onListen=wG.bind(null,e.syncEngine),n.onUnlisten=TG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DG.bind(null,e.syncEngine),n}function VG(t,e,n={}){let r=new ni;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,u){let h=new Pm({next:_=>{h.Ou(),s.enqueueAndForget(()=>SF(o,p)),_.fromCache&&c.source==="server"?u.reject(new Y(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new Am(a,h,{includeMetadataChanges:!0,ka:!0});return DF(o,p)})(await dI(t),t.asyncQueue,e,n,r)),r.promise}function FF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var dk=new Map;var LF="firestore.googleapis.com",hk=!0,xm=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LF,this.ssl=hk}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:hk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_F;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J9)throw new Y(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Lc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Fw;switch(r.type){case"firstParty":return new jw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=dk.get(n);r&&(J("ComponentProvider","Removing Datastore"),dk.delete(n),r.terminate())})(this),Promise.resolve()}};function VF(t,e,n,r={}){var i;t=lr(t,Lc);let o=br(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(hc(`https://${c}`),fc("Firestore",!0)),s.host!==LF&&s.host!==c&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!Gr(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=zt.MOCK_USER;else{h=Dg(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Y(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(_)}t._authCredentials=new Lw(new om(h,p))}}var Js=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},$t=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Sd(n,t._jsonSchema))return new t(e,r||null,new le(at.fromString(n.referencePath)))}};$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:Mt("string",$t._jsonSchemaVersion),referencePath:Mt("string")};var Ro=class t extends Js{constructor(e,n,r){super(e,n,MI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new le(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function UF(t,e,...n){if(t=Je(t),Ek("collection","path",e),t instanceof Lc){let r=at.fromString(e,...n);return RN(r),new Ro(t,null,r)}{if(!(t instanceof $t||t instanceof Ro))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(at.fromString(e,...n));return RN(r),new Ro(t.firestore,null,r)}}function zI(t,e,...n){if(t=Je(t),arguments.length===1&&(e=pd.newId()),Ek("doc","path",e),t instanceof Lc){let r=at.fromString(e,...n);return MN(r),new $t(t,null,new le(r))}{if(!(t instanceof $t||t instanceof Ro))throw new Y(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(at.fromString(e,...n));return MN(r),new $t(t.firestore,t instanceof Ro?t.converter:null,new le(r))}}var fk="AsyncQueue",Om=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new bm(this,"async_queue_retry"),this.oc=()=>{let r=Nw();r&&J(fk,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Nw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Nw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new ni;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!zc(e))throw e;J(fk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ui("INTERNAL UNHANDLED ERROR: ",pk(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=eI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&he(47125,{hc:pk(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function pk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function gk(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var li=class extends Lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Om,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Om(e),this._firestoreClient=void 0,await e}}};function jF(t,e){let n=typeof t=="object"?t:xi(),r=typeof t=="string"?t:e||um,i=Co(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Tg("firestore");o&&VF(i,...o)}return i}function BI(t){if(t._terminated)throw new Y(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UG(t),t._firestoreClient}function UG(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,c,u,h){return new qw(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FF(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new uI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}var Po=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(hn.fromBase64String(e))}catch(n){throw new Y(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sd(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Po._jsonSchemaVersion="firestore/bytes/1.0",Po._jsonSchema={type:Mt("string",Po._jsonSchemaVersion),bytes:Mt("string")};var Vc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Id=class{constructor(e){this._methodName=e}};var xo=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Sd(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};xo._jsonSchemaVersion="firestore/geoPoint/1.0",xo._jsonSchema={type:Mt("string",xo._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};var Oo=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sd(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new Y(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Oo._jsonSchemaVersion="firestore/vectorValue/1.0",Oo._jsonSchema={type:Mt("string",Oo._jsonSchemaVersion),vectorValues:Mt("object")};var jG=/^__.*__$/,hI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ci(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qs(e,this.data,n,this.fieldTransforms)}},Nm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ci(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function zF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ec:t})}}var fI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zF(this.Ec)&&jG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},pI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hm(e)}Dc(e,n,r,i=!1){return new fI({Ec:e,methodName:n,bc:r,path:Zn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Gm(t){let e=t._freezeSettings(),n=Hm(t._databaseId);return new pI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BF(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);$I("Data must be an object, but it was:",s,r);let a=$F(r,s),c,u;if(o.merge)c=new cr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let _=gI(e,p,n);if(!s.contains(_))throw new Y(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);qF(h,_)||h.push(_)}c=new cr(h),u=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=s.fieldTransforms;return new hI(new Qn(a),c,u)}var km=class t extends Id{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function zG(t,e,n,r){let i=t.Dc(1,e,n);$I("Data must be an object, but it was:",i,r);let o=[],s=Qn.empty();Vo(r,(c,u)=>{let h=HI(e,c,n);u=Je(u);let p=i.gc(h);if(u instanceof km)o.push(h);else{let _=Rd(u,p);_!=null&&(o.push(h),s.set(h,_))}});let a=new cr(o);return new Nm(s,a,i.fieldTransforms)}function BG(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[gI(e,r,n)],c=[i];if(o.length%2!=0)throw new Y(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(gI(e,o[_])),c.push(o[_+1]);let u=[],h=Qn.empty();for(let _=a.length-1;_>=0;--_)if(!qF(u,a[_])){let y=a[_],T=c[_];T=Je(T);let k=s.gc(y);if(T instanceof km)u.push(y);else{let N=Rd(T,k);N!=null&&(u.push(y),h.set(y,N))}}let p=new cr(u);return new Nm(h,p,s.fieldTransforms)}function $G(t,e,n,r=!1){return Rd(n,t.Dc(r?4:3,e))}function Rd(t,e){if(HF(t=Je(t)))return $I("Unsupported field value:",e,t),$F(t,e);if(t instanceof Id)return(function(r,i){if(!zF(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Rd(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Rt.fromDate(r);return{timestampValue:_m(i.serializer,o)}}if(r instanceof Rt){let o=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_m(i.serializer,o)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Po)return{bytesValue:uF(i.serializer,r._byteString)};if(r instanceof $t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Oo)return(function(s,a){return{mapValue:{fields:{[II]:{stringValue:TI},[Sc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return RI(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Um(r)}`)})(t,e)}function $F(t,e){let n={};return Fk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(t,(r,i)=>{let o=Rd(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function HF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof xo||t instanceof Po||t instanceof $t||t instanceof Id||t instanceof Oo)}function $I(t,e,n){if(!HF(n)||!Ck(n)){let r=Um(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gI(t,e,n){if((e=Je(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return HI(t,e);throw Fm("Field path arguments must be of type string or ",t,!1,void 0,n)}var HG=new RegExp("[~\\*/\\[\\]]");function HI(t,e,n){if(e.search(HG)>=0)throw Fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vc(...e.split("."))._internalPath}catch{throw Fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fm(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Y(V.INVALID_ARGUMENT,a+t+c)}function qF(t,e){return t.some(n=>n.isEqual(e))}var Lm=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(qI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},mI=class extends Lm{data(){return super.data()}};function qI(t,e){return typeof e=="string"?HI(t,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}function WF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Td=class{},_I=class extends Td{};function GF(t,e,...n){let r=[];e instanceof Td&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(c=>c instanceof vI).length,a=o.filter(c=>c instanceof Vm).length;if(s>1||s>0&&a>0)throw new Y(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Vm=class t extends _I{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return YF(e._query,n),new Js(e.firestore,e.converter,ib(e._query,n))}_parse(e){let n=Gm(e.firestore);return(function(o,s,a,c,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){_k(p,h);let T=[];for(let k of p)T.push(mk(c,o,k));_={arrayValue:{values:T}}}else _=mk(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||_k(p,h),_=$G(a,s,p,h==="in"||h==="not-in");return At.create(u,h,_)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function KF(t,e,n){let r=e,i=qI("where",t);return Vm._create(i,r,n)}var vI=class t extends Td{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)YF(s,c),s=ib(s,c)})(e._query,n),new Js(e.firestore,e.converter,ib(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function mk(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new Y(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qk(e)&&n.indexOf("/")!==-1)throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(at.fromString(n));if(!le.isDocumentKey(r))throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LN(t,new le(r))}if(n instanceof $t)return LN(t,n._key);throw new Y(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Um(n)}.`)}function _k(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YF(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var yI=class{convertValue(e,n="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Vo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Sc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>st(s.doubleValue));return new Oo(o)}convertGeoPoint(e){return new xo(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=zm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_d(e));default:return null}}convertTimestamp(e){let n=ji(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=at.fromString(e);$e(mF(r),9688,{name:e});let i=new dm(r.get(1),r.get(3)),o=new le(r.popFirst(5));return i.isEqual(n)||Ui(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function QF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Bs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},$s=class t extends Lm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(qI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:Mt("string",$s._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};var Tc=class extends $s{data(e={}){return super.data(e)}},Hs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tc(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:qG(a.type),doc:c,oldIndex:u,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function qG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:t})}}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:Mt("string",Hs._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};var Dd=class extends yI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}};function ZF(t){t=lr(t,Js);let e=lr(t.firestore,li),n=BI(e),r=new Dd(e);return WF(t._query),VG(n,t._query).then(i=>new Hs(e,r,t,i))}function JF(t,e,n){t=lr(t,$t);let r=lr(t.firestore,li),i=QF(t.converter,e,n);return Km(r,[BF(Gm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,oi.none())])}function XF(t,e,n,...r){t=lr(t,$t);let i=lr(t.firestore,li),o=Gm(i),s;return s=typeof(e=Je(e))=="string"||e instanceof Vc?BG(o,"updateDoc",t._key,e,n,r):zG(o,"updateDoc",t._key,e),Km(i,[s.toMutation(t._key,oi.exists(!0))])}function eL(t){return Km(lr(t.firestore,li),[new yd(t._key,oi.none())])}function tL(t,e){let n=lr(t.firestore,li),r=zI(t),i=QF(t.converter,e);return Km(n,[BF(Gm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,oi.exists(!1))]).then(()=>r)}function WI(t,...e){var n,r,i;t=Je(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gk(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(gk(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,u,h;if(t instanceof $t)u=lr(t.firestore,li),h=MI(t._key.path),c={next:p=>{e[s]&&e[s](WG(u,t,p))},error:e[s+1],complete:e[s+2]};else{let p=lr(t,Js);u=lr(p.firestore,li),h=p._query;let _=new Dd(u);c={next:y=>{e[s]&&e[s](new Hs(u,_,p,y))},error:e[s+1],complete:e[s+2]},WF(t._query)}return(function(_,y,T,k){let N=new Pm(k),B=new Am(y,N,T);return _.asyncQueue.enqueueAndForget(async()=>DF(await dI(_),B)),()=>{N.Ou(),_.asyncQueue.enqueueAndForget(async()=>SF(await dI(_),B))}})(BI(u),h,a,c)}function Km(t,e){return(function(r,i){let o=new ni;return r.asyncQueue.enqueueAndForget(async()=>SG(await LG(r),i,o)),o.promise})(BI(t),e)}function WG(t,e,n){let r=n.docs.get(e._key),i=new Dd(t);return new $s(t,i,e._key,r,new Bs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Uc=i})(Qr),Yn(new Qt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new li(new Vw(r.getProvider("auth-internal")),new zw(s,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dm(u.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xe(TN,DN,e),Xe(TN,DN,"esm2017")})();var Ym=function(){return Ym=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ym.apply(this,arguments)};var YG={includeMetadataChanges:!1};function GI(t,e){return e===void 0&&(e=YG),new fe(function(n){var r=WI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function nL(t){return GI(t,{includeMetadataChanges:!0})}function rL(t,e){return e===void 0&&(e={}),nL(t).pipe(ie(function(n){return KI(n,e)}))}function KI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Ym(Ym({},r),(n={},n[e.idField]=t.id,n))}function iL(t){return GI(t,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function oL(t,e){return e===void 0&&(e={}),iL(t).pipe(ie(function(n){return n.map(function(r){return KI(r,e)})}))}var Hi=class{constructor(e){return e}},sL="firestore",YI=class{constructor(){return wo(sL)}};var QI=new K("angularfire2.firestore-instances");function QG(t,e){let n=Ns(sL,t,e);return n&&new Hi(n)}function ZG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hi(r)}}var JG={provide:YI,deps:[[new xt,QI]]},XG={provide:Hi,useFactory:QG,deps:[[new xt,QI],Ir]};function aL(t,...e){return Xe("angularfire",Zr.full,"fst"),ht([XG,JG,{provide:QI,useFactory:ZG(t),multi:!0,deps:[xe,We,Jr,Oi,[new xt,Us],[new xt,Io],...e]}])}var Qm=et(oL,!0);var Zm=et(rL,!0);var cL=et(tL,!0,2);var Jm=et(UF,!0,2);var Xm=et(eL,!0,2);var qi=et(zI,!0,2);var $c=et(ZF,!0);var lL=et(jF,!0);var Pd=et(GF,!0,2);var uL=et(JF,!0,2);var e_=et(XF,!0,2);var xd=et(KF,!0,2);var ur=class t{firestore=R(Hi);usersCollection=Jm(this.firestore,"utenti");getAll(){return Qm(this.usersCollection,{idField:"id"})}getById(e){let n=qi(this.firestore,`utenti/${e}`);return Zm(n,{idField:"id"})}getByCodiceFiscale(e){let n=Pd(this.usersCollection,xd("codiceFiscale","==",e.toUpperCase()));return Te($c(n)).pipe(ie(r=>{if(r.empty)return null;let i=r.docs[0],o=i.data();return re(L({id:i.id},o),{dataDiNascita:o.dataDiNascita?o.dataDiNascita.toDate():null})}))}create(e){let n=re(L({},e),{codiceFiscale:e.codiceFiscale.toUpperCase()});return Te(cL(this.usersCollection,n)).pipe(ie(r=>r.id))}update(e,n){let r=qi(this.firestore,`utenti/${e}`),i=n.codiceFiscale?re(L({},n),{codiceFiscale:n.codiceFiscale.toUpperCase()}):n;return Te(e_(r,i))}delete(e){let n=qi(this.firestore,`utenti/${e}`);return Te(Xm(n))}checkCodiceFiscaleExists(e){return this.getByCodiceFiscale(e).pipe(ie(n=>n!==null))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};var An=class t{injector=R(We);platformId=R(Ii);currentUserSignal=te(null);currentUser=this.currentUserSignal.asReadonly();STORAGE_KEY="currentUser";isBrowser;constructor(){this.isBrowser=sP(this.platformId),this.isBrowser&&this.loadUserFromStorage()}login(e,n,r){return this.injector.get(ur).getByCodiceFiscale(r).pipe(ot(o=>{if(!o)return oe({success:!1,message:"Utente non trovato. Registrati per continuare."});if(o.nome.toLowerCase()!==e.toLowerCase()||o.cognome.toLowerCase()!==n.toLowerCase())return oe({success:!1,message:"Nome o cognome non corrispondono al codice fiscale."});let s=this.generateEmailFromCF(r),a=r,c=this.injector.get(ti);return Te(CN(c,s,a)).pipe(ie(()=>(console.log("\u2705 Firebase Auth login riuscito"),this.setCurrentUser(o),{success:!0,user:o})),Wt(u=>{if(console.error("\u274C Errore Firebase Auth durante il login:",u.code),u.code==="auth/user-not-found"||u.code==="auth/invalid-credential"){console.log("\u{1F527} Creazione account Firebase Auth per utente esistente...");let h=this.injector.get(ti);return Te(Tw(h,s,a)).pipe(ie(()=>(console.log("\u2705 Account Firebase Auth creato"),this.setCurrentUser(o),{success:!0,user:o})),Wt(p=>(console.error("\u274C Errore creazione account Firebase Auth:",p),oe({success:!1,message:"Errore durante il login. Riprova."}))))}return oe({success:!1,message:"Errore durante il login. Riprova."})}))}),Wt(o=>(console.error("Errore durante il login:",o),oe({success:!1,message:"Errore durante il login. Riprova."}))))}loginByCodiceFiscale(e){return this.injector.get(ur).getByCodiceFiscale(e).pipe(ie(r=>r?(this.setCurrentUser(r),{success:!0,user:r}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),Wt(r=>(console.error("Errore durante il login:",r),oe({success:!1,message:"Errore durante il login. Riprova."}))))}register(e){let n=this.injector.get(ur);return n.checkCodiceFiscaleExists(e.codiceFiscale).pipe(ot(r=>{if(r)return oe({success:!1,message:"Codice fiscale gi\xE0 registrato. Usa il login per accedere."});let i=this.generateEmailFromCF(e.codiceFiscale),o=e.codiceFiscale,s=this.injector.get(ti);return Te(Tw(s,i,o)).pipe(ot(()=>Te(new Promise((a,c)=>{n.create(e).subscribe({next:u=>a(u),error:u=>c(u)})}))),ie(a=>{let c=re(L({},e),{id:a});return this.setCurrentUser(c),{success:!0,user:c}}),Wt(a=>{console.error("Errore durante la registrazione:",a);let c=a.code==="auth/email-already-in-use"?"Codice fiscale gi\xE0 registrato. Usa il login per accedere.":"Errore durante la registrazione. Riprova.";return oe({success:!1,message:c})}))}),Wt(r=>(console.error("Errore durante la registrazione:",r),oe({success:!1,message:r.message||"Errore durante la registrazione. Riprova."}))))}logout(){let e=this.injector.get(ti);wN(e).then(()=>{this.currentUserSignal.set(null),this.isBrowser&&localStorage.removeItem(this.STORAGE_KEY),this.injector.get(Nt).navigate(["/login"])})}isAuthenticated(){return this.currentUserSignal()!==null}generateEmailFromCF(e){return`${e.toLowerCase()}@carhandler.local`}setCurrentUser(e){this.currentUserSignal.set(e),this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadUserFromStorage(){if(!this.isBrowser)return;let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let n=JSON.parse(e);this.currentUserSignal.set(n)}catch(n){console.error("Errore nel parsing dell'utente salvato:",n),localStorage.removeItem(this.STORAGE_KEY)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};function eK(t,e){if(t&1){let n=ce();m(0,"div",8),O(1,"i",12),E(2),m(3,"button",13),q("click",function(){U(n);let i=D();return j(i.successMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.successMessage()," ")}}function tK(t,e){if(t&1){let n=ce();m(0,"div",9),O(1,"i",14),E(2),m(3,"button",13),q("click",function(){U(n);let i=D();return j(i.errorMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.errorMessage()," ")}}function nK(t,e){if(t&1){let n=ce();m(0,"input",37),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.editData().nome,i)||(o.editData().nome=i),j(i)}),g()}if(t&2){let n=D(2);Q("ngModel",n.editData().nome)}}function rK(t,e){if(t&1&&(m(0,"div",28),E(1),g()),t&2){let n=D();C(),ke(n.nome)}}function iK(t,e){if(t&1){let n=ce();m(0,"input",38),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.editData().cognome,i)||(o.editData().cognome=i),j(i)}),g()}if(t&2){let n=D(2);Q("ngModel",n.editData().cognome)}}function oK(t,e){if(t&1&&(m(0,"div",28),E(1),g()),t&2){let n=D();C(),ke(n.cognome)}}function sK(t,e){if(t&1){let n=ce();m(0,"input",39),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.editData().email,i)||(o.editData().email=i),j(i)}),g()}if(t&2){let n=D(2);Q("ngModel",n.editData().email)}}function aK(t,e){if(t&1&&(m(0,"div",28),E(1),g()),t&2){let n=D();C(),ke(n.email||"Non impostato")}}function cK(t,e){if(t&1){let n=ce();m(0,"input",40),q("change",function(i){U(n);let o=D(2);return j(o.onDateChange(i))}),g()}if(t&2){let n=D(2);ye("value",n.getDateInputValue(n.editData().dataDiNascita??null))}}function lK(t,e){if(t&1&&(m(0,"div",28),E(1),g()),t&2){let n=D(),r=D();C(),ke(r.formatDate(n.dataDiNascita))}}function uK(t,e){if(t&1){let n=ce();m(0,"input",41),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.editData().annoConseguimentoPatente,i)||(o.editData().annoConseguimentoPatente=i),j(i)}),g()}if(t&2){let n=D(2);Q("ngModel",n.editData().annoConseguimentoPatente),ye("min",1950)("max",n.currentYear)}}function dK(t,e){if(t&1&&(m(0,"div",28),E(1),g()),t&2){let n=D();C(),ke(n.annoConseguimentoPatente||"Non impostato")}}function hK(t,e){t&1&&(O(0,"span",43),m(1,"span"),E(2,"Salvataggio..."),g())}function fK(t,e){t&1&&(O(0,"i",44),m(1,"span"),E(2,"Salva Modifiche"),g())}function pK(t,e){if(t&1&&(m(0,"div",36)(1,"button",42),$(2,hK,3,0)(3,fK,3,0),g()()),t&2){let n=D(2);C(),ye("disabled",n.isSaving()),C(),H(n.isSaving()?2:3)}}function gK(t,e){if(t&1){let n=ce();m(0,"div",10)(1,"div",15)(2,"div",16),O(3,"i",17),g(),m(4,"div",18)(5,"h2"),E(6),g(),m(7,"p",19),O(8,"i",20),E(9),g()()(),m(10,"form",21),q("ngSubmit",function(){U(n);let i=D();return j(i.saveChanges())}),m(11,"div",22)(12,"div",23)(13,"div",24)(14,"label",25),O(15,"i",26),E(16,"Nome "),g(),$(17,nK,1,1,"input",27)(18,rK,2,1,"div",28),g()(),m(19,"div",23)(20,"div",24)(21,"label",25),O(22,"i",26),E(23,"Cognome "),g(),$(24,iK,1,1,"input",29)(25,oK,2,1,"div",28),g()(),m(26,"div",23)(27,"div",24)(28,"label",25),O(29,"i",30),E(30,"Email "),g(),$(31,sK,1,1,"input",31)(32,aK,2,1,"div",28),g()(),m(33,"div",23)(34,"div",24)(35,"label",25),O(36,"i",32),E(37,"Data di Nascita "),g(),$(38,cK,1,1,"input",33)(39,lK,2,1,"div",28),g()(),m(40,"div",23)(41,"div",24)(42,"label",25),O(43,"i",34),E(44,"Anno Conseguimento Patente "),g(),$(45,uK,1,3,"input",35)(46,dK,2,1,"div",28),g()()(),$(47,pK,4,2,"div",36),g()()}if(t&2){let n=e,r=D();C(6),sn("",n.nome," ",n.cognome),C(3),ue(" ",n.codiceFiscale," "),C(8),H(r.isEditMode()?17:18),C(7),H(r.isEditMode()?24:25),C(7),H(r.isEditMode()?31:32),C(7),H(r.isEditMode()?38:39),C(7),H(r.isEditMode()?45:46),C(2),H(r.isEditMode()?47:-1)}}var t_=class t{authService=R(An);userService=R(ur);currentUser=this.authService.currentUser;isEditMode=te(!1);isSaving=te(!1);successMessage=te(null);errorMessage=te(null);editData=te({});currentYear=new Date().getFullYear();ngOnInit(){let e=this.currentUser();e&&this.editData.set(L({},e))}toggleEditMode(){if(this.isEditMode()){let e=this.currentUser();e&&this.editData.set(L({},e))}this.isEditMode.update(e=>!e),this.clearMessages()}saveChanges(){let e=this.currentUser();if(!e)return;this.clearMessages(),this.isSaving.set(!0);let n=this.editData(),r={nome:n.nome?.toUpperCase(),cognome:n.cognome?.toUpperCase(),email:n.email||null,dataDiNascita:n.dataDiNascita||null,annoConseguimentoPatente:n.annoConseguimentoPatente||null};this.userService.update(e.id,r).subscribe({next:()=>{this.isSaving.set(!1),this.isEditMode.set(!1),this.successMessage.set("Dati aggiornati con successo!");let i=L(L({},e),r);this.authService.setCurrentUser(i),setTimeout(()=>this.successMessage.set(null),3e3)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio:",i)}})}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}formatDate(e){if(!e)return"Non impostato";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("it-IT")}catch{return"Non impostato"}}getDateInputValue(e){if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toISOString().split("T")[0]}catch{return""}}onDateChange(e){let r=e.target.value;this.editData.update(i=>re(L({},i),{dataDiNascita:r?new Date(r):null}))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-homepage"]],decls:18,vars:23,consts:[[1,"homepage-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-person-circle","me-2"],[1,"page-subtitle"],[1,"btn","btn-edit-desktop",3,"click","disabled"],[1,"me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"profile-card"],[1,"btn","btn-edit-mobile",3,"click","disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"profile-header"],[1,"avatar"],[1,"bi","bi-person-fill"],[1,"user-info"],[1,"cf-badge"],[1,"bi","bi-credit-card","me-1"],[1,"profile-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"info-item"],[1,"info-label"],[1,"bi","bi-person-fill","me-2"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"info-value"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"bi","bi-envelope-fill","me-2"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","date","name","dataDiNascita",1,"form-control",3,"value"],[1,"bi","bi-card-heading","me-2"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModel","min","max"],[1,"action-buttons"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","dataDiNascita",1,"form-control",3,"change","value"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModelChange","ngModel","min","max"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(n,r){if(n&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),O(5,"i",4),E(6," Profilo Utente "),g(),m(7,"p",5),E(8,"Visualizza e modifica i tuoi dati personali"),g()(),m(9,"button",6),q("click",function(){return r.toggleEditMode()}),O(10,"i",7),E(11),g()(),$(12,eK,4,1,"div",8),$(13,tK,4,1,"div",9),$(14,gK,48,9,"div",10),m(15,"button",11),q("click",function(){return r.toggleEditMode()}),O(16,"i",7),E(17),g()()()),n&2){let i;C(9),Ae("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),ye("disabled",r.isSaving()),C(),Ae("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),C(),ue(" ",r.isEditMode()?"Annulla":"Modifica"," "),C(),H(r.successMessage()?12:-1),C(),H(r.errorMessage()?13:-1),C(),H((i=r.currentUser())?14:-1,i),C(),Ae("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),ye("disabled",r.isSaving()),C(),Ae("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),C(),ue(" ",r.isEditMode()?"Annulla":"Modifica"," ")}},dependencies:[ln,uc,Ut,Kn,cn,lc,Ms,Ri,Hu,Yt,As,Ke],styles:[".homepage-container[_ngcontent-%COMP%]{padding:2rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;display:flex;align-items:center;gap:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #0003}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:#fff}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{display:inline-block;background:#fff3;padding:.375rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600;margin-top:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:2rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#1e293b;min-height:48px;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.homepage-container[_ngcontent-%COMP%]{padding:1rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;margin-top:1rem;border-radius:10px;padding:.875rem 1.5rem;font-weight:600;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{border-radius:15px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;text-align:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:70px;height:70px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .625rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.8rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%], .homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:1rem}}"]})};var Uo=class t{firestore=R(Hi);carsCollection=Jm(this.firestore,"auto");getAll(){return Qm(this.carsCollection,{idField:"targa"})}getByTarga(e){let n=qi(this.firestore,`auto/${e}`);return Zm(n,{idField:"targa"}).pipe(ie(r=>{if(r)return this.convertFirebaseTimestamps(r)}))}getByProprietario(e){let n=Pd(this.carsCollection,xd("proprietario.id","==",e));return Te($c(n)).pipe(ie(r=>r.docs.map(i=>{let o=i.data();return this.convertFirebaseTimestamps(re(L({},o),{targa:i.id}))})))}getByProprietarioOComproprietario(e){let n=Pd(this.carsCollection,xd("proprietario.id","==",e));return Te(Promise.all([$c(n),$c(this.carsCollection)])).pipe(ie(([r,i])=>{let o=new Map;return r.docs.forEach(s=>{let a=s.data();o.set(s.id,this.convertFirebaseTimestamps(re(L({},a),{targa:s.id})))}),i.docs.forEach(s=>{if(!o.has(s.id)){let a=s.data();(a.coProprietari||[]).some(h=>h.id===e)&&o.set(s.id,this.convertFirebaseTimestamps(re(L({},a),{targa:s.id})))}}),Array.from(o.values())}))}create(e){let n=qi(this.firestore,`auto/${e.targa.toUpperCase()}`),r=re(L({},e),{targa:e.targa.toUpperCase()});return Te(uL(n,r))}update(e,n){let r=qi(this.firestore,`auto/${e.toUpperCase()}`);return Te(e_(r,n))}delete(e){let n=qi(this.firestore,`auto/${e.toUpperCase()}`);return Te(Xm(n))}checkTargaExists(e){return this.getByTarga(e).pipe(ie(n=>n!==void 0))}convertFirebaseTimestamps(e){return re(L({},e),{dataDiAcquisto:e.dataDiAcquisto?.toDate?e.dataDiAcquisto.toDate():e.dataDiAcquisto,dataDiVendita:e.dataDiVendita?.toDate?e.dataDiVendita.toDate():e.dataDiVendita,dataProssimaManutenzione:e.dataProssimaManutenzione?.toDate?e.dataProssimaManutenzione.toDate():e.dataProssimaManutenzione,dataProssimaRevisione:e.dataProssimaRevisione?.toDate?e.dataProssimaRevisione.toDate():e.dataProssimaRevisione,assicurazioni:e.assicurazioni?.map(n=>re(L({},n),{dataInizio:n.dataInizio?.toDate?n.dataInizio.toDate():n.dataInizio,dataFine:n.dataFine?.toDate?n.dataFine.toDate():n.dataFine}))||[],manutenzioni:e.manutenzioni?.map(n=>re(L({},n),{data:n.data?.toDate?n.data.toDate():n.data}))||[],revisioni:e.revisioni?.map(n=>re(L({},n),{data:n.data?.toDate?n.data.toDate():n.data}))||[]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};var mK=t=>["/dettaglio-auto",t],_K=(t,e)=>e.targa;function vK(t,e){t&1&&(m(0,"div",5)(1,"div",9)(2,"span",10),E(3,"Caricamento..."),g()()())}function yK(t,e){if(t&1&&(m(0,"div",6),O(1,"i",11),E(2),g()),t&2){let n=D();C(2),ue(" ",n.error()," ")}}function EK(t,e){t&1&&(m(0,"div",7),O(1,"i",12),E(2," Non hai ancora registrato nessuna auto. "),m(3,"a",13),E(4,"Aggiungi la tua prima auto"),g()())}function CK(t,e){if(t&1&&(m(0,"tr")(1,"td")(2,"strong",18),E(3),g()(),m(4,"td"),E(5),g(),m(6,"td"),E(7),g(),m(8,"td"),E(9),g(),m(10,"td",15)(11,"span",19),E(12),g()(),m(13,"td",16),E(14),g(),m(15,"td",16),E(16),g(),m(17,"td",16),E(18),g(),m(19,"td",17)(20,"a",20),O(21,"i",21),m(22,"span",22),E(23,"Dettagli"),g()()()()),t&2){let n=e.$implicit,r=D(2);C(3),ke(n.targa),C(2),ke(n.marca),C(2),ke(n.modello),C(2),ke(n.anno),C(2),Ae("bg-primary",r.getRuolo(n)==="Proprietario")("bg-secondary",r.getRuolo(n)==="Coproprietario"),C(),ue(" ",r.getRuolo(n)," "),C(2),ke(n.colore),C(2),ke(r.formatDate(n.dataDiAcquisto)),C(2),ke(r.formatPrice(n.prezzoDiAcquisto)),C(2),ye("routerLink",X0(13,mK,n.targa))}}function wK(t,e){if(t&1&&(m(0,"div",8)(1,"table",14)(2,"thead")(3,"tr")(4,"th"),E(5,"Targa"),g(),m(6,"th"),E(7,"Marca"),g(),m(8,"th"),E(9,"Modello"),g(),m(10,"th"),E(11,"Anno"),g(),m(12,"th",15),E(13,"Ruolo"),g(),m(14,"th",16),E(15,"Colore"),g(),m(16,"th",16),E(17,"Data Acquisto"),g(),m(18,"th",16),E(19,"Prezzo Acquisto"),g(),m(20,"th",17),E(21,"Azioni"),g()()(),m(22,"tbody"),zn(23,CK,24,15,"tr",null,_K),g()()()),t&2){let n=D();C(23),Bn(n.auto())}}var n_=class t{carService=R(Uo);authService=R(An);auto=te([]);loading=te(!0);error=te(null);ngOnInit(){this.loadAuto()}loadAuto(){let e=this.authService.currentUser();if(!e){this.error.set("Utente non autenticato"),this.loading.set(!1);return}this.carService.getByProprietarioOComproprietario(e.id).subscribe({next:n=>{this.auto.set(n),this.loading.set(!1)},error:n=>{console.error("Errore nel caricamento delle auto:",n),this.error.set("Errore nel caricamento delle auto"),this.loading.set(!1)}})}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}getRuolo(e){let n=this.authService.currentUser();return n?e.proprietario.id===n.id?"Proprietario":e.coProprietari?.some(i=>i.id===n.id)?"Coproprietario":"-":"-"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-elenco-auto"]],decls:10,vars:4,consts:[[1,"elenco-auto-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger","alert-animated"],["role","alert",1,"alert","alert-info","alert-animated"],[1,"table-responsive","table-card"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"bi","bi-info-circle","me-2"],["routerLink","/nuova-auto",1,"alert-link"],[1,"table","table-hover","align-middle"],[1,"d-none","d-md-table-cell"],[1,"d-none","d-lg-table-cell"],[1,"text-end"],[1,"text-uppercase"],[1,"badge"],["title","Visualizza dettagli",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"bi","bi-eye","me-1"],[1,"d-none","d-md-inline"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"i",4),E(5," Le Mie Auto "),g()(),$(6,vK,4,0,"div",5),$(7,yK,3,1,"div",6),$(8,EK,5,0,"div",7),$(9,wK,25,0,"div",8),g()()),n&2&&(C(6),H(r.loading()?6:-1),C(),H(r.error()?7:-1),C(),H(!r.loading()&&!r.error()&&r.auto().length===0?8:-1),C(),H(!r.loading()&&!r.error()&&r.auto().length>0?9:-1))},dependencies:[Ke,Wr],styles:[".elenco-auto-container[_ngcontent-%COMP%]{padding:2rem 0}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.alert-animated[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.table-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 20px #00000014;border-radius:20px;overflow:hidden;border:none}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;font-weight:600;padding:1.5rem 1rem;background:transparent!important;color:#fff!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background-color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a;transform:translate(2px)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #dee2e6;border-bottom:1px solid #dee2e6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}@media (max-width: 767px){.table[_ngcontent-%COMP%]{font-size:.875rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};function bK(t,e){if(t&1){let n=ce();m(0,"div",6),O(1,"i",34),E(2),m(3,"button",35),q("click",function(){U(n);let i=D();return j(i.successMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.successMessage()," ")}}function IK(t,e){if(t&1){let n=ce();m(0,"div",7),O(1,"i",36),E(2),m(3,"button",35),q("click",function(){U(n);let i=D();return j(i.errorMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.errorMessage()," ")}}function TK(t,e){t&1&&(O(0,"span",37),m(1,"span"),E(2,"Salvataggio..."),g())}function DK(t,e){t&1&&(O(0,"i",38),m(1,"span"),E(2,"Salva Auto"),g())}var r_=class t{authService=R(An);carService=R(Uo);router=R(Nt);currentUser=this.authService.currentUser;isSaving=te(!1);successMessage=te(null);errorMessage=te(null);currentYear=new Date().getFullYear();targa="";marca="";modello="";anno=this.currentYear;colore="";prezzoDiAcquisto=0;dataDiAcquisto="";onSubmit(){this.clearMessages();let e=this.currentUser();if(!e){this.errorMessage.set("Utente non autenticato.");return}if(!this.targa.trim()||!this.marca.trim()||!this.modello.trim()||!this.dataDiAcquisto){this.errorMessage.set("Compila tutti i campi obbligatori.");return}if(this.targa.length<6||this.targa.length>10){this.errorMessage.set("La targa deve essere tra 6 e 10 caratteri.");return}this.isSaving.set(!0),this.carService.checkTargaExists(this.targa).subscribe({next:n=>{if(n){this.isSaving.set(!1),this.errorMessage.set("Targa gi\xE0 esistente.");return}let r={targa:this.targa.trim().toUpperCase(),marca:this.marca.trim().toUpperCase(),modello:this.modello.trim().toUpperCase(),anno:this.anno,colore:this.colore.trim().toUpperCase(),prezzoDiAcquisto:this.prezzoDiAcquisto,dataDiAcquisto:new Date(this.dataDiAcquisto),proprietario:e,coProprietari:[],assicurazioni:[],manutenzioni:[],revisioni:[]};this.carService.create(r).subscribe({next:()=>{this.isSaving.set(!1),this.successMessage.set("Auto aggiunta con successo!"),setTimeout(()=>{this.router.navigate(["/elenco-auto"])},1500)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio auto:",i)}})},error:n=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante la verifica. Riprova."),console.error("Errore verifica targa:",n)}})}resetForm(){this.targa="",this.marca="",this.modello="",this.anno=this.currentYear,this.colore="",this.prezzoDiAcquisto=0,this.dataDiAcquisto="",this.clearMessages()}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-nuova-auto"]],decls:67,vars:15,consts:[[1,"nuova-auto-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-plus-circle-fill","me-2"],[1,"page-subtitle"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"form-card"],[1,"card-header"],[1,"bi","bi-car-front-fill","me-2"],[1,"card-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"bi","bi-credit-card-2-front-fill","me-2"],["type","text","name","targa","placeholder","ES. AB123CD","maxlength","10","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-tag-fill","me-2"],["type","text","name","marca","placeholder","ES. FIAT","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-car-front","me-2"],["type","text","name","modello","placeholder","ES. PANDA","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","number","name","anno","required","",1,"form-control",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-palette-fill","me-2"],["type","text","name","colore","placeholder","ES. BIANCO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-currency-euro","me-2"],["type","number","name","prezzoDiAcquisto","placeholder","0","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-event-fill","me-2"],["type","date","name","dataDiAcquisto","required","",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise","me-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),O(5,"i",4),E(6," Nuova Auto "),g(),m(7,"p",5),E(8,"Inserisci i dati della tua auto"),g()()(),$(9,bK,4,1,"div",6),$(10,IK,4,1,"div",7),m(11,"div",8)(12,"div",9),O(13,"i",10),m(14,"span"),E(15,"Dati Auto"),g()(),m(16,"form",11),q("ngSubmit",function(){return r.onSubmit()}),m(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),O(21,"i",16),E(22,"Targa * "),g(),m(23,"input",17),Z("ngModelChange",function(o){return X(r.targa,o)||(r.targa=o),o}),g()()(),m(24,"div",13)(25,"div",14)(26,"label",15),O(27,"i",18),E(28,"Marca * "),g(),m(29,"input",19),Z("ngModelChange",function(o){return X(r.marca,o)||(r.marca=o),o}),g()()(),m(30,"div",13)(31,"div",14)(32,"label",15),O(33,"i",20),E(34,"Modello * "),g(),m(35,"input",21),Z("ngModelChange",function(o){return X(r.modello,o)||(r.modello=o),o}),g()()(),m(36,"div",13)(37,"div",14)(38,"label",15),O(39,"i",22),E(40,"Anno immatricolazione * "),g(),m(41,"input",23),Z("ngModelChange",function(o){return X(r.anno,o)||(r.anno=o),o}),g()()(),m(42,"div",13)(43,"div",14)(44,"label",15),O(45,"i",24),E(46,"Colore "),g(),m(47,"input",25),Z("ngModelChange",function(o){return X(r.colore,o)||(r.colore=o),o}),g()()(),m(48,"div",13)(49,"div",14)(50,"label",15),O(51,"i",26),E(52,"Prezzo di Acquisto "),g(),m(53,"input",27),Z("ngModelChange",function(o){return X(r.prezzoDiAcquisto,o)||(r.prezzoDiAcquisto=o),o}),g()()(),m(54,"div",13)(55,"div",14)(56,"label",15),O(57,"i",28),E(58,"Data di Acquisto * "),g(),m(59,"input",29),Z("ngModelChange",function(o){return X(r.dataDiAcquisto,o)||(r.dataDiAcquisto=o),o}),g()()()(),m(60,"div",30)(61,"button",31),q("click",function(){return r.resetForm()}),O(62,"i",32),E(63," Reset "),g(),m(64,"button",33),$(65,TK,3,0)(66,DK,3,0),g()()()()()()),n&2&&(C(9),H(r.successMessage()?9:-1),C(),H(r.errorMessage()?10:-1),C(13),Q("ngModel",r.targa),C(6),Q("ngModel",r.marca),C(6),Q("ngModel",r.modello),C(6),Q("ngModel",r.anno),ye("min",1950)("max",r.currentYear),C(6),Q("ngModel",r.colore),C(6),Q("ngModel",r.prezzoDiAcquisto),C(6),Q("ngModel",r.dataDiAcquisto),ye("max",r.currentYear+"-12-31"),C(2),ye("disabled",r.isSaving()),C(3),ye("disabled",r.isSaving()),C(),H(r.isSaving()?65:66))},dependencies:[ln,uc,Ut,Kn,cn,lc,Ms,Rs,Ri,Hu,Yt,As,Ke],styles:[".nuova-auto-container[_ngcontent-%COMP%]{padding:2rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.nuova-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;font-size:1.25rem;font-weight:600;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#cbd5e1;text-transform:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.nuova-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{border-radius:15px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;font-size:1.1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem 1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.8rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}}"]})};function SK(t,e){if(t&1){let n=ce();m(0,"button",19),q("click",function(){U(n);let i=D(2);return j(i.toggleEditMode())}),O(1,"i",20),E(2," Modifica "),g()}}function AK(t,e){if(t&1){let n=ce();m(0,"button",21),q("click",function(){U(n);let i=D(2);return j(i.saveChanges())}),O(1,"i",22),E(2," Salva "),g(),m(3,"button",23),q("click",function(){U(n);let i=D(2);return j(i.cancelEdit())}),O(4,"i",24),E(5," Annulla "),g()}}function MK(t,e){if(t&1){let n=ce();m(0,"div",6)(1,"div",7),$(2,SK,3,0,"button",8)(3,AK,6,0),g(),m(4,"div",9)(5,"div",10)(6,"label",11),E(7,"Targa"),g(),O(8,"input",12),g(),m(9,"div",10)(10,"label",11),E(11,"Marca"),g(),m(12,"input",13),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.marca,i)||(o.car.marca=i),j(i)}),g()(),m(13,"div",10)(14,"label",11),E(15,"Modello"),g(),m(16,"input",13),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.modello,i)||(o.car.modello=i),j(i)}),g()(),m(17,"div",10)(18,"label",11),E(19,"Anno"),g(),m(20,"input",14),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.anno,i)||(o.car.anno=i),j(i)}),g()(),m(21,"div",10)(22,"label",11),E(23,"Colore"),g(),m(24,"input",13),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.colore,i)||(o.car.colore=i),j(i)}),g()(),m(25,"div",10)(26,"label",11),E(27,"Data di Acquisto"),g(),m(28,"input",15),pp(29,"date"),q("ngModelChange",function(i){U(n);let o=D();return j(o.car.dataDiAcquisto=i)}),g()(),m(30,"div",10)(31,"label",11),E(32,"Prezzo di Acquisto"),g(),m(33,"input",14),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.prezzoDiAcquisto,i)||(o.car.prezzoDiAcquisto=i),j(i)}),g()(),m(34,"div",10)(35,"label",11),E(36,"Prezzo di Vendita"),g(),m(37,"input",14),Z("ngModelChange",function(i){U(n);let o=D();return X(o.car.prezzoDiVendita,i)||(o.car.prezzoDiVendita=i),j(i)}),g()(),m(38,"div",10)(39,"label",11),E(40,"Data di Vendita"),g(),m(41,"input",15),pp(42,"date"),q("ngModelChange",function(i){U(n);let o=D();return j(o.car.dataDiVendita=i)}),g()()(),O(43,"hr",16),m(44,"h5",17),E(45,"Proprietario"),g(),m(46,"div",9)(47,"div",10)(48,"label",11),E(49,"Nome"),g(),O(50,"input",18),g(),m(51,"div",10)(52,"label",11),E(53,"Cognome"),g(),O(54,"input",18),g(),m(55,"div",10)(56,"label",11),E(57,"Codice Fiscale"),g(),O(58,"input",12),g()()()}if(t&2){let n=D();C(2),H(n.editMode()?3:2),C(6),ye("value",n.car.targa),C(4),Q("ngModel",n.car.marca),ye("disabled",!n.editMode()),C(4),Q("ngModel",n.car.modello),ye("disabled",!n.editMode()),C(4),Q("ngModel",n.car.anno),ye("disabled",!n.editMode()),C(4),Q("ngModel",n.car.colore),ye("disabled",!n.editMode()),C(4),ye("ngModel",gp(29,21,n.car.dataDiAcquisto,"yyyy-MM-dd"))("disabled",!n.editMode()),C(5),Q("ngModel",n.car.prezzoDiAcquisto),ye("disabled",!n.editMode()),C(4),Q("ngModel",n.car.prezzoDiVendita),ye("disabled",!n.editMode()),C(4),ye("ngModel",gp(42,24,n.car.dataDiVendita,"yyyy-MM-dd"))("disabled",!n.editMode()),C(9),ye("value",n.proprietario.nome),C(4),ye("value",n.proprietario.cognome),C(4),ye("value",n.proprietario.codiceFiscale)}}var i_=class t{car;proprietario;carUpdated=new je;anagraficaOpen=te(!1);editMode=te(!1);originalCar=null;toggleAnagrafica(){this.anagraficaOpen.set(!this.anagraficaOpen())}toggleEditMode(){this.editMode()||(this.originalCar=JSON.parse(JSON.stringify(this.car))),this.editMode.set(!this.editMode())}saveChanges(){this.carUpdated.emit(this.car),this.editMode.set(!1),this.originalCar=null}cancelEdit(){this.originalCar&&Object.assign(this.car,this.originalCar),this.editMode.set(!1),this.originalCar=null}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-sezione-anagrafica"]],inputs:{car:"car",proprietario:"proprietario"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-file-text-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary"],[1,"row"],[1,"col-md-4","mb-3"],[1,"form-label","fw-bold"],["type","text","disabled","",1,"form-control","text-uppercase",3,"value"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel","disabled"],["type","number",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"my-4"],[1,"mb-3"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-success","me-2",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),q("click",function(){return r.toggleAnagrafica()}),m(2,"div",2),O(3,"i",3),m(4,"span",4),E(5,"Anagrafica Auto"),g()(),O(6,"i",5),g(),$(7,MK,59,27,"div",6),g()),n&2&&(C(6),Ae("bi-chevron-up",r.anagraficaOpen())("bi-chevron-down",!r.anagraficaOpen()),C(),H(r.anagraficaOpen()?7:-1))},dependencies:[Ke,ln,Ut,Kn,cn,Yt,vE],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.info-row[_ngcontent-%COMP%]{padding:.75rem 0;border-bottom:1px solid #eee}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var RK=(t,e)=>e.codiceFiscale;function PK(t,e){if(t&1){let n=ce();m(0,"div",14)(1,"div",15)(2,"div")(3,"div",16),E(4),g(),m(5,"small",17),E(6),g()(),m(7,"button",18),q("click",function(){let i=U(n).$implicit,o=D(3);return j(o.removeCoproprietario(i.codiceFiscale))}),O(8,"i",19),g()()()}if(t&2){let n=e.$implicit;C(4),sn("",n.nome," ",n.cognome),C(2),ue("CF: ",n.codiceFiscale)}}function xK(t,e){if(t&1&&(m(0,"h5",12),E(1,"Coproprietari attuali"),g(),m(2,"div",13),zn(3,PK,9,3,"div",14,RK),g()),t&2){let n=D(2);C(3),Bn(n.car.coProprietari)}}function OK(t,e){t&1&&(m(0,"div",7),O(1,"i",20),E(2," Non ci sono coproprietari per questa auto. "),g())}function NK(t,e){if(t&1){let n=ce();m(0,"div",11)(1,"h5",12),E(2,"Nuovo Coproprietario"),g(),m(3,"div",21)(4,"div",22)(5,"label",23),E(6,"Nome *"),g(),m(7,"input",24),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newCoproprietario.nome,i)||(o.newCoproprietario.nome=i),j(i)}),g()(),m(8,"div",22)(9,"label",23),E(10,"Cognome *"),g(),m(11,"input",24),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newCoproprietario.cognome,i)||(o.newCoproprietario.cognome=i),j(i)}),g()(),m(12,"div",22)(13,"label",23),E(14,"Codice Fiscale *"),g(),m(15,"input",25),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newCoproprietario.codiceFiscale,i)||(o.newCoproprietario.codiceFiscale=i),j(i)}),g()(),m(16,"div",26)(17,"button",27),q("click",function(){U(n);let i=D(2);return j(i.addCoproprietario())}),O(18,"i",28),E(19," Aggiungi "),g()()(),m(20,"small",29),O(21,"i",30),E(22," Se l'utente non esiste verr\xE0 creato automaticamente nel sistema. "),g()()}if(t&2){let n=D(2);C(7),Q("ngModel",n.newCoproprietario.nome),C(4),Q("ngModel",n.newCoproprietario.cognome),C(4),Q("ngModel",n.newCoproprietario.codiceFiscale)}}function kK(t,e){if(t&1){let n=ce();m(0,"div",6),$(1,xK,5,0)(2,OK,3,0,"div",7),m(3,"div",8)(4,"button",9),q("click",function(){U(n);let i=D();return j(i.toggleNewCoproprietarioForm())}),O(5,"i",10),E(6),g()(),$(7,NK,23,3,"div",11),g()}if(t&2){let n=D();C(),H(n.car.coProprietari&&n.car.coProprietari.length>0?1:2),C(3),Ae("btn-primary",!n.showNewCoproprietarioForm())("btn-secondary",n.showNewCoproprietarioForm()),C(),Ae("bi-plus-circle",!n.showNewCoproprietarioForm())("bi-x-circle",n.showNewCoproprietarioForm()),C(),ue(" ",n.showNewCoproprietarioForm()?"Annulla":"Aggiungi Coproprietario"," "),C(),H(n.showNewCoproprietarioForm()?7:-1)}}var o_=class t{userService=R(ur);car;carUpdated=new je;coproprietariOpen=te(!1);showNewCoproprietarioForm=te(!1);newCoproprietario={nome:"",cognome:"",codiceFiscale:""};ngOnInit(){}toggleCoproprietari(){this.coproprietariOpen.set(!this.coproprietariOpen())}toggleNewCoproprietarioForm(){this.showNewCoproprietarioForm.set(!this.showNewCoproprietarioForm()),this.showNewCoproprietarioForm()||this.resetCoproprietarioForm()}async addCoproprietario(){let e=this.newCoproprietario.codiceFiscale.trim().toUpperCase(),n=this.newCoproprietario.nome.trim().toUpperCase(),r=this.newCoproprietario.cognome.trim().toUpperCase();if(!e||!n||!r){alert("Compila tutti i campi");return}if(this.car.proprietario.codiceFiscale===e){alert("Il codice fiscale inserito corrisponde al proprietario");return}if(this.car.coProprietari?.some(i=>i.codiceFiscale===e)){alert("Questo coproprietario \xE8 gi\xE0 presente");return}this.userService.getByCodiceFiscale(e).subscribe({next:async i=>{let o;if(i)o=i.id,console.log("Utente gi\xE0 esistente:",i);else{let a={nome:n,cognome:r,codiceFiscale:e,dataDiNascita:null,email:null,annoConseguimentoPatente:null};try{o=await new Promise((c,u)=>{this.userService.create(a).subscribe({next:h=>c(h),error:h=>u(h)})}),console.log("Nuovo utente creato con ID:",o)}catch(c){console.error("Errore nella creazione dell'utente:",c),alert("Errore durante la creazione dell'utente");return}}let s={id:o,nome:n,cognome:r,codiceFiscale:e,dataDiNascita:null,email:null,annoConseguimentoPatente:null};this.car.coProprietari||(this.car.coProprietari=[]),this.car.coProprietari.push(s),this.carUpdated.emit(this.car),this.toggleNewCoproprietarioForm()},error:i=>{console.error("Errore durante la verifica dell'utente:",i),alert("Errore durante la verifica dell'utente")}})}removeCoproprietario(e){confirm("Sei sicuro di voler rimuovere questo coproprietario?")&&(this.car.coProprietari=this.car.coProprietari?.filter(n=>n.codiceFiscale!==e),this.carUpdated.emit(L({},this.car)))}resetCoproprietarioForm(){this.newCoproprietario={nome:"",cognome:"",codiceFiscale:""}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-sezione-coproprietari"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-people-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-info"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-coproprietario-form"],[1,"mb-3"],[1,"coproprietari-list","mb-4"],[1,"coproprietario-item","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"text-muted","text-uppercase"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"],[1,"row"],[1,"col-md-4","mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","maxlength","16",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),q("click",function(){return r.toggleCoproprietari()}),m(2,"div",2),O(3,"i",3),m(4,"span",4),E(5,"Coproprietari"),g()(),O(6,"i",5),g(),$(7,kK,8,11,"div",6),g()),n&2&&(C(6),Ae("bi-chevron-up",r.coproprietariOpen())("bi-chevron-down",!r.coproprietariOpen()),C(),H(r.coproprietariOpen()?7:-1))},dependencies:[Ke,ln,Ut,cn,Rs,Yt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.coproprietari-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.coproprietario-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.coproprietario-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.new-coproprietario-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var _L="firebasestorage.googleapis.com",vL="storageBucket",FK=120*1e3,LK=600*1e3;var pt=class t extends wn{constructor(e,n,r=0){super(ZI(e),`Firebase Storage: ${n} (${ZI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ZI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},yt=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(yt||{});function ZI(t){return"storage/"+t}function rT(){let t="An unknown error occurred, please check the error payload for server response.";return new pt(yt.UNKNOWN,t)}function VK(t){return new pt(yt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function UK(t){return new pt(yt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jK(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(yt.UNAUTHENTICATED,t)}function zK(){return new pt(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BK(t){return new pt(yt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $K(){return new pt(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HK(){return new pt(yt.CANCELED,"User canceled the upload/download.")}function qK(t){return new pt(yt.INVALID_URL,"Invalid URL '"+t+"'.")}function WK(t){return new pt(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GK(){return new pt(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vL+"' property when initializing the app?")}function KK(){return new pt(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YK(){return new pt(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QK(t){return new pt(yt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function JI(t){return new pt(yt.INVALID_ARGUMENT,t)}function yL(){return new pt(yt.APP_DELETED,"The Firebase app was deleted.")}function ZK(t){return new pt(yt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nd(t,e){return new pt(yt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Od(t){throw new pt(yt.INTERNAL_ERROR,"Internal error: "+t)}var Ar=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw WK(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(ge){ge.path_=decodeURIComponent(ge.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${i}/o${_}`,"i"),T={bucket:1,path:3},k=n===_L?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",B=new RegExp(`^https?://${k}/${i}/${N}`,"i"),ae=[{regex:a,indices:c,postModify:o},{regex:y,indices:T,postModify:u},{regex:B,indices:{bucket:1,path:2},postModify:u}];for(let ge=0;ge<ae.length;ge++){let lt=ae[ge],Le=lt.regex.exec(e);if(Le){let A=Le[lt.indices.bucket],w=Le[lt.indices.path];w||(w=""),r=new t(A,w),lt.postModify(r);break}}if(r==null)throw qK(e);return r}},XI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function JK(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function h(...N){u||(u=!0,e.apply(null,N))}function p(N){i=setTimeout(()=>{i=null,t(y,c())},N)}function _(){o&&clearTimeout(o)}function y(N,...B){if(u){_();return}if(N){_(),h.call(null,N,...B);return}if(c()||s){_(),h.call(null,N,...B);return}r<64&&(r*=2);let ae;a===1?(a=2,ae=0):ae=(r+Math.random())*1e3,p(ae)}let T=!1;function k(N){T||(T=!0,_(),!u&&(i!==null?(N||(a=2),clearTimeout(i),p(0)):N||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,k(!0)},n),k}function XK(t){t(!1)}function eY(t){return t!==void 0}function tY(t){return typeof t=="object"&&!Array.isArray(t)}function iT(t){return typeof t=="string"||t instanceof String}function dL(t){return oT()&&t instanceof Blob}function oT(){return typeof Blob<"u"}function hL(t,e,n,r){if(r<e)throw JI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw JI(`Invalid value for '${t}'. Expected ${n} or less.`)}function l_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function EL(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var qc=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(qc||{});function nY(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}var eT=class{constructor(e,n,r,i,o,s,a,c,u,h,p,_=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=_,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,k)=>{this.resolve_=T,this.reject_=k,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Hc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===qc.NO_ERROR,c=o.getStatus();if(!a||nY(c,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===qc.ABORT;r(!1,new Hc(!1,null,h));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Hc(u,o))})},n=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());eY(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=rT();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?yL():HK();s(c)}else{let c=$K();s(c)}};this.canceled_?n(!1,new Hc(!1,null,!0)):this.backoffId_=JK(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&XK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Hc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function rY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function iY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aY(t,e,n,r,i,o,s=!0,a=!1){let c=EL(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return oY(h,e),rY(h,n),iY(h,o),sY(h,r),new eT(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}function cY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lY(...t){let e=cY();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(oT())return new Blob(t);throw new pt(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function dY(t){if(typeof atob>"u")throw QK("base-64");return atob(t)}var ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},kd=class{constructor(e,n){this.data=e,this.contentType=n||null}};function hY(t,e){switch(t){case ui.RAW:return new kd(CL(e));case ui.BASE64:case ui.BASE64URL:return new kd(wL(t,e));case ui.DATA_URL:return new kd(pY(e),gY(e))}throw rT()}function CL(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function fY(t){let e;try{e=decodeURIComponent(t)}catch{throw Nd(ui.DATA_URL,"Malformed data URL.")}return CL(e)}function wL(t,e){switch(t){case ui.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Nd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ui.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Nd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dY(e)}catch(i){throw i.message.includes("polyfill")?i:Nd(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var a_=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nd(ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=mY(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function pY(t){let e=new a_(t);return e.base64?wL(ui.BASE64,e.rest):fY(e.rest)}function gY(t){return new a_(t).contentType}function mY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var c_=class t{constructor(e,n){let r=0,i="";dL(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(dL(this.data_)){let r=this.data_,i=uY(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(oT()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(lY.apply(null,n))}else{let n=e.map(s=>iT(s)?hY(ui.RAW,s).data:s.data_),r=0;n.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new t(i,!0)}}uploadData(){return this.data_}};function bL(t){let e;try{e=JSON.parse(t)}catch{return null}return tY(e)?e:null}function _Y(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vY(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function IL(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function yY(t,e){return e}var Zt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||yY}},s_=null;function EY(t){return!iT(t)||t.length<2?t:IL(t)}function TL(){if(s_)return s_;let t=[];t.push(new Zt("bucket")),t.push(new Zt("generation")),t.push(new Zt("metageneration")),t.push(new Zt("name","fullPath",!0));function e(o,s){return EY(s)}let n=new Zt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}let i=new Zt("size");return i.xform=r,t.push(i),t.push(new Zt("timeCreated")),t.push(new Zt("updated")),t.push(new Zt("md5Hash",null,!0)),t.push(new Zt("cacheControl",null,!0)),t.push(new Zt("contentDisposition",null,!0)),t.push(new Zt("contentEncoding",null,!0)),t.push(new Zt("contentLanguage",null,!0)),t.push(new Zt("contentType",null,!0)),t.push(new Zt("metadata","customMetadata",!0)),s_=t,s_}function CY(t,e){function n(){let r=t.bucket,i=t.fullPath,o=new Ar(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function wY(t,e,n){let r={};r.type="file";let i=n.length;for(let o=0;o<i;o++){let s=n[o];r[s.local]=s.xform(r,e[s.server])}return CY(r,t),r}function DL(t,e,n){let r=bL(e);return r===null?null:wY(t,r,n)}function bY(t,e,n,r){let i=bL(e);if(i===null||!iT(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(u=>{let h=t.bucket,p=t.fullPath,_="/b/"+s(h)+"/o/"+s(p),y=l_(_,n,r),T=EL({alt:"media",token:u});return y+T})[0]}function IY(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Fd=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function SL(t){if(!t)throw rT()}function TY(t,e){function n(r,i){let o=DL(t,i,e);return SL(o!==null),o}return n}function DY(t,e){function n(r,i){let o=DL(t,i,e);return SL(o!==null),bY(o,i,t.host,t._protocol)}return n}function AL(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=zK():i=jK():n.getStatus()===402?i=UK(t.bucket):n.getStatus()===403?i=BK(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ML(t){let e=AL(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=VK(t.path)),o.serverResponse=i.serverResponse,o}return n}function SY(t,e,n){let r=e.fullServerUrl(),i=l_(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Fd(i,o,DY(t,n),s);return a.errorHandler=ML(e),a}function AY(t,e){let n=e.fullServerUrl(),r=l_(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,u){}let a=new Fd(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=ML(e),a}function MY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RY(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=MY(null,e)),r}function PY(t,e,n,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let ae="";for(let ge=0;ge<2;ge++)ae=ae+Math.random().toString().slice(2);return ae}let c=a();s["Content-Type"]="multipart/related; boundary="+c;let u=RY(e,r,i),h=IY(u,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,_=`\r
--`+c+"--",y=c_.getBlob(p,r,_);if(y===null)throw KK();let T={name:u.fullPath},k=l_(o,t.host,t._protocol),N="POST",B=t.maxUploadRetryTime,ne=new Fd(k,N,TY(t,n),B);return ne.urlParams=T,ne.headers=s,ne.body=y.uploadData(),ne.errorHandler=AL(e),ne}var Mye=256*1024;var fL=null,tT=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Od("cannot .send() more than once");if(br(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(let s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Od("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Od("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Od("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Od("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},nT=class extends tT{initXhr(){this.xhr_.responseType="text"}};function sT(){return fL?fL():new nT}var Wc=class t{constructor(e,n){this._service=e,n instanceof Ar?this._location=n:this._location=Ar.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Ar(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IL(this._location.path)}get storage(){return this._service}get parent(){let e=_Y(this._location.path);if(e===null)return null;let n=new Ar(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ZK(e)}};function xY(t,e,n){t._throwIfRoot("uploadBytes");let r=PY(t.storage,t._location,TL(),new c_(e,!0),n);return t.storage.makeRequestWithTokens(r,sT).then(i=>({metadata:i,ref:t}))}function OY(t){t._throwIfRoot("getDownloadURL");let e=SY(t.storage,t._location,TL());return t.storage.makeRequestWithTokens(e,sT).then(n=>{if(n===null)throw YK();return n})}function NY(t){t._throwIfRoot("deleteObject");let e=AY(t.storage,t._location);return t.storage.makeRequestWithTokens(e,sT)}function kY(t,e){let n=vY(t._location.path,e),r=new Ar(t._location.bucket,n);return new Wc(t.storage,r)}function FY(t){return/^[A-Za-z]+:\/\//.test(t)}function LY(t,e){return new Wc(t,e)}function RL(t,e){if(t instanceof Ld){let n=t;if(n._bucket==null)throw GK();let r=new Wc(n,n._bucket);return e!=null?RL(r,e):r}else return e!==void 0?kY(t,e):t}function VY(t,e){if(e&&FY(e)){if(t instanceof Ld)return LY(t,e);throw JI("To use ref(service, url), the first argument must be a Storage instance.")}else return RL(t,e)}function pL(t,e){let n=e?.[vL];return n==null?null:Ar.makeFromBucketSpec(n,t)}function UY(t,e,n,r={}){t.host=`${e}:${n}`;let i=br(e);i&&(hc(`https://${t.host}/b`),fc("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:Dg(o,t.app.options.projectId))}var Ld=class{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=_L,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FK,this._maxUploadRetryTime=LK,this._requests=new Set,i!=null?this._bucket=Ar.makeFromBucketSpec(i,this._host):this._bucket=pL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ar.makeFromBucketSpec(this._url,e):this._bucket=pL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new XI(yL());{let s=aY(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}},gL="@firebase/storage",mL="0.13.14";var PL="storage";function xL(t,e,n){return t=Je(t),xY(t,e,n)}function OL(t){return t=Je(t),OY(t)}function NL(t){return t=Je(t),NY(t)}function kL(t,e){return t=Je(t),VY(t,e)}function FL(t=xi(),e){t=Je(t);let r=Co(t,PL).getImmediate({identifier:e}),i=Tg("storage");return i&&LL(r,...i),r}function LL(t,e,n,r={}){UY(t,e,n,r)}function jY(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ld(n,r,i,e,Qr)}function zY(){Yn(new Qt(PL,jY,"PUBLIC").setMultipleInstances(!0)),Xe(gL,mL,""),Xe(gL,mL,"esm2017")}zY();var ea=class{constructor(e){return e}},VL="storage",aT=class{constructor(){return wo(VL)}};var cT=new K("angularfire2.storage-instances");function BY(t,e){let n=Ns(VL,t,e);return n&&new ea(n)}function $Y(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ea(r)}}var HY={provide:aT,deps:[[new xt,cT]]},qY={provide:ea,useFactory:BY,deps:[[new xt,cT],Ir]};function UL(t,...e){return Xe("angularfire",Zr.full,"gcs"),ht([qY,HY,{provide:cT,useFactory:$Y(t),multi:!0,deps:[xe,We,Jr,Oi,[new xt,Us],[new xt,Io],...e]}])}var jL=et(NL,!0,2);var zL=et(OL,!0);var BL=et(FL,!0);var lT=et(kL,!0,2);var $L=et(xL,!0);var u_=class t{storage=R(ea);async uploadFile(e,n){let r=lT(this.storage,n);return await $L(r,e),await zL(r)}async deleteFile(e){let n=lT(this.storage,e);await jL(n)}getAssicurazionePath(e,n,r){let i=Date.now(),o=r.split(".").pop();return`assicurazioni/${e}/${n}_${i}.${o}`}getPathFromUrl(e){try{let r=new URL(e).pathname.split("/o/")[1]?.split("?")[0];return decodeURIComponent(r||"")}catch{return""}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})};var WY=(t,e)=>e.id;function GY(t,e){t&1&&(m(0,"div",7),O(1,"i",13),m(2,"div")(3,"strong"),E(4,"Attenzione!"),g(),E(5," Questa auto non ha un'assicurazione attiva. Provvedi al pi\xF9 presto a stipularne una. "),g()())}function KY(t,e){t&1&&(m(0,"span",18),E(1,"In scadenza"),g())}function YY(t,e){t&1&&(m(0,"span",19),E(1,"Scaduta"),g())}function QY(t,e){if(t&1&&(m(0,"div",29),O(1,"i",37),E(2),g()),t&2){let n=D(4);C(2),sn(" File attuale: ",n.editAssicurazione.documento.nome," (",n.formatFileSize(n.editAssicurazione.documento.dimensione),") ")}}function ZY(t,e){if(t&1&&(m(0,"small",31),O(1,"i",37),E(2),g()),t&2){let n=D(4);C(2),sn(" Nuovo file: ",n.editSelectedFile().name," (",n.formatFileSize(n.editSelectedFile().size),") ")}}function JY(t,e){t&1&&(m(0,"button",35),O(1,"span",38),E(2," Salvataggio... "),g())}function XY(t,e){if(t&1){let n=ce();m(0,"button",39),q("click",function(){U(n);let i=D(4);return j(i.saveEditAssicurazione())}),O(1,"i",40),E(2," Salva "),g()}}function eQ(t,e){if(t&1){let n=ce();m(0,"div",20)(1,"div",21)(2,"label",22),E(3,"Compagnia *"),g(),m(4,"input",23),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editAssicurazione.compagnia,i)||(o.editAssicurazione.compagnia=i),j(i)}),g()(),m(5,"div",21)(6,"label",22),E(7,"Numero Polizza *"),g(),m(8,"input",23),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editAssicurazione.numeroPolizza,i)||(o.editAssicurazione.numeroPolizza=i),j(i)}),g()(),m(9,"div",24)(10,"label",22),E(11,"Data Inizio *"),g(),m(12,"input",25),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editAssicurazione.dataInizio,i)||(o.editAssicurazione.dataInizio=i),j(i)}),g()(),m(13,"div",24)(14,"label",22),E(15,"Data Fine *"),g(),m(16,"input",25),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editAssicurazione.dataFine,i)||(o.editAssicurazione.dataFine=i),j(i)}),g()(),m(17,"div",24)(18,"label",22),E(19,"Costo Annuale (\u20AC) *"),g(),m(20,"input",26),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editAssicurazione.costoAnnuale,i)||(o.editAssicurazione.costoAnnuale=i),j(i)}),g()(),m(21,"div",27)(22,"label",22),E(23,"Coperture (separate da virgola)"),g(),m(24,"input",28),Z("ngModelChange",function(i){U(n);let o=D(3);return X(o.editCopertureInput,i)||(o.editCopertureInput=i),j(i)}),g()(),m(25,"div",27)(26,"label",22),E(27,"Contratto polizza"),g(),$(28,QY,3,2,"div",29),m(29,"input",30),q("change",function(i){U(n);let o=D(3);return j(o.onEditFileSelected(i))}),g(),$(30,ZY,3,2,"small",31),g(),m(31,"div",32)(32,"button",33),q("click",function(){U(n);let i=D(3);return j(i.cancelEdit())}),O(33,"i",34),E(34," Annulla "),g(),$(35,JY,3,0,"button",35)(36,XY,3,0,"button",36),g()()}if(t&2){let n=D(3);C(4),Q("ngModel",n.editAssicurazione.compagnia),C(4),Q("ngModel",n.editAssicurazione.numeroPolizza),C(4),Q("ngModel",n.editAssicurazione.dataInizio),C(4),Q("ngModel",n.editAssicurazione.dataFine),C(4),Q("ngModel",n.editAssicurazione.costoAnnuale),C(4),Q("ngModel",n.editCopertureInput),C(4),H(n.editAssicurazione.documento?28:-1),C(2),H(n.editSelectedFile()?30:-1),C(5),H(n.uploadingFile()?35:36)}}function tQ(t,e){if(t&1&&(m(0,"li"),O(1,"i",52),E(2),g()),t&2){let n=e.$implicit;C(2),ke(n)}}function nQ(t,e){if(t&1&&(m(0,"ul",44),zn(1,tQ,3,1,"li",null,fp),g()),t&2){let n=D(2);C(),Bn(n.coperture)}}function rQ(t,e){t&1&&(m(0,"p",45),E(1,"Nessuna copertura specificata"),g())}function iQ(t,e){if(t&1&&(m(0,"div",46)(1,"div",53),O(2,"i",54),m(3,"strong"),E(4,"Documento Contratto Polizza"),g()(),m(5,"div",55)(6,"div",56)(7,"div",41)(8,"div",2),O(9,"i",57),m(10,"div")(11,"div",58),E(12),g(),m(13,"div",59)(14,"span",60),E(15),g(),m(16,"small",61),O(17,"i",62),E(18),g()()()()(),m(19,"div",63)(20,"a",64),O(21,"i",65),E(22," Scarica PDF "),g()()()()()),t&2){let n=D(2),r=D(2);C(12),ke(n.documento.nome),C(3),ke(r.formatFileSize(n.documento.dimensione)),C(3),ue(" Caricato il ",r.formatDocumentDate(n.documento.dataCaricamento)," "),C(2),ye("href",n.documento.url,Kl)}}function oQ(t,e){if(t&1){let n=ce();m(0,"div",20)(1,"div",41)(2,"div",42)(3,"strong"),E(4,"Compagnia:"),g(),E(5),g(),m(6,"div",42)(7,"strong"),E(8,"Polizza:"),g(),E(9),g(),m(10,"div",42)(11,"strong"),E(12,"Data Inizio:"),g(),E(13),g(),m(14,"div",42)(15,"strong"),E(16,"Data Fine:"),g(),m(17,"span"),E(18),g()(),m(19,"div",42)(20,"strong"),E(21,"Costo Annuale:"),g(),E(22),g()(),m(23,"div",43)(24,"strong"),E(25,"Coperture:"),g(),$(26,nQ,3,0,"ul",44)(27,rQ,2,0,"p",45),g()(),$(28,iQ,23,4,"div",46),m(29,"div",47)(30,"button",48),q("click",function(){U(n);let i=D(),o=D(2);return j(o.startEditAssicurazione(i))}),O(31,"i",49),E(32," Modifica "),g(),m(33,"button",50),q("click",function(){U(n);let i=D(),o=D(2);return j(o.deleteAssicurazione(i.id))}),O(34,"i",51),E(35," Elimina "),g()()}if(t&2){let n=D(),r=D(2);C(5),ue(" ",n.compagnia," "),C(4),ue(" ",n.numeroPolizza," "),C(4),ue(" ",r.formatDate(n.dataInizio)," "),C(4),Ae("text-danger",r.isAssicurazioneInScadenza(n.dataFine)||r.isAssicurazioneScaduta(n.dataFine)),C(),ue(" ",r.formatDate(n.dataFine)," "),C(4),ue(" ",r.formatPrice(n.costoAnnuale)," "),C(4),H(n.coperture&&n.coperture.length>0?26:27),C(2),H(n.documento?28:-1)}}function sQ(t,e){if(t&1&&(m(0,"div",14)(1,"div",15)(2,"h5",16),O(3,"i",17),E(4," Assicurazione Attiva "),g(),$(5,KY,2,0,"span",18),$(6,YY,2,0,"span",19),g(),$(7,eQ,37,9,"div",20)(8,oQ,36,9),g()),t&2){let n=e,r=D(2);Ae("in-scadenza",r.isAssicurazioneInScadenza(n.dataFine))("scaduta",r.isAssicurazioneScaduta(n.dataFine)),C(5),H(r.isAssicurazioneInScadenza(n.dataFine)?5:-1),C(),H(r.isAssicurazioneScaduta(n.dataFine)?6:-1),C(),H(r.editingAssicurazioneId===n.id&&r.editAssicurazione?7:8)}}function aQ(t,e){if(t&1&&(m(0,"small",31),O(1,"i",37),E(2),g()),t&2){let n=D(3);C(2),sn(" ",n.selectedFile().name," (",n.formatFileSize(n.selectedFile().size),") ")}}function cQ(t,e){t&1&&(m(0,"button",67),O(1,"span",38),E(2," Caricamento... "),g())}function lQ(t,e){if(t&1){let n=ce();m(0,"button",69),q("click",function(){U(n);let i=D(3);return j(i.addAssicurazione())}),O(1,"i",70),E(2," Aggiungi "),g()}}function uQ(t,e){if(t&1){let n=ce();m(0,"div",12)(1,"h5",66),E(2,"Nuova Assicurazione"),g(),m(3,"div",20)(4,"div",21)(5,"label",22),E(6,"Compagnia *"),g(),m(7,"input",23),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newAssicurazione.compagnia,i)||(o.newAssicurazione.compagnia=i),j(i)}),g()(),m(8,"div",21)(9,"label",22),E(10,"Numero Polizza *"),g(),m(11,"input",23),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newAssicurazione.numeroPolizza,i)||(o.newAssicurazione.numeroPolizza=i),j(i)}),g()(),m(12,"div",24)(13,"label",22),E(14,"Data Inizio *"),g(),m(15,"input",25),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newAssicurazione.dataInizio,i)||(o.newAssicurazione.dataInizio=i),j(i)}),g()(),m(16,"div",24)(17,"label",22),E(18,"Data Fine *"),g(),m(19,"input",25),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newAssicurazione.dataFine,i)||(o.newAssicurazione.dataFine=i),j(i)}),g()(),m(20,"div",24)(21,"label",22),E(22,"Costo Annuale (\u20AC) *"),g(),m(23,"input",26),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newAssicurazione.costoAnnuale,i)||(o.newAssicurazione.costoAnnuale=i),j(i)}),g()(),m(24,"div",27)(25,"label",22),E(26,"Coperture (separate da virgola)"),g(),m(27,"input",28),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.copertureInput,i)||(o.copertureInput=i),j(i)}),g()(),m(28,"div",27)(29,"label",22),E(30,"Contratto polizza"),g(),m(31,"input",30),q("change",function(i){U(n);let o=D(2);return j(o.onFileSelected(i))}),g(),$(32,aQ,3,2,"small",31),g(),m(33,"div",32),$(34,cQ,3,0,"button",67)(35,lQ,3,0,"button",68),g()()()}if(t&2){let n=D(2);C(7),Q("ngModel",n.newAssicurazione.compagnia),C(4),Q("ngModel",n.newAssicurazione.numeroPolizza),C(4),Q("ngModel",n.newAssicurazione.dataInizio),C(4),Q("ngModel",n.newAssicurazione.dataFine),C(4),Q("ngModel",n.newAssicurazione.costoAnnuale),C(4),Q("ngModel",n.copertureInput),C(5),H(n.selectedFile()?32:-1),C(2),H(n.uploadingFile()?34:35)}}function dQ(t,e){if(t&1&&(m(0,"div",29),O(1,"i",37),E(2),g()),t&2){let n=D(5);C(2),sn(" File attuale: ",n.editAssicurazione.documento.nome," (",n.formatFileSize(n.editAssicurazione.documento.dimensione),") ")}}function hQ(t,e){if(t&1&&(m(0,"small",31),O(1,"i",37),E(2),g()),t&2){let n=D(5);C(2),sn(" Nuovo file: ",n.editSelectedFile().name," (",n.formatFileSize(n.editSelectedFile().size),") ")}}function fQ(t,e){t&1&&(m(0,"button",35),O(1,"span",38),E(2," Salvataggio... "),g())}function pQ(t,e){if(t&1){let n=ce();m(0,"button",39),q("click",function(){U(n);let i=D(5);return j(i.saveEditAssicurazione())}),O(1,"i",40),E(2," Salva "),g()}}function gQ(t,e){if(t&1){let n=ce();m(0,"div",20)(1,"div",21)(2,"label",22),E(3,"Compagnia *"),g(),m(4,"input",23),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editAssicurazione.compagnia,i)||(o.editAssicurazione.compagnia=i),j(i)}),g()(),m(5,"div",21)(6,"label",22),E(7,"Numero Polizza *"),g(),m(8,"input",23),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editAssicurazione.numeroPolizza,i)||(o.editAssicurazione.numeroPolizza=i),j(i)}),g()(),m(9,"div",24)(10,"label",22),E(11,"Data Inizio *"),g(),m(12,"input",25),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editAssicurazione.dataInizio,i)||(o.editAssicurazione.dataInizio=i),j(i)}),g()(),m(13,"div",24)(14,"label",22),E(15,"Data Fine *"),g(),m(16,"input",25),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editAssicurazione.dataFine,i)||(o.editAssicurazione.dataFine=i),j(i)}),g()(),m(17,"div",24)(18,"label",22),E(19,"Costo Annuale (\u20AC) *"),g(),m(20,"input",26),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editAssicurazione.costoAnnuale,i)||(o.editAssicurazione.costoAnnuale=i),j(i)}),g()(),m(21,"div",27)(22,"label",22),E(23,"Coperture (separate da virgola)"),g(),m(24,"input",28),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editCopertureInput,i)||(o.editCopertureInput=i),j(i)}),g()(),m(25,"div",27)(26,"label",22),E(27,"Contratto polizza"),g(),$(28,dQ,3,2,"div",29),m(29,"input",30),q("change",function(i){U(n);let o=D(4);return j(o.onEditFileSelected(i))}),g(),$(30,hQ,3,2,"small",31),g(),m(31,"div",32)(32,"button",33),q("click",function(){U(n);let i=D(4);return j(i.cancelEdit())}),O(33,"i",34),E(34," Annulla "),g(),$(35,fQ,3,0,"button",35)(36,pQ,3,0,"button",36),g()()}if(t&2){let n=D(4);C(4),Q("ngModel",n.editAssicurazione.compagnia),C(4),Q("ngModel",n.editAssicurazione.numeroPolizza),C(4),Q("ngModel",n.editAssicurazione.dataInizio),C(4),Q("ngModel",n.editAssicurazione.dataFine),C(4),Q("ngModel",n.editAssicurazione.costoAnnuale),C(4),Q("ngModel",n.editCopertureInput),C(4),H(n.editAssicurazione.documento?28:-1),C(2),H(n.editSelectedFile()?30:-1),C(5),H(n.uploadingFile()?35:36)}}function mQ(t,e){if(t&1&&(m(0,"div",42)(1,"strong"),E(2,"Contratto polizza:"),g(),m(3,"a",82),O(4,"i",37),E(5),g(),O(6,"br"),m(7,"small",83),E(8),g()()),t&2){let n=D(2).$implicit,r=D(3);C(3),ye("href",n.documento.url,Kl),C(2),ue(" ",n.documento.nome," "),C(3),sn(" ",r.formatFileSize(n.documento.dimensione)," - Caricato il ",r.formatDocumentDate(n.documento.dataCaricamento)," ")}}function _Q(t,e){if(t&1&&(m(0,"li"),O(1,"i",52),E(2),g()),t&2){let n=e.$implicit;C(2),ke(n)}}function vQ(t,e){if(t&1&&(m(0,"ul",44),zn(1,_Q,3,1,"li",null,fp),g()),t&2){let n=D(2).$implicit;C(),Bn(n.coperture)}}function yQ(t,e){t&1&&(m(0,"p",45),E(1,"Nessuna copertura"),g())}function EQ(t,e){if(t&1){let n=ce();m(0,"div",74)(1,"div",75)(2,"div",76)(3,"div",42)(4,"strong"),E(5,"Compagnia:"),g(),E(6),g(),m(7,"div",42)(8,"strong"),E(9,"Polizza:"),g(),E(10),g(),m(11,"div",42)(12,"strong"),E(13,"Periodo:"),g(),E(14),g(),m(15,"div",42)(16,"strong"),E(17,"Costo Annuale:"),g(),E(18),g(),$(19,mQ,9,4,"div",42),g(),m(20,"div",77)(21,"strong"),E(22,"Coperture:"),g(),$(23,vQ,3,0,"ul",44)(24,yQ,2,0,"p",45),g()(),m(25,"div",78)(26,"button",79),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.startEditAssicurazione(i))}),O(27,"i",80),g(),m(28,"button",50),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.deleteAssicurazione(i.id))}),O(29,"i",81),g()()()}if(t&2){let n=D().$implicit,r=D(3);C(6),ue(" ",n.compagnia," "),C(4),ue(" ",n.numeroPolizza," "),C(4),sn(" ",r.formatDate(n.dataInizio)," - ",r.formatDate(n.dataFine)," "),C(4),ue(" ",r.formatPrice(n.costoAnnuale)," "),C(),H(n.documento?19:-1),C(4),H(n.coperture&&n.coperture.length>0?23:24)}}function CQ(t,e){if(t&1&&(m(0,"div",73),$(1,gQ,37,9,"div",20)(2,EQ,30,7,"div",74),g()),t&2){let n=e.$implicit,r=D(3);Ae("in-scadenza",r.isAssicurazioneInScadenza(n.dataFine))("scaduta",r.isAssicurazioneScaduta(n.dataFine)),C(),H(r.editingAssicurazioneId===n.id&&r.editAssicurazione?1:2)}}function wQ(t,e){if(t&1&&(O(0,"hr",71),m(1,"h5",66),E(2,"Storico Assicurazioni"),g(),zn(3,CQ,3,5,"div",72,WY)),t&2){let n=D(2);C(3),Bn(n.getStoricoAssicurazioni())}}function bQ(t,e){if(t&1){let n=ce();m(0,"div",6),$(1,GY,6,0,"div",7),$(2,sQ,9,7,"div",8),m(3,"div",9)(4,"button",10),q("click",function(){U(n);let i=D();return j(i.toggleNewAssicurazioneForm())}),O(5,"i",11),E(6),g()(),$(7,uQ,36,8,"div",12),$(8,wQ,5,0),g()}if(t&2){let n,r=D();C(),H(r.getAssicurazioneAttiva()?-1:1),C(),H((n=r.getAssicurazioneAttiva())?2:-1,n),C(2),Ae("btn-primary",!r.showNewAssicurazioneForm())("btn-secondary",r.showNewAssicurazioneForm()),C(),Ae("bi-plus-circle",!r.showNewAssicurazioneForm())("bi-x-circle",r.showNewAssicurazioneForm()),C(),ue(" ",r.showNewAssicurazioneForm()?"Annulla":"Aggiungi Nuova Assicurazione"," "),C(),H(r.showNewAssicurazioneForm()?7:-1),C(),H(r.getStoricoAssicurazioni().length>0?8:-1)}}var d_=class t{car;carUpdated=new je;storageService=R(u_);assicurazioniOpen=te(!1);showNewAssicurazioneForm=te(!1);newAssicurazione=this.getEmptyAssicurazione();copertureInput="";editingAssicurazioneId=null;editAssicurazione=null;editCopertureInput="";selectedFile=te(null);editSelectedFile=te(null);uploadingFile=te(!1);toggleAssicurazioni(){this.assicurazioniOpen.set(!this.assicurazioniOpen())}toggleNewAssicurazioneForm(){this.showNewAssicurazioneForm.set(!this.showNewAssicurazioneForm()),this.showNewAssicurazioneForm()||(this.newAssicurazione=this.getEmptyAssicurazione(),this.copertureInput="",this.selectedFile.set(null))}getAssicurazioneAttiva(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return null;let e=new Date;return e.setHours(0,0,0,0),this.car.assicurazioni.find(r=>{let i=new Date(r.dataInizio),o=new Date(r.dataFine);return i.setHours(0,0,0,0),o.setHours(0,0,0,0),i<=e&&o>=e})||null}getStoricoAssicurazioni(){if(!this.car.assicurazioni||this.car.assicurazioni.length===0)return[];let e=this.getAssicurazioneAttiva();return[...this.car.assicurazioni].filter(n=>!e||n.id!==e.id).sort((n,r)=>new Date(r.dataInizio).getTime()-new Date(n.dataInizio).getTime())}isAssicurazioneInScadenza(e){let n=new Date,i=new Date(e).getTime()-n.getTime(),o=Math.ceil(i/(1e3*60*60*24));return o<=30&&o>=0}isAssicurazioneScaduta(e){let n=new Date;return new Date(e)<n}async addAssicurazione(){if(!this.newAssicurazione.compagnia||!this.newAssicurazione.numeroPolizza||!this.newAssicurazione.dataInizio||!this.newAssicurazione.dataFine){alert("Compila tutti i campi obbligatori");return}let e=new Date(this.newAssicurazione.dataInizio),n=new Date(this.newAssicurazione.dataFine);if(n<=e){alert("La data di fine deve essere successiva alla data di inizio");return}if(this.car.assicurazioni)for(let o of this.car.assicurazioni){let s=new Date(o.dataInizio),a=new Date(o.dataFine);if(e>=s&&e<=a||n>=s&&n<=a||e<=s&&n>=a){alert("Le date si sovrappongono con un'altra assicurazione esistente");return}}let r=this.copertureInput.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o.length>0),i={id:Date.now().toString(),compagnia:this.newAssicurazione.compagnia.toUpperCase(),numeroPolizza:this.newAssicurazione.numeroPolizza.toUpperCase(),dataInizio:this.newAssicurazione.dataInizio,dataFine:this.newAssicurazione.dataFine,costoAnnuale:this.newAssicurazione.costoAnnuale||0,coperture:r};if(this.car.assicurazioni||(this.car.assicurazioni=[]),this.selectedFile()){this.uploadingFile.set(!0);try{let o=this.storageService.getAssicurazionePath(this.car.targa,i.id,this.selectedFile().name),s=await this.storageService.uploadFile(this.selectedFile(),o);i.documento={nome:this.selectedFile().name,url:s,dimensione:this.selectedFile().size,dataCaricamento:new Date}}catch(o){console.error("Errore durante l'upload del file:",o),alert("Errore durante il caricamento del file. L'assicurazione verr\xE0 salvata senza documento.")}finally{this.uploadingFile.set(!1)}}this.car.assicurazioni.push(i),this.carUpdated.emit(this.car),this.toggleNewAssicurazioneForm()}async deleteAssicurazione(e){if(confirm("Sei sicuro di voler eliminare questa assicurazione?")){let n=this.car.assicurazioni?.find(r=>r.id===e);if(n?.documento?.url)try{let r=this.storageService.getPathFromUrl(n.documento.url);await this.storageService.deleteFile(r)}catch(r){console.error("Errore durante l'eliminazione del file:",r)}this.car.assicurazioni=this.car.assicurazioni?.filter(r=>r.id!==e),this.carUpdated.emit(this.car)}}startEditAssicurazione(e){this.editingAssicurazioneId=e.id,this.editAssicurazione=L({},e),this.editCopertureInput=e.coperture?e.coperture.join(", "):"",this.editSelectedFile.set(null)}cancelEdit(){this.editingAssicurazioneId=null,this.editAssicurazione=null,this.editCopertureInput="",this.editSelectedFile.set(null)}async saveEditAssicurazione(){if(!this.editAssicurazione||!this.editAssicurazione.compagnia||!this.editAssicurazione.numeroPolizza||!this.editAssicurazione.dataInizio||!this.editAssicurazione.dataFine){alert("Compila tutti i campi obbligatori");return}let e=new Date(this.editAssicurazione.dataInizio);if(new Date(this.editAssicurazione.dataFine)<=e){alert("La data di fine deve essere successiva alla data di inizio");return}let r=this.editCopertureInput.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o.length>0),i=this.car.assicurazioni?.findIndex(o=>o.id===this.editingAssicurazioneId);if(i!==void 0&&i!==-1&&this.car.assicurazioni){let o=re(L({},this.editAssicurazione),{compagnia:this.editAssicurazione.compagnia.toUpperCase(),numeroPolizza:this.editAssicurazione.numeroPolizza.toUpperCase(),coperture:r});if(this.editSelectedFile()){this.uploadingFile.set(!0);try{if(o.documento?.url){let c=this.storageService.getPathFromUrl(o.documento.url);await this.storageService.deleteFile(c)}let s=this.storageService.getAssicurazionePath(this.car.targa,o.id,this.editSelectedFile().name),a=await this.storageService.uploadFile(this.editSelectedFile(),s);o.documento={nome:this.editSelectedFile().name,url:a,dimensione:this.editSelectedFile().size,dataCaricamento:new Date}}catch(s){console.error("Errore durante l'upload del file:",s),alert("Errore durante il caricamento del file. Le modifiche verranno salvate senza cambiare il documento.")}finally{this.uploadingFile.set(!1)}}this.car.assicurazioni[i]=o,this.carUpdated.emit(this.car),this.cancelEdit()}}getEmptyAssicurazione(){return{id:"",compagnia:"",numeroPolizza:"",dataInizio:new Date,dataFine:new Date,costoAnnuale:0,coperture:[]}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}onFileSelected(e){let n=e.target;if(n.files&&n.files.length>0){let r=n.files[0];if(r.size>5*1024*1024){alert("Il file \xE8 troppo grande. Dimensione massima consentita: 5MB"),n.value="";return}this.selectedFile.set(r)}}onEditFileSelected(e){let n=e.target;if(n.files&&n.files.length>0){let r=n.files[0];if(r.size>5*1024*1024){alert("Il file \xE8 troppo grande. Dimensione massima consentita: 5MB"),n.value="";return}this.editSelectedFile.set(r)}}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}formatDocumentDate(e){if(!e)return"-";if(e.toDate&&typeof e.toDate=="function"){let n=e.toDate();return n.toLocaleDateString("it-IT")+" alle "+n.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}if(e instanceof Date)return e.toLocaleDateString("it-IT")+" alle "+e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"});try{let n=new Date(e);return isNaN(n.getTime())?"-":n.toLocaleDateString("it-IT")+" alle "+n.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}catch{return"-"}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-sezione-assicurazioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-shield-fill-check","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"assicurazione-attiva","mb-4",3,"in-scadenza","scaduta"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-assicurazione-form","mb-4"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"assicurazione-attiva","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"bi","bi-shield-check","text-success","me-2"],[1,"badge","bg-warning"],[1,"badge","bg-danger"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-md-4","mb-3"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","mb-3"],["type","text","placeholder","RCA, FURTO, INCENDIO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"alert","alert-info","mb-2"],["type","file","accept","application/pdf",1,"form-control",3,"change"],[1,"text-muted","d-block","mt-1"],[1,"col-12","text-end"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],["disabled","",1,"btn","btn-sm","btn-success"],[1,"btn","btn-sm","btn-success"],[1,"bi","bi-file-earmark-pdf","me-1"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"col-md-8"],[1,"mb-2"],[1,"col-md-4"],[1,"list-unstyled","mt-2","mb-0"],[1,"text-muted","mb-0","mt-2"],[1,"documento-section","mt-4"],[1,"text-end","mt-3"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash","me-1"],[1,"bi","bi-check-circle-fill","text-success","me-2"],[1,"documento-header"],[1,"bi","bi-file-earmark-text-fill","me-2"],[1,"documento-body"],[1,"row","align-items-center"],[1,"bi","bi-file-earmark-pdf","text-danger","fs-2","me-3"],[1,"documento-nome"],[1,"documento-info"],[1,"badge","bg-secondary","me-2"],[1,"text-muted"],[1,"bi","bi-clock","me-1"],[1,"col-md-4","text-end"],["target","_blank",1,"btn","btn-primary",3,"href"],[1,"bi","bi-download","me-2"],[1,"mb-3"],["disabled","",1,"btn","btn-success"],[1,"btn","btn-success"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"my-4"],[1,"assicurazione-item","mb-3",3,"in-scadenza","scaduta"],[1,"assicurazione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"row","flex-grow-1"],[1,"col-md-7"],[1,"col-md-5"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash"],["target","_blank",1,"btn","btn-sm","btn-outline-primary","ms-2",3,"href"],[1,"text-muted","ms-5"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),q("click",function(){return r.toggleAssicurazioni()}),m(2,"div",2),O(3,"i",3),m(4,"span",4),E(5,"Assicurazioni"),g()(),O(6,"i",5),g(),$(7,bQ,9,13,"div",6),g()),n&2&&(C(6),Ae("bi-chevron-up",r.assicurazioniOpen())("bi-chevron-down",!r.assicurazioniOpen()),C(),H(r.assicurazioniOpen()?7:-1))},dependencies:[Ke,ln,Ut,Kn,cn,Yt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.assicurazione-attiva[_ngcontent-%COMP%]{background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:1.5rem}.new-assicurazione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.assicurazione-storico[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}.documento-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:2px solid #e2e8f0;border-radius:12px;overflow:hidden}.documento-section[_ngcontent-%COMP%]   .documento-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:.75rem 1.25rem;font-size:.95rem;font-weight:600;display:flex;align-items:center}.documento-section[_ngcontent-%COMP%]   .documento-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]{padding:1.5rem}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .documento-nome[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#1e293b;margin-bottom:.5rem}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .documento-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .documento-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.35rem .65rem}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .documento-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:flex;align-items:center}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:.625rem 1.25rem;font-weight:600;transition:all .3s ease}.documento-section[_ngcontent-%COMP%]   .documento-body[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var IQ=(t,e)=>e.id;function TQ(t,e){if(t&1){let n=ce();m(0,"div",10)(1,"h5",12),E(2,"Nuova Manutenzione"),g(),m(3,"div",13)(4,"div",14)(5,"label",15),E(6,"Data *"),g(),m(7,"input",16),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newManutenzione.data,i)||(o.newManutenzione.data=i),j(i)}),g()(),m(8,"div",14)(9,"label",15),E(10,"Chilometraggio *"),g(),m(11,"input",17),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newManutenzione.chilometraggio,i)||(o.newManutenzione.chilometraggio=i),j(i)}),g()(),m(12,"div",14)(13,"label",15),E(14,"Costo (\u20AC)"),g(),m(15,"input",18),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newManutenzione.costo,i)||(o.newManutenzione.costo=i),j(i)}),g()(),m(16,"div",14)(17,"label",15),E(18,"Tipologia *"),g(),m(19,"select",19),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newManutenzione.tipologia,i)||(o.newManutenzione.tipologia=i),j(i)}),m(20,"option",20),E(21,"Ordinaria (Tagliando)"),g(),m(22,"option",21),E(23,"Straordinaria"),g()()(),m(24,"div",22)(25,"label",15),E(26,"Descrizione *"),g(),m(27,"textarea",23),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newManutenzione.descrizione,i)||(o.newManutenzione.descrizione=i),j(i)}),g()(),m(28,"div",24)(29,"button",25),q("click",function(){U(n);let i=D(2);return j(i.addManutenzione())}),O(30,"i",26),E(31," Aggiungi "),g()()()()}if(t&2){let n=D(2);C(7),Q("ngModel",n.newManutenzione.data),C(4),Q("ngModel",n.newManutenzione.chilometraggio),C(4),Q("ngModel",n.newManutenzione.costo),C(4),Q("ngModel",n.newManutenzione.tipologia),C(8),Q("ngModel",n.newManutenzione.descrizione)}}function DQ(t,e){if(t&1){let n=ce();m(0,"div",13)(1,"div",14)(2,"label",15),E(3,"Data *"),g(),m(4,"input",16),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editManutenzione.data,i)||(o.editManutenzione.data=i),j(i)}),g()(),m(5,"div",14)(6,"label",15),E(7,"Chilometraggio *"),g(),m(8,"input",17),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editManutenzione.chilometraggio,i)||(o.editManutenzione.chilometraggio=i),j(i)}),g()(),m(9,"div",14)(10,"label",15),E(11,"Costo (\u20AC)"),g(),m(12,"input",18),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editManutenzione.costo,i)||(o.editManutenzione.costo=i),j(i)}),g()(),m(13,"div",14)(14,"label",15),E(15,"Tipologia *"),g(),m(16,"select",19),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editManutenzione.tipologia,i)||(o.editManutenzione.tipologia=i),j(i)}),m(17,"option",20),E(18,"Ordinaria (Tagliando)"),g(),m(19,"option",21),E(20,"Straordinaria"),g()()(),m(21,"div",22)(22,"label",15),E(23,"Descrizione *"),g(),m(24,"textarea",29),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editManutenzione.descrizione,i)||(o.editManutenzione.descrizione=i),j(i)}),g()(),m(25,"div",24)(26,"button",30),q("click",function(){U(n);let i=D(4);return j(i.cancelEditManutenzione())}),O(27,"i",31),E(28," Annulla "),g(),m(29,"button",32),q("click",function(){U(n);let i=D(4);return j(i.saveEditManutenzione())}),O(30,"i",33),E(31," Salva "),g()()()}if(t&2){let n=D(4);C(4),Q("ngModel",n.editManutenzione.data),C(4),Q("ngModel",n.editManutenzione.chilometraggio),C(4),Q("ngModel",n.editManutenzione.costo),C(4),Q("ngModel",n.editManutenzione.tipologia),C(8),Q("ngModel",n.editManutenzione.descrizione)}}function SQ(t,e){if(t&1){let n=ce();m(0,"div",28)(1,"div",34)(2,"div",13)(3,"div",35)(4,"strong"),E(5,"Data:"),g(),E(6),g(),m(7,"div",35)(8,"strong"),E(9,"Km:"),g(),E(10),g(),m(11,"div",35)(12,"strong"),E(13,"Tipologia:"),g(),m(14,"span",36),E(15),g()(),m(16,"div",35)(17,"strong"),E(18,"Costo:"),g(),E(19),g(),m(20,"div",37)(21,"strong"),E(22,"Descrizione:"),g(),m(23,"p",38),E(24),g()()()(),m(25,"div",39)(26,"button",40),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.startEditManutenzione(i))}),O(27,"i",41),g(),m(28,"button",42),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.deleteManutenzione(i.id))}),O(29,"i",43),g()()()}if(t&2){let n=D().$implicit,r=D(3);C(6),ue(" ",r.formatDate(n.data)," "),C(4),ue(" ",n.chilometraggio.toLocaleString("it-IT")," "),C(4),Ae("bg-primary",n.tipologia==="ordinaria")("bg-info",n.tipologia==="straordinaria"),C(),ue(" ",n.tipologia==="ordinaria"?"Ordinaria":"Straordinaria"," "),C(4),ue(" ",r.formatPrice(n.costo)," "),C(5),ke(n.descrizione)}}function AQ(t,e){if(t&1&&(m(0,"div",27),$(1,DQ,32,5,"div",13)(2,SQ,30,9,"div",28),g()),t&2){let n=e.$implicit,r=D(3);C(),H(r.editingManutenzioneId===n.id&&r.editManutenzione?1:2)}}function MQ(t,e){if(t&1&&(m(0,"h5",12),E(1,"Storico Manutenzioni"),g(),zn(2,AQ,3,1,"div",27,IQ)),t&2){let n=D(2);C(2),Bn(n.getManutenzioniOrdinate())}}function RQ(t,e){t&1&&(m(0,"div",11),O(1,"i",44),E(2," Non ci sono manutenzioni registrate per questa auto. "),g())}function PQ(t,e){if(t&1){let n=ce();m(0,"div",6)(1,"div",7)(2,"button",8),q("click",function(){U(n);let i=D();return j(i.toggleNewManutenzioneForm())}),O(3,"i",9),E(4),g()(),$(5,TQ,32,5,"div",10),$(6,MQ,4,0)(7,RQ,3,0,"div",11),g()}if(t&2){let n=D();C(2),Ae("btn-primary",!n.showNewManutenzioneForm())("btn-secondary",n.showNewManutenzioneForm()),C(),Ae("bi-plus-circle",!n.showNewManutenzioneForm())("bi-x-circle",n.showNewManutenzioneForm()),C(),ue(" ",n.showNewManutenzioneForm()?"Annulla":"Aggiungi Nuova Manutenzione"," "),C(),H(n.showNewManutenzioneForm()?5:-1),C(),H(n.getManutenzioniOrdinate().length>0?6:7)}}var h_=class t{car;carUpdated=new je;manutenzioneOpen=te(!1);showNewManutenzioneForm=te(!1);newManutenzione=this.getEmptyManutenzione();editingManutenzioneId=null;editManutenzione=null;toggleManutenzione(){this.manutenzioneOpen.set(!this.manutenzioneOpen())}toggleNewManutenzioneForm(){this.showNewManutenzioneForm.set(!this.showNewManutenzioneForm()),this.showNewManutenzioneForm()||(this.newManutenzione=this.getEmptyManutenzione())}getManutenzioniOrdinate(){return!this.car.manutenzioni||this.car.manutenzioni.length===0?[]:[...this.car.manutenzioni].sort((e,n)=>new Date(n.data).getTime()-new Date(e.data).getTime())}addManutenzione(){if(!this.newManutenzione.data||!this.newManutenzione.chilometraggio||!this.newManutenzione.tipologia){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newManutenzione.data,chilometraggio:this.newManutenzione.chilometraggio,descrizione:this.newManutenzione.descrizione?.toUpperCase()||"",costo:this.newManutenzione.costo,tipologia:this.newManutenzione.tipologia};this.car.manutenzioni||(this.car.manutenzioni=[]),this.car.manutenzioni.push(e),this.carUpdated.emit(this.car),this.toggleNewManutenzioneForm()}deleteManutenzione(e){confirm("Sei sicuro di voler eliminare questa manutenzione?")&&(this.car.manutenzioni=this.car.manutenzioni?.filter(n=>n.id!==e),this.carUpdated.emit(this.car))}startEditManutenzione(e){this.editingManutenzioneId=e.id,this.editManutenzione=L({},e)}cancelEditManutenzione(){this.editingManutenzioneId=null,this.editManutenzione=null}saveEditManutenzione(){if(!this.editManutenzione||!this.editManutenzione.data||!this.editManutenzione.chilometraggio||!this.editManutenzione.tipologia){alert("Compila tutti i campi obbligatori");return}let e=this.car.manutenzioni?.findIndex(n=>n.id===this.editingManutenzioneId);e!==void 0&&e!==-1&&this.car.manutenzioni&&(this.car.manutenzioni[e]=re(L({},this.editManutenzione),{descrizione:this.editManutenzione.descrizione?.toUpperCase()||""}),this.carUpdated.emit(this.car),this.cancelEditManutenzione())}getEmptyManutenzione(){return{id:"",data:new Date,chilometraggio:0,descrizione:"",costo:0,tipologia:"ordinaria"}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-sezione-manutenzione"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-wrench-adjustable-circle-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-manutenzione-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","ordinaria"],["value","straordinaria"],[1,"col-md-12","mb-3"],["rows","4","placeholder","Descrivi le operazioni effettuate (es. CAMBIO OLIO, FILTRI, PASTIGLIE FRENO...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"manutenzione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],["rows","4","placeholder","Descrivi le operazioni effettuate",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"badge"],[1,"col-12","mt-2"],[1,"mb-0","mt-1","text-muted"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),q("click",function(){return r.toggleManutenzione()}),m(2,"div",2),O(3,"i",3),m(4,"span",4),E(5,"Manutenzione"),g()(),O(6,"i",5),g(),$(7,PQ,8,11,"div",6),g()),n&2&&(C(6),Ae("bi-chevron-up",r.manutenzioneOpen())("bi-chevron-down",!r.manutenzioneOpen()),C(),H(r.manutenzioneOpen()?7:-1))},dependencies:[Ke,ln,yg,Eg,Ut,Kn,dc,cn,Ri,Yt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.new-tagliando-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.tagliando-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.tagliando-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.tagliando-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};var xQ=(t,e)=>e.id;function OQ(t,e){if(t&1&&(m(0,"div",8),O(1,"i",17),m(2,"div")(3,"strong"),E(4,"Revisione non ancora richiesta"),g(),O(5,"br"),E(6," Auto nei primi 4 anni. Prima revisione prevista per: "),m(7,"strong"),E(8),g()()()),t&2){let n=D(2);C(8),ke(n.formatDate(n.getDataProssimaRevisione()))}}function NQ(t,e){if(t&1&&(m(0,"div",9),O(1,"i",18),m(2,"div")(3,"strong"),E(4,"Revisione valida"),g(),O(5,"br"),E(6," Prossima revisione prevista per: "),m(7,"strong"),E(8),g()()()),t&2){let n=D(2);C(8),ke(n.formatDate(n.getDataProssimaRevisione()))}}function kQ(t,e){if(t&1&&(m(0,"div",10),O(1,"i",19),m(2,"div")(3,"strong"),E(4,"Attenzione! Revisione in scadenza"),g(),O(5,"br"),E(6," Scadenza prevista per: "),m(7,"strong",20),E(8),g(),O(9,"br"),m(10,"small"),E(11,"Manca meno di un mese alla scadenza. Prenota subito la revisione!"),g()()()),t&2){let n=D(2);C(8),ke(n.formatDate(n.getDataProssimaRevisione()))}}function FQ(t,e){if(t&1&&(E(0," Data scadenza: "),m(1,"strong"),E(2),g(),O(3,"br")),t&2){let n=D(3);C(2),ke(n.formatDate(n.getDataProssimaRevisione()))}}function LQ(t,e){if(t&1&&(m(0,"div",11),O(1,"i",21),m(2,"div")(3,"strong"),E(4,"Revisione scaduta!"),g(),O(5,"br"),$(6,FQ,4,1),m(7,"small"),E(8,"Auto non in regola. Effettua immediatamente la revisione."),g()()()),t&2){let n=D(2);C(6),H(n.getDataProssimaRevisione()?6:-1)}}function VQ(t,e){if(t&1){let n=ce();m(0,"div",15)(1,"h5",22),E(2,"Nuova Revisione"),g(),m(3,"div",23)(4,"div",24)(5,"label",25),E(6,"Data *"),g(),m(7,"input",26),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newRevisione.data,i)||(o.newRevisione.data=i),j(i)}),g()(),m(8,"div",24)(9,"label",25),E(10,"Chilometraggio *"),g(),m(11,"input",27),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newRevisione.chilometraggio,i)||(o.newRevisione.chilometraggio=i),j(i)}),g()(),m(12,"div",24)(13,"label",25),E(14,"Esito *"),g(),m(15,"select",28),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newRevisione.esito,i)||(o.newRevisione.esito=i),j(i)}),m(16,"option",29),E(17,"Positiva"),g(),m(18,"option",30),E(19,"Negativa"),g()()(),m(20,"div",31)(21,"label",25),E(22,"Note"),g(),m(23,"textarea",32),Z("ngModelChange",function(i){U(n);let o=D(2);return X(o.newRevisione.note,i)||(o.newRevisione.note=i),j(i)}),g()(),m(24,"div",33)(25,"button",34),q("click",function(){U(n);let i=D(2);return j(i.addRevisione())}),O(26,"i",35),E(27," Aggiungi "),g()()()()}if(t&2){let n=D(2);C(7),Q("ngModel",n.newRevisione.data),C(4),Q("ngModel",n.newRevisione.chilometraggio),C(4),Q("ngModel",n.newRevisione.esito),C(8),Q("ngModel",n.newRevisione.note)}}function UQ(t,e){if(t&1){let n=ce();m(0,"div",23)(1,"div",24)(2,"label",25),E(3,"Data *"),g(),m(4,"input",26),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editRevisione.data,i)||(o.editRevisione.data=i),j(i)}),g()(),m(5,"div",24)(6,"label",25),E(7,"Chilometraggio *"),g(),m(8,"input",27),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editRevisione.chilometraggio,i)||(o.editRevisione.chilometraggio=i),j(i)}),g()(),m(9,"div",24)(10,"label",25),E(11,"Esito *"),g(),m(12,"select",28),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editRevisione.esito,i)||(o.editRevisione.esito=i),j(i)}),m(13,"option",29),E(14,"Positiva"),g(),m(15,"option",30),E(16,"Negativa"),g()()(),m(17,"div",31)(18,"label",25),E(19,"Note"),g(),m(20,"textarea",39),Z("ngModelChange",function(i){U(n);let o=D(4);return X(o.editRevisione.note,i)||(o.editRevisione.note=i),j(i)}),g()(),m(21,"div",33)(22,"button",40),q("click",function(){U(n);let i=D(4);return j(i.cancelEditRevisione())}),O(23,"i",41),E(24," Annulla "),g(),m(25,"button",42),q("click",function(){U(n);let i=D(4);return j(i.saveEditRevisione())}),O(26,"i",43),E(27," Salva "),g()()()}if(t&2){let n=D(4);C(4),Q("ngModel",n.editRevisione.data),C(4),Q("ngModel",n.editRevisione.chilometraggio),C(4),Q("ngModel",n.editRevisione.esito),C(8),Q("ngModel",n.editRevisione.note)}}function jQ(t,e){if(t&1&&(m(0,"div",47)(1,"strong"),E(2,"Note:"),g(),m(3,"p",53),E(4),g()()),t&2){let n=D(2).$implicit;C(4),ke(n.note)}}function zQ(t,e){if(t&1){let n=ce();m(0,"div",38)(1,"div",44)(2,"div",23)(3,"div",45)(4,"strong"),E(5,"Data:"),g(),E(6),g(),m(7,"div",45)(8,"strong"),E(9,"Km:"),g(),E(10),g(),m(11,"div",45)(12,"strong"),E(13,"Esito: "),g(),m(14,"span",46),E(15),g()(),$(16,jQ,5,1,"div",47),g()(),m(17,"div",48)(18,"button",49),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.startEditRevisione(i))}),O(19,"i",50),g(),m(20,"button",51),q("click",function(){U(n);let i=D().$implicit,o=D(3);return j(o.deleteRevisione(i.id))}),O(21,"i",52),g()()()}if(t&2){let n=D().$implicit,r=D(3);C(6),ue(" ",r.formatDate(n.data)," "),C(4),ue(" ",n.chilometraggio.toLocaleString("it-IT")," "),C(4),Ae("bg-success",n.esito==="positiva")("bg-danger",n.esito==="negativa"),C(),ue(" ",n.esito==="positiva"?"Positiva":"Negativa"," "),C(),H(n.note?16:-1)}}function BQ(t,e){if(t&1&&(m(0,"div",37),$(1,UQ,28,4,"div",23)(2,zQ,22,8,"div",38),g()),t&2){let n=e.$implicit,r=D(3);Ae("revisione-negativa",n.esito==="negativa"),C(),H(r.editingRevisioneId===n.id&&r.editRevisione?1:2)}}function $Q(t,e){if(t&1&&(m(0,"h5",22),E(1,"Storico Revisioni"),g(),zn(2,BQ,3,3,"div",36,xQ)),t&2){let n=D(2);C(2),Bn(n.getRevisioniOrdinate())}}function HQ(t,e){t&1&&(m(0,"div",16),O(1,"i",54),E(2," Non ci sono revisioni registrate per questa auto. "),g())}function qQ(t,e){if(t&1){let n=ce();m(0,"div",6)(1,"div",7),$(2,OQ,9,1,"div",8),$(3,NQ,9,1,"div",9),$(4,kQ,12,1,"div",10),$(5,LQ,9,1,"div",11),g(),m(6,"div",12)(7,"button",13),q("click",function(){U(n);let i=D();return j(i.toggleNewRevisioneForm())}),O(8,"i",14),E(9),g()(),$(10,VQ,28,4,"div",15),$(11,$Q,4,0)(12,HQ,3,0,"div",16),g()}if(t&2){let n=D();C(2),H(n.getStatoRevisione()==="non_richiesta"?2:-1),C(),H(n.getStatoRevisione()==="valida"?3:-1),C(),H(n.getStatoRevisione()==="in_scadenza"?4:-1),C(),H(n.getStatoRevisione()==="scaduta"?5:-1),C(2),Ae("btn-primary",!n.showNewRevisioneForm())("btn-secondary",n.showNewRevisioneForm()),C(),Ae("bi-plus-circle",!n.showNewRevisioneForm())("bi-x-circle",n.showNewRevisioneForm()),C(),ue(" ",n.showNewRevisioneForm()?"Annulla":"Aggiungi Nuova Revisione"," "),C(),H(n.showNewRevisioneForm()?10:-1),C(),H(n.getRevisioniOrdinate().length>0?11:12)}}var f_=class t{car;carUpdated=new je;revisioniOpen=te(!1);showNewRevisioneForm=te(!1);newRevisione=this.getEmptyRevisione();editingRevisioneId=null;editRevisione=null;toggleRevisioni(){this.revisioniOpen.set(!this.revisioniOpen())}toggleNewRevisioneForm(){this.showNewRevisioneForm.set(!this.showNewRevisioneForm()),this.showNewRevisioneForm()||(this.newRevisione=this.getEmptyRevisione())}getRevisioniOrdinate(){return!this.car.revisioni||this.car.revisioni.length===0?[]:[...this.car.revisioni].sort((e,n)=>new Date(n.data).getTime()-new Date(e.data).getTime())}getDataProssimaRevisione(){if(!this.car.dataDiAcquisto)return null;let e=new Date(this.car.dataDiAcquisto);if((new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let i=this.getRevisioniOrdinate();if(i.length===0){let a=new Date(e);return a.setFullYear(a.getFullYear()+4),a}let o=new Date(i[0].data),s=new Date(o);return s.setFullYear(s.getFullYear()+2),s}isRevisioneInScadenza(){let e=this.getDataProssimaRevisione();if(!e)return!1;let n=new Date,r=e.getTime()-n.getTime(),i=Math.ceil(r/(1e3*60*60*24));return i<=30&&i>0}isRevisioneScaduta(){let e=this.getDataProssimaRevisione();return e?e<new Date:!1}getStatoRevisione(){if(!this.car.dataDiAcquisto)return"non_richiesta";let e=new Date(this.car.dataDiAcquisto);return(new Date().getTime()-e.getTime())/(1e3*60*60*24*365.25)<4?"non_richiesta":this.isRevisioneScaduta()?"scaduta":this.isRevisioneInScadenza()?"in_scadenza":"valida"}addRevisione(){if(!this.newRevisione.data||!this.newRevisione.chilometraggio||!this.newRevisione.esito){alert("Compila tutti i campi obbligatori");return}let e={id:Date.now().toString(),data:this.newRevisione.data,chilometraggio:this.newRevisione.chilometraggio,esito:this.newRevisione.esito,note:this.newRevisione.note?.toUpperCase()};this.car.revisioni||(this.car.revisioni=[]),this.car.revisioni.push(e),this.carUpdated.emit(this.car),this.toggleNewRevisioneForm()}deleteRevisione(e){confirm("Sei sicuro di voler eliminare questa revisione?")&&(this.car.revisioni=this.car.revisioni?.filter(n=>n.id!==e),this.carUpdated.emit(this.car))}startEditRevisione(e){this.editingRevisioneId=e.id,this.editRevisione=L({},e)}cancelEditRevisione(){this.editingRevisioneId=null,this.editRevisione=null}saveEditRevisione(){if(!this.editRevisione||!this.editRevisione.data||!this.editRevisione.chilometraggio||!this.editRevisione.esito){alert("Compila tutti i campi obbligatori");return}let e=this.car.revisioni?.findIndex(n=>n.id===this.editingRevisioneId);e!==void 0&&e!==-1&&this.car.revisioni&&(this.car.revisioni[e]=re(L({},this.editRevisione),{note:this.editRevisione.note?.toUpperCase()}),this.carUpdated.emit(this.car),this.cancelEditRevisione())}getEmptyRevisione(){return{id:"",data:new Date,chilometraggio:0,esito:"positiva",note:""}}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-sezione-revisioni"]],inputs:{car:"car"},outputs:{carUpdated:"carUpdated"},decls:8,vars:5,consts:[[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-clipboard-check-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"revisione-status","mb-4"],["role","alert",1,"alert","alert-info","d-flex","align-items-center"],["role","alert",1,"alert","alert-success","d-flex","align-items-center"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center"],[1,"mb-4"],[1,"btn","w-100",3,"click"],[1,"bi","me-2"],[1,"new-revisione-form","mb-4"],["role","alert",1,"alert","alert-info"],[1,"bi","bi-info-circle-fill","fs-3","me-3"],[1,"bi","bi-check-circle-fill","fs-3","me-3"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"text-danger"],[1,"bi","bi-x-circle-fill","fs-3","me-3"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],["value","positiva"],["value","negativa"],[1,"col-md-12","mb-3"],["rows","3","placeholder","Note aggiuntive (es. PRESCRIZIONI, DIFETTI RISCONTRATI...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"revisione-item","mb-3",3,"revisione-negativa"],[1,"revisione-item","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],["rows","3","placeholder","Note aggiuntive",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-secondary","me-2",3,"click"],[1,"bi","bi-x-lg","me-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"flex-grow-1"],[1,"col-md-3"],[1,"badge"],[1,"col-12","mt-2"],[1,"d-flex","flex-column","gap-2","ms-3"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"mb-0","mt-1","text-muted"],[1,"bi","bi-info-circle","me-2"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),q("click",function(){return r.toggleRevisioni()}),m(2,"div",2),O(3,"i",3),m(4,"span",4),E(5,"Revisioni"),g()(),O(6,"i",5),g(),$(7,qQ,13,15,"div",6),g()),n&2&&(C(6),Ae("bi-chevron-up",r.revisioniOpen())("bi-chevron-down",!r.revisioniOpen()),C(),H(r.revisioniOpen()?7:-1))},dependencies:[Ke,ln,yg,Eg,Ut,Kn,dc,cn,Ri,Yt],styles:[".accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.revisione-status[_ngcontent-%COMP%]{margin-bottom:1.5rem}.new-revisione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.revisione-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.revisione-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.revisione-item[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}@media (max-width: 767px){.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function WQ(t,e){t&1&&(m(0,"div",2)(1,"div",4)(2,"span",5),E(3,"Caricamento..."),g()()())}function GQ(t,e){if(t&1&&(m(0,"div",3),O(1,"i",6),E(2),g()),t&2){let n=D();C(2),ue(" ",n.error()," ")}}function KQ(t,e){if(t&1){let n=ce();m(0,"div",15),O(1,"i",20),E(2),m(3,"button",21),q("click",function(){U(n);let i=D(2);return j(i.successMessage.set(null))}),g()()}if(t&2){let n=D(2);C(2),ue(" ",n.successMessage()," ")}}function YQ(t,e){if(t&1){let n=ce();m(0,"div",16),O(1,"i",22),E(2),m(3,"button",21),q("click",function(){U(n);let i=D(2);return j(i.errorMessage.set(null))}),g()()}if(t&2){let n=D(2);C(2),ue(" ",n.errorMessage()," ")}}function QQ(t,e){if(t&1){let n=ce();m(0,"app-sezione-anagrafica",23),q("carUpdated",function(i){U(n);let o=D(2);return j(o.onCarUpdated(i))}),g()}if(t&2){let n=D(2);ye("car",n.car())("proprietario",n.proprietario())}}function ZQ(t,e){if(t&1){let n=ce();m(0,"app-sezione-coproprietari",24),q("carUpdated",function(i){U(n);let o=D(2);return j(o.onCarUpdated(i))}),g()}if(t&2){let n=D(2);ye("car",n.car())}}function JQ(t,e){if(t&1){let n=ce();m(0,"app-sezione-assicurazioni",24),q("carUpdated",function(i){U(n);let o=D(2);return j(o.onCarUpdated(i))}),g()}if(t&2){let n=D(2);ye("car",n.car())}}function XQ(t,e){if(t&1){let n=ce();m(0,"app-sezione-manutenzione",24),q("carUpdated",function(i){U(n);let o=D(2);return j(o.onCarUpdated(i))}),g()}if(t&2){let n=D(2);ye("car",n.car())}}function eZ(t,e){if(t&1){let n=ce();m(0,"app-sezione-revisioni",24),q("carUpdated",function(i){U(n);let o=D(2);return j(o.onCarUpdated(i))}),g()}if(t&2){let n=D(2);ye("car",n.car())}}function tZ(t,e){if(t&1){let n=ce();m(0,"div",7)(1,"div",8)(2,"div")(3,"h1",9),O(4,"i",10),E(5),g(),m(6,"p",11),E(7,"Targa: "),m(8,"strong",12),E(9),g()()(),m(10,"button",13),q("click",function(){U(n);let i=D();return j(i.goBack())}),O(11,"i",14),E(12," Torna all'elenco "),g()()(),$(13,KQ,4,1,"div",15),$(14,YQ,4,1,"div",16),m(15,"div",17),$(16,QQ,1,2,"app-sezione-anagrafica",18),$(17,ZQ,1,1,"app-sezione-coproprietari",19),$(18,JQ,1,1,"app-sezione-assicurazioni",19),$(19,XQ,1,1,"app-sezione-manutenzione",19),$(20,eZ,1,1,"app-sezione-revisioni",19),g()}if(t&2){let n=D();C(5),sn(" ",n.car().marca," ",n.car().modello," "),C(4),ke(n.car().targa),C(4),H(n.successMessage()?13:-1),C(),H(n.errorMessage()?14:-1),C(2),H(n.car()&&n.proprietario()?16:-1),C(),H(n.car()?17:-1),C(),H(n.car()?18:-1),C(),H(n.car()?19:-1),C(),H(n.car()?20:-1)}}var p_=class t{route=R(Cr);router=R(Nt);carService=R(Uo);userService=R(ur);car=te(null);proprietario=te(null);loading=te(!0);error=te(null);successMessage=te(null);errorMessage=te(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("targa");if(!e){this.error.set("Targa non specificata"),this.loading.set(!1);return}this.loadCar(e)}async loadCar(e){this.carService.getByTarga(e).subscribe({next:async n=>{n?(n.assicurazioni||(n.assicurazioni=[]),n.manutenzioni||(n.manutenzioni=[]),n.revisioni||(n.revisioni=[]),n.coProprietari||(n.coProprietari=[]),this.car.set(n),this.proprietario.set(n.proprietario)):this.error.set("Auto non trovata"),this.loading.set(!1)},error:n=>{console.error("Errore nel caricamento dell'auto:",n),this.error.set("Errore nel caricamento dell'auto"),this.loading.set(!1)}})}onCarUpdated(e){let n=this.cleanUndefinedFields(e);this.carService.update(e.targa,n).subscribe({next:()=>{this.successMessage.set("Modifiche salvate con successo"),this.car.set(e),setTimeout(()=>this.successMessage.set(null),3e3)},error:r=>{console.error("Errore nell'aggiornamento:",r),this.errorMessage.set("Errore nel salvataggio delle modifiche"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}cleanUndefinedFields(e){if(e==null)return null;if(e instanceof Date)return e;if(Array.isArray(e))return e.map(n=>this.cleanUndefinedFields(n));if(typeof e=="object"){let n={};for(let r in e)e.hasOwnProperty(r)&&e[r]!==void 0&&(n[r]=this.cleanUndefinedFields(e[r]));return n}return e}goBack(){this.router.navigate(["/elenco-auto"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-dettaglio-auto"]],decls:5,vars:3,consts:[[1,"dettaglio-auto-container"],[1,"container"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"page-header"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"page-subtitle"],[1,"text-uppercase"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-left","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"accordion-sections"],[3,"car","proprietario"],[3,"car"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[3,"carUpdated","car","proprietario"],[3,"carUpdated","car"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1),$(2,WQ,4,0,"div",2),$(3,GQ,3,1,"div",3),$(4,tZ,21,10),g()()),n&2&&(C(2),H(r.loading()?2:-1),C(),H(r.error()?3:-1),C(),H(!r.loading()&&!r.error()&&r.car()?4:-1))},dependencies:[Ke,i_,o_,d_,h_,f_],styles:[".dettaglio-auto-container[_ngcontent-%COMP%]{padding:2rem 0;min-height:100vh}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:600}.dettaglio-auto-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 767px){.dettaglio-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function nZ(t,e){if(t&1){let n=ce();m(0,"div",8),O(1,"i",20),E(2),m(3,"button",21),q("click",function(){U(n);let i=D();return j(i.errorMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.errorMessage()," ")}}function rZ(t,e){if(t&1){let n=ce();m(0,"div",9),O(1,"i",22),E(2),m(3,"button",21),q("click",function(){U(n);let i=D();return j(i.successMessage.set(null))}),g()()}if(t&2){let n=D();C(2),ue(" ",n.successMessage()," ")}}function iZ(t,e){if(t&1){let n=ce();m(0,"div",11)(1,"div",12)(2,"input",23),Z("ngModelChange",function(i){U(n);let o=D();return X(o.nome,i)||(o.nome=i),j(i)}),g(),m(3,"label",24),O(4,"i",25),E(5,"Nome "),g()(),m(6,"div",12)(7,"input",26),Z("ngModelChange",function(i){U(n);let o=D();return X(o.cognome,i)||(o.cognome=i),j(i)}),g(),m(8,"label",27),O(9,"i",25),E(10,"Cognome "),g()()()}if(t&2){let n=D();C(2),Q("ngModel",n.nome),C(5),Q("ngModel",n.cognome)}}function oZ(t,e){if(t&1&&(O(0,"span",28),E(1)),t&2){let n=D();C(),ue(" ",n.isRegisterMode()?"Registrazione...":"Accesso..."," ")}}function sZ(t,e){if(t&1&&(O(0,"i",29),E(1)),t&2){let n=D();Ae("bi-box-arrow-in-right",!n.isRegisterMode())("bi-person-plus-fill",n.isRegisterMode()),C(),ue(" ",n.isRegisterMode()?"Registrati":"Accedi"," ")}}var g_=class t{authService=R(An);router=R(Nt);isRegisterMode=te(!1);isLoading=te(!1);errorMessage=te(null);successMessage=te(null);currentYear=new Date().getFullYear();nome="";cognome="";codiceFiscale="";toggleMode(){this.isRegisterMode.update(e=>!e),this.clearMessages(),this.nome="",this.cognome="",this.codiceFiscale=""}onSubmit(){if(this.clearMessages(),!this.codiceFiscale.trim()){this.errorMessage.set("Inserisci il codice fiscale.");return}if(this.codiceFiscale.length!==16){this.errorMessage.set("Il codice fiscale deve essere di 16 caratteri.");return}if(this.isRegisterMode()&&(!this.nome.trim()||!this.cognome.trim())){this.errorMessage.set("Inserisci nome e cognome.");return}this.isLoading.set(!0),this.isRegisterMode()?this.handleRegister():this.handleLogin()}handleLogin(){this.authService.loginByCodiceFiscale(this.codiceFiscale.toUpperCase()).subscribe({next:e=>{this.isLoading.set(!1),e.success?(this.successMessage.set("Login effettuato con successo!"),setTimeout(()=>{this.router.navigate(["/"])},500)):this.errorMessage.set(e.message||"Errore durante il login.")},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante il login. Riprova."),console.error("Errore login:",e)}})}handleRegister(){let e={nome:this.nome.trim().toUpperCase(),cognome:this.cognome.trim().toUpperCase(),codiceFiscale:this.codiceFiscale.trim().toUpperCase(),email:null,dataDiNascita:null,annoConseguimentoPatente:null};this.authService.register(e).subscribe({next:n=>{this.isLoading.set(!1),n.success?(this.successMessage.set("Registrazione completata! Accesso in corso..."),setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage.set(n.message||"Errore durante la registrazione.")},error:n=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante la registrazione. Riprova."),console.error("Errore registrazione:",n)}})}clearMessages(){this.errorMessage.set(null),this.successMessage.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"card-header"],[1,"logo"],[1,"bi","bi-car-front-fill"],[1,"title"],[1,"subtitle"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[3,"ngSubmit"],[1,"register-fields"],[1,"form-floating","mb-3"],["type","text","id","codiceFiscale","placeholder","Codice Fiscale","name","codiceFiscale","maxlength","16","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","codiceFiscale"],[1,"bi","bi-credit-card-fill","me-2"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"toggle-text"],["type","button",1,"btn","btn-link",3,"click","disabled"],[1,"bi","bi-exclamation-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-check-circle-fill","me-2"],["type","text","id","nome","placeholder","Nome","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","nome"],[1,"bi","bi-person-fill","me-2"],["type","text","id","cognome","placeholder","Cognome","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","cognome"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"me-2"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),O(4,"i",4),g(),m(5,"h2",5),E(6),g(),m(7,"p",6),E(8),g()(),m(9,"div",7),$(10,nZ,4,1,"div",8),$(11,rZ,4,1,"div",9),m(12,"form",10),q("ngSubmit",function(){return r.onSubmit()}),$(13,iZ,11,2,"div",11),m(14,"div",12)(15,"input",13),Z("ngModelChange",function(o){return X(r.codiceFiscale,o)||(r.codiceFiscale=o),o}),g(),m(16,"label",14),O(17,"i",15),E(18,"Codice Fiscale "),g()(),m(19,"button",16),$(20,oZ,2,1)(21,sZ,2,5),g()(),m(22,"div",17)(23,"p",18),E(24),m(25,"button",19),q("click",function(){return r.toggleMode()}),E(26),g()()()()()()),n&2&&(C(6),ke(r.isRegisterMode()?"Registrati":"Benvenuto"),C(2),ke(r.isRegisterMode()?"Crea il tuo account":"Accedi al tuo account"),C(2),H(r.errorMessage()?10:-1),C(),H(r.successMessage()?11:-1),C(2),H(r.isRegisterMode()?13:-1),C(2),Q("ngModel",r.codiceFiscale),C(4),ye("disabled",r.isLoading()),C(),H(r.isLoading()?20:21),C(4),ue(" ",r.isRegisterMode()?"Hai gi\xE0 un account?":"Non hai un account?"," "),C(),ye("disabled",r.isLoading()),C(),ue(" ",r.isRegisterMode()?"Accedi":"Registrati"," "))},dependencies:[ln,uc,Ut,cn,lc,Ms,Rs,Yt,As,Ke],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:3rem 2rem 2rem;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.2))}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:1.5rem .75rem .5rem;height:auto;min-height:58px;font-size:1rem;line-height:1.5;transition:all .3s ease;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-.75rem) translate(.15rem)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem .75rem;color:#64748b;transform-origin:0 0;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-fields[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:1rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:#64748b;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;padding:0 .25rem;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:3rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Vd=(t,e)=>{try{let n=R(An),r=R(Nt);return n.isAuthenticated()?!0:r.createUrlTree(["/login"])}catch(n){return console.error("Errore nel guard:",n),R(Nt).createUrlTree(["/login"])}};var HL=[{path:"login",component:g_},{path:"",component:t_,canActivate:[Vd]},{path:"elenco-auto",component:n_,canActivate:[Vd]},{path:"nuova-auto",component:r_,canActivate:[Vd]},{path:"dettaglio-auto/:targa",component:p_,canActivate:[Vd],data:{prerender:!1}},{path:"**",redirectTo:"login"}];var uT="Service workers are disabled or not supported by this browser",Gc=class{serviceWorker;worker;registration;events;constructor(e,n){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new fe(r=>r.error(new G(5601,!1)));else{let r=null,i=new it;this.worker=new fe(u=>(r!==null&&u.next(r),i.subscribe(h=>u.next(h))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(ot(()=>e.getRegistration().then(u=>{if(!u)throw new G(5601,!1);return u})));let s=new it;this.events=s.asObservable();let a=u=>{let{data:h}=u;h?.type&&s.next(h)};e.addEventListener("message",a),n?.get(Ot,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,n){return new Promise(r=>{this.worker.pipe(gn(1)).subscribe(i=>{i.postMessage(L({action:e},n)),r()})})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(wt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(gn(1))}waitForOperationCompleted(e){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(wt(i=>i.nonce===e),gn(1),ie(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},aZ=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new it;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=gi,this.notificationClicks=gi,this.notificationCloses=gi,this.pushSubscriptionChanges=gi,this.subscription=gi;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ie(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ie(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(ie(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(ie(i=>i.data)),this.pushManager=this.sw.registration.pipe(ie(i=>i.pushManager));let r=this.pushManager.pipe(ot(i=>i.getSubscription()));this.subscription=new fe(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(uT));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(ot(c=>c.subscribe(r)),gn(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(uT));let n=r=>{if(r===null)throw new G(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new G(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(gn(1),ot(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||t)(ve(Gc))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),cZ=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=gi,this.unrecoverable=gi;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(uT));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new G(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||t)(ve(Gc))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();var WL=new K("");function lZ(){let t=R(Ud);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let e=R(WL),n=R(xe),r=R(Ot);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=t;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=qL(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),qL(+a[0])]);break;default:throw new G(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(pr(5604,!1)))})})}function qL(t){return new Promise(e=>setTimeout(e,t))}function uZ(t,e){return new Gc(t.enabled!==!1?navigator.serviceWorker:void 0,e)}var Ud=class{enabled;updateViaCache;type;scope;registrationStrategy};function GL(t,e={}){return ht([aZ,cZ,{provide:WL,useValue:t},{provide:Ud,useValue:e},{provide:Gc,useFactory:uZ,deps:[Ud,We]},hp(lZ)])}var KL={production:!0,firebase:{apiKey:"AIzaSyCtBcaO5Ad0F1fs381M-r4lSex-jh2G63k",authDomain:"car-handler-pwa.firebaseapp.com",projectId:"car-handler-pwa",storageBucket:"car-handler-pwa.firebasestorage.app",messagingSenderId:"142359734732",appId:"1:142359734732:web:5838f327ae0a65045ad569"}};var YL={providers:[uy(),nE(),nC(HL),EP(yP()),GL("ngsw-worker.js",{enabled:!ou(),registrationStrategy:"registerWhenStable:30000"}),fO(()=>pO(KL.firebase)),aL(()=>lL()),UL(()=>BL()),yN(()=>EN())]};var dZ=()=>({exact:!0}),m_=class t{authService=R(An);isMobileMenuOpen=te(!1);toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}logout(){this.closeMobileMenu(),this.authService.logout()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-header"]],decls:32,vars:2,consts:[[1,"mobile-navbar","d-lg-none"],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","py-3"],[1,"app-title","mb-0"],[1,"bi","bi-car-front-fill","me-2"],["type","button",1,"btn","btn-link","logout-btn-mobile",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"sidebar","d-none","d-lg-flex"],[1,"sidebar-header"],[1,"app-title"],[1,"bi","bi-car-front-fill"],[1,"ms-2"],[1,"sidebar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"ms-3"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-plus-circle-fill"],[1,"sidebar-footer"],["type","button",1,"logout-btn",3,"click"]],template:function(n,r){n&1&&(m(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3),O(4,"i",4),E(5," Car Handler "),g(),m(6,"button",5),q("click",function(){return r.logout()}),O(7,"i",6),g()()()(),m(8,"aside",7)(9,"div",8)(10,"h1",9),O(11,"i",10),m(12,"span",11),E(13,"Car Handler"),g()()(),m(14,"nav",12)(15,"a",13),O(16,"i",14),m(17,"span",15),E(18,"Homepage"),g()(),m(19,"a",16),O(20,"i",17),m(21,"span",15),E(22,"Elenco Auto"),g()(),m(23,"a",18),O(24,"i",19),m(25,"span",15),E(26,"Nuova Auto"),g()()(),m(27,"div",20)(28,"button",21),q("click",function(){return r.logout()}),O(29,"i",6),m(30,"span",11),E(31,"Logout"),g()()()()),n&2&&(C(15),ye("routerLinkActiveOptions",nu(1,dZ)))},dependencies:[Wr,Fu,Ke],styles:['.mobile-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 10px #0000001a;z-index:1030}.mobile-navbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.5px}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;padding:0;border:none;transition:transform .3s ease}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover, .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background:linear-gradient(180deg,#667eea,#764ba2);box-shadow:2px 0 15px #0000001a;flex-direction:column;z-index:1000;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;letter-spacing:-.5px;margin:0}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#fffc;font-weight:500;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border-left:3px solid transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:0;height:100%;background:#ffffff1a;transition:width .3s ease;z-index:0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background:#ffffff26;border-left-color:#fff;font-weight:600;box-shadow:inset 0 0 15px #0000001a}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 10px #ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:.875rem 1rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}']})};var hZ=()=>({exact:!0}),__=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-footer"]],decls:13,vars:2,consts:[[1,"bottom-nav","d-lg-none"],["routerLink","/","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"nav-label"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-plus-circle-fill"]],template:function(n,r){n&1&&(m(0,"nav",0)(1,"a",1),O(2,"i",2),m(3,"span",3),E(4,"Home"),g()(),m(5,"a",4),O(6,"i",5),m(7,"span",3),E(8,"Elenco"),g()(),m(9,"a",6),O(10,"i",7),m(11,"span",3),E(12,"Nuova"),g()()()),n&2&&(C(),ye("routerLinkActiveOptions",nu(1,hZ)))},dependencies:[Wr,Fu,Ke],styles:['.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;height:65px;background:#fff;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:space-around;align-items:center;z-index:1000;padding:.5rem 0}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;text-decoration:none;color:#94a3b8;transition:all .3s ease;padding:.5rem;position:relative}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%) scaleX(0);width:40px;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:0 0 3px 3px;transition:transform .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#667eea}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{transform:translate(-50%) scaleX(1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-weight:600}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 991.98px){[_nghost-%COMP%]{display:block}}']})};function fZ(t,e){t&1&&O(0,"app-header")}function pZ(t,e){t&1&&O(0,"app-footer")}var v_=class t{router=R(Nt);title=te("car-handler-pwa");isLoginPage=te(!1);constructor(){this.checkRoute(this.router.url),this.router.events.pipe(wt(e=>e instanceof Gn)).subscribe(e=>{this.checkRoute(e.url)})}checkRoute(e){this.isLoginPage.set(e.includes("/login"))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=qe({type:t,selectors:[["app-root"]],decls:4,vars:4,template:function(n,r){n&1&&($(0,fZ,1,0,"app-header"),m(1,"main"),O(2,"router-outlet"),g(),$(3,pZ,1,0,"app-footer")),n&2&&(H(r.isLoginPage()?-1:0),C(),Ae("login-main",r.isLoginPage()),C(2),H(r.isLoginPage()?-1:3))},dependencies:[Ou,m_,__,Ke],styles:["main[_ngcontent-%COMP%]{padding:2rem 0}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-left:280px;min-height:100vh}}@media (max-width: 991.98px){main[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:65px;min-height:calc(100vh - 135px)}}main.login-main[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh}"]})};ME(v_,YL).catch(t=>console.error(t));
