var bk=Object.defineProperty,Tk=Object.defineProperties;var Dk=Object.getOwnPropertyDescriptors;var pd=Object.getOwnPropertySymbols;var _b=Object.prototype.hasOwnProperty,Eb=Object.prototype.propertyIsEnumerable;var yb=(t,e,n)=>e in t?bk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})_b.call(e,n)&&yb(t,n,e[n]);if(pd)for(var n of pd(e))Eb.call(e,n)&&yb(t,n,e[n]);return t},Z=(t,e)=>Tk(t,Dk(e));var wb=(t,e)=>{var n={};for(var r in t)_b.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&pd)for(var r of pd(t))e.indexOf(r)<0&&Eb.call(t,r)&&(n[r]=t[r]);return n};var km;function gd(){return km}function lr(t){let e=km;return km=t,e}var Cb=Symbol("NotFound");function Ns(t){return t===Cb||t?.name==="\u0275NotFound"}var Gt=null,md=!1,Fm=1,Sk=null,Kt=Symbol("SIGNAL");function ue(t){let e=Gt;return Gt=t,e}function Ed(){return Gt}var xs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ks(t){if(md)throw new Error("");if(Gt===null)return;Gt.consumerOnSignalRead(t);let e=Gt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Gt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Gt.producers,n!==void 0&&n.producer===t)){Gt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Gt&&(!r||Mk(i,Gt)))return;let o=Ls(Gt),s={producer:t,consumer:Gt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Gt.producersTail=s,e!==void 0?e.nextProducer=s:Gt.producers=s,o&&Db(t,s)}function Ib(){Fm++}function wd(t){if(!(Ls(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Fm)){if(!t.producerMustRecompute(t)&&!Uc(t)){_d(t);return}t.producerRecomputeValue(t),_d(t)}}function Lm(t){if(t.consumers===void 0)return;let e=md;md=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Ak(r)}}finally{md=e}}function Vm(){return Gt?.consumerAllowSignalWrites!==!1}function Ak(t){t.dirty=!0,Lm(t),t.consumerMarkedDirty?.(t)}function _d(t){t.dirty=!1,t.lastCleanEpoch=Fm}function Fs(t){return t&&bb(t),ue(t)}function bb(t){t.producersTail=void 0,t.recomputing=!0}function Vc(t,e){ue(e),t&&Tb(t)}function Tb(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Ls(t))do n=Um(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Uc(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(wd(n),r!==n.version))return!0}return!1}function jc(t){if(Ls(t)){let e=t.producers;for(;e!==void 0;)e=Um(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Db(t,e){let n=t.consumersTail,r=Ls(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Db(i.producer,i)}function Um(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ls(e)){let o=e.producers;for(;o!==void 0;)o=Um(o)}return n}function Ls(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Cd(t){Sk?.(t)}function Mk(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Id(t,e){return Object.is(t,e)}function bd(t,e){let n=Object.create(Rk);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(wd(n),ks(n),n.value===Lc)throw n.error;return n.value};return r[Kt]=n,Cd(n),r}var vd=Symbol("UNSET"),yd=Symbol("COMPUTING"),Lc=Symbol("ERRORED"),Rk=Z(F({},xs),{value:vd,dirty:!0,error:null,equal:Id,kind:"computed",producerMustRecompute(t){return t.value===vd||t.value===yd},producerRecomputeValue(t){if(t.value===yd)throw new Error("");let e=t.value;t.value=yd;let n=Fs(t),r,i=!1;try{r=t.computation(),ue(null),i=e!==vd&&e!==Lc&&r!==Lc&&t.equal(e,r)}catch(o){r=Lc,t.error=o}finally{Vc(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Pk(){throw new Error}var Sb=Pk;function Ab(t){Sb(t)}function jm(t){Sb=t}var Ok=null;function Bm(t,e){let n=Object.create(Td);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Mb(n);return r[Kt]=n,Cd(n),[r,s=>Vs(n,s),s=>$m(n,s)]}function Mb(t){return ks(t),t.value}function Vs(t,e){Vm()||Ab(t),t.equal(t.value,e)||(t.value=e,Nk(t))}function $m(t,e){Vm()||Ab(t),Vs(t,e(t.value))}var Td=Z(F({},xs),{equal:Id,value:void 0,kind:"signal"});function Nk(t){t.version++,Ib(),Lm(t),Ok?.(t)}function pe(t){return typeof t=="function"}function Us(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Dd=Us(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ho(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof Dd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Rb(o)}catch(s){e=e??[],s instanceof Dd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Dd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Rb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ho(n,e)}remove(e){let{_finalizers:n}=this;n&&ho(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var Hm=Je.EMPTY;function Sd(t){return t instanceof Je||t&&"closed"in t&&pe(t.remove)&&pe(t.add)&&pe(t.unsubscribe)}function Rb(t){pe(t)?t():t.unsubscribe()}var Gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var js={setTimeout(t,e,...n){let{delegate:r}=js;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=js;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ad(t){js.setTimeout(()=>{let{onUnhandledError:e}=Gn;if(e)e(t);else throw t})}function fo(){}var Pb=zm("C",void 0,void 0);function Ob(t){return zm("E",void 0,t)}function Nb(t){return zm("N",t,void 0)}function zm(t,e,n){return{kind:t,value:e,error:n}}var po=null;function Bs(t){if(Gn.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=po;if(po=null,n)throw r}}else t()}function xb(t){Gn.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=t)}var go=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Sd(e)&&e.add(this)):this.destination=Fk}static create(e,n,r){return new $s(e,n,r)}next(e){this.isStopped?Wm(Nb(e),this):this._next(e)}error(e){this.isStopped?Wm(Ob(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Wm(Pb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xk=Function.prototype.bind;function qm(t,e){return xk.call(t,e)}var Gm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Md(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Md(r)}else Md(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Md(n)}}},$s=class extends go{constructor(e,n,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Gn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qm(e.next,o),error:e.error&&qm(e.error,o),complete:e.complete&&qm(e.complete,o)}):i=e}this.destination=new Gm(i)}};function Md(t){Gn.useDeprecatedSynchronousErrorHandling?xb(t):Ad(t)}function kk(t){throw t}function Wm(t,e){let{onStoppedNotification:n}=Gn;n&&js.setTimeout(()=>n(t,e))}var Fk={closed:!0,next:fo,error:kk,complete:fo};var Hs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(t){return t}function Rd(...t){return Km(t)}function Km(t){return t.length===0?mn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Vk(n)?n:new $s(n,r,i);return Bs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kb(r),new r((i,o)=>{let s=new $s({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Hs](){return this}pipe(...n){return Km(n)(this)}toPromise(n){return n=kb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function kb(t){var e;return(e=t??Gn.Promise)!==null&&e!==void 0?e:Promise}function Lk(t){return t&&pe(t.next)&&pe(t.error)&&pe(t.complete)}function Vk(t){return t&&t instanceof go||Lk(t)&&Sd(t)}function Ym(t){return pe(t?.lift)}function Me(t){return e=>{if(Ym(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(t,e,n,r,i){return new Qm(t,e,n,r,i)}var Qm=class extends go{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function zs(){return Me((t,e)=>{let n=null;t._refCount++;let r=Te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var qs=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ym(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let n=this.getSubject();e.add(this.source.subscribe(Te(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return zs()(this)}};var Fb=Us(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Fb}next(n){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hm:(this.currentObservers=null,o.push(n),new Je(()=>{this.currentObservers=null,ho(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new Pd(e,n),t})(),Pd=class extends Ge{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Hm}};var Vt=class extends Ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Zm={now(){return(Zm.delegate||Date).now()},delegate:void 0};var Od=class extends Je{constructor(e,n){super()}schedule(e,n=0){return this}};var Bc={setInterval(t,e,...n){let{delegate:r}=Bc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Bc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ws=class extends Od{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Bc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Bc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ho(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Gs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Gs.now=Zm.now;var Ks=class extends Gs{constructor(e,n=Gs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Jm=new Ks(Ws);var Nd=class extends Ws{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var xd=class extends Ks{};var Xm=new xd(Nd);var cn=new oe(t=>t.complete());function Lb(t){return t&&pe(t.schedule)}function Vb(t){return t[t.length-1]}function kd(t){return pe(Vb(t))?t.pop():void 0}function wi(t){return Lb(Vb(t))?t.pop():void 0}function ev(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jb(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Ub(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(t){return this instanceof mo?(this.v=t,this):new mo(t)}function Bb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(I){return Promise.resolve(I).then(v,p)}}function a(v,I){r[v]&&(i[v]=function(N){return new Promise(function(x,j){o.push([v,N,x,j])>1||u(v,N)})},I&&(i[v]=I(i[v])))}function u(v,I){try{l(r[v](I))}catch(N){g(o[0][3],N)}}function l(v){v.value instanceof mo?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function g(v,I){v(I),o.shift(),o.length&&u(o[0][0],o[0][1])}}function $b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ub=="function"?Ub(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Fd=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ld(t){return pe(t?.then)}function Vd(t){return pe(t[Hs])}function Ud(t){return Symbol.asyncIterator&&pe(t?.[Symbol.asyncIterator])}function jd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Uk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bd=Uk();function $d(t){return pe(t?.[Bd])}function Hd(t){return Bb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mo(n.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{n.releaseLock()}})}function zd(t){return pe(t?.getReader)}function ht(t){if(t instanceof oe)return t;if(t!=null){if(Vd(t))return jk(t);if(Fd(t))return Bk(t);if(Ld(t))return $k(t);if(Ud(t))return Hb(t);if($d(t))return Hk(t);if(zd(t))return zk(t)}throw jd(t)}function jk(t){return new oe(e=>{let n=t[Hs]();if(pe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Bk(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $k(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ad)})}function Hk(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Hb(t){return new oe(e=>{qk(t,e).catch(n=>e.error(n))})}function zk(t){return Hb(Hd(t))}function qk(t,e){var n,r,i,o;return jb(this,void 0,void 0,function*(){try{for(n=$b(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function un(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ci(t,e=0){return Me((n,r)=>{n.subscribe(Te(r,i=>un(r,t,()=>r.next(i),e),()=>un(r,t,()=>r.complete(),e),i=>un(r,t,()=>r.error(i),e)))})}function Ii(t,e=0){return Me((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zb(t,e){return ht(t).pipe(Ii(e),Ci(e))}function qb(t,e){return ht(t).pipe(Ii(e),Ci(e))}function Wb(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Gb(t,e){return new oe(n=>{let r;return un(n,e,()=>{r=t[Bd](),un(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function qd(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{un(n,e,()=>{let r=t[Symbol.asyncIterator]();un(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Kb(t,e){return qd(Hd(t),e)}function Yb(t,e){if(t!=null){if(Vd(t))return zb(t,e);if(Fd(t))return Wb(t,e);if(Ld(t))return qb(t,e);if(Ud(t))return qd(t,e);if($d(t))return Gb(t,e);if(zd(t))return Kb(t,e)}throw jd(t)}function Ae(t,e){return e?Yb(t,e):ht(t)}function ee(...t){let e=wi(t);return Ae(t,e)}function Ys(t,e){let n=pe(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function tv(t){return!!t&&(t instanceof oe||pe(t.lift)&&pe(t.subscribe))}var Hr=Us(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(t,e){return Me((n,r)=>{let i=0;n.subscribe(Te(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Wk}=Array;function Gk(t,e){return Wk(e)?t(...e):t(e)}function Wd(t){return Y(e=>Gk(t,e))}var{isArray:Kk}=Array,{getPrototypeOf:Yk,prototype:Qk,keys:Zk}=Object;function Gd(t){if(t.length===1){let e=t[0];if(Kk(e))return{args:e,keys:null};if(Jk(e)){let n=Zk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Jk(t){return t&&typeof t=="object"&&Yk(t)===Qk}function Kd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Yd(...t){let e=wi(t),n=kd(t),{args:r,keys:i}=Gd(t);if(r.length===0)return Ae([],e);let o=new oe(Xk(r,e,i?s=>Kd(i,s):mn));return n?o.pipe(Wd(n)):o}function Xk(t,e,n=mn){return r=>{Qb(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Qb(e,()=>{let l=Ae(t[u],e),h=!1;l.subscribe(Te(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Qb(t,e,n){t?un(n,t,e):e()}function Zb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?I(N):u.push(N),I=N=>{o&&e.next(N),l++;let x=!1;ht(n(N,h++)).subscribe(Te(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let j=u.shift();s?un(e,s,()=>I(j)):I(j)}g()}catch(j){e.error(j)}}))};return t.subscribe(Te(e,v,()=>{p=!0,g()})),()=>{a?.()}}function ft(t,e,n=1/0){return pe(e)?ft((r,i)=>Y((o,s)=>e(r,o,i,s))(ht(t(r,i))),n):(typeof e=="number"&&(n=e),Me((r,i)=>Zb(r,i,t,n)))}function Qs(t=1/0){return ft(mn,t)}function Jb(){return Qs(1)}function Zs(...t){return Jb()(Ae(t,wi(t)))}function $c(t){return new oe(e=>{ht(t()).subscribe(e)})}function nv(...t){let e=kd(t),{args:n,keys:r}=Gd(t),i=new oe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ht(n[h]).subscribe(Te(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Kd(r,a):a),o.complete())}))}});return e?i.pipe(Wd(e)):i}var zr=new oe(fo);function pt(t,e){return Me((n,r)=>{let i=0;n.subscribe(Te(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ln(t){return Me((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Te(n,void 0,void 0,s=>{o=ht(t(s,ln(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Xb(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(Te(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function vo(t,e){return pe(e)?ft(t,e,1):ft(t,1)}function bi(t){return Me((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function en(t){return t<=0?()=>cn:Me((e,n)=>{let r=0;e.subscribe(Te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Qd(t=eF){return Me((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function eF(){return new Hr}function Hc(t){return Me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):mn,en(1),n?bi(e):Qd(()=>new Hr))}function Js(t){return t<=0?()=>cn:Me((e,n)=>{let r=[];e.subscribe(Te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?pt((i,o)=>t(i,o,r)):mn,Js(1),n?bi(e):Qd(()=>new Hr))}function Zd(t,e){return Me(Xb(t,e,arguments.length>=2,!0))}function Jd(...t){let e=wi(t);return Me((n,r)=>{(e?Zs(t,n,e):Zs(t,n)).subscribe(r)})}function It(t,e){return Me((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Te(r,u=>{i?.unsubscribe();let l=0,h=o++;ht(t(u,h)).subscribe(i=Te(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xd(t){return Me((e,n)=>{ht(t).subscribe(Te(n,()=>n.complete(),fo)),!n.closed&&e.subscribe(n)})}function rt(t,e,n){let r=pe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):mn}function eT(t){let e=ue(null);try{return t()}finally{ue(e)}}var Ti=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},mv=new Ti("20.3.15");var rh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,n){super(Yn(e,n)),this.code=e}};function tF(t){return`NG0${Math.abs(t)}`}function Yn(t,e){return`${tF(t)}${e?": "+e:""}`}var hr=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("")}function rT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Gr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Gr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function vv(t,e){return t?e?`${t} ${e}`:t:e||""}var nF=Ve({__forward_ref__:Ve});function yn(t){return t.__forward_ref__=yn,t.toString=function(){return Gr(this())},t}function Ut(t){return yv(t)?t():t}function yv(t){return typeof t=="function"&&t.hasOwnProperty(nF)&&t.__forward_ref__===yn}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gc(t){return rF(t,ih)}function _v(t){return Gc(t)!==null}function rF(t,e){return t.hasOwnProperty(e)&&t[e]||null}function iF(t){let e=t?.[ih]??null;return e||null}function ov(t){return t&&t.hasOwnProperty(th)?t[th]:null}var ih=Ve({\u0275prov:Ve}),th=Ve({\u0275inj:Ve}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ev(t){return t&&!!t.\u0275providers}var wv=Ve({\u0275cmp:Ve}),Cv=Ve({\u0275dir:Ve}),Iv=Ve({\u0275pipe:Ve}),bv=Ve({\u0275mod:Ve}),qc=Ve({\u0275fac:Ve}),Co=Ve({__NG_ELEMENT_ID__:Ve}),tT=Ve({__NG_ENV_ID__:Ve});function Io(t){return typeof t=="string"?t:t==null?"":String(t)}function iT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Io(t)}var oT=Ve({ngErrorCode:Ve}),oF=Ve({ngErrorMessage:Ve}),sF=Ve({ngTokenPath:Ve});function Tv(t,e){return sT("",-200,e)}function oh(t,e){throw new $(-201,!1)}function sT(t,e,n){let r=new $(e,t);return r[oT]=e,r[oF]=t,n&&(r[sF]=n),r}function aF(t){return t[oT]}var sv;function aT(){return sv}function tn(t){let e=sv;return sv=t,e}function Dv(t,e,n){let r=Gc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;oh(t,"Injector")}var cF={},yo=cF,av="__NG_DI_FLAG__",cv=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=_o(n)||0;try{return this.injector.get(e,r&8?null:yo,r)}catch(i){if(Ns(i))return i;throw i}}};function uF(t,e=0){let n=gd();if(n===void 0)throw new $(-203,!1);if(n===null)return Dv(t,void 0,e);{let r=lF(e),i=n.retrieve(t,r);if(Ns(i)){if(r.optional)return null;throw i}return i}}function de(t,e=0){return(aT()||uF)(Ut(t),e)}function M(t,e){return de(t,_o(e))}function _o(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lF(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function uv(t){let e=[];for(let n=0;n<t.length;n++){let r=Ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=dF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function cT(t,e){return t[av]=e,t.prototype[av]=e,t}function dF(t){return t[av]}function Di(t,e){let n=t.hasOwnProperty(qc);return n?t[qc]:null}function uT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function lT(t){return t.flat(Number.POSITIVE_INFINITY)}function sh(t,e){t.forEach(n=>Array.isArray(n)?sh(n,e):e(n))}function Sv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function hT(t,e,n){let r=ea(t,e);return r>=0?t[r|1]=n:(r=~r,dT(t,r,e,n)),r}function ah(t,e){let n=ea(t,e);if(n>=0)return t[n|1]}function ea(t,e){return hF(t,e,1)}function hF(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ai={},vn=[],xn=new H(""),Av=new H("",-1),Mv=new H(""),Wc=class{get(e,n=yo){if(n===yo){let i=sT("",-201);throw i.name="\u0275NotFound",i}return n}};function Rv(t){return t[bv]||null}function Kr(t){return t[wv]||null}function ch(t){return t[Cv]||null}function Pv(t){return t[Iv]||null}function Dt(t){return{\u0275providers:t}}function fT(t){return Dt([{provide:xn,multi:!0,useValue:t}])}function pT(...t){return{\u0275providers:uh(!0,t),\u0275fromNgModule:!0}}function uh(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return sh(e,s=>{let a=s;nh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gT(i,o),n}function gT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ov(i,o=>{e(o,r)})}}function nh(t,e,n,r){if(t=Ut(t),!t)return!1;let i=null,o=ov(t),s=!o&&Kr(t);if(!o&&!s){let u=t.ngModule;if(o=ov(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)nh(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{sh(o.imports,h=>{nh(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gT(l,e)}if(!a){let l=Di(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:Mv,useValue:i,multi:!0},i),e({provide:xn,useValue:()=>de(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Ov(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ov(t,e){for(let n of t)Ev(n)&&(n=n.\u0275providers),Array.isArray(n)?Ov(n,e):e(n)}var fF=Ve({provide:String,useValue:Ve});function mT(t){return t!==null&&typeof t=="object"&&fF in t}function pF(t){return!!(t&&t.useExisting)}function gF(t){return!!(t&&t.useFactory)}function Eo(t){return typeof t=="function"}function vT(t){return!!t.useClass}var Yc=new H(""),eh={},nT={},iv;function Qc(){return iv===void 0&&(iv=new Wc),iv}var it=class{},wo=class extends it{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,dv(e,s=>this.processProvider(s)),this.records.set(Av,Xs(void 0,this)),i.has("environment")&&this.records.set(it,Xs(void 0,this));let o=this.records.get(Yc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Mv,vn,{self:!0}))}retrieve(e,n){let r=_o(n)||0;try{return this.get(e,yo,r)}catch(i){if(Ns(i))return i;throw i}}destroy(){zc(this),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return zc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){zc(this);let n=lr(this),r=tn(void 0),i;try{return e()}finally{lr(n),tn(r)}}get(e,n=yo,r){if(zc(this),e.hasOwnProperty(tT))return e[tT](this);let i=_o(r),o,s=lr(this),a=tn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=EF(e)&&Gc(e);h&&this.injectableDefInScope(h)?l=Xs(lv(e),eh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Qc():this.parent;return n=i&8&&n===yo?null:n,u.get(e,n)}catch(u){let l=aF(u);throw l===-200||l===-201?new $(l,null):u}finally{tn(a),lr(s)}}resolveInjectorInitializers(){let e=ue(null),n=lr(this),r=tn(void 0),i;try{let o=this.get(xn,vn,{self:!0});for(let s of o)s()}finally{lr(n),tn(r),ue(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let n=Eo(e)?e:Ut(e&&e.provide),r=vF(e);if(!Eo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Xs(void 0,eh,!0),i.factory=()=>uv(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ue(null);try{if(n.value===nT)throw Tv(Gr(e));return n.value===eh&&(n.value=nT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&_F(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function lv(t){let e=Gc(t),n=e!==null?e.factory:Di(t);if(n!==null)return n;if(t instanceof H)throw new $(204,!1);if(t instanceof Function)return mF(t);throw new $(204,!1)}function mF(t){if(t.length>0)throw new $(204,!1);let n=iF(t);return n!==null?()=>n.factory(t):()=>new t}function vF(t){if(mT(t))return Xs(void 0,t.useValue);{let e=Nv(t);return Xs(e,eh)}}function Nv(t,e,n){let r;if(Eo(t)){let i=Ut(t);return Di(i)||lv(i)}else if(mT(t))r=()=>Ut(t.useValue);else if(gF(t))r=()=>t.useFactory(...uv(t.deps||[]));else if(pF(t))r=(i,o)=>de(Ut(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ut(t&&(t.useClass||t.provide));if(yF(t))r=()=>new i(...uv(t.deps));else return Di(i)||lv(i)}return r}function zc(t){if(t.destroyed)throw new $(205,!1)}function Xs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yF(t){return!!t.deps}function _F(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function EF(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function dv(t,e){for(let n of t)Array.isArray(n)?dv(n,e):n&&Ev(n)?dv(n.\u0275providers,e):e(n)}function gt(t,e){let n;t instanceof wo?(zc(t),n=t):n=new cv(t);let r,i=lr(n),o=tn(void 0);try{return e()}finally{lr(i),tn(o)}}function yT(){return aT()!==void 0||gd()!=null}var nn=0,Q=1,le=2,ot=3,kn=4,Fn=5,dn=6,ta=7,st=8,_n=9,fr=10,Be=11,na=12,xv=13,bo=14,rn=15,Mi=16,To=17,pr=18,Zc=19,kv=20,Wr=21,lh=22,Jc=23,En=24,Do=25,So=26,ze=27,_T=1,Zn=6,gr=7,Xc=8,Ao=9,Qe=10;function wn(t){return Array.isArray(t)&&typeof t[_T]=="object"}function Cn(t){return Array.isArray(t)&&t[_T]===!0}function Fv(t){return(t.flags&4)!==0}function Yr(t){return t.componentOffset>-1}function dh(t){return(t.flags&1)===1}function mr(t){return!!t.template}function Mo(t){return(t[le]&512)!==0}function Ri(t){return(t[le]&256)===256}var ET="svg",wT="math";function In(t){for(;Array.isArray(t);)t=t[nn];return t}function Lv(t,e){return In(e[t])}function Ln(t,e){return In(e[t.index])}function Ro(t,e){return t.data[e]}function CT(t,e){return t[e]}function Vv(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Vn(t,e){let n=e[t];return wn(n)?n:n[nn]}function IT(t){return(t[le]&4)===4}function hh(t){return(t[le]&128)===128}function bT(t){return Cn(t[ot])}function Pi(t,e){return e==null?null:t[e]}function Uv(t){t[To]=0}function jv(t){t[le]&1024||(t[le]|=1024,hh(t)&&ra(t))}function TT(t,e){for(;t>0;)e=e[bo],t--;return e}function eu(t){return!!(t[le]&9216||t[En]?.dirty)}function fh(t){t[fr].changeDetectionScheduler?.notify(8),t[le]&64&&(t[le]|=1024),eu(t)&&ra(t)}function ra(t){t[fr].changeDetectionScheduler?.notify(0);let e=Si(t);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!hh(e)));)e=Si(e)}function Bv(t,e){if(Ri(t))throw new $(911,!1);t[Wr]===null&&(t[Wr]=[]),t[Wr].push(e)}function DT(t,e){if(t[Wr]===null)return;let n=t[Wr].indexOf(e);n!==-1&&t[Wr].splice(n,1)}function Si(t){let e=t[ot];return Cn(e)?e[ot]:e}function $v(t){return t[ta]??=[]}function Hv(t){return t.cleanup??=[]}function ST(t,e,n,r){let i=$v(e);i.push(n),t.firstCreatePass&&Hv(t).push(r,i.length-1)}var ye={lFrame:zT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hv=!1;function AT(){return ye.lFrame.elementDepthCount}function MT(){ye.lFrame.elementDepthCount++}function RT(){ye.lFrame.elementDepthCount--}function PT(){return ye.bindingsEnabled}function zv(){return ye.skipHydrationRootTNode!==null}function OT(t){return ye.skipHydrationRootTNode===t}function NT(t){ye.skipHydrationRootTNode=t}function xT(){ye.skipHydrationRootTNode=null}function _e(){return ye.lFrame.lView}function St(){return ye.lFrame.tView}function W(t){return ye.lFrame.contextLView=t,t[st]}function G(t){return ye.lFrame.contextLView=null,t}function jt(){let t=qv();for(;t!==null&&t.type===64;)t=t.parent;return t}function qv(){return ye.lFrame.currentTNode}function kT(){let t=ye.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ia(t,e){let n=ye.lFrame;n.currentTNode=t,n.isParent=e}function Wv(){return ye.lFrame.isParent}function FT(){ye.lFrame.isParent=!1}function Gv(){return hv}function Kv(t){let e=hv;return hv=t,e}function ph(){let t=ye.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function LT(){return ye.lFrame.bindingIndex}function VT(t){return ye.lFrame.bindingIndex=t}function Po(){return ye.lFrame.bindingIndex++}function Yv(t){let e=ye.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function UT(){return ye.lFrame.inI18n}function jT(t,e){let n=ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,gh(e)}function BT(){return ye.lFrame.currentDirectiveIndex}function gh(t){ye.lFrame.currentDirectiveIndex=t}function $T(t){let e=ye.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Qv(){return ye.lFrame.currentQueryIndex}function mh(t){ye.lFrame.currentQueryIndex=t}function wF(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Fn]:null}function Zv(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=wF(o),i===null||(o=o[bo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ye.lFrame=HT();return r.currentTNode=e,r.lView=t,!0}function vh(t){let e=HT(),n=t[Q];ye.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HT(){let t=ye.lFrame,e=t===null?null:t.child;return e===null?zT(t):e}function zT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qT(){let t=ye.lFrame;return ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Jv=qT;function yh(){let t=qT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function WT(t){return(ye.lFrame.contextLView=TT(t,ye.lFrame.contextLView))[st]}function Qr(){return ye.lFrame.selectedIndex}function Oi(t){ye.lFrame.selectedIndex=t}function _h(){let t=ye.lFrame;return Ro(t.tView,t.selectedIndex)}function Xv(){return ye.lFrame.currentNamespace}var GT=!0;function Eh(){return GT}function Zr(t){GT=t}function fv(t,e=null,n=null,r){let i=ey(t,e,n,r);return i.resolveInjectorInitializers(),i}function ey(t,e=null,n=null,r,i=new Set){let o=[n||vn,pT(t)];return r=r||(typeof t=="object"?void 0:Gr(t)),new wo(o,e||Qc(),r||null,i)}var Xe=class t{static THROW_IF_NOT_FOUND=yo;static NULL=new Wc;static create(e,n){if(Array.isArray(e))return fv({name:""},n,e,"");{let r=e.name??"";return fv({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:t,providedIn:"any",factory:()=>de(Av)});static __NG_ELEMENT_ID__=-1},bt=new H(""),Jn=(()=>{class t{static __NG_ELEMENT_ID__=CF;static __NG_ENV_ID__=n=>n}return t})(),pv=class extends Jn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ri(this._lView)}onDestroy(e){let n=this._lView;return Bv(n,e),()=>DT(n,e)}};function CF(){return new pv(_e())}var Kn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},on=new H("",{providedIn:"root",factory:()=>{let t=M(it),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Kn),e.handleError(n))}}}),KT={provide:xn,useValue:()=>void M(Kn),multi:!0},IF=new H("",{providedIn:"root",factory:()=>{let t=M(bt).defaultView;if(!t)return;let e=M(on),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Jn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function ty(){return Dt([fT(()=>void M(IF))])}function ny(t){return typeof t=="function"&&t[Kt]!==void 0}function te(t,e){let[n,r,i]=Bm(t,e?.equal),o=n,s=o[Kt];return o.set=r,o.update=i,o.asReadonly=YT.bind(o),o}function YT(){let t=this[Kt];if(t.readonlyFn===void 0){let e=()=>this();e[Kt]=t,t.readonlyFn=e}return t.readonlyFn}function ry(t){return ny(t)&&typeof t.set=="function"}var wh=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=bF}return t})();function bF(){return new wh(_e(),jt())}var dr=class{},oa=new H("",{providedIn:"root",factory:()=>!1});var iy=new H(""),Ch=new H(""),Xn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Vt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new oe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ni=(()=>{class t{internalPendingTasks=M(Xn);scheduler=M(dr);errorHandler=M(on);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})();function tu(...t){}var oy=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>new gv})}return t})(),gv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};var Ih={JSACTION:"jsaction"};function ga(t){return{toString:t}.toString()}var bh="__parameters__";function OF(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NF(t,e,n){return ga(()=>{let r=OF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(bh)?u[bh]:Object.defineProperty(u,bh,{value:[]})[bh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Er=cT(NF("Optional"),8);function xF(t){return typeof t=="function"}var xh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function VD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var wr=(()=>{let t=()=>UD;return t.ngInherit=!0,t})();function UD(t){return t.type.prototype.ngOnChanges&&(t.setInput=FF),kF}function kF(){let t=BD(this),e=t?.current;if(e){let n=t.previous;if(n===Ai)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function FF(t,e,n,r,i){let o=this.declaredInputs[r],s=BD(t)||LF(t,{previous:Ai,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new xh(l&&l.currentValue,n,u===Ai),VD(t,e,i,n)}var jD="__ngSimpleChanges__";function BD(t){return t[jD]||null}function LF(t,e){return t[jD]=e}var QT=[];var ke=function(t,e=null,n){for(let r=0;r<QT.length;r++){let i=QT[r];i(t,e,n)}};function VF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function UF(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ah(t,e,n){$D(t,e,3,n)}function Mh(t,e,n,r){(t[le]&3)===n&&$D(t,e,n,r)}function sy(t,e){let n=t[le];(n&3)===e&&(n&=16383,n+=1,t[le]=n)}function $D(t,e,n,r){let i=r!==void 0?t[To]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[To]+=65536),(a<o||o==-1)&&(jF(t,n,e,u),t[To]=(t[To]&4294901760)+u+2),u++}function ZT(t,e){ke(4,t,e);let n=ue(null);try{e.call(t)}finally{ue(n),ke(5,t,e)}}function jF(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[le]>>14<t[To]>>16&&(t[le]&3)===e&&(t[le]+=16384,ZT(a,o)):ZT(a,o)}var aa=-1,xo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function BF(t){return(t.flags&8)!==0}function $F(t){return(t.flags&16)!==0}function HF(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];zF(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function HD(t){return t===3||t===4||t===6}function zF(t){return t.charCodeAt(0)===64}function iu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?JT(t,n,i,null,e[++r]):JT(t,n,i,null,null))}}return t}function JT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function zD(t){return t!==aa}function kh(t){return t&32767}function qF(t){return t>>16}function Fh(t,e){let n=qF(t),r=e;for(;n>0;)r=r[bo],n--;return r}var wy=!0;function Lh(t){let e=wy;return wy=t,e}var WF=256,qD=WF-1,WD=5,GF=0,vr={};function KF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Co)&&(r=n[Co]),r==null&&(r=n[Co]=GF++);let i=r&qD,o=1<<i;e.data[t+(i>>WD)]|=o}function Vh(t,e){let n=GD(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,ay(r.data,t),ay(e,null),ay(r.blueprint,null));let i=Jy(t,e),o=t.injectorIndex;if(zD(i)){let s=kh(i),a=Fh(i,e),u=a[Q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ay(t,e){t.push(0,0,0,0,0,0,0,0,e)}function GD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JD(i),r===null)return aa;if(n++,i=i[bo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return aa}function Cy(t,e,n){KF(t,e,n)}function YF(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(HD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function KD(t,e,n){if(n&8||t!==void 0)return t;oh(e,"NodeInjector")}function YD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[_n],o=tn(void 0);try{return i?i.get(e,r,n&8):Dv(e,r,n&8)}finally{tn(o)}}return KD(r,e,n)}function QD(t,e,n,r=0,i){if(t!==null){if(e[le]&2048&&!(r&2)){let s=XF(t,e,n,r,vr);if(s!==vr)return s}let o=ZD(t,e,n,r,vr);if(o!==vr)return o}return YD(e,n,r,i)}function ZD(t,e,n,r,i){let o=ZF(n);if(typeof o=="function"){if(!Zv(e,t,r))return r&1?KD(i,n,r):YD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))oh(n);else return s}finally{Jv()}}else if(typeof o=="number"){let s=null,a=GD(t,e),u=aa,l=r&1?e[rn][Fn]:null;for((a===-1||r&4)&&(u=a===-1?Jy(t,e):e[a+8],u===aa||!eD(r,!1)?a=-1:(s=e[Q],a=kh(u),e=Fh(u,e)));a!==-1;){let h=e[Q];if(XT(o,a,h.data)){let p=QF(a,e,n,s,r,l);if(p!==vr)return p}u=e[a+8],u!==aa&&eD(r,e[Q].data[a+8]===l)&&XT(o,a,e)?(s=h,a=kh(u),e=Fh(u,e)):a=-1}}return i}function QF(t,e,n,r,i,o){let s=e[Q],a=s.data[t+8],u=r==null?Yr(a)&&wy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Rh(a,s,n,u,l);return h!==null?ou(e,s,h,a,i):vr}function Rh(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let v=p;v<g;v++){let I=s[v];if(v<u&&n===I||v>=u&&I.type===n)return v}if(i){let v=s[u];if(v&&mr(v)&&v.type===n)return u}return null}function ou(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof xo){let a=o;if(a.resolving){let v=iT(s[n]);throw Tv(v)}let u=Lh(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?tn(a.injectImpl):null,g=Zv(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&VF(n,s[n],e)}finally{p!==null&&tn(p),Lh(u),a.resolving=!1,Jv()}}return o}function ZF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Co)?t[Co]:void 0;return typeof e=="number"?e>=0?e&qD:JF:e}function XT(t,e,n){let r=1<<t;return!!(n[e+(t>>WD)]&r)}function eD(t,e){return!(t&2)&&!(t&1&&e)}var No=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return QD(this._tNode,this._lView,e,_o(r),n)}};function JF(){return new No(jt(),_e())}function tr(t){return ga(()=>{let e=t.prototype.constructor,n=e[qc]||Iy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[qc]||Iy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Iy(t){return yv(t)?()=>{let e=Iy(Ut(t));return e&&e()}:Di(t)}function XF(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[le]&2048&&!Mo(s);){let a=ZD(o,s,n,r|2,vr);if(a!==vr)return a;let u=o.parent;if(!u){let l=s[kv];if(l){let h=l.get(n,vr,r);if(h!==vr)return h}u=JD(s),s=s[bo]}o=u}return i}function JD(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Fn]:null}function hu(t){return YF(jt(),t)}function eL(){return ma(jt(),_e())}function ma(t,e){return new Un(Ln(t,e))}var Un=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=eL}return t})();function tL(t){return t instanceof Un?t.nativeElement:t}function nL(){return this._results[Symbol.iterator]()}var Uh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ge}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=lT(e);(this._changesDetected=!uT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nL},XD="ngSkipHydration",rL="ngskiphydration";function eS(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===rL)return!0}return!1}function tS(t){return t.hasAttribute(XD)}function jh(t){return(t.flags&128)===128}function nS(t){if(jh(t))return!0;let e=t.parent;for(;e;){if(jh(t)||eS(e))return!0;e=e.parent}return!1}var Xy=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Xy||{}),rS=new Map,iL=0;function oL(){return iL++}function sL(t){rS.set(t[Zc],t)}function by(t){rS.delete(t[Zc])}var tD="__ngContext__";function la(t,e){wn(e)?(t[tD]=e[Zc],sL(e)):t[tD]=e}function iS(t){return sS(t[na])}function oS(t){return sS(t[kn])}function sS(t){for(;t!==null&&!Cn(t);)t=t[kn];return t}var Ty;function e_(t){Ty=t}function fu(){if(Ty!==void 0)return Ty;if(typeof document<"u")return document;throw new $(210,!1)}var Cr=new H("",{providedIn:"root",factory:()=>aL}),aL="ng",nf=new H(""),Xr=new H("",{providedIn:"platform",factory:()=>"unknown"});var rf=new H("",{providedIn:"root",factory:()=>fu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function cL(){let t=new Uo;return t.store=uL(fu(),M(Cr)),t}var Uo=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:cL});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function uL(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var aS="h",cS="b",lL="f",dL="n",uS="e",lS="t",of="c",t_="x",su="r",dS="i",hS="n",n_="d";var fS="di",pS="s",gS="p";var pu=new H(""),mS=!1,r_=new H("",{providedIn:"root",factory:()=>mS});var i_=new H(""),vS=!1,yS=new H(""),o_=new H("",{providedIn:"root",factory:()=>new Map});var gu="ngb";var _S=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},ES=(t,e)=>{let n=t,r=n.getAttribute(gu)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var wS=t=>{t.removeAttribute(Ih.JSACTION),t.removeAttribute(gu),t.__jsaction_fns=void 0},CS=new H("",{providedIn:"root",factory:()=>({})});function s_(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var Dy=new Map;function IS(t,e){return Dy.set(t,e),()=>Dy.delete(t)}var nD=!1,bS=(t,e,n,r)=>{};function hL(t,e,n,r){bS(t,e,n,r)}function TS(){nD||(bS=(t,e,n,r)=>{let i=t[_n].get(Cr);Dy.get(i)?.(e,n,r)},nD=!0)}var sf=new H("");function af(t){return(t.flags&32)===32}var fL="__nghData__",a_=fL,pL="__nghDeferData__",DS=pL;var Ph="ngh",SS="nghm",AS=()=>null;function gL(t,e,n=!1){let r=t.getAttribute(Ph);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,u={};if(r!==""){let h=e.get(Uo,null,{optional:!0});h!==null&&(u=h.get(a_,[])[Number(r)])}let l={data:u,firstChild:t.firstChild??null};return n&&(l.firstChild=t,cf(l,0,t.nextSibling)),a?t.setAttribute(Ph,a):t.removeAttribute(Ph),l}function MS(){AS=gL}function RS(t,e,n=!1){return AS(t,e,n)}function PS(t){let e=t._lView;return e[Q].type===2?null:(Mo(e)&&(e=e[ze]),e)}function mL(t){return t.textContent?.replace(/\s/gm,"")}function vL(t){let e=fu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=mL(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function cf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function Sy(t,e){return t.segmentHeads?.[e]??null}function OS(t){return t.get(yS,!1,{optional:!0})}function yL(t,e){let n=t.data,r=n[uS]?.[e]??null;return r===null&&n[of]?.[e]&&(r=c_(t,e)),r}function NS(t,e){return t.data[of]?.[e]??null}function c_(t,e){let n=NS(t,e)??[],r=0;for(let i of n)r+=i[su]*(i[t_]??1);return r}function _L(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[n_];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function xS(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[n_];t.disconnectedNodes=n?new Set(n):null}return!!_L(t)?.has(e)}function uf(t,e){let n=t[dn];return n!==null&&!zv()&&!af(e)&&!xS(n,e.index-ze)}function EL(t,e){let n=e.get(sf),i=e.get(Uo).get(DS,{}),o=!1,s=t,a=null,u=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}u.unshift(s),s=i[s][gS]}return{parentBlockPromise:a,hydrationQueue:u}}function cy(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===SS}function rD(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function kS(t){for(let r of t.body.childNodes)if(cy(r))return;let e=rD(t.body.previousSibling);if(cy(e))return;let n=rD(t.head.lastChild);if(!cy(n))throw new $(-507,!1)}function FS(t,e){let n=t.contentQueries;if(n!==null){let r=ue(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];mh(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function Ay(t,e,n){mh(0);let r=ue(null);try{e(t,n)}finally{ue(r)}}function LS(t,e,n){if(Fv(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}var Jr=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Jr||{});var Th;function wL(){if(Th===void 0&&(Th=null,hr.trustedTypes))try{Th=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Th}function iD(t){return wL()?.createScriptURL(t)||t}var Bh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rh})`}};function mu(t){return t instanceof Bh?t.changingThisBreaksApplicationSecurity:t}function lf(t,e){let n=VS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rh})`)}return n===e}function VS(t){return t instanceof Bh&&t.getTypeName()||null}var CL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function u_(t){return t=String(t),t.match(CL)?t:"unsafe:"+t}var IL=/^>|^->|<!--|-->|--!>|<!-$/g,bL=/(<|>)/g,TL="\u200B$1\u200B";function DL(t){return t.replace(IL,e=>e.replace(bL,TL))}function US(t,e){return t.createText(e)}function SL(t,e,n){t.setValue(e,n)}function jS(t,e){return t.createComment(DL(e))}function l_(t,e,n){return t.createElement(e,n)}function $h(t,e,n,r,i){t.insertBefore(e,n,r,i)}function BS(t,e,n){t.appendChild(e,n)}function oD(t,e,n,r,i){r!==null?$h(t,e,n,r,i):BS(t,e,n)}function d_(t,e,n,r){t.removeChild(null,e,n,r)}function $S(t){t.textContent=""}function AL(t,e,n){t.setAttribute(e,"style",n)}function ML(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function HS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&HF(t,e,r),i!==null&&ML(t,e,i),o!==null&&AL(t,e,o)}var vu=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(vu||{});function zS(t){let e=WS();return e?e.sanitize(vu.URL,t)||"":lf(t,"URL")?mu(t):u_(Io(t))}function qS(t){let e=WS();if(e)return iD(e.sanitize(vu.RESOURCE_URL,t)||"");if(lf(t,"ResourceURL"))return iD(mu(t));throw new $(904,!1)}function RL(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?qS:zS}function h_(t,e,n){return RL(e,n)(t)}function WS(){let t=_e();return t&&t[fr].sanitizer}function GS(t){return t.ownerDocument.body}function KS(t){return t instanceof Function?t():t}function PL(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var YS="ng-template";function OL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&PL(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(f_(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function f_(t){return t.type===4&&t.value!==YS}function NL(t,e,n){let r=t.type===4&&!n?YS:t.value;return e===r}function xL(t,e,n){let r=4,i=t.attrs,o=i!==null?LL(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!er(r)&&!er(u))return!1;if(s&&er(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!NL(t,u,n)||u===""&&e.length===1){if(er(r))return!1;s=!0}}else if(r&8){if(i===null||!OL(t,i,u,n)){if(er(r))return!1;s=!0}}else{let l=e[++a],h=kL(u,i,f_(t),n);if(h===-1){if(er(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(er(r))return!1;s=!0}}}}return er(r)||s}function er(t){return(t&1)===0}function kL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return VL(e,t)}function FL(t,e,n=!1){for(let r=0;r<e.length;r++)if(xL(t,e[r],n))return!0;return!1}function LL(t){for(let e=0;e<t.length;e++){let n=t[e];if(HD(n))return e}return t.length}function VL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function sD(t,e){return t?":not("+e.trim()+")":e}function UL(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!er(s)&&(e+=sD(o,i),i=""),r=s,o=o||!er(r);n++}return i!==""&&(e+=sD(o,i)),e}function jL(t){return t.map(UL).join(",")}function BL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!er(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Tn={};function p_(t,e,n,r,i,o,s,a,u,l,h){let p=ze+r,g=p+i,v=$L(p,g),I=typeof l=="function"?l():l;return v[Q]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:h}}function $L(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Tn);return n}function HL(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=p_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function g_(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[nn]=i,p[le]=r|4|128|8|64|1024,(l!==null||t&&t[le]&2048)&&(p[le]|=2048),Uv(p),p[ot]=p[bo]=t,p[st]=n,p[fr]=s||t&&t[fr],p[Be]=a||t&&t[Be],p[_n]=u||t&&t[_n]||null,p[Fn]=o,p[Zc]=oL(),p[dn]=h,p[kv]=l,p[rn]=e.type==2?t[rn]:p,p}function zL(t,e,n){let r=Ln(e,t),i=HL(n),o=t[fr].rendererFactory,s=m_(t,g_(t,i,null,QS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function QS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ZS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function m_(t,e){return t[na]?t[xv][kn]=e:t[na]=e,t[xv]=e,e}function R(t=1){JS(St(),_e(),Qr()+t,!1)}function JS(t,e,n,r){if(!r)if((e[le]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ah(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Mh(e,o,0,n)}Oi(n)}var df=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(df||{});function My(t,e,n,r){let i=ue(null);try{let[o,s,a]=t.inputs[n],u=null;(s&df.SignalBased)!==0&&(u=e[o][Kt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):VD(e,u,o,r)}finally{ue(i)}}var yr=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(yr||{}),qL;function v_(t,e){return qL(t,e)}var ko=new Set,hf=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(hf||{}),jo=new H(""),aD=new Set;function Dn(t){aD.has(t)||(aD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var XS=!1,Ry=class extends Ge{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yT()&&(this.destroyRef=M(Jn,{optional:!0})??void 0,this.pendingTasks=M(Xn,{optional:!0})??void 0)}emit(e){let n=ue(null);try{super.next(e)}finally{ue(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},at=Ry;function eA(t){let e,n;function r(){t=tu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function cD(t){return queueMicrotask(()=>t()),()=>{t=tu}}var y_="isAngularZone",Hh=y_+"_ID",WL=0,Ne=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=XS}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,YL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(y_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,GL,tu,tu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},GL={};function __(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function KL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){eA(()=>{t.callbackScheduled=!1,Py(t),t.isCheckStableRunning=!0,__(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Py(t)}function YL(t){let e=()=>{KL(t)},n=WL++;t._inner=t._inner.fork({name:"angular",properties:{[y_]:!0,[Hh]:n,[Hh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(QL(u))return r.invokeTask(o,s,a,u);try{return uD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),lD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return uD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!ZL(u)&&e(),lD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Py(t),__(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Py(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function uD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lD(t){t._nesting--,__(t)}var au=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function QL(t){return tA(t,"__ignore_ng_zone__")}function ZL(t){return tA(t,"__scheduler_tick__")}function tA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var E_=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),nA=[0,1,2,3],rA=(()=>{class t{ngZone=M(Ne);scheduler=M(dr);errorHandler=M(Kn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(jo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ke(16),this.executing=!0;for(let r of nA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ke(17)}register(n){let{view:r}=n;r!==void 0?((r[Do]??=[]).push(n),ra(r),r[le]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(hf.AFTER_NEXT_RENDER,n):n()}static \u0275prov=K({token:t,providedIn:"root",factory:()=>new t})}return t})(),zh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Do];e&&(this.view[Do]=e.filter(n=>n!==this))}};function ff(t,e){let n=e?.injector??M(Xe);return Dn("NgAfterNextRender"),XL(t,n,e,!0)}function JL(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function XL(t,e,n,r){let i=e.get(E_);i.impl??=e.get(rA);let o=e.get(jo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Jn):null,a=e.get(wh,null,{optional:!0}),u=new zh(i.impl,JL(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var iA=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function oA(t,e,n){let r=t.get(iA);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function eV(t,e){let n=t.get(iA);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function tV(t,e){for(let[n,r]of e)oA(t,r.animateFns)}function dD(t,e,n,r){let i=t?.[So]?.enter;e!==null&&i&&i.has(n.index)&&tV(r,i)}function sa(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Cn(i)?u=i:wn(i)&&(l=!0,i=i[nn]);let h=In(i);t===0&&r!==null?(dD(a,r,o,n),s==null?BS(e,r,h):$h(e,r,h,s||null,!0)):t===1&&r!==null?(dD(a,r,o,n),$h(e,r,h,s||null,!0)):t===2?hD(a,o,n,p=>{d_(e,h,l,p)}):t===3&&hD(a,o,n,()=>{e.destroyNode(h)}),u!=null&&pV(e,t,n,u,o,r,s)}}function nV(t,e){sA(t,e),e[nn]=null,e[Fn]=null}function rV(t,e,n,r,i,o){r[nn]=i,r[Fn]=e,gf(t,r,n,1,i,o)}function sA(t,e){e[fr].changeDetectionScheduler?.notify(9),gf(t,e,e[Be],2,null,null)}function iV(t){let e=t[na];if(!e)return uy(t[Q],t);for(;e;){let n=null;if(wn(e))n=e[na];else{let r=e[Qe];r&&(n=r)}if(!n){for(;e&&!e[kn]&&e!==t;)wn(e)&&uy(e[Q],e),e=e[ot];e===null&&(e=t),wn(e)&&uy(e[Q],e),n=e&&e[kn]}e=n}}function w_(t,e){let n=t[Ao],r=n.indexOf(e);n.splice(r,1)}function pf(t,e){if(Ri(e))return;let n=e[Be];n.destroyNode&&gf(t,e,n,3,null,null),iV(e)}function uy(t,e){if(Ri(e))return;let n=ue(null);try{e[le]&=-129,e[le]|=256,e[En]&&jc(e[En]),aV(t,e),sV(t,e),e[Q].type===1&&e[Be].destroy();let r=e[Mi];if(r!==null&&Cn(e[ot])){r!==e[ot]&&w_(r,e);let i=e[pr];i!==null&&i.detachView(t)}by(e)}finally{ue(n)}}function hD(t,e,n,r){let i=t?.[So];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ko.add(t),oA(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),oV(t,r)}else t&&ko.delete(t),r(!1)},i)}function oV(t,e){let n=t[So]?.running;if(n){n.then(()=>{t[So].running=void 0,ko.delete(t),e(!0)});return}e(!1)}function sV(t,e){let n=t.cleanup,r=e[ta];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ta]=null);let i=e[Wr];if(i!==null){e[Wr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Jc];if(o!==null){e[Jc]=null;for(let s of o)s.destroy()}}function aV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof xo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ke(4,a,u);try{u.call(a)}finally{ke(5,a,u)}}else{ke(4,i,o);try{o.call(i)}finally{ke(5,i,o)}}}}}function cV(t,e,n){return uV(t,e.parent,n)}function uV(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[nn];if(Yr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Jr.None||i===Jr.Emulated)return null}return Ln(r,n)}function lV(t,e,n){return hV(t,e,n)}function dV(t,e,n){return t.type&40?Ln(t,n):null}var hV=dV,fD;function C_(t,e,n,r){let i=cV(t,r,e),o=e[Be],s=r.parent||e[Fn],a=lV(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)oD(o,i,n[u],a,!1);else oD(o,i,n,a,!1);fD!==void 0&&fD(o,r,e,n,i)}function nu(t,e){if(e!==null){let n=e.type;if(n&3)return Ln(e,t);if(n&4)return Oy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return nu(t,r);{let i=t[e.index];return Cn(i)?Oy(-1,i):In(i)}}else{if(n&128)return nu(t,e.next);if(n&32)return v_(e,t)()||In(t[e.index]);{let r=aA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Si(t[rn]);return nu(i,r)}else return nu(t,e.next)}}}return null}function aA(t,e){if(e!==null){let r=t[rn][Fn],i=e.projection;return r.projection[i]}return null}function Oy(t,e){let n=Qe+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return nu(r,i)}return e[gr]}function I_(t,e,n,r,i,o,s){for(;n!=null;){let a=r[_n];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&la(In(u),r),n.flags|=2),!af(n))if(l&8)I_(t,e,n.child,r,i,o,!1),sa(e,t,a,i,u,n,o,r);else if(l&32){let h=v_(n,r),p;for(;p=h();)sa(e,t,a,i,p,n,o,r);sa(e,t,a,i,u,n,o,r)}else l&16?fV(t,e,r,n,i,o):sa(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function gf(t,e,n,r,i,o){I_(n,r,t.firstChild,e,i,o,!1)}function fV(t,e,n,r,i,o){let s=n[rn],u=s[Fn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];sa(e,t,n[_n],i,h,r,o,n)}else{let l=u,h=s[ot];jh(r)&&(l.flags|=128),I_(t,e,l,h,i,o,!0)}}function pV(t,e,n,r,i,o,s){let a=r[gr],u=In(r);a!==u&&sa(e,t,n,o,a,i,s);for(let l=Qe;l<r.length;l++){let h=r[l];gf(h[Q],h,t,e,o,a)}}function gV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:yr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yr.Important),t.setStyle(n,r,i,o))}}function cA(t,e,n,r,i){let o=Qr(),s=r&2;try{Oi(-1),s&&e.length>ze&&JS(t,e,ze,!1),ke(s?2:0,i,n),n(r,i)}finally{Oi(o),ke(s?3:1,i,n)}}function uA(t,e,n){CV(t,e,n),(n.flags&64)===64&&IV(t,e,n)}function lA(t,e,n=Ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function mV(t,e,n,r){let o=r.get(r_,mS)||n===Jr.ShadowDom,s=t.selectRootElement(e,o);return vV(s),s}function vV(t){dA(t)}var dA=()=>null;function yV(t){tS(t)?$S(t):vL(t)}function hA(){dA=yV}function _V(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function fA(t,e,n,r,i,o){let s=e[Q];if(T_(t,s,e,n,r)){Yr(t)&&wV(e,t.index);return}t.type&3&&(n=_V(n)),EV(t,e,n,r,i,o)}function EV(t,e,n,r,i,o){if(t.type&3){let s=Ln(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function wV(t,e){let n=Vn(e,t);n[le]&16||(n[le]|=64)}function CV(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Yr(n)&&zL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Vh(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=ou(e,t,s,n);if(la(u,e),o!==null&&AV(e,s-r,u,a,n,o),mr(a)){let l=Vn(n.index,e);l[st]=ou(e,t,s,n)}}}function IV(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=BT();try{Oi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];gh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&bV(u,l)}}finally{Oi(-1),gh(s)}}function bV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function TV(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];FL(e,o.selectors,!1)&&(r??=[],mr(o)?r.unshift(o):r.push(o))}return r}function DV(t,e,n,r,i,o){let s=Ln(t,e);SV(e[Be],s,o,t.value,n,r,i)}function SV(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Io(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function AV(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];My(r,n,u,l)}}function MV(t,e,n,r,i){let o=ze+n,s=e[Q],a=i(s,e,t,r,n);e[o]=a,ia(t,!0);let u=t.type===2;return u?(HS(e[Be],a,t),(AT()===0||dh(t))&&la(a,e),MT()):la(a,e),Eh()&&(!u||!af(t))&&C_(s,e,a,t),t}function RV(t){let e=t;return Wv()?FT():(e=e.parent,ia(e,!1)),e}function b_(t,e){let n=t[_n];if(!n)return;let r;try{r=n.get(on,null)}catch{r=null}r?.(e)}function T_(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];My(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];My(h,l,r,i),a=!0}return a}function PV(t,e){let n=Vn(e,t),r=n[Q];OV(r,n);let i=n[nn];i!==null&&n[dn]===null&&(n[dn]=RS(i,n[_n])),ke(18),D_(r,n,n[st]),ke(19,n[st])}function OV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function D_(t,e,n){vh(e);try{let r=t.viewQuery;r!==null&&Ay(1,r,n);let i=t.template;i!==null&&cA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[pr]?.finishViewCreation(t),t.staticContentQueries&&FS(t,e),t.staticViewQueries&&Ay(2,t.viewQuery,n);let o=t.components;o!==null&&NV(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[le]&=-5,yh()}}function NV(t,e){for(let n=0;n<e.length;n++)PV(t,e[n])}function yu(t,e,n,r){let i=ue(null);try{let o=e.tView,a=t[le]&4096?4096:16,u=g_(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Mi]=l;let h=t[pr];return h!==null&&(u[pr]=h.createEmbeddedView(o)),D_(o,u,n),u}finally{ue(i)}}function da(t,e){return!e||e.firstChild===null||jh(t)}function cu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(In(o)),Cn(o)&&pA(o,r);let s=n.type;if(s&8)cu(t,e,n.child,r);else if(s&32){let a=v_(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=aA(e,n);if(Array.isArray(a))r.push(...a);else{let u=Si(e[rn]);cu(u[Q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function pA(t,e){for(let n=Qe;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&cu(r[Q],r,i,e)}t[gr]!==t[nn]&&e.push(t[gr])}function gA(t){if(t[Do]!==null){for(let e of t[Do])e.impl.addSequence(e);t[Do].length=0}}var mA=[];function xV(t){return t[En]??kV(t)}function kV(t){let e=mA.pop()??Object.create(LV);return e.lView=t,e}function FV(t){t.lView[En]!==t&&(t.lView=null,mA.push(t))}var LV=Z(F({},xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ra(t.lView)},consumerOnSignalRead(){this.lView[En]=this}});function VV(t){let e=t[En]??Object.create(UV);return e.lView=t,e}var UV=Z(F({},xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Si(t.lView);for(;e&&!vA(e[Q]);)e=Si(e);e&&jv(e)},consumerOnSignalRead(){this.lView[En]=this}});function vA(t){return t.type!==2}function yA(t){if(t[Jc]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Jc])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[le]&8192)}}var jV=100;function _A(t,e=0){let r=t[fr].rendererFactory,i=!1;i||r.begin?.();try{BV(t,e)}finally{i||r.end?.()}}function BV(t,e){let n=Gv();try{Kv(!0),Ny(t,e);let r=0;for(;eu(t);){if(r===jV)throw new $(103,!1);r++,Ny(t,1)}}finally{Kv(n)}}function $V(t,e,n,r){if(Ri(e))return;let i=e[le],o=!1,s=!1;vh(e);let a=!0,u=null,l=null;o||(vA(t)?(l=xV(e),u=Fs(l)):Ed()===null?(a=!1,l=VV(e),u=Fs(l)):e[En]&&(jc(e[En]),e[En]=null));try{Uv(e),VT(t.bindingStartIndex),n!==null&&cA(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let v=t.preOrderCheckHooks;v!==null&&Ah(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Mh(e,v,0,null),sy(e,0)}if(s||HV(e),yA(e),EA(e,0),t.contentQueries!==null&&FS(t,e),!o)if(h){let v=t.contentCheckHooks;v!==null&&Ah(e,v)}else{let v=t.contentHooks;v!==null&&Mh(e,v,1),sy(e,1)}qV(t,e);let p=t.components;p!==null&&CA(e,p,0);let g=t.viewQuery;if(g!==null&&Ay(2,g,r),!o)if(h){let v=t.viewCheckHooks;v!==null&&Ah(e,v)}else{let v=t.viewHooks;v!==null&&Mh(e,v,2),sy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[lh]){for(let v of e[lh])v();e[lh]=null}o||(gA(e),e[le]&=-73)}catch(h){throw o||ra(e),h}finally{l!==null&&(Vc(l,u),a&&FV(l)),yh()}}function EA(t,e){for(let n=iS(t);n!==null;n=oS(n))for(let r=Qe;r<n.length;r++){let i=n[r];wA(i,e)}}function HV(t){for(let e=iS(t);e!==null;e=oS(e)){if(!(e[le]&2))continue;let n=e[Ao];for(let r=0;r<n.length;r++){let i=n[r];jv(i)}}}function zV(t,e,n){ke(18);let r=Vn(e,t);wA(r,n),ke(19,r[st])}function wA(t,e){hh(t)&&Ny(t,e)}function Ny(t,e){let r=t[Q],i=t[le],o=t[En],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Uc(o)),s||=!1,o&&(o.dirty=!1),t[le]&=-9217,s)$V(r,t,r.template,t[st]);else if(i&8192){let a=ue(null);try{yA(t),EA(t,1);let u=r.components;u!==null&&CA(t,u,1),gA(t)}finally{ue(a)}}}function CA(t,e,n){for(let r=0;r<e.length;r++)zV(t,e[r],n)}function qV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Oi(~i);else{let o=i,s=n[++r],a=n[++r];jT(s,o);let u=e[o];ke(24,u),a(2,u),ke(25,u)}}}finally{Oi(-1)}}function mf(t,e){let n=Gv()?64:1088;for(t[fr].changeDetectionScheduler?.notify(e);t;){t[le]|=n;let r=Si(t);if(Mo(t)&&!r)return t;t=r}return null}function IA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function bA(t,e){let n=Qe+e;if(n<t.length)return t[n]}function _u(t,e,n,r=!0){let i=e[Q];if(WV(i,e,t,n),r){let s=Oy(n,t),a=e[Be],u=a.parentNode(t[gr]);u!==null&&rV(i,t[Fn],a,e,u,s)}let o=e[dn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function S_(t,e){let n=uu(t,e);return n!==void 0&&pf(n[Q],n),n}function uu(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n];if(r){let i=r[Mi];i!==null&&i!==t&&w_(i,r),e>0&&(t[n-1][kn]=r[kn]);let o=Kc(t,Qe+e);nV(r[Q],r);let s=o[pr];s!==null&&s.detachView(o[Q]),r[ot]=null,r[kn]=null,r[le]&=-129}return r}function WV(t,e,n,r){let i=Qe+r,o=n.length;r>0&&(n[i-1][kn]=e),r<o-Qe?(e[kn]=n[i],Sv(n,Qe+r,e)):(n.push(e),e[kn]=null),e[ot]=n;let s=e[Mi];s!==null&&n!==s&&TA(s,e);let a=e[pr];a!==null&&a.insertView(t),fh(e),e[le]|=128}function TA(t,e){let n=t[Ao],r=e[ot];if(wn(r))t[le]|=2;else{let i=r[ot][rn];e[rn]!==i&&(t[le]|=2)}n===null?t[Ao]=[e]:n.push(e)}var xi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[Q];return cu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[st]}set context(e){this._lView[st]=e}get destroyed(){return Ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ot];if(Cn(e)){let n=e[Xc],r=n?n.indexOf(this):-1;r>-1&&(uu(e,r),Kc(n,r))}this._attachedToViewContainer=!1}pf(this._lView[Q],this._lView)}onDestroy(e){Bv(this._lView,e)}markForCheck(){mf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){fh(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,_A(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Mo(this._lView),n=this._lView[Mi];n!==null&&!e&&w_(n,this._lView),sA(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=Mo(this._lView),r=this._lView[Mi];r!==null&&!n&&TA(r,this._lView),fh(this._lView)}};var ha=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=GV;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=yu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new xi(o)}}return t})();function GV(){return A_(jt(),_e())}function A_(t,e){return t.type&4?new ha(e,t,ma(t,e)):null}function M_(t,e,n,r,i){let o=t.data[e];if(o===null)o=KV(t,e,n,r,i),UT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=kT();o.injectorIndex=s===null?-1:s.injectorIndex}return ia(o,!0),o}function KV(t,e,n,r,i){let o=qv(),s=Wv(),a=s?o:o&&o.parent,u=t.data[e]=QV(t,a,n,e,r,i);return YV(t,u,o,s),u}function YV(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function QV(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zv()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var ZV=new RegExp(`^(\\d+)*(${cS}|${aS})*(.*)`);function JV(t){let e=t.match(ZV),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[u,l,h]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(h,10)||1;a.push(l,p)}return[s,...a]}function XV(t){return!t.prev&&t.parent?.type===8}function ly(t){return t.index-ze}function e2(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function vf(t,e,n,r){let i=ly(r),o=e2(t,i);if(o===void 0){let s=t.data[hS];if(s?.[i])o=n2(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let a=r.prev===null,u=r.prev??r.parent;if(XV(r)){let l=ly(r.parent);o=Sy(t,l)}else{let l=Ln(u,n);if(a)o=l.firstChild;else{let h=ly(u),p=Sy(t,h);if(u.type===2&&p){let v=c_(t,h)+1;o=yf(v,p)}else o=l.nextSibling}}}}return o}function yf(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function t2(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case lL:n=n.firstChild;break;case dL:n=n.nextSibling;break}}return n}function n2(t,e){let[n,...r]=JV(t),i;if(n===aS)i=e[rn][nn];else if(n===cS)i=GS(e[rn][nn]);else{let o=Number(n);i=In(e[o+ze])}return t2(i,r)}var r2=!1;function DA(t){r2=t}function i2(t){let e=t[dn];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[Be];for(let o of r.values())o2(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function o2(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-ze);i&&d_(t,i,!1)}}function _f(t){let e=t[Zn]??[],r=t[ot][Be],i=[];for(let o of e)o.data[fS]!==void 0?i.push(o):SA(o,r);t[Zn]=i}function s2(t){let{lContainer:e}=t,n=e[Zn];if(n===null)return;let i=e[ot][Be];for(let o of n)SA(o,i)}function SA(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[su];for(;n<i;){let o=r.nextSibling;d_(e,r,!1),r=o,n++}}}function Ef(t){_f(t);let e=t[nn];wn(e)&&qh(e);for(let n=Qe;n<t.length;n++)qh(t[n])}function qh(t){i2(t);let e=t[Q];for(let n=ze;n<e.bindingStartIndex;n++)if(Cn(t[n])){let r=t[n];Ef(r)}else wn(t[n])&&qh(t[n])}function R_(t){let e=t._views;for(let n of e){let r=PS(n);r!==null&&r[nn]!==null&&(wn(r)?qh(r):Ef(r))}}function a2(t,e,n,r){t!==null&&(n.cleanup(e),Ef(t.lContainer),R_(r))}function c2(t,e){let n=[];for(let r of e)for(let i=0;i<(r[t_]??1);i++){let o={data:r,firstChild:null};r[su]>0&&(o.firstChild=t,t=yf(r[su],t)),n.push(o)}return[t,n]}var AA=()=>null,MA=()=>null;function RA(){AA=u2,MA=l2}function u2(t,e){return OA(t,e)?t[Zn].shift():(_f(t),null)}function Wh(t,e){return AA(t,e)}function l2(t,e,n){if(e.tView.ssrId===null)return null;let r=Wh(t,e.tView.ssrId);return n[Q].firstUpdatePass&&r===null&&d2(n,e),r}function PA(t,e,n){return MA(t,e,n)}function d2(t,e){let n=e;for(;n;){if(pD(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(pD(t,n))return;n=n.next}}function OA(t,e){let n=t[Zn];return!e||n===null||n.length===0?!1:n[0].data[dS]===e}function pD(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return Cn(r)&&OA(r,n)?(_f(r),!0):!1}var NA=class{},wf=class{},xy=class{resolveComponentFactory(e){throw new $(917,!1)}},Eu=class{static NULL=new xy},Fo=class{},ki=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>h2()}return t})();function h2(){let t=_e(),e=jt(),n=Vn(e.index,t);return(wn(n)?n:t)[Be]}var xA=(()=>{class t{static \u0275prov=K({token:t,providedIn:"root",factory:()=>null})}return t})();var Oh={},ca=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Oh,r);return i!==Oh||n===Oh?i:this.parentInjector.get(e,n,r)}};function gD(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vv(i,a);else if(o==2){let u=a,l=e[++s];r=vv(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Ce(t,e=0){let n=_e();if(n===null)return de(t,e);let r=jt();return QD(r,n,Ut(t),e)}function f2(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}m2(t,e,n,a,o,u,l)}o!==null&&r!==null&&p2(n,r,o)}function p2(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function g2(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function m2(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let v=r[g];!u&&mr(v)&&(u=!0,g2(t,n,g)),Cy(Vh(n,e),t,v.type)}C2(n,t.data.length,a);for(let g=0;g<a;g++){let v=r[g];v.providersResolver&&v.providersResolver(v)}let l=!1,h=!1,p=ZS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let v=r[g];if(n.mergedAttrs=iu(n.mergedAttrs,v.hostAttrs),y2(t,n,e,p,v),w2(p,v,i),s!==null&&s.has(v)){let[N,x]=s.get(v);n.directiveToIndex.set(v.type,[p,N+n.directiveStart,x+n.directiveStart])}else(o===null||!o.has(v))&&n.directiveToIndex.set(v.type,p);v.contentQueries!==null&&(n.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(n.flags|=64);let I=v.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}v2(t,n,o)}function v2(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))mD(0,e,i,r),mD(1,e,i,r),yD(e,r,!1);else{let o=n.get(i);vD(0,e,o,r),vD(1,e,o,r),yD(e,r,!0)}}}function mD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),kA(e,o)}}function vD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),kA(e,s)}}function kA(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function yD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||f_(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function y2(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Di(i.type,!0)),s=new xo(o,mr(i),Ce,null);t.blueprint[r]=s,n[r]=s,_2(t,e,r,ZS(t,n,i.hostVars,Tn),i)}function _2(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;E2(s)!=a&&s.push(a),s.push(n,r,o)}}function E2(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function w2(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mr(e)&&(n[""]=t)}}function C2(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function FA(t,e,n,r,i,o,s,a){let u=e[Q],l=u.consts,h=Pi(l,s),p=M_(u,t,n,r,h);return o&&f2(u,e,p,Pi(l,a),i),p.mergedAttrs=iu(p.mergedAttrs,p.attrs),p.attrs!==null&&gD(p,p.attrs,!1),p.mergedAttrs!==null&&gD(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function LA(t,e){UF(t,e),Fv(e)&&t.queries.elementEnd(e)}function P_(t,e,n){return t[e]=n}function I2(t,e){return t[e]}function _r(t,e,n){if(n===Tn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function VA(t,e,n,r){let i=_r(t,e,n);return _r(t,e+1,r)||i}function dy(t,e,n){return function r(i){let o=Yr(t)?Vn(t.index,e):e;mf(o,5);let s=e[st],a=_D(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=_D(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function _D(t,e,n,r){let i=ue(null);try{return ke(6,e,n),n(r)!==!1}catch(o){return b_(t,o),!1}finally{ke(7,e,n),ue(i)}}function b2(t,e,n,r,i,o,s,a){let u=dh(t),l=!1,h=null;if(!r&&u&&(h=D2(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Ln(t,n),g=r?r(p):p;hL(n,g,o,a);let v=i.listen(g,o,a);if(!T2(o)){let I=r?N=>r(In(N[t.index])):t.index;UA(I,e,n,o,a,v,!1)}}return l}function T2(t){return t.startsWith("animation")||t.startsWith("transition")}function D2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ta],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function UA(t,e,n,r,i,o,s){let a=e.firstCreatePass?Hv(e):null,u=$v(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function ED(t,e,n,r,i,o){let s=e[n],a=e[Q],l=a.data[n].outputs[r],p=s[l].subscribe(o);UA(t.index,a,e,i,o,p,!0)}var ky=Symbol("BINDING");var Gh=class extends Eu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Kr(e);return new fa(n,this.ngModule)}};function S2(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&df.SignalBased)!==0};return i&&(o.transform=i),o})}function A2(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function M2(t,e,n){let r=e instanceof it?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new ca(n,r):n}function R2(t){let e=t.get(Fo,null);if(e===null)throw new $(407,!1);let n=t.get(xA,null),r=t.get(dr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function P2(t,e){let n=jA(t);return l_(e,n,n==="svg"?ET:n==="math"?wT:null)}function jA(t){return(t.selectors[0][0]||"div").toLowerCase()}var fa=class extends wf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=S2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=A2(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ke(22);let a=ue(null);try{let u=this.componentDef,l=O2(r,u,s,o),h=M2(u,i||this.ngModule,e),p=R2(h),g=p.rendererFactory.createRenderer(null,u),v=r?mV(g,r,u.encapsulation,h):P2(u,g),I=s?.some(wD)||o?.some(j=>typeof j!="function"&&j.bindings.some(wD)),N=g_(null,l,null,512|QS(u),null,null,p,g,h,null,RS(v,h,!0));N[ze]=v,vh(N);let x=null;try{let j=FA(ze,N,2,"#host",()=>l.directiveRegistry,!0,0);HS(g,v,j),la(v,N),uA(l,N,j),LS(l,j,N),LA(l,j),n!==void 0&&x2(j,this.ngContentSelectors,n),x=Vn(j.index,N),N[st]=x[st],D_(l,N,null)}catch(j){throw x!==null&&by(x),by(N),j}finally{ke(23),yh()}return new Kh(this.componentType,N,!!I)}finally{ue(a)}}};function O2(t,e,n,r){let i=t?["ng-version","20.3.15"]:BL(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[ky].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[ky].requiredVars;let v=h+1;g.create&&(g.targetIdx=v,(o??=[]).push(g)),g.update&&(g.targetIdx=v,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=ch(p);u.push(g)}return p_(0,null,N2(o,s),1,a,u,null,null,null,[i],null)}function N2(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function wD(t){let e=t[ky].kind;return e==="input"||e==="twoWay"}var Kh=class extends NA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ro(n[Q],ze),this.location=ma(this._tNode,n),this.instance=Vn(this._tNode.index,n)[st],this.hostView=this.changeDetectorRef=new xi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=T_(r,i[Q],i,e,n);this.previousInputValues.set(e,n);let s=Vn(r.index,i);mf(s,1)}get injector(){return new No(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function x2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Bo=(()=>{class t{static __NG_ELEMENT_ID__=k2}return t})();function k2(){let t=jt();return $A(t,_e())}var F2=Bo,BA=class extends F2{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ma(this._hostTNode,this._hostLView)}get injector(){return new No(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jy(this._hostTNode,this._hostLView);if(zD(e)){let n=Fh(e,this._hostLView),r=kh(e),i=n[Q].data[r+8];return new No(i,n)}else return new No(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=CD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Qe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Wh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,da(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!xF(e),l;if(u)l=n;else{let x=n||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let h=u?e:new fa(Kr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(it,null);j&&(o=j)}let g=Kr(h.componentType??{}),v=Wh(this._lContainer,g?.id??null),I=v?.firstChild??null,N=h.create(p,i,I,o,s,a);return this.insertImpl(N.hostView,l,da(this._hostTNode,v)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ot],l=new BA(u,u[Fn],u[ot]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return _u(s,i,o,r),e.attachToViewContainerRef(),Sv(hy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=CD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=uu(this._lContainer,n);r&&(Kc(hy(this._lContainer),n),pf(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=uu(this._lContainer,n);return r&&Kc(hy(this._lContainer),n)!=null?new xi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function CD(t){return t[Xc]}function hy(t){return t[Xc]||(t[Xc]=[])}function $A(t,e){let n,r=e[t.index];return Cn(r)?n=r:(n=IA(r,e,null,t),e[t.index]=n,m_(e,n)),HA(n,e,t,r),new BA(n,t,e)}function L2(t,e){let n=t[Be],r=n.createComment(""),i=Ln(e,t),o=n.parentNode(i);return $h(n,o,r,n.nextSibling(i),!1),r}var HA=zA,O_=()=>!1;function V2(t,e,n){return O_(t,e,n)}function zA(t,e,n,r){if(t[gr])return;let i;n.type&8?i=In(r):i=L2(e,n),t[gr]=i}function U2(t,e,n){if(t[gr]&&t[Zn])return!0;let r=n[dn],i=e.index-ze;if(!r||nS(e)||xS(r,i))return!1;let s=Sy(r,i),a=r.data[of]?.[i],[u,l]=c2(s,a);return t[gr]=u,t[Zn]=l,!0}function j2(t,e,n,r){O_(t,n,e)||zA(t,e,n,r)}function qA(){HA=j2,O_=U2}var Fy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Ly=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)N_(e,n).matches!==null&&this.queries[n].setDirty()}},Vy=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=K2(e):this.predicate=e}},Uy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},jy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,B2(n,o)),this.matchTNodeWithReadOption(e,n,Rh(n,e,o,!1,!1))}else r===ha?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Rh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Un||i===Bo||i===ha&&n.type&4)this.addMatch(n.index,-2);else{let o=Rh(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function B2(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function $2(t,e){return t.type&11?ma(t,e):t.type&4?A_(t,e):null}function H2(t,e,n,r){return n===-1?$2(e,t):n===-2?z2(t,e,r):ou(t,t[Q],n,e)}function z2(t,e,n){if(n===Un)return ma(e,t);if(n===ha)return A_(e,t);if(n===Bo)return $A(e,t)}function WA(t,e,n,r){let i=e[pr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(H2(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function By(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=WA(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Qe;p<h.length;p++){let g=h[p];g[Mi]===g[ot]&&By(g[Q],g,l,r)}if(h[Ao]!==null){let p=h[Ao];for(let g=0;g<p.length;g++){let v=p[g];By(v[Q],v,l,r)}}}}}return r}function q2(t,e){return t[pr].queries[e].queryList}function W2(t,e,n){let r=new Uh((n&4)===4);return ST(t,e,r,r.destroy),(e[pr]??=new Ly).queries.push(new Fy(r))-1}function G2(t,e,n,r){let i=St();if(i.firstCreatePass){let o=jt();Y2(i,new Vy(e,n,r),o.index),Q2(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return W2(i,_e(),n)}function K2(t){return t.split(",").map(e=>e.trim())}function Y2(t,e,n){t.queries===null&&(t.queries=new Uy),t.queries.track(new jy(e,n))}function Q2(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function N_(t,e){return t.queries.getByIndex(e)}function Z2(t,e){let n=t[Q],r=N_(n,e);return r.crossesNgTemplate?By(n,t,e,[]):WA(n,t,r,e)}var Lo=class{},Cf=class{};var Yh=class extends Lo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Gh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Rv(e);this._bootstrapComponents=KS(o.bootstrap),this._r3Injector=ey(e,n,[{provide:Lo,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver},...r],Gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Qh=class extends Cf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Yh(this.moduleType,e,[])}};var lu=class extends Lo{injector;componentFactoryResolver=new Gh(this);instance=null;constructor(e){super();let n=new wo([...e.providers,{provide:Lo,useValue:this},{provide:Eu,useValue:this.componentFactoryResolver}],e.parent||Qc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function va(t,e,n=null){return new lu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var J2=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=uh(!1,n.type),i=r.length>0?va([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:t,providedIn:"environment",factory:()=>new t(de(it))})}return t})();function Tt(t){return ga(()=>{let e=GA(t),n=Z(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(J2).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jr.Emulated,styles:t.styles||vn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Dn("NgStandalone"),KA(n);let r=t.dependencies;return n.directiveDefs=ID(r,X2),n.pipeDefs=ID(r,Pv),n.id=nU(n),n})}function X2(t){return Kr(t)||ch(t)}function Ir(t){return ga(()=>({type:t.type,bootstrap:t.bootstrap||vn,declarations:t.declarations||vn,imports:t.imports||vn,exports:t.exports||vn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function eU(t,e){if(t==null)return Ai;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=df.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function tU(t){if(t==null)return Ai;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function et(t){return ga(()=>{let e=GA(t);return KA(e),e})}function x_(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function GA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Ai,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||vn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eU(t.inputs,e),outputs:tU(t.outputs),debugInfo:null}}function KA(t){t.features?.forEach(e=>e(t))}function ID(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function nU(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rU(t){return Object.getPrototypeOf(t.prototype).constructor}function hn(t){let e=rU(t.type),n=!0,r=[t];for(;e;){let i;if(mr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=fy(t.inputs),s.declaredInputs=fy(t.declaredInputs),s.outputs=fy(t.outputs);let a=i.hostBindings;a&&cU(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&sU(t,u),l&&aU(t,l),iU(t,i),rT(t.outputs,i.outputs),mr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===hn&&(n=!1)}}e=Object.getPrototypeOf(e)}oU(r)}function iU(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function oU(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,n=iu(n,i.hostAttrs))}}function fy(t){return t===Ai?{}:t===vn?[]:t}function sU(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function aU(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function cU(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function uU(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=iu(t.mergedAttrs,t.attrs);let h=t.tView=p_(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ia(t,!1);let u=YA(n,e,t,r);Eh()&&C_(n,e,u,t),la(u,e);let l=IA(u,e,u,t);e[r+ze]=l,m_(e,l),V2(l,t,e)}function Zh(t,e,n,r,i,o,s,a,u,l,h){let p=n+ze,g;if(e.firstCreatePass){if(g=M_(e,p,4,s||null,a||null),l!=null){let v=Pi(e.consts,l);g.localNames=[];for(let I=0;I<v.length;I+=2)g.localNames.push(v[I],-1)}}else g=e.data[p];return uU(g,t,e,n,r,i,o,u),l!=null&&lA(t,g,h),g}var YA=QA;function QA(t,e,n,r){return Zr(!0),e[Be].createComment("")}function lU(t,e,n,r){let i=!uf(e,n);Zr(i);let o=e[dn]?.data[lS]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return QA(t,e);let s=e[dn],a=vf(s,t,e,n);cf(s,r,a);let u=c_(s,r);return yf(u,a)}function ZA(){YA=lU}var bn=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(bn||{}),bD=0,dU=1,mt=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(mt||{});var hU=0,wu=1;var fU=4,pU=5;var gU=7,ua=8,mU=9,k_=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(k_||{});function Nh(t,e){let n=yU(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function vU(t){Nh(1,t),Nh(0,t),Nh(2,t)}function yU(t){let e=fU;return t===1?e=pU:t===2&&(e=mU),e}function JA(t){return t+1}function ya(t,e){let n=t[Q],r=JA(e.index);return t[r]}function Cu(t,e){let n=JA(e.index);return t.data[n]}function _U(t,e,n){let r=e[Q],i=Cu(r,n);switch(t){case mt.Complete:return i.primaryTmplIndex;case mt.Loading:return i.loadingTmplIndex;case mt.Error:return i.errorTmplIndex;case mt.Placeholder:return i.placeholderTmplIndex;default:return null}}function TD(t,e){return e===mt.Placeholder?t.placeholderBlockConfig?.[bD]??null:e===mt.Loading?t.loadingBlockConfig?.[bD]??null:null}function EU(t){return t.loadingBlockConfig?.[dU]??null}function DD(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function wU(t,e){let n=e.primaryTmplIndex+ze;return Ro(t,n)}var CU=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?va(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:t,providedIn:"environment",factory:()=>new t})}return t})();var XA=new H("");function py(t,e,n){return t.get(CU).getOrCreateInjector(e,t,n,"")}function IU(t,e,n){if(t instanceof ca){let i=t.injector,o=t.parentInjector,s=py(o,e,n);return new ca(i,s)}let r=t.get(it);if(r!==t){let i=py(r,e,n);return new ca(t,i)}return py(t,e,n)}function Oo(t,e,n,r=!1){let i=n[ot],o=i[Q];if(Ri(i))return;let s=ya(i,e),a=s[wu],u=s[gU];if(!(u!==null&&t<u)&&SD(a,t)&&SD(s[hU]??-1,t)){let l=Cu(o,e),p=!r&&!0&&(EU(l)!==null||TD(l,mt.Loading)!==null||TD(l,mt.Placeholder))?DU:TU;try{p(t,s,n,e,i)}catch(g){b_(i,g)}}}function bU(t,e){let n=t[Zn]?.findIndex(i=>i.data[pS]===e[wu])??-1;return{dehydratedView:n>-1?t[Zn][n]:null,dehydratedViewIx:n}}function TU(t,e,n,r,i){ke(20);let o=_U(t,i,r);if(o!==null){e[wu]=t;let s=i[Q],a=o+ze,u=Ro(s,a),l=0;S_(n,l);let h;if(t===mt.Complete){let I=Cu(s,r),N=I.providers;N&&N.length>0&&(h=IU(i[_n],I,N))}let{dehydratedView:p,dehydratedViewIx:g}=bU(n,e),v=yu(i,u,null,{injector:h,dehydratedView:p});if(_u(n,v,l,da(u,p)),mf(v,2),g>-1&&n[Zn]?.splice(g,1),(t===mt.Complete||t===mt.Error)&&Array.isArray(e[ua])){for(let I of e[ua])I();e[ua]=null}}ke(21)}function SD(t,e){return t<e}function AD(t,e,n){t.loadingPromise.then(()=>{t.loadingState===bn.COMPLETE?Oo(mt.Complete,e,n):t.loadingState===bn.FAILED&&Oo(mt.Error,e,n)})}var DU=null;var If=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var F_=new H("");function Fi(t){return!!t&&typeof t.then=="function"}function L_(t){return!!t&&typeof t.subscribe=="function"}var V_=new H("");function bf(t){return Dt([{provide:V_,multi:!0,useValue:t}])}var U_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(V_,{optional:!0})??[];injector=M(Xe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=gt(this.injector,i);if(Fi(o))n.push(o);else if(L_(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Li=new H("");function eM(){jm(()=>{let t="";throw new $(600,t)})}function tM(t){return t.isBoundToModule}var SU=10;var At=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(on);afterRenderManager=M(E_);zonelessEnabled=M(oa);rootEffectScheduler=M(oy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ge;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Xn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Y(n=>!n))}constructor(){M(jo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(it);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Xe.NULL){return this._injector.get(Ne).run(()=>{ke(10);let s=n instanceof wf;if(!this._injector.get(U_).done){let I="";throw new $(405,I)}let u;s?u=n:u=this._injector.get(Eu).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=tM(u)?void 0:this._injector.get(Lo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,v=p.injector.get(F_,null);return v?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),ru(this.components,p),v?.unregisterApplication(g)}),this._loadComponent(p),ke(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let n=ue(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ue(n),this.afterTick.next(),ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<SU;)ke(14),this.synchronizeOnce(),ke(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!eu(i))continue;let o=r&&!this.zonelessEnabled?0:1;_A(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>eu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ru(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Li,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ru(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ru(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function AU(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function nM(t,e,n){let r=e[_n],i=e[Q];if(t.loadingState!==bn.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=ya(e,n),s=wU(i,t);t.loadingState=bn.IN_PROGRESS,Nh(1,o);let a=t.dependencyResolverFn,u=r.get(Ni).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let v of l)if(v.status==="fulfilled"){let I=v.value,N=Kr(I)||ch(I);if(N)p.push(N);else{let x=Pv(I);x&&g.push(x)}}else{h=!0;break}if(h){if(t.loadingState=bn.FAILED,t.errorTmplIndex===null){let I=new $(-750,!1);b_(e,I)}}else{t.loadingState=bn.COMPLETE;let v=s.tView;if(p.length>0){v.directiveRegistry=DD(v.directiveRegistry,p);let I=p.map(x=>x.type),N=uh(!1,...I);t.providers=N}g.length>0&&(v.pipeRegistry=DD(v.pipeRegistry,g))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=bn.COMPLETE,u()}),t.loadingPromise)}function MU(t,e){return e[_n].get(XA,null,{optional:!0})?.behavior!==k_.Manual}function RU(t,e,n){let r=e[Q],i=e[n.index];if(!MU(t,e))return;let o=ya(e,n),s=Cu(r,n);switch(vU(o),s.loadingState){case bn.NOT_STARTED:Oo(mt.Loading,n,i),nM(s,e,n),s.loadingState===bn.IN_PROGRESS&&AD(s,n,i);break;case bn.IN_PROGRESS:Oo(mt.Loading,n,i),AD(s,n,i);break;case bn.COMPLETE:Oo(mt.Complete,n,i);break;case bn.FAILED:Oo(mt.Error,n,i);break;default:}}async function rM(t,e,n){let r=t.get(sf);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=EL(e,t);if(s.length===0)return;o!==null&&s.shift(),NU(r,s),o!==null&&await o;let a=s[0];r.has(a)?await MD(t,s,n):r.awaitParentBlock(a,async()=>await MD(t,s,n))}async function MD(t,e,n){let r=t.get(sf),i=r.hydrating,o=t.get(Xn),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],h=r.get(l);if(h!=null){if(await kU(h),await xU(t),PU(h)){s2(h),RD(e.slice(u),r);break}i.get(l).resolve()}else{OU(u,e,r),RD(e.slice(u),r);break}}let a=e[e.length-1];await i.get(a)?.promise,o.remove(s),n&&n(e),a2(r.get(a),e,r,t.get(At))}function PU(t){return ya(t.lView,t.tNode)[wu]===mt.Error}function OU(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&Ef(i.lContainer)}function RD(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function NU(t,e){for(let n of e)t.hydrating.set(n,AU())}function xU(t){return new Promise(e=>ff(e,{injector:t}))}async function kU(t){let{tNode:e,lView:n}=t,r=ya(n,e);return new Promise(i=>{FU(r,i),RU(2,n,e)})}function FU(t,e){Array.isArray(t[ua])||(t[ua]=[]),t[ua].push(e)}function ei(t,e,n,r){let i=_e(),o=Po();if(_r(i,o,e)){let s=St(),a=_h();DV(a,i,t,e,n,r)}return ei}var rX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var $y=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function gy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function LU(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=gy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),v=e[u],I=gy(s,g,u,v,n);if(I!==0){I<0&&t.updateValue(s,v),s--,u--;continue}let N=n(o,l),x=n(s,g),j=n(o,h);if(Object.is(j,x)){let J=n(u,v);Object.is(J,N)?(t.swap(o,s),t.updateValue(s,v),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Jh,i??=OD(t,o,s,n),Hy(t,r,o,j))t.updateValue(o,h),o++,s++;else if(i.has(j))r.set(N,t.detach(o)),s--;else{let J=t.create(o,e[o]);t.attach(o,J),o++,s++}}for(;o<=u;)PD(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=gy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Jh,i??=OD(t,o,s,n);let v=n(o,p);if(Hy(t,r,o,v))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(v))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let I=n(o,h);r.set(I,t.detach(o)),s--}}}for(;!l.done;)PD(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Hy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function PD(t,e,n,r,i){if(Hy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function OD(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Jh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function se(t,e,n,r,i,o,s,a){Dn("NgControlFlow");let u=_e(),l=St(),h=Pi(l.consts,o);return Zh(u,l,t,e,n,r,i,h,256,s,a),j_}function j_(t,e,n,r,i,o,s,a){Dn("NgControlFlow");let u=_e(),l=St(),h=Pi(l.consts,o);return Zh(u,l,t,e,n,r,i,h,512,s,a),j_}function ae(t,e){Dn("NgControlFlow");let n=_e(),r=Po(),i=n[r]!==Tn?n[r]:-1,o=i!==-1?Xh(n,ze+i):void 0,s=0;if(_r(n,r,t)){let a=ue(null);try{if(o!==void 0&&S_(o,s),t!==-1){let u=ze+t,l=Xh(n,u),h=Gy(n[Q],u),p=PA(l,h,n),g=yu(n,h,e,{dehydratedView:p});_u(l,g,s,da(h,p))}}finally{ue(a)}}else if(o!==void 0){let a=bA(o,s);a!==void 0&&(a[st]=e)}}var zy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Qe}};var qy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function $o(t,e,n,r,i,o,s,a,u,l,h,p,g){Dn("NgControlFlow");let v=_e(),I=St(),N=u!==void 0,x=_e(),j=a?s.bind(x[rn][st]):s,J=new qy(N,j);x[ze+t]=J,Zh(v,I,t+1,e,n,r,i,Pi(I.consts,o),256),N&&Zh(v,I,t+2,u,l,h,p,Pi(I.consts,g),512)}var Wy=class extends $y{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Qe}at(e){return this.getLView(e)[st].$implicit}attach(e,n){let r=n[dn];this.needsIndexUpdate||=e!==this.length,_u(this.lContainer,n,e,da(this.templateTNode,r)),VU(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,UU(this.lContainer,e),jU(this.lContainer,e)}create(e,n){let r=Wh(this.lContainer,this.templateTNode.tView.ssrId),i=yu(this.hostLView,this.templateTNode,new zy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){pf(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[st].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[st].$index=e}getLView(e){return BU(this.lContainer,e)}};function Ho(t){let e=ue(null),n=Qr();try{let r=_e(),i=r[Q],o=r[n],s=n+1,a=Xh(r,s);if(o.liveCollection===void 0){let l=Gy(i,s);o.liveCollection=new Wy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(LU(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Po(),h=u.length===0;if(_r(r,l,h)){let p=n+2,g=Xh(r,p);if(h){let v=Gy(i,p),I=PA(g,v,r),N=yu(r,v,void 0,{dehydratedView:I});_u(g,N,0,da(v,I))}else i.firstUpdatePass&&_f(g),S_(g,0)}}}finally{ue(e)}}function Xh(t,e){return t[e]}function VU(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n],i=r?r[So]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[_n];eV(o,i),ko.delete(r),i.detachedLeaveAnimationFns=void 0}}function UU(t,e){if(t.length<=Qe)return;let n=Qe+e,r=t[n],i=r?r[So]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function jU(t,e){return uu(t,e)}function BU(t,e){return bA(t,e)}function Gy(t,e){return Ro(t,e)}function Ie(t,e,n){let r=_e(),i=Po();if(_r(r,i,e)){let o=St(),s=_h();fA(s,r,t,e,r[Be],n)}return Ie}function ND(t,e,n,r,i){T_(e,t,n,i?"class":"style",r)}function y(t,e,n,r){let i=_e(),o=i[Q],s=t+ze,a=o.firstCreatePass?FA(s,i,2,e,TV,PT(),n,r):o.data[s];if(MV(a,i,t,e,iM),dh(a)){let u=i[Q];uA(u,i,a),LS(u,a,i)}return r!=null&&lA(i,a),y}function _(){let t=St(),e=jt(),n=RV(e);return t.firstCreatePass&&LA(t,n),OT(n)&&xT(),RT(),n.classesWithoutHost!=null&&BF(n)&&ND(t,n,_e(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&$F(n)&&ND(t,n,_e(),n.stylesWithoutHost,!1),_}function V(t,e,n,r){return y(t,e,n,r),_(),V}var iM=(t,e,n,r,i)=>(Zr(!0),l_(e[Be],r,Xv()));function $U(t,e,n,r,i){let o=!uf(e,n);if(Zr(o),o)return l_(e[Be],r,Xv());let s=e[dn],a=vf(s,t,e,n);return NS(s,i)&&cf(s,i,a.nextSibling),s&&(eS(n)||tS(a))&&Yr(n)&&(NT(n),$S(a)),a}function oM(){iM=$U}var HU=(t,e,n,r,i)=>(Zr(!0),jS(e[Be],""));function zU(t,e,n,r,i){let o,s=!uf(e,n);if(Zr(s),s)return jS(e[Be],"");let a=e[dn],u=vf(a,t,e,n),l=yL(a,i);return cf(a,i,u),o=yf(l,u),o}function sM(){HU=zU}function Re(){return _e()}var Dh=void 0;function qU(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var WU=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dh,"{1} 'at' {0}",Dh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",qU],my={};function Sn(t){let e=GU(t),n=xD(e);if(n)return n;let r=e.split("-")[0];if(n=xD(r),n)return n;if(r==="en")return WU;throw new $(701,!1)}function xD(t){return t in my||(my[t]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[t]),my[t]}var ct=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(ct||{});function GU(t){return t.toLowerCase().replace(/_/g,"-")}var Iu="en-US";var KU=Iu;function aM(t){typeof t=="string"&&(KU=t.toLowerCase().replace(/_/g,"-"))}function X(t,e,n){let r=_e(),i=St(),o=jt();return cM(i,r,r[Be],o,t,e,n),X}function cM(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=dy(r,e,o),b2(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],v=h[p+1];u??=dy(r,e,o),ED(r,e,g,v,i,u)}if(l&&l.length)for(let p of l)u??=dy(r,e,o),ED(r,e,p,i,i,u)}}function L(t=1){return WT(t)}function B_(t,e,n,r){G2(t,e,n,r)}function $_(t){let e=_e(),n=St(),r=Qv();mh(r+1);let i=N_(n,r);if(t.dirty&&IT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Z2(e,r);t.reset(o,tL),t.notifyOnChanges()}return!0}return!1}function H_(){return q2(_e(),Qv())}function Sh(t,e){return t<<17|e<<2}function Vo(t){return t>>17&32767}function YU(t){return(t&2)==2}function QU(t,e){return t&131071|e<<17}function Ky(t){return t|2}function pa(t){return(t&131068)>>2}function vy(t,e){return t&-131069|e<<2}function ZU(t){return(t&1)===1}function Yy(t){return t|1}function JU(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vo(s),u=pa(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ea(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Vo(t[a+1]);t[r+1]=Sh(g,a),g!==0&&(t[g+1]=vy(t[g+1],r)),t[a+1]=QU(t[a+1],r)}else t[r+1]=Sh(a,0),a!==0&&(t[a+1]=vy(t[a+1],r)),a=r;else t[r+1]=Sh(u,0),a===0?a=r:t[u+1]=vy(t[u+1],r),u=r;l&&(t[r+1]=Ky(t[r+1])),kD(t,h,r,!0),kD(t,h,r,!1),XU(e,h,t,r,o),s=Sh(a,u),o?e.classBindings=s:e.styleBindings=s}function XU(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ea(o,e)>=0&&(n[r+1]=Yy(n[r+1]))}function kD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Vo(i):pa(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];ej(u,e)&&(a=!0,t[s+1]=r?Yy(l):Ky(l)),s=r?Vo(l):pa(l)}a&&(t[n+1]=r?Ky(i):Yy(i))}function ej(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ea(t,e)>=0:!1}function ut(t,e){return tj(t,e,null,!0),ut}function tj(t,e,n,r){let i=_e(),o=St(),s=Yv(2);if(o.firstUpdatePass&&rj(o,t,s,r),e!==Tn&&_r(i,s,e)){let a=o.data[Qr()];cj(o,a,i,i[Be],t,i[s+1]=uj(e,n),r,s)}}function nj(t,e){return e>=t.expandoStartIndex}function rj(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Qr()],s=nj(t,n);lj(o,r)&&e===null&&!s&&(e=!1),e=ij(i,o,e,r),JU(i,o,e,n,s,r)}}function ij(t,e,n,r){let i=$T(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=yy(null,t,e,n,r),n=du(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=yy(i,t,e,n,r),o===null){let u=oj(t,e,r);u!==void 0&&Array.isArray(u)&&(u=yy(null,t,e,u[1],r),u=du(u,e.attrs,r),sj(t,e,r,u))}else o=aj(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function oj(t,e,n){let r=n?e.classBindings:e.styleBindings;if(pa(r)!==0)return t[Vo(r)]}function sj(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Vo(i)]=r}function aj(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=du(r,s,n)}return du(r,e.attrs,n)}function yy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=du(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function du(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),hT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function cj(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=ZU(l)?FD(u,e,n,i,pa(l),s):void 0;if(!ef(h)){ef(o)||YU(l)&&(o=FD(u,null,n,i,a,s));let p=Lv(Qr(),n);gV(r,s,p,i,o)}}function FD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Tn&&(g=p?vn:void 0);let v=p?ah(g,r):h===r?g:void 0;if(l&&!ef(v)&&(v=ah(u,r)),ef(v)&&(a=v,s))return a;let I=t[i+1];i=s?Vo(I):pa(I)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ah(u,r))}return a}function ef(t){return t!==void 0}function uj(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Gr(mu(t)))),t}function lj(t,e){return(t.flags&(e?8:16))!==0}function A(t,e=""){let n=_e(),r=St(),i=t+ze,o=r.firstCreatePass?M_(r,i,1,e,null):r.data[i],s=uM(r,n,o,e,t);n[i]=s,Eh()&&C_(r,n,s,o),ia(o,!1)}var uM=(t,e,n,r,i)=>(Zr(!0),US(e[Be],r));function dj(t,e,n,r,i){let o=!uf(e,n);if(Zr(o),o)return US(e[Be],r);let s=e[dn];return vf(s,t,e,n)}function lM(){uM=dj}function hj(t,e,n,r=""){return _r(t,Po(),n)?e+Io(n)+r:Tn}function fj(t,e,n,r,i,o=""){let s=LT(),a=VA(t,s,n,i);return Yv(2),a?e+Io(n)+r+Io(i)+o:Tn}function tt(t){return De("",t),tt}function De(t,e,n){let r=_e(),i=hj(r,t,e,n);return i!==Tn&&dM(r,Qr(),i),De}function Vi(t,e,n,r,i){let o=_e(),s=fj(o,t,e,n,r,i);return s!==Tn&&dM(o,Qr(),s),Vi}function dM(t,e,n){let r=Lv(e,t);SL(t[Be],r,n)}function me(t,e,n){ry(e)&&(e=e());let r=_e(),i=Po();if(_r(r,i,e)){let o=St(),s=_h();fA(s,r,t,e,r[Be],n)}return me}function Ee(t,e){let n=ry(t);return n&&t.set(e),n}function ve(t,e){let n=_e(),r=St(),i=jt();return cM(r,n,n[Be],i,t,e),ve}function pj(t,e,n){let r=St();if(r.firstCreatePass){let i=mr(t);Qy(n,r.data,r.blueprint,i,!0),Qy(e,r.data,r.blueprint,i,!1)}}function Qy(t,e,n,r,i){if(t=Ut(t),Array.isArray(t))for(let o=0;o<t.length;o++)Qy(t[o],e,n,r,i);else{let o=St(),s=_e(),a=jt(),u=Eo(t)?t:Ut(t.provide),l=Nv(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Eo(t)||!t.multi){let v=new xo(l,i,Ce,null),I=Ey(u,e,i?h:h+g,p);I===-1?(Cy(Vh(a,s),o,u),_y(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[I]=v,s[I]=v)}else{let v=Ey(u,e,h+g,p),I=Ey(u,e,h,h+g),N=v>=0&&n[v],x=I>=0&&n[I];if(i&&!x||!i&&!N){Cy(Vh(a,s),o,u);let j=vj(i?mj:gj,n.length,i,r,l,t);!i&&x&&(n[I].providerFactory=j),_y(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(j),s.push(j)}else{let j=hM(n[i?I:v],l,!i&&r);_y(o,t,v>-1?v:I,j)}!i&&r&&x&&n[I].componentProviders++}}}function _y(t,e,n,r){let i=Eo(e),o=vT(e);if(i||o){let u=(o?Ut(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function hM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ey(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gj(t,e,n,r,i){return Zy(this.multi,[])}function mj(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ou(r,r[Q],this.providerFactory.index,i);s=u.slice(0,a),Zy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Zy(o,s);return s}function Zy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function vj(t,e,n,r,i,o){let s=new xo(t,n,Ce,null);return s.multi=[],s.index=e,s.componentProviders=0,hM(s,i,r&&!n),s}function br(t,e=[]){return n=>{n.providersResolver=(r,i)=>pj(r,i?i(t):t,e)}}function bu(t,e,n){let r=ph()+t,i=_e();return i[r]===Tn?P_(i,r,n?e.call(n):e()):I2(i,r)}function z_(t,e,n,r){return yj(_e(),ph(),t,e,n,r)}function fM(t,e){let n=t[e];return n===Tn?void 0:n}function yj(t,e,n,r,i,o){let s=e+n;return _r(t,s,i)?P_(t,s+1,o?r.call(o,i):r(i)):fM(t,s+1)}function _j(t,e,n,r,i,o,s){let a=e+n;return VA(t,a,i,o)?P_(t,a+2,s?r.call(s,i,o):r(i,o)):fM(t,a+2)}function _a(t,e){let n=St(),r,i=t+ze;n.firstCreatePass?(r=Ej(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Di(r.type,!0)),s,a=tn(Ce);try{let u=Lh(!1),l=o();return Lh(u),Vv(n,_e(),i,l),l}finally{tn(a)}}function Ej(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Ea(t,e,n,r){let i=t+ze,o=_e(),s=CT(o,i);return wj(o,i)?_j(o,ph(),e,s.transform,n,r,s):s.transform(n,r)}function wj(t,e){return t[Q].data[e].pure}var tf=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},q_=(()=>{class t{compileModuleSync(n){return new Qh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Rv(n),o=KS(i.declarations).reduce((s,a)=>{let u=Kr(a);return u&&s.push(new fa(u)),s},[]);return new tf(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Cj=(()=>{class t{zone=M(Ne);changeDetectionScheduler=M(dr);applicationRef=M(At);applicationErrorHandler=M(on);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function pM({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ne(Z(F({},gM()),{scheduleInRootZone:n})),[{provide:Ne,useFactory:t},{provide:xn,multi:!0,useFactory:()=>{let r=M(Cj,{optional:!0});return()=>r.initialize()}},{provide:xn,multi:!0,useFactory:()=>{let r=M(Ij);return()=>{r.initialize()}}},e===!0?{provide:iy,useValue:!0}:[],{provide:Ch,useValue:n??XS},{provide:on,useFactory:()=>{let r=M(Ne),i=M(it),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Kn),o.handleError(s))})}}}]}function gM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ij=(()=>{class t{subscription=new Je;initialized=!1;zone=M(Ne);pendingTasks=M(Xn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var W_=(()=>{class t{applicationErrorHandler=M(on);appRef=M(At);taskService=M(Xn);ngZone=M(Ne);zonelessEnabled=M(oa);tracing=M(jo,{optional:!0});disableScheduling=M(iy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Hh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Ch,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof au||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?cD:eA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Hh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function G_(){return Dn("NgZoneless"),Dt([{provide:dr,useExisting:W_},{provide:Ne,useClass:au},{provide:oa,useValue:!0},{provide:Ch,useValue:!1},[]])}function bj(){return typeof $localize<"u"&&$localize.locale||Iu}var Tu=new H("",{providedIn:"root",factory:()=>M(Tu,{optional:!0,skipSelf:!0})||bj()});function Mt(t){return eT(t)}function zo(t,e){return bd(t,e?.equal)}var mM=class{[Kt];constructor(e){this[Kt]=e}destroy(){this[Kt].destroy()}};var J_={JSACTION:"__jsaction",OWNER:"__owner"},EM={};function Tj(t){return t[J_.JSACTION]}function vM(t,e){t[J_.JSACTION]=e}function Dj(t){return EM[t]}function Sj(t,e){EM[t]=e}var re={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Aj=[re.MOUSEENTER,re.MOUSELEAVE,"pointerenter","pointerleave"],vX=[re.CLICK,re.DBLCLICK,re.FOCUSIN,re.FOCUSOUT,re.KEYDOWN,re.KEYUP,re.KEYPRESS,re.MOUSEOVER,re.MOUSEOUT,re.SUBMIT,re.TOUCHSTART,re.TOUCHEND,re.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Mj=[re.FOCUS,re.BLUR,re.ERROR,re.LOAD,re.TOGGLE],X_=t=>Mj.indexOf(t)>=0;function Rj(t){return t===re.MOUSEENTER?re.MOUSEOVER:t===re.MOUSELEAVE?re.MOUSEOUT:t===re.POINTERENTER?re.POINTEROVER:t===re.POINTERLEAVE?re.POINTEROUT:t}function Pj(t,e,n,r){let i=!1;X_(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function Oj(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function Nj(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var yM=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function xj(t){return t.which===2||t.which==null&&t.button===4}function kj(t){return yM&&t.metaKey||!yM&&t.ctrlKey||xj(t)||t.shiftKey}function Fj(t,e,n){let r=t.relatedTarget;return(t.type===re.MOUSEOVER&&e===re.MOUSEENTER||t.type===re.MOUSEOUT&&e===re.MOUSELEAVE||t.type===re.POINTEROVER&&e===re.POINTERENTER||t.type===re.POINTEROUT&&e===re.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function Lj(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===re.MOUSEOVER?n.type=re.MOUSEENTER:t.type===re.MOUSEOUT?n.type=re.MOUSELEAVE:t.type===re.POINTEROVER?n.type=re.POINTERENTER:n.type=re.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var Vj=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Af=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){Vj&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Pj(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)Oj(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},Uj={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Ui(t){return t.eventType}function eE(t,e){t.eventType=e}function Df(t){return t.event}function wM(t,e){t.event=e}function CM(t){return t.targetElement}function IM(t,e){t.targetElement=e}function bM(t){return t.eic}function jj(t,e){t.eic=e}function Bj(t){return t.timeStamp}function $j(t,e){t.timeStamp=e}function Sf(t){return t.eia}function TM(t,e,n){t.eia=[e,n]}function K_(t){t.eia=void 0}function Tf(t){return t[1]}function Hj(t){return t.eirp}function DM(t,e){t.eirp=e}function SM(t){return t.eir}function AM(t,e){t.eir=e}function MM(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function zj(t,e,n,r,i,o,s,a){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:a}}var Y_=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Ui(this.eventInfo)}setEventType(e){eE(this.eventInfo,e)}getEvent(){return Df(this.eventInfo)}setEvent(e){wM(this.eventInfo,e)}getTargetElement(){return CM(this.eventInfo)}setTargetElement(e){IM(this.eventInfo,e)}getContainer(){return bM(this.eventInfo)}setContainer(e){jj(this.eventInfo,e)}getTimestamp(){return Bj(this.eventInfo)}setTimestamp(e){$j(this.eventInfo,e)}getAction(){let e=Sf(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){K_(this.eventInfo);return}TM(this.eventInfo,e.name,e.element)}getIsReplay(){return Hj(this.eventInfo)}setIsReplay(e){DM(this.eventInfo,e)}getResolved(){return SM(this.eventInfo)}setResolved(e){AM(this.eventInfo,e)}clone(){return new t(MM(this.eventInfo))}},qj={},Wj=/\s*;\s*/,Gj=re.CLICK,Q_=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&Ui(e)===re.CLICK&&kj(Df(e))?eE(e,re.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){SM(e)||(this.populateAction(e,CM(e)),AM(e,!0))}resolveParentAction(e){let n=Sf(e),r=n&&Tf(n);K_(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==bM(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Sf(e));)r=this.getParentNode(r);let i=Sf(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Ui(e)===re.MOUSEENTER||Ui(e)===re.MOUSELEAVE||Ui(e)===re.POINTERENTER||Ui(e)===re.POINTERLEAVE)))if(Fj(Df(e),Ui(e),Tf(i))){let o=Lj(Df(e),Tf(i));wM(e,o),IM(e,Tf(i))}else K_(e)}getParentNode(e){let n=e[J_.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[Ui(n)];i!==void 0&&TM(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=Tj(e);if(!n){let r=e.getAttribute(Ih.JSACTION);if(!r)n=qj,vM(e,n);else{if(n=Dj(r),!n){n={};let i=r.split(Wj);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let a=s.indexOf(Uj.EVENT_ACTION_SEPARATOR),u=a!==-1,l=u?s.substr(0,a).trim():Gj,h=u?s.substr(a+1).trim():s;n[l]=h}Sj(r,n)}vM(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},RM=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(RM||{}),Z_=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new Y_(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&Kj(r.element,n)&&Nj(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function Kj(t,e){return t.tagName==="A"&&(e.getEventType()===re.CLICK||e.getEventType()===re.CLICKMOD)}var PM=Symbol.for("propagationStopped"),tE={REPLAY:101};var Yj="`preventDefault` called during event replay.";var Qj="`composedPath` called during event replay.",Mf=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new Q_({clickModSupport:n}),this.dispatcher=new Z_(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&Xj(e),Zj(e);e.getAction();){if(eB(e),X_(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),Jj(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function Zj(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[PM]=!0,n()};qo(e,"stopPropagation",r),qo(e,"stopImmediatePropagation",r)}function Jj(t){return!!t.getEvent()[PM]}function Xj(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);qo(e,"target",n),qo(e,"eventPhase",tE.REPLAY),qo(e,"preventDefault",()=>{throw r(),new Error(Yj+"")}),qo(e,"composedPath",()=>{throw new Error(Qj+"")})}function eB(t){let e=t.getEvent(),n=t.getAction()?.element;n&&qo(e,"currentTarget",n,{configurable:!0})}function qo(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function OM(t,e){t.ecrd(n=>{e.dispatch(n)},RM.I_AM_THE_JSACTION_FRAMEWORK)}function tB(t){return t?.q??[]}function nB(t){t&&(_M(t.c,t.et,t.h),_M(t.c,t.etc,t.h,!0))}function _M(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var rB=!1,NM=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=rB;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=zj(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){DM(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&Aj.indexOf(n)>=0)return;let o=(a,u,l)=>{this.handleEvent(a,u,l)};this.eventHandlers[n]=o;let s=Rj(r||n);if(s!==n){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(n),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>u=>{o(n,u,a)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),nB(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let a=MM(i);eE(a,o[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function xM(t,e=window){return tB(e._ejsas?.[t])}function nE(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var jM=Symbol("InputSignalNode#UNSET"),DB=Z(F({},Td),{transformFn:void 0,applyValueToInputSignal(t,e){Vs(t,e)}});function BM(t,e){let n=Object.create(DB);n.value=t,n.transformFn=e?.transform;function r(){if(ks(n),n.value===jM){let i=null;throw new $(-950,i)}return n.value}return r[Kt]=n,r}var Nf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>hu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},SB=new H("");SB.__NG_ELEMENT_ID__=t=>{let e=jt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new $(204,!1)};function kM(t,e){return BM(t,e)}function AB(t){return BM(jM,t)}var $M=(kM.required=AB,kM);var rE=new H(""),MB=new H("");function Du(t){return!t.moduleRef}function RB(t){let e=Du(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ne);return n.run(()=>{Du(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(on),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Du(t)){let o=()=>e.destroy(),s=t.platformInjector.get(rE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(rE);s.add(o),t.moduleRef.onDestroy(()=>{ru(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return OB(r,n,()=>{let o=e.get(Xn),s=o.add(),a=e.get(U_);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Tu,Iu);if(aM(u||Iu),!e.get(MB,!0))return Du(t)?e.get(At):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Du(t)){let h=e.get(At);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return PB?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var PB;function OB(t,e,n){try{let r=n();return Fi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Pf=null;function NB(t=[],e){return Xe.create({name:e,providers:[{provide:Yc,useValue:"platform"},{provide:rE,useValue:new Set([()=>Pf=null])},...t]})}function xB(t=[]){if(Pf)return Pf;let e=NB(t);return Pf=e,eM(),kB(e),e}function kB(t){let e=t.get(nf,null);gt(t,()=>{e?.forEach(n=>n())})}function Su(){return!1}var Wo=(()=>{class t{static __NG_ELEMENT_ID__=FB}return t})();function FB(t){return LB(jt(),_e(),(t&16)===16)}function LB(t,e,n){if(Yr(t)&&!n){let r=Vn(t.index,e);return new xi(r,r)}else if(t.type&175){let r=e[rn];return new xi(r,e)}return null}function HM(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ke(8);try{let o=i?.injector??xB(r),s=[pM({}),{provide:dr,useExisting:W_},KT,...n||[]],a=new lu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return RB({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ke(9)}}var Rf=new WeakSet,FM="",Of=[];function LM(t){return t.get(i_,vS)}function zM(){let t=[{provide:i_,useFactory:()=>{let e=!0;{let n=M(Cr);e=!!window._ejsas?.[n]}return e&&Dn("NgEventReplay"),e}}];return t.push({provide:xn,useValue:()=>{let e=M(At),{injector:n}=e;if(!Rf.has(e)){let r=M(o_);if(LM(n)){TS();let i=n.get(Cr),o=IS(i,(s,a,u)=>{s.nodeType===Node.ELEMENT_NODE&&(_S(s,a,u),ES(s,r))});e.onDestroy(o)}}},multi:!0},{provide:Li,useFactory:()=>{let e=M(At),{injector:n}=e;return()=>{if(!LM(n)||Rf.has(e))return;Rf.add(e);let r=n.get(Cr);e.onDestroy(()=>{Rf.delete(e),nE(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(CS);VB(i,n);let o=n.get(o_);o.get(FM)?.forEach(wS),o.delete(FM);let s=i.instance;OS(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var VB=(t,e)=>{let n=e.get(Cr),r=window._ejsas[n],i=t.instance=new NM(new Af(r.c));for(let a of r.et)i.addEvent(a);for(let a of r.etc)i.addEvent(a);let o=xM(n);i.replayEarlyEventInfos(o),nE(n);let s=new Mf(a=>{UB(e,a,a.currentTarget)});OM(i,s)};function UB(t,e,n){let r=(n&&n.getAttribute(gu))??"";/d\d+/.test(r)?jB(r,t,e,n):e.eventPhase===tE.REPLAY&&s_(e,n)}function jB(t,e,n,r){Of.push({event:n,currentTarget:r}),rM(e,t,BB)}function BB(t){let e=[...Of],n=new Set(t);Of=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(gu);n.has(o)?s_(r,i):Of.push({event:r,currentTarget:i})}}var VM=!1;function $B(){VM||(VM=!0,MS(),oM(),lM(),sM(),ZA(),qA(),RA(),hA())}function HB(t){return t.whenStable()}function qM(){let t=[{provide:pu,useFactory:()=>{let e=!0;return e=!!M(Uo,{optional:!0})?.get(a_,null),e&&Dn("NgHydration"),e}},{provide:xn,useValue:()=>{DA(!1),M(pu)&&(kS(fu()),$B())},multi:!0}];return t.push({provide:r_,useFactory:()=>M(pu)},{provide:Li,useFactory:()=>{if(M(pu)){let e=M(At);return()=>{HB(e).then(()=>{e.destroyed||R_(e)})}}return()=>{}},multi:!0}),Dt(t)}function Go(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var KM=null;function jn(){return KM}function iE(t){KM??=t}var Au=class{},oE=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(YM),providedIn:"platform"})}return t})();var YM=(()=>{class t extends oE{_location;_history;_doc=M(bt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jn().getBaseHref(this._doc)}onPopState(n){let r=jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=jn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function QM(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function WM(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Bi(t){return t&&t[0]!=="?"?`?${t}`:t}var wa=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(JM),providedIn:"root"})}return t})(),ZM=new H(""),JM=(()=>{class t extends wa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return QM(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(de(oE),de(ZM,8))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ca=(()=>{class t{_subject=new Ge;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=WB(WM(GM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Bi(r))}normalize(n){return t.stripTrailingSlash(qB(this._basePath,GM(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Bi;static joinWithSlash=QM;static stripTrailingSlash=WM;static \u0275fac=function(r){return new(r||t)(de(wa))};static \u0275prov=K({token:t,factory:()=>zB(),providedIn:"root"})}return t})();function zB(){return new Ca(de(wa))}function qB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function GM(t){return t.replace(/\/index.html$/,"")}function WB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Yt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(Yt||{}),$e=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})($e||{}),fn=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(fn||{}),ni={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function eR(t){return Sn(t)[ct.LocaleId]}function tR(t,e,n){let r=Sn(t),i=[r[ct.DayPeriodsFormat],r[ct.DayPeriodsStandalone]],o=Bn(i,e);return Bn(o,n)}function nR(t,e,n){let r=Sn(t),i=[r[ct.DaysFormat],r[ct.DaysStandalone]],o=Bn(i,e);return Bn(o,n)}function rR(t,e,n){let r=Sn(t),i=[r[ct.MonthsFormat],r[ct.MonthsStandalone]],o=Bn(i,e);return Bn(o,n)}function iR(t,e){let r=Sn(t)[ct.Eras];return Bn(r,e)}function Mu(t,e){let n=Sn(t);return Bn(n[ct.DateFormat],e)}function Ru(t,e){let n=Sn(t);return Bn(n[ct.TimeFormat],e)}function Pu(t,e){let r=Sn(t)[ct.DateTimeFormat];return Bn(r,e)}function Ou(t,e){let n=Sn(t),r=n[ct.NumberSymbols][e];if(typeof r>"u"){if(e===ni.CurrencyDecimal)return n[ct.NumberSymbols][ni.Decimal];if(e===ni.CurrencyGroup)return n[ct.NumberSymbols][ni.Group]}return r}function oR(t){if(!t[ct.ExtraData])throw new $(2303,!1)}function sR(t){let e=Sn(t);return oR(e),(e[ct.ExtraData][2]||[]).map(r=>typeof r=="string"?sE(r):[sE(r[0]),sE(r[1])])}function aR(t,e,n){let r=Sn(t);oR(r);let i=[r[ct.ExtraData][0],r[ct.ExtraData][1]],o=Bn(i,e)||[];return Bn(o,n)||[]}function Bn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new $(2304,!1)}function sE(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var GB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xf={},KB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function cR(t,e,n,r){let i=r3(t);e=ti(n,e)||e;let s=[],a;for(;e;)if(a=KB.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=lR(r,u),i=n3(i,r));let l="";return s.forEach(h=>{let p=e3(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Uf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ti(t,e){let n=eR(t);if(xf[n]??={},xf[n][e])return xf[n][e];let r="";switch(e){case"shortDate":r=Mu(t,fn.Short);break;case"mediumDate":r=Mu(t,fn.Medium);break;case"longDate":r=Mu(t,fn.Long);break;case"fullDate":r=Mu(t,fn.Full);break;case"shortTime":r=Ru(t,fn.Short);break;case"mediumTime":r=Ru(t,fn.Medium);break;case"longTime":r=Ru(t,fn.Long);break;case"fullTime":r=Ru(t,fn.Full);break;case"short":let i=ti(t,"shortTime"),o=ti(t,"shortDate");r=kf(Pu(t,fn.Short),[i,o]);break;case"medium":let s=ti(t,"mediumTime"),a=ti(t,"mediumDate");r=kf(Pu(t,fn.Medium),[s,a]);break;case"long":let u=ti(t,"longTime"),l=ti(t,"longDate");r=kf(Pu(t,fn.Long),[u,l]);break;case"full":let h=ti(t,"fullTime"),p=ti(t,"fullDate");r=kf(Pu(t,fn.Full),[h,p]);break}return r&&(xf[n][e]=r),r}function kf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function nr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function YB(t,e){return nr(t,3).substring(0,e)}function vt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=QB(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return YB(a,e);let u=Ou(s,ni.MinusSign);return nr(a,e,u,r,i)}}function QB(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function qe(t,e,n=Yt.Format,r=!1){return function(i,o){return ZB(i,o,t,e,n,r)}}function ZB(t,e,n,r,i,o){switch(n){case 2:return rR(e,i,r)[t.getMonth()];case 1:return nR(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=sR(e),h=aR(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[v,I]=g,N=s>=v.hours&&a>=v.minutes,x=s<I.hours||s===I.hours&&a<I.minutes;if(v.hours<I.hours){if(N&&x)return!0}else if(N||x)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return tR(e,i,r)[s<12?0:1];case 3:return iR(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new $(2302,!1)}}function Ff(t){return function(e,n,r){let i=-1*r,o=Ou(n,ni.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+nr(s,2,o)+nr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+nr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+nr(s,2,o)+":"+nr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+nr(s,2,o)+":"+nr(Math.abs(i%60),2,o);default:throw new $(2310,!1)}}}var JB=0,Vf=4;function XB(t){let e=Uf(t,JB,1).getDay();return Uf(t,0,1+(e<=Vf?Vf:Vf+7)-e)}function uR(t){let e=t.getDay(),n=e===0?-3:Vf-e;return Uf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function aE(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=uR(n),s=XB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return nr(i,t,Ou(r,ni.MinusSign))}}function Lf(t,e=!1){return function(n,r){let o=uR(n).getFullYear();return nr(o,t,Ou(r,ni.MinusSign),e)}}var cE={};function e3(t){if(cE[t])return cE[t];let e;switch(t){case"G":case"GG":case"GGG":e=qe(3,$e.Abbreviated);break;case"GGGG":e=qe(3,$e.Wide);break;case"GGGGG":e=qe(3,$e.Narrow);break;case"y":e=vt(0,1,0,!1,!0);break;case"yy":e=vt(0,2,0,!0,!0);break;case"yyy":e=vt(0,3,0,!1,!0);break;case"yyyy":e=vt(0,4,0,!1,!0);break;case"Y":e=Lf(1);break;case"YY":e=Lf(2,!0);break;case"YYY":e=Lf(3);break;case"YYYY":e=Lf(4);break;case"M":case"L":e=vt(1,1,1);break;case"MM":case"LL":e=vt(1,2,1);break;case"MMM":e=qe(2,$e.Abbreviated);break;case"MMMM":e=qe(2,$e.Wide);break;case"MMMMM":e=qe(2,$e.Narrow);break;case"LLL":e=qe(2,$e.Abbreviated,Yt.Standalone);break;case"LLLL":e=qe(2,$e.Wide,Yt.Standalone);break;case"LLLLL":e=qe(2,$e.Narrow,Yt.Standalone);break;case"w":e=aE(1);break;case"ww":e=aE(2);break;case"W":e=aE(1,!0);break;case"d":e=vt(2,1);break;case"dd":e=vt(2,2);break;case"c":case"cc":e=vt(7,1);break;case"ccc":e=qe(1,$e.Abbreviated,Yt.Standalone);break;case"cccc":e=qe(1,$e.Wide,Yt.Standalone);break;case"ccccc":e=qe(1,$e.Narrow,Yt.Standalone);break;case"cccccc":e=qe(1,$e.Short,Yt.Standalone);break;case"E":case"EE":case"EEE":e=qe(1,$e.Abbreviated);break;case"EEEE":e=qe(1,$e.Wide);break;case"EEEEE":e=qe(1,$e.Narrow);break;case"EEEEEE":e=qe(1,$e.Short);break;case"a":case"aa":case"aaa":e=qe(0,$e.Abbreviated);break;case"aaaa":e=qe(0,$e.Wide);break;case"aaaaa":e=qe(0,$e.Narrow);break;case"b":case"bb":case"bbb":e=qe(0,$e.Abbreviated,Yt.Standalone,!0);break;case"bbbb":e=qe(0,$e.Wide,Yt.Standalone,!0);break;case"bbbbb":e=qe(0,$e.Narrow,Yt.Standalone,!0);break;case"B":case"BB":case"BBB":e=qe(0,$e.Abbreviated,Yt.Format,!0);break;case"BBBB":e=qe(0,$e.Wide,Yt.Format,!0);break;case"BBBBB":e=qe(0,$e.Narrow,Yt.Format,!0);break;case"h":e=vt(3,1,-12);break;case"hh":e=vt(3,2,-12);break;case"H":e=vt(3,1);break;case"HH":e=vt(3,2);break;case"m":e=vt(4,1);break;case"mm":e=vt(4,2);break;case"s":e=vt(5,1);break;case"ss":e=vt(5,2);break;case"S":e=vt(6,1);break;case"SS":e=vt(6,2);break;case"SSS":e=vt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Ff(0);break;case"ZZZZZ":e=Ff(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ff(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ff(2);break;default:return null}return cE[t]=e,e}function lR(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function t3(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function n3(t,e,n){let i=t.getTimezoneOffset(),o=lR(e,i);return t3(t,-1*(o-i))}function r3(t){if(XM(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Uf(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(GB))return i3(r)}let e=new Date(t);if(!XM(e))throw new $(2311,!1);return e}function i3(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function XM(t){return t instanceof Date&&!isNaN(t.valueOf())}function o3(t,e){return new $(2100,!1)}var s3="mediumDate",dR=new H(""),hR=new H(""),uE=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??s3,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return cR(n,s,o||this.locale,a)}catch(s){throw o3(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Ce(Tu,16),Ce(dR,24),Ce(hR,24))};static \u0275pipe=x_({name:"date",type:t,pure:!0})}return t})();var Rt=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ir({type:t});static \u0275inj=Qn({})}return t})();function lE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Nu=class{};var dE="browser";function fR(t){return t===dE}var xu=class{_doc;constructor(e){this._doc=e}manager},jf=(()=>{class t extends xu{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(de(bt))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),$f=new H(""),mE=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof jf));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof jf);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(de($f),de(Ne))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),hE="ng-app-id";function gR(t){for(let e of t)e.remove()}function mR(t,e){let n=e.createElement("style");return n.textContent=t,n}function c3(t,e,n,r){let i=t.head?.querySelectorAll(`style[${hE}="${e}"],link[${hE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(hE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function pE(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var vE=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,c3(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,mR);r?.forEach(i=>this.addUsage(i,this.external,pE))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(gR(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gR(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,mR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,pE(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(de(bt),de(Cr),de(rf,8),de(Xr))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),fE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yE=/%COMP%/g;var yR="%COMP%",u3=`_nghost-${yR}`,l3=`_ngcontent-${yR}`,d3=!0,h3=new H("",{providedIn:"root",factory:()=>d3});function f3(t){return l3.replace(yE,t)}function p3(t){return u3.replace(yE,t)}function _R(t,e){return e.map(n=>n.replace(yE,t))}var _E=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new ku(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Bf?i.applyToHost(n):i instanceof Fu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Jr.Emulated:o=new Bf(u,l,r,this.appId,h,s,a,p,g);break;case Jr.ShadowDom:return new gE(u,l,n,r,s,a,this.nonce,p,g);default:o=new Fu(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(de(mE),de(vE),de(Cr),de(h3),de(bt),de(Ne),de(rf),de(jo,8))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),ku=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(fE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(vR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(vR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=fE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=fE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(yr.DashCase|yr.Important)?e.style.setProperty(n,r,i&yr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&yr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=jn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function vR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gE=class extends ku{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_R(i.id,h);for(let g of h){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=g,this.shadowRoot.appendChild(v)}let p=i.getExternalStyles?.();if(p)for(let g of p){let v=pE(g,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fu=class extends ku{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?_R(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ko.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Bf=class extends Fu{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=f3(h),this.hostAttr=p3(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Hf=class t extends Au{supportsDOMEvents=!0;static makeCurrent(){iE(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=g3();return n==null?null:m3(n)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return lE(document.cookie,e)}},Lu=null;function g3(){return Lu=Lu||document.head.querySelector("base"),Lu?Lu.getAttribute("href"):null}function m3(t){return new URL(t,document.baseURI).pathname}var v3=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),ER=["alt","control","meta","shift"],y3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wR=(()=>{class t extends xu{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ER.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=y3[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ER.forEach(s=>{if(s!==i){let a=_3[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(de(bt))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();function EE(t,e,n){let r=F({rootComponent:t,platformRef:n?.platformRef},E3(e));return HM(r)}function E3(t){return{appProviders:[...T3,...t?.providers??[]],platformProviders:b3}}function w3(){Hf.makeCurrent()}function C3(){return new Kn}function I3(){return e_(document),document}var b3=[{provide:Xr,useValue:dE},{provide:nf,useValue:w3,multi:!0},{provide:bt,useFactory:I3}];var T3=[{provide:Yc,useValue:"root"},{provide:Kn,useFactory:C3},{provide:$f,useClass:jf,multi:!0,deps:[bt]},{provide:$f,useClass:wR,multi:!0,deps:[bt]},_E,vE,mE,{provide:Fo,useExisting:_E},{provide:Nu,useClass:v3},[]];var Vu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var D3="X-Request-URL",S3="text/plain",A3="application/json",dse=`${A3}, ${S3}, */*`;var CE=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(CE||{}),wE=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Vu,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}};var zf=class t extends wE{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=CE.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}};var CR=new H("");var hse=RegExp(`^${D3}:`,"m");var M3=new H(""),R3="b",P3="h",O3="s",N3="st",x3="u",k3="rt",IE=new H(""),F3=["GET","HEAD"];function L3(t,e){let v=M(IE),{isCacheActive:n}=v,r=wb(v,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!F3.includes(o)||!r.includeRequestsWithAuthHeaders&&V3(t)||r.filter?.(t)===!1)return e(t);let s=M(Uo);if(M(M3,{optional:!0}))throw new $(2803,!1);let u=t.url,l=U3(t,u),h=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),h){let{[R3]:I,[k3]:N,[P3]:x,[O3]:j,[N3]:J,[x3]:ce}=h,xe=I;switch(N){case"arraybuffer":xe=new TextEncoder().encode(I).buffer;break;case"blob":xe=new Blob([I]);break}let Ft=new Vu(x);return ee(new zf({body:xe,headers:Ft,status:j,statusText:J,url:ce}))}return e(t)}function V3(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function IR(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function U3(t,e){let{params:n,method:r,responseType:i}=t,o=IR(n),s=t.serializeBody();s instanceof URLSearchParams?s=IR(s):typeof s!="string"&&(s="");let a=[r,i,e,s,o].join("|"),u=j3(a);return u}function j3(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function bR(t){return[{provide:IE,useFactory:()=>(Dn("NgHttpTransferCache"),F({isCacheActive:!0},t))},{provide:CR,useValue:L3,multi:!0},{provide:Li,multi:!0,useFactory:()=>{let e=M(At),n=M(IE);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var TR=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(de(bt))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qf=(function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t})(qf||{});function B3(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function DR(){return B3(qf.EventReplay,zM())}function SR(...t){let e=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);let r=n.has(qf.HttpTransferCacheOptions);return Dt([[],[],qM(),n.has(qf.NoHttpTransferCache)||r?[]:bR({}),e])}var he="primary",Xu=Symbol("RouteTitle"),AE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Qo(t){return new AE(t)}function kR(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function H3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Tr(t[n],e[n]))return!1;return!0}function Tr(t,e){let n=t?ME(t):void 0,r=e?ME(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!FR(t[i],e[i]))return!1;return!0}function ME(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function FR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function LR(t){return t.length>0?t[t.length-1]:null}function ii(t){return tv(t)?t:Fi(t)?Ae(Promise.resolve(t)):ee(t)}var z3={exact:UR,subset:jR},VR={exact:q3,subset:W3,ignored:()=>!0};function AR(t,e,n){return z3[n.paths](t.root,e.root,n.matrixParams)&&VR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function q3(t,e){return Tr(t,e)}function UR(t,e,n){if(!Ko(t.segments,e.segments)||!Kf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!UR(t.children[r],e.children[r],n))return!1;return!0}function W3(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>FR(t[n],e[n]))}function jR(t,e,n){return BR(t,e,e.segments,n)}function BR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ko(i,n)||e.hasChildren()||!Kf(i,n,r))}else if(t.segments.length===n.length){if(!Ko(t.segments,n)||!Kf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!jR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ko(t.segments,i)||!Kf(t.segments,i,r)||!t.children[he]?!1:BR(t.children[he],e,o,r)}}function Kf(t,e,n){return e.every((r,i)=>VR[n](t[i].parameters,r.parameters))}var Sr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Fe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return Y3.serialize(this)}},Fe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yf(this)}},$i=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return HR(this)}};function G3(t,e){return Ko(t,e)&&t.every((n,r)=>Tr(n.parameters,e[r].parameters))}function Ko(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function K3(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===he&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==he&&(n=n.concat(e(i,r)))}),n}var el=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>new Zo,providedIn:"root"})}return t})(),Zo=class{parse(e){let n=new PE(e);return new Sr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Uu(e.root,!0)}`,r=J3(e.queryParams),i=typeof e.fragment=="string"?`#${Q3(e.fragment)}`:"";return`${n}${r}${i}`}},Y3=new Zo;function Yf(t){return t.segments.map(e=>HR(e)).join("/")}function Uu(t,e){if(!t.hasChildren())return Yf(t);if(e){let n=t.children[he]?Uu(t.children[he],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${Uu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=K3(t,(r,i)=>i===he?[Uu(t.children[he],!1)]:[`${i}:${Uu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[he]!=null?`${Yf(t)}/${n[0]}`:`${Yf(t)}/(${n.join("//")})`}}function $R(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(t){return $R(t).replace(/%3B/gi,";")}function Q3(t){return encodeURI(t)}function RE(t){return $R(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(t){return decodeURIComponent(t)}function MR(t){return Qf(t.replace(/\+/g,"%20"))}function HR(t){return`${RE(t.path)}${Z3(t.parameters)}`}function Z3(t){return Object.entries(t).map(([e,n])=>`;${RE(e)}=${RE(n)}`).join("")}function J3(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wf(n)}=${Wf(i)}`).join("&"):`${Wf(n)}=${Wf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var X3=/^[^\/()?;#]+/;function bE(t){let e=t.match(X3);return e?e[0]:""}var e4=/^[^\/()?;=#]+/;function t4(t){let e=t.match(e4);return e?e[0]:""}var n4=/^[^=?&#]+/;function r4(t){let e=t.match(n4);return e?e[0]:""}var i4=/^[^&#]+/;function o4(t){let e=t.match(i4);return e?e[0]:""}var PE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new Fe(e,n)),r}parseSegment(){let e=bE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new $i(Qf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=t4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=bE(this.remaining);i&&(r=i,this.capture(r))}e[Qf(n)]=Qf(r)}parseQueryParam(e){let n=r4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=o4(this.remaining);s&&(r=s,this.capture(r))}let i=MR(n),o=MR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();n[o??he]=Object.keys(s).length===1&&s[he]?s[he]:new Fe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function zR(t){return t.segments.length>0?new Fe([],{[he]:t}):t}function qR(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=qR(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Fe(t.segments,e);return s4(n)}function s4(t){if(t.numberOfChildren===1&&t.children[he]){let e=t.children[he];return new Fe(t.segments.concat(e.segments),e.children)}return t}function Hi(t){return t instanceof Sr}function WR(t,e,n=null,r=null){let i=GR(t);return KR(i,e,n,r)}function GR(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Fe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=zR(r);return e??i}function KR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return TE(i,i,i,n,r);let o=a4(e);if(o.toRoot())return TE(i,i,new Fe([],{}),n,r);let s=c4(o,i,t),a=s.processChildren?Bu(s.segmentGroup,s.index,o.commands):QR(s.segmentGroup,s.index,o.commands);return TE(i,s.segmentGroup,a,n,r)}function Zf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function zu(t){return typeof t=="object"&&t!=null&&t.outlets}function TE(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=YR(t,e,n);let a=zR(qR(s));return new Sr(a,o,i)}function YR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=YR(o,e,n)}),new Fe(t.segments,r)}var Jf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zf(r[0]))throw new $(4003,!1);let i=r.find(zu);if(i&&i!==LR(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function a4(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Jf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Jf(n,e,r)}var Ta=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function c4(t,e,n){if(t.isAbsolute)return new Ta(e,!0,0);if(!n)return new Ta(e,!1,NaN);if(n.parent===null)return new Ta(n,!0,0);let r=Zf(t.commands[0])?0:1,i=n.segments.length-1+r;return u4(n,i,t.numberOfDoubleDots)}function u4(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Ta(r,!1,i-o)}function l4(t){return zu(t[0])?t[0].outlets:{[he]:t}}function QR(t,e,n){if(t??=new Fe([],{}),t.segments.length===0&&t.hasChildren())return Bu(t,e,n);let r=d4(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Fe(t.segments.slice(0,r.pathIndex),{});return o.children[he]=new Fe(t.segments.slice(r.pathIndex),t.children),Bu(o,0,i)}else return r.match&&i.length===0?new Fe(t.segments,{}):r.match&&!t.hasChildren()?OE(t,e,n):r.match?Bu(t,0,i):OE(t,e,n)}function Bu(t,e,n){if(n.length===0)return new Fe(t.segments,{});{let r=l4(n),i={};if(Object.keys(r).some(o=>o!==he)&&t.children[he]&&t.numberOfChildren===1&&t.children[he].segments.length===0){let o=Bu(t.children[he],e,n);return new Fe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QR(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Fe(t.segments,i)}}function d4(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(zu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!PR(u,l,s))return o;r+=2}else{if(!PR(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function OE(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(zu(o)){let u=h4(o.outlets);return new Fe(r,u)}if(i===0&&Zf(n[0])){let u=t.segments[e];r.push(new $i(u.path,RR(n[0]))),i++;continue}let s=zu(o)?o.outlets[he]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Zf(a)?(r.push(new $i(s,RR(a))),i+=2):(r.push(new $i(s,{})),i++)}return new Fe(r,{})}function h4(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=OE(new Fe([],{}),0,r))}),e}function RR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function PR(t,e,n){return t==n.path&&Tr(e,n.parameters)}var $u="imperative",Pt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Pt||{}),Mn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Jo=class extends Mn{type=Pt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Mn{urlAfterRedirects;type=Pt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sn=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(sn||{}),qu=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(qu||{}),Dr=class extends Mn{reason;code;type=Pt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ri=class extends Mn{reason;code;type=Pt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Sa=class extends Mn{error;target;type=Pt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wu=class extends Mn{urlAfterRedirects;state;type=Pt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xf=class extends Mn{urlAfterRedirects;state;type=Pt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ep=class extends Mn{urlAfterRedirects;state;shouldActivate;type=Pt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tp=class extends Mn{urlAfterRedirects;state;type=Pt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},np=class extends Mn{urlAfterRedirects;state;type=Pt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rp=class{route;type=Pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ip=class{route;type=Pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},op=class{snapshot;type=Pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sp=class{snapshot;type=Pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ap=class{snapshot;type=Pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cp=class{snapshot;type=Pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Gu=class{},Aa=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function f4(t){return!(t instanceof Gu)&&!(t instanceof Aa)}function p4(t,e){return t.providers&&!t._injector&&(t._injector=va(t.providers,e,`Route: ${t.path}`)),t._injector??e}function rr(t){return t.outlet||he}function g4(t,e){let n=t.filter(r=>rr(r)===e);return n.push(...t.filter(r=>rr(r)!==e)),n}function Pa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var up=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Pa(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Oa(this.rootInjector)}},Oa=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new up(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(de(it))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=NE(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=NE(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=xE(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xE(e,this._root).map(n=>n.value)}};function NE(t,e){if(t===e.value)return e;for(let n of e.children){let r=NE(t,n);if(r)return r}return null}function xE(t,e){if(t===e.value)return[e];for(let n of e.children){let r=xE(t,n);if(r.length)return r.unshift(e),r}return[]}var An=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ba(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ku=class extends lp{snapshot;constructor(e,n){super(e),this.snapshot=n,$E(this,e)}toString(){return this.snapshot.toString()}};function ZR(t){let e=m4(t),n=new Vt([new $i("",{})]),r=new Vt({}),i=new Vt({}),o=new Vt({}),s=new Vt(""),a=new ir(n,r,o,s,i,he,t,e.root);return a.snapshot=e.root,new Ku(new An(a,[]),e)}function m4(t){let e={},n={},r={},o=new Yo([],e,r,"",n,he,t,null,{});return new Yu("",new An(o,[]))}var ir=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Y(l=>l[Xu]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&XR(i)&&(r.resolve[Xu]=i.title),r}var Yo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Yu=class extends lp{url;constructor(e,n){super(n),this.url=e,$E(this,n)}toString(){return JR(this._root)}};function $E(t,e){e.value._routerState=t,e.children.forEach(n=>$E(t,n))}function JR(t){let e=t.children.length>0?` { ${t.children.map(JR).join(", ")} } `:"";return`${t.value}${e}`}function DE(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Tr(e.params,n.params)||t.paramsSubject.next(n.params),H3(e.url,n.url)||t.urlSubject.next(n.url),Tr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kE(t,e){let n=Tr(t.params,e.params)&&G3(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||kE(t.parent,e.parent))}function XR(t){return typeof t.title=="string"||t.title===null}var eP=new H(""),tl=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=he;activateEvents=new at;deactivateEvents=new at;attachEvents=new at;detachEvents=new at;routerOutletData=$M();parentContexts=M(Oa);location=M(Bo);changeDetector=M(Wo);inputBinder=M(gp,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new FE(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=et({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wr]})}return t})(),FE=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===ir?this.route:e===Oa?this.childContexts:e===eP?this.outletData:this.parent.get(e,n)}},gp=new H("");var HE=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Tt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&V(0,"router-outlet")},dependencies:[tl],encapsulation:2})}return t})();function zE(t){let e=t.children&&t.children.map(zE),n=e?Z(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=HE),n}function v4(t,e,n){let r=Qu(t,e._root,n?n._root:void 0);return new Ku(r,e)}function Qu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=y4(t,e,n);return new An(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Qu(t,a)),s}}let r=_4(e.value),i=e.children.map(o=>Qu(t,o));return new An(r,i)}}function y4(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Qu(t,r,i);return Qu(t,r)})}function _4(t){return new ir(new Vt(t.url),new Vt(t.params),new Vt(t.queryParams),new Vt(t.fragment),new Vt(t.data),t.outlet,t.component,t)}var Ma=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},tP="ngNavigationCancelingError";function hp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nP(!1,sn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function nP(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[tP]=!0,n.cancellationCode=e,n}function E4(t){return rP(t)&&Hi(t.url)}function rP(t){return!!t&&t[tP]}var w4=(t,e,n,r)=>Y(i=>(new LE(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),LE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),DE(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ba(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ba(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ba(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new sp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(DE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Da=class{component;route;constructor(e,n){this.component=e,this.route=n}};function C4(t,e,n){let r=t._root,i=e?e._root:null;return ju(r,i,n,[r.value])}function I4(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Na(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!_v(t)?t:e.get(t):r}function ju(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ba(e);return t.children.forEach(s=>{b4(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Hu(a,n.getContext(s),i)),i}function b4(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=T4(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new fp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ju(t,e,a?a.children:null,r,i):ju(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Da(a.outlet.component,s))}else s&&Hu(e,a,i),i.canActivateChecks.push(new fp(r)),o.component?ju(t,null,a?a.children:null,r,i):ju(t,null,n,r,i);return i}function T4(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ko(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ko(t.url,e.url)||!Tr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kE(t,e)||!Tr(t.queryParams,e.queryParams);case"paramsChange":default:return!kE(t,e)}}function Hu(t,e,n){let r=ba(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Hu(s,e.children.getContext(o),n):Hu(s,null,n):Hu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Da(e.outlet.component,i)):n.canDeactivateChecks.push(new Da(null,i)):n.canDeactivateChecks.push(new Da(null,i))}function nl(t){return typeof t=="function"}function D4(t){return typeof t=="boolean"}function S4(t){return t&&nl(t.canLoad)}function A4(t){return t&&nl(t.canActivate)}function M4(t){return t&&nl(t.canActivateChild)}function R4(t){return t&&nl(t.canDeactivate)}function P4(t){return t&&nl(t.canMatch)}function iP(t){return t instanceof Hr||t?.name==="EmptyError"}var Gf=Symbol("INITIAL_VALUE");function Ra(){return It(t=>Yd(t.map(e=>e.pipe(en(1),Jd(Gf)))).pipe(Y(e=>{for(let n of e)if(n!==!0){if(n===Gf)return Gf;if(n===!1||O4(n))return n}return!0}),pt(e=>e!==Gf),en(1)))}function O4(t){return Hi(t)||t instanceof Ma}function N4(t,e){return ft(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ee(Z(F({},n),{guardsResult:!0})):x4(s,r,i,t).pipe(ft(a=>a&&D4(a)?k4(r,o,t,e):ee(a)),Y(a=>Z(F({},n),{guardsResult:a})))})}function x4(t,e,n,r){return Ae(t).pipe(ft(i=>j4(i.component,i.route,n,e,r)),qr(i=>i!==!0,!0))}function k4(t,e,n,r){return Ae(e).pipe(vo(i=>Zs(L4(i.route.parent,r),F4(i.route,r),U4(t,i.path,n),V4(t,i.route,n))),qr(i=>i!==!0,!0))}function F4(t,e){return t!==null&&e&&e(new ap(t)),ee(!0)}function L4(t,e){return t!==null&&e&&e(new op(t)),ee(!0)}function V4(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(o=>$c(()=>{let s=Pa(e)??n,a=Na(o,s),u=A4(a)?a.canActivate(e,t):gt(s,()=>a(e,t));return ii(u).pipe(qr())}));return ee(i).pipe(Ra())}function U4(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>I4(s)).filter(s=>s!==null).map(s=>$c(()=>{let a=s.guards.map(u=>{let l=Pa(s.node)??n,h=Na(u,l),p=M4(h)?h.canActivateChild(r,t):gt(l,()=>h(r,t));return ii(p).pipe(qr())});return ee(a).pipe(Ra())}));return ee(o).pipe(Ra())}function j4(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ee(!0);let s=o.map(a=>{let u=Pa(e)??i,l=Na(a,u),h=R4(l)?l.canDeactivate(t,e,n,r):gt(u,()=>l(t,e,n,r));return ii(h).pipe(qr())});return ee(s).pipe(Ra())}function B4(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let o=i.map(s=>{let a=Na(s,t),u=S4(a)?a.canLoad(e,n):gt(t,()=>a(e,n));return ii(u)});return ee(o).pipe(Ra(),oP(r))}function oP(t){return Rd(rt(e=>{if(typeof e!="boolean")throw hp(t,e)}),Y(e=>e===!0))}function $4(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let o=i.map(s=>{let a=Na(s,t),u=P4(a)?a.canMatch(e,n):gt(t,()=>a(e,n));return ii(u)});return ee(o).pipe(Ra(),oP(r))}var Zu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ju=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ia(t){return Ys(new Zu(t))}function H4(t){return Ys(new $(4e3,!1))}function z4(t){return Ys(nP(!1,sn.GuardRejected))}var VE=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[he])return H4(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,n,r,i,o){return q4(n,i,o).pipe(Y(s=>{if(s instanceof Sr)throw new Ju(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ju(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Sr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Fe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function q4(t,e,n){if(typeof t=="string")return ee(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return ii(gt(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var UE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W4(t,e,n,r,i){let o=sP(t,e,n);return o.matched?(r=p4(e,r),$4(r,e,n,i).pipe(Y(s=>s===!0?o:F({},UE)))):ee(o)}function sP(t,e,n){if(e.path==="**")return G4(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},UE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||kR)(n,t,e);if(!i)return F({},UE);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function G4(t){return{matched:!0,parameters:t.length>0?LR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OR(t,e,n,r){return n.length>0&&Q4(t,n,r)?{segmentGroup:new Fe(e,Y4(r,new Fe(n,t.children))),slicedSegments:[]}:n.length===0&&Z4(t,n,r)?{segmentGroup:new Fe(t.segments,K4(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Fe(t.segments,t.children),slicedSegments:n}}function K4(t,e,n,r){let i={};for(let o of n)if(mp(t,e,o)&&!r[rr(o)]){let s=new Fe([],{});i[rr(o)]=s}return F(F({},r),i)}function Y4(t,e){let n={};n[he]=e;for(let r of t)if(r.path===""&&rr(r)!==he){let i=new Fe([],{});n[rr(r)]=i}return n}function Q4(t,e,n){return n.some(r=>mp(t,e,r)&&rr(r)!==he)}function Z4(t,e,n){return n.some(r=>mp(t,e,r))}function mp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function J4(t,e,n){return e.length===0&&!t.children[n]}var jE=class{};function X4(t,e,n,r,i,o,s="emptyOnly"){return new BE(t,e,n,r,i,s,o).recognize()}var e$=31,BE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new VE(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=OR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:n,rootSnapshot:r})=>{let i=new An(r,n),o=new Yu("",i),s=WR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Yo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,n).pipe(Y(r=>({children:r,rootSnapshot:n})),ln(r=>{if(r instanceof Ju)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Zu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof An?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(vo(s=>{let a=r.children[s],u=g4(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Zd((s,a)=>(s.push(...a),s)),bi(null),rv(),ft(s=>{if(s===null)return Ia(r);let a=aP(s);return t$(a),ee(a)}))}processSegment(e,n,r,i,o,s,a){return Ae(n).pipe(vo(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(ln(l=>{if(l instanceof Zu)return ee(null);throw l}))),qr(u=>!!u),ln(u=>{if(iP(u))return J4(r,i,o)?ee(new jE):Ia(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return rr(r)!==s&&(s===he||!mp(i,o,r))?Ia(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ia(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=sP(n,i,o);if(!u)return Ia(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>e$&&(this.allowRedirects=!1));let v=new Yo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,NR(i),rr(i),i.component??i._loadedComponent??null,i,xR(i)),I=dp(v,a,this.paramsInheritanceStrategy);return v.params=Object.freeze(I.params),v.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e).pipe(It(x=>this.applyRedirects.lineralizeSegments(i,x)),ft(x=>this.processSegment(e,r,n,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=W4(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(It(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(It(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:v}=u,I=new Yo(g,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,NR(r),rr(r),r.component??r._loadedComponent??null,r,xR(r)),N=dp(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(N.params),I.data=Object.freeze(N.data);let{segmentGroup:x,slicedSegments:j}=OR(n,g,v,l);if(j.length===0&&x.hasChildren())return this.processChildren(h,l,x,I).pipe(Y(ce=>new An(I,ce)));if(l.length===0&&j.length===0)return ee(new An(I,[]));let J=rr(r)===o;return this.processSegment(h,l,x,j,J?he:o,!0,I).pipe(Y(ce=>new An(I,ce instanceof An?[ce]:[])))}))):Ia(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):B4(e,n,r,this.urlSerializer).pipe(ft(i=>i?this.configLoader.loadChildren(e,n).pipe(rt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):z4(n))):ee({routes:[],injector:e})}};function t$(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}function n$(t){let e=t.value.routeConfig;return e&&e.path===""}function aP(t){let e=[],n=new Set;for(let r of t){if(!n$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=aP(r.children);e.push(new An(r.value,i))}return e.filter(r=>!n.has(r))}function NR(t){return t.data||{}}function xR(t){return t.resolve||{}}function r$(t,e,n,r,i,o){return ft(s=>X4(t,e,n,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:u})=>Z(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function i$(t,e){return ft(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of cP(u))s.add(l);let a=0;return Ae(s).pipe(vo(u=>o.has(u)?o$(u,r,t,e):(u.data=dp(u,u.parent,t).resolve,ee(void 0))),rt(()=>a++),Js(1),ft(u=>a===s.size?ee(n):cn))})}function cP(t){let e=t.children.map(n=>cP(n)).flat();return[t,...e]}function o$(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!XR(i)&&(o[Xu]=i.title),$c(()=>(t.data=dp(t,t.parent,n).resolve,s$(o,t,e,r).pipe(Y(s=>(t._resolvedData=s,t.data=F(F({},t.data),s),null)))))}function s$(t,e,n,r){let i=ME(t);if(i.length===0)return ee({});let o={};return Ae(i).pipe(ft(s=>a$(t[s],e,n,r).pipe(qr(),rt(a=>{if(a instanceof Ma)throw hp(new Zo,a);o[s]=a}))),Js(1),Y(()=>o),ln(s=>iP(s)?cn:Ys(s)))}function a$(t,e,n,r){let i=Pa(e)??r,o=Na(t,i),s=o.resolve?o.resolve(e,n):gt(i,()=>o(e,n));return ii(s)}function SE(t){return It(e=>{let n=t(e);return n?Ae(n).pipe(Y(()=>e)):ee(e)})}var qE=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(n){return n.data[Xu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(uP),providedIn:"root"})}return t})(),uP=(()=>{class t extends qE{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(de(TR))};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xa=new H("",{providedIn:"root",factory:()=>({})}),rl=new H(""),lP=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(q_);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ii(gt(n,()=>r.loadComponent())).pipe(Y(hP),It(fP),rt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Hc(()=>{this.componentLoaders.delete(r)})),o=new qs(i,()=>new Ge).pipe(zs());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=dP(r,this.compiler,n,this.onLoadEndListener).pipe(Hc(()=>{this.childrenLoaders.delete(r)})),s=new qs(o,()=>new Ge).pipe(zs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dP(t,e,n,r){return ii(gt(n,()=>t.loadChildren())).pipe(Y(hP),It(fP),ft(i=>i instanceof Cf||Array.isArray(i)?ee(i):Ae(e.compileModuleAsync(i))),Y(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(rl,[],{optional:!0,self:!0}).flat()),{routes:s.map(zE),injector:o}}))}function c$(t){return t&&typeof t=="object"&&"default"in t}function hP(t){return c$(t)?t.default:t}function fP(t){return ee(t)}var vp=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(u$),providedIn:"root"})}return t})(),u$=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pP=new H("");var gP=new H(""),mP=(()=>{class t{currentNavigation=te(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ge;transitionAbortWithErrorSubject=new Ge;configLoader=M(lP);environmentInjector=M(it);destroyRef=M(Jn);urlSerializer=M(el);rootContexts=M(Oa);location=M(Ca);inputBindingEnabled=M(gp,{optional:!0})!==null;titleStrategy=M(qE);options=M(xa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(vp);createViewTransition=M(pP,{optional:!0});navigationErrorHandler=M(gP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new rp(i)),r=i=>this.events.next(new ip(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Mt(()=>{this.transitions?.next(Z(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Vt(null),this.transitions.pipe(pt(r=>r!==null),It(r=>{let i=!1;return ee(r).pipe(It(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",sn.SupersededByNewNavigation),cn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Z(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ri(o.id,this.urlSerializer.serialize(o.rawUrl),"",qu.IgnoredSameUrlNavigation)),o.resolve(!1),cn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ee(o).pipe(It(u=>(this.events.next(new Jo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?cn:Promise.resolve(u))),r$(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),rt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Wu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,v=new Jo(u,this.urlSerializer.serialize(l),h,p);this.events.next(v);let I=ZR(this.rootComponentType).snapshot;return this.currentTransition=r=Z(F({},o),{targetSnapshot:I,urlAfterRedirects:l,extras:Z(F({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),ee(r)}else return this.events.next(new ri(o.id,this.urlSerializer.serialize(o.extractedUrl),"",qu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),cn}),rt(o=>{let s=new Xf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Y(o=>(this.currentTransition=r=Z(F({},o),{guards:C4(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),N4(this.environmentInjector,o=>this.events.next(o)),rt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw hp(this.urlSerializer,o.guardsResult);let s=new ep(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),pt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",sn.GuardRejected),!1)),SE(o=>{if(o.guards.canActivateChecks.length!==0)return ee(o).pipe(rt(s=>{let a=new tp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),It(s=>{let a=!1;return ee(s).pipe(i$(this.paramsInheritanceStrategy,this.environmentInjector),rt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",sn.NoDataFromResolver)}}))}),rt(s=>{let a=new np(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),SE(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Pa(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(rt(h=>{a.component=h}),Y(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Yd(s(o.targetSnapshot.root)).pipe(bi(null),en(1))}),SE(()=>this.afterPreactivation()),It(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ae(a).pipe(Y(()=>r)):ee(r)}),Y(o=>{let s=v4(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Z(F({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),rt(()=>{this.events.next(new Gu)}),w4(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),en(1),Xd(new oe(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(pt(()=>!i&&!r.targetRouterState),rt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",sn.Aborted)}))),rt({next:o=>{i=!0,this.lastSuccessfulNavigation=Mt(this.currentNavigation),this.events.next(new Rn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Xd(this.transitionAbortWithErrorSubject.pipe(rt(o=>{throw o}))),Hc(()=>{i||this.cancelNavigationTransition(r,"",sn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ln(o=>{if(this.destroyed)return r.resolve(!1),cn;if(i=!0,rP(o))this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),E4(o)?this.events.next(new Aa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Sa(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=gt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ma){let{message:u,cancellationCode:l}=hp(this.urlSerializer,a);this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Aa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return cn}))}))}cancelNavigationTransition(n,r,i){let o=new Dr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Mt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function l$(t){return t!==$u}var vP=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(d$),providedIn:"root"})}return t})(),pp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},d$=(()=>{class t extends pp{static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yP=(()=>{class t{urlSerializer=M(el);options=M(xa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Ca);urlHandlingStrategy=M(vp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Sr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Sr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=ZR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:()=>M(h$),providedIn:"root"})}return t})(),h$=(()=>{class t extends yP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Jo?this.updateStateMemento():n instanceof ri?this.commitTransition(r):n instanceof Wu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Gu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Dr&&n.code!==sn.SupersededByNewNavigation&&n.code!==sn.Redirect?this.restoreHistory(r):n instanceof Sa?this.restoreHistory(r,!0):n instanceof Rn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WE(t,e){t.events.pipe(pt(n=>n instanceof Rn||n instanceof Dr||n instanceof Sa||n instanceof ri),Y(n=>n instanceof Rn||n instanceof ri?0:(n instanceof Dr?n.code===sn.Redirect||n.code===sn.SupersededByNewNavigation:!1)?2:1),pt(n=>n!==2),en(1)).subscribe(()=>{e()})}var f$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ot=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(If);stateManager=M(yP);options=M(xa,{optional:!0})||{};pendingTasks=M(Xn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(mP);urlSerializer=M(el);location=M(Ca);urlHandlingStrategy=M(vp);injector=M(it);_events=new Ge;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(vP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(rl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(gp,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Mt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==sn.Redirect&&r.code!==sn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof Aa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||l$(i.source)},s);this.scheduleNavigation(a,$u,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}f4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$u,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(on)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Mt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(zE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=GR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return KR(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Hi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$u,null,r)}navigate(n,r={skipLocationChange:!1}){return g$(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Yn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},f$):r===!1?i=F({},p$):i=r,Hi(n))return AR(this.currentUrlTree,n,i);let o=this.parseUrl(n);return AR(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return WE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function g$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}var Ar=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=te(null);get href(){return Mt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ge;applicationErrorHandler=M(on);options=M(xa,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new Nf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Rn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Hi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Ce(Ot),Ce(ir),hu("tabindex"),Ce(ki),Ce(Un),Ce(wa))};static \u0275dir=et({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&X("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ei("href",i.reactiveHref(),h_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Go],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Go],replaceUrl:[2,"replaceUrl","replaceUrl",Go],routerLink:"routerLink"},features:[wr]})}return t})(),il=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new at;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Rn&&this.update()})}ngAfterContentInit(){ee(this.links.changes,ee(null)).pipe(Qs()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ae(n).pipe(Qs()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=v$(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(Ce(Ot),Ce(Un),Ce(ki),Ce(Wo),Ce(Ar,8))};static \u0275dir=et({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&B_(o,Ar,5),r&2){let s;$_(s=H_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[wr]})}return t})();function v$(t){return!!t.paths}var y$=new H("");function GE(t,...e){return Dt([{provide:rl,multi:!0,useValue:t},[],{provide:ir,useFactory:_$,deps:[Ot]},{provide:Li,multi:!0,useFactory:E$},e.map(n=>n.\u0275providers)])}function _$(t){return t.routerState.root}function E$(){let t=M(Xe);return e=>{let n=t.get(At);if(e!==n.components[0])return;let r=t.get(Ot),i=t.get(w$);t.get(C$)===1&&r.initialNavigation(),t.get(I$,null,{optional:!0})?.setUpPreloading(),t.get(y$,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var w$=new H("",{factory:()=>new Ge}),C$=new H("",{providedIn:"root",factory:()=>1});var I$=new H("");var SP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Ce(ki),Ce(Un))};static \u0275dir=et({type:t})}return t})(),AP=(()=>{class t extends SP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,features:[hn]})}return t})(),QE=new H("");var b$={provide:QE,useExisting:yn(()=>Mr),multi:!0};function T$(){let t=jn()?jn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var D$=new H(""),Mr=(()=>{class t extends SP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!T$())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Ce(ki),Ce(Un),Ce(D$,8))};static \u0275dir=et({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&X("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[br([b$]),hn]})}return t})();function S$(t){return t==null||MP(t)===0}function MP(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Va=new H(""),RP=new H("");function A$(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function M$(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function R$(t){return S$(t.value)?{required:!0}:null}function P$(t){return e=>{let n=e.value?.length??MP(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function _P(t){return null}function PP(t){return t!=null}function OP(t){return Fi(t)?Ae(t):t}function NP(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function xP(t,e){return e.map(n=>n(t))}function O$(t){return!t.validate}function kP(t){return t.map(e=>O$(e)?e:n=>e.validate(n))}function N$(t){if(!t)return null;let e=t.filter(PP);return e.length==0?null:function(n){return NP(xP(n,e))}}function ZE(t){return t!=null?N$(kP(t)):null}function x$(t){if(!t)return null;let e=t.filter(PP);return e.length==0?null:function(n){let r=xP(n,e).map(OP);return nv(r).pipe(Y(NP))}}function JE(t){return t!=null?x$(kP(t)):null}function EP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function k$(t){return t._rawValidators}function F$(t){return t._rawAsyncValidators}function KE(t){return t?Array.isArray(t)?t:[t]:[]}function _p(t,e){return Array.isArray(t)?t.includes(e):t===e}function wP(t,e){let n=KE(e);return KE(t).forEach(i=>{_p(n,i)||n.push(i)}),n}function CP(t,e){return KE(e).filter(n=>!_p(t,n))}var Ep=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},La=class extends Ep{name;get formDirective(){return null}get path(){return null}},ll=class extends Ep{_parent=null;name=null;valueAccessor=null},wp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},L$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ice=Z(F({},L$),{"[class.ng-submitted]":"isSubmitted"}),qi=(()=>{class t extends wp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Ce(ll,2))};static \u0275dir=et({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ut("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[hn]})}return t})(),Ua=(()=>{class t extends wp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Ce(La,10))};static \u0275dir=et({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ut("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[hn]})}return t})();var ol="VALID",yp="INVALID",ka="PENDING",sl="DISABLED",zi=class{},Cp=class extends zi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},cl=class extends zi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},ul=class extends zi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Fa=class extends zi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},YE=class extends zi{source;constructor(e){super(),this.source=e}},Ip=class extends zi{source;constructor(e){super(),this.source=e}};function FP(t){return(Dp(t)?t.validators:t)||null}function V$(t){return Array.isArray(t)?ZE(t):t||null}function LP(t,e){return(Dp(e)?e.asyncValidators:t)||null}function U$(t){return Array.isArray(t)?JE(t):t||null}function Dp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function j$(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")}function B$(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new $(1002,"")})}var bp=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Mt(this.statusReactive)}set status(e){Mt(()=>this.statusReactive.set(e))}_status=zo(()=>this.statusReactive());statusReactive=te(void 0);get valid(){return this.status===ol}get invalid(){return this.status===yp}get pending(){return this.status==ka}get disabled(){return this.status===sl}get enabled(){return this.status!==sl}errors;get pristine(){return Mt(this.pristineReactive)}set pristine(e){Mt(()=>this.pristineReactive.set(e))}_pristine=zo(()=>this.pristineReactive());pristineReactive=te(!0);get dirty(){return!this.pristine}get touched(){return Mt(this.touchedReactive)}set touched(e){Mt(()=>this.touchedReactive.set(e))}_touched=zo(()=>this.touchedReactive());touchedReactive=te(!1);get untouched(){return!this.touched}_events=new Ge;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CP(e,this._rawAsyncValidators))}hasValidator(e){return _p(this._rawValidators,e)}hasAsyncValidator(e){return _p(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ul(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ul(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new cl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new cl(!0,r))}markAsPending(e={}){this.status=ka;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fa(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=sl,this.errors=null,this._forEachChild(i=>{i.disable(Z(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cp(this.value,r)),this._events.next(new Fa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ol,this._forEachChild(r=>{r.enable(Z(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ol||this.status===ka)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cp(this.value,n)),this._events.next(new Fa(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sl:ol}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ka,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=OP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Fa(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?sl:this.errors?yp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ka)?ka:this._anyControlsHaveStatus(yp)?yp:ol}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new cl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ul(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=V$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=U$(this._rawAsyncValidators)}},Tp=class extends bp{constructor(e,n,r){super(FP(n),LP(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){B$(this,!0,e),Object.keys(e).forEach(r=>{j$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Ip(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var XE=new H("",{providedIn:"root",factory:()=>ew}),ew="always";function $$(t,e){return[...e.path,t]}function VP(t,e,n=ew){UP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),z$(t,e),W$(t,e),q$(t,e),H$(t,e)}function IP(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function H$(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function UP(t,e){let n=k$(t);e.validator!==null?t.setValidators(EP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=F$(t);e.asyncValidator!==null?t.setAsyncValidators(EP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();IP(e._rawValidators,i),IP(e._rawAsyncValidators,i)}function z$(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&jP(t,e)})}function q$(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&jP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function jP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function W$(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function G$(t,e){t==null,UP(t,e)}function K$(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Y$(t){return Object.getPrototypeOf(t.constructor)===AP}function Q$(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Z$(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Mr?n=o:Y$(o)?r=o:i=o}),i||r||n||null}var J$={provide:La,useExisting:yn(()=>Xo)},al=Promise.resolve(),Xo=(()=>{class t extends La{callSetDisabledState;get submitted(){return Mt(this.submittedReactive)}_submitted=zo(()=>this.submittedReactive());submittedReactive=te(!1);_directives=new Set;form;ngSubmit=new at;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Tp({},ZE(n),JE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){al.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),VP(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){al.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){al.then(()=>{let r=this._findContainer(n.path),i=new Tp({});G$(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){al.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){al.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Q$(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new YE(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(Ce(Va,10),Ce(RP,10),Ce(XE,8))};static \u0275dir=et({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&X("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[br([J$]),hn]})}return t})();function bP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function TP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var X$=class extends bp{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(FP(n),LP(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(TP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Ip(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){TP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var eH={provide:ll,useExisting:yn(()=>oi)},DP=Promise.resolve(),oi=(()=>{class t extends ll{_changeDetectorRef;callSetDisabledState;control=new X$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Z$(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),K$(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){DP.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Go(r);DP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?$$(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Ce(La,9),Ce(Va,10),Ce(RP,10),Ce(QE,10),Ce(Wo,8),Ce(XE,8))};static \u0275dir=et({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[br([eH]),hn,wr]})}return t})();var ja=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=et({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),tH={provide:QE,useExisting:yn(()=>es),multi:!0},es=(()=>{class t extends AP{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&X("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[br([tH]),hn]})}return t})();function nH(t){return typeof t=="number"?t:parseInt(t,10)}function BP(t){return typeof t=="number"?t:parseFloat(t)}var Sp=(()=>{class t{_validator=_P;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_P,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=et({type:t,features:[wr]})}return t})(),rH={provide:Va,useExisting:yn(()=>dl),multi:!0},dl=(()=>{class t extends Sp{max;inputName="max";normalizeInput=n=>BP(n);createValidator=n=>M$(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ei("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[br([rH]),hn]})}return t})(),iH={provide:Va,useExisting:yn(()=>ts),multi:!0},ts=(()=>{class t extends Sp{min;inputName="min";normalizeInput=n=>BP(n);createValidator=n=>A$(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ei("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[br([iH]),hn]})}return t})(),oH={provide:Va,useExisting:yn(()=>ns),multi:!0};var ns=(()=>{class t extends Sp{required;inputName="required";normalizeInput=Go;createValidator=n=>R$;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ei("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[br([oH]),hn]})}return t})();var sH={provide:Va,useExisting:yn(()=>rs),multi:!0},rs=(()=>{class t extends Sp{maxlength;inputName="maxlength";normalizeInput=n=>nH(n);createValidator=n=>P$(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=tr(t)))(i||t)}})();static \u0275dir=et({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ei("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[br([sH]),hn]})}return t})();var aH=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ir({type:t});static \u0275inj=Qn({})}return t})();var Wi=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:XE,useValue:n.callSetDisabledState??ew}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ir({type:t});static \u0275inj=Qn({imports:[aH]})}return t})();var $P=()=>{};var qP=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cH=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,v=l&63;u||(v=64,s||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new nw;let g=o<<2|a>>4;if(r.push(g),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},nw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uH=function(t){let e=qP(t);return Mp.encodeByteArray(e,!0)},fl=function(t){return uH(t).replace(/\./g,"")},Rp=function(t){try{return Mp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lH=()=>iw().__FIREBASE_DEFAULTS__,dH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Rp(t[1]);return e&&JSON.parse(e)},Pp=()=>{try{return $P()||lH()||dH()||hH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WP=t=>{var e,n;return(n=(e=Pp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GP=t=>{let e=WP(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ow=()=>{var t;return(t=Pp())===null||t===void 0?void 0:t.config},KP=t=>{var e;return(e=Pp())===null||e===void 0?void 0:e[`_${t}`]};var is=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function os(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sw(t){return(await fetch(t,{credentials:"include"})).ok}function YP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fl(JSON.stringify(n)),fl(JSON.stringify(s)),""].join(".")}var hl={};function fH(){let t={prod:[],emulator:[]};for(let e of Object.keys(hl))hl[e]?t.emulator.push(e):t.prod.push(e);return t}function pH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var HP=!1;function aw(t,e){if(typeof window>"u"||typeof document>"u"||!os(window.location.host)||hl[t]===e||hl[t]||HP)return;hl[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=fH().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{HP=!0,s()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=pH(r),v=n("text"),I=document.getElementById(v)||document.createElement("span"),N=n("learnmore"),x=document.getElementById(N)||document.createElement("a"),j=n("preprendIcon"),J=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ce=g.element;a(ce),h(x,N);let xe=l();u(J,j),ce.append(J,I,x,xe),document.body.appendChild(ce)}o?(I.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function gH(){var t;let e=(t=Pp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JP(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eO(){return!gH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pl(){try{return typeof indexedDB=="object"}catch{return!1}}function tO(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var mH="FirebaseError",$n=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mH,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,or.prototype.create)}},or=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?vH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new $n(i,a,r)}};function vH(t,e){return t.replace(yH,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yH=/\{\$([^}]+)}/g;function ss(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(zP(o)&&zP(s)){if(!ss(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function zP(t){return t!==null&&typeof t=="object"}function cw(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nO(t,e){let n=new rw(t,e);return n.subscribe.bind(n)}var rw=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_H(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=tw),i.error===void 0&&(i.error=tw),i.complete===void 0&&(i.complete=tw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _H(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tw(){}var uce=14400*1e3;function Bt(t){return t&&t._delegate?t._delegate:t}var an=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var as="[DEFAULT]";var uw=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new is;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wH(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function EH(t){return t===as?void 0:t}function wH(t){return t.instantiationMode==="EAGER"}var Op=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new uw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var CH=[],be=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(be||{}),IH={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},bH=be.INFO,TH={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},DH=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=TH[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rr=class{constructor(e){this.name=e,this._logLevel=bH,this._logHandler=DH,this._userLogHandler=null,CH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};var SH=(t,e)=>e.some(n=>t instanceof n),rO,iO;function AH(){return rO||(rO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MH(){return iO||(iO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var oO=new WeakMap,dw=new WeakMap,sO=new WeakMap,lw=new WeakMap,fw=new WeakMap;function RH(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Pr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&oO.set(n,t)}).catch(()=>{}),fw.set(e,t),e}function PH(t){if(dw.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});dw.set(t,e)}var hw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aO(t){hw=t(hw)}function OH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Np(this),e,...n);return sO.set(r,e.sort?e.sort():[e]),Pr(r)}:MH().includes(t)?function(...e){return t.apply(Np(this),e),Pr(oO.get(this))}:function(...e){return Pr(t.apply(Np(this),e))}}function NH(t){return typeof t=="function"?OH(t):(t instanceof IDBTransaction&&PH(t),SH(t,AH())?new Proxy(t,hw):t)}function Pr(t){if(t instanceof IDBRequest)return RH(t);if(lw.has(t))return lw.get(t);let e=NH(t);return e!==t&&(lw.set(t,e),fw.set(e,t)),e}var Np=t=>fw.get(t);function uO(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Pr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Pr(s.result),u.oldVersion,u.newVersion,Pr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var xH=["get","getKey","getAll","getAllKeys","count"],kH=["put","add","delete","clear"],pw=new Map;function cO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pw.get(e))return pw.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=kH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xH.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return pw.set(e,o),o}aO(t=>Z(F({},t),{get:(e,n,r)=>cO(e,n)||t.get(e,n,r),has:(e,n)=>!!cO(e,n)||t.has(e,n)}));var mw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FH(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function FH(t){let e=t.getComponent();return e?.type==="VERSION"}var vw="@firebase/app",lO="0.13.2";var si=new Rr("@firebase/app"),LH="@firebase/app-compat",VH="@firebase/analytics-compat",UH="@firebase/analytics",jH="@firebase/app-check-compat",BH="@firebase/app-check",$H="@firebase/auth",HH="@firebase/auth-compat",zH="@firebase/database",qH="@firebase/data-connect",WH="@firebase/database-compat",GH="@firebase/functions",KH="@firebase/functions-compat",YH="@firebase/installations",QH="@firebase/installations-compat",ZH="@firebase/messaging",JH="@firebase/messaging-compat",XH="@firebase/performance",ez="@firebase/performance-compat",tz="@firebase/remote-config",nz="@firebase/remote-config-compat",rz="@firebase/storage",iz="@firebase/storage-compat",oz="@firebase/firestore",sz="@firebase/ai",az="@firebase/firestore-compat",cz="firebase",uz="11.10.0";var yw="[DEFAULT]",lz={[vw]:"fire-core",[LH]:"fire-core-compat",[UH]:"fire-analytics",[VH]:"fire-analytics-compat",[BH]:"fire-app-check",[jH]:"fire-app-check-compat",[$H]:"fire-auth",[HH]:"fire-auth-compat",[zH]:"fire-rtdb",[qH]:"fire-data-connect",[WH]:"fire-rtdb-compat",[GH]:"fire-fn",[KH]:"fire-fn-compat",[YH]:"fire-iid",[QH]:"fire-iid-compat",[ZH]:"fire-fcm",[JH]:"fire-fcm-compat",[XH]:"fire-perf",[ez]:"fire-perf-compat",[tz]:"fire-rc",[nz]:"fire-rc-compat",[rz]:"fire-gcs",[iz]:"fire-gcs-compat",[oz]:"fire-fst",[az]:"fire-fst-compat",[sz]:"fire-vertex","fire-js":"fire-js",[cz]:"fire-js-all"};var gl=new Map,dz=new Map,_w=new Map;function dO(t,e){try{t.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){let e=t.name;if(_w.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;_w.set(e,t);for(let n of gl.values())dO(n,t);for(let n of dz.values())dO(n,t);return!0}function xp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ai(t){return t==null?!1:t.settings!==void 0}var hz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new or("app","Firebase",hz);var Ew=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}};var Ba=uz;function Iw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:yw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Gi.create("bad-app-name",{appName:String(i)});if(n||(n=ow()),!n)throw Gi.create("no-options");let o=gl.get(i);if(o){if(ss(n,o.options)&&ss(r,o.config))return o;throw Gi.create("duplicate-app",{appName:i})}let s=new Op(i);for(let u of _w.values())s.addComponent(u);let a=new Ew(n,r,s);return gl.set(i,a),a}function $a(t=yw){let e=gl.get(t);if(!e&&t===yw&&ow())return Iw();if(!e)throw Gi.create("no-app",{appName:t});return e}function kp(){return Array.from(gl.values())}function dt(t,e,n){var r;let i=(r=lz[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}sr(new an(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fz="firebase-heartbeat-database",pz=1,ml="firebase-heartbeat-store",gw=null;function gO(){return gw||(gw=uO(fz,pz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),gw}async function gz(t){try{let n=(await gO()).transaction(ml),r=await n.objectStore(ml).get(mO(t));return await n.done,r}catch(e){if(e instanceof $n)si.warn(e.message);else{let n=Gi.create("idb-get",{originalErrorMessage:e?.message});si.warn(n.message)}}}async function hO(t,e){try{let r=(await gO()).transaction(ml,"readwrite");await r.objectStore(ml).put(e,mO(t)),await r.done}catch(n){if(n instanceof $n)si.warn(n.message);else{let r=Gi.create("idb-set",{originalErrorMessage:n?.message});si.warn(r.message)}}}function mO(t){return`${t.name}!${t.options.appId}`}var mz=1024,vz=30,ww=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Cw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=fO();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>vz){let s=_z(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){si.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=fO(),{heartbeatsToSend:r,unsentEntries:i}=yz(this._heartbeatsCache.heartbeats),o=fl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return si.warn(n),""}}};function fO(){return new Date().toISOString().substring(0,10)}function yz(t,e=mz){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),pO(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pO(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Cw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pl()?tO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await gz(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return hO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return hO(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function pO(t){return fl(JSON.stringify({version:2,heartbeats:t})).length}function _z(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Ez(t){sr(new an("platform-logger",e=>new mw(e),"PRIVATE")),sr(new an("heartbeat",e=>new ww(e),"PRIVATE")),dt(vw,lO,t),dt(vw,lO,"esm2017"),dt("fire-js","")}Ez("");var wz="firebase",Cz="11.10.0";dt(wz,Cz,"app");function vO(t){t===void 0&&(t=M(Xe));let e=t.get(Ni);return n=>new oe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var us=new Ti("ANGULARFIRE2_VERSION");function Lp(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var za=(t,e)=>{let n=e?[e]:kp(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ha=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(Ha||{}),yO=Su()&&typeof Zone<"u"?Ha.WARN:Ha.SILENT;var Fp=class{zone;delegate;constructor(e,n=Xm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},ls=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(Ne);this.outsideAngular=n.runOutsideAngular(()=>new Fp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Fp(typeof Zone>"u"?void 0:Zone.current,Jm))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_O=!1;function Iz(t,e){!_O&&(yO>Ha.SILENT||Su())&&(_O=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),yO>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function bz(t){let e=M(Ne,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function cs(t){let e=M(Ne,{optional:!0});return e?e.run(()=>t()):t()}var Tz=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),gt(n,()=>cs(()=>t.apply(void 0,r)))),$t=(t,e,n)=>(n||=e?Ha.WARN:Ha.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(ls),s=M(Ni),a=M(it)}catch{return Iz(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=cs(()=>s.add())),i[l]=Tz(i[l],r,a));let u=bz(()=>t.apply(this,i));return e?u instanceof oe?u.pipe(Ii(o.outsideAngular),Ci(o.insideAngular),vO(a)):u instanceof Promise?cs(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>gt(a,()=>cs(()=>h(g))),g=>gt(a,()=>cs(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:cs(()=>u):u instanceof oe?u.pipe(Ii(o.outsideAngular),Ci(o.insideAngular)):cs(()=>u)});var ds=class{constructor(e){return e}},vl=class{constructor(){return kp()}};function Dz(t){return t&&t.length===1?t[0]:new ds($a())}var bw=new H("angularfire2._apps"),Sz={provide:ds,useFactory:Dz,deps:[[new Er,bw]]},Az={provide:vl,deps:[[new Er,bw]]};function Mz(t){return(e,n)=>{let r=n.get(Xr);dt("angularfire",us.full,"core"),dt("angularfire",us.full,"app"),dt("angular",mv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ds(i)}}function EO(t,...e){return Dt([Sz,Az,{provide:bw,useFactory:Mz(t),multi:!0,deps:[Ne,Xe,ls,...e]}])}var wO=$t(Iw,!0);var Rz=new Map,Pz={activated:!1,tokenObservers:[]},Oz={initialized:!1,enabled:!1};function ar(t){return Rz.get(t)||Object.assign({},Pz)}function TO(){return Oz}var Nz="https://content-firebaseappcheck.googleapis.com/v1";var xz="exchangeDebugToken",CO={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},uue=1440*60*1e3;var Sw=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new is,this.pending.promise.catch(n=>{}),await kz(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new is,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function kz(t){return new Promise(e=>{setTimeout(e,t)})}var Fz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ki=new or("appCheck","AppCheck",Fz);function DO(t){if(!ar(t).activated)throw Ki.create("use-before-activation",{appName:t.name})}async function SO({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Ki.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Ki.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Ki.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function AO(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Nz}/projects/${n}/apps/${r}:${xz}?key=${i}`,body:{debug_token:e}}}var Lz="firebase-app-check-database",Vz=1,Aw="firebase-app-check-store";var Vp=null;function Uz(){return Vp||(Vp=new Promise((t,e)=>{try{let n=indexedDB.open(Lz,Vz);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ki.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Aw,{keyPath:"compositeKey"})}}}catch(n){e(Ki.create("storage-open",{originalErrorMessage:n?.message}))}}),Vp)}function jz(t,e){return Bz($z(t),e)}async function Bz(t,e){let r=(await Uz()).transaction(Aw,"readwrite"),o=r.objectStore(Aw).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ki.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function $z(t){return`${t.options.appId}-${t.name}`}var yl=new Rr("@firebase/app-check");function Tw(t,e){return pl()?jz(t,e).catch(n=>{yl.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function MO(){return TO().enabled}async function RO(){let t=TO();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Hz={error:"UNKNOWN_ERROR"};function zz(t){return Mp.encodeString(JSON.stringify(t),!1)}async function Mw(t,e=!1,n=!1){let r=t.app;DO(r);let i=ar(r),o=i.token,s;if(o&&!_l(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(_l(l)?o=l:await Tw(r,void 0))}if(!e&&o&&_l(o))return{token:o.token};let a=!1;if(MO())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=SO(AO(r,await RO()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await Tw(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?yl.warn(l.message):n&&yl.error(l),Dw(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await ar(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?yl.warn(l.message):n&&yl.error(l),s=l}let u;return o?s?_l(o)?u={token:o.token,internalError:s}:u=Dw(s):(u={token:o.token},i.token=o,await Tw(r,o)):u=Dw(s),a&&Kz(r,u),u}async function qz(t){let e=t.app;DO(e);let{provider:n}=ar(e);if(MO()){let r=await RO(),{token:i}=await SO(AO(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function Wz(t,e,n,r){let{app:i}=t,o=ar(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_l(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),IO(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>IO(t))}function PO(t,e){let n=ar(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function IO(t){let{app:e}=t,n=ar(e),r=n.tokenRefresher;r||(r=Gz(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Gz(t){let{app:e}=t;return new Sw(async()=>{let n=ar(e),r;if(n.token?r=await Mw(t,!0):r=await Mw(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=ar(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},CO.RETRIAL_MIN_WAIT,CO.RETRIAL_MAX_WAIT)}function Kz(t,e){let n=ar(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _l(t){return t.expireTimeMillis-Date.now()>0}function Dw(t){return{token:zz(Hz),error:t}}var Rw=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ar(this.app);for(let n of e)PO(this.app,n.next);return Promise.resolve()}};function Yz(t,e){return new Rw(t,e)}function Qz(t){return{getToken:e=>Mw(t,e),getLimitedUseToken:()=>qz(t),addTokenListener:e=>Wz(t,"INTERNAL",e),removeTokenListener:e=>PO(t.app,e)}}var Zz="@firebase/app-check",Jz="0.10.1";var Xz="app-check",bO="app-check-internal";function e6(){sr(new an(Xz,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Yz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(bO).initialize()})),sr(new an(bO,t=>{let e=t.getProvider("app-check").getImmediate();return Qz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),dt(Zz,Jz)}e6();var t6="app-check";var Up=class{constructor(){return za(t6)}};var n6=["localhost","0.0.0.0","127.0.0.1"],wue=typeof window<"u"&&n6.includes(window.location.hostname);function UO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jO=UO,BO=new or("auth","Firebase",UO());var Hp=new Rr("@firebase/auth");function r6(t,...e){Hp.logLevel<=be.WARN&&Hp.warn(`Auth (${Ba}): ${t}`,...e)}function Bp(t,...e){Hp.logLevel<=be.ERROR&&Hp.error(`Auth (${Ba}): ${t}`,...e)}function OO(t,...e){throw $w(t,...e)}function Bw(t,...e){return $w(t,...e)}function $O(t,e,n){let r=Object.assign(Object.assign({},jO()),{[e]:n});return new or("auth","Firebase",r).create(e,{appName:t.name})}function $p(t){return $O(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $w(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BO.create(t,...e)}function Le(t,e,...n){if(!t)throw $w(e,...n)}function El(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Bp(e),new Error(e)}function zp(t,e){t||El(e)}function i6(){return NO()==="http:"||NO()==="https:"}function NO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function o6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i6()||JP()||"connection"in navigator)?navigator.onLine:!0}function s6(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ps=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,zp(n>e,"Short delay should be less than long delay!"),this.isMobile=QP()||XP()}get(){return o6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function a6(t,e){zp(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var qp=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;El("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;El("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;El("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var c6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var u6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],l6=new ps(3e4,6e4);function HO(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qp(t,e,n,r,i={}){return zO(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=cw(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return ZP()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&os(t.emulatorConfig.host)&&(l.credentials="include"),qp.fetch()(await qO(t,t.config.apiHost,n,a),l)})}async function zO(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},c6),e);try{let i=new Nw(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw jp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jp(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw jp(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw jp(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw $O(t,h,l);OO(t,h)}}catch(i){if(i instanceof $n)throw i;OO(t,"network-request-failed",{message:String(i)})}}async function qO(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?a6(t.config,i):`${t.config.apiScheme}://${i}`;return u6.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var Nw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Bw(this.auth,"network-request-failed")),l6.get())})}};function jp(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Bw(t,e,r);return i.customData._tokenResponse=n,i}async function d6(t,e){return Qp(t,"POST","/v1/accounts:delete",e)}async function Wp(t,e){return Qp(t,"POST","/v1/accounts:lookup",e)}function wl(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hw(t,e=!1){let n=Bt(t),r=await n.getIdToken(e),i=WO(r);Le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:wl(Pw(i.auth_time)),issuedAtTime:wl(Pw(i.iat)),expirationTime:wl(Pw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Pw(t){return Number(t)*1e3}function WO(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rp(n);return i?JSON.parse(i):(Bp("Failed to decode base64 JWT payload"),null)}catch(i){return Bp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xO(t){let e=WO(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function xw(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&h6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function h6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var kw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Il=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Gp(t){var e;let n=t.auth,r=await t.getIdToken(),i=await xw(t,Wp(n,{idToken:r}));Le(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?GO(o.providerUserInfo):[],a=f6(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Il(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function zw(t){let e=Bt(t);await Gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f6(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GO(t){return t.map(e=>{var{providerId:n}=e,r=ev(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function p6(t,e){let n=await zO(t,{},async()=>{let r=cw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await qO(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&os(t.emulatorConfig.host)&&(u.credentials="include"),qp.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g6(t,e){return Qp(t,"POST","/v2/accounts:revokeToken",HO(t,e))}var Cl=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");let n=xO(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await p6(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(Le(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Le(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Le(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return El("not implemented")}};function Yi(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var hs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=ev(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Il(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await xw(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Hw(this,e)}reload(){return zw(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject($p(this.auth));let e=await this.getIdToken();return await xw(this,d6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=n.createdAt)!==null&&l!==void 0?l:void 0,J=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ce,emailVerified:xe,isAnonymous:Ft,providerData:je,stsTokenManager:T}=n;Le(ce&&T,e,"internal-error");let E=Cl.fromJSON(this.name,T);Le(typeof ce=="string",e,"internal-error"),Yi(p,e.name),Yi(g,e.name),Le(typeof xe=="boolean",e,"internal-error"),Le(typeof Ft=="boolean",e,"internal-error"),Yi(v,e.name),Yi(I,e.name),Yi(N,e.name),Yi(x,e.name),Yi(j,e.name),Yi(J,e.name);let C=new t({uid:ce,auth:e,email:g,emailVerified:xe,displayName:p,isAnonymous:Ft,photoURL:I,phoneNumber:v,tenantId:N,stsTokenManager:E,createdAt:j,lastLoginAt:J});return je&&Array.isArray(je)&&(C.providerData=je.map(b=>Object.assign({},b))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){let i=new Cl;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gp(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];Le(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?GO(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cl;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Il(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var kO=new Map;function fs(t){zp(t instanceof Function,"Expected a class definition");let e=kO.get(t);return e?(zp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kO.set(t,e),e)}var m6=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Fw=m6;function Ow(t,e,n){return`firebase:${t}:${e}:${n}`}var Kp=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ow(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ow("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Wp(this.auth,{idToken:e}).catch(()=>{});return n?hs._fromGetAccountInfoResponse(this.auth,n,e):null}return hs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(fs(Fw),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||fs(Fw),s=Ow(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await Wp(e,{idToken:h}).catch(()=>{});if(!g)break;p=await hs._fromGetAccountInfoResponse(e,g,h)}else p=hs._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function FO(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C6(e))return"Blackberry";if(I6(e))return"Webos";if(y6(e))return"Safari";if((e.includes("chrome/")||_6(e))&&!e.includes("edge/"))return"Chrome";if(w6(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function v6(t=Pn()){return/firefox\//i.test(t)}function y6(t=Pn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _6(t=Pn()){return/crios\//i.test(t)}function E6(t=Pn()){return/iemobile/i.test(t)}function w6(t=Pn()){return/android/i.test(t)}function C6(t=Pn()){return/blackberry/i.test(t)}function I6(t=Pn()){return/webos/i.test(t)}function KO(t,e=[]){let n;switch(t){case"Browser":n=FO(Pn());break;case"Worker":n=`${FO(Pn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ba}/${r}`}var Lw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function b6(t,e={}){return Qp(t,"GET","/v2/passwordPolicy",HO(t,e))}var T6=6,Vw=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:T6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Uw=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yp(this),this.idTokenSubscription=new Yp(this),this.beforeStateQueue=new Lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fs(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Kp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Wp(this,{idToken:e}),r=await hs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gp(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject($p(this));let n=e?Bt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject($p(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject($p(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await b6(this),n=new Vw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new or("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&fs(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Kp.create(this,[fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&r6(`Error while retrieving App Check token: ${n.error}`),n?.token}};function D6(t){return Bt(t)}var Yp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nO(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var S6={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A6(t){S6=t}function M6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function R6(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(fs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Nue=M6("rcb"),xue=new ps(3e4,6e4);var kue=new ps(2e3,1e4);var Fue=600*1e3;var Lue=new ps(3e4,6e4);var Vue=new ps(5e3,15e3);var Uue=encodeURIComponent("fac");var LO="@firebase/auth",VO="1.10.8";var jw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function P6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O6(t){sr(new an("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Le(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KO(t)},l=new Uw(r,i,o,u);return R6(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sr(new an("auth-internal",e=>{let n=D6(e.getProvider("auth").getImmediate());return(r=>new jw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(LO,VO,P6(t)),dt(LO,VO,"esm2017")}var N6=300,jue=KP("authIdTokenMaxAge")||N6;function x6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}A6({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Bw("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",x6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O6("Browser");var O5="auth";var Zp=class{constructor(){return za(O5)}};var YO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},QO={};var ci,qw;(function(){var t;function e(T,E){function C(){}C.prototype=E.prototype,T.D=E.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(b,D,P){for(var w=Array(arguments.length-2),jr=2;jr<arguments.length;jr++)w[jr-2]=arguments[jr];return E.prototype[D].apply(b,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,E,C){C||(C=0);var b=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)b[D]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(D=0;16>D;++D)b[D]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=T.g[0],C=T.g[1],D=T.g[2];var P=T.g[3],w=E+(P^C&(D^P))+b[0]+3614090360&4294967295;E=C+(w<<7&4294967295|w>>>25),w=P+(D^E&(C^D))+b[1]+3905402710&4294967295,P=E+(w<<12&4294967295|w>>>20),w=D+(C^P&(E^C))+b[2]+606105819&4294967295,D=P+(w<<17&4294967295|w>>>15),w=C+(E^D&(P^E))+b[3]+3250441966&4294967295,C=D+(w<<22&4294967295|w>>>10),w=E+(P^C&(D^P))+b[4]+4118548399&4294967295,E=C+(w<<7&4294967295|w>>>25),w=P+(D^E&(C^D))+b[5]+1200080426&4294967295,P=E+(w<<12&4294967295|w>>>20),w=D+(C^P&(E^C))+b[6]+2821735955&4294967295,D=P+(w<<17&4294967295|w>>>15),w=C+(E^D&(P^E))+b[7]+4249261313&4294967295,C=D+(w<<22&4294967295|w>>>10),w=E+(P^C&(D^P))+b[8]+1770035416&4294967295,E=C+(w<<7&4294967295|w>>>25),w=P+(D^E&(C^D))+b[9]+2336552879&4294967295,P=E+(w<<12&4294967295|w>>>20),w=D+(C^P&(E^C))+b[10]+4294925233&4294967295,D=P+(w<<17&4294967295|w>>>15),w=C+(E^D&(P^E))+b[11]+2304563134&4294967295,C=D+(w<<22&4294967295|w>>>10),w=E+(P^C&(D^P))+b[12]+1804603682&4294967295,E=C+(w<<7&4294967295|w>>>25),w=P+(D^E&(C^D))+b[13]+4254626195&4294967295,P=E+(w<<12&4294967295|w>>>20),w=D+(C^P&(E^C))+b[14]+2792965006&4294967295,D=P+(w<<17&4294967295|w>>>15),w=C+(E^D&(P^E))+b[15]+1236535329&4294967295,C=D+(w<<22&4294967295|w>>>10),w=E+(D^P&(C^D))+b[1]+4129170786&4294967295,E=C+(w<<5&4294967295|w>>>27),w=P+(C^D&(E^C))+b[6]+3225465664&4294967295,P=E+(w<<9&4294967295|w>>>23),w=D+(E^C&(P^E))+b[11]+643717713&4294967295,D=P+(w<<14&4294967295|w>>>18),w=C+(P^E&(D^P))+b[0]+3921069994&4294967295,C=D+(w<<20&4294967295|w>>>12),w=E+(D^P&(C^D))+b[5]+3593408605&4294967295,E=C+(w<<5&4294967295|w>>>27),w=P+(C^D&(E^C))+b[10]+38016083&4294967295,P=E+(w<<9&4294967295|w>>>23),w=D+(E^C&(P^E))+b[15]+3634488961&4294967295,D=P+(w<<14&4294967295|w>>>18),w=C+(P^E&(D^P))+b[4]+3889429448&4294967295,C=D+(w<<20&4294967295|w>>>12),w=E+(D^P&(C^D))+b[9]+568446438&4294967295,E=C+(w<<5&4294967295|w>>>27),w=P+(C^D&(E^C))+b[14]+3275163606&4294967295,P=E+(w<<9&4294967295|w>>>23),w=D+(E^C&(P^E))+b[3]+4107603335&4294967295,D=P+(w<<14&4294967295|w>>>18),w=C+(P^E&(D^P))+b[8]+1163531501&4294967295,C=D+(w<<20&4294967295|w>>>12),w=E+(D^P&(C^D))+b[13]+2850285829&4294967295,E=C+(w<<5&4294967295|w>>>27),w=P+(C^D&(E^C))+b[2]+4243563512&4294967295,P=E+(w<<9&4294967295|w>>>23),w=D+(E^C&(P^E))+b[7]+1735328473&4294967295,D=P+(w<<14&4294967295|w>>>18),w=C+(P^E&(D^P))+b[12]+2368359562&4294967295,C=D+(w<<20&4294967295|w>>>12),w=E+(C^D^P)+b[5]+4294588738&4294967295,E=C+(w<<4&4294967295|w>>>28),w=P+(E^C^D)+b[8]+2272392833&4294967295,P=E+(w<<11&4294967295|w>>>21),w=D+(P^E^C)+b[11]+1839030562&4294967295,D=P+(w<<16&4294967295|w>>>16),w=C+(D^P^E)+b[14]+4259657740&4294967295,C=D+(w<<23&4294967295|w>>>9),w=E+(C^D^P)+b[1]+2763975236&4294967295,E=C+(w<<4&4294967295|w>>>28),w=P+(E^C^D)+b[4]+1272893353&4294967295,P=E+(w<<11&4294967295|w>>>21),w=D+(P^E^C)+b[7]+4139469664&4294967295,D=P+(w<<16&4294967295|w>>>16),w=C+(D^P^E)+b[10]+3200236656&4294967295,C=D+(w<<23&4294967295|w>>>9),w=E+(C^D^P)+b[13]+681279174&4294967295,E=C+(w<<4&4294967295|w>>>28),w=P+(E^C^D)+b[0]+3936430074&4294967295,P=E+(w<<11&4294967295|w>>>21),w=D+(P^E^C)+b[3]+3572445317&4294967295,D=P+(w<<16&4294967295|w>>>16),w=C+(D^P^E)+b[6]+76029189&4294967295,C=D+(w<<23&4294967295|w>>>9),w=E+(C^D^P)+b[9]+3654602809&4294967295,E=C+(w<<4&4294967295|w>>>28),w=P+(E^C^D)+b[12]+3873151461&4294967295,P=E+(w<<11&4294967295|w>>>21),w=D+(P^E^C)+b[15]+530742520&4294967295,D=P+(w<<16&4294967295|w>>>16),w=C+(D^P^E)+b[2]+3299628645&4294967295,C=D+(w<<23&4294967295|w>>>9),w=E+(D^(C|~P))+b[0]+4096336452&4294967295,E=C+(w<<6&4294967295|w>>>26),w=P+(C^(E|~D))+b[7]+1126891415&4294967295,P=E+(w<<10&4294967295|w>>>22),w=D+(E^(P|~C))+b[14]+2878612391&4294967295,D=P+(w<<15&4294967295|w>>>17),w=C+(P^(D|~E))+b[5]+4237533241&4294967295,C=D+(w<<21&4294967295|w>>>11),w=E+(D^(C|~P))+b[12]+1700485571&4294967295,E=C+(w<<6&4294967295|w>>>26),w=P+(C^(E|~D))+b[3]+2399980690&4294967295,P=E+(w<<10&4294967295|w>>>22),w=D+(E^(P|~C))+b[10]+4293915773&4294967295,D=P+(w<<15&4294967295|w>>>17),w=C+(P^(D|~E))+b[1]+2240044497&4294967295,C=D+(w<<21&4294967295|w>>>11),w=E+(D^(C|~P))+b[8]+1873313359&4294967295,E=C+(w<<6&4294967295|w>>>26),w=P+(C^(E|~D))+b[15]+4264355552&4294967295,P=E+(w<<10&4294967295|w>>>22),w=D+(E^(P|~C))+b[6]+2734768916&4294967295,D=P+(w<<15&4294967295|w>>>17),w=C+(P^(D|~E))+b[13]+1309151649&4294967295,C=D+(w<<21&4294967295|w>>>11),w=E+(D^(C|~P))+b[4]+4149444226&4294967295,E=C+(w<<6&4294967295|w>>>26),w=P+(C^(E|~D))+b[11]+3174756917&4294967295,P=E+(w<<10&4294967295|w>>>22),w=D+(E^(P|~C))+b[2]+718787259&4294967295,D=P+(w<<15&4294967295|w>>>17),w=C+(P^(D|~E))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,E){E===void 0&&(E=T.length);for(var C=E-this.blockSize,b=this.B,D=this.h,P=0;P<E;){if(D==0)for(;P<=C;)i(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<E;)if(b[D++]=T.charCodeAt(P++),D==this.blockSize){i(this,b),D=0;break}}else for(;P<E;)if(b[D++]=T[P++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;var C=8*this.o;for(E=T.length-8;E<T.length;++E)T[E]=C&255,C/=256;for(this.u(T),T=Array(16),E=C=0;4>E;++E)for(var b=0;32>b;b+=8)T[C++]=this.g[E]>>>b&255;return T};function o(T,E){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=E(T)}function s(T,E){this.h=E;for(var C=[],b=!0,D=T.length-1;0<=D;D--){var P=T[D]|0;b&&P==E||(C[D]=P,b=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?o(T,function(E){return new s([E|0],0>E?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return x(l(-T));for(var E=[],C=1,b=0;T>=C;b++)E[b]=T/C|0,C*=4294967296;return new s(E,0)}function h(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return x(h(T.substring(1),E));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(E,8)),b=p,D=0;D<T.length;D+=8){var P=Math.min(8,T.length-D),w=parseInt(T.substring(D,D+P),E);8>P?(P=l(Math.pow(E,P)),b=b.j(P).add(l(w))):(b=b.j(C),b=b.add(l(w)))}return b}var p=u(0),g=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-x(this).m();for(var T=0,E=1,C=0;C<this.g.length;C++){var b=this.i(C);T+=(0<=b?b:4294967296+b)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I(this))return"0";if(N(this))return"-"+x(this).toString(T);for(var E=l(Math.pow(T,6)),C=this,b="";;){var D=xe(C,E).g;C=j(C,D.j(E));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=D,I(C))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function I(T){if(T.h!=0)return!1;for(var E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=j(this,T),N(T)?-1:I(T)?0:1};function x(T){for(var E=T.g.length,C=[],b=0;b<E;b++)C[b]=~T.g[b];return new s(C,~T.h).add(g)}t.abs=function(){return N(this)?x(this):this},t.add=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],b=0,D=0;D<=E;D++){var P=b+(this.i(D)&65535)+(T.i(D)&65535),w=(P>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);b=w>>>16,P&=65535,w&=65535,C[D]=w<<16|P}return new s(C,C[C.length-1]&-2147483648?-1:0)};function j(T,E){return T.add(x(E))}t.j=function(T){if(I(this)||I(T))return p;if(N(this))return N(T)?x(this).j(x(T)):x(x(this).j(T));if(N(T))return x(this.j(x(T)));if(0>this.l(v)&&0>T.l(v))return l(this.m()*T.m());for(var E=this.g.length+T.g.length,C=[],b=0;b<2*E;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<T.g.length;D++){var P=this.i(b)>>>16,w=this.i(b)&65535,jr=T.i(D)>>>16,yc=T.i(D)&65535;C[2*b+2*D]+=w*yc,J(C,2*b+2*D),C[2*b+2*D+1]+=P*yc,J(C,2*b+2*D+1),C[2*b+2*D+1]+=w*jr,J(C,2*b+2*D+1),C[2*b+2*D+2]+=P*jr,J(C,2*b+2*D+2)}for(b=0;b<E;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=E;b<2*E;b++)C[b]=0;return new s(C,0)};function J(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function ce(T,E){this.g=T,this.h=E}function xe(T,E){if(I(E))throw Error("division by zero");if(I(T))return new ce(p,p);if(N(T))return E=xe(x(T),E),new ce(x(E.g),x(E.h));if(N(E))return E=xe(T,x(E)),new ce(x(E.g),E.h);if(30<T.g.length){if(N(T)||N(E))throw Error("slowDivide_ only works with positive integers.");for(var C=g,b=E;0>=b.l(T);)C=Ft(C),b=Ft(b);var D=je(C,1),P=je(b,1);for(b=je(b,2),C=je(C,2);!I(b);){var w=P.add(b);0>=w.l(T)&&(D=D.add(C),P=w),b=je(b,1),C=je(C,1)}return E=j(T,D.j(E)),new ce(D,E)}for(D=p;0<=T.l(E);){for(C=Math.max(1,Math.floor(T.m()/E.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=l(C),w=P.j(E);N(w)||0<w.l(T);)C-=b,P=l(C),w=P.j(E);I(P)&&(P=g),D=D.add(P),T=j(T,w)}return new ce(D,T)}t.A=function(T){return xe(this,T).h},t.and=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],b=0;b<E;b++)C[b]=this.i(b)&T.i(b);return new s(C,this.h&T.h)},t.or=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],b=0;b<E;b++)C[b]=this.i(b)|T.i(b);return new s(C,this.h|T.h)},t.xor=function(T){for(var E=Math.max(this.g.length,T.g.length),C=[],b=0;b<E;b++)C[b]=this.i(b)^T.i(b);return new s(C,this.h^T.h)};function Ft(T){for(var E=T.g.length+1,C=[],b=0;b<E;b++)C[b]=T.i(b)<<1|T.i(b-1)>>>31;return new s(C,T.h)}function je(T,E){var C=E>>5;E%=32;for(var b=T.g.length-C,D=[],P=0;P<b;P++)D[P]=0<E?T.i(P+C)>>>E|T.i(P+C+1)<<32-E:T.i(P+C);return new s(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qw=QO.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ci=QO.Integer=s}).apply(typeof YO<"u"?YO:typeof self<"u"?self:typeof window<"u"?window:{});var Jp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ui={};var Ww,N5,qa,Gw,bl,Xp,Kw,Yw,Qw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jp=="object"&&Jp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var S=c[m];if(!(S in f))break e;f=f[S]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,S={next:function(){if(!m&&f<c.length){var O=f++;return{value:d(O,c[O]),done:!1}}return m=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,m),c.apply(d,S)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function I(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,S,O){for(var B=Array(arguments.length-2),He=2;He<arguments.length;He++)B[He-2]=arguments[He];return d.prototype[S].apply(m,B)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let S=c.length||0,O=m.length||0;c.length=S+O;for(let B=0;B<O;B++)c[S+B]=m[B]}else c.push(m)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function J(c){return/^[\s\xa0]*$/.test(c)}function ce(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function xe(c){return xe[" "](c),c}xe[" "]=function(){};var Ft=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function je(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function E(c){let d={};for(let f in c)d[f]=c[f];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,d){let f,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(f in m)c[f]=m[f];for(let O=0;O<C.length;O++)f=C[O],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function P(c){a.setTimeout(()=>{throw c},0)}function w(){var c=lm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class jr{constructor(){this.h=this.g=null}add(d,f){let m=yc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var yc=new j(()=>new z1,c=>c.reset());class z1{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _c,Ec=!1,lm=new jr,vI=()=>{let c=a.Promise.resolve(void 0);_c=()=>{c.then(q1)}};var q1=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){P(f)}var d=yc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ec=!1};function vi(){this.s=this.s,this.C=this.C}vi.prototype.s=!1,vi.prototype.ma=function(){this.s||(this.s=!0,this.N())},vi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var W1=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function wc(c,d){if(Ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ft){e:{try{xe(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:G1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&wc.aa.h.call(this)}}I(wc,Ht);var G1={2:"touch",3:"pen",4:"mouse"};wc.prototype.h=function(){wc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),K1=0;function Y1(c,d,f,m,S){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=S,this.key=++K1,this.da=this.fa=!1}function Zl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jl(c){this.src=c,this.g={},this.h=0}Jl.prototype.add=function(c,d,f,m,S){var O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);var B=hm(c,d,m,S);return-1<B?(d=c[B],f||(d.fa=!1)):(d=new Y1(d,this.src,O,!!m,S),d.fa=f,c.push(d)),d};function dm(c,d){var f=d.type;if(f in c.g){var m=c.g[f],S=Array.prototype.indexOf.call(m,d,void 0),O;(O=0<=S)&&Array.prototype.splice.call(m,S,1),O&&(Zl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function hm(c,d,f,m){for(var S=0;S<c.length;++S){var O=c[S];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==m)return S}return-1}var fm="closure_lm_"+(1e6*Math.random()|0),pm={};function yI(c,d,f,m,S){if(m&&m.once)return EI(c,d,f,m,S);if(Array.isArray(d)){for(var O=0;O<d.length;O++)yI(c,d[O],f,m,S);return null}return f=ym(f),c&&c[Cc]?c.K(d,f,l(m)?!!m.capture:!!m,S):_I(c,d,f,!1,m,S)}function _I(c,d,f,m,S,O){if(!d)throw Error("Invalid event type");var B=l(S)?!!S.capture:!!S,He=mm(c);if(He||(c[fm]=He=new Jl(c)),f=He.add(d,f,m,B,O),f.proxy)return f;if(m=Q1(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)W1||(S=B),S===void 0&&(S=!1),c.addEventListener(d.toString(),m,S);else if(c.attachEvent)c.attachEvent(CI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Q1(){function c(f){return d.call(c.src,c.listener,f)}let d=Z1;return c}function EI(c,d,f,m,S){if(Array.isArray(d)){for(var O=0;O<d.length;O++)EI(c,d[O],f,m,S);return null}return f=ym(f),c&&c[Cc]?c.L(d,f,l(m)?!!m.capture:!!m,S):_I(c,d,f,!0,m,S)}function wI(c,d,f,m,S){if(Array.isArray(d))for(var O=0;O<d.length;O++)wI(c,d[O],f,m,S);else m=l(m)?!!m.capture:!!m,f=ym(f),c&&c[Cc]?(c=c.i,d=String(d).toString(),d in c.g&&(O=c.g[d],f=hm(O,f,m,S),-1<f&&(Zl(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete c.g[d],c.h--)))):c&&(c=mm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=hm(d,f,m,S)),(f=-1<c?d[c]:null)&&gm(f))}function gm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Cc])dm(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(CI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=mm(d))?(dm(f,c),f.h==0&&(f.src=null,d[fm]=null)):Zl(c)}}}function CI(c){return c in pm?pm[c]:pm[c]="on"+c}function Z1(c,d){if(c.da)c=!0;else{d=new wc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&gm(c),c=f.call(m,d)}return c}function mm(c){return c=c[fm],c instanceof Jl?c:null}var vm="__closure_events_fn_"+(1e9*Math.random()>>>0);function ym(c){return typeof c=="function"?c:(c[vm]||(c[vm]=function(d){return c.handleEvent(d)}),c[vm])}function zt(){vi.call(this),this.i=new Jl(this),this.M=this,this.F=null}I(zt,vi),zt.prototype[Cc]=!0,zt.prototype.removeEventListener=function(c,d,f,m){wI(this,c,d,f,m)};function Jt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Ht(d,c);else if(d instanceof Ht)d.target=d.target||c;else{var S=d;d=new Ht(m,c),b(d,S)}if(S=!0,f)for(var O=f.length-1;0<=O;O--){var B=d.g=f[O];S=Xl(B,m,!0,d)&&S}if(B=d.g=c,S=Xl(B,m,!0,d)&&S,S=Xl(B,m,!1,d)&&S,f)for(O=0;O<f.length;O++)B=d.g=f[O],S=Xl(B,m,!1,d)&&S}zt.prototype.N=function(){if(zt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Zl(f[m]);delete c.g[d],c.h--}}this.F=null},zt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},zt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Xl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,O=0;O<d.length;++O){var B=d[O];if(B&&!B.da&&B.capture==f){var He=B.listener,Lt=B.ha||B.src;B.fa&&dm(c.i,B),S=He.call(Lt,m)!==!1&&S}}return S&&!m.defaultPrevented}function II(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function bI(c){c.g=II(()=>{c.g=null,c.i&&(c.i=!1,bI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class J1 extends vi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:bI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ic(c){vi.call(this),this.h=c,this.g={}}I(Ic,vi);var TI=[];function DI(c){je(c.g,function(d,f){this.g.hasOwnProperty(f)&&gm(d)},c),c.g={}}Ic.prototype.N=function(){Ic.aa.N.call(this),DI(this)},Ic.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _m=a.JSON.stringify,X1=a.JSON.parse,ek=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Em(){}Em.prototype.h=null;function SI(c){return c.h||(c.h=c.i())}function AI(){}var bc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wm(){Ht.call(this,"d")}I(wm,Ht);function Cm(){Ht.call(this,"c")}I(Cm,Ht);var ao={},MI=null;function ed(){return MI=MI||new zt}ao.La="serverreachability";function RI(c){Ht.call(this,ao.La,c)}I(RI,Ht);function Tc(c){let d=ed();Jt(d,new RI(d))}ao.STAT_EVENT="statevent";function PI(c,d){Ht.call(this,ao.STAT_EVENT,c),this.stat=d}I(PI,Ht);function Xt(c){let d=ed();Jt(d,new PI(d,c))}ao.Ma="timingevent";function OI(c,d){Ht.call(this,ao.Ma,c),this.size=d}I(OI,Ht);function Dc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Sc(){this.g=!0}Sc.prototype.xa=function(){this.g=!1};function tk(c,d,f,m,S,O){c.info(function(){if(c.g)if(O)for(var B="",He=O.split("&"),Lt=0;Lt<He.length;Lt++){var Oe=He[Lt].split("=");if(1<Oe.length){var qt=Oe[0];Oe=Oe[1];var Wt=qt.split("_");B=2<=Wt.length&&Wt[1]=="type"?B+(qt+"="+Oe+"&"):B+(qt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+d+`
`+f+`
`+B})}function nk(c,d,f,m,S,O,B){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+d+`
`+f+`
`+O+" "+B})}function Ms(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+ik(c,f)+(m?" "+m:"")})}function rk(c,d){c.info(function(){return"TIMEOUT: "+d})}Sc.prototype.info=function(){};function ik(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var S=m[1];if(Array.isArray(S)&&!(1>S.length)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<S.length;B++)S[B]=""}}}}return _m(f)}catch{return d}}var td={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},NI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Im;function nd(){}I(nd,Em),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},Im=new nd;function yi(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ic(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xI}function xI(){this.i=null,this.g="",this.h=!1}var kI={},bm={};function Tm(c,d,f){c.L=1,c.v=sd(Br(d)),c.m=f,c.P=!0,FI(c,null)}function FI(c,d){c.F=Date.now(),rd(c),c.A=Br(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),QI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new xI,c.g=pb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new J1(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var S="readystatechange";Array.isArray(S)||(S&&(TI[0]=S.toString()),S=TI);for(var O=0;O<S.length;O++){var B=yI(f,S[O],m||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Tc(),tk(c.i,c.u,c.A,c.l,c.R,c.m)}yi.prototype.ca=function(c){c=c.target;let d=this.M;d&&$r(c)==3?d.j():this.Y(c)},yi.prototype.Y=function(c){try{if(c==this.g)e:{let Wt=$r(this.g);var d=this.g.Ba();let Os=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||rb(this.g)))){this.J||Wt!=4||d==7||(d==8||0>=Os?Tc(3):Tc(2)),Dm(this);var f=this.g.Z();this.X=f;t:if(LI(this)){var m=rb(this.g);c="";var S=m.length,O=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){co(this),Ac(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(O&&d==S-1)});m.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,nk(this.i,this.u,this.A,this.l,this.R,Wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(He)){var Oe=He;break t}}Oe=null}if(f=Oe)Ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sm(this,f);else{this.o=!1,this.s=3,Xt(12),co(this),Ac(this);break e}}if(this.P){f=!0;let Wn;for(;!this.J&&this.C<B.length;)if(Wn=ok(this,B),Wn==bm){Wt==4&&(this.s=4,Xt(14),f=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==kI){this.s=4,Xt(15),Ms(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Ms(this.i,this.l,Wn,null),Sm(this,Wn);if(LI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||B.length!=0||this.h.h||(this.s=1,Xt(16),f=!1),this.o=this.o&&f,!f)Ms(this.i,this.l,B,"[Invalid Chunked Response]"),co(this),Ac(this);else if(0<B.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Nm(qt),qt.M=!0,Xt(11))}}else Ms(this.i,this.l,B,null),Sm(this,B);Wt==4&&co(this),this.o&&!this.J&&(Wt==4?lb(this.j,this):(this.o=!1,rd(this)))}else Ck(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),co(this),Ac(this)}}}catch{}finally{}};function LI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ok(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?bm:(f=Number(d.substring(f,m)),isNaN(f)?kI:(m+=1,m+f>d.length?bm:(d=d.slice(m,m+f),c.C=m+f,d)))}yi.prototype.cancel=function(){this.J=!0,co(this)};function rd(c){c.S=Date.now()+c.I,VI(c,c.I)}function VI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dc(g(c.ba,c),d)}function Dm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rk(this.i,this.A),this.L!=2&&(Tc(),Xt(17)),co(this),this.s=2,Ac(this)):VI(this,this.S-c)};function Ac(c){c.j.G==0||c.J||lb(c.j,c)}function co(c){Dm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,DI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Sm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Am(f.h,c))){if(!c.K&&Am(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)dd(f),ud(f);else break e;Om(f),Xt(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=Dc(g(f.Za,f),6e3));if(1>=BI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else lo(f,11)}else if((c.K||f.g==c)&&dd(f),!J(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let Oe=S[d];if(f.T=Oe[0],Oe=Oe[1],f.G==2)if(Oe[0]=="c"){f.K=Oe[1],f.ia=Oe[2];let qt=Oe[3];qt!=null&&(f.la=qt,f.j.info("VER="+f.la));let Wt=Oe[4];Wt!=null&&(f.Aa=Wt,f.j.info("SVER="+f.Aa));let Os=Oe[5];Os!=null&&typeof Os=="number"&&0<Os&&(m=1.5*Os,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Wn=c.g;if(Wn){let fd=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fd){var O=m.h;O.g||fd.indexOf("spdy")==-1&&fd.indexOf("quic")==-1&&fd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Mm(O,O.h),O.h=null))}if(m.D){let xm=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;xm&&(m.ya=xm,We(m.I,m.D,xm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var B=c;if(m.qa=fb(m,m.J?m.ia:null,m.W),B.K){$I(m.h,B);var He=B,Lt=m.L;Lt&&(He.I=Lt),He.B&&(Dm(He),rd(He)),m.g=B}else cb(m);0<f.i.length&&ld(f)}else Oe[0]!="stop"&&Oe[0]!="close"||lo(f,7);else f.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?lo(f,7):Pm(f):Oe[0]!="noop"&&f.l&&f.l.ta(Oe),f.v=0)}}Tc(4)}catch{}}var sk=class{constructor(c,d){this.g=c,this.map=d}};function UI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function BI(c){return c.h?1:c.g?c.g.size:0}function Am(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Mm(c,d){c.g?c.g.add(d):c.h=d}function $I(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}UI.prototype.cancel=function(){if(this.i=HI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function HI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function ak(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function ck(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function zI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=ck(c),m=ak(c),S=m.length,O=0;O<S;O++)d.call(void 0,m[O],f&&f[O],c)}var qI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),S=null;if(0<=m){var O=c[f].substring(0,m);S=c[f].substring(m+1)}else O=c[f];d(O,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function uo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof uo){this.h=c.h,id(this,c.j),this.o=c.o,this.g=c.g,od(this,c.s),this.l=c.l;var d=c.i,f=new Pc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),WI(this,f),this.m=c.m}else c&&(d=String(c).match(qI))?(this.h=!1,id(this,d[1]||"",!0),this.o=Mc(d[2]||""),this.g=Mc(d[3]||"",!0),od(this,d[4]),this.l=Mc(d[5]||"",!0),WI(this,d[6]||"",!0),this.m=Mc(d[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}uo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Rc(d,GI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Rc(d,GI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Rc(f,f.charAt(0)=="/"?hk:dk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Rc(f,pk)),c.join("")};function Br(c){return new uo(c)}function id(c,d,f){c.j=f?Mc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function od(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function WI(c,d,f){d instanceof Pc?(c.i=d,gk(c.i,c.h)):(f||(d=Rc(d,fk)),c.i=new Pc(d,c.h))}function We(c,d,f){c.i.set(d,f)}function sd(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Rc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,lk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var GI=/[#\/\?@]/g,dk=/[#\?:]/g,hk=/[#\?]/g,fk=/[#\?@]/g,pk=/#/g;function Pc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function _i(c){c.g||(c.g=new Map,c.h=0,c.i&&uk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Pc.prototype,t.add=function(c,d){_i(this),this.i=null,c=Rs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function KI(c,d){_i(c),d=Rs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function YI(c,d){return _i(c),d=Rs(c,d),c.g.has(d)}t.forEach=function(c,d){_i(this),this.g.forEach(function(f,m){f.forEach(function(S){c.call(d,S,m,this)},this)},this)},t.na=function(){_i(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let S=c[m];for(let O=0;O<S.length;O++)f.push(d[m])}return f},t.V=function(c){_i(this);let d=[];if(typeof c=="string")YI(this,c)&&(d=d.concat(this.g.get(Rs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return _i(this),this.i=null,c=Rs(this,c),YI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function QI(c,d,f){KI(c,d),0<f.length&&(c.i=null,c.g.set(Rs(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let O=encodeURIComponent(String(m)),B=this.V(m);for(m=0;m<B.length;m++){var S=O;B[m]!==""&&(S+="="+encodeURIComponent(String(B[m]))),c.push(S)}}return this.i=c.join("&")};function Rs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function gk(c,d){d&&!c.j&&(_i(c),c.i=null,c.g.forEach(function(f,m){var S=m.toLowerCase();m!=S&&(KI(this,m),QI(this,S,f))},c)),c.j=d}function mk(c,d){let f=new Sc;if(a.Image){let m=new Image;m.onload=v(Ei,f,"TestLoadImage: loaded",!0,d,m),m.onerror=v(Ei,f,"TestLoadImage: error",!1,d,m),m.onabort=v(Ei,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=v(Ei,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function vk(c,d){let f=new Sc,m=new AbortController,S=setTimeout(()=>{m.abort(),Ei(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(O=>{clearTimeout(S),O.ok?Ei(f,"TestPingServer: ok",!0,d):Ei(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Ei(f,"TestPingServer: error",!1,d)})}function Ei(c,d,f,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(f)}catch{}}function yk(){this.g=new ek}function _k(c,d,f){let m=f||"";try{zI(c,function(S,O){let B=S;l(S)&&(B=_m(S)),d.push(m+O+"="+encodeURIComponent(B))})}catch(S){throw d.push(m+"type="+encodeURIComponent("_badmap")),S}}function Oc(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Oc,Em),Oc.prototype.g=function(){return new ad(this.l,this.j)},Oc.prototype.i=(function(c){return function(){return c}})({});function ad(c,d){zt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ad,zt),t=ad.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,xc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xc(this)),this.g&&(this.readyState=3,xc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ZI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Nc(this):xc(this),this.readyState==3&&ZI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Nc(this))},t.Qa=function(c){this.g&&(this.response=c,Nc(this))},t.ga=function(){this.g&&Nc(this)};function Nc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function xc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function JI(c){let d="";return je(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Rm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=JI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):We(c,d,f))}function Ze(c){zt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ze,zt);var Ek=/^https?$/i,wk=["POST","PUT"];t=Ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Im.g(),this.v=this.o?SI(this.o):SI(Im),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(O){XI(this,O);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)f.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let O of m.keys())f.set(O,m.get(O));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wk,d,void 0))||m||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of f)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nb(this),this.u=!0,this.g.send(c),this.u=!1}catch(O){XI(this,O)}};function XI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,eb(c),cd(c)}function eb(c){c.A||(c.A=!0,Jt(c,"complete"),Jt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Jt(this,"complete"),Jt(this,"abort"),cd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cd(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tb(this):this.bb())},t.bb=function(){tb(this)};function tb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||$r(c)!=4||c.Z()!=2)){if(c.u&&$r(c)==4)II(c.Ea,0,c);else if(Jt(c,"readystatechange"),$r(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=B===0){var S=String(c.D).match(qI)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),m=!Ek.test(S?S.toLowerCase():"")}f=m}if(f)Jt(c,"complete"),Jt(c,"success");else{c.m=6;try{var O=2<$r(c)?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.Z()+"]",eb(c)}}finally{cd(c)}}}}function cd(c,d){if(c.g){nb(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Jt(c,"ready");try{f.onreadystatechange=m}catch{}}}function nb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function $r(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),X1(d)}};function rb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ck(c){let d={};c=(c.g&&2<=$r(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(J(c[m]))continue;var f=D(c[m]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let O=d[S]||[];d[S]=O,O.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function ib(c){this.Aa=0,this.i=[],this.j=new Sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,c),this.cb=kc("retryDelaySeedMs",1e4,c),this.Wa=kc("forwardChannelMaxRetries",2,c),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new UI(c&&c.concurrentRequestLimit),this.Da=new yk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ib.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Xt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=fb(this,null,this.W),ld(this)};function Pm(c){if(ob(c),c.G==3){var d=c.U++,f=Br(c.I);if(We(f,"SID",c.K),We(f,"RID",d),We(f,"TYPE","terminate"),Fc(c,f),d=new yi(c,c.j,d),d.L=2,d.v=sd(Br(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=pb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),rd(d)}hb(c)}function ud(c){c.g&&(Nm(c),c.g.cancel(),c.g=null)}function ob(c){ud(c),c.u&&(a.clearTimeout(c.u),c.u=null),dd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ld(c){if(!jI(c.h)&&!c.s){c.s=!0;var d=c.Ga;_c||vI(),Ec||(_c(),Ec=!0),lm.add(d,c),c.B=0}}function Ik(c,d){return BI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dc(g(c.Ga,c,d),db(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new yi(this,this.j,c),O=this.o;if(this.S&&(O?(O=E(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(S.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ab(this,S,d),f=Br(this.I),We(f,"RID",c),We(f,"CVER",22),this.D&&We(f,"X-HTTP-Session-Id",this.D),Fc(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(JI(O)))+"&"+d:this.m&&Rm(f,this.m,O)),Mm(this.h,S),this.Ua&&We(f,"TYPE","init"),this.P?(We(f,"$req",d),We(f,"SID","null"),S.T=!0,Tm(S,f,null)):Tm(S,f,d),this.G=2}}else this.G==3&&(c?sb(this,c):this.i.length==0||jI(this.h)||sb(this))};function sb(c,d){var f;d?f=d.l:f=c.U++;let m=Br(c.I);We(m,"SID",c.K),We(m,"RID",f),We(m,"AID",c.T),Fc(c,m),c.m&&c.o&&Rm(m,c.m,c.o),f=new yi(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ab(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Mm(c.h,f),Tm(f,m,d)}function Fc(c,d){c.H&&je(c.H,function(f,m){We(d,m,f)}),c.l&&zI({},function(f,m){We(d,m,f)})}function ab(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var S=c.i;let O=-1;for(;;){let B=["count="+f];O==-1?0<f?(O=S[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let He=!0;for(let Lt=0;Lt<f;Lt++){let Oe=S[Lt].g,qt=S[Lt].map;if(Oe-=O,0>Oe)O=Math.max(0,S[Lt].g-100),He=!1;else try{_k(qt,B,"req"+Oe+"_")}catch{m&&m(qt)}}if(He){m=B.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function cb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;_c||vI(),Ec||(_c(),Ec=!0),lm.add(d,c),c.v=0}}function Om(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dc(g(c.Fa,c),db(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ub(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),ud(this),ub(this))};function Nm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ub(c){c.g=new yi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Br(c.qa);We(d,"RID","rpc"),We(d,"SID",c.K),We(d,"AID",c.T),We(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(d,"TO",c.ja),We(d,"TYPE","xmlhttp"),Fc(c,d),c.m&&c.o&&Rm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=sd(Br(d)),f.m=null,f.P=!0,FI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,ud(this),Om(this),Xt(19))};function dd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function lb(c,d){var f=null;if(c.g==d){dd(c),Nm(c),c.g=null;var m=2}else if(Am(c.h,d))f=d.D,$I(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=c.B;m=ed(),Jt(m,new OI(m,f)),ld(c)}else cb(c);else if(S=d.s,S==3||S==0&&0<d.X||!(m==1&&Ik(c,d)||m==2&&Om(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),S){case 1:lo(c,5);break;case 4:lo(c,10);break;case 3:lo(c,6);break;default:lo(c,2)}}}function db(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function lo(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let S=!m;m=new uo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||id(m,"https"),sd(m),S?mk(m.toString(),f):vk(m.toString(),f)}else Xt(2);c.G=0,c.l&&c.l.sa(d),hb(c),ob(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function hb(c){if(c.G=0,c.ka=[],c.l){let d=HI(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function fb(c,d,f){var m=f instanceof uo?Br(f):new uo(f);if(m.g!="")d&&(m.g=d+"."+m.g),od(m,m.s);else{var S=a.location;m=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var O=new uo(null);m&&id(O,m),d&&(O.g=d),S&&od(O,S),f&&(O.l=f),m=O}return f=c.D,d=c.ya,f&&d&&We(m,f,d),We(m,"VER",c.la),Fc(c,m),m}function pb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ze(new Oc({eb:f})):new Ze(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gb(){}t=gb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hd(){}hd.prototype.g=function(c,d){return new gn(c,d)};function gn(c,d){zt.call(this),this.g=new ib(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!J(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!J(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ps(this)}I(gn,zt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Pm(this.g)},gn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=_m(c),c=f);d.i.push(new sk(d.Ya++,c)),d.G==3&&ld(d)},gn.prototype.N=function(){this.g.l=null,delete this.j,Pm(this.g),delete this.g,gn.aa.N.call(this)};function mb(c){wm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}I(mb,wm);function vb(){Cm.call(this),this.status=1}I(vb,Cm);function Ps(c){this.g=c}I(Ps,gb),Ps.prototype.ua=function(){Jt(this.g,"a")},Ps.prototype.ta=function(c){Jt(this.g,new mb(c))},Ps.prototype.sa=function(c){Jt(this.g,new vb)},Ps.prototype.ra=function(){Jt(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Qw=ui.createWebChannelTransport=function(){return new hd},Yw=ui.getStatEventTarget=function(){return ed()},Kw=ui.Event=ao,Xp=ui.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},td.NO_ERROR=0,td.TIMEOUT=8,td.HTTP_ERROR=6,bl=ui.ErrorCode=td,NI.COMPLETE="complete",Gw=ui.EventType=NI,AI.EventType=bc,bc.OPEN="a",bc.CLOSE="b",bc.ERROR="c",bc.MESSAGE="d",zt.prototype.listen=zt.prototype.K,qa=ui.WebChannel=AI,N5=ui.FetchXmlHttpFactory=Oc,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Ww=ui.XhrIo=Ze}).apply(typeof Jp<"u"?Jp:typeof self<"u"?self:typeof window<"u"?window:{});var ZO="@firebase/firestore",JO="4.8.0";var Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var hc="11.10.0";var Es=new Rr("@firebase/firestore");function Wa(){return Es.logLevel}function q(t,...e){if(Es.logLevel<=be.DEBUG){let n=e.map(U0);Es.debug(`Firestore (${hc}): ${t}`,...n)}}function li(t,...e){if(Es.logLevel<=be.ERROR){let n=e.map(U0);Es.error(`Firestore (${hc}): ${t}`,...n)}}function eo(t,...e){if(Es.logLevel<=be.WARN){let n=e.map(U0);Es.warn(`Firestore (${hc}): ${t}`,...n)}}function U0(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,zN(t,r,n)}function zN(t,e,n){let r=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw li(r),new Error(r)}function Ue(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||zN(e,i,r)}function fe(t,e){return t}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Or=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var sg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}},nC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},rC=class{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Or,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Or)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new sg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}},iC=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},oC=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new iC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ag=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sC=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ag(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ag(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function x5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function qN(){return new TextEncoder}var Rl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=x5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function we(t,e){return t<e?-1:t>e?1:0}function aC(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return we(r,i);{let o=qN(),s=k5(o.encode(XO(t,n)),o.encode(XO(e,n)));return s!==0?s:we(r,i)}}n+=r>65535?2:1}return we(t.length,e.length)}function XO(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function k5(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return we(t[n],e[n]);return we(t.length,e.length)}function Xa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var eN="__name__",cg=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return we(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):aC(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ci.fromString(e.substring(4,e.length-2))}},Ye=class t extends cg{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},F5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nn=class t extends cg{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return F5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eN}static keyField(){return new t([eN])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ne=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ye.fromString(e))}static fromName(e){return new t(Ye.fromString(e).popFirst(5))}static empty(){return new t(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ye(e.slice()))}};function WN(t,e,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function L5(t,e,n,r){if(e===!0&&r===!0)throw new z(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tN(t){if(!ne.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nN(t){if(ne.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=jg(t);throw new z(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function wt(t,e){let n={typeString:t};return e&&(n.value=e),n}function Hl(t,e){if(!GN(t))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}var rN=-62135596800,iN=1e6,Ct=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*iN);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rN)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iN}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:wt("string",Ct._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};var ge=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ct(0,0))}static max(){return new t(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Pl=-1,cC=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};cC.UNKNOWN_ID=-1;function V5(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new ws(i,ne.empty(),e)}function U5(t){return new ws(t.readTime,t.key,Pl)}var ws=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ge.min(),ne.empty(),Pl)}static max(){return new t(ge.max(),ne.empty(),Pl)}};function j5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}var B5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fc(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==B5)throw t;q("LocalStore","Unexpectedly lost primary lease")}var U=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function $5(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pc(t){return t.name==="IndexedDbTransactionError"}var j0=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),B0=-1;function Bg(t){return t==null}function Ol(t){return t===0&&1/t==-1/0}function H5(t){return typeof t=="number"&&Number.isInteger(t)&&!Ol(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var KN="";function z5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oN(e)),e=q5(t.get(n),e);return oN(e)}function q5(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case KN:n+="";break;default:n+=o}}return n}function oN(t){return t+KN+""}var W5="remoteDocuments",YN="owner";var QN="mutationQueues";var ZN="mutations";var JN="documentMutations",G5="remoteDocumentsV14";var XN="remoteDocumentGlobal";var ex="targets";var tx="targetDocuments";var nx="targetGlobal",rx="collectionParents";var ix="clientMetadata";var ox="bundles";var sx="namedQueries";var K5="indexConfiguration";var Y5="indexState";var Q5="indexEntries";var ax="documentOverlays";var Z5="globals";var J5=[QN,ZN,JN,W5,ex,YN,nx,tx,ix,XN,rx,ox,sx],Hle=[...J5,ax],X5=[QN,ZN,JN,G5,ex,YN,nx,tx,ix,XN,rx,ox,sx,ax],eq=X5,tq=[...eq,K5,Y5,Q5];var zle=[...tq,Z5];function sN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function io(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var nt=class t{constructor(e,n){this.comparator=e,this.root=n||Nr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}},Qa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}};Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xt=class t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ug(this.data.getIterator())}getIteratorFrom(e){return new ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ug=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var zn=class t{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new t([])}unionWith(e){let n=new xt(Nn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var lg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Zt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lg("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zt.EMPTY_BYTE_STRING=new Zt("");var nq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(t){if(Ue(!!t,39018),typeof t=="string"){let e=0,n=nq.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hi(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}var ux="server_timestamp",lx="__type__",dx="__previous_value__",hx="__local_write_time__";function $0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[lx])===null||n===void 0?void 0:n.stringValue)===ux}function $g(t){let e=t.mapValue.fields[dx];return $0(e)?$g(e):e}function Nl(t){let e=di(t.mapValue.fields[hx].timestampValue);return new Ct(e.seconds,e.nanos)}var lC=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},dg="(default)",hg=class t{constructor(e,n){this.projectId=e,this.database=n||dg}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===dg}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var H0="__type__",fx="__max__",eg={mapValue:{fields:{__type__:{stringValue:fx}}}},z0="__vector__",ec="value";function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$0(t)?4:gx(t)?9007199254740991:px(t)?10:11:ie(28295,{value:t})}function Lr(t,e){if(t===e)return!0;let n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nl(t).isEqual(Nl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=di(i.timestampValue),a=di(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return hi(i.bytesValue).isEqual(hi(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ke(i.geoPointValue.latitude)===Ke(o.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ke(i.integerValue)===Ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ke(i.doubleValue),a=Ke(o.doubleValue);return s===a?Ol(s)===Ol(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Xa(t.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(sN(s)!==sN(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Lr(s[u],a[u])))return!1;return!0})(t,e);default:return ie(52216,{left:t})}}function xl(t,e){return(t.values||[]).find(n=>Lr(n,e))!==void 0}function tc(t,e){if(t===e)return 0;let n=to(t),r=to(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ke(o.integerValue||o.doubleValue),u=Ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return aN(t.timestampValue,e.timestampValue);case 4:return aN(Nl(t),Nl(e));case 5:return aC(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=hi(o),u=hi(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=we(a[l],u[l]);if(h!==0)return h}return we(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=we(Ke(o.latitude),Ke(s.latitude));return a!==0?a:we(Ke(o.longitude),Ke(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return cN(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},v=(a=p[ec])===null||a===void 0?void 0:a.arrayValue,I=(u=g[ec])===null||u===void 0?void 0:u.arrayValue,N=we(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:cN(v,I)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===eg.mapValue&&s===eg.mapValue)return 0;if(o===eg.mapValue)return 1;if(s===eg.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=aC(u[p],h[p]);if(g!==0)return g;let v=tc(a[u[p]],l[h[p]]);if(v!==0)return v}return we(u.length,h.length)})(t.mapValue,e.mapValue);default:throw ie(23264,{le:n})}}function aN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);let n=di(t),r=di(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function cN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=tc(n[i],r[i]);if(o)return o}return we(n.length,r.length)}function nc(t){return dC(t)}function dC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=di(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return hi(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=dC(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${dC(n.fields[s])}`;return i+"}"})(t.mapValue):ie(61005,{value:t})}function rg(t){switch(to(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$g(t);return e?16+rg(e):16;case 5:return 2*t.stringValue.length;case 6:return hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+rg(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return io(r.fields,(o,s)=>{i+=o.length+rg(s)}),i})(t.mapValue);default:throw ie(13486,{value:t})}}function uN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hC(t){return!!t&&"integerValue"in t}function q0(t){return!!t&&"arrayValue"in t}function lN(t){return!!t&&"nullValue"in t}function dN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ig(t){return!!t&&"mapValue"in t}function px(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[H0])===null||n===void 0?void 0:n.stringValue)===z0}function Dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return io(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fx}var Wle={mapValue:{fields:{[H0]:{stringValue:z0},[ec]:{arrayValue:{}}}}};var On=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ig(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=Nn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Dl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ig(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ig(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){io(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Dl(this.value))}};function mx(t){let e=[];return io(t.fields,(n,r)=>{let i=new Nn([n]);if(ig(r)){let o=mx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new zn(e)}var cr=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ge.min(),ge.min(),ge.min(),On.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ge.min(),ge.min(),On.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ge.min(),ge.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rc=class{constructor(e,n){this.position=e,this.inclusive=n}};function hN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),n.key):r=tc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lr(t.position[n],e.position[n]))return!1;return!0}var ic=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function rq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var fg=class{},Et=class t extends fg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pC(e,n,r):n==="array-contains"?new vC(e,r):n==="in"?new yC(e,r):n==="not-in"?new _C(e,r):n==="array-contains-any"?new EC(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gC(e,r):new mC(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tc(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(tc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ur=class t extends fg{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return vx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function vx(t){return t.op==="and"}function yx(t){return iq(t)&&vx(t)}function iq(t){for(let e of t.filters)if(e instanceof ur)return!1;return!0}function fC(t){if(t instanceof Et)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(yx(t))return t.filters.map(e=>fC(e)).join(",");{let e=t.filters.map(n=>fC(n)).join(",");return`${t.op}(${e})`}}function _x(t,e){return t instanceof Et?(function(r,i){return i instanceof Et&&r.op===i.op&&r.field.isEqual(i.field)&&Lr(r.value,i.value)})(t,e):t instanceof ur?(function(r,i){return i instanceof ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_x(s,i.filters[a]),!0):!1})(t,e):void ie(19439)}function Ex(t){return t instanceof Et?(function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`})(t):t instanceof ur?(function(n){return n.op.toString()+" {"+n.getFilters().map(Ex).join(" ,")+"}"})(t):"Filter"}var pC=class extends Et{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){let n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}},gC=class extends Et{constructor(e,n){super(e,"in",n),this.keys=wx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},mC=class extends Et{constructor(e,n){super(e,"not-in",n),this.keys=wx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function wx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}var vC=class extends Et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return q0(n)&&xl(n.arrayValue,this.value)}},yC=class extends Et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&xl(this.value.arrayValue,n)}},_C=class extends Et{constructor(e,n){super(e,"not-in",n)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xl(this.value.arrayValue,n)}},EC=class extends Et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!q0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xl(this.value.arrayValue,r))}};var wC=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function pN(t,e=null,n=[],r=[],i=null,o=null,s=null){return new wC(t,e,n,r,i,o,s)}function W0(t){let e=fe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Bg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e.Pe=n}return e.Pe}function G0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_x(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fN(t.startAt,e.startAt)&&fN(t.endAt,e.endAt)}function CC(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Cs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function oq(t,e,n,r,i,o,s,a){return new Cs(t,e,n,r,i,o,s,a)}function K0(t){return new Cs(t)}function gN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cx(t){return t.collectionGroup!==null}function Sl(t){let e=fe(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new xt(Nn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ic(o,r))}),n.has(Nn.keyField().canonicalString())||e.Te.push(new ic(Nn.keyField(),r))}return e.Te}function xr(t){let e=fe(t);return e.Ie||(e.Ie=sq(e,Sl(t))),e.Ie}function sq(t,e){if(t.limitType==="F")return pN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ic(i.field,o)});let n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return pN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function IC(t,e){let n=t.filters.concat([e]);return new Cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bC(t,e,n){return new Cs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hg(t,e){return G0(xr(t),xr(e))&&t.limitType===e.limitType}function Ix(t){return`${W0(xr(t))}|lt:${t.limitType}`}function Ga(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ex(i)).join(", ")}]`),Bg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`})(xr(t))}; limitType=${t.limitType})`}function zg(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Sl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=hN(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Sl(r),i)||r.endAt&&!(function(s,a,u){let l=hN(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Sl(r),i))})(t,e)}function aq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bx(t){return(e,n)=>{let r=!1;for(let i of Sl(t)){let o=cq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cq(t,e,n){let r=t.field.isKeyField()?ne.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?tc(u,l):ie(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}var fi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cx(this.inner)}size(){return this.innerSize}};var uq=new nt(ne.comparator);function pi(){return uq}var Tx=new nt(ne.comparator);function Tl(...t){let e=Tx;for(let n of t)e=e.insert(n.key,n);return e}function Dx(t){let e=Tx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return Al()}function Sx(){return Al()}function Al(){return new fi(t=>t.toString(),(t,e)=>t.isEqual(e))}var lq=new nt(ne.comparator),dq=new xt(ne.comparator);function Se(...t){let e=dq;for(let n of t)e=e.add(n);return e}var hq=new xt(we);function fq(){return hq}function Y0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function Ax(t){return{integerValue:""+t}}function pq(t,e){return H5(e)?Ax(e):Y0(t,e)}var oc=class{constructor(){this._=void 0}};function gq(t,e,n){return t instanceof sc?(function(i,o){let s={fields:{[lx]:{stringValue:ux},[hx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&$0(o)&&(o=$g(o)),o&&(s.fields[dx]=o),{mapValue:s}})(n,e):t instanceof Is?Rx(t,e):t instanceof bs?Px(t,e):(function(i,o){let s=Mx(i,o),a=mN(s)+mN(i.Ee);return hC(s)&&hC(i.Ee)?Ax(a):Y0(i.serializer,a)})(t,e)}function mq(t,e,n){return t instanceof Is?Rx(t,e):t instanceof bs?Px(t,e):n}function Mx(t,e){return t instanceof ac?(function(r){return hC(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var sc=class extends oc{},Is=class extends oc{constructor(e){super(),this.elements=e}};function Rx(t,e){let n=Ox(e);for(let r of t.elements)n.some(i=>Lr(i,r))||n.push(r);return{arrayValue:{values:n}}}var bs=class extends oc{constructor(e){super(),this.elements=e}};function Px(t,e){let n=Ox(e);for(let r of t.elements)n=n.filter(i=>!Lr(i,r));return{arrayValue:{values:n}}}var ac=class extends oc{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function mN(t){return Ke(t.integerValue||t.doubleValue)}function Ox(t){return q0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vq(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Is&&i instanceof Is||r instanceof bs&&i instanceof bs?Xa(r.elements,i.elements,Lr):r instanceof ac&&i instanceof ac?Lr(r.Ee,i.Ee):r instanceof sc&&i instanceof sc})(t.transform,e.transform)}var TC=class{constructor(e,n){this.version=e,this.transformResults=n}},kr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function og(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var cc=class{};function Nx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kl(t.key,kr.none()):new Ts(t.key,t.data,kr.none());{let n=t.data,r=On.empty(),i=new xt(Nn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Vr(t.key,r,new zn(i.toArray()),kr.none())}}function yq(t,e,n){t instanceof Ts?(function(i,o,s){let a=i.value.clone(),u=yN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Vr?(function(i,o,s){if(!og(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(xx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Ml(t,e,n,r){return t instanceof Ts?(function(o,s,a,u){if(!og(o.precondition,s))return a;let l=o.value.clone(),h=_N(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Vr?(function(o,s,a,u){if(!og(o.precondition,s))return a;let l=_N(o.fieldTransforms,u,s),h=s.data;return h.setAll(xx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return og(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function _q(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=Mx(r.transform,i||null);o!=null&&(n===null&&(n=On.empty()),n.set(r.field,o))}return n||null}function vN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(o,s)=>vq(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ts=class extends cc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vr=class extends cc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function yN(t,e,n){let r=new Map;Ue(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,mq(s,a,n[i]))}return r}function _N(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,gq(o,s,e))}return r}var kl=class extends cc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},DC=class extends cc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var SC=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Sx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=Nx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>vN(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>vN(n,r))}},AC=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return lq})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var MC=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var RC=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var yt,Pe;function Eq(t){switch(t){case k.OK:return ie(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function kx(t){if(t===void 0)return li("GRPC error has no .code"),k.UNKNOWN;switch(t){case yt.OK:return k.OK;case yt.CANCELLED:return k.CANCELLED;case yt.UNKNOWN:return k.UNKNOWN;case yt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case yt.INTERNAL:return k.INTERNAL;case yt.UNAVAILABLE:return k.UNAVAILABLE;case yt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case yt.NOT_FOUND:return k.NOT_FOUND;case yt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case yt.ABORTED:return k.ABORTED;case yt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case yt.DATA_LOSS:return k.DATA_LOSS;default:return ie(39323,{code:t})}}(Pe=yt||(yt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var EN=null;var wq=new ci([4294967295,4294967295],0);function wN(t){let e=qN().encode(t),n=new qw;return n.update(e),new Uint8Array(n.digest())}function CN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ci([n,r],0),new ci([i,o],0)]}var PC=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ms(`Invalid padding: ${n}`);if(r<0)throw new ms(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ms(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ms(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ci.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ci.fromNumber(r)));return i.compare(wq)===1&&(i=new ci([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=wN(e),[r,i]=CN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=wN(e),[r,i]=CN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ms=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pg=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ge.min(),i,new nt(we),pi(),Se())}},Fl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Se(),Se(),Se())}};var Za=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},gg=class{constructor(e,n){this.targetId=e,this.De=n}},mg=class{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vg=class{constructor(){this.ve=0,this.Ce=IN(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Se(),n=Se(),r=Se();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie(38017,{changeType:o})}}),new Fl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=IN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},OC=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=pi(),this.je=tg(),this.Je=tg(),this.He=new nt(we)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(CC(o))if(r===0){let s=new ne(o.path);this.Xe(n,s,cr.newNoDocument(s,ge.min()))}else Ue(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}EN?.ct((function(h,p,g,v,I){var N,x,j,J,ce,xe;let Ft={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},je=p.unchangedNames;return je&&(Ft.bloomFilter={applied:I===0,hashCount:(N=je?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(J=(j=(x=je?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&J!==void 0?J:0,padding:(xe=(ce=je?.bits)===null||ce===void 0?void 0:ce.padding)!==null&&xe!==void 0?xe:0,mightContain:T=>{var E;return(E=v?.mightContain(T))!==null&&E!==void 0&&E}}),Ft})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=hi(r).toUint8Array()}catch(u){if(u instanceof lg)return eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new PC(s,i,o)}catch(u){return eo(u instanceof ms?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&CC(a.target)){let u=new ne(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,cr.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Se();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new pg(e,n,this.He,this.ze,r);return this.ze=pi(),this.je=tg(),this.Je=tg(),this.He=new nt(we),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new vg,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new xt(we),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new xt(we),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vg),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function tg(){return new nt(ne.comparator)}function IN(){return new nt(ne.comparator)}var Cq={asc:"ASCENDING",desc:"DESCENDING"},Iq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bq={and:"AND",or:"OR"},NC=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function xC(t,e){return t.useProto3Json||Bg(e)?e:{value:e}}function yg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tq(t,e){return yg(t,e.toTimestamp())}function Fr(t){return Ue(!!t,49232),ge.fromTimestamp((function(n){let r=di(n);return new Ct(r.seconds,r.nanos)})(t))}function Q0(t,e){return kC(t,e).canonicalString()}function kC(t,e){let n=(function(i){return new Ye(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Lx(t){let e=Ye.fromString(t);return Ue($x(e),10190,{key:e.toString()}),e}function FC(t,e){return Q0(t.databaseId,e.path)}function Zw(t,e){let n=Lx(e);if(n.get(1)!==t.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(Ux(n))}function Vx(t,e){return Q0(t.databaseId,e)}function Dq(t){let e=Lx(t);return e.length===4?Ye.emptyPath():Ux(e)}function LC(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ux(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bN(t,e,n){return{name:FC(t,e),fields:n.value.mapValue.fields}}function Sq(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),Zt.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Zt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?k.UNKNOWN:kx(l.code);return new z(h,l.message||"")})(s);n=new mg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Zw(t,r.document.name),o=Fr(r.document.updateTime),s=r.document.createTime?Fr(r.document.createTime):ge.min(),a=new On({mapValue:{fields:r.document.fields}}),u=cr.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Za(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Zw(t,r.document),o=r.readTime?Fr(r.readTime):ge.min(),s=cr.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Za([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Zw(t,r.document),o=r.removedTargetIds||[];n=new Za([],o,i,null)}else{if(!("filter"in e))return ie(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new RC(i,o),a=r.targetId;n=new gg(a,s)}}return n}function Aq(t,e){let n;if(e instanceof Ts)n={update:bN(t,e.key,e.value)};else if(e instanceof kl)n={delete:FC(t,e.key)};else if(e instanceof Vr)n={update:bN(t,e.key,e.data),updateMask:Lq(e.fieldMask)};else{if(!(e instanceof DC))return ie(16599,{Rt:e.type});n={verify:FC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof sc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ac)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ie(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Tq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie(27497)})(t,e.precondition)),n}function Mq(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Fr(i.updateTime):Fr(o);return s.isEqual(ge.min())&&(s=Fr(o)),new TC(s,i.transformResults||[])})(n,e))):[]}function Rq(t,e){return{documents:[Vx(t,e.path)]}}function Pq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vx(t,i);let o=(function(l){if(l.length!==0)return Bx(ur.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Ka(g.field),direction:xq(g.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=xC(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function Oq(t){let e=Dq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ue(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let g=jx(p);return g instanceof ur&&yx(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(I){return new ic(Ya(I.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Bg(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,v=p.values||[];return new rc(v,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,v=p.values||[];return new rc(v,g)})(n.endAt)),oq(e,i,s,o,a,"F",u,l)}function Nq(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jx(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ya(n.unaryFilter.field);return Et.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ya(n.unaryFilter.field);return Et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ya(n.unaryFilter.field);return Et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ya(n.unaryFilter.field);return Et.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Et.create(Ya(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return ur.create(n.compositeFilter.filters.map(r=>jx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie(1026)}})(n.compositeFilter.op))})(t):ie(30097,{filter:t})}function xq(t){return Cq[t]}function kq(t){return Iq[t]}function Fq(t){return bq[t]}function Ka(t){return{fieldPath:t.canonicalString()}}function Ya(t){return Nn.fromServerFormat(t.fieldPath)}function Bx(t){return t instanceof Et?(function(n){if(n.op==="=="){if(dN(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(lN(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dN(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(lN(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:kq(n.op),value:n.value}}})(t):t instanceof ur?(function(n){let r=n.getFilters().map(i=>Bx(i));return r.length===1?r[0]:{compositeFilter:{op:Fq(n.op),filters:r}}})(t):ie(54877,{filter:t})}function Lq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $x(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ll=class t{constructor(e,n,r,i,o=ge.min(),s=ge.min(),a=Zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var VC=class{constructor(e){this.gt=e}};function Vq(t){let e=Oq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bC(e,e.limit,"L"):e}var _g=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ke(e.integerValue));else if("doubleValue"in e){let r=Ke(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Ol(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=di(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(hi(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?gx(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):px(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):ie(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ec,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ke(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),ne.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};_g.Ut=new _g;var UC=class{constructor(){this.Dn=new jC}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ws.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}},jC=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(Ye.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Ye.comparator)).toArray()}};var Gle=new Uint8Array(0);var TN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hx=41943040,Hn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(Hx,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);var Vl=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var DN="LruGarbageCollector",Uq=1048576;function SN([t,e],[n,r]){let i=we(t,n);return i===0?we(e,r):i}var BC=class{constructor(e){this.Tr=e,this.buffer=new xt(SN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();SN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},$C=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){q(DN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pc(n)?q(DN,"Ignoring IndexedDB error during garbage collection: ",n):await fc(n)}await this.Rr(3e5)})}},HC=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(j0.ue);let r=new BC(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(TN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Wa()<=be.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jq(t,e){return new HC(t,e)}var zC=class{constructor(){this.changes=new fi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qC=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var WC=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ml(r.mutation,i,zn.empty(),Ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){let i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Tl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=pi(),s=Al(),a=(function(){return Al()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Vr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ml(h.mutation,l,h.mutation.getFieldMask(),Ct.now())):s.set(l.key,zn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new qC(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Al(),i=new nt((s,a)=>s-a),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||zn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Sx();h.forEach(g=>{if(!o.has(g)){let v=Nx(n.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):U.resolve(gs()),a=Pl,u=o;return s.next(l=>U.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Se())).next(h=>({batchId:a,changes:Dx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Tl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Tl();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,u=>{let l=(function(p,g){return new Cs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,cr.newInvalidDocument(h)))});let a=Tl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ml(h.mutation,l,zn.empty(),Ct.now()),zg(n,l)&&(a=a.insert(u,l))}),a})}};var GC=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Fr(i.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:Vq(i.bundledQuery),readTime:Fr(i.readTime)}})(n)),U.resolve()}};var KC=class{constructor(){this.overlays=new nt(ne.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){let r=gs();return U.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){let i=gs(),o=n.length+1,s=new ne(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new nt((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=gs(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=gs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return U.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new MC(n,r));let o=this.kr.get(n);o===void 0&&(o=Se(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var YC=class{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}};var Ul=class{constructor(){this.qr=new xt(_t.Qr),this.$r=new xt(_t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new _t(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new _t(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new ne(new Ye([])),r=new _t(n,e),i=new _t(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new ne(new Ye([])),r=new _t(n,e),i=new _t(n,e+1),o=Se();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new _t(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},_t=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ne.comparator(e.key,n.key)||we(e.Hr,n.Hr)}static Ur(e,n){return we(e.Hr,n.Hr)||ne.comparator(e.key,n.key)}};var QC=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new xt(_t.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new SC(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?B0:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new _t(n,0),i=new _t(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(we);return n.forEach(i=>{let o=new _t(i,0),s=new _t(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;ne.isDocumentKey(o)||(o=o.child(""));let s=new _t(new ne(o),0),a=new xt(we);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),U.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,i=>{let o=new _t(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new _t(n,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ZC=class{constructor(e){this.ni=e,this.docs=(function(){return new nt(ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():cr.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=pi(),s=n.path,a=new ne(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||j5(U5(h),r)<=0||(i.has(h.key)||zg(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ie(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JC(this)}getSize(e){return U.resolve(this.size)}},JC=class extends zC{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var XC=class{constructor(e){this.persistence=e,this.ii=new fi(n=>W0(n),G0),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.si=0,this.oi=new Ul,this.targetCount=0,this._i=Vl.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}};var Eg=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new j0(0),this.ci=!1,this.ci=!0,this.li=new YC,this.referenceDelegate=e(this),this.hi=new XC(this),this.indexManager=new UC,this.remoteDocumentCache=(function(i){return new ZC(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new VC(n),this.Ti=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new QC(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);let i=new e0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},e0=class extends uC{constructor(e){super(),this.currentSequenceNumber=e}},t0=class t{constructor(e){this.persistence=e,this.Ai=new Ul,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw ie(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{let i=ne.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ge.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},wg=class t{constructor(e,n){this.persistence=e,this.gi=new fi(r=>z5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ge.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rg(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var n0=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Se(),i=Se();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var r0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var i0=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return eO()?8:$5(Pn())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new r0;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Wa()<=be.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Wa()<=be.DEBUG&&q("QueryEngine","Query:",Ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Wa()<=be.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):U.resolve())}ps(e,n){if(gN(n))return U.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bC(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Se(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,bC(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return gN(n)||i.isEqual(ge.min())?U.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?U.resolve(null):(Wa()<=be.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ga(n)),this.vs(e,s,n,V5(i,Pl)).next(a=>a))})}bs(e,n){let r=new xt(bx(e));return n.forEach((i,o)=>{zg(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Wa()<=be.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ga(n)),this.gs.getDocumentsMatchingQuery(e,n,ws.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Z0="LocalStore",Bq=3e8,o0=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new nt(we),this.Ms=new fi(o=>W0(o),G0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function $q(t,e,n,r){return new o0(t,e,n,r)}async function zx(t,e){let n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function Hq(t,e){let n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),v=U.resolve();return g.forEach(I=>{v=v.next(()=>h.getEntry(u,I)).next(N=>{let x=l.docVersions.get(I);Ue(x!==null,48541),N.version.compareTo(x)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=Se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qx(t){let e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function zq(t,e){let n=fe(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Zt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),(function(N,x,j){return N.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Bq?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,v,h)&&a.push(n.hi.updateTargetData(o,v))});let u=pi(),l=Se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(qq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ge.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function qq(t,e,n){let r=Se(),i=Se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=pi();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ge.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):q(Z0,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Wq(t,e){let n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=B0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gq(t,e){let n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ll(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function s0(t,e,n){let r=fe(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pc(s))throw s;q(Z0,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function AN(t,e,n){let r=fe(t),i=ge.min(),o=Se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=fe(u),g=p.Ms.get(h);return g!==void 0?U.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ge.min(),n?o:Se())).next(a=>(Kq(r,aq(e),a),{documents:a,qs:o})))}function Kq(t,e,n){let r=t.xs.get(e)||ge.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Cg=class{constructor(){this.activeTargetIds=fq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var a0=class{constructor(){this.Fo=new Cg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Cg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var c0=class{xo(e){}shutdown(){}};var MN="ConnectivityMonitor",Ig=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){q(MN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){q(MN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ng=null;function u0(){return ng===null?ng=(function(){return 268435456+Math.round(2147483648*Math.random())})():ng++,"0x"+ng.toString(16)}var Jw="RestConnection",Yq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},l0=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===dg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=u0(),a=this.Go(e,n.toUriEncodedString());q(Jw,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=os(l);return this.jo(e,a,u,r,h).then(p=>(q(Jw,`Received RPC '${e}' ${s}: `,p),p),p=>{throw eo(Jw,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Yq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var d0=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Qt="WebChannelConnection",h0=class extends l0{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=u0();return new Promise((a,u)=>{let l=new Ww;l.setWithCredentials(!0),l.listenOnce(Gw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bl.NO_ERROR:let p=l.getResponseJson();q(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case bl.TIMEOUT:q(Qt,`RPC '${e}' ${s} timed out`),u(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:let g=l.getStatus();if(q(Qt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);let I=v?.error;if(I&&I.status&&I.message){let N=(function(j){let J=j.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(J)>=0?J:k.UNKNOWN})(I.status);u(new z(N,I.message))}else u(new z(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new z(k.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{q(Qt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);q(Qt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=u0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qw(),a=Yw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");q(Qt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,v=!1,I=new d0({Ho:x=>{v?q(Qt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(q(Qt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),q(Qt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Yo:()=>p.close()}),N=(x,j,J)=>{x.listen(j,ce=>{try{J(ce)}catch(xe){setTimeout(()=>{throw xe},0)}})};return N(p,qa.EventType.OPEN,()=>{v||(q(Qt,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),N(p,qa.EventType.CLOSE,()=>{v||(v=!0,q(Qt,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),N(p,qa.EventType.ERROR,x=>{v||(v=!0,eo(Qt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),I.__(new z(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,qa.EventType.MESSAGE,x=>{var j;if(!v){let J=x.data[0];Ue(!!J,16349);let ce=J,xe=ce?.error||((j=ce[0])===null||j===void 0?void 0:j.error);if(xe){q(Qt,`RPC '${e}' stream ${i} received error:`,xe);let Ft=xe.status,je=(function(C){let b=yt[C];if(b!==void 0)return kx(b)})(Ft),T=xe.message;je===void 0&&(je=k.INTERNAL,T="Unknown error status: "+Ft+" with message "+xe.message),v=!0,I.__(new z(je,T)),p.close()}else q(Qt,`RPC '${e}' stream ${i} received:`,J),I.a_(J)}}),N(a,Kw.STAT_EVENT,x=>{x.stat===Xp.PROXY?q(Qt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Xp.NOPROXY&&q(Qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function Xw(){return typeof document<"u"?document:null}function qg(t){return new NC(t,!0)}var bg=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var RN="PersistentStream",Tg=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new bg(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new z(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return q(RN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(q(RN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},f0=class extends Tg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=Sq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ge.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ge.min():s.readTime?Fr(s.readTime):ge.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=LC(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=CC(u)?{documents:Rq(o,u)}:{query:Pq(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Fx(o,s.resumeToken);let l=xC(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ge.min())>0){a.readTime=yg(o,s.snapshotVersion.toTimestamp());let l=xC(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Nq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=LC(this.serializer),n.removeTarget=e,this.k_(n)}},p0=class extends Tg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=Mq(e.writeResults,e.commitTime),r=Fr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=LC(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Aq(this.serializer,r))};this.k_(n)}};var g0=class{},m0=class extends g0{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,kC(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(k.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,kC(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},v0=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(li(n),this._a=!1):q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ds="RemoteStore",y0=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{As(this)&&(q(Ds,"Restarting streams for network reachability change."),await(async function(u){let l=fe(u);l.Ia.add(4),await zl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Wg(l)})(this))})}),this.Aa=new v0(r,i)}};async function Wg(t){if(As(t))for(let e of t.da)await e(!0)}async function zl(t){for(let e of t.da)await e(!1)}function Wx(t,e){let n=fe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),tI(n)?eI(n):gc(n).x_()&&X0(n,e))}function J0(t,e){let n=fe(t),r=gc(n);n.Ta.delete(e),r.x_()&&Gx(n,e),n.Ta.size===0&&(r.x_()?r.B_():As(n)&&n.Aa.set("Unknown"))}function X0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gc(t).H_(e)}function Gx(t,e){t.Ra.$e(e),gc(t).Y_(e)}function eI(t){t.Ra=new OC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),gc(t).start(),t.Aa.aa()}function tI(t){return As(t)&&!gc(t).M_()&&t.Ta.size>0}function As(t){return fe(t).Ia.size===0}function Kx(t){t.Ra=void 0}async function Qq(t){t.Aa.set("Online")}async function Zq(t){t.Ta.forEach((e,n)=>{X0(t,e)})}async function Jq(t,e){Kx(t),tI(t)?(t.Aa.la(e),eI(t)):t.Aa.set("Unknown")}async function Xq(t,e,n){if(t.Aa.set("Online"),e instanceof mg&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){q(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dg(t,r)}else if(e instanceof Za?t.Ra.Ye(e):e instanceof gg?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ge.min()))try{let r=await qx(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Zt.EMPTY_BYTE_STRING,h.snapshotVersion)),Gx(o,u);let p=new Ll(h.target,u,l,h.sequenceNumber);X0(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){q(Ds,"Failed to raise snapshot:",r),await Dg(t,r)}}async function Dg(t,e,n){if(!pc(e))throw e;t.Ia.add(1),await zl(t),t.Aa.set("Offline"),n||(n=()=>qx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Ds,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Wg(t)})}function Yx(t,e){return e().catch(n=>Dg(t,n,e))}async function Gg(t){let e=fe(t),n=no(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:B0;for(;e8(e);)try{let i=await Wq(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,t8(e,i)}catch(i){await Dg(e,i)}Qx(e)&&Zx(e)}function e8(t){return As(t)&&t.Pa.length<10}function t8(t,e){t.Pa.push(e);let n=no(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Qx(t){return As(t)&&!no(t).M_()&&t.Pa.length>0}function Zx(t){no(t).start()}async function n8(t){no(t).na()}async function r8(t){let e=no(t);for(let n of t.Pa)e.X_(n.mutations)}async function i8(t,e,n){let r=t.Pa.shift(),i=AC.from(r,e,n);await Yx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gg(t)}async function o8(t,e){e&&no(t).Z_&&await(async function(r,i){if((function(s){return Eq(s)&&s!==k.ABORTED})(i.code)){let o=r.Pa.shift();no(r).N_(),await Yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gg(r)}})(t,e),Qx(t)&&Zx(t)}async function PN(t,e){let n=fe(t);n.asyncQueue.verifyOperationInProgress(),q(Ds,"RemoteStore received new credentials");let r=As(n);n.Ia.add(3),await zl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Wg(n)}async function s8(t,e){let n=fe(t);e?(n.Ia.delete(2),await Wg(n)):e||(n.Ia.add(2),await zl(n),n.Aa.set("Unknown"))}function gc(t){return t.Va||(t.Va=(function(n,r,i){let o=fe(n);return o.ia(),new f0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Qq.bind(null,t),e_:Zq.bind(null,t),n_:Jq.bind(null,t),J_:Xq.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),tI(t)?eI(t):t.Aa.set("Unknown")):(await t.Va.stop(),Kx(t))})),t.Va}function no(t){return t.ma||(t.ma=(function(n,r,i){let o=fe(n);return o.ia(),new p0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:n8.bind(null,t),n_:o8.bind(null,t),ea:r8.bind(null,t),ta:i8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Gg(t)):(await t.ma.stop(),t.Pa.length>0&&(q(Ds,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var _0=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nI(t,e){if(li("AsyncQueue",`${e}: ${t}`),pc(t))return new z(k.UNAVAILABLE,`${e}: ${t}`);throw t}var Sg=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Tl(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ag=class{constructor(){this.fa=new nt(ne.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ie(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},uc=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var E0=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},w0=class{constructor(){this.queries=ON(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=fe(n),o=i.queries;i.queries=ON(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new z(k.ABORTED,"Firestore shutting down"))}};function ON(){return new fi(t=>Ix(t),Hg)}async function Jx(t,e){let n=fe(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new E0,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=nI(s,`Initialization of query '${Ga(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&rI(n)}async function Xx(t,e){let n=fe(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a8(t,e){let n=fe(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&rI(n)}function c8(t,e,n){let r=fe(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function rI(t){t.Da.forEach(e=>{e.next()})}var C0,NN;(NN=C0||(C0={})).Fa="default",NN.Cache="cache";var Mg=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==C0.Cache}};var Rg=class{constructor(e){this.key=e}},Pg=class{constructor(e){this.key=e}},I0=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Se(),this.mutatedKeys=Se(),this.Xa=bx(e),this.eu=new Sg(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Ag,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),v=zg(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),x=!1;g&&v?g.data.isEqual(v.data)?I!==N&&(r.track({type:3,doc:v}),x=!0):this.iu(g,v)||(r.track({type:2,doc:v}),x=!0,(u&&this.Xa(v,u)>0||l&&this.Xa(v,l)<0)&&(a=!0)):!g&&v?(r.track({type:0,doc:v}),x=!0):g&&!v&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(v?(s=s.add(v),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(v,I){let N=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{At:x})}};return N(v)-N(I)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new uc(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ag,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Se(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Pg(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Rg(r))}),n}uu(e){this.Ha=e.qs,this.Za=Se();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return uc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},iI="SyncEngine",b0=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},T0=class{constructor(e){this.key=e,this.lu=!1}},D0=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new fi(a=>Ix(a),Hg),this.Tu=new Map,this.Iu=new Set,this.du=new nt(ne.comparator),this.Eu=new Map,this.Au=new Ul,this.Ru={},this.Vu=new Map,this.mu=Vl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function u8(t,e,n=!0){let r=o1(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await e1(r,e,n,!0),i}async function l8(t,e){let n=o1(t);await e1(n,e,!0,!1)}async function e1(t,e,n,r){let i=await Gq(t.localStore,xr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await d8(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Wx(t.remoteStore,i),a}async function d8(t,e,n,r,i){t.gu=(p,g,v)=>(async function(N,x,j,J){let ce=x.view.nu(j);ce.Ds&&(ce=await AN(N.localStore,x.query,!1).then(({documents:T})=>x.view.nu(T,ce)));let xe=J&&J.targetChanges.get(x.targetId),Ft=J&&J.targetMismatches.get(x.targetId)!=null,je=x.view.applyChanges(ce,N.isPrimaryClient,xe,Ft);return kN(N,x.targetId,je._u),je.snapshot})(t,p,g,v);let o=await AN(t.localStore,e,!0),s=new I0(e,o.qs),a=s.nu(o.documents),u=Fl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);kN(t,n,l._u);let h=new b0(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function h8(t,e,n){let r=fe(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Hg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await s0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&J0(r.remoteStore,i.targetId),S0(r,i.targetId)}).catch(fc)):(S0(r,i.targetId),await s0(r.localStore,i.targetId,!0))}async function f8(t,e){let n=fe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),J0(n.remoteStore,r.targetId))}async function p8(t,e,n){let r=w8(t);try{let i=await(function(s,a){let u=fe(s),l=Ct.now(),h=a.reduce((v,I)=>v.add(I.key),Se()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=pi(),N=Se();return u.Os.getEntries(v,h).next(x=>{I=x,I.forEach((j,J)=>{J.isValidDocument()||(N=N.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,I)).next(x=>{p=x;let j=[];for(let J of a){let ce=_q(J,p.get(J.key).overlayedDocument);ce!=null&&j.push(new Vr(J.key,ce,mx(ce.value.mapValue),kr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,j,a)}).next(x=>{g=x;let j=x.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,x.batchId,j)})}).then(()=>({batchId:g.batchId,changes:Dx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new nt(we)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await ql(r,i.changes),await Gg(r.remoteStore)}catch(i){let o=nI(i,"Failed to persist write");n.reject(o)}}async function t1(t,e){let n=fe(t);try{let r=await zq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ue(s.lu,14607):i.removedDocuments.size>0&&(Ue(s.lu,42227),s.lu=!1))}),await ql(n,r,e)}catch(r){await fc(r)}}function xN(t,e,n){let r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=fe(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&rI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g8(t,e,n){let r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new nt(ne.comparator);s=s.insert(o,cr.newNoDocument(o,ge.min()));let a=Se().add(o),u=new pg(ge.min(),new Map,new nt(we),s,a);await t1(r,u),r.du=r.du.remove(o),r.Eu.delete(e),oI(r)}else await s0(r.localStore,e,!1).then(()=>S0(r,e,n)).catch(fc)}async function m8(t,e){let n=fe(t),r=e.batch.batchId;try{let i=await Hq(n.localStore,e);r1(n,r,null),n1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ql(n,i)}catch(i){await fc(i)}}async function v8(t,e,n){let r=fe(t);try{let i=await(function(s,a){let u=fe(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ue(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);r1(r,e,n),n1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ql(r,i)}catch(i){await fc(i)}}function n1(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function r1(t,e,n){let r=fe(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function S0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||i1(t,r)})}function i1(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(J0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),oI(t))}function kN(t,e,n){for(let r of n)r instanceof Rg?(t.Au.addReference(r.key,e),y8(t,r)):r instanceof Pg?(q(iI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||i1(t,r.key)):ie(19791,{yu:r})}function y8(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(q(iI,"New document in limbo: "+n),t.Iu.add(r),oI(t))}function oI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new ne(Ye.fromString(e)),r=t.mu.next();t.Eu.set(r,new T0(n)),t.du=t.du.insert(n,r),Wx(t.remoteStore,new Ll(xr(K0(n.path)),r,"TargetPurposeLimboResolution",j0.ue))}}async function ql(t,e,n){let r=fe(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=n0.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=fe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(l,g=>U.forEach(g.Is,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>U.forEach(g.ds,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!pc(p))throw p;q(Z0,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let v=h.Fs.get(g),I=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,N)}}})(r.localStore,o))}async function _8(t,e){let n=fe(t);if(!n.currentUser.isEqual(e)){q(iI,"User change. New user:",e.toKey());let r=await zx(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new z(k.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ql(n,r.Bs)}}function E8(t,e){let n=fe(t),r=n.Eu.get(e);if(r&&r.lu)return Se().add(r.key);{let i=Se(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function o1(t){let e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g8.bind(null,e),e.hu.J_=a8.bind(null,e.eventManager),e.hu.pu=c8.bind(null,e.eventManager),e}function w8(t){let e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v8.bind(null,e),e}var s1=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=qg(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return $q(this.persistence,new i0,n.initialUser,this.serializer)}Du(n){return new Eg(t0.Vi,this.serializer)}bu(n){return new a0}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),A0=class extends s1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ue(this.persistence.referenceDelegate instanceof wg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new $C(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Eg(r=>wg.Vi(r,n),this.serializer)}};var C8=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_8.bind(null,this.syncEngine),await s8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new w0})()}createDatastore(n){let r=qg(n.databaseInfo.databaseId),i=(function(s){return new h0(s)})(n.databaseInfo);return(function(s,a,u,l){return new m0(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new y0(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>xN(this.syncEngine,r,0),(function(){return Ig.C()?new Ig:new c0})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let g=new D0(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=fe(o);q(Ds,"RemoteStore shutting down."),s.Ia.add(5),await zl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var Og=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var ro="FirestoreClient",M0=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=Rl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{q(ro,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q(ro,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=nI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function eC(t,e){t.asyncQueue.verifyOperationInProgress(),q(ro,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{eo("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{eo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function FN(t,e){t.asyncQueue.verifyOperationInProgress();let n=await I8(t);q(ro,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>PN(e.remoteStore,i)),t._onlineComponents=e}async function I8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(ro,"Using user provided OfflineComponentProvider");try{await eC(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;eo("Error using user provided cache. Falling back to memory cache: "+n),await eC(t,new s1)}}else q(ro,"Using default OfflineComponentProvider"),await eC(t,new A0(void 0));return t._offlineComponents}async function a1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(ro,"Using user provided OnlineComponentProvider"),await FN(t,t._uninitializedComponentsProvider._online)):(q(ro,"Using default OnlineComponentProvider"),await FN(t,new C8))),t._onlineComponents}function b8(t){return a1(t).then(e=>e.syncEngine)}async function R0(t){let e=await a1(t),n=e.eventManager;return n.onListen=u8.bind(null,e.syncEngine),n.onUnlisten=h8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=l8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f8.bind(null,e.syncEngine),n}function T8(t,e,n={}){let r=new Or;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new Og({next:g=>{h.Ou(),s.enqueueAndForget(()=>Xx(o,p)),g.fromCache&&u.source==="server"?l.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Mg(a,h,{includeMetadataChanges:!0,ka:!0});return Jx(o,p)})(await R0(t),t.asyncQueue,e,n,r)),r.promise}function c1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var LN=new Map;var u1="firestore.googleapis.com",VN=!0,Ng=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u1,this.ssl=VN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:VN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Hx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Uq)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ng({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ng(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tC;switch(r.type){case"firstParty":return new oC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=LN.get(n);r&&(q("ComponentProvider","Removing Datastore"),LN.delete(n),r.terminate())})(this),Promise.resolve()}};function l1(t,e,n,r={}){var i;t=qn(t,lc);let o=os(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(sw(`https://${u}`),aw("Firestore",!0)),s.host!==u1&&s.host!==u&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!ss(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Nt.MOCK_USER;else{h=YP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Nt(g)}t._authCredentials=new nC(new sg(h,p))}}var Ss=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},kt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Hl(n,t._jsonSchema))return new t(e,r||null,new ne(Ye.fromString(n.referencePath)))}};kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:wt("string",kt._jsonSchemaVersion),referencePath:wt("string")};var Qi=class t extends Ss{constructor(e,n,r){super(e,n,K0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ne(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function d1(t,e,...n){if(t=Bt(t),WN("collection","path",e),t instanceof lc){let r=Ye.fromString(e,...n);return nN(r),new Qi(t,null,r)}{if(!(t instanceof kt||t instanceof Qi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ye.fromString(e,...n));return nN(r),new Qi(t.firestore,null,r)}}function sI(t,e,...n){if(t=Bt(t),arguments.length===1&&(e=Rl.newId()),WN("doc","path",e),t instanceof lc){let r=Ye.fromString(e,...n);return tN(r),new kt(t,null,new ne(r))}{if(!(t instanceof kt||t instanceof Qi))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ye.fromString(e,...n));return tN(r),new kt(t.firestore,t instanceof Qi?t.converter:null,new ne(r))}}var UN="AsyncQueue",xg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new bg(this,"async_queue_retry"),this.oc=()=>{let r=Xw();r&&q(UN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=Xw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Xw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;q(UN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,li("INTERNAL UNHANDLED ERROR: ",jN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=_0.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ie(47125,{hc:jN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function jN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function BN(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var Ur=class extends lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xg(e),this._firestoreClient=void 0,await e}}};function h1(t,e){let n=typeof t=="object"?t:$a(),r=typeof t=="string"?t:e||dg,i=xp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=GP("firestore");o&&l1(i,...o)}return i}function aI(t){if(t._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D8(t),t._firestoreClient}function D8(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new lC(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,c1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new M0(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Zi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Zt.fromBase64String(e))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:wt("string",Zi._jsonSchemaVersion),bytes:wt("string")};var dc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var jl=class{constructor(e){this._methodName=e}};var Ji=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Hl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:wt("string",Ji._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};var Xi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:wt("string",Xi._jsonSchemaVersion),vectorValues:wt("object")};var S8=/^__.*__$/,P0=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ts(e,this.data,n,this.fieldTransforms)}},kg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function f1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ec:t})}}var O0=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(f1(this.Ec)&&S8.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},N0=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qg(e)}Dc(e,n,r,i=!1){return new O0({Ec:e,methodName:n,bc:r,path:Nn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kg(t){let e=t._freezeSettings(),n=qg(t._databaseId);return new N0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function p1(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);cI("Data must be an object, but it was:",s,r);let a=g1(r,s),u,l;if(o.merge)u=new zn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=x0(e,p,n);if(!s.contains(g))throw new z(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);v1(h,g)||h.push(g)}u=new zn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new P0(new On(a),u,l)}var Fg=class t extends jl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function A8(t,e,n,r){let i=t.Dc(1,e,n);cI("Data must be an object, but it was:",i,r);let o=[],s=On.empty();io(r,(u,l)=>{let h=uI(e,u,n);l=Bt(l);let p=i.gc(h);if(l instanceof Fg)o.push(h);else{let g=Wl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new zn(o);return new kg(s,a,i.fieldTransforms)}function M8(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[x0(e,r,n)],u=[i];if(o.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(x0(e,o[g])),u.push(o[g+1]);let l=[],h=On.empty();for(let g=a.length-1;g>=0;--g)if(!v1(l,a[g])){let v=a[g],I=u[g];I=Bt(I);let N=s.gc(v);if(I instanceof Fg)l.push(v);else{let x=Wl(I,N);x!=null&&(l.push(v),h.set(v,x))}}let p=new zn(l);return new kg(h,p,s.fieldTransforms)}function R8(t,e,n,r=!1){return Wl(n,t.Dc(r?4:3,e))}function Wl(t,e){if(m1(t=Bt(t)))return cI("Unsupported field value:",e,t),g1(t,e);if(t instanceof jl)return(function(r,i){if(!f1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Wl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ct.fromDate(r);return{timestampValue:yg(i.serializer,o)}}if(r instanceof Ct){let o=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yg(i.serializer,o)}}if(r instanceof Ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zi)return{bytesValue:Fx(i.serializer,r._byteString)};if(r instanceof kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Q0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xi)return(function(s,a){return{mapValue:{fields:{[H0]:{stringValue:z0},[ec]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Y0(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${jg(r)}`)})(t,e)}function g1(t,e){let n={};return cx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(t,(r,i)=>{let o=Wl(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function m1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof Ji||t instanceof Zi||t instanceof kt||t instanceof jl||t instanceof Xi)}function cI(t,e,n){if(!m1(n)||!GN(n)){let r=jg(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function x0(t,e,n){if((e=Bt(e))instanceof dc)return e._internalPath;if(typeof e=="string")return uI(t,e);throw Lg("Field path arguments must be of type string or ",t,!1,void 0,n)}var P8=new RegExp("[~\\*/\\[\\]]");function uI(t,e,n){if(e.search(P8)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dc(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(k.INVALID_ARGUMENT,a+t+u)}function v1(t,e){return t.some(n=>n.isEqual(e))}var Vg=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new k0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(lI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},k0=class extends Vg{data(){return super.data()}};function lI(t,e){return typeof e=="string"?uI(t,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function y1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bl=class{},F0=class extends Bl{};function _1(t,e,...n){let r=[];e instanceof Bl&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof L0).length,a=o.filter(u=>u instanceof Ug).length;if(s>1||s>0&&a>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Ug=class t extends F0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return w1(e._query,n),new Ss(e.firestore,e.converter,IC(e._query,n))}_parse(e){let n=Kg(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){HN(p,h);let I=[];for(let N of p)I.push($N(u,o,N));g={arrayValue:{values:I}}}else g=$N(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||HN(p,h),g=R8(a,s,p,h==="in"||h==="not-in");return Et.create(l,h,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function E1(t,e,n){let r=e,i=lI("where",t);return Ug._create(i,r,n)}var L0=class t extends Bl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ur.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)w1(s,u),s=IC(s,u)})(e._query,n),new Ss(e.firestore,e.converter,IC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function $N(t,e,n){if(typeof(n=Bt(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cx(e)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ye.fromString(n));if(!ne.isDocumentKey(r))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uN(t,new ne(r))}if(n instanceof kt)return uN(t,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jg(n)}.`)}function HN(t,e){if(!Array.isArray(t)||t.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w1(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var V0=class{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return io(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ec].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ke(s.doubleValue));return new Xi(o)}convertGeoPoint(e){return new Ji(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=$g(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){let n=di(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ye.fromString(e);Ue($x(r),9688,{name:e});let i=new hg(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(n)||li(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function C1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var vs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ys=class t extends Vg{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(lI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:wt("string",ys._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};var Ja=class extends ys{data(e={}){return super.data(e)}},_s=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ja(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:O8(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function O8(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:wt("string",_s._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};var $l=class extends V0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}};function I1(t){t=qn(t,Ss);let e=qn(t.firestore,Ur),n=aI(e),r=new $l(e);return y1(t._query),T8(n,t._query).then(i=>new _s(e,r,t,i))}function b1(t,e,n){t=qn(t,kt);let r=qn(t.firestore,Ur),i=C1(t.converter,e,n);return Yg(r,[p1(Kg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,kr.none())])}function T1(t,e,n,...r){t=qn(t,kt);let i=qn(t.firestore,Ur),o=Kg(i),s;return s=typeof(e=Bt(e))=="string"||e instanceof dc?M8(o,"updateDoc",t._key,e,n,r):A8(o,"updateDoc",t._key,e),Yg(i,[s.toMutation(t._key,kr.exists(!0))])}function D1(t){return Yg(qn(t.firestore,Ur),[new kl(t._key,kr.none())])}function S1(t,e){let n=qn(t.firestore,Ur),r=sI(t),i=C1(t.converter,e);return Yg(n,[p1(Kg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}function dI(t,...e){var n,r,i;t=Bt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||BN(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(BN(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof kt)l=qn(t.firestore,Ur),h=K0(t._key.path),u={next:p=>{e[s]&&e[s](N8(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=qn(t,Ss);l=qn(p.firestore,Ur),h=p._query;let g=new $l(l);u={next:v=>{e[s]&&e[s](new _s(l,g,p,v))},error:e[s+1],complete:e[s+2]},y1(t._query)}return(function(g,v,I,N){let x=new Og(N),j=new Mg(v,x,I);return g.asyncQueue.enqueueAndForget(async()=>Jx(await R0(g),j)),()=>{x.Ou(),g.asyncQueue.enqueueAndForget(async()=>Xx(await R0(g),j))}})(aI(l),h,a,u)}function Yg(t,e){return(function(r,i){let o=new Or;return r.asyncQueue.enqueueAndForget(async()=>p8(await b8(r),i,o)),o.promise})(aI(t),e)}function N8(t,e,n){let r=n.docs.get(e._key),i=new $l(t);return new ys(t,i,e._key,r,new vs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){hc=i})(Ba),sr(new an("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ur(new rC(r.getProvider("auth-internal")),new sC(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hg(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dt(ZO,JO,e),dt(ZO,JO,"esm2017")})();var Qg=function(){return Qg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qg.apply(this,arguments)};var F8={includeMetadataChanges:!1};function hI(t,e){return e===void 0&&(e=F8),new oe(function(n){var r=dI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function A1(t){return hI(t,{includeMetadataChanges:!0})}function M1(t,e){return e===void 0&&(e={}),A1(t).pipe(Y(function(n){return fI(n,e)}))}function fI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Qg(Qg({},r),(n={},n[e.idField]=t.id,n))}function R1(t){return hI(t,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function P1(t,e){return e===void 0&&(e={}),R1(t).pipe(Y(function(n){return n.map(function(r){return fI(r,e)})}))}var gi=class{constructor(e){return e}},O1="firestore",pI=class{constructor(){return za(O1)}};var gI=new H("angularfire2.firestore-instances");function L8(t,e){let n=Lp(O1,t,e);return n&&new gi(n)}function V8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new gi(r)}}var U8={provide:pI,deps:[[new Er,gI]]},j8={provide:gi,useFactory:L8,deps:[[new Er,gI],ds]};function N1(t,...e){return dt("angularfire",us.full,"fst"),Dt([j8,U8,{provide:gI,useFactory:V8(t),multi:!0,deps:[Ne,Xe,ls,vl,[new Er,Zp],[new Er,Up],...e]}])}var Zg=$t(P1,!0);var Jg=$t(M1,!0);var x1=$t(S1,!0,2);var Xg=$t(d1,!0,2);var em=$t(D1,!0,2);var mi=$t(sI,!0,2);var mc=$t(I1,!0);var k1=$t(h1,!0);var Gl=$t(_1,!0,2);var F1=$t(b1,!0,2);var tm=$t(T1,!0,2);var Kl=$t(E1,!0,2);var oo=class t{firestore=M(gi);usersCollection=Xg(this.firestore,"utenti");getAll(){return Zg(this.usersCollection,{idField:"id"})}getById(e){let n=mi(this.firestore,`utenti/${e}`);return Jg(n,{idField:"id"})}getByCodiceFiscale(e){let n=Gl(this.usersCollection,Kl("codiceFiscale","==",e.toUpperCase()));return Ae(mc(n)).pipe(Y(r=>{if(r.empty)return null;let i=r.docs[0],o=i.data();return Z(F({id:i.id},o),{dataDiNascita:o.dataDiNascita?o.dataDiNascita.toDate():null})}))}create(e){let n=Z(F({},e),{codiceFiscale:e.codiceFiscale.toUpperCase()});return Ae(x1(this.usersCollection,n)).pipe(Y(r=>r.id))}update(e,n){let r=mi(this.firestore,`utenti/${e}`),i=n.codiceFiscale?Z(F({},n),{codiceFiscale:n.codiceFiscale.toUpperCase()}):n;return Ae(tm(r,i))}delete(e){let n=mi(this.firestore,`utenti/${e}`);return Ae(em(n))}checkCodiceFiscaleExists(e){return this.getByCodiceFiscale(e).pipe(Y(n=>n!==null))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};var pn=class t{userService=M(oo);router=M(Ot);platformId=M(Xr);currentUserSignal=te(null);currentUser=this.currentUserSignal.asReadonly();STORAGE_KEY="currentUser";isBrowser;constructor(){this.isBrowser=fR(this.platformId),this.isBrowser&&this.loadUserFromStorage()}login(e,n,r){return this.userService.getByCodiceFiscale(r).pipe(Y(i=>i?i.nome.toLowerCase()!==e.toLowerCase()||i.cognome.toLowerCase()!==n.toLowerCase()?{success:!1,message:"Nome o cognome non corrispondono al codice fiscale."}:(this.setCurrentUser(i),{success:!0,user:i}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),ln(i=>(console.error("Errore durante il login:",i),ee({success:!1,message:"Errore durante il login. Riprova."}))))}loginByCodiceFiscale(e){return this.userService.getByCodiceFiscale(e).pipe(Y(n=>n?(this.setCurrentUser(n),{success:!0,user:n}):{success:!1,message:"Utente non trovato. Registrati per continuare."}),ln(n=>(console.error("Errore durante il login:",n),ee({success:!1,message:"Errore durante il login. Riprova."}))))}register(e){return this.userService.checkCodiceFiscaleExists(e.codiceFiscale).pipe(Y(n=>{if(n)throw new Error("Codice fiscale gi\xE0 registrato. Usa il login per accedere.");return n}),rt(()=>{}),Y(()=>(this.userService.create(e).subscribe({next:n=>{let r=Z(F({},e),{id:n});this.setCurrentUser(r)},error:n=>{console.error("Errore durante la registrazione:",n)}}),{success:!0})),ln(n=>(console.error("Errore durante la registrazione:",n),ee({success:!1,message:n.message||"Errore durante la registrazione. Riprova."}))))}logout(){this.currentUserSignal.set(null),this.isBrowser&&localStorage.removeItem(this.STORAGE_KEY),this.router.navigate(["/login"])}isAuthenticated(){return this.currentUserSignal()!==null}setCurrentUser(e){this.currentUserSignal.set(e),this.isBrowser&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}loadUserFromStorage(){if(!this.isBrowser)return;let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let n=JSON.parse(e);this.currentUserSignal.set(n)}catch(n){console.error("Errore nel parsing dell'utente salvato:",n),localStorage.removeItem(this.STORAGE_KEY)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};function B8(t,e){if(t&1){let n=Re();y(0,"div",8),V(1,"i",12),A(2),y(3,"button",13),X("click",function(){W(n);let i=L();return G(i.successMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.successMessage()," ")}}function $8(t,e){if(t&1){let n=Re();y(0,"div",9),V(1,"i",14),A(2),y(3,"button",13),X("click",function(){W(n);let i=L();return G(i.errorMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.errorMessage()," ")}}function H8(t,e){if(t&1){let n=Re();y(0,"input",37),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.editData().nome,i)||(o.editData().nome=i),G(i)}),_()}if(t&2){let n=L(2);me("ngModel",n.editData().nome)}}function z8(t,e){if(t&1&&(y(0,"div",28),A(1),_()),t&2){let n=L();R(),tt(n.nome)}}function q8(t,e){if(t&1){let n=Re();y(0,"input",38),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.editData().cognome,i)||(o.editData().cognome=i),G(i)}),_()}if(t&2){let n=L(2);me("ngModel",n.editData().cognome)}}function W8(t,e){if(t&1&&(y(0,"div",28),A(1),_()),t&2){let n=L();R(),tt(n.cognome)}}function G8(t,e){if(t&1){let n=Re();y(0,"input",39),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.editData().email,i)||(o.editData().email=i),G(i)}),_()}if(t&2){let n=L(2);me("ngModel",n.editData().email)}}function K8(t,e){if(t&1&&(y(0,"div",28),A(1),_()),t&2){let n=L();R(),tt(n.email||"Non impostato")}}function Y8(t,e){if(t&1){let n=Re();y(0,"input",40),X("change",function(i){W(n);let o=L(2);return G(o.onDateChange(i))}),_()}if(t&2){let n=L(2);Ie("value",n.getDateInputValue(n.editData().dataDiNascita??null))}}function Q8(t,e){if(t&1&&(y(0,"div",28),A(1),_()),t&2){let n=L(),r=L();R(),tt(r.formatDate(n.dataDiNascita))}}function Z8(t,e){if(t&1){let n=Re();y(0,"input",41),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.editData().annoConseguimentoPatente,i)||(o.editData().annoConseguimentoPatente=i),G(i)}),_()}if(t&2){let n=L(2);me("ngModel",n.editData().annoConseguimentoPatente),Ie("min",1950)("max",n.currentYear)}}function J8(t,e){if(t&1&&(y(0,"div",28),A(1),_()),t&2){let n=L();R(),tt(n.annoConseguimentoPatente||"Non impostato")}}function X8(t,e){t&1&&(V(0,"span",43),y(1,"span"),A(2,"Salvataggio..."),_())}function eW(t,e){t&1&&(V(0,"i",44),y(1,"span"),A(2,"Salva Modifiche"),_())}function tW(t,e){if(t&1&&(y(0,"div",36)(1,"button",42),se(2,X8,3,0)(3,eW,3,0),_()()),t&2){let n=L(2);R(),Ie("disabled",n.isSaving()),R(),ae(n.isSaving()?2:3)}}function nW(t,e){if(t&1){let n=Re();y(0,"div",10)(1,"div",15)(2,"div",16),V(3,"i",17),_(),y(4,"div",18)(5,"h2"),A(6),_(),y(7,"p",19),V(8,"i",20),A(9),_()()(),y(10,"form",21),X("ngSubmit",function(){W(n);let i=L();return G(i.saveChanges())}),y(11,"div",22)(12,"div",23)(13,"div",24)(14,"label",25),V(15,"i",26),A(16,"Nome "),_(),se(17,H8,1,1,"input",27)(18,z8,2,1,"div",28),_()(),y(19,"div",23)(20,"div",24)(21,"label",25),V(22,"i",26),A(23,"Cognome "),_(),se(24,q8,1,1,"input",29)(25,W8,2,1,"div",28),_()(),y(26,"div",23)(27,"div",24)(28,"label",25),V(29,"i",30),A(30,"Email "),_(),se(31,G8,1,1,"input",31)(32,K8,2,1,"div",28),_()(),y(33,"div",23)(34,"div",24)(35,"label",25),V(36,"i",32),A(37,"Data di Nascita "),_(),se(38,Y8,1,1,"input",33)(39,Q8,2,1,"div",28),_()(),y(40,"div",23)(41,"div",24)(42,"label",25),V(43,"i",34),A(44,"Anno Conseguimento Patente "),_(),se(45,Z8,1,3,"input",35)(46,J8,2,1,"div",28),_()()(),se(47,tW,4,2,"div",36),_()()}if(t&2){let n=e,r=L();R(6),Vi("",n.nome," ",n.cognome),R(3),De(" ",n.codiceFiscale," "),R(8),ae(r.isEditMode()?17:18),R(7),ae(r.isEditMode()?24:25),R(7),ae(r.isEditMode()?31:32),R(7),ae(r.isEditMode()?38:39),R(7),ae(r.isEditMode()?45:46),R(2),ae(r.isEditMode()?47:-1)}}var nm=class t{authService=M(pn);userService=M(oo);currentUser=this.authService.currentUser;isEditMode=te(!1);isSaving=te(!1);successMessage=te(null);errorMessage=te(null);editData=te({});currentYear=new Date().getFullYear();ngOnInit(){let e=this.currentUser();e&&this.editData.set(F({},e))}toggleEditMode(){if(this.isEditMode()){let e=this.currentUser();e&&this.editData.set(F({},e))}this.isEditMode.update(e=>!e),this.clearMessages()}saveChanges(){let e=this.currentUser();if(!e)return;this.clearMessages(),this.isSaving.set(!0);let n=this.editData(),r={nome:n.nome?.toUpperCase(),cognome:n.cognome?.toUpperCase(),email:n.email||null,dataDiNascita:n.dataDiNascita||null,annoConseguimentoPatente:n.annoConseguimentoPatente||null};this.userService.update(e.id,r).subscribe({next:()=>{this.isSaving.set(!1),this.isEditMode.set(!1),this.successMessage.set("Dati aggiornati con successo!");let i=F(F({},e),r);this.authService.setCurrentUser(i),setTimeout(()=>this.successMessage.set(null),3e3)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio:",i)}})}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}formatDate(e){if(!e)return"Non impostato";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("it-IT")}catch{return"Non impostato"}}getDateInputValue(e){if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toISOString().split("T")[0]}catch{return""}}onDateChange(e){let r=e.target.value;this.editData.update(i=>Z(F({},i),{dataDiNascita:r?new Date(r):null}))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-homepage"]],decls:18,vars:23,consts:[[1,"homepage-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-person-circle","me-2"],[1,"page-subtitle"],[1,"btn","btn-edit-desktop",3,"click","disabled"],[1,"me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"profile-card"],[1,"btn","btn-edit-mobile",3,"click","disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"profile-header"],[1,"avatar"],[1,"bi","bi-person-fill"],[1,"user-info"],[1,"cf-badge"],[1,"bi","bi-credit-card","me-1"],[1,"profile-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"info-item"],[1,"info-label"],[1,"bi","bi-person-fill","me-2"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"info-value"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModel"],[1,"bi","bi-envelope-fill","me-2"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","date","name","dataDiNascita",1,"form-control",3,"value"],[1,"bi","bi-card-heading","me-2"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModel","min","max"],[1,"action-buttons"],["type","text","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","email","name","email","placeholder","Inserisci email",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","dataDiNascita",1,"form-control",3,"change","value"],["type","number","name","annoPatente","placeholder","Es. 2010",1,"form-control",3,"ngModelChange","ngModel","min","max"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(n,r){if(n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),V(5,"i",4),A(6," Profilo Utente "),_(),y(7,"p",5),A(8,"Visualizza e modifica i tuoi dati personali"),_()(),y(9,"button",6),X("click",function(){return r.toggleEditMode()}),V(10,"i",7),A(11),_()(),se(12,B8,4,1,"div",8),se(13,$8,4,1,"div",9),se(14,nW,48,9,"div",10),y(15,"button",11),X("click",function(){return r.toggleEditMode()}),V(16,"i",7),A(17),_()()()),n&2){let i;R(9),ut("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),Ie("disabled",r.isSaving()),R(),ut("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),R(),De(" ",r.isEditMode()?"Annulla":"Modifica"," "),R(),ae(r.successMessage()?12:-1),R(),ae(r.errorMessage()?13:-1),R(),ae((i=r.currentUser())?14:-1,i),R(),ut("btn-primary",!r.isEditMode())("btn-secondary",r.isEditMode()),Ie("disabled",r.isSaving()),R(),ut("bi-pencil-fill",!r.isEditMode())("bi-x-lg",r.isEditMode()),R(),De(" ",r.isEditMode()?"Annulla":"Modifica"," ")}},dependencies:[Wi,ja,Mr,es,qi,Ua,ns,ts,dl,oi,Xo,Rt],styles:[".homepage-container[_ngcontent-%COMP%]{padding:2rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;display:flex;align-items:center;gap:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #0003}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{color:#fff}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.1)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{display:inline-block;background:#fff3;padding:.375rem .75rem;border-radius:20px;font-size:.875rem;font-weight:600;margin-top:.5rem;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:2rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{background:#f8fafc;border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;font-weight:500;color:#1e293b;min-height:48px;display:flex;align-items:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.homepage-container[_ngcontent-%COMP%]{padding:1rem 0}.homepage-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;margin-top:1rem;border-radius:10px;padding:.875rem 1.5rem;font-weight:600;font-size:1rem;transition:all .3s ease}.homepage-container[_ngcontent-%COMP%]   .btn-edit-mobile[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{border-radius:15px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;text-align:center}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:70px;height:70px}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-header[_ngcontent-%COMP%]   .cf-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem .625rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]{padding:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:1.25rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.8rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%], .homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem}.homepage-container[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   .profile-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:1rem}}"]})};var so=class t{firestore=M(gi);carsCollection=Xg(this.firestore,"auto");getAll(){return Zg(this.carsCollection,{idField:"targa"})}getByTarga(e){let n=mi(this.firestore,`auto/${e}`);return Jg(n,{idField:"targa"}).pipe(Y(r=>{if(r)return this.convertFirebaseTimestamps(r)}))}getByProprietario(e){let n=Gl(this.carsCollection,Kl("proprietario.id","==",e));return Ae(mc(n)).pipe(Y(r=>r.docs.map(i=>{let o=i.data();return this.convertFirebaseTimestamps(Z(F({},o),{targa:i.id}))})))}getByProprietarioOComproprietario(e){let n=Gl(this.carsCollection,Kl("proprietario.id","==",e));return Ae(Promise.all([mc(n),mc(this.carsCollection)])).pipe(Y(([r,i])=>{let o=new Map;return r.docs.forEach(s=>{let a=s.data();o.set(s.id,this.convertFirebaseTimestamps(Z(F({},a),{targa:s.id})))}),i.docs.forEach(s=>{if(!o.has(s.id)){let a=s.data();(a.coProprietari||[]).some(h=>h.id===e)&&o.set(s.id,this.convertFirebaseTimestamps(Z(F({},a),{targa:s.id})))}}),Array.from(o.values())}))}create(e){let n=mi(this.firestore,`auto/${e.targa.toUpperCase()}`),r=Z(F({},e),{targa:e.targa.toUpperCase()});return Ae(F1(n,r))}update(e,n){let r=mi(this.firestore,`auto/${e.toUpperCase()}`);return Ae(tm(r,n))}delete(e){let n=mi(this.firestore,`auto/${e.toUpperCase()}`);return Ae(em(n))}checkTargaExists(e){return this.getByTarga(e).pipe(Y(n=>n!==void 0))}convertFirebaseTimestamps(e){return Z(F({},e),{dataDiAcquisto:e.dataDiAcquisto?.toDate?e.dataDiAcquisto.toDate():e.dataDiAcquisto,dataDiVendita:e.dataDiVendita?.toDate?e.dataDiVendita.toDate():e.dataDiVendita,dataProssimoTagliando:e.dataProssimoTagliando?.toDate?e.dataProssimoTagliando.toDate():e.dataProssimoTagliando,dataProssimaRevisione:e.dataProssimaRevisione?.toDate?e.dataProssimaRevisione.toDate():e.dataProssimaRevisione,tagliandi:e.tagliandi?.map(n=>Z(F({},n),{data:n.data?.toDate?n.data.toDate():n.data}))||[],revisioni:e.revisioni?.map(n=>Z(F({},n),{data:n.data?.toDate?n.data.toDate():n.data}))||[]})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"})};var rW=t=>["/dettaglio-auto",t],iW=(t,e)=>e.targa;function oW(t,e){t&1&&(y(0,"div",6)(1,"div",10)(2,"span",11),A(3,"Caricamento..."),_()()())}function sW(t,e){if(t&1&&(y(0,"div",7),V(1,"i",12),A(2),_()),t&2){let n=L();R(2),De(" ",n.error()," ")}}function aW(t,e){t&1&&(y(0,"div",8),V(1,"i",13),A(2," Non hai ancora registrato nessuna auto. "),y(3,"a",14),A(4,"Aggiungi la tua prima auto"),_()())}function cW(t,e){if(t&1&&(y(0,"tr")(1,"td")(2,"strong",19),A(3),_()(),y(4,"td"),A(5),_(),y(6,"td"),A(7),_(),y(8,"td"),A(9),_(),y(10,"td",16)(11,"span",20),A(12),_()(),y(13,"td",17),A(14),_(),y(15,"td",17),A(16),_(),y(17,"td",17),A(18),_(),y(19,"td",18)(20,"a",21),V(21,"i",22),y(22,"span",23),A(23,"Dettagli"),_()()()()),t&2){let n=e.$implicit,r=L(2);R(3),tt(n.targa),R(2),tt(n.marca),R(2),tt(n.modello),R(2),tt(n.anno),R(2),ut("bg-primary",r.getRuolo(n)==="Proprietario")("bg-secondary",r.getRuolo(n)==="Coproprietario"),R(),De(" ",r.getRuolo(n)," "),R(2),tt(n.colore),R(2),tt(r.formatDate(n.dataDiAcquisto)),R(2),tt(r.formatPrice(n.prezzoDiAcquisto)),R(2),Ie("routerLink",z_(13,rW,n.targa))}}function uW(t,e){if(t&1&&(y(0,"div",9)(1,"table",15)(2,"thead")(3,"tr")(4,"th"),A(5,"Targa"),_(),y(6,"th"),A(7,"Marca"),_(),y(8,"th"),A(9,"Modello"),_(),y(10,"th"),A(11,"Anno"),_(),y(12,"th",16),A(13,"Ruolo"),_(),y(14,"th",17),A(15,"Colore"),_(),y(16,"th",17),A(17,"Data Acquisto"),_(),y(18,"th",17),A(19,"Prezzo Acquisto"),_(),y(20,"th",18),A(21,"Azioni"),_()()(),y(22,"tbody"),$o(23,cW,24,15,"tr",null,iW),_()()()),t&2){let n=L();R(23),Ho(n.auto())}}var rm=class t{carService=M(so);authService=M(pn);auto=te([]);loading=te(!0);error=te(null);ngOnInit(){this.loadAuto()}loadAuto(){let e=this.authService.currentUser();if(!e){this.error.set("Utente non autenticato"),this.loading.set(!1);return}this.carService.getByProprietarioOComproprietario(e.id).subscribe({next:n=>{this.auto.set(n),this.loading.set(!1)},error:n=>{console.error("Errore nel caricamento delle auto:",n),this.error.set("Errore nel caricamento delle auto"),this.loading.set(!1)}})}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}getRuolo(e){let n=this.authService.currentUser();return n?e.proprietario.id===n.id?"Proprietario":e.coProprietari?.some(i=>i.id===n.id)?"Coproprietario":"-":"-"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-elenco-auto"]],decls:11,vars:4,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-info"],[1,"table-responsive"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"bi","bi-info-circle","me-2"],["routerLink","/nuova-auto",1,"alert-link"],[1,"table","table-hover","align-middle"],[1,"d-none","d-md-table-cell"],[1,"d-none","d-lg-table-cell"],[1,"text-end"],[1,"text-uppercase"],[1,"badge"],["title","Visualizza dettagli",1,"btn","btn-sm","btn-primary",3,"routerLink"],[1,"bi","bi-eye","me-1"],[1,"d-none","d-md-inline"]],template:function(n,r){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),V(5,"i",5),A(6," Le Mie Auto "),_()(),se(7,oW,4,0,"div",6),se(8,sW,3,1,"div",7),se(9,aW,5,0,"div",8),se(10,uW,25,0,"div",9),_()()()),n&2&&(R(7),ae(r.loading()?7:-1),R(),ae(r.error()?8:-1),R(),ae(!r.loading()&&!r.error()&&r.auto().length===0?9:-1),R(),ae(!r.loading()&&!r.error()&&r.auto().length>0?10:-1))},dependencies:[Rt,Ar],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.table[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 .125rem .25rem #00000013;border-radius:.5rem;overflow:hidden;border:1px solid #dee2e6}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:none;font-weight:600;padding:1.5rem 1rem;background:transparent!important;color:#fff!important}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .2s ease;background-color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#667eea1a;transform:translate(2px)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;border-top:1px solid #dee2e6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}@media (max-width: 767px){.table[_ngcontent-%COMP%]{font-size:.875rem}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}"]})};function lW(t,e){if(t&1){let n=Re();y(0,"div",6),V(1,"i",34),A(2),y(3,"button",35),X("click",function(){W(n);let i=L();return G(i.successMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.successMessage()," ")}}function dW(t,e){if(t&1){let n=Re();y(0,"div",7),V(1,"i",36),A(2),y(3,"button",35),X("click",function(){W(n);let i=L();return G(i.errorMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.errorMessage()," ")}}function hW(t,e){t&1&&(V(0,"span",37),y(1,"span"),A(2,"Salvataggio..."),_())}function fW(t,e){t&1&&(V(0,"i",38),y(1,"span"),A(2,"Salva Auto"),_())}var im=class t{authService=M(pn);carService=M(so);router=M(Ot);currentUser=this.authService.currentUser;isSaving=te(!1);successMessage=te(null);errorMessage=te(null);currentYear=new Date().getFullYear();targa="";marca="";modello="";anno=this.currentYear;colore="";prezzoDiAcquisto=0;dataDiAcquisto="";onSubmit(){this.clearMessages();let e=this.currentUser();if(!e){this.errorMessage.set("Utente non autenticato.");return}if(!this.targa.trim()||!this.marca.trim()||!this.modello.trim()||!this.dataDiAcquisto){this.errorMessage.set("Compila tutti i campi obbligatori.");return}if(this.targa.length<6||this.targa.length>10){this.errorMessage.set("La targa deve essere tra 6 e 10 caratteri.");return}this.isSaving.set(!0),this.carService.checkTargaExists(this.targa).subscribe({next:n=>{if(n){this.isSaving.set(!1),this.errorMessage.set("Targa gi\xE0 esistente.");return}let r={targa:this.targa.trim().toUpperCase(),marca:this.marca.trim().toUpperCase(),modello:this.modello.trim().toUpperCase(),anno:this.anno,colore:this.colore.trim().toUpperCase(),prezzoDiAcquisto:this.prezzoDiAcquisto,dataDiAcquisto:new Date(this.dataDiAcquisto),proprietario:e,coProprietari:[],assicurazioni:[],tagliandi:[],revisioni:[]};this.carService.create(r).subscribe({next:()=>{this.isSaving.set(!1),this.successMessage.set("Auto aggiunta con successo!"),setTimeout(()=>{this.router.navigate(["/elenco-auto"])},1500)},error:i=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante il salvataggio. Riprova."),console.error("Errore salvataggio auto:",i)}})},error:n=>{this.isSaving.set(!1),this.errorMessage.set("Errore durante la verifica. Riprova."),console.error("Errore verifica targa:",n)}})}resetForm(){this.targa="",this.marca="",this.modello="",this.anno=this.currentYear,this.colore="",this.prezzoDiAcquisto=0,this.dataDiAcquisto="",this.clearMessages()}clearMessages(){this.successMessage.set(null),this.errorMessage.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-nuova-auto"]],decls:67,vars:15,consts:[[1,"nuova-auto-container"],[1,"container"],[1,"page-header"],[1,"page-title"],[1,"bi","bi-plus-circle-fill","me-2"],[1,"page-subtitle"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"form-card"],[1,"card-header"],[1,"bi","bi-car-front-fill","me-2"],[1,"card-body",3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],[1,"bi","bi-credit-card-2-front-fill","me-2"],["type","text","name","targa","placeholder","ES. AB123CD","maxlength","10","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-tag-fill","me-2"],["type","text","name","marca","placeholder","ES. FIAT","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-car-front","me-2"],["type","text","name","modello","placeholder","ES. PANDA","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-fill","me-2"],["type","number","name","anno","required","",1,"form-control",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-palette-fill","me-2"],["type","text","name","colore","placeholder","ES. BIANCO",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"bi","bi-currency-euro","me-2"],["type","number","name","prezzoDiAcquisto","placeholder","0","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"bi","bi-calendar-event-fill","me-2"],["type","date","name","dataDiAcquisto","required","",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise","me-2"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"bi","bi-check-lg","me-2"]],template:function(n,r){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),V(5,"i",4),A(6," Nuova Auto "),_(),y(7,"p",5),A(8,"Inserisci i dati della tua auto"),_()()(),se(9,lW,4,1,"div",6),se(10,dW,4,1,"div",7),y(11,"div",8)(12,"div",9),V(13,"i",10),y(14,"span"),A(15,"Dati Auto"),_()(),y(16,"form",11),X("ngSubmit",function(){return r.onSubmit()}),y(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),V(21,"i",16),A(22,"Targa * "),_(),y(23,"input",17),ve("ngModelChange",function(o){return Ee(r.targa,o)||(r.targa=o),o}),_()()(),y(24,"div",13)(25,"div",14)(26,"label",15),V(27,"i",18),A(28,"Marca * "),_(),y(29,"input",19),ve("ngModelChange",function(o){return Ee(r.marca,o)||(r.marca=o),o}),_()()(),y(30,"div",13)(31,"div",14)(32,"label",15),V(33,"i",20),A(34,"Modello * "),_(),y(35,"input",21),ve("ngModelChange",function(o){return Ee(r.modello,o)||(r.modello=o),o}),_()()(),y(36,"div",13)(37,"div",14)(38,"label",15),V(39,"i",22),A(40,"Anno * "),_(),y(41,"input",23),ve("ngModelChange",function(o){return Ee(r.anno,o)||(r.anno=o),o}),_()()(),y(42,"div",13)(43,"div",14)(44,"label",15),V(45,"i",24),A(46,"Colore "),_(),y(47,"input",25),ve("ngModelChange",function(o){return Ee(r.colore,o)||(r.colore=o),o}),_()()(),y(48,"div",13)(49,"div",14)(50,"label",15),V(51,"i",26),A(52,"Prezzo di Acquisto "),_(),y(53,"input",27),ve("ngModelChange",function(o){return Ee(r.prezzoDiAcquisto,o)||(r.prezzoDiAcquisto=o),o}),_()()(),y(54,"div",13)(55,"div",14)(56,"label",15),V(57,"i",28),A(58,"Data di Acquisto * "),_(),y(59,"input",29),ve("ngModelChange",function(o){return Ee(r.dataDiAcquisto,o)||(r.dataDiAcquisto=o),o}),_()()()(),y(60,"div",30)(61,"button",31),X("click",function(){return r.resetForm()}),V(62,"i",32),A(63," Reset "),_(),y(64,"button",33),se(65,hW,3,0)(66,fW,3,0),_()()()()()()),n&2&&(R(9),ae(r.successMessage()?9:-1),R(),ae(r.errorMessage()?10:-1),R(13),me("ngModel",r.targa),R(6),me("ngModel",r.marca),R(6),me("ngModel",r.modello),R(6),me("ngModel",r.anno),Ie("min",1950)("max",r.currentYear),R(6),me("ngModel",r.colore),R(6),me("ngModel",r.prezzoDiAcquisto),R(6),me("ngModel",r.dataDiAcquisto),Ie("max",r.currentYear+"-12-31"),R(2),Ie("disabled",r.isSaving()),R(3),Ie("disabled",r.isSaving()),R(),ae(r.isSaving()?65:66))},dependencies:[Wi,ja,Mr,es,qi,Ua,ns,rs,ts,dl,oi,Xo,Rt],styles:[".nuova-auto-container[_ngcontent-%COMP%]{padding:2rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.nuova-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;font-size:1.25rem;font-weight:600;display:flex;align-items:center}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:.875rem 1rem;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.text-uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#cbd5e1;text-transform:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:2px solid #e2e8f0;display:flex;justify-content:flex-end;gap:1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:10px;padding:.875rem 2rem;font-weight:600;font-size:1rem;transition:all .3s ease}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.nuova-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.nuova-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:none}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{border-radius:15px}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;font-size:1.1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem 1rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.8rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:.95rem;padding:.75rem .875rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem}.nuova-auto-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}}"]})};var pW=(t,e)=>e.codiceFiscale,L1=(t,e)=>e.id;function gW(t,e){t&1&&(y(0,"div",2)(1,"div",4)(2,"span",5),A(3,"Caricamento..."),_()()())}function mW(t,e){if(t&1&&(y(0,"div",3),V(1,"i",6),A(2),_()),t&2){let n=L();R(2),De(" ",n.error()," ")}}function vW(t,e){if(t&1){let n=Re();y(0,"div",15),V(1,"i",28),A(2),y(3,"button",29),X("click",function(){W(n);let i=L(2);return G(i.successMessage.set(null))}),_()()}if(t&2){let n=L(2);R(2),De(" ",n.successMessage()," ")}}function yW(t,e){if(t&1){let n=Re();y(0,"div",16),V(1,"i",30),A(2),y(3,"button",29),X("click",function(){W(n);let i=L(2);return G(i.errorMessage.set(null))}),_()()}if(t&2){let n=L(2);R(2),De(" ",n.errorMessage()," ")}}function _W(t,e){if(t&1){let n=Re();y(0,"button",44),X("click",function(){W(n);let i=L(3);return G(i.toggleEditMode())}),V(1,"i",45),A(2," Modifica "),_()}}function EW(t,e){if(t&1){let n=Re();y(0,"button",46),X("click",function(){W(n);let i=L(3);return G(i.saveAnagrafica())}),V(1,"i",47),A(2," Salva "),_(),y(3,"button",48),X("click",function(){W(n);let i=L(3);return G(i.cancelEdit())}),V(4,"i",49),A(5," Annulla "),_()}}function wW(t,e){if(t&1){let n=Re();y(0,"div",24)(1,"div",31),se(2,_W,3,0,"button",32)(3,EW,6,0),_(),y(4,"div",33)(5,"div",34)(6,"label",35),A(7,"Targa"),_(),V(8,"input",36),_(),y(9,"div",34)(10,"label",35),A(11,"Marca"),_(),y(12,"input",37),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().marca,i)||(o.car().marca=i),G(i)}),_()(),y(13,"div",34)(14,"label",35),A(15,"Modello"),_(),y(16,"input",37),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().modello,i)||(o.car().modello=i),G(i)}),_()(),y(17,"div",34)(18,"label",35),A(19,"Anno"),_(),y(20,"input",38),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().anno,i)||(o.car().anno=i),G(i)}),_()(),y(21,"div",34)(22,"label",35),A(23,"Colore"),_(),y(24,"input",37),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().colore,i)||(o.car().colore=i),G(i)}),_()(),y(25,"div",34)(26,"label",35),A(27,"Data di Acquisto"),_(),y(28,"input",39),_a(29,"date"),X("ngModelChange",function(i){W(n);let o=L(2);return G(o.car().dataDiAcquisto=i)}),_()(),y(30,"div",34)(31,"label",35),A(32,"Prezzo di Acquisto"),_(),y(33,"input",38),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().prezzoDiAcquisto,i)||(o.car().prezzoDiAcquisto=i),G(i)}),_()(),y(34,"div",34)(35,"label",35),A(36,"Prezzo di Vendita"),_(),y(37,"input",38),ve("ngModelChange",function(i){W(n);let o=L(2);return Ee(o.car().prezzoDiVendita,i)||(o.car().prezzoDiVendita=i),G(i)}),_()(),y(38,"div",34)(39,"label",35),A(40,"Data di Vendita"),_(),y(41,"input",39),_a(42,"date"),X("ngModelChange",function(i){W(n);let o=L(2);return G(o.car().dataDiVendita=i)}),_()()(),V(43,"hr",40),y(44,"h5",41),A(45,"Proprietario"),_(),y(46,"div",33)(47,"div",42)(48,"label",35),A(49,"Nome"),_(),V(50,"input",43),_(),y(51,"div",42)(52,"label",35),A(53,"Cognome"),_(),V(54,"input",43),_(),y(55,"div",42)(56,"label",35),A(57,"Codice Fiscale"),_(),V(58,"input",36),_()()()}if(t&2){let n=L(2);R(2),ae(n.editMode()?3:2),R(6),Ie("value",n.car().targa),R(4),me("ngModel",n.car().marca),Ie("disabled",!n.editMode()),R(4),me("ngModel",n.car().modello),Ie("disabled",!n.editMode()),R(4),me("ngModel",n.car().anno),Ie("disabled",!n.editMode()),R(4),me("ngModel",n.car().colore),Ie("disabled",!n.editMode()),R(4),Ie("ngModel",Ea(29,21,n.car().dataDiAcquisto,"yyyy-MM-dd"))("disabled",!n.editMode()),R(5),me("ngModel",n.car().prezzoDiAcquisto),Ie("disabled",!n.editMode()),R(4),me("ngModel",n.car().prezzoDiVendita),Ie("disabled",!n.editMode()),R(4),Ie("ngModel",Ea(42,24,n.car().dataDiVendita,"yyyy-MM-dd"))("disabled",!n.editMode()),R(9),Ie("value",n.car().proprietario.nome),R(4),Ie("value",n.car().proprietario.cognome),R(4),Ie("value",n.car().proprietario.codiceFiscale)}}function CW(t,e){if(t&1){let n=Re();y(0,"div",56)(1,"div",57)(2,"div")(3,"div",58),A(4),_(),y(5,"small",59),A(6),_()(),y(7,"button",60),X("click",function(){let i=W(n).$implicit,o=L(4);return G(o.removeCoproprietario(i.codiceFiscale))}),V(8,"i",61),_()()()}if(t&2){let n=e.$implicit;R(4),Vi("",n.nome," ",n.cognome),R(2),De("CF: ",n.codiceFiscale)}}function IW(t,e){if(t&1&&(y(0,"h5",41),A(1,"Coproprietari attuali"),_(),y(2,"div",55),$o(3,CW,9,3,"div",56,pW),_()),t&2){let n=L(3);R(3),Ho(n.car().coProprietari)}}function bW(t,e){t&1&&(y(0,"div",50),V(1,"i",62),A(2," Non ci sono coproprietari per questa auto. "),_())}function TW(t,e){if(t&1){let n=Re();y(0,"div",54)(1,"h5",41),A(2,"Nuovo Coproprietario"),_(),y(3,"div",33)(4,"div",42)(5,"label",35),A(6,"Nome *"),_(),y(7,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newCoproprietario.nome,i)||(o.newCoproprietario.nome=i),G(i)}),_()(),y(8,"div",42)(9,"label",35),A(10,"Cognome *"),_(),y(11,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newCoproprietario.cognome,i)||(o.newCoproprietario.cognome=i),G(i)}),_()(),y(12,"div",42)(13,"label",35),A(14,"Codice Fiscale *"),_(),y(15,"input",64),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newCoproprietario.codiceFiscale,i)||(o.newCoproprietario.codiceFiscale=i),G(i)}),_()(),y(16,"div",65)(17,"button",66),X("click",function(){W(n);let i=L(3);return G(i.addCoproprietario())}),V(18,"i",67),A(19," Aggiungi "),_()()(),y(20,"small",68),V(21,"i",69),A(22," Se l'utente non esiste verr\xE0 creato automaticamente nel sistema. "),_()()}if(t&2){let n=L(3);R(7),me("ngModel",n.newCoproprietario.nome),R(4),me("ngModel",n.newCoproprietario.cognome),R(4),me("ngModel",n.newCoproprietario.codiceFiscale)}}function DW(t,e){if(t&1){let n=Re();y(0,"div",24),se(1,IW,5,0)(2,bW,3,0,"div",50),y(3,"div",51)(4,"button",52),X("click",function(){W(n);let i=L(2);return G(i.toggleNewCoproprietarioForm())}),V(5,"i",53),A(6),_()(),se(7,TW,23,3,"div",54),_()}if(t&2){let n=L(2);R(),ae(n.car().coProprietari.length>0?1:2),R(5),De(" ",n.showNewCoproprietarioForm()?"Annulla":"Aggiungi Coproprietario"," "),R(),ae(n.showNewCoproprietarioForm()?7:-1)}}function SW(t,e){t&1&&(y(0,"div",70),V(1,"i",73),y(2,"div")(3,"strong"),A(4,"Attenzione!"),_(),A(5," Questa auto non ha un'assicurazione attiva. Provvedi al pi\xF9 presto a stipularne una. "),_()())}function AW(t,e){if(t&1){let n=Re();y(0,"div",71)(1,"div",74)(2,"h5",75),V(3,"i",76),A(4," Assicurazione Attiva "),_(),y(5,"button",77),X("click",function(){W(n);let i=L(3);return G(i.deleteAssicurazione(i.getAssicurazioneAttiva().id))}),V(6,"i",78),A(7," Elimina "),_()(),y(8,"div",33)(9,"div",34)(10,"label",35),A(11,"Compagnia"),_(),y(12,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.getAssicurazioneAttiva().compagnia,i)||(o.getAssicurazioneAttiva().compagnia=i),G(i)}),_()(),y(13,"div",34)(14,"label",35),A(15,"Numero Polizza"),_(),y(16,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.getAssicurazioneAttiva().numeroPolizza,i)||(o.getAssicurazioneAttiva().numeroPolizza=i),G(i)}),_()(),y(17,"div",42)(18,"label",35),A(19,"Data Inizio"),_(),y(20,"input",79),_a(21,"date"),X("ngModelChange",function(i){W(n);let o=L(3);return G(o.getAssicurazioneAttiva().dataInizio=i)}),_()(),y(22,"div",42)(23,"label",35),A(24,"Data Fine"),_(),y(25,"input",79),_a(26,"date"),X("ngModelChange",function(i){W(n);let o=L(3);return G(o.getAssicurazioneAttiva().dataFine=i)}),_()(),y(27,"div",42)(28,"label",35),A(29,"Costo Annuale (\u20AC)"),_(),y(30,"input",80),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.getAssicurazioneAttiva().costoAnnuale,i)||(o.getAssicurazioneAttiva().costoAnnuale=i),G(i)}),_()(),y(31,"div",65)(32,"button",81),X("click",function(){W(n);let i=L(3);return G(i.updateAssicurazione(i.getAssicurazioneAttiva()))}),V(33,"i",47),A(34," Salva Modifiche "),_()()()()}if(t&2){let n=L(3);R(12),me("ngModel",n.getAssicurazioneAttiva().compagnia),R(4),me("ngModel",n.getAssicurazioneAttiva().numeroPolizza),R(4),Ie("ngModel",Ea(21,5,n.getAssicurazioneAttiva().dataInizio,"yyyy-MM-dd")),R(5),Ie("ngModel",Ea(26,8,n.getAssicurazioneAttiva().dataFine,"yyyy-MM-dd")),R(5),me("ngModel",n.getAssicurazioneAttiva().costoAnnuale)}}function MW(t,e){if(t&1){let n=Re();y(0,"div",72)(1,"h5",41),A(2,"Nuova Assicurazione"),_(),y(3,"div",33)(4,"div",34)(5,"label",35),A(6,"Compagnia *"),_(),y(7,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newAssicurazione.compagnia,i)||(o.newAssicurazione.compagnia=i),G(i)}),_()(),y(8,"div",34)(9,"label",35),A(10,"Numero Polizza *"),_(),y(11,"input",63),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newAssicurazione.numeroPolizza,i)||(o.newAssicurazione.numeroPolizza=i),G(i)}),_()(),y(12,"div",42)(13,"label",35),A(14,"Data Inizio *"),_(),y(15,"input",79),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newAssicurazione.dataInizio,i)||(o.newAssicurazione.dataInizio=i),G(i)}),_()(),y(16,"div",42)(17,"label",35),A(18,"Data Fine *"),_(),y(19,"input",79),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newAssicurazione.dataFine,i)||(o.newAssicurazione.dataFine=i),G(i)}),_()(),y(20,"div",42)(21,"label",35),A(22,"Costo Annuale (\u20AC) *"),_(),y(23,"input",80),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newAssicurazione.costoAnnuale,i)||(o.newAssicurazione.costoAnnuale=i),G(i)}),_()(),y(24,"div",65)(25,"button",66),X("click",function(){W(n);let i=L(3);return G(i.addAssicurazione())}),V(26,"i",67),A(27," Aggiungi "),_()()()()}if(t&2){let n=L(3);R(7),me("ngModel",n.newAssicurazione.compagnia),R(4),me("ngModel",n.newAssicurazione.numeroPolizza),R(4),me("ngModel",n.newAssicurazione.dataInizio),R(4),me("ngModel",n.newAssicurazione.dataFine),R(4),me("ngModel",n.newAssicurazione.costoAnnuale)}}function RW(t,e){if(t&1){let n=Re();y(0,"div",82)(1,"div",83)(2,"div",84)(3,"div",33)(4,"div",85)(5,"strong"),A(6,"Compagnia:"),_(),A(7),_(),y(8,"div",85)(9,"strong"),A(10,"Polizza:"),_(),A(11),_(),y(12,"div",85)(13,"strong"),A(14,"Costo:"),_(),A(15),_(),y(16,"div",86)(17,"strong"),A(18,"Periodo:"),_(),A(19),_()()(),y(20,"button",87),X("click",function(){let i=W(n).$implicit,o=L(4);return G(o.deleteAssicurazione(i.id))}),V(21,"i",61),_()()()}if(t&2){let n=e.$implicit,r=L(4);R(7),De(" ",n.compagnia," "),R(4),De(" ",n.numeroPolizza," "),R(4),De(" ",r.formatPrice(n.costoAnnuale)," "),R(4),Vi(" ",r.formatDate(n.dataInizio)," - ",r.formatDate(n.dataFine)," ")}}function PW(t,e){if(t&1&&(V(0,"hr",40),y(1,"h5",41),A(2,"Storico Assicurazioni"),_(),$o(3,RW,22,5,"div",82,L1)),t&2){let n=L(3);R(3),Ho(n.getStoricoAssicurazioni())}}function OW(t,e){if(t&1){let n=Re();y(0,"div",24),se(1,SW,6,0,"div",70),se(2,AW,35,11,"div",71),y(3,"div",51)(4,"button",52),X("click",function(){W(n);let i=L(2);return G(i.toggleNewAssicurazioneForm())}),V(5,"i",53),A(6),_()(),se(7,MW,28,5,"div",72),se(8,PW,5,0),_()}if(t&2){let n=L(2);R(),ae(n.hasAssicurazioneAttiva()?-1:1),R(),ae(n.hasAssicurazioneAttiva()?2:-1),R(4),De(" ",n.showNewAssicurazioneForm()?"Annulla":"Aggiungi Nuova Assicurazione"," "),R(),ae(n.showNewAssicurazioneForm()?7:-1),R(),ae(n.getStoricoAssicurazioni().length>0?8:-1)}}function NW(t,e){if(t&1){let n=Re();y(0,"div",88)(1,"h5",41),A(2,"Nuovo Tagliando"),_(),y(3,"div",33)(4,"div",34)(5,"label",35),A(6,"Data *"),_(),y(7,"input",79),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newTagliando.data,i)||(o.newTagliando.data=i),G(i)}),_()(),y(8,"div",34)(9,"label",35),A(10,"Chilometraggio *"),_(),y(11,"input",89),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newTagliando.chilometraggio,i)||(o.newTagliando.chilometraggio=i),G(i)}),_()(),y(12,"div",90)(13,"label",35),A(14,"Descrizione *"),_(),y(15,"textarea",91),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newTagliando.descrizione,i)||(o.newTagliando.descrizione=i),G(i)}),_()(),y(16,"div",34)(17,"label",35),A(18,"Costo (\u20AC) *"),_(),y(19,"input",92),ve("ngModelChange",function(i){W(n);let o=L(3);return Ee(o.newTagliando.costo,i)||(o.newTagliando.costo=i),G(i)}),_()(),y(20,"div",65)(21,"button",66),X("click",function(){W(n);let i=L(3);return G(i.addTagliando())}),V(22,"i",67),A(23," Aggiungi "),_()()()()}if(t&2){let n=L(3);R(7),me("ngModel",n.newTagliando.data),R(4),me("ngModel",n.newTagliando.chilometraggio),R(4),me("ngModel",n.newTagliando.descrizione),R(4),me("ngModel",n.newTagliando.costo)}}function xW(t,e){if(t&1){let n=Re();y(0,"div",93)(1,"div",83)(2,"div",84)(3,"div",33)(4,"div",94)(5,"strong"),A(6,"Data:"),_(),A(7),_(),y(8,"div",94)(9,"strong"),A(10,"Km:"),_(),A(11),_(),y(12,"div",94)(13,"strong"),A(14,"Costo:"),_(),A(15),_(),y(16,"div",95)(17,"strong"),A(18,"Descrizione:"),_(),y(19,"p",96),A(20),_()()()(),y(21,"button",87),X("click",function(){let i=W(n).$implicit,o=L(4);return G(o.deleteTagliando(i.id))}),V(22,"i",61),_()()()}if(t&2){let n=e.$implicit,r=L(4);R(7),De(" ",r.formatDate(n.data)," "),R(4),De(" ",n.chilometraggio.toLocaleString("it-IT")," "),R(4),De(" ",r.formatPrice(n.costo)," "),R(5),tt(n.descrizione)}}function kW(t,e){if(t&1&&(y(0,"h5",41),A(1,"Storico Tagliandi"),_(),$o(2,xW,23,4,"div",93,L1)),t&2){let n=L(3);R(2),Ho(n.getTagliandiOrdinati())}}function FW(t,e){t&1&&(y(0,"div",50),V(1,"i",62),A(2," Non ci sono tagliandi registrati per questa auto. "),_())}function LW(t,e){if(t&1){let n=Re();y(0,"div",24)(1,"div",51)(2,"button",52),X("click",function(){W(n);let i=L(2);return G(i.toggleNewTagliandoForm())}),V(3,"i",53),A(4),_()(),se(5,NW,24,4,"div",88),se(6,kW,4,0)(7,FW,3,0,"div",50),_()}if(t&2){let n=L(2);R(4),De(" ",n.showNewTagliandoForm()?"Annulla":"Aggiungi Nuovo Tagliando"," "),R(),ae(n.showNewTagliandoForm()?5:-1),R(),ae(n.getTagliandiOrdinati().length>0?6:7)}}function VW(t,e){if(t&1){let n=Re();y(0,"div",7)(1,"div",8)(2,"div")(3,"h1",9),V(4,"i",10),A(5),_(),y(6,"p",11),A(7,"Targa: "),y(8,"strong",12),A(9),_()()(),y(10,"button",13),X("click",function(){W(n);let i=L();return G(i.goBack())}),V(11,"i",14),A(12," Torna all'elenco "),_()()(),se(13,vW,4,1,"div",15),se(14,yW,4,1,"div",16),y(15,"div",17)(16,"div",18)(17,"div",19),X("click",function(){W(n);let i=L();return G(i.toggleAnagrafica())}),y(18,"div",20),V(19,"i",21),y(20,"span",22),A(21,"Anagrafica Auto"),_()(),V(22,"i",23),_(),se(23,wW,59,27,"div",24),_(),y(24,"div",18)(25,"div",19),X("click",function(){W(n);let i=L();return G(i.toggleCoproprietari())}),y(26,"div",20),V(27,"i",25),y(28,"span",22),A(29,"Coproprietari"),_()(),V(30,"i",23),_(),se(31,DW,8,3,"div",24),_(),y(32,"div",18)(33,"div",19),X("click",function(){W(n);let i=L();return G(i.toggleAssicurazioni())}),y(34,"div",20),V(35,"i",26),y(36,"span",22),A(37,"Assicurazioni"),_()(),V(38,"i",23),_(),se(39,OW,9,5,"div",24),_(),y(40,"div",18)(41,"div",19),X("click",function(){W(n);let i=L();return G(i.toggleTagliandi())}),y(42,"div",20),V(43,"i",27),y(44,"span",22),A(45,"Tagliandi"),_()(),V(46,"i",23),_(),se(47,LW,8,3,"div",24),_()()}if(t&2){let n=L();R(5),Vi(" ",n.car().marca," ",n.car().modello," "),R(4),tt(n.car().targa),R(4),ae(n.successMessage()?13:-1),R(),ae(n.errorMessage()?14:-1),R(8),ut("bi-chevron-up",n.anagraficaOpen())("bi-chevron-down",!n.anagraficaOpen()),R(),ae(n.anagraficaOpen()?23:-1),R(7),ut("bi-chevron-up",n.coproprietariOpen())("bi-chevron-down",!n.coproprietariOpen()),R(),ae(n.coproprietariOpen()?31:-1),R(7),ut("bi-chevron-up",n.assicurazioniOpen())("bi-chevron-down",!n.assicurazioniOpen()),R(),ae(n.assicurazioniOpen()?39:-1),R(7),ut("bi-chevron-up",n.tagliandiOpen())("bi-chevron-down",!n.tagliandiOpen()),R(),ae(n.tagliandiOpen()?47:-1)}}var om=class t{route=M(ir);router=M(Ot);carService=M(so);userService=M(oo);car=te(null);loading=te(!0);error=te(null);anagraficaOpen=te(!1);assicurazioniOpen=te(!1);coproprietariOpen=te(!1);tagliandiOpen=te(!1);editMode=te(!1);showNewAssicurazioneForm=te(!1);newAssicurazione=this.getEmptyAssicurazione();showNewCoproprietarioForm=te(!1);newCoproprietario={nome:"",cognome:"",codiceFiscale:""};showNewTagliandoForm=te(!1);newTagliando=this.getEmptyTagliando();successMessage=te(null);errorMessage=te(null);ngOnInit(){let e=this.route.snapshot.paramMap.get("targa");if(!e){this.error.set("Targa non specificata"),this.loading.set(!1);return}this.loadCar(e)}loadCar(e){this.carService.getByTarga(e).subscribe({next:n=>{n?(n.assicurazioni||(n.assicurazioni=[]),this.car.set(n)):this.error.set("Auto non trovata"),this.loading.set(!1)},error:n=>{console.error("Errore nel caricamento dell'auto:",n),this.error.set("Errore nel caricamento dell'auto"),this.loading.set(!1)}})}toggleAnagrafica(){this.anagraficaOpen.set(!this.anagraficaOpen())}toggleAssicurazioni(){this.assicurazioniOpen.set(!this.assicurazioniOpen())}toggleCoproprietari(){this.coproprietariOpen.set(!this.coproprietariOpen())}toggleTagliandi(){this.tagliandiOpen.set(!this.tagliandiOpen())}toggleEditMode(){this.editMode.set(!this.editMode())}saveAnagrafica(){let e=this.car();e&&this.carService.update(e.targa,e).subscribe({next:()=>{this.successMessage.set("Dati auto aggiornati con successo"),this.editMode.set(!1),setTimeout(()=>this.successMessage.set(null),3e3)},error:n=>{console.error("Errore nell'aggiornamento:",n),this.errorMessage.set("Errore nell'aggiornamento dei dati"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}cancelEdit(){this.editMode.set(!1);let e=this.route.snapshot.paramMap.get("targa");e&&this.loadCar(e)}getAssicurazioneAttiva(){let e=this.car();if(!e||!e.assicurazioni)return null;let n=new Date;return n.setHours(0,0,0,0),e.assicurazioni.find(r=>{let i=new Date(r.dataFine);return i.setHours(0,0,0,0),i>=n})||null}getStoricoAssicurazioni(){let e=this.car();if(!e||!e.assicurazioni)return[];let n=new Date;return n.setHours(0,0,0,0),e.assicurazioni.filter(r=>{let i=new Date(r.dataFine);return i.setHours(0,0,0,0),i<n}).sort((r,i)=>new Date(i.dataFine).getTime()-new Date(r.dataFine).getTime())}hasAssicurazioneAttiva(){return this.getAssicurazioneAttiva()!==null}toggleNewAssicurazioneForm(){this.showNewAssicurazioneForm.set(!this.showNewAssicurazioneForm()),this.showNewAssicurazioneForm()&&(this.newAssicurazione=this.getEmptyAssicurazione())}addAssicurazione(){let e=this.car();if(!e)return;if(!this.newAssicurazione.compagnia||!this.newAssicurazione.numeroPolizza||!this.newAssicurazione.dataInizio||!this.newAssicurazione.dataFine||!this.newAssicurazione.costoAnnuale){this.errorMessage.set("Compila tutti i campi obbligatori"),setTimeout(()=>this.errorMessage.set(null),3e3);return}let n=new Date(this.newAssicurazione.dataFine);n.setHours(0,0,0,0);let r=new Date;if(r.setHours(0,0,0,0),n>=r&&this.getAssicurazioneAttiva()){this.errorMessage.set("Esiste gi\xE0 un'assicurazione attiva. Elimina prima quella esistente."),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.newAssicurazione.id=`ass_${Date.now()}`,e.assicurazioni||(e.assicurazioni=[]),e.assicurazioni.push(F({},this.newAssicurazione)),this.carService.update(e.targa,{assicurazioni:e.assicurazioni}).subscribe({next:()=>{this.successMessage.set("Assicurazione aggiunta con successo"),this.showNewAssicurazioneForm.set(!1),this.newAssicurazione=this.getEmptyAssicurazione(),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(e.targa)},error:i=>{console.error("Errore nell'aggiunta dell'assicurazione:",i),this.errorMessage.set("Errore nell'aggiunta dell'assicurazione"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}updateAssicurazione(e){let n=this.car();if(!n)return;let r=n.assicurazioni.findIndex(i=>i.id===e.id);r!==-1&&(n.assicurazioni[r]=F({},e),this.carService.update(n.targa,{assicurazioni:n.assicurazioni}).subscribe({next:()=>{this.successMessage.set("Assicurazione aggiornata con successo"),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(n.targa)},error:i=>{console.error("Errore nell'aggiornamento dell'assicurazione:",i),this.errorMessage.set("Errore nell'aggiornamento dell'assicurazione"),setTimeout(()=>this.errorMessage.set(null),3e3)}}))}deleteAssicurazione(e){let n=this.car();n&&confirm("Sei sicuro di voler eliminare questa assicurazione?")&&(n.assicurazioni=n.assicurazioni.filter(r=>r.id!==e),this.carService.update(n.targa,{assicurazioni:n.assicurazioni}).subscribe({next:()=>{this.successMessage.set("Assicurazione eliminata con successo"),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(n.targa)},error:r=>{console.error("Errore nell'eliminazione dell'assicurazione:",r),this.errorMessage.set("Errore nell'eliminazione dell'assicurazione"),setTimeout(()=>this.errorMessage.set(null),3e3)}}))}formatDate(e){return e?new Date(e).toLocaleDateString("it-IT"):"-"}formatPrice(e){return e?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):"-"}getEmptyAssicurazione(){return{id:"",compagnia:"",numeroPolizza:"",dataInizio:new Date,dataFine:new Date,costoAnnuale:0,coperture:[]}}toggleNewCoproprietarioForm(){this.showNewCoproprietarioForm.set(!this.showNewCoproprietarioForm()),this.showNewCoproprietarioForm()&&(this.newCoproprietario={nome:"",cognome:"",codiceFiscale:""})}addCoproprietario(){let e=this.car();if(!e)return;if(!this.newCoproprietario.nome||!this.newCoproprietario.cognome||!this.newCoproprietario.codiceFiscale){this.errorMessage.set("Compila tutti i campi obbligatori"),setTimeout(()=>this.errorMessage.set(null),3e3);return}let n=this.newCoproprietario.codiceFiscale.toUpperCase();if(e.coProprietari.some(r=>r.codiceFiscale===n)){this.errorMessage.set("Questo utente \xE8 gi\xE0 un coproprietario"),setTimeout(()=>this.errorMessage.set(null),3e3);return}if(e.proprietario.codiceFiscale===n){this.errorMessage.set("Questo utente \xE8 gi\xE0 il proprietario dell'auto"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.userService.getByCodiceFiscale(n).subscribe({next:r=>{if(r)e.coProprietari.push(r),this.saveCoproprietari(e);else{let i={nome:this.newCoproprietario.nome.toUpperCase(),cognome:this.newCoproprietario.cognome.toUpperCase(),codiceFiscale:n,email:null,dataDiNascita:null,annoConseguimentoPatente:null};this.userService.create(i).subscribe({next:o=>{e.coProprietari.push(F({id:o},i)),this.saveCoproprietari(e)},error:o=>{console.error("Errore nella creazione dell'utente:",o),this.errorMessage.set("Errore nella creazione dell'utente"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}},error:r=>{console.error("Errore nella verifica dell'utente:",r),this.errorMessage.set("Errore nella verifica dell'utente"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}saveCoproprietari(e){this.carService.update(e.targa,{coProprietari:e.coProprietari}).subscribe({next:()=>{this.successMessage.set("Coproprietario aggiunto con successo"),this.showNewCoproprietarioForm.set(!1),this.newCoproprietario={nome:"",cognome:"",codiceFiscale:""},setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(e.targa)},error:n=>{console.error("Errore nell'aggiunta del coproprietario:",n),this.errorMessage.set("Errore nell'aggiunta del coproprietario"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}removeCoproprietario(e){let n=this.car();n&&confirm("Sei sicuro di voler rimuovere questo coproprietario?")&&(n.coProprietari=n.coProprietari.filter(r=>r.codiceFiscale!==e),this.carService.update(n.targa,{coProprietari:n.coProprietari}).subscribe({next:()=>{this.successMessage.set("Coproprietario rimosso con successo"),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(n.targa)},error:r=>{console.error("Errore nella rimozione del coproprietario:",r),this.errorMessage.set("Errore nella rimozione del coproprietario"),setTimeout(()=>this.errorMessage.set(null),3e3)}}))}getTagliandiOrdinati(){let e=this.car();return!e||!e.tagliandi?[]:[...e.tagliandi].sort((n,r)=>new Date(r.data).getTime()-new Date(n.data).getTime())}toggleNewTagliandoForm(){this.showNewTagliandoForm.set(!this.showNewTagliandoForm()),this.showNewTagliandoForm()&&(this.newTagliando=this.getEmptyTagliando())}addTagliando(){let e=this.car();if(e){if(!this.newTagliando.data||!this.newTagliando.chilometraggio||!this.newTagliando.descrizione||!this.newTagliando.costo){this.errorMessage.set("Compila tutti i campi obbligatori"),setTimeout(()=>this.errorMessage.set(null),3e3);return}this.newTagliando.id=`tag_${Date.now()}`,e.tagliandi||(e.tagliandi=[]),e.tagliandi.push(F({},this.newTagliando)),this.carService.update(e.targa,{tagliandi:e.tagliandi}).subscribe({next:()=>{this.successMessage.set("Tagliando aggiunto con successo"),this.showNewTagliandoForm.set(!1),this.newTagliando=this.getEmptyTagliando(),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(e.targa)},error:n=>{console.error("Errore nell'aggiunta del tagliando:",n),this.errorMessage.set("Errore nell'aggiunta del tagliando"),setTimeout(()=>this.errorMessage.set(null),3e3)}})}}deleteTagliando(e){let n=this.car();n&&confirm("Sei sicuro di voler eliminare questo tagliando?")&&(n.tagliandi=n.tagliandi.filter(r=>r.id!==e),this.carService.update(n.targa,{tagliandi:n.tagliandi}).subscribe({next:()=>{this.successMessage.set("Tagliando eliminato con successo"),setTimeout(()=>this.successMessage.set(null),3e3),this.loadCar(n.targa)},error:r=>{console.error("Errore nell'eliminazione del tagliando:",r),this.errorMessage.set("Errore nell'eliminazione del tagliando"),setTimeout(()=>this.errorMessage.set(null),3e3)}}))}getEmptyTagliando(){return{id:"",data:new Date,chilometraggio:0,descrizione:"",costo:0}}goBack(){this.router.navigate(["/elenco-auto"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-dettaglio-auto"]],decls:5,vars:3,consts:[[1,"dettaglio-auto-container"],[1,"container"],[1,"text-center","py-5"],["role","alert",1,"alert","alert-danger"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"page-header"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"bi","bi-car-front-fill","me-2"],[1,"page-subtitle"],[1,"text-uppercase"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-left","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"accordion-sections"],[1,"accordion-card"],[1,"accordion-header",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","bi-file-text-fill","me-2"],[1,"accordion-title"],[1,"bi"],[1,"accordion-body"],[1,"bi","bi-people-fill","me-2"],[1,"bi","bi-shield-fill-check","me-2"],[1,"bi","bi-wrench-adjustable-circle-fill","me-2"],[1,"bi","bi-check-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-sm","btn-primary"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label","fw-bold"],["type","text","disabled","",1,"form-control","text-uppercase",3,"value"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel","disabled"],["type","number",1,"form-control",3,"ngModelChange","ngModel","disabled"],["type","date",1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"my-4"],[1,"mb-3"],[1,"col-md-4","mb-3"],["type","text","disabled","",1,"form-control",3,"value"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-success","me-2",3,"click"],[1,"bi","bi-check-lg","me-1"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"bi","bi-x-lg","me-1"],["role","alert",1,"alert","alert-info"],[1,"mb-4"],[1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"new-coproprietario-form"],[1,"coproprietari-list","mb-4"],[1,"coproprietario-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold"],[1,"text-muted","text-uppercase"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"bi","bi-info-circle","me-2"],["type","text",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","text","maxlength","16",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"assicurazione-attiva","mb-4"],[1,"new-assicurazione-form","mb-4"],[1,"bi","bi-exclamation-triangle-fill","fs-3","me-3"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"bi","bi-shield-check","text-success","me-2"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash","me-1"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"assicurazione-storico","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"col-md-4"],[1,"col-md-6","mt-2"],[1,"btn","btn-sm","btn-outline-danger","ms-3",3,"click"],[1,"new-tagliando-form","mb-4"],["type","number","min","0",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12","mb-3"],["rows","4","placeholder","Descrivi le operazioni effettuate (es. CAMBIO OLIO, FILTRI, PASTIGLIE FRENO...)",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],[1,"tagliando-item","mb-3"],[1,"col-md-3"],[1,"col-12","mt-2"],[1,"mb-0","mt-1","text-muted"]],template:function(n,r){n&1&&(y(0,"div",0)(1,"div",1),se(2,gW,4,0,"div",2),se(3,mW,3,1,"div",3),se(4,VW,48,25),_()()),n&2&&(R(2),ae(r.loading()?2:-1),R(),ae(r.error()?3:-1),R(),ae(!r.loading()&&!r.error()&&r.car()?4:-1))},dependencies:[Rt,Wi,Mr,es,qi,rs,ts,oi,uE],styles:[".dettaglio-auto-container[_ngcontent-%COMP%]{padding:2rem 0;min-height:100vh}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1e293b;margin:0;display:flex;align-items:center}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:.5rem 0 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 20px #00000014;overflow:hidden;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 30px #0000001f}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem 2rem;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5568d3,#653a8b)}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#475569;margin-bottom:.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #e2e8f0;padding:.75rem 1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#f1f5f9}.dettaglio-auto-container[_ngcontent-%COMP%]   .assicurazione-attiva[_ngcontent-%COMP%]{background:#f0fdf4;border:2px solid #86efac;border-radius:12px;padding:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .new-assicurazione-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .assicurazione-storico[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .coproprietari-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .coproprietario-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .coproprietario-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.dettaglio-auto-container[_ngcontent-%COMP%]   .new-coproprietario-form[_ngcontent-%COMP%], .dettaglio-auto-container[_ngcontent-%COMP%]   .new-tagliando-form[_ngcontent-%COMP%]{background:#f8fafc;border:2px dashed #cbd5e1;border-radius:12px;padding:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .tagliando-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;transition:all .2s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .tagliando-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.dettaglio-auto-container[_ngcontent-%COMP%]   .tagliando-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word}.dettaglio-auto-container[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:8px;padding:.75rem 1.5rem;font-weight:600;transition:all .3s ease}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 .5rem 1rem #667eea4d}.dettaglio-auto-container[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{border-radius:8px;padding:.75rem 1.5rem;font-weight:600}.dettaglio-auto-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 767px){.dettaglio-auto-container[_ngcontent-%COMP%]{padding:1rem 0}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{padding:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   .accordion-title[_ngcontent-%COMP%]{font-size:1rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.dettaglio-auto-container[_ngcontent-%COMP%]   .accordion-card[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1rem}}"]})};function UW(t,e){if(t&1){let n=Re();y(0,"div",8),V(1,"i",20),A(2),y(3,"button",21),X("click",function(){W(n);let i=L();return G(i.errorMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.errorMessage()," ")}}function jW(t,e){if(t&1){let n=Re();y(0,"div",9),V(1,"i",22),A(2),y(3,"button",21),X("click",function(){W(n);let i=L();return G(i.successMessage.set(null))}),_()()}if(t&2){let n=L();R(2),De(" ",n.successMessage()," ")}}function BW(t,e){if(t&1){let n=Re();y(0,"div",11)(1,"div",12)(2,"input",23),ve("ngModelChange",function(i){W(n);let o=L();return Ee(o.nome,i)||(o.nome=i),G(i)}),_(),y(3,"label",24),V(4,"i",25),A(5,"Nome "),_()(),y(6,"div",12)(7,"input",26),ve("ngModelChange",function(i){W(n);let o=L();return Ee(o.cognome,i)||(o.cognome=i),G(i)}),_(),y(8,"label",27),V(9,"i",25),A(10,"Cognome "),_()()()}if(t&2){let n=L();R(2),me("ngModel",n.nome),R(5),me("ngModel",n.cognome)}}function $W(t,e){if(t&1&&(V(0,"span",28),A(1)),t&2){let n=L();R(),De(" ",n.isRegisterMode()?"Registrazione...":"Accesso..."," ")}}function HW(t,e){if(t&1&&(V(0,"i",29),A(1)),t&2){let n=L();ut("bi-box-arrow-in-right",!n.isRegisterMode())("bi-person-plus-fill",n.isRegisterMode()),R(),De(" ",n.isRegisterMode()?"Registrati":"Accedi"," ")}}var sm=class t{authService=M(pn);router=M(Ot);isRegisterMode=te(!1);isLoading=te(!1);errorMessage=te(null);successMessage=te(null);currentYear=new Date().getFullYear();nome="";cognome="";codiceFiscale="";toggleMode(){this.isRegisterMode.update(e=>!e),this.clearMessages(),this.nome="",this.cognome="",this.codiceFiscale=""}onSubmit(){if(this.clearMessages(),!this.codiceFiscale.trim()){this.errorMessage.set("Inserisci il codice fiscale.");return}if(this.codiceFiscale.length!==16){this.errorMessage.set("Il codice fiscale deve essere di 16 caratteri.");return}if(this.isRegisterMode()&&(!this.nome.trim()||!this.cognome.trim())){this.errorMessage.set("Inserisci nome e cognome.");return}this.isLoading.set(!0),this.isRegisterMode()?this.handleRegister():this.handleLogin()}handleLogin(){this.authService.loginByCodiceFiscale(this.codiceFiscale.toUpperCase()).subscribe({next:e=>{this.isLoading.set(!1),e.success?(this.successMessage.set("Login effettuato con successo!"),setTimeout(()=>{this.router.navigate(["/"])},500)):this.errorMessage.set(e.message||"Errore durante il login.")},error:e=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante il login. Riprova."),console.error("Errore login:",e)}})}handleRegister(){let e={nome:this.nome.trim().toUpperCase(),cognome:this.cognome.trim().toUpperCase(),codiceFiscale:this.codiceFiscale.trim().toUpperCase(),email:null,dataDiNascita:null,annoConseguimentoPatente:null};this.authService.register(e).subscribe({next:n=>{this.isLoading.set(!1),n.success?(this.successMessage.set("Registrazione completata! Accesso in corso..."),setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage.set(n.message||"Errore durante la registrazione.")},error:n=>{this.isLoading.set(!1),this.errorMessage.set("Errore durante la registrazione. Riprova."),console.error("Errore registrazione:",n)}})}clearMessages(){this.errorMessage.set(null),this.successMessage.set(null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-login"]],decls:27,vars:11,consts:[[1,"login-container"],[1,"login-card"],[1,"card-header"],[1,"logo"],[1,"bi","bi-car-front-fill"],[1,"title"],[1,"subtitle"],[1,"card-body"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[3,"ngSubmit"],[1,"register-fields"],[1,"form-floating","mb-3"],["type","text","id","codiceFiscale","placeholder","Codice Fiscale","name","codiceFiscale","maxlength","16","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","codiceFiscale"],[1,"bi","bi-credit-card-fill","me-2"],["type","submit",1,"btn","btn-primary","btn-lg","w-100","mb-3",3,"disabled"],[1,"text-center"],[1,"toggle-text"],["type","button",1,"btn","btn-link",3,"click","disabled"],[1,"bi","bi-exclamation-circle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"bi","bi-check-circle-fill","me-2"],["type","text","id","nome","placeholder","Nome","name","nome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","nome"],[1,"bi","bi-person-fill","me-2"],["type","text","id","cognome","placeholder","Cognome","name","cognome","required","",1,"form-control","text-uppercase",3,"ngModelChange","ngModel"],["for","cognome"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"me-2"]],template:function(n,r){n&1&&(y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4,"i",4),_(),y(5,"h2",5),A(6),_(),y(7,"p",6),A(8),_()(),y(9,"div",7),se(10,UW,4,1,"div",8),se(11,jW,4,1,"div",9),y(12,"form",10),X("ngSubmit",function(){return r.onSubmit()}),se(13,BW,11,2,"div",11),y(14,"div",12)(15,"input",13),ve("ngModelChange",function(o){return Ee(r.codiceFiscale,o)||(r.codiceFiscale=o),o}),_(),y(16,"label",14),V(17,"i",15),A(18,"Codice Fiscale "),_()(),y(19,"button",16),se(20,$W,2,1)(21,HW,2,5),_()(),y(22,"div",17)(23,"p",18),A(24),y(25,"button",19),X("click",function(){return r.toggleMode()}),A(26),_()()()()()()),n&2&&(R(6),tt(r.isRegisterMode()?"Registrati":"Benvenuto"),R(2),tt(r.isRegisterMode()?"Crea il tuo account":"Accedi al tuo account"),R(2),ae(r.errorMessage()?10:-1),R(),ae(r.successMessage()?11:-1),R(2),ae(r.isRegisterMode()?13:-1),R(2),me("ngModel",r.codiceFiscale),R(4),Ie("disabled",r.isLoading()),R(),ae(r.isLoading()?20:21),R(4),De(" ",r.isRegisterMode()?"Hai gi\xE0 un account?":"Non hai un account?"," "),R(),Ie("disabled",r.isLoading()),R(),De(" ",r.isRegisterMode()?"Accedi":"Registrati"," "))},dependencies:[Wi,ja,Mr,qi,Ua,ns,rs,oi,Xo,Rt],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem 1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{width:100%;max-width:500px;background:#fff;border-radius:20px;box-shadow:0 20px 60px #0000004d;overflow:hidden;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:3rem 2rem 2rem;text-align:center}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 6px rgba(0,0,0,.2))}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]{margin-bottom:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:10px;padding:1.5rem .75rem .5rem;height:auto;min-height:58px;font-size:1rem;line-height:1.5;transition:all .3s ease;text-transform:uppercase}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea26}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) ~ label[_ngcontent-%COMP%]{transform:scale(.85) translateY(-.75rem) translate(.15rem)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding:1rem .75rem;color:#64748b;transform-origin:0 0;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.6}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .register-fields[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:10px;padding:1rem;font-weight:600;font-size:1.1rem;transition:all .3s ease;box-shadow:0 4px 15px #667eea66}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #667eea80}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]{color:#64748b;margin:0}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;padding:0 .25rem;transition:all .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2;text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .toggle-text[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:10px;border:none;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#ee5a6f);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-danger[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#51cf66,#40c057);color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:3rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}}"]})};var Yl=(t,e)=>{let n=M(pn),r=M(Ot);return n.isAuthenticated()?!0:r.createUrlTree(["/login"])};var V1=[{path:"login",component:sm},{path:"",component:nm,canActivate:[Yl]},{path:"elenco-auto",component:rm,canActivate:[Yl]},{path:"nuova-auto",component:im,canActivate:[Yl]},{path:"dettaglio-auto/:targa",component:om,canActivate:[Yl],data:{prerender:!1}},{path:"**",redirectTo:"login"}];var mI="Service workers are disabled or not supported by this browser",vc=class{serviceWorker;worker;registration;events;constructor(e,n){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new oe(r=>r.error(new $(5601,!1)));else{let r=null,i=new Ge;this.worker=new oe(l=>(r!==null&&l.next(r),i.subscribe(h=>l.next(h))));let o=()=>{let{controller:l}=e;l!==null&&(r=l,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(It(()=>e.getRegistration().then(l=>{if(!l)throw new $(5601,!1);return l})));let s=new Ge;this.events=s.asObservable();let a=l=>{let{data:h}=l;h?.type&&s.next(h)};e.addEventListener("message",a),n?.get(At,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,n){return new Promise(r=>{this.worker.pipe(en(1)).subscribe(i=>{i.postMessage(F({action:e},n)),r()})})}postMessageWithOperation(e,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=r=>r.type===e:n=r=>e.includes(r.type),this.events.pipe(pt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(en(1))}waitForOperationCompleted(e){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(pt(i=>i.nonce===e),en(1),Y(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},zW=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Ge;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=zr,this.notificationClicks=zr,this.notificationCloses=zr,this.pushSubscriptionChanges=zr,this.subscription=zr;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Y(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Y(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(Y(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(Y(i=>i.data)),this.pushManager=this.sw.registration.pipe(Y(i=>i.pushManager));let r=this.pushManager.pipe(It(i=>i.getSubscription()));this.subscription=new oe(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(mI));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(It(u=>u.subscribe(r)),en(1)).subscribe({next:u=>{this.subscriptionChanges.next(u),s(u)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(mI));let n=r=>{if(r===null)throw new $(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new $(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(en(1),It(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||t)(de(vc))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})(),qW=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=zr,this.unrecoverable=zr;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(mI));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new $(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||t)(de(vc))};static \u0275prov=K({token:t,factory:t.\u0275fac})}return t})();var j1=new H("");function WW(){let t=M(Ql);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let e=M(j1),n=M(Ne),r=M(At);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=t;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=U1(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),U1(+a[0])]);break;default:throw new $(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(e,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(s=>console.error(Yn(5604,!1)))})})}function U1(t){return new Promise(e=>setTimeout(e,t))}function GW(t,e){return new vc(t.enabled!==!1?navigator.serviceWorker:void 0,e)}var Ql=class{enabled;updateViaCache;type;scope;registrationStrategy};function B1(t,e={}){return Dt([zW,qW,{provide:j1,useValue:t},{provide:Ql,useValue:e},{provide:vc,useFactory:GW,deps:[Ql,Xe]},bf(WW)])}var $1={production:!0,firebase:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}};var H1={providers:[ty(),G_(),GE(V1),SR(DR()),B1("ngsw-worker.js",{enabled:!Su(),registrationStrategy:"registerWhenStable:30000"}),EO(()=>wO($1.firebase)),N1(()=>k1())]};var KW=()=>({exact:!0}),am=class t{authService=M(pn);isMobileMenuOpen=te(!1);toggleMobileMenu(){this.isMobileMenuOpen.update(e=>!e)}closeMobileMenu(){this.isMobileMenuOpen.set(!1)}logout(){this.closeMobileMenu(),this.authService.logout()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-header"]],decls:32,vars:2,consts:[[1,"mobile-navbar","d-lg-none"],[1,"container-fluid"],[1,"d-flex","justify-content-between","align-items-center","py-3"],[1,"app-title","mb-0"],[1,"bi","bi-car-front-fill","me-2"],["type","button",1,"btn","btn-link","logout-btn-mobile",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"sidebar","d-none","d-lg-flex"],[1,"sidebar-header"],[1,"app-title"],[1,"bi","bi-car-front-fill"],[1,"ms-2"],[1,"sidebar-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"ms-3"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-link"],[1,"bi","bi-plus-circle-fill"],[1,"sidebar-footer"],["type","button",1,"logout-btn",3,"click"]],template:function(n,r){n&1&&(y(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h1",3),V(4,"i",4),A(5," Car Handler "),_(),y(6,"button",5),X("click",function(){return r.logout()}),V(7,"i",6),_()()()(),y(8,"aside",7)(9,"div",8)(10,"h1",9),V(11,"i",10),y(12,"span",11),A(13,"Car Handler"),_()()(),y(14,"nav",12)(15,"a",13),V(16,"i",14),y(17,"span",15),A(18,"Homepage"),_()(),y(19,"a",16),V(20,"i",17),y(21,"span",15),A(22,"Elenco Auto"),_()(),y(23,"a",18),V(24,"i",19),y(25,"span",15),A(26,"Nuova Auto"),_()()(),y(27,"div",20)(28,"button",21),X("click",function(){return r.logout()}),V(29,"i",6),y(30,"span",11),A(31,"Logout"),_()()()()),n&2&&(R(15),Ie("routerLinkActiveOptions",bu(1,KW)))},dependencies:[Ar,il,Rt],styles:['.mobile-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background:linear-gradient(135deg,#667eea,#764ba2);box-shadow:0 2px 10px #0000001a;z-index:1030}.mobile-navbar[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.5px}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]{color:#fff;font-size:1.8rem;padding:0;border:none;transition:transform .3s ease}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover, .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.mobile-navbar[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .mobile-navbar[_ngcontent-%COMP%]   .logout-btn-mobile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:280px;height:100vh;background:linear-gradient(180deg,#667eea,#764ba2);box-shadow:2px 0 15px #0000001a;flex-direction:column;z-index:1000;overflow-y:auto}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fff;display:flex;align-items:center;letter-spacing:-.5px;margin:0}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem 1.5rem;color:#fffc;font-weight:500;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border-left:3px solid transparent;position:relative;overflow:hidden}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:0;height:100%;background:#ffffff1a;transition:width .3s ease;z-index:0}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:1}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff0d;transform:translate(5px)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover:before{width:100%}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background:#ffffff26;border-left-color:#fff;font-weight:600;box-shadow:inset 0 0 15px #0000001a}.sidebar[_ngcontent-%COMP%]   .sidebar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:after{content:"";position:absolute;right:1rem;top:50%;transform:translateY(-50%);width:8px;height:8px;background:#fff;border-radius:50%;box-shadow:0 0 10px #ffffff80}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(255,255,255,.1)}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;padding:.875rem 1rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#fff3;border-color:#ffffff4d;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.sidebar[_ngcontent-%COMP%]   .sidebar-footer[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000001a}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.sidebar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff80}']})};var YW=()=>({exact:!0}),cm=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-footer"]],decls:13,vars:2,consts:[[1,"bottom-nav","d-lg-none"],["routerLink","/","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"bi","bi-house-fill"],[1,"nav-label"],["routerLink","/elenco-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-card-list"],["routerLink","/nuova-auto","routerLinkActive","active",1,"nav-item"],[1,"bi","bi-plus-circle-fill"]],template:function(n,r){n&1&&(y(0,"nav",0)(1,"a",1),V(2,"i",2),y(3,"span",3),A(4,"Home"),_()(),y(5,"a",4),V(6,"i",5),y(7,"span",3),A(8,"Elenco"),_()(),y(9,"a",6),V(10,"i",7),y(11,"span",3),A(12,"Nuova"),_()()()),n&2&&(R(),Ie("routerLinkActiveOptions",bu(1,YW)))},dependencies:[Ar,il,Rt],styles:['.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;height:65px;background:#fff;box-shadow:0 -2px 10px #0000001a;display:flex;justify-content:space-around;align-items:center;z-index:1000;padding:.5rem 0}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;text-decoration:none;color:#94a3b8;transition:all .3s ease;padding:.5rem;position:relative}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.25rem;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;transition:all .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%) scaleX(0);width:40px;height:3px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:0 0 3px 3px;transition:transform .3s ease}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{color:#667eea}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]:before{transform:translate(-50%) scaleX(1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.1)}.bottom-nav[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]   .nav-label[_ngcontent-%COMP%]{font-weight:600}.bottom-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (max-width: 991.98px){[_nghost-%COMP%]{display:block}}']})};function QW(t,e){t&1&&V(0,"app-header")}function ZW(t,e){t&1&&V(0,"app-footer")}var um=class t{router=M(Ot);title=te("car-handler-pwa");isLoginPage=te(!1);constructor(){this.checkRoute(this.router.url),this.router.events.pipe(pt(e=>e instanceof Rn)).subscribe(e=>{this.checkRoute(e.url)})}checkRoute(e){this.isLoginPage.set(e.includes("/login"))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Tt({type:t,selectors:[["app-root"]],decls:4,vars:4,template:function(n,r){n&1&&(se(0,QW,1,0,"app-header"),y(1,"main"),V(2,"router-outlet"),_(),se(3,ZW,1,0,"app-footer")),n&2&&(ae(r.isLoginPage()?-1:0),R(),ut("login-main",r.isLoginPage()),R(2),ae(r.isLoginPage()?-1:3))},dependencies:[tl,am,cm,Rt],styles:["main[_ngcontent-%COMP%]{padding:2rem 0}@media (min-width: 992px){main[_ngcontent-%COMP%]{margin-left:280px;min-height:100vh}}@media (max-width: 991.98px){main[_ngcontent-%COMP%]{margin-top:70px;margin-bottom:65px;min-height:calc(100vh - 135px)}}main.login-main[_ngcontent-%COMP%]{margin:0;padding:0;min-height:100vh}"]})};EE(um,H1).catch(t=>console.error(t));
